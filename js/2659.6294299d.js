(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2659],{22659:n=>{n.exports="### 移动端 click 事件存在 300ms 时延\n\n移动端 `click` 事件存在 `300ms` 时延的原因: 设备需要根据这段时间用户的操作来判断是单点还是双点。\n\n解决思路: 使用 `touchStart` 和 `touchEnd` 来取代 `click` 事件。\n\n> [相关链接](https://juejin.im/entry/6844903427147825165)\n\n### 点击穿透\n\n点击 a 标签下的一个返回按钮, 触发了 a 中的 href 跳转\n\n方法同上, 也是封装一个 `tap` 方法;\n\n### 一些移动端上的有用的 css 属性\n\n* 在 ios 上增加 scroll 的灵敏度(出现滑动条): `-webkit-overflow-scrolling: touch;`\n* 滑动场景下防止用户选中文字: `use-select: none;`\n\n### scrollTo\n\n`scrollTo` 这个 api 作用在滚动子元素的父节点上。但是如果要有平缓的动画效果用其的属性 `behavior: 'smooth'` 是不生效的。解决方案如下:\n\n1. 方案一: 结合 `setTimeout` 使用 `css transition` 属性, 在异步时间后移除 `transition`;\n2. 方案二: 使用 `requestAnimationFrame` 来完成效果;\n\n### 移动端移除滚动条\n\n移除滚动条有一个 css 属性 `-webkit-scrollbar`, 其用法如下:\n\n```css\n&::-webkit-scrollbar {\n  display: none;\n  width: 0px;\n}\n```\n\n但是在 `ios` 是不生效的, 解决方案如下:\n\n以竖直滑动为例: 在外层设置宽度为 400px(假设内容宽度为 400px)并设置 `overflow-x: hidden`, 内层宽度为 417px(17px 为滚动条宽度)。\n\n### 解决 ios 下输入框自带圆角的问题;\n\n```css\n.demo {\n  -webkit-appearance: none;\n}\n```\n\n> 见 SearchBar 组件开发\n\n### ios 下 input 光标大小调整\n\n在 ios 中: 该行无文字时, 光标高度与 `line-height` 一致; 该行有文字时, 光标高度从 `input` 顶部到文字底部(这两种情况都是在有设定 `line-height` 的时候)，如果没有 `line-height`，则是与 `font-size` 一致(可能表述有误差)。\n\n解决方法如下: 设置 `line-height` 为一个较小值(期望的光标大小), 再用 `padding` 来撑开 `input` 的区域;\n\n> 见 SearchBar 组件开发\n\n### 移动端 1px 解决方案\n\n手机屏幕上存在 `devicePixelRatio` 属性, 其值为物理像素和屏幕像素之比。\n\n方案一: 伪元素 + `transform: scaleY(0.5)`;\n方案二: 使用 box-shadow。\n\n`box-shadow` 这个方案有个缺陷是画上划线容易。方式如下:\n\n```\nbox-shadow: 0px -1px 0px 0px rgba(245, 245, 245, 1);\n```\n\n但是缺陷是画下划线不便, 需要配合 `position: relative` 以及 `z-index` 来调整层级。\n\n### 滑动穿透解决方案\n\n- [滑动穿透解决方案](https://github.com/MuYunyun/blog/blob/master/React/%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91/modal.md#%E6%BB%91%E5%8A%A8%E7%A9%BF%E9%80%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88)\n\n### 移动端适配\n\n#### 分辨率\n\n* PPI(Pixel Per Inch): 每英寸包括的像素数\n* DPI(Dot Per Inch): 每英寸包括的点数\n\n#### 设备独立像素\n\n* DP 或者 DIP(Device Independent Pixels): 设备独立像素, 用于安卓系统;\n* PT(Point): 用于 IOS 系统;\n\n#### 设备像素比\n\n* DPR(device pixel ratio)\n\n* 物理像素与设备独立像素的比值, 浏览器上获取设备像素比的方法 `window.devicePixelRatio`;\n\n### reference link\n\n* [关于移动端适配，你必须要知道的](https://juejin.im/post/5cddf289f265da038f77696c#heading-3): 此篇文章总结得蛮好的。\n\n### IOS8 兼容情况\n\n`Symbol`、`Map` 在 ios8 中是不支持的\n\n![](http://with.muyunyun.cn/2da80724739178534ac4bb03459654d5.jpg)\n\n后续陆续兼容以下属性\n\n* 数组/字符串的 `includes` 方法, ios9 开始支持\n* document.body.append:\n\n### IOS9 兼容情况\n\n* `window.scrollTo` 在 IOS12.1 以下的机子下是不兼容的;\n* `insertAdjacentHTML` 虽然在 [caniuse](https://caniuse.com/#search=insertAdjacentHTML) 中看起来兼容性很好, 但是在 IOS10.2 以下的机子中部分节点是没有这个 api 的, 所以从中也能看出 caniuse 可以作为部分参考, 但不能全信;\n\n### 其它兼容\n\n* `new Date('xxxx-xx-xx xx:xx')` 在 IOS 系统中会报 Invalid Date, 在安卓中正常。\n  * 兼容方法: `new Date('xxxx/xx/xx xx:xx')`, 经验证该方法在 IOS 与 Android 都可运行。\n\n### user-select\n\n```css\n.demo {\n  /* 阻止触摸选中文字 */\n  user-select: none;\n  /* 阻止 b 端 app 保存图片的弹框弹出 */\n  pointer-events: none;\n  /* 长按会选中文字 */\n  -webkit-touch-callout: none;\n}\n```\n\n### ios13\n\n* 在弹框类组件中使用 input 光标会消失\n\n见 [issue](https://github.com/ionic-team/cordova-plugin-ionic-webview/issues/449#issuecomment-541907141)\n\n### 移动开发指南\n\n* H5: 需要发版\n* 组件包: 不需要发版\n* 原生: 性能高\n\n### IOS && Android\n\n1. scrollTop 区分\n\nAnchor 组件\n\n```js\n// document.documentElement.scrollTop do effect in ios, and document.body.scrollTop do effect in android.\nconst scrollTop = document.documentElement.scrollTop || document.body.scrollTop\n```\n\n2. font-weight 在安卓机上失效: 0 ~ 400 一种粗细, 500 ~ 900 一种粗细。"}}]);