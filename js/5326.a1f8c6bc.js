(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5326],{55326:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var n=t(59713),o=t.n(n),s=t(6479),a=t.n(s),p=(t(67294),t(3905));function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){o()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var l={};function m(e){var r=e.components,t=a()(e,["components"]);return(0,p.kt)("wrapper",c(c(c({},l),t),{},{components:r,mdxType:"MDXLayout"}),(0,p.kt)("h2",null,"错误处理"),(0,p.kt)("h3",null,"捕获和抛出异常的时机"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"使用第三方库通常需要进行捕获;"),(0,p.kt)("li",{parentName:"ul"},"写给他人使用的第三方库则通常需要抛出相应异常;")),(0,p.kt)("h3",null,"自定义错误类型"),(0,p.kt)("p",null,"下面提供 ",(0,p.kt)("inlineCode",{parentName:"p"},"ES5")," 和 ",(0,p.kt)("inlineCode",{parentName:"p"},"ES6")," 两种自定义错误类型的写法"),(0,p.kt)("pre",null,(0,p.kt)("code",c({parentName:"pre"},{className:"language-js"}),"// ES6\nclass CustomError extends Error {\n  constructor(message) {\n    super(message)\n    this.name = 'CustomError'\n  }\n}\n\n// ES5\nfunction CustomError(message) {\n  this.name = 'CustomError'\n  this.message = message\n  Error.captureStackTrace(this, CustomError)\n}\n\nCustomError.prototype = new Error()\nCustomError.prototype.constructor = CustomError\n")),(0,p.kt)("h3",null,"记录错误日志"),(0,p.kt)("p",null,"记录错误日志通常使用 ",(0,p.kt)("inlineCode",{parentName:"p"},"<img>")," 标签, 其可以避免跨域, 用法如下:"),(0,p.kt)("pre",null,(0,p.kt)("code",c({parentName:"pre"},{className:"language-js"}),"function logError(msg) {\n  const img = new Image()\n  img.src = `/log?${encodeURIComponent(msg)}`\n}\n")))}m.isMDXComponent=!0}}]);