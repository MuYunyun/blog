(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2761],{52761:(n,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>i});var r=t(59713),a=t.n(r),p=t(6479),l=t.n(p),u=(t(67294),t(3905));function s(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach((function(e){a()(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var c={};function i(n){var e=n.components,t=l()(n,["components"]);return(0,u.kt)("wrapper",o(o(o({},c),t),{},{components:e,mdxType:"MDXLayout"}),(0,u.kt)("h3",null,"安装 nginx"),(0,u.kt)("pre",null,(0,u.kt)("code",o({parentName:"pre"},{}),"sudo apt update\n\n# 安装 Nginx\nsudo apt install nginx\n\n# 设置开机启动\nsudo systemctl enable nginx\n\n# 开启 nginx\nsudo systemctl start nginx\n\n# 重启 nginx\nsudo systemctl restart nginx\n\n# nginx 重新加载配置文件\nsudo systemctl reload nginx\n\n# 停止 nginx\nsudo service nginx stop\nsudo systemctl stop nginx\n\n# 强制杀死 nginx\nsudo pkill -9 nginx\n")),(0,u.kt)("p",null,"安装好以后, 执行 ",(0,u.kt)("inlineCode",{parentName:"p"},"sudo systemctl status nginx"),", 可以看到"),(0,u.kt)("pre",null,(0,u.kt)("code",o({parentName:"pre"},{}),"nginx.service - A high performance web server and a reverse proxy server\n...\n")),(0,u.kt)("h3",null,"验证 nginx 有效"),(0,u.kt)("p",null,"以配置域名 frp.muyunyun.cn 为例，新建配置文件 ",(0,u.kt)("inlineCode",{parentName:"p"},"/etc/nginx/conf.d/frp.muyunyun.cn.conf")),(0,u.kt)("pre",null,(0,u.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"touch /etc/nginx/conf.d/frp.muyunyun.cn.conf\n")),(0,u.kt)("p",null,"在 ",(0,u.kt)("inlineCode",{parentName:"p"},"/etc/nginx/conf.d/frp.muyunyun.cn")," 中添加 http 服务相关内容"),(0,u.kt)("pre",null,(0,u.kt)("code",o({parentName:"pre"},{}),"server {\n    server_name      frp.muyunyun.cn;\n    listen           80;\n    root             /usr/share/nginx/html/frp.muyunyun.cn;\n\n    # location / {\n    #    proxy_pass http://127.0.0.1:8080;\n    #     proxy_set_header Host $host:80;\n    #    proxy_set_header X-Real-IP $remote_addr;\n    #    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    # }\n\n    error_page 404 /404.html;\n        location = /40x.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n        location = /50x.html {\n    }\n}\n")),(0,u.kt)("p",null,"新建 frp.muyunyun.cn 对应的网站文件夹"),(0,u.kt)("pre",null,(0,u.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"mkdir -p /usr/share/nginx/html/frp.muyunyun.cn\n")),(0,u.kt)("p",null,"新建文件"),(0,u.kt)("pre",null,(0,u.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"touch /usr/share/nginx/html/frp.muyunyun.cn/index.html\n")),(0,u.kt)("p",null,"在 /usr/share/nginx/html/fpr.muyunyun.cn/index.html 中输入"),(0,u.kt)("pre",null,(0,u.kt)("code",o({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>云随风</title>\n</head>\n<body>Test</body>\n</html>\n')),(0,u.kt)("p",null,"控制台输入 ",(0,u.kt)("inlineCode",{parentName:"p"},"sudo systemctl restart nginx"),"。"),(0,u.kt)("p",null,"在浏览器访问 ",(0,u.kt)("a",o({parentName:"p"},{href:"http://frp.muyunyun.cn/"}),"http://frp.muyunyun.cn/")," 可以看到目标页面，不过过了一段时间后，页面提示",(0,u.kt)("inlineCode",{parentName:"p"},"网站暂时无法访问，该网站未根据工信部相关法律规则进行备案"),"，",(0,u.kt)("a",o({parentName:"p"},{href:"https://icp-faq.dnspod.cn/why"}),"了解更多备案相关内容"),"。"),(0,u.kt)("p",null,(0,u.kt)("img",o({parentName:"p"},{src:"http://with.muyunyun.cn/04afbf893d08548ebd06a85488389298.jpg",alt:null}))),(0,u.kt)("p",null,"下面开始添加 https，尝试解决上述问题。"),(0,u.kt)("h3",null,"安装 acme.sh"),(0,u.kt)("pre",null,(0,u.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"sudo curl https://get.acme.sh | sh\nsource ~/.bashrc\n")),(0,u.kt)("p",null,"操作中若出现权限不足相关问题比如 ",(0,u.kt)("inlineCode",{parentName:"p"},"./acme.sh: 2249: cannot create /home/ubuntu/.bashrc: Permission denied"),"，可以使用如下命令:"),(0,u.kt)("pre",null,(0,u.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"sudo chmod 777 .bashrc\n")))}i.isMDXComponent=!0}}]);