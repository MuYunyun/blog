(self.webpackChunkblog=self.webpackChunkblog||[]).push([[421],{421:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>m});var t=r(59713),a=r.n(t),s=r(6479),p=r.n(s),l=(r(67294),r(3905));function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){a()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var c={};function m(e){var n=e.components,r=p()(e,["components"]);return(0,l.kt)("wrapper",u(u(u({},c),r),{},{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"在给",(0,l.kt)("a",u({parentName:"p"},{href:"https://muyunyun.cn/blog/2a97pq3a"}),"树莓派创建好 Docker 环境"),"后，本文记录给树莓派部署 RSSHub 的过程。"),(0,l.kt)("p",null,"RSShub 本质是一个为各类网页生成 RSS 信息的爬虫集合，我们通过阅读 RSSHub 的文档，可以获得各类知名网站的 RSS 信息。"),(0,l.kt)("h3",null,"获取 docker-compose.yml"),(0,l.kt)("pre",null,(0,l.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/\nsudo mkdir rsshub\nsudo chmod 777 -R rsshub\ncd /opt/rsshub\nwget https://raw.githubusercontent.com/DIYgod/RSSHub/master/docker-compose.yml\n")),(0,l.kt)("p",null,"docker-compose.yml 内的内容为:"),(0,l.kt)("pre",null,(0,l.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"version: '3'\n\nservices:\n    rsshub:\n        image: diygod/rsshub\n        restart: always\n        ports:\n            - '1200:1200'\n        environment:\n            NODE_ENV: production\n            CACHE_TYPE: redis\n            REDIS_URL: 'redis://redis:6379/'\n            PUPPETEER_WS_ENDPOINT: 'ws://browserless:3000'\n        depends_on:\n            - redis\n            - browserless\n\n    browserless:\n        # See issue 6680\n        image: browserless/chrome:1.43-chrome-stable\n        restart: always\n        ulimits:\n            core:\n                hard: 0\n                soft: 0\n\n    redis:\n        image: redis:alpine\n        restart: always\n        volumes:\n            - redis-data:/data\n\nvolumes:\n    redis-data:\n")),(0,l.kt)("p",null,"从配置信息中我们可以看出，服务端口为 1200。"),(0,l.kt)("h3",null,"创建 volume 持久化 Redis 缓存"),(0,l.kt)("pre",null,(0,l.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo docker volume create redis-data\n")),(0,l.kt)("h3",null,"启动 RSShub"),(0,l.kt)("pre",null,(0,l.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/rsshub\nsudo docker-compose up -d\n")),(0,l.kt)("p",null,(0,l.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/ca92893197e45c4753eab1f72bfc9abb.jpg",alt:null}))),(0,l.kt)("p",null,"访问本地树莓派 ip 的 1200 端口，可以看到 RSS 已经启动在 1200 端口上了。"),(0,l.kt)("p",null,"进入 ",(0,l.kt)("inlineCode",{parentName:"p"},"/opt/frp_0.37.0_linux_arm64"),"，在 frpc.ini 中添加以下配置:"),(0,l.kt)("pre",null,(0,l.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/frp_0.37.0_linux_arm64\nsudo vim frpc.ini\n")),(0,l.kt)("pre",null,(0,l.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"[rsshub-frp-muyunyun-cn-1200]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 1200\nremote_port = 1200\n")),(0,l.kt)("p",null,"重启 frpc，此时可以在公网中访问到新部署的 RSSHub 服务。"),(0,l.kt)("pre",null,(0,l.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/frp_0.37.0_linux_arm64\npm2 restart start_frpc.sh\n")),(0,l.kt)("p",null,(0,l.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/99cc2f01fb172287d2a758e88c3fd9f2.jpg",alt:null}))))}m.isMDXComponent=!0}}]);