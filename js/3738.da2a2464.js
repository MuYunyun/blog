(self.webpackChunkblog=self.webpackChunkblog||[]).push([[3738],{23738:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var l=n(59713),a=n.n(l),r=n(6479),i=n.n(r),p=(n(67294),n(3905));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={};function u(e){var t=e.components,n=i()(e,["components"]);return(0,p.kt)("wrapper",k(k(k({},m),n),{},{components:t,mdxType:"MDXLayout"}),(0,p.kt)("h3",null,"移动端场景下使用 Charles 代理的优点"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"解决",(0,p.kt)("inlineCode",{parentName:"li"},"移动端真机接口调用不便查看"),"的问题。"),(0,p.kt)("li",{parentName:"ul"},"有利于解决",(0,p.kt)("inlineCode",{parentName:"li"},"发布到线上环境判断接口是否正常"),"的问题。")),(0,p.kt)("h3",null,"场景一: 代理查询接口请求数据"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"使用场景"),": 使用代理查询接口请求数据, 解决",(0,p.kt)("inlineCode",{parentName:"p"},"移动端真机访问页面时查看不了接口调用情况"),"的问题。"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"方法:",(0,p.kt)("ol",{parentName:"li"},(0,p.kt)("li",{parentName:"ol"},"打开 Charles, 配置手机可以代理的端口。菜单栏点击 ",(0,p.kt)("inlineCode",{parentName:"li"},"Proxy")," -> ",(0,p.kt)("inlineCode",{parentName:"li"},"Proxy Settings"),"。\n",(0,p.kt)("img",k({parentName:"li"},{src:"http://with.muyunyun.cn/ec841f0461fa4b37cc333d24127785ee.jpg-400",alt:null}))),(0,p.kt)("li",{parentName:"ol"},"在手机中打开配置代理页面, 设置代理地址。",(0,p.kt)("ol",{parentName:"li"},(0,p.kt)("li",{parentName:"ol"},"服务器地址: 代理控制台中(内网互联)手机抓包代理列表中的",(0,p.kt)("inlineCode",{parentName:"li"},"代理 host"),"。"),(0,p.kt)("li",{parentName:"ol"},"端口: 代理控制台中(内网互联)手机抓包代理列表中的",(0,p.kt)("inlineCode",{parentName:"li"},"代理端口"),"(在上图中, 映射至端口 8888)。"),(0,p.kt)("li",{parentName:"ol"},"认证: 默认关闭。"))),(0,p.kt)("li",{parentName:"ol"},"Charles 上设置要抓包的 https 地址。(http 地址则不需要进行这一步)",(0,p.kt)("ol",{parentName:"li"},(0,p.kt)("li",{parentName:"ol"},"菜单栏点击 ",(0,p.kt)("inlineCode",{parentName:"li"},"Proxy")," -> ",(0,p.kt)("inlineCode",{parentName:"li"},"SSL Proxying Settings")))),(0,p.kt)("li",{parentName:"ol"},"手机装证书。注意此时手机一定要连代理，然后用手机浏览器访问 ",(0,p.kt)("inlineCode",{parentName:"li"},"chls.pro/ssl"),"。浏览器会自动下载软件然后安装。(如果无法自动下载, 请确认内网互联, 手机抓包配置是否正确。)")))),(0,p.kt)("h3",null,"技巧二: 使用本地前端代码调试测试环境数据"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"使用场景"),": 使用本地前端代码调试测试环境数据"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"方法: 将测试环境域名代理到本地。",(0,p.kt)("ol",{parentName:"li"},(0,p.kt)("li",{parentName:"ol"},"菜单栏点击 ",(0,p.kt)("inlineCode",{parentName:"li"},"Tools")," -> ",(0,p.kt)("inlineCode",{parentName:"li"},"Map Remote"),"。"),(0,p.kt)("li",{parentName:"ol"},"配置测试环境与本地域名。")))),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"此时需要将系统设置中的网络代理一栏，全部取消勾选(这里安利笔者写的 ",(0,p.kt)("a",k({parentName:"p"},{href:"https://"}),"flow 插件"),"，支持快速切换代理环境)，然后重启 Charles。")),(0,p.kt)("p",null,(0,p.kt)("img",k({parentName:"p"},{src:"http://with.muyunyun.cn/863fdb087e9b32eabf0c4b3a607235f8.jpg",alt:null}))),(0,p.kt)("h3",null,"场景一与场景二结合使用"),(0,p.kt)("p",null,"场景一与场景二是能同时使用的，以达到在真机侧调试本地的代码访问线上的数据。"),(0,p.kt)("h3",null,"Charles 的不足?"))}u.isMDXComponent=!0}}]);