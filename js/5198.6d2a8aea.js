(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5198],{95198:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var l=a(59713),n=a.n(l),i=a(6479),r=a.n(i),o=(a(67294),a(3905));function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={};function c(e){var t=e.components,a=r()(e,["components"]);return(0,o.kt)("wrapper",p(p(p({},u),a),{},{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h3",null,"在 React 中构建移动端优先的 web 动画"),(0,o.kt)("p",null,"移动端优先动画是指在移动设备上开发的, 旨在在移动浏览器而非桌面浏览器的上下文中工作的动画。它有着类似原生 App 的交互体验, 尤其是体贴的手势交互, 同时即使在中低档设备上其也具有不错的流畅体验。"),(0,o.kt)("h3",null,"Types of gestures"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Navigational gestures",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Tap"),(0,o.kt)("li",{parentName:"ul"},"Scroll and pan"),(0,o.kt)("li",{parentName:"ul"},"Drag"),(0,o.kt)("li",{parentName:"ul"},"Swipe"),(0,o.kt)("li",{parentName:"ul"},"Pinch"))),(0,o.kt)("li",{parentName:"ul"},"Action gestures",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Tap"),(0,o.kt)("li",{parentName:"ul"},"Long press"),(0,o.kt)("li",{parentName:"ul"},"Swipe"))),(0,o.kt)("li",{parentName:"ul"},"Transform gestures",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Double tap"),(0,o.kt)("li",{parentName:"ul"},"Pinch"),(0,o.kt)("li",{parentName:"ul"},"Compound gestures")))),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("a",p({parentName:"p"},{href:"https://material.io/design/interaction/gestures.html#types-of-gestures"}),"Types of gestures"))),(0,o.kt)("h3",null,"难点罗列"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"scroll、swipe-to-refresh 会受到浏览器默认行为干扰;"),(0,o.kt)("li",{parentName:"ul"},"触摸反应迟钝, 没有直接操作的感觉;"),(0,o.kt)("li",{parentName:"ul"},"反物理直觉;"),(0,o.kt)("li",{parentName:"ul"},"兼容中、低设备;")),(0,o.kt)("h3",null,"框架方案"),(0,o.kt)("p",null,"The way to take is usually ",(0,o.kt)("inlineCode",{parentName:"p"},"an animation library")," with ",(0,o.kt)("inlineCode",{parentName:"p"},"a gesture hooks"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",p({parentName:"li"},{href:"https://github.com/koenbok/Framer"}),"Framer")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",p({parentName:"li"},{href:"https://github.com/react-spring/react-spring"}),"react spring")," + ",(0,o.kt)("a",p({parentName:"li"},{href:"https://github.com/react-spring/react-use-gesture"}),"react-use-gesture")),(0,o.kt)("li",{parentName:"ul"},"animation library(",(0,o.kt)("a",p({parentName:"li"},{href:"https://github.com/juliangarnier/anime"}),"anime"),") + ",(0,o.kt)("a",p({parentName:"li"},{href:"https://github.com/dogfessional/react-swipeable"}),"react-swipeable")),(0,o.kt)("li",{parentName:"ul"},"animation library(",(0,o.kt)("a",p({parentName:"li"},{href:"https://github.com/greensock/GSAP"}),"GSAP"),") + ",(0,o.kt)("a",p({parentName:"li"},{href:"https://github.com/hammerjs/hammer.js/"}),"Hammer.js"))),(0,o.kt)("h3",null,"Some Principles"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Immediate Response"),": If not response immediately, it feels super disconnected. ",(0,o.kt)("a",p({parentName:"li"},{href:"https://mobile-first-animation.netlify.com/21"}),"demo"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Carousel 组件, 目前 Tab 的滑动存在缺陷;"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Scroll Decay"),": The concepts of scroll decay can help us decide how our UIs should respect to users interaction. ",(0,o.kt)("a",p({parentName:"li"},{href:"https://mobile-first-animation.netlify.com/23"}),"demo"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-webkit-overflow-scrolling: touch"),";(only used in ios > 5, but not success)"),(0,o.kt)("li",{parentName:"ul"},"Picker/DatePicker 组件;"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Rubberbanding"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"PopOver 组件;")))),(0,o.kt)("h3",null,"Touch cancellation"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Use the ",(0,o.kt)("inlineCode",{parentName:"li"},"touch-action")," CSS property to disable default browser behaviors with precision.")),(0,o.kt)("p",null,"use touch-action before:"),(0,o.kt)("p",null,(0,o.kt)("img",p({parentName:"p"},{src:"http://with.muyunyun.cn/2f284758868304dabad94d2a25500562.gif",alt:null}))),(0,o.kt)("p",null,"use touch-action after:"),(0,o.kt)("p",null,(0,o.kt)("img",p({parentName:"p"},{src:"http://with.muyunyun.cn/a458a78d287e08627f4dd6b1502fc33e.gif",alt:null}))),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",p({parentName:"li"},{href:"https://www.chenhuijing.com/touch-action/"}),"Interactive touch-action demo")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",p({parentName:"li"},{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action"}),"Mozilla introduction to touch-action"))),(0,o.kt)("h3",null,"Passive event listeners"),(0,o.kt)("p",null,"If you decide not to cancel the scroll, you can set the ",(0,o.kt)("strong",{parentName:"p"},"passive")," in the addEventListener. If that, it can enable the browsers to scroll the page immediately."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",p({parentName:"li"},{href:"https://developers.google.com/web/updates/2016/06/passive-event-listeners"}),"passive-event-listeners"))),(0,o.kt)("ul",p({},{className:"contains-task-list"}),(0,o.kt)("li",p({parentName:"ul"},{className:"task-list-item"}),(0,o.kt)("input",p({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,o.kt)("a",p({parentName:"li"},{href:"https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md"}),"Passive events listener explainer"))),(0,o.kt)("h3",null,"Scroll"),(0,o.kt)("p",null,"Problem 1: scroll chaining"),(0,o.kt)("p",null,"When the user reachs a 'scroll boundary', the content behind the drawer or modal starts scrolling!"),(0,o.kt)("p",null,(0,o.kt)("img",p({parentName:"p"},{src:"https://developers.google.com/web/updates/images/2017/11/overscroll-behavior/drawer-scroll.mp4?hl=zh_cn",alt:null}))),(0,o.kt)("p",null,(0,o.kt)("img",p({parentName:"p"},{src:"http://with.muyunyun.cn/5ad52dbc5716fb92b823898557cc94fa.gif",alt:null}))),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",p({parentName:"li"},{href:"https://drafts.csswg.org/css-overscroll/"}),"overscroll-behavior"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"auto: default;"),(0,o.kt)("li",{parentName:"ul"},"contain: prevent scroll chaining, keep the overflow effects within the node self;"),(0,o.kt)("li",{parentName:"ul"},"none: prevent scroll chaining, prevent overflow effects within the node self.")))),(0,o.kt)("p",null,(0,o.kt)("img",p({parentName:"p"},{src:"http://with.muyunyun.cn/130f116b88477fba5725033e4245927a.jpg",alt:null}))),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("a",p({parentName:"p"},{href:"https://developers.google.com/web/updates/2017/11/overscroll-behavior"}),"Overscroll behavior"),": read Introducing overscroll-behavior")),(0,o.kt)("h3",null,"resource links"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",p({parentName:"li"},{href:"https://developer.apple.com/videos/play/wwdc2018/803/"}),'Apple\'s "Designing Fluid Interfaces" talk')),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",p({parentName:"li"},{href:"https://medium.com/@nathangitter/building-fluid-interfaces-ios-swift-9732bb934bf5"}),"Implementation of iOS animation principles")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",p({parentName:"li"},{href:"https://www.youtube.com/watch?v=laPsceJ4tTY&list=PLPxbbTqCLbGHPxZpw4xj_Wwg8-fdNxJRh&index=21"}),"Progressive Web Animations | Alexandra Holachek"))),(0,o.kt)("h3",null,"Spring Animations"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",p({parentName:"li"},{href:"https://github.com/jenox/UIKit-Playground/tree/master/01-Demystifying-UIKit-Spring-Animations"}),"springs in animations"))),(0,o.kt)("p",null,(0,o.kt)("img",p({parentName:"p"},{src:"http://with.muyunyun.cn/21585e988e682457131948346fc8949d.jpg",alt:null}))),(0,o.kt)("h4",null,"Springs & Gestures"),(0,o.kt)("ul",p({},{className:"contains-task-list"}),(0,o.kt)("li",p({parentName:"ul"},{className:"task-list-item"}),(0,o.kt)("input",p({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,o.kt)("a",p({parentName:"li"},{href:"https://medium.com/ios-os-x-development/gestures-in-fluid-interfaces-on-intent-and-projection-36d158db7395"}),"In-depth look at projection"),": 以借助这里的 Projection 公式来优化改进"),(0,o.kt)("li",p({parentName:"ul"},{className:"task-list-item"}),(0,o.kt)("input",p({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,o.kt)("a",p({parentName:"li"},{href:"https://ariya.io/2013/08/javascript-kinetic-scrolling-part-1"}),"In-depth exploration of momentum scrolling"))),(0,o.kt)("h4",null,"Touch on the web"),(0,o.kt)("ul",p({},{className:"contains-task-list"}),(0,o.kt)("li",p({parentName:"ul"},{className:"task-list-item"}),(0,o.kt)("input",p({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,o.kt)("a",p({parentName:"li"},{href:"https://developers.google.com/web/fundamentals/design-and-ux/input/touch"}),"Google introduction to touch on the web")),(0,o.kt)("li",p({parentName:"ul"},{className:"task-list-item"}),(0,o.kt)("input",p({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,o.kt)("a",p({parentName:"li"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events"}),"Mozilla introduction to pointer events"))))}c.isMDXComponent=!0}}]);