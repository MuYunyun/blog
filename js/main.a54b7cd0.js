/*! For license information please see main.a54b7cd0.js.LICENSE.txt */
(()=>{var e={26981:(e,t,n)=>{"use strict";n(11983);var r,a=(r=n(11543))&&r.__esModule?r:{default:r};a.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),a.default._babelPolyfill=!0},11983:(e,t,n)=>{"use strict";n(15033),n(88033),n(72863),n(56141),n(74316),n(117),n(86863),n(30290),n(44007),n(91235),n(58930),n(31794),n(1523),n(35666)},15033:(e,t,n)=>{n(98997),n(57944),n(65388),n(10266),n(57557),n(63386),n(30081),n(54943),n(40192),n(24371),n(17026),n(16736),n(7260),n(4649),n(88325),n(52798),n(86911),n(84394),n(78769),n(729),n(99383),n(19315),n(15072),n(10348),n(71028),n(2610),n(64007),n(87616),n(86762),n(43316),n(93019),n(40293),n(60640),n(96589),n(93210),n(12372),n(30511),n(6781),n(74434),n(14783),n(95521),n(94093),n(86378),n(52380),n(2803),n(63725),n(7977),n(14192),n(2940),n(35731),n(79382),n(38877),n(22539),n(39820),n(28417),n(74333),n(82858),n(22058),n(95472),n(57001),n(57492),n(50447),n(65624),n(51263),n(65193),n(28241),n(96723),n(9394),n(66938),n(11961),n(69659),n(23354),n(99620),n(638),n(32338),n(20641),n(21575),n(75611),n(91033),n(50160),n(65271),n(18221),n(92523),n(65441),n(88375),n(9106),n(9139),n(33352),n(53289),n(35943),n(59483),n(88292),n(86174),n(86975),n(71412),n(30360),n(18394),n(83118),n(78772),n(71308),n(87080),n(58615),n(35244),n(39544),n(45475),n(33770),n(5201),n(61385),n(12813),n(82509),n(98253),n(57391),n(33307),n(63315),n(12920),n(95443),n(69815),n(43771),n(76935),n(17846),n(56403),n(51200),n(30951),n(10029),n(69310),n(66722),n(18372),n(14604),n(84781),n(38416),n(24395),n(49649),n(32475),n(12924),n(16337),n(83286),n(47225),n(68766),e.exports=n(14411)},72863:(e,t,n)=>{n(98125),e.exports=n(14411).Array.flatMap},88033:(e,t,n)=>{n(49348),e.exports=n(14411).Array.includes},58930:(e,t,n)=>{n(1768),e.exports=n(14411).Object.entries},44007:(e,t,n)=>{n(59223),e.exports=n(14411).Object.getOwnPropertyDescriptors},91235:(e,t,n)=>{n(67442),e.exports=n(14411).Object.values},31794:(e,t,n)=>{"use strict";n(12813),n(14936),e.exports=n(14411).Promise.finally},74316:(e,t,n)=>{n(20239),e.exports=n(14411).String.padEnd},56141:(e,t,n)=>{n(28755),e.exports=n(14411).String.padStart},86863:(e,t,n)=>{n(66948),e.exports=n(14411).String.trimRight},117:(e,t,n)=>{n(53412),e.exports=n(14411).String.trimLeft},30290:(e,t,n)=>{n(78284),e.exports=n(38833).f("asyncIterator")},11543:(e,t,n)=>{n(94296),e.exports=n(1275).global},87411:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},23206:(e,t,n)=>{var r=n(700);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},1275:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},30999:(e,t,n)=>{var r=n(87411);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},50697:(e,t,n)=>{e.exports=!n(13834)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},42394:(e,t,n)=>{var r=n(700),a=n(71075).document,o=r(a)&&r(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},44553:(e,t,n)=>{var r=n(71075),a=n(1275),o=n(30999),l=n(2550),i=n(94324),s=function(e,t,n){var u,p,c,m=e&s.F,d=e&s.G,h=e&s.S,f=e&s.P,k=e&s.B,b=e&s.W,g=d?a:a[t]||(a[t]={}),y=g.prototype,v=d?r:h?r[t]:(r[t]||{}).prototype;for(u in d&&(n=t),n)(p=!m&&v&&void 0!==v[u])&&i(g,u)||(c=p?v[u]:n[u],g[u]=d&&"function"!=typeof v[u]?n[u]:k&&p?o(c,r):b&&v[u]==c?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):f&&"function"==typeof c?o(Function.call,c):c,f&&((g.virtual||(g.virtual={}))[u]=c,e&s.R&&y&&!y[u]&&l(y,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},13834:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},71075:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},94324:e=>{var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},2550:(e,t,n)=>{var r=n(249),a=n(43652);e.exports=n(50697)?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},43393:(e,t,n)=>{e.exports=!n(50697)&&!n(13834)((function(){return 7!=Object.defineProperty(n(42394)("div"),"a",{get:function(){return 7}}).a}))},700:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},249:(e,t,n)=>{var r=n(23206),a=n(43393),o=n(3377),l=Object.defineProperty;t.f=n(50697)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),a)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},43652:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},3377:(e,t,n)=>{var r=n(700);e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},94296:(e,t,n)=>{var r=n(44553);r(r.G,{global:n(71075)})},23079:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},23373:(e,t,n)=>{var r=n(89426);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},12802:(e,t,n)=>{var r=n(9739)("unscopables"),a=Array.prototype;null==a[r]&&n(98442)(a,r,{}),e.exports=function(e){a[r][e]=!0}},9959:(e,t,n)=>{"use strict";var r=n(7384)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},30599:e=>{e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},59719:(e,t,n)=>{var r=n(17481);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},4893:(e,t,n)=>{"use strict";var r=n(54200),a=n(15044),o=n(61838);e.exports=[].copyWithin||function(e,t){var n=r(this),l=o(n.length),i=a(e,l),s=a(t,l),u=arguments.length>2?arguments[2]:void 0,p=Math.min((void 0===u?l:a(u,l))-s,l-i),c=1;for(s<i&&i<s+p&&(c=-1,s+=p-1,i+=p-1);p-- >0;)s in n?n[i]=n[s]:delete n[i],i+=c,s+=c;return n}},70852:(e,t,n)=>{"use strict";var r=n(54200),a=n(15044),o=n(61838);e.exports=function(e){for(var t=r(this),n=o(t.length),l=arguments.length,i=a(l>1?arguments[1]:void 0,n),s=l>2?arguments[2]:void 0,u=void 0===s?n:a(s,n);u>i;)t[i++]=e;return t}},61545:(e,t,n)=>{var r=n(8500),a=n(61838),o=n(15044);e.exports=function(e){return function(t,n,l){var i,s=r(t),u=a(s.length),p=o(l,u);if(e&&n!=n){for(;u>p;)if((i=s[p++])!=i)return!0}else for(;u>p;p++)if((e||p in s)&&s[p]===n)return e||p||0;return!e&&-1}}},66934:(e,t,n)=>{var r=n(82794),a=n(60975),o=n(54200),l=n(61838),i=n(44087);e.exports=function(e,t){var n=1==e,s=2==e,u=3==e,p=4==e,c=6==e,m=5==e||c,d=t||i;return function(t,i,h){for(var f,k,b=o(t),g=a(b),y=r(i,h,3),v=l(g.length),N=0,w=n?d(t,v):s?d(t,0):void 0;v>N;N++)if((m||N in g)&&(k=y(f=g[N],N,b),e))if(n)w[N]=k;else if(k)switch(e){case 3:return!0;case 5:return f;case 6:return N;case 2:w.push(f)}else if(p)return!1;return c?-1:u||p?p:w}}},9857:(e,t,n)=>{var r=n(23079),a=n(54200),o=n(60975),l=n(61838);e.exports=function(e,t,n,i,s){r(t);var u=a(e),p=o(u),c=l(u.length),m=s?c-1:0,d=s?-1:1;if(n<2)for(;;){if(m in p){i=p[m],m+=d;break}if(m+=d,s?m<0:c<=m)throw TypeError("Reduce of empty array with no initial value")}for(;s?m>=0:c>m;m+=d)m in p&&(i=t(i,p[m],m,u));return i}},54849:(e,t,n)=>{var r=n(17481),a=n(40689),o=n(9739)("species");e.exports=function(e){var t;return a(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!a(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},44087:(e,t,n)=>{var r=n(54849);e.exports=function(e,t){return new(r(e))(t)}},46966:(e,t,n)=>{"use strict";var r=n(23079),a=n(17481),o=n(16137),l=[].slice,i={},s=function(e,t,n){if(!(t in i)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";i[t]=Function("F,a","return new F("+r.join(",")+")")}return i[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=l.call(arguments,1),i=function(){var r=n.concat(l.call(arguments));return this instanceof i?s(t,r.length,r):o(t,r,e)};return a(t.prototype)&&(i.prototype=t.prototype),i}},12845:(e,t,n)=>{var r=n(89426),a=n(9739)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:o?r(t):"Object"==(l=r(t))&&"function"==typeof t.callee?"Arguments":l}},89426:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},95144:(e,t,n)=>{"use strict";var r=n(83530).f,a=n(62545),o=n(24092),l=n(82794),i=n(30599),s=n(62971),u=n(19121),p=n(78611),c=n(75993),m=n(51916),d=n(82153).fastKey,h=n(91603),f=m?"_s":"size",k=function(e,t){var n,r=d(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var p=e((function(e,r){i(e,p,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[f]=0,null!=r&&s(r,n,e[u],e)}));return o(p.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[f]=0},delete:function(e){var n=h(this,t),r=k(n,e);if(r){var a=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=a),a&&(a.p=o),n._f==r&&(n._f=a),n._l==r&&(n._l=o),n[f]--}return!!r},forEach:function(e){h(this,t);for(var n,r=l(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!k(h(this,t),e)}}),m&&r(p.prototype,"size",{get:function(){return h(this,t)[f]}}),p},def:function(e,t,n){var r,a,o=k(e,t);return o?o.v=n:(e._l=o={i:a=d(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[f]++,"F"!==a&&(e._i[a]=o)),e},getEntry:k,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?p(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,p(1))}),n?"entries":"values",!n,!0),c(t)}}},33503:(e,t,n)=>{"use strict";var r=n(24092),a=n(82153).getWeak,o=n(59719),l=n(17481),i=n(30599),s=n(62971),u=n(66934),p=n(41063),c=n(91603),m=u(5),d=u(6),h=0,f=function(e){return e._l||(e._l=new k)},k=function(){this.a=[]},b=function(e,t){return m(e.a,(function(e){return e[0]===t}))};k.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var n=b(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e((function(e,r){i(e,u,t,"_i"),e._t=t,e._i=h++,e._l=void 0,null!=r&&s(r,n,e[o],e)}));return r(u.prototype,{delete:function(e){if(!l(e))return!1;var n=a(e);return!0===n?f(c(this,t)).delete(e):n&&p(n,this._i)&&delete n[this._i]},has:function(e){if(!l(e))return!1;var n=a(e);return!0===n?f(c(this,t)).has(e):n&&p(n,this._i)}}),u},def:function(e,t,n){var r=a(o(t),!0);return!0===r?f(e).set(t,n):r[e._i]=n,e},ufstore:f}},58091:(e,t,n)=>{"use strict";var r=n(56341),a=n(35366),o=n(1564),l=n(24092),i=n(82153),s=n(62971),u=n(30599),p=n(17481),c=n(71240),m=n(61461),d=n(21309),h=n(94805);e.exports=function(e,t,n,f,k,b){var g=r[e],y=g,v=k?"set":"add",N=y&&y.prototype,w={},O=function(e){var t=N[e];o(N,e,"delete"==e||"has"==e?function(e){return!(b&&!p(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!p(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(b||N.forEach&&!c((function(){(new y).entries().next()})))){var j=new y,x=j[v](b?{}:-0,1)!=j,S=c((function(){j.has(1)})),C=m((function(e){new y(e)})),P=!b&&c((function(){for(var e=new y,t=5;t--;)e[v](t,t);return!e.has(-0)}));C||((y=t((function(t,n){u(t,y,e);var r=h(new g,t,y);return null!=n&&s(n,k,r[v],r),r}))).prototype=N,N.constructor=y),(S||P)&&(O("delete"),O("has"),k&&O("get")),(P||x)&&O(v),b&&N.clear&&delete N.clear}else y=f.getConstructor(t,e,k,v),l(y.prototype,n),i.NEED=!0;return d(y,e),w[e]=y,a(a.G+a.W+a.F*(y!=g),w),b||f.setStrong(y,e,k),y}},14411:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},51676:(e,t,n)=>{"use strict";var r=n(83530),a=n(21761);e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}},82794:(e,t,n)=>{var r=n(23079);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},41792:(e,t,n)=>{"use strict";var r=n(71240),a=Date.prototype.getTime,o=Date.prototype.toISOString,l=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+l(e.getUTCMonth()+1)+"-"+l(e.getUTCDate())+"T"+l(e.getUTCHours())+":"+l(e.getUTCMinutes())+":"+l(e.getUTCSeconds())+"."+(n>99?n:"0"+l(n))+"Z"}:o},27687:(e,t,n)=>{"use strict";var r=n(59719),a=n(9241),o="number";e.exports=function(e){if("string"!==e&&e!==o&&"default"!==e)throw TypeError("Incorrect hint");return a(r(this),e!=o)}},13589:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},51916:(e,t,n)=>{e.exports=!n(71240)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},83383:(e,t,n)=>{var r=n(17481),a=n(56341).document,o=r(a)&&r(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},97590:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},4535:(e,t,n)=>{var r=n(15825),a=n(32520),o=n(41144);e.exports=function(e){var t=r(e),n=a.f;if(n)for(var l,i=n(e),s=o.f,u=0;i.length>u;)s.call(e,l=i[u++])&&t.push(l);return t}},35366:(e,t,n)=>{var r=n(56341),a=n(14411),o=n(98442),l=n(1564),i=n(82794),s=function(e,t,n){var u,p,c,m,d=e&s.F,h=e&s.G,f=e&s.S,k=e&s.P,b=e&s.B,g=h?r:f?r[t]||(r[t]={}):(r[t]||{}).prototype,y=h?a:a[t]||(a[t]={}),v=y.prototype||(y.prototype={});for(u in h&&(n=t),n)c=((p=!d&&g&&void 0!==g[u])?g:n)[u],m=b&&p?i(c,r):k&&"function"==typeof c?i(Function.call,c):c,g&&l(g,u,c,e&s.U),y[u]!=c&&o(y,u,m),k&&v[u]!=c&&(v[u]=c)};r.core=a,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},46881:(e,t,n)=>{var r=n(9739)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},71240:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},25307:(e,t,n)=>{"use strict";n(58615);var r=n(1564),a=n(98442),o=n(71240),l=n(13589),i=n(9739),s=n(18868),u=i("species"),p=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var m=i(e),d=!o((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),h=d?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[m](""),!t})):void 0;if(!d||!h||"replace"===e&&!p||"split"===e&&!c){var f=/./[m],k=n(l,m,""[e],(function(e,t,n,r,a){return t.exec===s?d&&!a?{done:!0,value:f.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),b=k[0],g=k[1];r(String.prototype,e,b),a(RegExp.prototype,m,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},6439:(e,t,n)=>{"use strict";var r=n(59719);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},3885:(e,t,n)=>{"use strict";var r=n(40689),a=n(17481),o=n(61838),l=n(82794),i=n(9739)("isConcatSpreadable");e.exports=function e(t,n,s,u,p,c,m,d){for(var h,f,k=p,b=0,g=!!m&&l(m,d,3);b<u;){if(b in s){if(h=g?g(s[b],b,n):s[b],f=!1,a(h)&&(f=void 0!==(f=h[i])?!!f:r(h)),f&&c>0)k=e(t,n,h,o(h.length),k,c-1)-1;else{if(k>=9007199254740991)throw TypeError();t[k]=h}k++}b++}return k}},62971:(e,t,n)=>{var r=n(82794),a=n(55539),o=n(63894),l=n(59719),i=n(61838),s=n(18444),u={},p={},c=e.exports=function(e,t,n,c,m){var d,h,f,k,b=m?function(){return e}:s(e),g=r(n,c,t?2:1),y=0;if("function"!=typeof b)throw TypeError(e+" is not iterable!");if(o(b)){for(d=i(e.length);d>y;y++)if((k=t?g(l(h=e[y])[0],h[1]):g(e[y]))===u||k===p)return k}else for(f=b.call(e);!(h=f.next()).done;)if((k=a(f,g,h.value,t))===u||k===p)return k};c.BREAK=u,c.RETURN=p},65979:(e,t,n)=>{e.exports=n(97355)("native-function-to-string",Function.toString)},56341:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},41063:e=>{var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},98442:(e,t,n)=>{var r=n(83530),a=n(21761);e.exports=n(51916)?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},26137:(e,t,n)=>{var r=n(56341).document;e.exports=r&&r.documentElement},44352:(e,t,n)=>{e.exports=!n(51916)&&!n(71240)((function(){return 7!=Object.defineProperty(n(83383)("div"),"a",{get:function(){return 7}}).a}))},94805:(e,t,n)=>{var r=n(17481),a=n(87135).set;e.exports=function(e,t,n){var o,l=t.constructor;return l!==n&&"function"==typeof l&&(o=l.prototype)!==n.prototype&&r(o)&&a&&a(e,o),e}},16137:e=>{e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},60975:(e,t,n)=>{var r=n(89426);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},63894:(e,t,n)=>{var r=n(4919),a=n(9739)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[a]===e)}},40689:(e,t,n)=>{var r=n(89426);e.exports=Array.isArray||function(e){return"Array"==r(e)}},22289:(e,t,n)=>{var r=n(17481),a=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&a(e)===e}},17481:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},89543:(e,t,n)=>{var r=n(17481),a=n(89426),o=n(9739)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},55539:(e,t,n)=>{var r=n(59719);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},47938:(e,t,n)=>{"use strict";var r=n(62545),a=n(21761),o=n(21309),l={};n(98442)(l,n(9739)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(l,{next:a(1,n)}),o(e,t+" Iterator")}},19121:(e,t,n)=>{"use strict";var r=n(35113),a=n(35366),o=n(1564),l=n(98442),i=n(4919),s=n(47938),u=n(21309),p=n(44408),c=n(9739)("iterator"),m=!([].keys&&"next"in[].keys()),d="keys",h="values",f=function(){return this};e.exports=function(e,t,n,k,b,g,y){s(n,t,k);var v,N,w,O=function(e){if(!m&&e in C)return C[e];switch(e){case d:case h:return function(){return new n(this,e)}}return function(){return new n(this,e)}},j=t+" Iterator",x=b==h,S=!1,C=e.prototype,P=C[c]||C["@@iterator"]||b&&C[b],E=P||O(b),D=b?x?O("entries"):E:void 0,T="Array"==t&&C.entries||P;if(T&&(w=p(T.call(new e)))!==Object.prototype&&w.next&&(u(w,j,!0),r||"function"==typeof w[c]||l(w,c,f)),x&&P&&P.name!==h&&(S=!0,E=function(){return P.call(this)}),r&&!y||!m&&!S&&C[c]||l(C,c,E),i[t]=E,i[j]=f,b)if(v={values:x?E:O(h),keys:g?E:O(d),entries:D},y)for(N in v)N in C||o(C,N,v[N]);else a(a.P+a.F*(m||S),t,v);return v}},61461:(e,t,n)=>{var r=n(9739)("iterator"),a=!1;try{var o=[7][r]();o.return=function(){a=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var o=[7],l=o[r]();l.next=function(){return{done:n=!0}},o[r]=function(){return l},e(o)}catch(e){}return n}},78611:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},4919:e=>{e.exports={}},35113:e=>{e.exports=!1},77117:e=>{var t=Math.expm1;e.exports=!t||t(10)>22025.465794806718||t(10)<22025.465794806718||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:t},59396:(e,t,n)=>{var r=n(84247),a=Math.pow,o=a(2,-52),l=a(2,-23),i=a(2,127)*(2-l),s=a(2,-126);e.exports=Math.fround||function(e){var t,n,a=Math.abs(e),u=r(e);return a<s?u*(a/s/l+1/o-1/o)*s*l:(n=(t=(1+l/o)*a)-(t-a))>i||n!=n?u*(1/0):u*n}},19007:e=>{e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},84247:e=>{e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},82153:(e,t,n)=>{var r=n(90430)("meta"),a=n(17481),o=n(41063),l=n(83530).f,i=0,s=Object.isExtensible||function(){return!0},u=!n(71240)((function(){return s(Object.preventExtensions({}))})),p=function(e){l(e,r,{value:{i:"O"+ ++i,w:{}}})},c=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!s(e))return"F";if(!t)return"E";p(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!s(e))return!0;if(!t)return!1;p(e)}return e[r].w},onFreeze:function(e){return u&&c.NEED&&s(e)&&!o(e,r)&&p(e),e}}},37:(e,t,n)=>{var r=n(56341),a=n(7122).set,o=r.MutationObserver||r.WebKitMutationObserver,l=r.process,i=r.Promise,s="process"==n(89426)(l);e.exports=function(){var e,t,n,u=function(){var r,a;for(s&&(r=l.domain)&&r.exit();e;){a=e.fn,e=e.next;try{a()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(s)n=function(){l.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(i&&i.resolve){var p=i.resolve(void 0);n=function(){p.then(u)}}else n=function(){a.call(r,u)};else{var c=!0,m=document.createTextNode("");new o(u).observe(m,{characterData:!0}),n=function(){m.data=c=!c}}return function(r){var a={fn:r,next:void 0};t&&(t.next=a),e||(e=a,n()),t=a}}},83285:(e,t,n)=>{"use strict";var r=n(23079);function a(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new a(e)}},49821:(e,t,n)=>{"use strict";var r=n(51916),a=n(15825),o=n(32520),l=n(41144),i=n(54200),s=n(60975),u=Object.assign;e.exports=!u||n(71240)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=i(e),u=arguments.length,p=1,c=o.f,m=l.f;u>p;)for(var d,h=s(arguments[p++]),f=c?a(h).concat(c(h)):a(h),k=f.length,b=0;k>b;)d=f[b++],r&&!m.call(h,d)||(n[d]=h[d]);return n}:u},62545:(e,t,n)=>{var r=n(59719),a=n(30413),o=n(97590),l=n(53548)("IE_PROTO"),i=function(){},s=function(){var e,t=n(83383)("iframe"),r=o.length;for(t.style.display="none",n(26137).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;r--;)delete s.prototype[o[r]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(i.prototype=r(e),n=new i,i.prototype=null,n[l]=e):n=s(),void 0===t?n:a(n,t)}},83530:(e,t,n)=>{var r=n(59719),a=n(44352),o=n(9241),l=Object.defineProperty;t.f=n(51916)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),a)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},30413:(e,t,n)=>{var r=n(83530),a=n(59719),o=n(15825);e.exports=n(51916)?Object.defineProperties:function(e,t){a(e);for(var n,l=o(t),i=l.length,s=0;i>s;)r.f(e,n=l[s++],t[n]);return e}},57762:(e,t,n)=>{var r=n(41144),a=n(21761),o=n(8500),l=n(9241),i=n(41063),s=n(44352),u=Object.getOwnPropertyDescriptor;t.f=n(51916)?u:function(e,t){if(e=o(e),t=l(t,!0),s)try{return u(e,t)}catch(e){}if(i(e,t))return a(!r.f.call(e,t),e[t])}},85009:(e,t,n)=>{var r=n(8500),a=n(14230).f,o={}.toString,l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return l&&"[object Window]"==o.call(e)?function(e){try{return a(e)}catch(e){return l.slice()}}(e):a(r(e))}},14230:(e,t,n)=>{var r=n(92851),a=n(97590).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},32520:(e,t)=>{t.f=Object.getOwnPropertySymbols},44408:(e,t,n)=>{var r=n(41063),a=n(54200),o=n(53548)("IE_PROTO"),l=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},92851:(e,t,n)=>{var r=n(41063),a=n(8500),o=n(61545)(!1),l=n(53548)("IE_PROTO");e.exports=function(e,t){var n,i=a(e),s=0,u=[];for(n in i)n!=l&&r(i,n)&&u.push(n);for(;t.length>s;)r(i,n=t[s++])&&(~o(u,n)||u.push(n));return u}},15825:(e,t,n)=>{var r=n(92851),a=n(97590);e.exports=Object.keys||function(e){return r(e,a)}},41144:(e,t)=>{t.f={}.propertyIsEnumerable},81025:(e,t,n)=>{var r=n(35366),a=n(14411),o=n(71240);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],l={};l[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",l)}},15346:(e,t,n)=>{var r=n(51916),a=n(15825),o=n(8500),l=n(41144).f;e.exports=function(e){return function(t){for(var n,i=o(t),s=a(i),u=s.length,p=0,c=[];u>p;)n=s[p++],r&&!l.call(i,n)||c.push(e?[n,i[n]]:i[n]);return c}}},17285:(e,t,n)=>{var r=n(14230),a=n(32520),o=n(59719),l=n(56341).Reflect;e.exports=l&&l.ownKeys||function(e){var t=r.f(o(e)),n=a.f;return n?t.concat(n(e)):t}},13765:(e,t,n)=>{var r=n(56341).parseFloat,a=n(97370).trim;e.exports=1/r(n(18275)+"-0")!=-1/0?function(e){var t=a(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},80500:(e,t,n)=>{var r=n(56341).parseInt,a=n(97370).trim,o=n(18275),l=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=a(String(e),3);return r(n,t>>>0||(l.test(n)?16:10))}:r},98332:e=>{e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},38614:(e,t,n)=>{var r=n(59719),a=n(17481),o=n(83285);e.exports=function(e,t){if(r(e),a(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},21761:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},24092:(e,t,n)=>{var r=n(1564);e.exports=function(e,t,n){for(var a in t)r(e,a,t[a],n);return e}},1564:(e,t,n)=>{var r=n(56341),a=n(98442),o=n(41063),l=n(90430)("src"),i=n(65979),s="toString",u=(""+i).split(s);n(14411).inspectSource=function(e){return i.call(e)},(e.exports=function(e,t,n,i){var s="function"==typeof n;s&&(o(n,"name")||a(n,"name",t)),e[t]!==n&&(s&&(o(n,l)||a(n,l,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:i?e[t]?e[t]=n:a(e,t,n):(delete e[t],a(e,t,n)))})(Function.prototype,s,(function(){return"function"==typeof this&&this[l]||i.call(this)}))},29073:(e,t,n)=>{"use strict";var r=n(12845),a=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},18868:(e,t,n)=>{"use strict";var r,a,o=n(6439),l=RegExp.prototype.exec,i=String.prototype.replace,s=l,u=(r=/a/,a=/b*/g,l.call(r,"a"),l.call(a,"a"),0!==r.lastIndex||0!==a.lastIndex),p=void 0!==/()??/.exec("")[1];(u||p)&&(s=function(e){var t,n,r,a,s=this;return p&&(n=new RegExp("^"+s.source+"$(?!\\s)",o.call(s))),u&&(t=s.lastIndex),r=l.call(s,e),u&&r&&(s.lastIndex=s.global?r.index+r[0].length:t),p&&r&&r.length>1&&i.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r}),e.exports=s},61541:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},87135:(e,t,n)=>{var r=n(17481),a=n(59719),o=function(e,t){if(a(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(82794)(Function.call,n(57762).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},75993:(e,t,n)=>{"use strict";var r=n(56341),a=n(83530),o=n(51916),l=n(9739)("species");e.exports=function(e){var t=r[e];o&&t&&!t[l]&&a.f(t,l,{configurable:!0,get:function(){return this}})}},21309:(e,t,n)=>{var r=n(83530).f,a=n(41063),o=n(9739)("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},53548:(e,t,n)=>{var r=n(97355)("keys"),a=n(90430);e.exports=function(e){return r[e]||(r[e]=a(e))}},97355:(e,t,n)=>{var r=n(14411),a=n(56341),o="__core-js_shared__",l=a[o]||(a[o]={});(e.exports=function(e,t){return l[e]||(l[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(35113)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},59789:(e,t,n)=>{var r=n(59719),a=n(23079),o=n(9739)("species");e.exports=function(e,t){var n,l=r(e).constructor;return void 0===l||null==(n=r(l)[o])?t:a(n)}},85139:(e,t,n)=>{"use strict";var r=n(71240);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},7384:(e,t,n)=>{var r=n(51549),a=n(13589);e.exports=function(e){return function(t,n){var o,l,i=String(a(t)),s=r(n),u=i.length;return s<0||s>=u?e?"":void 0:(o=i.charCodeAt(s))<55296||o>56319||s+1===u||(l=i.charCodeAt(s+1))<56320||l>57343?e?i.charAt(s):o:e?i.slice(s,s+2):l-56320+(o-55296<<10)+65536}}},83256:(e,t,n)=>{var r=n(89543),a=n(13589);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(a(e))}},79048:(e,t,n)=>{var r=n(35366),a=n(71240),o=n(13589),l=/"/g,i=function(e,t,n,r){var a=String(o(e)),i="<"+t;return""!==n&&(i+=" "+n+'="'+String(r).replace(l,"&quot;")+'"'),i+">"+a+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(i),r(r.P+r.F*a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},9823:(e,t,n)=>{var r=n(61838),a=n(40005),o=n(13589);e.exports=function(e,t,n,l){var i=String(o(e)),s=i.length,u=void 0===n?" ":String(n),p=r(t);if(p<=s||""==u)return i;var c=p-s,m=a.call(u,Math.ceil(c/u.length));return m.length>c&&(m=m.slice(0,c)),l?m+i:i+m}},40005:(e,t,n)=>{"use strict";var r=n(51549),a=n(13589);e.exports=function(e){var t=String(a(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},97370:(e,t,n)=>{var r=n(35366),a=n(13589),o=n(71240),l=n(18275),i="["+l+"]",s=RegExp("^"+i+i+"*"),u=RegExp(i+i+"*$"),p=function(e,t,n){var a={},i=o((function(){return!!l[e]()||"​"!="​"[e]()})),s=a[e]=i?t(c):l[e];n&&(a[n]=s),r(r.P+r.F*i,"String",a)},c=p.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(s,"")),2&t&&(e=e.replace(u,"")),e};e.exports=p},18275:e=>{e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},7122:(e,t,n)=>{var r,a,o,l=n(82794),i=n(16137),s=n(26137),u=n(83383),p=n(56341),c=p.process,m=p.setImmediate,d=p.clearImmediate,h=p.MessageChannel,f=p.Dispatch,k=0,b={},g=function(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},y=function(e){g.call(e.data)};m&&d||(m=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++k]=function(){i("function"==typeof e?e:Function(e),t)},r(k),k},d=function(e){delete b[e]},"process"==n(89426)(c)?r=function(e){c.nextTick(l(g,e,1))}:f&&f.now?r=function(e){f.now(l(g,e,1))}:h?(o=(a=new h).port2,a.port1.onmessage=y,r=l(o.postMessage,o,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(r=function(e){p.postMessage(e+"","*")},p.addEventListener("message",y,!1)):r="onreadystatechange"in u("script")?function(e){s.appendChild(u("script")).onreadystatechange=function(){s.removeChild(this),g.call(e)}}:function(e){setTimeout(l(g,e,1),0)}),e.exports={set:m,clear:d}},15044:(e,t,n)=>{var r=n(51549),a=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?a(e+t,0):o(e,t)}},99707:(e,t,n)=>{var r=n(51549),a=n(61838);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=a(t);if(t!==n)throw RangeError("Wrong length!");return n}},51549:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},8500:(e,t,n)=>{var r=n(60975),a=n(13589);e.exports=function(e){return r(a(e))}},61838:(e,t,n)=>{var r=n(51549),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},54200:(e,t,n)=>{var r=n(13589);e.exports=function(e){return Object(r(e))}},9241:(e,t,n)=>{var r=n(17481);e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},58754:(e,t,n)=>{"use strict";if(n(51916)){var r=n(35113),a=n(56341),o=n(71240),l=n(35366),i=n(67728),s=n(29895),u=n(82794),p=n(30599),c=n(21761),m=n(98442),d=n(24092),h=n(51549),f=n(61838),k=n(99707),b=n(15044),g=n(9241),y=n(41063),v=n(12845),N=n(17481),w=n(54200),O=n(63894),j=n(62545),x=n(44408),S=n(14230).f,C=n(18444),P=n(90430),E=n(9739),D=n(66934),T=n(61545),_=n(59789),M=n(71308),A=n(4919),L=n(61461),R=n(75993),I=n(70852),B=n(4893),z=n(83530),F=n(57762),q=z.f,H=F.f,X=a.RangeError,Y=a.TypeError,U=a.Uint8Array,W="ArrayBuffer",V="SharedArrayBuffer",G="BYTES_PER_ELEMENT",$=Array.prototype,J=s.ArrayBuffer,Q=s.DataView,K=D(0),Z=D(2),ee=D(3),te=D(4),ne=D(5),re=D(6),ae=T(!0),oe=T(!1),le=M.values,ie=M.keys,se=M.entries,ue=$.lastIndexOf,pe=$.reduce,ce=$.reduceRight,me=$.join,de=$.sort,he=$.slice,fe=$.toString,ke=$.toLocaleString,be=E("iterator"),ge=E("toStringTag"),ye=P("typed_constructor"),ve=P("def_constructor"),Ne=i.CONSTR,we=i.TYPED,Oe=i.VIEW,je="Wrong length!",xe=D(1,(function(e,t){return De(_(e,e[ve]),t)})),Se=o((function(){return 1===new U(new Uint16Array([1]).buffer)[0]})),Ce=!!U&&!!U.prototype.set&&o((function(){new U(1).set({})})),Pe=function(e,t){var n=h(e);if(n<0||n%t)throw X("Wrong offset!");return n},Ee=function(e){if(N(e)&&we in e)return e;throw Y(e+" is not a typed array!")},De=function(e,t){if(!N(e)||!(ye in e))throw Y("It is not a typed array constructor!");return new e(t)},Te=function(e,t){return _e(_(e,e[ve]),t)},_e=function(e,t){for(var n=0,r=t.length,a=De(e,r);r>n;)a[n]=t[n++];return a},Me=function(e,t,n){q(e,t,{get:function(){return this._d[n]}})},Ae=function(e){var t,n,r,a,o,l,i=w(e),s=arguments.length,p=s>1?arguments[1]:void 0,c=void 0!==p,m=C(i);if(null!=m&&!O(m)){for(l=m.call(i),r=[],t=0;!(o=l.next()).done;t++)r.push(o.value);i=r}for(c&&s>2&&(p=u(p,arguments[2],2)),t=0,n=f(i.length),a=De(this,n);n>t;t++)a[t]=c?p(i[t],t):i[t];return a},Le=function(){for(var e=0,t=arguments.length,n=De(this,t);t>e;)n[e]=arguments[e++];return n},Re=!!U&&o((function(){ke.call(new U(1))})),Ie=function(){return ke.apply(Re?he.call(Ee(this)):Ee(this),arguments)},Be={copyWithin:function(e,t){return B.call(Ee(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return te(Ee(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return I.apply(Ee(this),arguments)},filter:function(e){return Te(this,Z(Ee(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ne(Ee(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return re(Ee(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){K(Ee(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return oe(Ee(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ae(Ee(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return me.apply(Ee(this),arguments)},lastIndexOf:function(e){return ue.apply(Ee(this),arguments)},map:function(e){return xe(Ee(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return pe.apply(Ee(this),arguments)},reduceRight:function(e){return ce.apply(Ee(this),arguments)},reverse:function(){for(var e,t=this,n=Ee(t).length,r=Math.floor(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t},some:function(e){return ee(Ee(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return de.call(Ee(this),e)},subarray:function(e,t){var n=Ee(this),r=n.length,a=b(e,r);return new(_(n,n[ve]))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,f((void 0===t?r:b(t,r))-a))}},ze=function(e,t){return Te(this,he.call(Ee(this),e,t))},Fe=function(e){Ee(this);var t=Pe(arguments[1],1),n=this.length,r=w(e),a=f(r.length),o=0;if(a+t>n)throw X(je);for(;o<a;)this[t+o]=r[o++]},qe={entries:function(){return se.call(Ee(this))},keys:function(){return ie.call(Ee(this))},values:function(){return le.call(Ee(this))}},He=function(e,t){return N(e)&&e[we]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Xe=function(e,t){return He(e,t=g(t,!0))?c(2,e[t]):H(e,t)},Ye=function(e,t,n){return!(He(e,t=g(t,!0))&&N(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?q(e,t,n):(e[t]=n.value,e)};Ne||(F.f=Xe,z.f=Ye),l(l.S+l.F*!Ne,"Object",{getOwnPropertyDescriptor:Xe,defineProperty:Ye}),o((function(){fe.call({})}))&&(fe=ke=function(){return me.call(this)});var Ue=d({},Be);d(Ue,qe),m(Ue,be,qe.values),d(Ue,{slice:ze,set:Fe,constructor:function(){},toString:fe,toLocaleString:Ie}),Me(Ue,"buffer","b"),Me(Ue,"byteOffset","o"),Me(Ue,"byteLength","l"),Me(Ue,"length","e"),q(Ue,ge,{get:function(){return this[we]}}),e.exports=function(e,t,n,s){var u=e+((s=!!s)?"Clamped":"")+"Array",c="get"+e,d="set"+e,h=a[u],b=h||{},g=h&&x(h),y=!h||!i.ABV,w={},O=h&&h.prototype,C=function(e,n){q(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[c](n*t+r.o,Se)}(this,n)},set:function(e){return function(e,n,r){var a=e._d;s&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),a.v[d](n*t+a.o,r,Se)}(this,n,e)},enumerable:!0})};y?(h=n((function(e,n,r,a){p(e,h,u,"_d");var o,l,i,s,c=0,d=0;if(N(n)){if(!(n instanceof J||(s=v(n))==W||s==V))return we in n?_e(h,n):Ae.call(h,n);o=n,d=Pe(r,t);var b=n.byteLength;if(void 0===a){if(b%t)throw X(je);if((l=b-d)<0)throw X(je)}else if((l=f(a)*t)+d>b)throw X(je);i=l/t}else i=k(n),o=new J(l=i*t);for(m(e,"_d",{b:o,o:d,l,e:i,v:new Q(o)});c<i;)C(e,c++)})),O=h.prototype=j(Ue),m(O,"constructor",h)):o((function(){h(1)}))&&o((function(){new h(-1)}))&&L((function(e){new h,new h(null),new h(1.5),new h(e)}),!0)||(h=n((function(e,n,r,a){var o;return p(e,h,u),N(n)?n instanceof J||(o=v(n))==W||o==V?void 0!==a?new b(n,Pe(r,t),a):void 0!==r?new b(n,Pe(r,t)):new b(n):we in n?_e(h,n):Ae.call(h,n):new b(k(n))})),K(g!==Function.prototype?S(b).concat(S(g)):S(b),(function(e){e in h||m(h,e,b[e])})),h.prototype=O,r||(O.constructor=h));var P=O[be],E=!!P&&("values"==P.name||null==P.name),D=qe.values;m(h,ye,!0),m(O,we,u),m(O,Oe,!0),m(O,ve,h),(s?new h(1)[ge]==u:ge in O)||q(O,ge,{get:function(){return u}}),w[u]=h,l(l.G+l.W+l.F*(h!=b),w),l(l.S,u,{BYTES_PER_ELEMENT:t}),l(l.S+l.F*o((function(){b.of.call(h,1)})),u,{from:Ae,of:Le}),G in O||m(O,G,t),l(l.P,u,Be),R(u),l(l.P+l.F*Ce,u,{set:Fe}),l(l.P+l.F*!E,u,qe),r||O.toString==fe||(O.toString=fe),l(l.P+l.F*o((function(){new h(1).slice()})),u,{slice:ze}),l(l.P+l.F*(o((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!o((function(){O.toLocaleString.call([1,2])}))),u,{toLocaleString:Ie}),A[u]=E?P:D,r||E||m(O,be,D)}}else e.exports=function(){}},29895:(e,t,n)=>{"use strict";var r=n(56341),a=n(51916),o=n(35113),l=n(67728),i=n(98442),s=n(24092),u=n(71240),p=n(30599),c=n(51549),m=n(61838),d=n(99707),h=n(14230).f,f=n(83530).f,k=n(70852),b=n(21309),g="ArrayBuffer",y="DataView",v="Wrong index!",N=r.ArrayBuffer,w=r.DataView,O=r.Math,j=r.RangeError,x=r.Infinity,S=N,C=O.abs,P=O.pow,E=O.floor,D=O.log,T=O.LN2,_="buffer",M="byteLength",A="byteOffset",L=a?"_b":_,R=a?"_l":M,I=a?"_o":A;function B(e,t,n){var r,a,o,l=new Array(n),i=8*n-t-1,s=(1<<i)-1,u=s>>1,p=23===t?P(2,-24)-P(2,-77):0,c=0,m=e<0||0===e&&1/e<0?1:0;for((e=C(e))!=e||e===x?(a=e!=e?1:0,r=s):(r=E(D(e)/T),e*(o=P(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?p/o:p*P(2,1-u))*o>=2&&(r++,o/=2),r+u>=s?(a=0,r=s):r+u>=1?(a=(e*o-1)*P(2,t),r+=u):(a=e*P(2,u-1)*P(2,t),r=0));t>=8;l[c++]=255&a,a/=256,t-=8);for(r=r<<t|a,i+=t;i>0;l[c++]=255&r,r/=256,i-=8);return l[--c]|=128*m,l}function z(e,t,n){var r,a=8*n-t-1,o=(1<<a)-1,l=o>>1,i=a-7,s=n-1,u=e[s--],p=127&u;for(u>>=7;i>0;p=256*p+e[s],s--,i-=8);for(r=p&(1<<-i)-1,p>>=-i,i+=t;i>0;r=256*r+e[s],s--,i-=8);if(0===p)p=1-l;else{if(p===o)return r?NaN:u?-x:x;r+=P(2,t),p-=l}return(u?-1:1)*r*P(2,p-t)}function F(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function q(e){return[255&e]}function H(e){return[255&e,e>>8&255]}function X(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function Y(e){return B(e,52,8)}function U(e){return B(e,23,4)}function W(e,t,n){f(e.prototype,t,{get:function(){return this[n]}})}function V(e,t,n,r){var a=d(+n);if(a+t>e[R])throw j(v);var o=e[L]._b,l=a+e[I],i=o.slice(l,l+t);return r?i:i.reverse()}function G(e,t,n,r,a,o){var l=d(+n);if(l+t>e[R])throw j(v);for(var i=e[L]._b,s=l+e[I],u=r(+a),p=0;p<t;p++)i[s+p]=u[o?p:t-p-1]}if(l.ABV){if(!u((function(){N(1)}))||!u((function(){new N(-1)}))||u((function(){return new N,new N(1.5),new N(NaN),N.name!=g}))){for(var $,J=(N=function(e){return p(this,N),new S(d(e))}).prototype=S.prototype,Q=h(S),K=0;Q.length>K;)($=Q[K++])in N||i(N,$,S[$]);o||(J.constructor=N)}var Z=new w(new N(2)),ee=w.prototype.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||s(w.prototype,{setInt8:function(e,t){ee.call(this,e,t<<24>>24)},setUint8:function(e,t){ee.call(this,e,t<<24>>24)}},!0)}else N=function(e){p(this,N,g);var t=d(e);this._b=k.call(new Array(t),0),this[R]=t},w=function(e,t,n){p(this,w,y),p(e,N,y);var r=e[R],a=c(t);if(a<0||a>r)throw j("Wrong offset!");if(a+(n=void 0===n?r-a:m(n))>r)throw j("Wrong length!");this[L]=e,this[I]=a,this[R]=n},a&&(W(N,M,"_l"),W(w,_,"_b"),W(w,M,"_l"),W(w,A,"_o")),s(w.prototype,{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return F(V(this,4,e,arguments[1]))},getUint32:function(e){return F(V(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return z(V(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return z(V(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){G(this,1,e,q,t)},setUint8:function(e,t){G(this,1,e,q,t)},setInt16:function(e,t){G(this,2,e,H,t,arguments[2])},setUint16:function(e,t){G(this,2,e,H,t,arguments[2])},setInt32:function(e,t){G(this,4,e,X,t,arguments[2])},setUint32:function(e,t){G(this,4,e,X,t,arguments[2])},setFloat32:function(e,t){G(this,4,e,U,t,arguments[2])},setFloat64:function(e,t){G(this,8,e,Y,t,arguments[2])}});b(N,g),b(w,y),i(w.prototype,l.VIEW,!0),t.ArrayBuffer=N,t.DataView=w},67728:(e,t,n)=>{for(var r,a=n(56341),o=n(98442),l=n(90430),i=l("typed_array"),s=l("view"),u=!(!a.ArrayBuffer||!a.DataView),p=u,c=0,m="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");c<9;)(r=a[m[c++]])?(o(r.prototype,i,!0),o(r.prototype,s,!0)):p=!1;e.exports={ABV:u,CONSTR:p,TYPED:i,VIEW:s}},90430:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},83843:(e,t,n)=>{var r=n(56341).navigator;e.exports=r&&r.userAgent||""},91603:(e,t,n)=>{var r=n(17481);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},48155:(e,t,n)=>{var r=n(56341),a=n(14411),o=n(35113),l=n(38833),i=n(83530).f;e.exports=function(e){var t=a.Symbol||(a.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||i(t,e,{value:l.f(e)})}},38833:(e,t,n)=>{t.f=n(9739)},9739:(e,t,n)=>{var r=n(97355)("wks"),a=n(90430),o=n(56341).Symbol,l="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=l&&o[e]||(l?o:a)("Symbol."+e))}).store=r},18444:(e,t,n)=>{var r=n(12845),a=n(9739)("iterator"),o=n(4919);e.exports=n(14411).getIteratorMethod=function(e){if(null!=e)return e[a]||e["@@iterator"]||o[r(e)]}},71412:(e,t,n)=>{var r=n(35366);r(r.P,"Array",{copyWithin:n(4893)}),n(12802)("copyWithin")},35943:(e,t,n)=>{"use strict";var r=n(35366),a=n(66934)(4);r(r.P+r.F*!n(85139)([].every,!0),"Array",{every:function(e){return a(this,e,arguments[1])}})},30360:(e,t,n)=>{var r=n(35366);r(r.P,"Array",{fill:n(70852)}),n(12802)("fill")},33352:(e,t,n)=>{"use strict";var r=n(35366),a=n(66934)(2);r(r.P+r.F*!n(85139)([].filter,!0),"Array",{filter:function(e){return a(this,e,arguments[1])}})},83118:(e,t,n)=>{"use strict";var r=n(35366),a=n(66934)(6),o="findIndex",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),r(r.P+r.F*l,"Array",{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n(12802)(o)},18394:(e,t,n)=>{"use strict";var r=n(35366),a=n(66934)(5),o="find",l=!0;o in[]&&Array(1).find((function(){l=!1})),r(r.P+r.F*l,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n(12802)(o)},9106:(e,t,n)=>{"use strict";var r=n(35366),a=n(66934)(0),o=n(85139)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return a(this,e,arguments[1])}})},65271:(e,t,n)=>{"use strict";var r=n(82794),a=n(35366),o=n(54200),l=n(55539),i=n(63894),s=n(61838),u=n(51676),p=n(18444);a(a.S+a.F*!n(61461)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,a,c,m=o(e),d="function"==typeof this?this:Array,h=arguments.length,f=h>1?arguments[1]:void 0,k=void 0!==f,b=0,g=p(m);if(k&&(f=r(f,h>2?arguments[2]:void 0,2)),null==g||d==Array&&i(g))for(n=new d(t=s(m.length));t>b;b++)u(n,b,k?f(m[b],b):m[b]);else for(c=g.call(m),n=new d;!(a=c.next()).done;b++)u(n,b,k?l(c,f,[a.value,b],!0):a.value);return n.length=b,n}})},86174:(e,t,n)=>{"use strict";var r=n(35366),a=n(61545)(!1),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(l||!n(85139)(o)),"Array",{indexOf:function(e){return l?o.apply(this,arguments)||0:a(this,e,arguments[1])}})},50160:(e,t,n)=>{var r=n(35366);r(r.S,"Array",{isArray:n(40689)})},71308:(e,t,n)=>{"use strict";var r=n(12802),a=n(78611),o=n(4919),l=n(8500);e.exports=n(19121)(Array,"Array",(function(e,t){this._t=l(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,a(1)):a(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},92523:(e,t,n)=>{"use strict";var r=n(35366),a=n(8500),o=[].join;r(r.P+r.F*(n(60975)!=Object||!n(85139)(o)),"Array",{join:function(e){return o.call(a(this),void 0===e?",":e)}})},86975:(e,t,n)=>{"use strict";var r=n(35366),a=n(8500),o=n(51549),l=n(61838),i=[].lastIndexOf,s=!!i&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(s||!n(85139)(i)),"Array",{lastIndexOf:function(e){if(s)return i.apply(this,arguments)||0;var t=a(this),n=l(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},9139:(e,t,n)=>{"use strict";var r=n(35366),a=n(66934)(1);r(r.P+r.F*!n(85139)([].map,!0),"Array",{map:function(e){return a(this,e,arguments[1])}})},18221:(e,t,n)=>{"use strict";var r=n(35366),a=n(51676);r(r.S+r.F*n(71240)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)a(n,e,arguments[e++]);return n.length=t,n}})},88292:(e,t,n)=>{"use strict";var r=n(35366),a=n(9857);r(r.P+r.F*!n(85139)([].reduceRight,!0),"Array",{reduceRight:function(e){return a(this,e,arguments.length,arguments[1],!0)}})},59483:(e,t,n)=>{"use strict";var r=n(35366),a=n(9857);r(r.P+r.F*!n(85139)([].reduce,!0),"Array",{reduce:function(e){return a(this,e,arguments.length,arguments[1],!1)}})},65441:(e,t,n)=>{"use strict";var r=n(35366),a=n(26137),o=n(89426),l=n(15044),i=n(61838),s=[].slice;r(r.P+r.F*n(71240)((function(){a&&s.call(a)})),"Array",{slice:function(e,t){var n=i(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return s.call(this,e,t);for(var a=l(e,n),u=l(t,n),p=i(u-a),c=new Array(p),m=0;m<p;m++)c[m]="String"==r?this.charAt(a+m):this[a+m];return c}})},53289:(e,t,n)=>{"use strict";var r=n(35366),a=n(66934)(3);r(r.P+r.F*!n(85139)([].some,!0),"Array",{some:function(e){return a(this,e,arguments[1])}})},88375:(e,t,n)=>{"use strict";var r=n(35366),a=n(23079),o=n(54200),l=n(71240),i=[].sort,s=[1,2,3];r(r.P+r.F*(l((function(){s.sort(void 0)}))||!l((function(){s.sort(null)}))||!n(85139)(i)),"Array",{sort:function(e){return void 0===e?i.call(o(this)):i.call(o(this),a(e))}})},78772:(e,t,n)=>{n(75993)("Array")},32338:(e,t,n)=>{var r=n(35366);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},21575:(e,t,n)=>{var r=n(35366),a=n(41792);r(r.P+r.F*(Date.prototype.toISOString!==a),"Date",{toISOString:a})},20641:(e,t,n)=>{"use strict";var r=n(35366),a=n(54200),o=n(9241);r(r.P+r.F*n(71240)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=a(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},91033:(e,t,n)=>{var r=n(9739)("toPrimitive"),a=Date.prototype;r in a||n(98442)(a,r,n(27687))},75611:(e,t,n)=>{var r=Date.prototype,a="Invalid Date",o=r.toString,l=r.getTime;new Date(NaN)+""!=a&&n(1564)(r,"toString",(function(){var e=l.call(this);return e==e?o.call(this):a}))},78769:(e,t,n)=>{var r=n(35366);r(r.P,"Function",{bind:n(46966)})},99383:(e,t,n)=>{"use strict";var r=n(17481),a=n(44408),o=n(9739)("hasInstance"),l=Function.prototype;o in l||n(83530).f(l,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=a(e);)if(this.prototype===e)return!0;return!1}})},729:(e,t,n)=>{var r=n(83530).f,a=Function.prototype,o=/^\s*function ([^ (]*)/,l="name";l in a||n(51916)&&r(a,l,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},82509:(e,t,n)=>{"use strict";var r=n(95144),a=n(91603),o="Map";e.exports=n(58091)(o,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(a(this,o),e);return t&&t.v},set:function(e,t){return r.def(a(this,o),0===e?0:e,t)}},r,!0)},12372:(e,t,n)=>{var r=n(35366),a=n(19007),o=Math.sqrt,l=Math.acosh;r(r.S+r.F*!(l&&710==Math.floor(l(Number.MAX_VALUE))&&l(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:a(e-1+o(e-1)*o(e+1))}})},30511:(e,t,n)=>{var r=n(35366),a=Math.asinh;r(r.S+r.F*!(a&&1/a(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},6781:(e,t,n)=>{var r=n(35366),a=Math.atanh;r(r.S+r.F*!(a&&1/a(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},74434:(e,t,n)=>{var r=n(35366),a=n(84247);r(r.S,"Math",{cbrt:function(e){return a(e=+e)*Math.pow(Math.abs(e),1/3)}})},14783:(e,t,n)=>{var r=n(35366);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},95521:(e,t,n)=>{var r=n(35366),a=Math.exp;r(r.S,"Math",{cosh:function(e){return(a(e=+e)+a(-e))/2}})},94093:(e,t,n)=>{var r=n(35366),a=n(77117);r(r.S+r.F*(a!=Math.expm1),"Math",{expm1:a})},86378:(e,t,n)=>{var r=n(35366);r(r.S,"Math",{fround:n(59396)})},52380:(e,t,n)=>{var r=n(35366),a=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,l=0,i=arguments.length,s=0;l<i;)s<(n=a(arguments[l++]))?(o=o*(r=s/n)*r+1,s=n):o+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*Math.sqrt(o)}})},2803:(e,t,n)=>{var r=n(35366),a=Math.imul;r(r.S+r.F*n(71240)((function(){return-5!=a(4294967295,5)||2!=a.length})),"Math",{imul:function(e,t){var n=65535,r=+e,a=+t,o=n&r,l=n&a;return 0|o*l+((n&r>>>16)*l+o*(n&a>>>16)<<16>>>0)}})},63725:(e,t,n)=>{var r=n(35366);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},7977:(e,t,n)=>{var r=n(35366);r(r.S,"Math",{log1p:n(19007)})},14192:(e,t,n)=>{var r=n(35366);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},2940:(e,t,n)=>{var r=n(35366);r(r.S,"Math",{sign:n(84247)})},35731:(e,t,n)=>{var r=n(35366),a=n(77117),o=Math.exp;r(r.S+r.F*n(71240)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(a(e)-a(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},79382:(e,t,n)=>{var r=n(35366),a=n(77117),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=a(e=+e),n=a(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},38877:(e,t,n)=>{var r=n(35366);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},10348:(e,t,n)=>{"use strict";var r=n(56341),a=n(41063),o=n(89426),l=n(94805),i=n(9241),s=n(71240),u=n(14230).f,p=n(57762).f,c=n(83530).f,m=n(97370).trim,d="Number",h=r.Number,f=h,k=h.prototype,b=o(n(62545)(k))==d,g="trim"in String.prototype,y=function(e){var t=i(e,!1);if("string"==typeof t&&t.length>2){var n,r,a,o=(t=g?t.trim():m(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+t}for(var l,s=t.slice(2),u=0,p=s.length;u<p;u++)if((l=s.charCodeAt(u))<48||l>a)return NaN;return parseInt(s,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(b?s((function(){k.valueOf.call(n)})):o(n)!=d)?l(new f(y(t)),n,h):y(t)};for(var v,N=n(51916)?u(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;N.length>w;w++)a(f,v=N[w])&&!a(h,v)&&c(h,v,p(f,v));h.prototype=k,k.constructor=h,n(1564)(r,d,h)}},64007:(e,t,n)=>{var r=n(35366);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},87616:(e,t,n)=>{var r=n(35366),a=n(56341).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&a(e)}})},86762:(e,t,n)=>{var r=n(35366);r(r.S,"Number",{isInteger:n(22289)})},43316:(e,t,n)=>{var r=n(35366);r(r.S,"Number",{isNaN:function(e){return e!=e}})},93019:(e,t,n)=>{var r=n(35366),a=n(22289),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return a(e)&&o(e)<=9007199254740991}})},40293:(e,t,n)=>{var r=n(35366);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},60640:(e,t,n)=>{var r=n(35366);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},96589:(e,t,n)=>{var r=n(35366),a=n(13765);r(r.S+r.F*(Number.parseFloat!=a),"Number",{parseFloat:a})},93210:(e,t,n)=>{var r=n(35366),a=n(80500);r(r.S+r.F*(Number.parseInt!=a),"Number",{parseInt:a})},71028:(e,t,n)=>{"use strict";var r=n(35366),a=n(51549),o=n(23373),l=n(40005),i=1..toFixed,s=Math.floor,u=[0,0,0,0,0,0],p="Number.toFixed: incorrect invocation!",c="0",m=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*u[n],u[n]=r%1e7,r=s(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=s(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+l.call(c,7-n.length)+n}return t},f=function(e,t,n){return 0===t?n:t%2==1?f(e,t-1,n*e):f(e*e,t/2,n)};r(r.P+r.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(71240)((function(){i.call({})}))),"Number",{toFixed:function(e){var t,n,r,i,s=o(this,p),u=a(e),k="",b=c;if(u<0||u>20)throw RangeError(p);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(k="-",s=-s),s>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(s*f(2,69,1))-69)<0?s*f(2,-t,1):s/f(2,t,1),n*=4503599627370496,(t=52-t)>0){for(m(0,n),r=u;r>=7;)m(1e7,0),r-=7;for(m(f(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),m(1,1),d(2),b=h()}else m(0,n),m(1<<-t,0),b=h()+l.call(c,u);return u>0?k+((i=b.length)<=u?"0."+l.call(c,u-i)+b:b.slice(0,i-u)+"."+b.slice(i-u)):k+b}})},2610:(e,t,n)=>{"use strict";var r=n(35366),a=n(71240),o=n(23373),l=1..toPrecision;r(r.P+r.F*(a((function(){return"1"!==l.call(1,void 0)}))||!a((function(){l.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?l.call(t):l.call(t,e)}})},88325:(e,t,n)=>{var r=n(35366);r(r.S+r.F,"Object",{assign:n(49821)})},57944:(e,t,n)=>{var r=n(35366);r(r.S,"Object",{create:n(62545)})},10266:(e,t,n)=>{var r=n(35366);r(r.S+r.F*!n(51916),"Object",{defineProperties:n(30413)})},65388:(e,t,n)=>{var r=n(35366);r(r.S+r.F*!n(51916),"Object",{defineProperty:n(83530).f})},40192:(e,t,n)=>{var r=n(17481),a=n(82153).onFreeze;n(81025)("freeze",(function(e){return function(t){return e&&r(t)?e(a(t)):t}}))},57557:(e,t,n)=>{var r=n(8500),a=n(57762).f;n(81025)("getOwnPropertyDescriptor",(function(){return function(e,t){return a(r(e),t)}}))},54943:(e,t,n)=>{n(81025)("getOwnPropertyNames",(function(){return n(85009).f}))},63386:(e,t,n)=>{var r=n(54200),a=n(44408);n(81025)("getPrototypeOf",(function(){return function(e){return a(r(e))}}))},4649:(e,t,n)=>{var r=n(17481);n(81025)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},16736:(e,t,n)=>{var r=n(17481);n(81025)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},7260:(e,t,n)=>{var r=n(17481);n(81025)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},52798:(e,t,n)=>{var r=n(35366);r(r.S,"Object",{is:n(61541)})},30081:(e,t,n)=>{var r=n(54200),a=n(15825);n(81025)("keys",(function(){return function(e){return a(r(e))}}))},17026:(e,t,n)=>{var r=n(17481),a=n(82153).onFreeze;n(81025)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(a(t)):t}}))},24371:(e,t,n)=>{var r=n(17481),a=n(82153).onFreeze;n(81025)("seal",(function(e){return function(t){return e&&r(t)?e(a(t)):t}}))},86911:(e,t,n)=>{var r=n(35366);r(r.S,"Object",{setPrototypeOf:n(87135).set})},84394:(e,t,n)=>{"use strict";var r=n(12845),a={};a[n(9739)("toStringTag")]="z",a+""!="[object z]"&&n(1564)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},15072:(e,t,n)=>{var r=n(35366),a=n(13765);r(r.G+r.F*(parseFloat!=a),{parseFloat:a})},19315:(e,t,n)=>{var r=n(35366),a=n(80500);r(r.G+r.F*(parseInt!=a),{parseInt:a})},12813:(e,t,n)=>{"use strict";var r,a,o,l,i=n(35113),s=n(56341),u=n(82794),p=n(12845),c=n(35366),m=n(17481),d=n(23079),h=n(30599),f=n(62971),k=n(59789),b=n(7122).set,g=n(37)(),y=n(83285),v=n(98332),N=n(83843),w=n(38614),O="Promise",j=s.TypeError,x=s.process,S=x&&x.versions,C=S&&S.v8||"",P=s.Promise,E="process"==p(x),D=function(){},T=a=y.f,_=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[n(9739)("species")]=function(e){e(D,D)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(D)instanceof t&&0!==C.indexOf("6.6")&&-1===N.indexOf("Chrome/66")}catch(e){}}(),M=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},A=function(e,t){if(!e._n){e._n=!0;var n=e._c;g((function(){for(var r=e._v,a=1==e._s,o=0,l=function(t){var n,o,l,i=a?t.ok:t.fail,s=t.resolve,u=t.reject,p=t.domain;try{i?(a||(2==e._h&&I(e),e._h=1),!0===i?n=r:(p&&p.enter(),n=i(r),p&&(p.exit(),l=!0)),n===t.promise?u(j("Promise-chain cycle")):(o=M(n))?o.call(n,s,u):s(n)):u(r)}catch(e){p&&!l&&p.exit(),u(e)}};n.length>o;)l(n[o++]);e._c=[],e._n=!1,t&&!e._h&&L(e)}))}},L=function(e){b.call(s,(function(){var t,n,r,a=e._v,o=R(e);if(o&&(t=v((function(){E?x.emit("unhandledRejection",a,e):(n=s.onunhandledrejection)?n({promise:e,reason:a}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",a)})),e._h=E||R(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},I=function(e){b.call(s,(function(){var t;E?x.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),A(t,!0))},z=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw j("Promise can't be resolved itself");(t=M(e))?g((function(){var r={_w:n,_d:!1};try{t.call(e,u(z,r,1),u(B,r,1))}catch(e){B.call(r,e)}})):(n._v=e,n._s=1,A(n,!1))}catch(e){B.call({_w:n,_d:!1},e)}}};_||(P=function(e){h(this,P,O,"_h"),d(e),r.call(this);try{e(u(z,this,1),u(B,this,1))}catch(e){B.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(24092)(P.prototype,{then:function(e,t){var n=T(k(this,P));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=E?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(z,e,1),this.reject=u(B,e,1)},y.f=T=function(e){return e===P||e===l?new o(e):a(e)}),c(c.G+c.W+c.F*!_,{Promise:P}),n(21309)(P,O),n(75993)(O),l=n(14411).Promise,c(c.S+c.F*!_,O,{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),c(c.S+c.F*(i||!_),O,{resolve:function(e){return w(i&&this===l?P:this,e)}}),c(c.S+c.F*!(_&&n(61461)((function(e){P.all(e).catch(D)}))),O,{all:function(e){var t=this,n=T(t),r=n.resolve,a=n.reject,o=v((function(){var n=[],o=0,l=1;f(e,!1,(function(e){var i=o++,s=!1;n.push(void 0),l++,t.resolve(e).then((function(e){s||(s=!0,n[i]=e,--l||r(n))}),a)})),--l||r(n)}));return o.e&&a(o.v),n.promise},race:function(e){var t=this,n=T(t),r=n.reject,a=v((function(){f(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return a.e&&r(a.v),n.promise}})},69310:(e,t,n)=>{var r=n(35366),a=n(23079),o=n(59719),l=(n(56341).Reflect||{}).apply,i=Function.apply;r(r.S+r.F*!n(71240)((function(){l((function(){}))})),"Reflect",{apply:function(e,t,n){var r=a(e),s=o(n);return l?l(r,t,s):i.call(r,t,s)}})},66722:(e,t,n)=>{var r=n(35366),a=n(62545),o=n(23079),l=n(59719),i=n(17481),s=n(71240),u=n(46966),p=(n(56341).Reflect||{}).construct,c=s((function(){function e(){}return!(p((function(){}),[],e)instanceof e)})),m=!s((function(){p((function(){}))}));r(r.S+r.F*(c||m),"Reflect",{construct:function(e,t){o(e),l(t);var n=arguments.length<3?e:o(arguments[2]);if(m&&!c)return p(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var s=n.prototype,d=a(i(s)?s:Object.prototype),h=Function.apply.call(e,d,t);return i(h)?h:d}})},18372:(e,t,n)=>{var r=n(83530),a=n(35366),o=n(59719),l=n(9241);a(a.S+a.F*n(71240)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=l(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},14604:(e,t,n)=>{var r=n(35366),a=n(57762).f,o=n(59719);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=a(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},84781:(e,t,n)=>{"use strict";var r=n(35366),a=n(59719),o=function(e){this._t=a(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(47938)(o,"Object",(function(){var e,t=this,n=t._k;do{if(t._i>=n.length)return{value:void 0,done:!0}}while(!((e=n[t._i++])in t._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},24395:(e,t,n)=>{var r=n(57762),a=n(35366),o=n(59719);a(a.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},49649:(e,t,n)=>{var r=n(35366),a=n(44408),o=n(59719);r(r.S,"Reflect",{getPrototypeOf:function(e){return a(o(e))}})},38416:(e,t,n)=>{var r=n(57762),a=n(44408),o=n(41063),l=n(35366),i=n(17481),s=n(59719);l(l.S,"Reflect",{get:function e(t,n){var l,u,p=arguments.length<3?t:arguments[2];return s(t)===p?t[n]:(l=r.f(t,n))?o(l,"value")?l.value:void 0!==l.get?l.get.call(p):void 0:i(u=a(t))?e(u,n,p):void 0}})},32475:(e,t,n)=>{var r=n(35366);r(r.S,"Reflect",{has:function(e,t){return t in e}})},12924:(e,t,n)=>{var r=n(35366),a=n(59719),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return a(e),!o||o(e)}})},16337:(e,t,n)=>{var r=n(35366);r(r.S,"Reflect",{ownKeys:n(17285)})},83286:(e,t,n)=>{var r=n(35366),a=n(59719),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){a(e);try{return o&&o(e),!0}catch(e){return!1}}})},68766:(e,t,n)=>{var r=n(35366),a=n(87135);a&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){a.check(e,t);try{return a.set(e,t),!0}catch(e){return!1}}})},47225:(e,t,n)=>{var r=n(83530),a=n(57762),o=n(44408),l=n(41063),i=n(35366),s=n(21761),u=n(59719),p=n(17481);i(i.S,"Reflect",{set:function e(t,n,i){var c,m,d=arguments.length<4?t:arguments[3],h=a.f(u(t),n);if(!h){if(p(m=o(t)))return e(m,n,i,d);h=s(0)}if(l(h,"value")){if(!1===h.writable||!p(d))return!1;if(c=a.f(d,n)){if(c.get||c.set||!1===c.writable)return!1;c.value=i,r.f(d,n,c)}else r.f(d,n,s(0,i));return!0}return void 0!==h.set&&(h.set.call(d,i),!0)}})},87080:(e,t,n)=>{var r=n(56341),a=n(94805),o=n(83530).f,l=n(14230).f,i=n(89543),s=n(6439),u=r.RegExp,p=u,c=u.prototype,m=/a/g,d=/a/g,h=new u(m)!==m;if(n(51916)&&(!h||n(71240)((function(){return d[n(9739)("match")]=!1,u(m)!=m||u(d)==d||"/a/i"!=u(m,"i")})))){u=function(e,t){var n=this instanceof u,r=i(e),o=void 0===t;return!n&&r&&e.constructor===u&&o?e:a(h?new p(r&&!o?e.source:e,t):p((r=e instanceof u)?e.source:e,r&&o?s.call(e):t),n?this:c,u)};for(var f=function(e){e in u||o(u,e,{configurable:!0,get:function(){return p[e]},set:function(t){p[e]=t}})},k=l(p),b=0;k.length>b;)f(k[b++]);c.constructor=u,u.prototype=c,n(1564)(r,"RegExp",u)}n(75993)("RegExp")},58615:(e,t,n)=>{"use strict";var r=n(18868);n(35366)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},39544:(e,t,n)=>{n(51916)&&"g"!=/./g.flags&&n(83530).f(RegExp.prototype,"flags",{configurable:!0,get:n(6439)})},45475:(e,t,n)=>{"use strict";var r=n(59719),a=n(61838),o=n(9959),l=n(29073);n(25307)("match",1,(function(e,t,n,i){return[function(n){var r=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=i(n,e,this);if(t.done)return t.value;var s=r(e),u=String(this);if(!s.global)return l(s,u);var p=s.unicode;s.lastIndex=0;for(var c,m=[],d=0;null!==(c=l(s,u));){var h=String(c[0]);m[d]=h,""===h&&(s.lastIndex=o(u,a(s.lastIndex),p)),d++}return 0===d?null:m}]}))},33770:(e,t,n)=>{"use strict";var r=n(59719),a=n(54200),o=n(61838),l=n(51549),i=n(9959),s=n(29073),u=Math.max,p=Math.min,c=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;n(25307)("replace",2,(function(e,t,n,h){return[function(r,a){var o=e(this),l=null==r?void 0:r[t];return void 0!==l?l.call(r,o,a):n.call(String(o),r,a)},function(e,t){var a=h(n,e,this,t);if(a.done)return a.value;var c=r(e),m=String(this),d="function"==typeof t;d||(t=String(t));var k=c.global;if(k){var b=c.unicode;c.lastIndex=0}for(var g=[];;){var y=s(c,m);if(null===y)break;if(g.push(y),!k)break;""===String(y[0])&&(c.lastIndex=i(m,o(c.lastIndex),b))}for(var v,N="",w=0,O=0;O<g.length;O++){y=g[O];for(var j=String(y[0]),x=u(p(l(y.index),m.length),0),S=[],C=1;C<y.length;C++)S.push(void 0===(v=y[C])?v:String(v));var P=y.groups;if(d){var E=[j].concat(S,x,m);void 0!==P&&E.push(P);var D=String(t.apply(void 0,E))}else D=f(j,m,x,S,P,t);x>=w&&(N+=m.slice(w,x)+D,w=x+j.length)}return N+m.slice(w)}];function f(e,t,r,o,l,i){var s=r+e.length,u=o.length,p=d;return void 0!==l&&(l=a(l),p=m),n.call(i,p,(function(n,a){var i;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(s);case"<":i=l[a.slice(1,-1)];break;default:var p=+a;if(0===p)return n;if(p>u){var m=c(p/10);return 0===m?n:m<=u?void 0===o[m-1]?a.charAt(1):o[m-1]+a.charAt(1):n}i=o[p-1]}return void 0===i?"":i}))}}))},5201:(e,t,n)=>{"use strict";var r=n(59719),a=n(61541),o=n(29073);n(25307)("search",1,(function(e,t,n,l){return[function(n){var r=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=l(n,e,this);if(t.done)return t.value;var i=r(e),s=String(this),u=i.lastIndex;a(u,0)||(i.lastIndex=0);var p=o(i,s);return a(i.lastIndex,u)||(i.lastIndex=u),null===p?-1:p.index}]}))},61385:(e,t,n)=>{"use strict";var r=n(89543),a=n(59719),o=n(59789),l=n(9959),i=n(61838),s=n(29073),u=n(18868),p=n(71240),c=Math.min,m=[].push,d=4294967295,h=!p((function(){RegExp(d,"y")}));n(25307)("split",2,(function(e,t,n,p){var f;return f="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(a,e,t);for(var o,l,i,s=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,h=void 0===t?d:t>>>0,f=new RegExp(e.source,p+"g");(o=u.call(f,a))&&!((l=f.lastIndex)>c&&(s.push(a.slice(c,o.index)),o.length>1&&o.index<a.length&&m.apply(s,o.slice(1)),i=o[0].length,c=l,s.length>=h));)f.lastIndex===o.index&&f.lastIndex++;return c===a.length?!i&&f.test("")||s.push(""):s.push(a.slice(c)),s.length>h?s.slice(0,h):s}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var a=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,a,r):f.call(String(a),n,r)},function(e,t){var r=p(f,e,this,t,f!==n);if(r.done)return r.value;var u=a(e),m=String(this),k=o(u,RegExp),b=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(h?"y":"g"),y=new k(h?u:"^(?:"+u.source+")",g),v=void 0===t?d:t>>>0;if(0===v)return[];if(0===m.length)return null===s(y,m)?[m]:[];for(var N=0,w=0,O=[];w<m.length;){y.lastIndex=h?w:0;var j,x=s(y,h?m:m.slice(w));if(null===x||(j=c(i(y.lastIndex+(h?0:w)),m.length))===N)w=l(m,w,b);else{if(O.push(m.slice(N,w)),O.length===v)return O;for(var S=1;S<=x.length-1;S++)if(O.push(x[S]),O.length===v)return O;w=N=j}}return O.push(m.slice(N)),O}]}))},35244:(e,t,n)=>{"use strict";n(39544);var r=n(59719),a=n(6439),o=n(51916),l="toString",i=/./.toString,s=function(e){n(1564)(RegExp.prototype,l,e,!0)};n(71240)((function(){return"/a/b"!=i.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?a.call(e):void 0)})):i.name!=l&&s((function(){return i.call(this)}))},98253:(e,t,n)=>{"use strict";var r=n(95144),a=n(91603);e.exports=n(58091)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(a(this,"Set"),e=0===e?0:e,e)}},r)},50447:(e,t,n)=>{"use strict";n(79048)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},65624:(e,t,n)=>{"use strict";n(79048)("big",(function(e){return function(){return e(this,"big","","")}}))},51263:(e,t,n)=>{"use strict";n(79048)("blink",(function(e){return function(){return e(this,"blink","","")}}))},65193:(e,t,n)=>{"use strict";n(79048)("bold",(function(e){return function(){return e(this,"b","","")}}))},82858:(e,t,n)=>{"use strict";var r=n(35366),a=n(7384)(!1);r(r.P,"String",{codePointAt:function(e){return a(this,e)}})},22058:(e,t,n)=>{"use strict";var r=n(35366),a=n(61838),o=n(83256),l="endsWith",i="".endsWith;r(r.P+r.F*n(46881)(l),"String",{endsWith:function(e){var t=o(this,e,l),n=arguments.length>1?arguments[1]:void 0,r=a(t.length),s=void 0===n?r:Math.min(a(n),r),u=String(e);return i?i.call(t,u,s):t.slice(s-u.length,s)===u}})},28241:(e,t,n)=>{"use strict";n(79048)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},96723:(e,t,n)=>{"use strict";n(79048)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},9394:(e,t,n)=>{"use strict";n(79048)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},22539:(e,t,n)=>{var r=n(35366),a=n(15044),o=String.fromCharCode,l=String.fromCodePoint;r(r.S+r.F*(!!l&&1!=l.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,l=0;r>l;){if(t=+arguments[l++],a(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},95472:(e,t,n)=>{"use strict";var r=n(35366),a=n(83256),o="includes";r(r.P+r.F*n(46881)(o),"String",{includes:function(e){return!!~a(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},66938:(e,t,n)=>{"use strict";n(79048)("italics",(function(e){return function(){return e(this,"i","","")}}))},74333:(e,t,n)=>{"use strict";var r=n(7384)(!0);n(19121)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},11961:(e,t,n)=>{"use strict";n(79048)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},39820:(e,t,n)=>{var r=n(35366),a=n(8500),o=n(61838);r(r.S,"String",{raw:function(e){for(var t=a(e.raw),n=o(t.length),r=arguments.length,l=[],i=0;n>i;)l.push(String(t[i++])),i<r&&l.push(String(arguments[i]));return l.join("")}})},57001:(e,t,n)=>{var r=n(35366);r(r.P,"String",{repeat:n(40005)})},69659:(e,t,n)=>{"use strict";n(79048)("small",(function(e){return function(){return e(this,"small","","")}}))},57492:(e,t,n)=>{"use strict";var r=n(35366),a=n(61838),o=n(83256),l="startsWith",i="".startsWith;r(r.P+r.F*n(46881)(l),"String",{startsWith:function(e){var t=o(this,e,l),n=a(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return i?i.call(t,r,n):t.slice(n,n+r.length)===r}})},23354:(e,t,n)=>{"use strict";n(79048)("strike",(function(e){return function(){return e(this,"strike","","")}}))},99620:(e,t,n)=>{"use strict";n(79048)("sub",(function(e){return function(){return e(this,"sub","","")}}))},638:(e,t,n)=>{"use strict";n(79048)("sup",(function(e){return function(){return e(this,"sup","","")}}))},28417:(e,t,n)=>{"use strict";n(97370)("trim",(function(e){return function(){return e(this,3)}}))},98997:(e,t,n)=>{"use strict";var r=n(56341),a=n(41063),o=n(51916),l=n(35366),i=n(1564),s=n(82153).KEY,u=n(71240),p=n(97355),c=n(21309),m=n(90430),d=n(9739),h=n(38833),f=n(48155),k=n(4535),b=n(40689),g=n(59719),y=n(17481),v=n(54200),N=n(8500),w=n(9241),O=n(21761),j=n(62545),x=n(85009),S=n(57762),C=n(32520),P=n(83530),E=n(15825),D=S.f,T=P.f,_=x.f,M=r.Symbol,A=r.JSON,L=A&&A.stringify,R=d("_hidden"),I=d("toPrimitive"),B={}.propertyIsEnumerable,z=p("symbol-registry"),F=p("symbols"),q=p("op-symbols"),H=Object.prototype,X="function"==typeof M&&!!C.f,Y=r.QObject,U=!Y||!Y.prototype||!Y.prototype.findChild,W=o&&u((function(){return 7!=j(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=D(H,t);r&&delete H[t],T(e,t,n),r&&e!==H&&T(H,t,r)}:T,V=function(e){var t=F[e]=j(M.prototype);return t._k=e,t},G=X&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},$=function(e,t,n){return e===H&&$(q,t,n),g(e),t=w(t,!0),g(n),a(F,t)?(n.enumerable?(a(e,R)&&e[R][t]&&(e[R][t]=!1),n=j(n,{enumerable:O(0,!1)})):(a(e,R)||T(e,R,O(1,{})),e[R][t]=!0),W(e,t,n)):T(e,t,n)},J=function(e,t){g(e);for(var n,r=k(t=N(t)),a=0,o=r.length;o>a;)$(e,n=r[a++],t[n]);return e},Q=function(e){var t=B.call(this,e=w(e,!0));return!(this===H&&a(F,e)&&!a(q,e))&&(!(t||!a(this,e)||!a(F,e)||a(this,R)&&this[R][e])||t)},K=function(e,t){if(e=N(e),t=w(t,!0),e!==H||!a(F,t)||a(q,t)){var n=D(e,t);return!n||!a(F,t)||a(e,R)&&e[R][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=_(N(e)),r=[],o=0;n.length>o;)a(F,t=n[o++])||t==R||t==s||r.push(t);return r},ee=function(e){for(var t,n=e===H,r=_(n?q:N(e)),o=[],l=0;r.length>l;)!a(F,t=r[l++])||n&&!a(H,t)||o.push(F[t]);return o};X||(i((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=m(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(q,n),a(this,R)&&a(this[R],e)&&(this[R][e]=!1),W(this,e,O(1,n))};return o&&U&&W(H,e,{configurable:!0,set:t}),V(e)}).prototype,"toString",(function(){return this._k})),S.f=K,P.f=$,n(14230).f=x.f=Z,n(41144).f=Q,C.f=ee,o&&!n(35113)&&i(H,"propertyIsEnumerable",Q,!0),h.f=function(e){return V(d(e))}),l(l.G+l.W+l.F*!X,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)d(te[ne++]);for(var re=E(d.store),ae=0;re.length>ae;)f(re[ae++]);l(l.S+l.F*!X,"Symbol",{for:function(e){return a(z,e+="")?z[e]:z[e]=M(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){U=!0},useSimple:function(){U=!1}}),l(l.S+l.F*!X,"Object",{create:function(e,t){return void 0===t?j(e):J(j(e),t)},defineProperty:$,defineProperties:J,getOwnPropertyDescriptor:K,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=u((function(){C.f(1)}));l(l.S+l.F*oe,"Object",{getOwnPropertySymbols:function(e){return C.f(v(e))}}),A&&l(l.S+l.F*(!X||u((function(){var e=M();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(n=t=r[1],(y(t)||void 0!==e)&&!G(e))return b(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),r[1]=t,L.apply(A,r)}}),M.prototype[I]||n(98442)(M.prototype,I,M.prototype.valueOf),c(M,"Symbol"),c(Math,"Math",!0),c(r.JSON,"JSON",!0)},63315:(e,t,n)=>{"use strict";var r=n(35366),a=n(67728),o=n(29895),l=n(59719),i=n(15044),s=n(61838),u=n(17481),p=n(56341).ArrayBuffer,c=n(59789),m=o.ArrayBuffer,d=o.DataView,h=a.ABV&&p.isView,f=m.prototype.slice,k=a.VIEW,b="ArrayBuffer";r(r.G+r.W+r.F*(p!==m),{ArrayBuffer:m}),r(r.S+r.F*!a.CONSTR,b,{isView:function(e){return h&&h(e)||u(e)&&k in e}}),r(r.P+r.U+r.F*n(71240)((function(){return!new m(2).slice(1,void 0).byteLength})),b,{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(l(this),e);for(var n=l(this).byteLength,r=i(e,n),a=i(void 0===t?n:t,n),o=new(c(this,m))(s(a-r)),u=new d(this),p=new d(o),h=0;r<a;)p.setUint8(h++,u.getUint8(r++));return o}}),n(75993)(b)},12920:(e,t,n)=>{var r=n(35366);r(r.G+r.W+r.F*!n(67728).ABV,{DataView:n(29895).DataView})},30951:(e,t,n)=>{n(58754)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},10029:(e,t,n)=>{n(58754)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},76935:(e,t,n)=>{n(58754)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},56403:(e,t,n)=>{n(58754)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},95443:(e,t,n)=>{n(58754)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},17846:(e,t,n)=>{n(58754)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},51200:(e,t,n)=>{n(58754)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},69815:(e,t,n)=>{n(58754)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},43771:(e,t,n)=>{n(58754)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},57391:(e,t,n)=>{"use strict";var r,a=n(56341),o=n(66934)(0),l=n(1564),i=n(82153),s=n(49821),u=n(33503),p=n(17481),c=n(91603),m=n(91603),d=!a.ActiveXObject&&"ActiveXObject"in a,h="WeakMap",f=i.getWeak,k=Object.isExtensible,b=u.ufstore,g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(p(e)){var t=f(e);return!0===t?b(c(this,h)).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(c(this,h),e,t)}},v=e.exports=n(58091)(h,g,y,u,!0,!0);m&&d&&(s((r=u.getConstructor(g,h)).prototype,y),i.NEED=!0,o(["delete","has","get","set"],(function(e){var t=v.prototype,n=t[e];l(t,e,(function(t,a){if(p(t)&&!k(t)){this._f||(this._f=new r);var o=this._f[e](t,a);return"set"==e?this:o}return n.call(this,t,a)}))})))},33307:(e,t,n)=>{"use strict";var r=n(33503),a=n(91603),o="WeakSet";n(58091)(o,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(a(this,o),e,!0)}},r,!1,!0)},98125:(e,t,n)=>{"use strict";var r=n(35366),a=n(3885),o=n(54200),l=n(61838),i=n(23079),s=n(44087);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return i(e),t=l(r.length),n=s(r,0),a(n,r,r,t,0,1,e,arguments[1]),n}}),n(12802)("flatMap")},49348:(e,t,n)=>{"use strict";var r=n(35366),a=n(61545)(!0);r(r.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n(12802)("includes")},1768:(e,t,n)=>{var r=n(35366),a=n(15346)(!0);r(r.S,"Object",{entries:function(e){return a(e)}})},59223:(e,t,n)=>{var r=n(35366),a=n(17285),o=n(8500),l=n(57762),i=n(51676);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),s=l.f,u=a(r),p={},c=0;u.length>c;)void 0!==(n=s(r,t=u[c++]))&&i(p,t,n);return p}})},67442:(e,t,n)=>{var r=n(35366),a=n(15346)(!1);r(r.S,"Object",{values:function(e){return a(e)}})},14936:(e,t,n)=>{"use strict";var r=n(35366),a=n(14411),o=n(56341),l=n(59789),i=n(38614);r(r.P+r.R,"Promise",{finally:function(e){var t=l(this,a.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return i(t,e()).then((function(){return n}))}:e,n?function(n){return i(t,e()).then((function(){throw n}))}:e)}})},20239:(e,t,n)=>{"use strict";var r=n(35366),a=n(9823),o=n(83843),l=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*l,"String",{padEnd:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},28755:(e,t,n)=>{"use strict";var r=n(35366),a=n(9823),o=n(83843),l=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*l,"String",{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},53412:(e,t,n)=>{"use strict";n(97370)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},66948:(e,t,n)=>{"use strict";n(97370)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},78284:(e,t,n)=>{n(48155)("asyncIterator")},78745:(e,t,n)=>{for(var r=n(71308),a=n(15825),o=n(1564),l=n(56341),i=n(98442),s=n(4919),u=n(9739),p=u("iterator"),c=u("toStringTag"),m=s.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=a(d),f=0;f<h.length;f++){var k,b=h[f],g=d[b],y=l[b],v=y&&y.prototype;if(v&&(v[p]||i(v,p,m),v[c]||i(v,c,b),s[b]=m,g))for(k in r)v[k]||o(v,k,r[k],!0)}},60025:(e,t,n)=>{var r=n(35366),a=n(7122);r(r.G+r.B,{setImmediate:a.set,clearImmediate:a.clear})},51629:(e,t,n)=>{var r=n(56341),a=n(35366),o=n(83843),l=[].slice,i=/MSIE .\./.test(o),s=function(e){return function(t,n){var r=arguments.length>2,a=!!r&&l.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,a)}:t,n)}};a(a.G+a.B+a.F*i,{setTimeout:s(r.setTimeout),setInterval:s(r.setInterval)})},1523:(e,t,n)=>{n(51629),n(60025),n(78745),e.exports=n(14411)},67228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},22858:e=>{e.exports=function(e){if(Array.isArray(e))return e}},23646:(e,t,n)=>{var r=n(67228);e.exports=function(e){if(Array.isArray(e))return r(e)}},81506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},48926:e=>{function t(e,t,n,r,a,o,l){try{var i=e[o](l),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,o){var l=e.apply(n,r);function i(e){t(l,a,o,i,s,"next",e)}function s(e){t(l,a,o,i,s,"throw",e)}i(void 0)}))}}},34575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},93913:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},59713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},67154:e=>{function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t},29754:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},2205:(e,t,n)=>{var r=n(99489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},46860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},13884:e=>{e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}},80521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},98206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},6479:(e,t,n)=>{var r=n(37316);e.exports=function(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},37316:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},78585:(e,t,n)=>{var r=n(50008),a=n(81506);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}},99489:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},63038:(e,t,n)=>{var r=n(22858),a=n(13884),o=n(60379),l=n(80521);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||l()}},319:(e,t,n)=>{var r=n(23646),a=n(46860),o=n(60379),l=n(98206);e.exports=function(e){return r(e)||a(e)||o(e)||l()}},50008:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},60379:(e,t,n)=>{var r=n(67228);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},87757:(e,t,n)=>{e.exports=n(35666)},3905:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>u,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=r.createContext({}),s=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["components","mdxType","originalType","parentName"]),c=s(n),m=a,d=c["".concat(i,".").concat(m)]||c[m]||p[m]||o;return n?r.createElement(d,l(l({ref:t},u),{},{components:n})):r.createElement(d,l({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},74119:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Algorithm"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/complexy.md"}),"Algorithm And Complexy"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/recursive.md"}),"Recursive")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/binary_search.md"}),"Binary Search"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/greedy.md"}),"Greedy Algorithm")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/dynamic_programming.md"}),"Dynamic Programming"))),(0,i.kt)("h3",null,"Sort Algorithm"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/sort/selection_sort.md"}),"Selection Sort")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/sort/quick_sort.md"}),"Quick Sort")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/sort/merge_sort.md"}),"Merge Sort")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/sort/heap_sort.md"}),"Heap Sort"))),(0,i.kt)("p",null,"算法是一种思想! 以排序算法为例, 可能最常见的是在数组中使用排序算法, 但是相同的思想也能用于数组对象, 甚至链表中, 比如链表中实现排序的两道题。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/LeetCode/147.Insertion_Sort_List/README.md"}),"147.Insertion Sort List"),": 插入排序在链表中的实现;"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/LeetCode/148.Sort_List/README.md"}),"148.Sort List"),": 归并排序在链表中的实现;")),(0,i.kt)("h3",null,"Data Structure"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/stack.md"}),"Stack")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/queue.md"}),"Queue")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/list.md"}),"List")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/set.md"}),"Set")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/.md"}),"Dictionary")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/hash_table.md"}),"Hash Table")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/binary_tree.md"}),"Binary Tree")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/graph.md"}),"Graph"))))}c.isMDXComponent=!0},52492:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Back Tracking 回溯法"),(0,i.kt)("p",null,"回溯是一种思想。DFS 也是回溯思想的一种实践案例。回溯法本质是一种穷举的递归算法, 既然是递归, 它就需要有终止条件。"),(0,i.kt)("h3",null,"解决场景"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"排列问题")),(0,i.kt)("h3",null,"回溯法相关题目"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/LeetCode/17.Letter_Combinations_of_a_Phone_Number.md"}),"17.Letter Combinations of a Phone Number")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/LeetCode/22.Generate_Parentheses.md"}),"22.Generate Parentheses")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/LeetCode/78.Subsets.md"}),"78.Subsets")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/LeetCode/93.Restore_IP_Addresses.md"}),"93.Restore IP Addresses")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/LeetCode/131.Palindrome%20Partitioning.md"}),"131.Palindrome Partitioning"))))}c.isMDXComponent=!0},68407:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"二分查找思想"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"取已排列好数组的中间值"),(0,i.kt)("li",{parentName:"ol"},"把需查找的值和中间值进行比较"),(0,i.kt)("li",{parentName:"ol"},"如果比中间值小, 则对前半部分进行类似操作；如果比中间值大, 则对后半部分进行类似操作；")),(0,i.kt)("h3",null,"二分查找代码实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// arr 为指定数组, target 为目标元素\nfunction binarysearch(arr, target) {\n  let left = 0\n  let right = arr.length - 1\n  while (left <= right) {\n    const middlePoint = Math.floor((left + right) / 2)\n    let middle = arr[middlePoint]\n    if (middle > target) {\n      right = middlePoint - 1\n    } else if (middle < target) {\n      left = middlePoint + 1\n    } else {\n      return middle\n    }\n  }\n\n  return '数组中目标元素不存在'\n}\n")),(0,i.kt)("h3",null,"以二分查找法看如何写出正确的程序"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"明确变量的含义。比如在上述代码中, left 与 right 就是变量, 其意味当前查找数组中的左边界与右边界。","[left, ...right]",";"),(0,i.kt)("li",{parentName:"ul"},"循环不变量。在上述代码中, 循环中改变变量(left, right)的取值, 但是不改变变量的含义。","[left, ...right]",";"),(0,i.kt)("li",{parentName:"ul"},"小数据量调试。(快速, 准确, 耐心)"),(0,i.kt)("li",{parentName:"ul"},"大数据量调试。(能测出程序的性能)")),(0,i.kt)("h3",null,"真题"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"题目: 题目: 在一个二维数组中, 每一行都按照从左到右递增的顺序排序, 每一列都按照从上到下递增的顺序排序。请完成一个函数, 输入这样的一个二维数组和一个整数, 判断数组中是否含有该整数。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"1  2  3  4\n5  6  7  8\n9  10 11 12\n13 14 15 16\n\nfunction find(arr, n) {\n  let x = 0\n  let y = arr[x].length - 1\n  while (x < arr.length && y > 0) {\n    if (n > arr[x][y]) {\n      x++\n    } else if (n < arr[x][y]) {\n      y--\n    } else {\n      return '找到目标元素'\n    }\n  }\n  return '目标元素不存在'\n}\n")),(0,i.kt)("p",null,"这道题严格不算是二分查找, 不过用到了类似的思维。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"求开方")),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/sqrtx/description/"}),"Leetcode : 69. Sqrt(x) (Easy)")),(0,i.kt)("p",null,"思路: 满足 0 < sqrt < x && sqrt === x / sqrt, 转化为二分查找求 sqrt"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} x\n * @return {number}\n */\nvar mySqrt = function(x) { // 8\n    let left = 1\n    let right = x\n    while (left <= right) {\n        const mid = Math.floor((left + right) / 2) // 4 2 3\n        const sqrt = x / mid // 2 4 2.7\n        if (sqrt === mid) return sqrt\n        if (sqrt > mid) {\n            left = mid + 1 // 3\n        } else if (sqrt < mid) {\n            right = mid - 1 // 3 2\n        }\n    }\n    return right // 这里返回 right 而不是 left 的原因: 用了 Math.floor, mid 会偏小, 相应 sqrt 会偏大\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"有序数组的 Single Element")),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/single-element-in-a-sorted-array/description/"}),"Leetcode : 540. Single Element in a Sorted Array (Medium)")),(0,i.kt)("p",null,"题目描述: 一个有序数组只有一个数不出现两次, 找出这个数。"))}c.isMDXComponent=!0},18962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"一个时间复杂度的问题"),(0,i.kt)("p",null,"有一个字符串数组, 将数组中的每一个字符串按照字母序进行排序; 然后再将整个字符串数组按照字典序进行排序; 时间复杂度是多少?"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"解析"),(0,i.kt)("p",null,"假设数组中最长的字符串长度为 s, 有 n 个字符串。"),(0,i.kt)("p",null,"对每一个字符串按照字母序进行排序: ",(0,i.kt)("inlineCode",{parentName:"p"},"n * slogs"),"\n对整个字符串数组按照字典序进行排序: ",(0,i.kt)("inlineCode",{parentName:"p"},"s * nlogn")," (比如比较 'abc' 和 'abd' 两个字符串的顺序, 需要比较到第 s 位字母, 所以需要乘上 3。)"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"排序默认为 O(nlogn) 的复杂度"))),(0,i.kt)("h3",null,"简单的复杂度分析"),(0,i.kt)("h4",null,"O(n^2)"),(0,i.kt)("p",null,"如下是 ",(0,i.kt)("a",u({parentName:"p"},{href:"./%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F.md"}),"选择排序")," 中的代码片段:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var chooseSort = function(arr) {\n  for (let x = 0; x < arr.length; x++) {\n    let min = x\n    for (let y = x + 1; y < arr.length; y++) {\n      if (arr[y] < arr[min]) {\n        min = y\n      }\n    }\n    let tmp = arr[x]\n    arr[x] = arr[min]\n    arr[min] = tmp\n  }\n  return arr\n}\n")),(0,i.kt)("p",null,"分析其时间复杂度"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"(n - 1) + (n - 2) + (n - 3) + ... + 0 = (n - 1 + 0) * n / 2 ≈ O(n^2)\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"需注意的是并不是所有有两重遍历循环的算法时间复杂度都是 O(n^2)"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function demo1(n) {\n  for (let i = 0; i < n; i++) {\n    for (let j = 0; j < 30; j++) {\n      ...\n    }\n  }\n}\n")),(0,i.kt)("p",null,"在 demo1 函数中, 因为内层循环的次数为常量 30, 所以其时间复杂度为 ",(0,i.kt)("inlineCode",{parentName:"p"},"30 * n ≈ O(n)")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function demo2(n) {\n  for (let i = 0; i < n; i += i) {\n    for (let j = 0; j < n; j++) {\n      ...\n    }\n  }\n}\n")),(0,i.kt)("p",null,"在 demo2 函数中, 外层循环循环的次数 ",(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/b4705e227e4b5c5616b7eb81cfe082cb.jpg",alt:null})),", 所以其复杂度也不是 O(n^2) 而是 O(logN)。"),(0,i.kt)("h4",null,"O(logN)"),(0,i.kt)("p",null,"如下是 ",(0,i.kt)("a",u({parentName:"p"},{href:"./%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE.md"}),"二分查找")," 中的代码片段:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// arr 为指定数组, target 为目标元素\nfunction binarysearch(arr, target) {\n  let left = 0\n  let right = arr.length - 1\n  while (left <= right) {\n    const middlePoint = Math.floor((left + right) / 2)\n    let middle = arr[middlePoint]\n    if (middle > target) {\n      right = middlePoint - 1\n    } else if (middle < target) {\n      left = middlePoint + 1\n    } else {\n      return middle\n    }\n  }\n\n  return '数组中目标元素不存在'\n}\n")),(0,i.kt)("p",null,"分析其时间复杂度。"),(0,i.kt)("p",null,"假设数据总量为 N, 因为二分查找每次会减少一半的数据,\n所以经过 1 次后, 数据剩下为 N / 2,\n经过 2 次后, 数据剩下为 N / 2^2,\n二分查找的极限是最后剩下 1 个数据, 假设经过 m 次后, 达到极限, N / 2^m = 1, 即 ",(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/894f6426601047921de80c181e3656c2.jpg",alt:null})),", 所以时间复杂度为 logN；"),(0,i.kt)("p",null,"题目: 现在有一个 1~1000 区间中的正整数, 需要你猜下这个数字是几, 你只能问一个问题: 大了还是小了？问需要猜几次才能猜对？"),(0,i.kt)("p",null,"答: 根据二分查找的时间复杂度为 logN, 所以题目可以转化为求 log1000 的值, 2^10 = 1024, 所以最多猜 10 次就能猜对;"),(0,i.kt)("h3",null,"数据规模"),(0,i.kt)("p",null,"以 JavaScript 这门语言为例, 书写如下函数"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function main() {\n for (let i = 1; i <= 10; i++) {\n   let n = Math.pow(10, i)\n   console.time('start')\n   let sum = 0\n   for (let x = 0; x < n; x++) {\n     sum += x\n   }\n   console.log(`10^${i}`)\n   console.timeEnd('start')\n }\n}\n")),(0,i.kt)("p",null,"运行结果为:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"10^1\n  start: 0.14892578125ms\n10^2\n  start: 0.071044921875ms\n10^3\n  start: 0.074951171875ms\n10^4\n  start: 0.232177734375ms\n10^5\n  start: 4.281982421875ms\n10^6\n  start: 0.97509765625ms\n10^7\n  start: 8.960205078125ms\n10^8\n  start: 90.760986328125ms\n10^9\n  start: 887.587890625ms\n10^10\n  start: 13403.979248046875ms\n")),(0,i.kt)("p",null,"可以得出如下结论:"),(0,i.kt)("p",null,"使用 JavaScript 如果想让其在 1 s 内完成任务, 数据规模的要求如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"O(n^2) 算法可以处理 10^4 级别的数据;"),(0,i.kt)("li",{parentName:"ul"},"O(n) 算法可以处理 10^8 / 10^9 级别的数据;"),(0,i.kt)("li",{parentName:"ul"},"O(nlogn) 算法可以处理 10^7 数据的级别;")),(0,i.kt)("h3",null,"测试自己算法的复杂度"),(0,i.kt)("p",null,"思路: 将数据规模乘 2, 观察对应时间的增长关系。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function testComplexity(fn) {\n  for (let i = 10, i < 15, i++) {\n    const total = Math.pow(2, i)\n    const mockArr = new Array(total)\n    console.time('test')\n    /* fn 为算法函数, 这里仅仅作为 demo 演示 */\n    fn(mockArr)\n    console.end('test')\n  }\n}\n")),(0,i.kt)("h3",null,"递归算法的时间复杂度分析"),(0,i.kt)("h4",null,"递归中进行单次递归调用"),(0,i.kt)("p",null,"单次递归算法的时间复杂度 = 深度 * 递归函数的时间复杂度"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在单次递归算法调用中, 深度就为递归函数执行次数")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/* 求 1 + 2 + 3 + ... + n */\nfunction sum(n) {\n  if (n === 0) return 0\n  return n + sum(n - 1)\n}\n")),(0,i.kt)("p",null,"比如在 sum 函数中, 深度为 n, 递归函数的时间复杂度为 1, 所以该函数的时间复杂度为 O(n)。"),(0,i.kt)("h4",null,"递归中进行多次递归调用"),(0,i.kt)("p",null,"递归中进行多次递归调用, 建议画图来辅助分析。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function f(n) {\n  if (n === 0) return 0\n  return f(n - 1) + f(n - 1)\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5a60c47aeae5a5750c0146555584894a.jpg",alt:null}))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/8290ad6f0cb7df00b2862c1d7996e54c.jpg",alt:null}))),(0,i.kt)("h3",null,"link"),(0,i.kt)("p",null,"等差数列前 n 项和公式:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"* Sn = [n*(a1+an)]/2\n* Sn = a1*n + [n*(n-1)*d]/2\n* Sn = d/2*n²+(a1-d/2)*n\n")),(0,i.kt)("p",null,"等比数列前 n 项和公式:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0a2db22818ecc056aa95e6ab75c8c903.jpg",alt:null}))),(0,i.kt)("p",null,"排列组合公式:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/468350f2ebca84bb44fc2108dc43efc0.jpg-400",alt:null}))))}c.isMDXComponent=!0},46486:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"什么是动态规划"),(0,i.kt)("p",null,"动态规划",(0,i.kt)("inlineCode",{parentName:"p"},"将一个大问题拆分成若干个子问题"),", 同时保存子问题的答案, 使得每个子问题只求解一次, 最终获得原问题的答案。其本质也是",(0,i.kt)("inlineCode",{parentName:"p"},"递归问题"),"。"),(0,i.kt)("h3",null,"动态规划是自下而上的递归"),(0,i.kt)("p",null,"通常自上而下的递归会产生",(0,i.kt)("inlineCode",{parentName:"p"},"重复的函数调用栈"),", 以",(0,i.kt)("a",u({parentName:"p"},{href:"./recursive.md"}),"递归")," 章节中",(0,i.kt)("inlineCode",{parentName:"p"},"斐波那契数列"),"为例, 其使用了",(0,i.kt)("inlineCode",{parentName:"p"},"自上而下"),"的思路来解决问题。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"关于重复的函数调用栈解释: 比如求斐波那契数列 f(4) 的值时, 其转化为 ",(0,i.kt)("inlineCode",{parentName:"p"},"f(3) + f(2)"),", 进而转化为 ",(0,i.kt)("inlineCode",{parentName:"p"},"2f(2) + f(1)"),", 可以看到此时重复调用了 f(2)。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"                            fn(n) = fn(n - 1) + fn(n - 2)\n                                     /                 \\\n        fn(n - 1) = fn(n - 2) + fn(n - 3)          fn(n - 2) = fn(n - 3) + fn(n - 4)\n                        /             \\                            /             \\\n                      ...             ...                         ...            ...\n")),(0,i.kt)("p",null,"动态规划则与其相反, 其使用了",(0,i.kt)("inlineCode",{parentName:"p"},"自下而上"),"的思路来解决问题。伪代码示意如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"fn(n) = fn(1) + fn(2) + ... + f(n)\n")),(0,i.kt)("p",null,"具体实现:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var fibonacci = function(n) {\n  const arr = [1, 1]\n  for (let i = 2; i <= n; i++) {\n    arr[i] = arr[i - 1] + arr[i - 2]\n  }\n\n  return arr[n]\n}\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"递归方向"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"优点"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"缺点"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"自上而下"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"思路容易理顺"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"会出现函数栈重复的调用")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"自下而上(动态规划)"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"思路不易理顺"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"不会出现函数栈重复的调用")))),(0,i.kt)("h3",null,"动态规划解题思路"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"确定子问题"),(0,i.kt)("li",{parentName:"ol"},"确定终止条件")),(0,i.kt)("h3",null,"案例 —— 最小找零硬币数"),(0,i.kt)("p",null,"场景: 假如有 1, 5, 10, 20 美分的硬币"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"[1, 5, 10, 20]\n\n4              // 找零数\n[1, 1, 1, 1]   // 需 4 个 1 美分的硬币\n\n5              // 找零数\n[5]            // 需 1 个 5 美分的硬币\n\n36             // 找零数\n[20, 10, 5, 1] // 需 20、10、5、1美分的硬币各一个\n")),(0,i.kt)("p",null,"下面用代码来实现:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var MinChange = function (changeType) {\n  this.changeType = changeType\n  this.cache = {}\n}\n\nMinChange.prototype.makeChange = function (amount) {\n  let min = []\n  if (!amount) {\n    return []\n  }\n  if (this.cache[amount]) {   // 读缓存\n    return this.cache[amount]\n  }\n\n  for (let i = 0; i < this.changeType.length; i++) {\n    const leftAmount = amount - this.changeType[i]\n    let newMin\n    if (leftAmount >= 0) {\n      newMin = this.makeChange(leftAmount) // 这一句是动态规划的提现\n    }\n    if (leftAmount >= 0\n      && (newMin.length < min.length - 1 || !min.length)) { // 如果存在更小的找零硬币数, 则执行后面语句\n      min = [this.changeType[i]].concat(newMin)\n    }\n  }\n\n  return this.cache[amount] = min\n}\n")),(0,i.kt)("p",null,"下面进行测试:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var minChange = new MinChange([1, 5, 10, 20])\n\nminChange.makeChange(2)  // [1, 1]\nminChange.makeChange(5)  // [5]\nminChange.makeChange(36) // [1, 5, 10, 20]\n")))}c.isMDXComponent=!0},5578:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"贪心算法"),(0,i.kt)("p",null,"贪心算法是一种求近似解的思想。当能满足大部分最优解时就认为符合逻辑要求。"),(0,i.kt)("h3",null,"例子"),(0,i.kt)("p",null,"以 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92.md#%E6%A1%88%E4%BE%8B--%E6%9C%80%E5%B0%8F%E6%89%BE%E9%9B%B6%E7%A1%AC%E5%B8%81%E6%95%B0"}),"最小找零硬币数")," 这个案例为例, 考虑使用贪心算法解题: 比如当找零数为 36 时, 从硬币数的最大值 20 开始填充, 填充不下后再用 10 来填充, 以此类推, 找到最优解。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"场景: 假如有 1, 5, 10, 20 美分的硬币\n\n36             // 找零数\n[20, 10, 5, 1] // 需 20、10、5、1美分的硬币各一个\n")),(0,i.kt)("p",null,"代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var MinChange = function (changeType) {\n  this.changeType = changeType.sort((r1, r2) => r2 - r1)\n}\n\nMinChange.prototype.makeChange = function(amount) {\n  const arr = []\n  for (let i = 0; i < this.changeType.length; i++) {\n    while (amount - this.changeType[i] >= 0) {\n      arr.push(this.changeType[i])\n      amount = amount - this.changeType[i]\n    }\n  }\n  return arr\n}\n")),(0,i.kt)("p",null,"来测试下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var minChange = new MinChange([1, 5, 10, 20])\n\nminChange.makeChange(36) // [20, 10, 5, 1]\n")),(0,i.kt)("p",null,"相比于动态规划算法, 贪心算法实现得相对简单, 而且也确实满足了大部分情况下的最优解。但是如下情况贪心算法就不满足了:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var minChange = new MinChange([1, 3, 3, 4])\n\nminChange.makeChange(6) // 结果输出 [4, 1, 1], 而我们期望的是 [3, 3]\n")))}c.isMDXComponent=!0},73503:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"partition 划分算法"),(0,i.kt)("p",null,"算法思路:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"第一步: 找一个",(0,i.kt)("inlineCode",{parentName:"li"},"枢纽值")," pivot;"),(0,i.kt)("li",{parentName:"ul"},"第二步: 使用一个",(0,i.kt)("inlineCode",{parentName:"li"},"指针去遍历数组"),", 小于 pivot 的值都放在数组左侧(pivot 的右侧);"),(0,i.kt)("li",{parentName:"ul"},"第三步: 将 pivot 移到数组的",(0,i.kt)("inlineCode",{parentName:"li"},"中间位置"),", pivot 左侧都是比 pivot 小的值, pivot 右侧都是比 pivot 大的值; 返回 pivot 的下标;")),(0,i.kt)("p",null,"比如针对数组 ",(0,i.kt)("inlineCode",{parentName:"p"},"[5,9,2,7,3]"),", 分解算法步骤图:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/f86a764f83302f8d5bba02024e0dcb04.jpg",alt:null}))),(0,i.kt)("h3",null,"算法实现"),(0,i.kt)("p",null,"用了双指针。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/* 分区算法 */\nfunction partition(nums, left, right) {\n  const pivot = nums[left] // 枢纽值\n  let pos = left           // 用来记住最后枢纽值 pivot 应该置于的位置\n  for (let i = left + 1; i <= right; i++) {\n    if (nums[i] < pivot) {\n      pos++\n      swap(nums, pos, i)\n    }\n  }\n  swap(nums, pos, left)\n  return pos\n}\n\n/* 交换位置\n  nums 数组, a, b 为下标\n*/\nvar swap = function(nums, a, b) {\n  const tmp = nums[a]\n  nums[a] = nums[b]\n  nums[b] = tmp\n}\n")),(0,i.kt)("p",null,"测试"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var testArr = [5, 9, 2, 7, 3]\nvar result = partition(testArr, 0, 4)\n\nresult === 2\nconsole.log(testArr) // [3, 2, 5, 7, 9]\n")),(0,i.kt)("h3",null,"partition 算法的作用"),(0,i.kt)("p",null,"见 leetcode 215: 数组中的第 K 个最大元素"))}c.isMDXComponent=!0},60420:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Optimize fibonacci sequence"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"题目: 求斐波那契数列 1,1,2,3,5,8,13,21,34,55,89...中的第 n 项")),(0,i.kt)("p",null,"斐波那契数列考察的是递归算法, 但是要注意优化, 探寻下面优化前后的代码片段。"),(0,i.kt)("p",null,"优化前:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let count1 = 0\nfunction fn(n) {\n  count1++\n  if (n === 1 || n === 2) {\n    return 1\n  }\n  return fn(n - 1) + fn(n - 2)\n}\n\nconsole.log(fn(20), count1) // 6765 13529\n")),(0,i.kt)("p",null,"优化后:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function _fn(n) {\n  if (cache[n]) {\n    return cache[n]\n  }\n  count2++\n  if (n === 1 || n === 2) {\n    return 1\n  }\n  cache[n - 1] = _fn(n - 1)\n  cache[n - 2] = _fn(n - 2)\n  return cache[n - 1] + cache[n - 2]\n}\n\nlet count2 = 0\nfunction fn(n) {\n  const cache = {}\n  return _fn(n)\n}\n\nconsole.log(fn(20), count2) // 6765 20\n")),(0,i.kt)("p",null,"小结: 通过",(0,i.kt)("inlineCode",{parentName:"p"},"记忆化缓存数据"),", 可以看到大大提高了运行性能。"))}c.isMDXComponent=!0},76244:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Heap Sort"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"prefix knowlege: ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/heap.md"}),"heap"))),(0,i.kt)("p",null,"题目: 给定数组 ",(0,i.kt)("inlineCode",{parentName:"p"},"[5, 2, 7, 3, 1, 8, 4]"),", 使用堆排序对其进行升序排列。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"步骤一: 构造大顶堆;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"          5\n        ↙   ↘ convert\n     2         7\n          |\n    因为子节点 7 大于 5, 因此作 convert, 结果如下\n          ↓\n\n          7\n        ↙   ↘\n     2         5\n          |\n    依此类推, 构造出大顶堆。\n          ↓\n\n           8\n        ↙     ↘\n     3          7\n  ↙    ↘      ↙   ↘\n2        1  5       4\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"步骤二: 取出顶部元素, 将数组末尾元素移到顶部(目的是为了保持移除了顶部元素后的数组长度减少 1);"),(0,i.kt)("li",{parentName:"ul"},"步骤三: 如果存在顶部元素的子元素大于顶部元素的情形, 对调它们(维持 max heap);")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"           8\n        ↙     ↘\n     3          7\n  ↙    ↘      ↙   ↘\n2        1  5       4\n          |\n  取出顶部 8, 将数组末尾元素 4 移到顶部\n          ↓\n\n           4\n        ↙     ↘ (对调)\n     3          7\n  ↙    ↘      ↙\n2        1  5\n          |\n  如果存在顶部元素的子元素大于顶部元素的情形, 对调它们, 重新构造 max heap.\n          ↓\n\n           7\n        ↙     ↘\n     3          4\n  ↙    ↘      ↙\n2        1  5\n          |\n  重复上述 3 个步骤, 直到堆中的元素为空\n\n")),(0,i.kt)("p",null,"下面来实现上述步骤:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var heap_sort = function(arr) {\n  const result = []\n  let material = arr\n\n  while (material.length > 0) {\n    const maxHeapArr = builtMaxHeap(material)\n    result.unshift(maxHeapArr[0])\n    maxHeapArr[0] = maxHeapArr[maxHeapArr.length - 1]\n    material = maxHeapArr.slice(0, maxHeapArr.length - 1)\n  }\n\n  return result\n}\n\n// input: [5, 2, 7, 3, 1, 8, 4]\n// output: to build big heap [8, 3, 7, 2, 1, 5, 4]\nvar builtMaxHeap = function(arr) {\n  let parent, compareChild\n  for (let i = 0; i < arr.length; i++) {\n    parent = Math.floor((i - 1) / 2)\n    compareChild = i\n    while (parent >= 0) {\n      if (arr[parent] < arr[compareChild]) {\n        swap(arr, parent, compareChild)\n        compareChild = parent\n        parent = Math.floor((compareChild - 1) / 2)\n      } else {\n        parent = -1\n      }\n    }\n  }\n  return arr\n}\n\n// swap two value in arr\nvar swap = function(arr, pointOne, pointTwo) {\n  const tmp = arr[pointOne]\n  arr[pointOne] = arr[pointTwo]\n  arr[pointTwo] = tmp\n}\n")),(0,i.kt)("p",null,"理想情况下, 堆排序时间复杂度应为 nlogn, 空间复杂度应为 1, 上述实现的代码中没有达到这一复杂度的。参考社区代码后重写:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"由 len 控制执行时机;"),(0,i.kt)("li",{parentName:"ul"},"对 arr 进行操作不引入额外变量;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var len\nvar heap_sort = function(arr) {\n  buildMaxHeapify(arr)\n\n  while (len > 1) {\n    swap(arr, len - 1, 0)\n    len--\n    keepMaxHeapify(arr, 0)\n  }\n\n  return arr\n}\n\n\n/**\n * to build max heapify from bottom to top;\n * the last subscript's parent subscript is Math.floor((len - 1) / 2)\n */\nvar buildMaxHeapify = function(arr) {\n  len = arr.length\n\n  for (let i = Math.floor((len - 1) / 2); i >= 0; i--) {\n    keepMaxHeapify(arr, i)\n  }\n}\n\n/**\n * to keep max heap\n */\nvar keepMaxHeapify = function(arr, i) {\n  const left = 2 * i + 1\n  const right = 2 * i + 2\n  let maxSubscript = i\n\n  if (left < len && arr[left] > arr[maxSubscript]) {\n    maxSubscript = left\n  }\n\n  if (right < len && arr[right] > arr[maxSubscript]) {\n    maxSubscript = right\n  }\n\n  if (maxSubscript !== i) {\n    swap(arr, maxSubscript, i)\n    keepMaxHeapify(arr, maxSubscript)\n  }\n}\n\n/**\n * swap two value in arr\n */\nvar swap = function(arr, pointOne, pointTwo) {\n  const tmp = arr[pointOne]\n  arr[pointOne] = arr[pointTwo]\n  arr[pointTwo] = tmp\n}\n")))}c.isMDXComponent=!0},99519:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"归并排序思想"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"取一个基准点, 将数组不断拆分成左右两部分, 直到数组的长度为 1;"),(0,i.kt)("li",{parentName:"ol"},"对拆离的数组进行",(0,i.kt)("inlineCode",{parentName:"li"},"比较合并"),";")),(0,i.kt)("p",null,"演示如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"3   1   5   2\n\n3   1 | 5   2\n\n3 | 1 | 5 | 2\n\n1   3 | 2   5\n\n1   2   3   5\n")),(0,i.kt)("h3",null,"代码实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 可以把它当成分函数\nvar mergeSort = function(arr) {\n  // 将数组 arr 拆分成 [0, point) 和 [point, arr.length] 两部分\n  const point = arr.length / 2\n  const left = arr.slice(0, point)\n  const right = arr.slice(point, arr.length)\n\n  if (arr.length === 1) {\n    return arr\n  }\n\n  return merge(mergeSort(left), mergeSort(right))\n}\n\n// 可以当作是合函数\nfunction merge(left, right) {\n  let l = 0 // 第一个数组的下标\n  let r = 0 // 第二个数组的下标\n  const result = []\n\n  while (l < left.length && r < right.length) {\n    if (left[l] < right[r]) {\n      result.push(left[l])\n      l++\n    } else {\n      result.push(right[r])\n      r++\n    }\n  }\n\n  while (l < left.length) {\n    result.push(left[l])\n    l++\n  }\n\n  while (r < right.length) {\n    result.push(right[r])\n    r++\n  }\n\n  return result\n}\n")),(0,i.kt)("h3",null,"归并排序与快速排序的异同"),(0,i.kt)("p",null,"归并排序与快速排序都是用递归来实现的算法, 都是分分合合的过程。区别在于归并排序在合的过程中进行排序, 快速排序则在分的过程中进行排序。另外它们的时间复杂度都为 O(nlogn)。"))}c.isMDXComponent=!0},99516:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"快速排序思想"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"找到一个基准点;"),(0,i.kt)("li",{parentName:"ol"},"比该基准点值小的值移到其左侧, 比该基准点大的值移到其右侧;"),(0,i.kt)("li",{parentName:"ol"},"遍历左侧的值和右侧的值, 重复上述 1, 2 操作;")),(0,i.kt)("h3",null,"代码实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function quickSort(arr) {\n  if (arr.length === 0) {\n    return []\n  }\n  const basicValue = arr[Math.floor((arr.length - 1) / 2)] // 随意取, 这里取中间\n  const left = []\n  const right = []\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i] < basicValue) {\n      left.push(arr[i])\n    }\n    if (arr[i] > basicValue) {\n      right.push(arr[i])\n    }\n  }\n  return quickSort(left).concat(basicValue, quickSort(right))\n}\n")),(0,i.kt)("h3",null,"求快速排序时间复杂度"),(0,i.kt)("p",null,"先记住 O(NlogN), ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.zhihu.com/question/22393997"}),"具体证明"),", someday to understand, o(╯□╰)o"))}c.isMDXComponent=!0},34962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"选择排序思想"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"遍历数组选择最小值与数组第一位交换;"),(0,i.kt)("li",{parentName:"ol"},"遍历剩下的数组, 将最小值与数组第二位交换;"),(0,i.kt)("li",{parentName:"ol"},"依次类推, 完成排序;")),(0,i.kt)("h3",null,"代码实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var chooseSort = function(arr) {\n  for (let x = 0; x < arr.length; x++) {\n    let min = x\n    for (let y = x + 1; y < arr.length; y++) {\n      if (arr[y] < arr[min]) {\n        min = y\n      }\n    }\n    let tmp = arr[x]\n    arr[x] = arr[min]\n    arr[min] = tmp\n  }\n  return arr\n}\n")))}c.isMDXComponent=!0},94846:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"二叉树"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c3bc86f87907fedaeba86b0f5b96a71a.jpg-300",alt:null}))),(0,i.kt)("p",null,"这棵树中最多有两个分支, 因此是",(0,i.kt)("inlineCode",{parentName:"p"},"二叉树"),"。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"根节点"),": 一棵树最顶部的节点"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"内部节点"),": 在它上面还有其它内部节点或者叶节点的节点"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"叶节点"),": 处于一棵树根部的节点"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"子树"),": 由树中的内部节点和叶节点组成")),(0,i.kt)("h3",null,"概念延伸"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"完全二叉树"),"(compelete binary tree):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"除了最后一行都满;"),(0,i.kt)("li",{parentName:"ul"},"在最后一行不满的情况下不能只存有右子树而没有左子树;")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"          1\n       ↙     ↘\n     2         3\n  ↙\n4\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"满二叉树"),"(full binary tree):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"每一行都满;")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"           1\n        ↙     ↘\n     2          3\n  ↙     ↘    ↙    ↘\n4        5  6       7\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"二叉搜索树"),"(Binary Search Tree)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"左侧子节点的数字小于父节点, 右侧子节点的数字大于父节点")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"           11\n        ↙     ↘\n     7          15\n  ↙    ↘      ↙    ↘\n8        9   13     20\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"平衡二叉树"))),(0,i.kt)("p",null,"二叉收缩树最好的情况下查找效率是比较高, 比如上图中时间复杂度为 ",(0,i.kt)("inlineCode",{parentName:"p"},"O(logn)"),", 其访问性能近似于二分查找, 但最差时时间复杂度为 ",(0,i.kt)("inlineCode",{parentName:"p"},"O(n)"),", 如下示意:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"7\n  ↘\n    8\n      ↘\n        9\n          ↘\n            11\n              ↘\n                13\n                  ↘\n                    15\n                      ↘\n                        20\n")),(0,i.kt)("p",null,"基于此需要在二叉搜索树基础上做一下平衡,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"7                                    8\n  ↘              平衡后            ↙    ↘\n    8           -------\x3e         7        9\n      ↘\n        9\n")),(0,i.kt)("h3",null,"二叉搜索树的实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function BinarySearchTree() {\n  function Node(key) {\n    this.key = key\n    this.left = null\n    this.right = null\n  }\n\n  let root = null\n\n  // 插入元素\n  // 实现思路: 至顶向下插入, 先判断顶点是否为空；顶点为空则直接在该处插入, 若不为空, 则通过比较顶点的 key 和插入元素的 key 判断该插入到顶点的左侧还是右侧, 后面进行如上递归\n  this.insert = function(key) {\n    const node = new Node(key)\n    if (root === null) {\n      root = node\n    } else {\n      insertNode(root, node)\n    }\n    function insertNode(parent, node) {\n      if (parent.key > node.key) {\n        if (parent.left === null) {\n          parent.left = node\n        } else {\n          insertNode(parent.left, node)\n        }\n      } else if (parent.key < node.key) {\n        if (parent.right === null) {\n          parent.right = node\n        } else {\n          insertNode(parent.right, node)\n        }\n      }\n    }\n  }\n\n  // 中序遍历\n  this.inOrderTraverse = function(cb) {\n    inOrderTraverse(root, cb)\n    function inOrderTraverse(node, cb) {\n      if (node) {\n        inOrderTraverse(node.left, cb)\n        cb(node.key)\n        inOrderTraverse(node.right, cb)\n      }\n    }\n  }\n\n  // 先序遍历\n  this.preOrderTraverse = function(cb) {\n    preOrderTraverse(root, cb)\n    function preOrderTraverse(node, cb) {\n      if (node) {\n        cb(node.key)\n        preOrderTraverse(node.left, cb)\n        preOrderTraverse(node.right, cb)\n      }\n    }\n  }\n\n  // 后序遍历\n  this.postOrderTraverse = function(cb) {\n    postOrderTraverse(root, cb)\n    function postOrderTraverse(node, cb) {\n      if (node) {\n        postOrderTraverse(node.left, cb)\n        postOrderTraverse(node.right, cb)\n        cb(node.key)\n      }\n    }\n  }\n\n  // 最大值: 思路最右边\n  this.max = function() {\n    let maxResult = {}\n    function getMax(node) {\n      if (node && node.right) {\n        maxResult = node.right\n        getMax(node.right)\n      }\n    }\n    getMax(root)\n    return maxResult.key\n  }\n\n  // 最小值: 思路最左边\n  this.min = function() {\n    let minResult = {}\n    function getMin(node) {\n      if (node && node.left) {\n        minResult = node.left\n        getMin(node.left)\n      }\n    }\n    getMin(root)\n    return minResult.key\n  }\n\n  // 查找指定元素\n  this.search = function(key) {\n    const searchKey = function(node) {\n      if (!node) {\n        return false\n      }\n      if (key > node.key) {\n        return searchKey(node.right)\n      } else if (key < node.key) {\n        return searchKey(node.left)\n      } else {\n        return true\n      }\n    }\n\n    return searchKey(root)\n  }\n\n  // 移除指定 key 值\n  this.remove = function(key) {\n    const removeKey = function(node, key) {\n      if (key < node.key) {         // ① 如果 key 值在传入节点的左边\n        node.left = removeKey(node.left, key)\n        return node\n      } else if (key > node.key) {  // ② 如果 key 值在传入节点的右边\n        node.right = removeKey(node.right, key)\n        return node\n      } else {                      // ③ 如果找到了 key 值\n        if (node.left === null && node.right === null) { // 删除的节点为根节点\n          node = null\n          return node\n        }\n        if (node.left === null) {                        // 删除的节点下有一个分支\n          node = node.right\n          return node\n        } else if (node.right === null) {\n          node = node.left\n          return node\n        }\n        const minNode = findMinNode(node.right)          // 删除的节点下有两个分支\n        node.key = minNode.key\n        node.right = removeKey(node.right, minNode.key)\n        return node\n      }\n    }\n\n    // 查找最小的节点\n    const findMinNode = function(node) {\n      if (node.left) {\n        return findMinNode(node.left)\n      } else {\n        return node\n      }\n    }\n\n    removeKey(root, key)\n  }\n}\n\nvar tree = new BinarySearchTree()\ntree.insert(11)\ntree.insert(7)\ntree.insert(15)\ntree.insert(5)\ntree.insert(3)\ntree.insert(9)\ntree.insert(8)\ntree.insert(10)\ntree.insert(13)\ntree.insert(12)\ntree.insert(14)\ntree.insert(20)\ntree.insert(18)\ntree.insert(25)\ntree.insert(6)\n")),(0,i.kt)("h3",null,"三种遍历方式的不同"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"中序遍历: 可用于",(0,i.kt)("inlineCode",{parentName:"li"},"二叉搜索树的排序"))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/ceeb68f801304f9910073708dd35ae64.jpg-300",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"先序遍历: 可用于",(0,i.kt)("inlineCode",{parentName:"li"},"打印结构化的文档"))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/65df3e9414f594107d95127f8ab5a9a1.jpg-300",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"后序遍历: 可用于查看文件夹目录")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/212607e3b24b52c0df959902ed8e4b1f.jpg-300",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"三者都为 DFS, 本质在于节点的访问时机不同。")),(0,i.kt)("p",null,"三种遍历的实现方式大同小异, 可在上面代码中观察到实现的差异。如下是 Leetcode 中对应三种不同遍历方式的题目:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/144.Binary_Tree_Preorder_Traversal/README.md"}),"Binary Tree Preorder Traversal")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/94.Binary_Tree_Inorder_Traversal/README.md"}),"Binary Tree Inorder Traversal")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/145.Binary_Tree_Postorder_Traversal/README.md"}),"Binary Tree Postorder Traversal"))),(0,i.kt)("h3",null,"remove 的几种情况"),(0,i.kt)("p",null,"remove 方法是二叉查找树中相对复杂的实现。思路仍然是递归。"),(0,i.kt)("p",null,"如果要删除的 key 在传入节点的左侧, 则递归调用 removeKey(node.left, key)；"),(0,i.kt)("p",null,"如果要删除的 key 在传入节点的右侧, 则递归调用 removeKey(node.right, key)；"),(0,i.kt)("p",null,"如果要删除的 key 与传入节点相等, 有如下三种情况:"),(0,i.kt)("p",null,"①: 删除的节点为根节点"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/65bd1b2b99db8a342423733d0480a7b6.jpg-300",alt:null}))),(0,i.kt)("p",null,"②: 删除的节点下有一个分支"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/78707683d0498daa0115d445df11f83e.jpg-300",alt:null}))),(0,i.kt)("p",null,"③: 删除的节点下有两个分支"),(0,i.kt)("p",null,"这里的思路是找到当前节点的右分支中最小的节点, 然后将该节点代替当前节点, 同时移除当前节点的右分支中最小的节点"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/4107c561ed1134093333e1b16c7350f4.jpg-300",alt:null}))),(0,i.kt)("h3",null,"测试用例"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var tree = new BinarySearchTree()\ntree.insert(11)\ntree.insert(7)\ntree.insert(15)\ntree.insert(5)\ntree.insert(3)\ntree.insert(9)\ntree.insert(8)\ntree.insert(10)\ntree.insert(13)\ntree.insert(12)\ntree.insert(14)\ntree.insert(20)\ntree.insert(18)\ntree.insert(25)\ntree.insert(6)\n\nvar cb = (key) => console.log(key)\n\ntree.inOrderTraverse(cb)   // 中序遍历: 3 5 6 7 8 9 10 11 12 13 14 15 18 20 25\ntree.preOrderTraverse(cb)  // 先序遍历: 11 7 5 3 6 9 8 10 15 13 12 14 20 18 25\ntree.postOrderTraverse(cb) // 后序遍历: 3 6 5 8 10 9 7 12 14 13 18 25 20 15 11\n\ntree.max() // 25\ntree.max() // 3\n\ntree.search(6) // true\ntree.search(1) // false\n")))}c.isMDXComponent=!0},42358:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"字典"),(0,i.kt)("p",null,"类似于集合, 字典也是一种",(0,i.kt)("inlineCode",{parentName:"p"},"无重复元素"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"无顺序"),"的数据结构。"),(0,i.kt)("p",null,"区别在于在集合中, 我们以 ",(0,i.kt)("inlineCode",{parentName:"p"},"[值,  值]")," 的形式存储; 在字典中, 我们以 ",(0,i.kt)("inlineCode",{parentName:"p"},"[键, 值]")," 的形式存储; 集合的知识点可以阅读 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/%E9%9B%86%E5%90%88.md"}),"集合")),(0,i.kt)("p",null,"ES6 引入的 Map 就是字典的数据类型。"),(0,i.kt)("h4",null,"简易版 Map 实现"),(0,i.kt)("p",null,"我们来动手实现一个简易版的 Map, 它拥有的 api 如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Map() {\n  this.items = {}\n  this.size = 0\n}\n\nMap.prototype.has = function(key) {\n  for (let i in this.items) {\n    if (this.items.hasOwnProperty(i)) {\n      return true\n    }\n  }\n  return false\n}\n\nMap.prototype.delete = function(key) {\n  if (this.has(key)) {\n    delete(this.items[key])\n    this.size--\n    return true\n  }\n  return false\n}\n\nMap.prototype.set = function(key, value) {\n  this.items[key] = value // 这里是不严谨的实现\n  this.size++\n}\n\nMap.prototype.get = function(key) {\n  return this.items[key]\n}\n\nMap.prototype.clear = function() {\n  this.items = {}\n  this.size = 0\n}\n\nMap.prototype.values = function() {\n  const arr = []\n  Object.keys(this.items).forEach(r => {\n    arr.push(this.items[r])\n  })\n  return arr\n}\n")),(0,i.kt)("h3",null,"创建一个 Map 对象"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 方式一\nconst map1 = new Map()\nmap.set('a', 1)\n\n// 方式二\nconst map2 = new Map([['a', 1]])\n")),(0,i.kt)("h3",null,"Map 和 WeakMap 的区别"),(0,i.kt)("p",null,"Map 和 WeakMap 相差 Weak 这个单词, 本质知识点是对对象的直接引用(WeakMap)。它这个点造成的差异整理如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Map 的 key 范围更广, WeakMap 的 key 只能为对象;"),(0,i.kt)("li",{parentName:"ul"},"Map 的 key 可以枚举, WeakMap 的 key 不能枚举;"),(0,i.kt)("li",{parentName:"ul"},"垃圾回收相关, 见如下例子;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var map = new Map();\nvar weakmap = new WeakMap();\n\n(function(){\n  var a = {x: 12}\n  var b = {y: 12}\n\n  map.set(a, 1)\n  weakmap.set(b, 2)\n})()\n")),(0,i.kt)("p",null,"解析: 在这个例子中, IIFE 执行完后, 垃圾回收机制会回收常量 a, b。WeakMap 可以类比成直接对 b 的引用, Map 里可以类比成在其内部对 a 作了层拷贝。所以 map 依然保持着相应的 key 值的对象, 而 weakmap 的 key 值的对象以被回收(这步认为是垃圾回收机制做的)。它们的差异如下图所示:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// map\nMap(1) {{…} => 1}\n  size: (...)\n  __proto__: Map\n  [[Entries]]: Array(1)\n    0: {Object => 1}\n      key: {x: 12}\n      value: 1\n\n// weakmap\nWeakMap {}\n  __proto__: WeakMap\n  [[Entries]]: Array(0)\n    length: 0\n")))}c.isMDXComponent=!0},29020:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"图"),(0,i.kt)("p",null,"图是一种",(0,i.kt)("inlineCode",{parentName:"p"},"非线性数据结构"),"。它的表示有以下几种:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"邻接矩阵"),(0,i.kt)("li",{parentName:"ol"},"邻接表"),(0,i.kt)("li",{parentName:"ol"},"关联矩阵")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"邻接矩阵"))),(0,i.kt)("p",null,"邻接矩阵是表示图的常用方法, ",(0,i.kt)("inlineCode",{parentName:"p"},"用二维数组来表示"),", 数组的每个下标对应每个点。当两个点有连线则二维数组的值为 1, 否则二维数组的值为 0。但是这种表示方法会照成存储空间的浪费(因存在大量 0)。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/79f5520b6028aa16491649c846430b04.jpg-300",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"邻接表"))),(0,i.kt)("p",null,"如下图: ",(0,i.kt)("inlineCode",{parentName:"p"},"左侧为存储的顶点, 右侧为与之想对应的点"),", 后文会采用这种方式实现图。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0a1d5ab4a96e83dca8c7aafc948e2f4b.jpg-300",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"关联矩阵"))),(0,i.kt)("p",null,"行表示点, 列表示边。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/48a4bf7ee32827ad4d9016f24a8ffca5.jpg-300",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Graph() {\n  this.topPointArr = []    // 存储顶点, 笔者认为图的顶点是不会重复的\n  this.edgeMap = new Map() // 存储边\n}\n\n// 往图里添加顶点\nGraph.prototype.addTopPoint = function(point) {\n  this.topPointArr.push(point)\n  this.edgeMap.set(point, [])\n}\n\n// 往指定的点添加相邻的点\nGraph.prototype.addEdge = function(point1, point2) {\n  this.edgeMap.get(point1).push(point2)\n  this.edgeMap.get(point2).push(point1) // 这里默认没有方向, 所以两个点互相指向\n}\n\n// 将图给打印出来\nGraph.prototype.log = function() {\n  let str = ''\n  let neighbour\n  for (let i of this.topPointArr) {\n    str += i + ' -> '\n    neighbour = this.edgeMap.get(i).join(' ')\n    str += neighbour + '\\n'\n  }\n  return str\n}\n")),(0,i.kt)("p",null,"按之前邻接表的图示, 跑如下测试用例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var graph = new Graph()\nvar topArr = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I']\nfor (let i of topArr) {\n  graph.addTopPoint(i)\n}\n\ngraph.addEdge('A', 'B')\ngraph.addEdge('A', 'C')\ngraph.addEdge('A', 'D')\ngraph.addEdge('B', 'E')\ngraph.addEdge('B', 'F')\ngraph.addEdge('C', 'D')\ngraph.addEdge('C', 'G')\ngraph.addEdge('D', 'G')\ngraph.addEdge('D', 'H')\ngraph.addEdge('E', 'I')\n")),(0,i.kt)("p",null,"使用自定义打印函数 graph.log(), 打印结果如下, 结果符合预期"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"A -> B C D\nB -> A E F\nC -> A D G\nD -> A C G H\nE -> B I\nF -> B\nG -> C D\nH -> D\nI -> E\n")),(0,i.kt)("h3",null,"广度优先遍历(BFS)"),(0,i.kt)("p",null,"顾名思义, 广度优先即横向优先, 英文名为 ",(0,i.kt)("inlineCode",{parentName:"p"},"breadth first search"),"(BFS), 它示意图如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/4547193af1645f33359e875559092c6b.jpg-200",alt:null}))),(0,i.kt)("p",null,"思想: 用到了",(0,i.kt)("inlineCode",{parentName:"p"},"队列"),"的思想。思路如下: (标白: 未发现; 标灰: 已找寻)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"创建队列 u, 将标灰的顶点插入队列;"),(0,i.kt)("li",{parentName:"ul"},"若队列 u 不为空;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"从队列取出值 v;"),(0,i.kt)("li",{parentName:"ul"},"将 v 的相邻节点标灰并插入队列 u;")))),(0,i.kt)("p",null,"代码中用到队列相关的方法可参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/%E9%98%9F%E5%88%97.md"}),"队列")),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Queue实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Queue() {\n  this.items = []\n}\n\nQueue.prototype.push = function(item) {\n  this.items.push(item)\n}\n\nQueue.prototype.shift = function() {\n  return this.items.shift()\n}\n\nQueue.prototype.isEmpty = function() {\n  return this.items.length === 0\n}\n\nQueue.prototype.size = function() {\n  return this.items.length\n}\n\nQueue.prototype.clear = function() {\n  this.items = []\n}\n"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Graph.prototype.bfs = function(v, callback) {\n  const obj = {}\n\n  for (let i of this.topPointArr) { // 初始化颜色\n    obj[i] = 'white'\n  }\n\n  const queue = new Queue()\n  obj[v] = 'gray'\n\n  queue.push(v)\n\n  let shiftQueue, neighbour\n\n  while (!queue.isEmpty()) {\n    shiftQueue = queue.shift()\n    neighbour = this.edgeMap.get(shiftQueue)\n\n    for (let i of neighbour) {\n      if (obj[i] === 'white') {\n        obj[i] = 'gray'\n        queue.push(i)\n      }\n    }\n\n    if (callback) {\n      callback(shiftQueue)\n    }\n  }\n}\n")),(0,i.kt)("p",null,"检验完成的 bfs 函数, 进行如下调用,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"graph.bfs('A', (shiftQueue) => {\n  console.log(shiftQueue)\n})\n")),(0,i.kt)("p",null,"打印结果为 ",(0,i.kt)("inlineCode",{parentName:"p"},"A B C D E F G H I"),", 符合预期。"),(0,i.kt)("h4",null,"广度优先遍历求最短路径"),(0,i.kt)("p",null,"在上述 bfs 函数实现的基础上, 加入两个变量分别存储距离以及最短路径上先前的点"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Graph.prototype.BFS = function(v) {\n  const obj = {}\n\n  const d = {}    // 新加入的变量存储距离\n  const prev = {} // 新加入的变量存储最短路径上先前的点\n\n  for (let i of this.topPointArr) { // 初始化颜色\n    obj[i] = 'white'\n    d[i] = 0\n    prev[i] = null\n  }\n\n  const queue = new Queue()\n  obj[v] = 'gray'\n\n  queue.push(v)\n\n  let shiftQueue, neighbour\n\n  while (!queue.isEmpty()) {\n    shiftQueue = queue.shift()\n    neighbour = this.edgeMap.get(shiftQueue)\n\n    for (let i of neighbour) {\n      if (obj[i] === 'white') {\n        obj[i] = 'gray'\n        queue.push(i)\n        d[i] = d[shiftQueue] + 1  // 这个地方卡主了~~~, 思路: 第二行的点距离第一行的点相差为 1, 第三行的点距离第二行的点相差为 1, 以此类推。\n        prev[i] = shiftQueue\n      }\n    }\n  }\n\n  return {\n    distance: d,\n    prev: prev\n  }\n}\n")),(0,i.kt)("p",null,"调用 ",(0,i.kt)("inlineCode",{parentName:"p"},"graph.BFS('A')"),", 得如下结果:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'{\n  distance: { A: 0, B: 1, C: 1, D: 1, E: 2, F: 2, G: 2, H: 2, I: 3 }\n  prev: { A: null, B: "A", C: "A", D: "A", E: "B", F: "B", G: "C", H: "D", I: "E" }\n}\n')),(0,i.kt)("p",null,"接下来我们处理上述返回的 prev 将最短路径打印出来:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Graph.prototype.logMinPath = function(v) {\n  const { distance, prev } = this.BFS(v)\n  let path = ''\n  const arr = []\n  Object.keys(distance).map(r => {\n    path = r\n    while (prev[r]) { // 终止条件为 prev 中值为 null 时\n      path = prev[r] + ' - ' + path\n      r = prev[r]\n    }\n    arr.push(path)\n  })\n  return arr.join('\\n')\n}\n")),(0,i.kt)("p",null,"调用 ",(0,i.kt)("inlineCode",{parentName:"p"},"graph.logMinPath('A')"),", 打印结果如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"A\nA - B\nA - C\nA - D\nA - B - E\nA - B - F\nA - C - G\nA - D - H\nA - B - E - I\n")),(0,i.kt)("h3",null,"深度优先遍历(DFS)"),(0,i.kt)("p",null,"深度优先遍历用到了栈的思想。英文名为 ",(0,i.kt)("inlineCode",{parentName:"p"},"depth first search"),"(DFS), 其示意图如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/b4fa9641c9f086cf2702f868b283dbee.jpg-200",alt:null}))),(0,i.kt)("p",null,"代码实现如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Graph.prototype.dfs = function (v, callback) {\n  const obj = {}\n\n  for (let i of this.topPointArr) { // 初始化颜色\n    obj[i] = 'white'\n  }\n\n  let neighbour\n  const that = this\n  const find = function (v, color, cb) {\n    color[v] = 'gred'\n    if (cb) {\n      cb(v)\n    }\n    neighbour = that.edgeMap.get(v)\n    for (let i of neighbour) {\n      if (color[i] === 'white') {\n        find(i, color, cb)\n      }\n    }\n  }\n\n  find(v, obj, callback)\n}\n")),(0,i.kt)("p",null,"进行如下函数调用"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"graph.dfs('A', (shiftQueue) => {\n  console.log(shiftQueue)  // 打印结果: A B E I F C D G H\n})\n")))}c.isMDXComponent=!0},70398:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"哈希表"),(0,i.kt)("p",null,"哈希表算是一种特殊的字典。它在实际的键值和存入的哈希值之间存在一层映射。如下例子:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/963b04e081590a419bfc97c30d915a01.jpg-300",alt:null}))),(0,i.kt)("p",null,"上图中通过哈希函数将键值转换成哈希值, 然后再将哈希值指向具体的值。接着我们来构造 HashTable 类, 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function HashTable() {\n  this.items = {}\n}\n\n// 哈希算法\nfunction keyToHash(key) {\n  let hash = 0\n  for (let i = 0; i < key.length; i++) {\n    hash += key.charCodeAt(i)\n  }\n  hash = hash % 37 // 为了避免 hash 的值过大\n  return hash\n}\n\nHashTable.prototype.put = function(key, value) {\n  const hash = keyToHash(key)\n  this.items[hash] = value\n}\n\nHashTable.prototype.get = function(key) {\n  return this.items[keyToHash(key)]\n}\n\nHashTable.prototype.remove = function(key) {\n  delete(this.items[keyToHash(key)])\n}\n")),(0,i.kt)("p",null,"跑如下测试用例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var test = new HashTable()\ntest.put('ab', 'ab@gmail.com')\ntest.put('cd', 'cd@gmail.com')\ntest.put('ef', 'ef@gmail.com')\n\ntest.get('cd') // \"cd@gmail.com\"\ntest.remove('cd')\ntest.get('cd') // undefined\n")),(0,i.kt)("p",null,"但是这样子实现的哈希表有一个问题, 比如进行如下调用就会产生冲突:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"test.put('ab', 'ab@gmail.com')\ntest.put('ba', 'ba@gmail.com') // ab 和 ba 的哈希值相同, 后者会把前者覆盖\n")),(0,i.kt)("p",null,"接着我们来尝试解决该问题"),(0,i.kt)("h4",null,"链表法"),(0,i.kt)("p",null,"顾名思义, 这个方法就是在每个哈希值上引人链表。如下图所示:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/bd07ad706f4d494a9df8fb63621a6036.jpg-200",alt:null}))),(0,i.kt)("p",null,"对之前 put、get、remove 方法做如下修改, 其中使用到的链表的代码参考之前的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/%E9%93%BE%E8%A1%A8.md#%E9%93%BE%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0"}),"链表")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function HashTable() {\n  this.items = {}\n}\n\nfunction keyToHash(key) {\n  let hash = 0\n  for (let i = 0; i < key.length; i++) {\n    hash += key.charCodeAt(i)\n  }\n  hash = hash % 37\n  return hash\n}\n\n// 存入链表的值\nfunction Node(key, value) {\n  this.key = key\n  this.value = value\n}\n\n// 添加接口\nHashTable.prototype.put = function(key, value) {\n  const hash = keyToHash(key)\n  if (!this.items[hash]) {\n    this.items[hash] = new LinkedList() // 这里将之前实现的链表拿来使用\n  }\n  let linkList = this.items[hash].getHead()\n  let ifAppend = true\n  while (linkList) {                        // 以下为 append 逻辑\n    if (linkList.element.key === key) {     // key 值重复逻辑\n      linkList.element = new Node(key, value)\n      ifAppend = false\n      break\n    }\n    linkList = linkList.next\n  }\n  if (ifAppend) {\n    this.items[hash].append(new Node(key, value))\n  }\n}\n\nHashTable.prototype.has = function (hash) {\n  if (this.items.hasOwnProperty(hash)) {\n    return true\n  }\n  return false\n}\n\n// 获取接口\nHashTable.prototype.get = function(key) {\n  const hash = keyToHash(key)\n  if (this.has(hash)) {\n    let current = this.items[hash].getHead()\n    while (current) {\n      if (current.element.key === key) {\n        return current.element.value\n      }\n      current = current.next\n    }\n  }\n  return undefined\n}\n\n// 移除接口\nHashTable.prototype.remove = function(key) {\n  const hash = keyToHash(key)\n  if (this.has(hash)) {\n    let current = this.items[hash].getHead()\n    while (current) {\n      if (current.element.key === key) {\n        this.items[hash].remove(current.element)\n        return true\n      }\n      current = current.next\n    }\n    return false\n  }\n  return false\n}\n")),(0,i.kt)("p",null,"接着来测试下完成的哈希表, 测试用例如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var test = new HashTable()\ntest.put('ab', 'ab@gmail.com')\ntest.put('ba', 'ba~@gmail.com')\ntest.put('ba', 'ba@gmail.com') // 验证重复字段\ntest.put('cd', 'cd@gmail.com')\n\ntest.get('ab') // ab@gmail.com\ntest.get('ba') // ba@gmail.com\ntest.get('cd') // cd@gmail.com\n\ntest.remove('ba')\ntest.get('ba') // undefined\n")),(0,i.kt)("h4",null,"线性探查法"),(0,i.kt)("p",null,"思想: 如果当前所要存储的 hash 值已存在于存储空间, 则判断存储空间里是否已存储 hash + 1, 若无则存储 hash + 1, 若有则判断存储空间里是否已存储 hash + 2, 依次类推。参考图如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/9212ee6899520f888f774ca7a2dc0519.jpg-200",alt:null}))),(0,i.kt)("p",null,"接着进入代码实现环节, 同样是修改 put、get、remove 方法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function HashTable() {\n  this.items = {}\n}\n\n// 哈希算法\nfunction keyToHash(key) {\n  let hash = 0\n  for (let i = 0; i < key.length; i++) {\n    hash += key.charCodeAt(i)\n  }\n  hash = hash % 37 // 为了避免 hash 的值过大\n  return hash\n}\n\n// 后面会用之锁定\nfunction Node(key, value) {\n  this.key = key\n  this.value = value\n}\n\nHashTable.prototype.put = function(key, value) {\n  let hash = keyToHash(key)\n  while (this.items[hash]) {             // 当 this.items[index] 不存在时终止\n    if (this.items[hash].key === key) {  // 对已存在的 key 值进行覆盖\n      break\n    }\n    hash++\n  }\n  this.items[hash] = new Node(key, value)\n}\n\nHashTable.prototype.has = function(hash) {\n  if (this.items.hasOwnProperty(hash)) {\n    return true\n  }\n  return false\n}\n\nHashTable.prototype.get = function(key) {\n  let hash = keyToHash(key)\n  if (this.items[hash]) {\n    while (this.items[hash].key !== key) { // 找到存储的 index\n      hash++\n    }\n    return this.items[hash].value\n  }\n  return undefined\n}\n\nHashTable.prototype.remove = function(key) {\n  let hash = keyToHash(key)\n  if (this.has(hash)) {\n    while (this.items[hash].key !== key) { // 找到存储的 index\n      hash++\n    }\n    this.items[hash] = undefined\n    return true\n  }\n  return false\n}\n")),(0,i.kt)("p",null,"接着跑如下测试用例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var test = new HashTable()\ntest.put('ab', 'ab@gmail.com')\ntest.put('ba', 'ba@gmail.com')\ntest.put('ab', 'ab@gmail.com')\n\ntest.get('ab') // 'ab@gmail.com'\n\ntest.remove('ab')\ntest.get('ab') // undefined\n")),(0,i.kt)("h4",null,"更好的哈希函数"),(0,i.kt)("p",null,"另外在本文实现的哈希函数中, 性能不是特别好（因为容易产生相同的哈希值）, 给出一段更好的散列函数的实现, 数学知识的原理暂时不深究了"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 哈希算法\nfunction keyToHash(key) {\n  let hash = 5381    // 取一个素数\n  for (let i = 0; i < key.length; i++) {\n    hash = hash * 33 + key.charCodeAt(i)\n  }\n  hash = hash % 1013 // 除以另外一个素数\n  return hash\n}\n")),(0,i.kt)("h4",null,"哈希表的应用"),(0,i.kt)("p",null,"笔者认为业务中, 哈希表的数据结构能应用需要加密处理的数据存储中。"))}c.isMDXComponent=!0},2155:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Heap"),(0,i.kt)("p",null,"堆是通过一维数组来实现的树结构。"),(0,i.kt)("h3",null,"堆节点的访问"),(0,i.kt)("p",null,"在数组起始位置为 0 的情形中:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"父节点 i 的左子节点在位置 ",(0,i.kt)("inlineCode",{parentName:"li"},"(2i + 1)"),";"),(0,i.kt)("li",{parentName:"ul"},"父节点 i 的右子节点在位置 ",(0,i.kt)("inlineCode",{parentName:"li"},"(2i + 2)"),";"),(0,i.kt)("li",{parentName:"ul"},"子节点 i 的父节点在位置 ",(0,i.kt)("inlineCode",{parentName:"li"},"Math.floor((i - 1) / 2)"),";")),(0,i.kt)("h3",null,"Max Heap && Min Heap"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Max Heap"),": 每个节点都",(0,i.kt)("inlineCode",{parentName:"li"},"大于等于左右子节点"),"的值。用于",(0,i.kt)("inlineCode",{parentName:"li"},"升序排序"),"。见 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/sort/heap_sort.md"}),"heap_sort"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"           8\n        ↙     ↘\n     3          7\n  ↙    ↘      ↙   ↘\n2        1  5        4\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Min Heap"),": 每个节点都",(0,i.kt)("inlineCode",{parentName:"li"},"小于等于左右子节点"),"的值。用于",(0,i.kt)("inlineCode",{parentName:"li"},"降序排序"),"。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"          1\n        ↙    ↘\n      2        4\n   ↙    ↘    ↙   ↘\n  5       3 8      7\n")),(0,i.kt)("h3",null,"Priority Queue Based Heap"),(0,i.kt)("p",null,"It's usually to use the two ways called enqueue and dequeue:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"enqueue(value)"),": insert value into the heap;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Because the value is inserted into the last heap, we'll use ",(0,i.kt)("inlineCode",{parentName:"li"},"sift up")," to adjust position;")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"           10\n        ↙     ↘\n     3          7\n           |\n           ↓\n      `enqueue(9)`\n           10\n        ↙     ↘\n     3          7\n  ↙ sift up\n9\n           |\n           ↓\n           10\n        ↙     ↘\n     9          7\n  ↙ sift up\n3\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dequeue()"),": to pick the smallest or the biggest element from the heap;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"It'll swap the endest element with the first element, and then keep the heap length reduce 1. If so, only do once ",(0,i.kt)("inlineCode",{parentName:"li"},"sift down")," operation in the first element to heapify.")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"           8\n        ↙     ↘\n     3          7\n  ↙    ↘      ↙   ↘\n2        1  5       4\n          |\n  pick 8, move 4 to top\n          ↓\n\n           4\n        ↙     ↘ (swap)\n     3          7\n  ↙    ↘      ↙\n2        1  5\n          |\n  sift down 4 to rebuild max heap.\n          ↓\n\n           7\n        ↙     ↘\n     3          4\n  ↙    ↘      ↙\n2        1  5\n          |\n  redo the last steps\n          ↓\n           7\n        ↙     ↘\n     3          5\n  ↙    ↘      ↙\n2        1  4\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var len\n\n/**\n * to build max heapify from bottom to top;\n * the last subscript's parent subscript is Math.floor((len - 1) / 2)\n */\nvar buildMaxHeapify = function(arr) {\n  len = arr.length\n\n  for (let i = Math.floor((len - 1) / 2); i >= 0; i--) {\n    siftDown(arr, i)\n  }\n  return arr\n}\n\n/**\n * Insert a value into heap. It's an operation called sift up.\n */\nvar enqueue = function(arr, value) {\n  arr.splice(len, 0, value)\n  len++\n  siftUp()\n}\n\n/**\n * to keep max heap, it's an operation called sift up.\n */\nvar siftUp = function() {\n  let enqueueValSubscript = len - 1\n  let parent = Math.floor(enqueueValSubscript / 2)\n  while (parent > 0 && arr[parent] < arr[enqueueValSubscript]) {\n    swap(arr, parent, enqueueValSubscript)\n    enqueueValSubscript = parent\n    parent = Math.floor(enqueueValSubscript / 2)\n  }\n}\n\n/*\n * to pick the smallest or the biggest element from the heap and return it;\n * Then t'll swap the endest element with the first element, and then keep the\n * heap length reduce one. If so, only do once sift down operation in the first element to keep heapify.\n */\nvar dequeue = function() {\n  const maxValue = arr[0]\n  swap(arr, len - 1, 0)\n  len--\n  siftDown(arr, 0)\n  return maxValue\n}\n\n/**\n * to keep max heap, it's an operation called sift down.\n */\nvar siftDown = function(arr, i) {\n  const left = 2 * i + 1\n  const right = 2 * i + 2\n  let maxSubscript = i\n\n  if (left < len && arr[left] > arr[maxSubscript]) {\n    maxSubscript = left\n  }\n\n  if (right < len && arr[right] > arr[maxSubscript]) {\n    maxSubscript = right\n  }\n\n  if (maxSubscript !== i) {\n    swap(arr, maxSubscript, i)\n    siftDown(arr, maxSubscript)\n  }\n}\n\n// swap two value in arr\nvar swap = function(arr, pointOne, pointTwo) {\n  const tmp = arr[pointOne]\n  arr[pointOne] = arr[pointTwo]\n  arr[pointTwo] = tmp\n}\n")),(0,i.kt)("p",null,"Test case one:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"input: var arr = [5, 2, 7, 3, 1, 8, 4]\n\nbuildMaxHeapify(arr) // [8, 3, 7, 2, 1, 5, 4]\n           8                                           8\n        ↙     ↘          enqueue(arr, 6)            ↙     ↘\n     3          7        ---------------\x3e         6          7\n  ↙    ↘      ↙   ↘                            ↙    ↘      ↙   ↘\n2        1  5       4                        3        1   5       4\n                                           ↙\n                                         2\n\n                                     7\n        return 8                  ↙     ↘\n        dequeue()               6         5\n    ----------------\x3e        ↙    ↘     ↙   ↘\n                           3       1   2      4\n")))}c.isMDXComponent=!0},41255:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"链表对应生活中的例子: 火车(一节带动一节, 必要时可以拆卸或添加一节车厢)"),(0,i.kt)("p",null,"链表通过指针连接, 如果需要插入或删除只需改变相应指针指向的目标就行。这也是链表相比较于数组最大的优点, 不用移动元素就能很轻松地添加删除元素。如果有大量的数据要插入或删除可以考虑使用链表这种数据结构。"),(0,i.kt)("h3",null,"链表的实现"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/7a3ef4c64503a167076422b377de3f44.jpg-300",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var LinkedList = function() {\n  const Node = function(element) {\n    this.element = element\n    this.next = null\n  }\n\n  let head = null\n  let current\n  let length = 0\n\n  // 在链表末尾加入元素\n  this.append = function(element) {\n    const node = new Node(element)\n    if (head === null) {       // 插入第一个链表\n      head = node\n    } else {\n      current = head\n      while (current.next) {     // 找到最后一个节点\n        current = current.next\n      }\n      current.next = node\n    }\n    length++\n  }\n\n  // 移除指定位置元素\n  this.removeAt = function(position) {\n    if (position > -1 && position < length) {\n      let previous\n      let index = 0\n      if (position === 0) {         // 如果是第一个链表的话, 特殊对待\n        head = head.next\n      } else {\n        current = head\n        while (index < position) {  // 循环找到当前要删除元素的位置\n          previous = current\n          current = current.next\n          index++\n        }\n        previous.next = current.next\n      }\n      length--\n    }\n  }\n\n  // 在指定位置加入元素\n  this.insert = function(position, element) {\n    const node = new Node(element)\n    let index = 0\n    let current, previous\n    if (position > -1 && position < length + 1) {\n      if (position === 0) { // 在链表最前插入元素\n        current = head\n        head = node\n        head.next = current\n      } else {\n        current = head\n        while (index < position) { // 同 removeAt 逻辑, 找到目标位置\n          previous = current\n          current = current.next\n          index++\n        }\n        previous.next = node       // 在目标位置插入相应元素\n        node.next = current\n      }\n      length++\n    }\n  }\n\n  // 链表中是否含有某个元素, 如果有的话返回相应位置, 无的话返回 -1\n  this.indexOf = function(element) {\n    let index = 0\n    current = head\n    while (index < length) {\n      if (current.element === element) {\n        return index\n      }\n      current = current.next\n      index++\n    }\n    return -1\n  }\n\n  // 移除某元素\n  this.remove = function(element) {\n    const position = this.indexOf(element)\n    this.removeAt(position)\n  }\n\n  // 获取大小\n  this.size = function() {\n    return length\n  }\n\n  // 获取最开头的链表\n  this.getHead = function() {\n    return head\n  }\n\n  // 是否为空\n  this.isEmpty = function() {\n    return length === 0\n  }\n\n  // 打印链表元素\n  this.log = function() {\n    current = head\n    let str = current.element\n    while (current.next) {\n      current = current.next\n      str = str + ' ' + current.element\n    }\n    return str\n  }\n}\n\n// 测试用例\nvar linkedList = new LinkedList()\nlinkedList.append(5)\nlinkedList.append(10)\nlinkedList.append(15)\nlinkedList.append(20)\nlinkedList.log()         // '5 10 15 20'\nlinkedList.removeAt(1)\nlinkedList.log()         // '5 15 20'\nlinkedList.insert(1, 10)\nlinkedList.log()\n")),(0,i.kt)("h3",null,"双向链表"),(0,i.kt)("p",null,"单向链表如果错过了某次查询就得重头开始重新查找, 双向链表进行了升级, 除了可以向后查找, 同时也支持向前查找"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/1d97c4d5d071560966357df5ab2bfd16.jpg-300",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'var DbLinkedList = function() {\n  const Node = function(element) {\n    this.element = element\n    this.next = null\n    this.prev = null\n  }\n\n  let head = null\n  let tail = null\n  let current, previous\n  let length = 0\n\n  // 指定任意位置插入元素\n  this.insert = function(position, element) {\n    let index = 0\n    const node = new Node(element)\n    if (position > -1 && position < length + 1) {\n      if (position === 0) {             // ① 在开头插入元素\n        if (head === null) {  // 链表内元素为空\n          head = node\n          tail = node\n        } else {              // 链表内存在元素\n          current = head\n          head = node\n          head.next = current\n          current.prev = head\n        }\n      } else if (position === length) { // ② 在末尾插入元素\n        current = tail\n        tail = node\n        current.next = tail\n        tail.prev = current\n      } else {                          // ③ 在链表中插入元素\n        current = head\n        while (index < position) { // 找到需插入节点的位置\n          previous = current\n          current = current.next\n          index++\n        }\n        previous.next = node\n        node.next = current\n\n        current.prev = node\n        node.prev = previous\n      }\n      length++\n    }\n  }\n\n  // 删除指定位置的元素\n  this.removeAt = function(position) {\n    let index = 0\n    if (position > -1 && position < length) {\n      if (position === 0) {                  // 删除链表最开头的元素\n        if (length === 1) {\n          head = null\n          tail = null\n        } else {\n          current = head\n          head = current.next\n          head.prev = current.prev\n        }\n      } else if (position === length - 1) {  // 删除链表最末尾的元素\n        current = tail\n        tail = current.prev\n        tail.next = current.next\n      } else {                               // 删除链表中的元素\n        current = head\n        while (index < position) {\n          previous = current\n          current = current.next\n          index++\n        }\n        previous.next = current.next\n        current.next.prev = previous\n      }\n      length--\n    }\n  }\n\n  this.log = function() {\n    current = head\n    let str = current.element\n    while (current.next) {\n      current = current.next\n      str = str + \' \' + current.element\n    }\n    return str\n  }\n}\n\nvar dbLinkedList = new DbLinkedList()\ndbLinkedList.insert(0, 5)\ndbLinkedList.insert(1, 10)\ndbLinkedList.insert(2, 15)\ndbLinkedList.insert(3, 20)\ndbLinkedList.insert(4, 25)\ndbLinkedList.log()         // "5 10 15 20 25"\ndbLinkedList.removeAt(4)\ndbLinkedList.removeAt(0)\ndbLinkedList.removeAt(1)\ndbLinkedList.log()         // "10 20"\n')),(0,i.kt)("p",null,"此外还有循环链表, 和上述代码类似, 在此省略。"))}c.isMDXComponent=!0},62598:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"队列"),(0,i.kt)("p",null,"队列的核心是 FIFO, 下面实现一个简单的队列:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Queue() {\n  this.items = []\n}\n\nQueue.prototype.push = function(item) {\n  this.items.push(item)\n}\n\nQueue.prototype.shift = function() {\n  return this.items.shift()\n}\n\nQueue.prototype.isEmpty = function() {\n  return this.items.length === 0\n}\n\nQueue.prototype.size = function() {\n  return this.items.length\n}\n\nQueue.prototype.clear = function() {\n  this.items = []\n}\n")),(0,i.kt)("h3",null,"队列知识延伸"),(0,i.kt)("p",null,"使用队列的一个典型场景是",(0,i.kt)("inlineCode",{parentName:"p"},"树的广度遍历(BFS)"),", 以下从 leetcode 中摘录了一些题目:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/102.Binary_Tree_Level_Order_Traversal/README.md"}),"Binary Tree Level Order Traversal"))),(0,i.kt)("h3",null,"两种特殊队列"),(0,i.kt)("h4",null,"最小优先队列"),(0,i.kt)("p",null,"最小优先队列在生活中的例子: 比如普通用户上医院需要排队挂号, 但是具有 VIP 的用户能'插队'办理业务。用代码实现如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 继承 Queue 类\nconst PriorityQueue = function () {\n  Queue.apply(this)\n}\n\nPriorityQueue.prototype = Object.create(Queue.prototype)\n\nPriorityQueue.prototype.constructor = PriorityQueue\n\n// 修改 push 方法\nPriorityQueue.prototype.push = function(item, level) {\n  if (this.isEmpty()) {\n    this.items.push({ item, level })\n  } else {\n    let add = true\n    for (let i = 0; i < this.size(); i++) {\n      if (level < this.items[i].level) {\n        add = false\n        this.items.splice(i, 0, { item, level })\n        return\n      }\n    }\n    add && this.items.push({ item, level })\n  }\n}\n\nPriorityQueue.prototype.print = function() {\n  for (let obj of this.items) {\n    console.log(obj.item)\n  }\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 调用\nconst queue = new PriorityQueue()\nqueue.push('张三', 2)\nqueue.push('李四', 1)\nqueue.push('赵五', 1)\nqueue.print() // 李四 赵五 张三\n")),(0,i.kt)("p",null,"可以看到具有相同权限的李四和赵五依旧遵守队列的先进先出原则, 同时排在了张三的前面。"),(0,i.kt)("h4",null,"循环队列"),(0,i.kt)("p",null,"循环队列以击鼓传花为例, 代码实现如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const drumGame = function(names, number) {\n  const queue = new Queue()\n  for (let i = 0; i < names.length; i++) {\n    queue.push(names[i])\n  }\n\n  while (queue.size() > 1) {\n    for (let i = 0; i < number; i++) {\n      queue.push(queue.shift())  // 这句是循环队列的核心\n    }\n    const loser = queue.shift()\n    console.log(loser + ' 出局')\n  }\n  return queue.shift()           // 留下的最后一个就是胜利者\n}\n\nconst names = ['John', 'Jack', 'Camila', 'Ingrid', 'Carl']\nconst winner = drumGame(names, 7) // 假设每轮传花 7 次\nconsole.log('胜利者是: ' + winner)\n\n// Camila 出局\n// Jack 出局\n// Carl 出局\n// Ingrid 出局\n// 胜利者是: John\n")))}c.isMDXComponent=!0},56682:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"集合"),(0,i.kt)("p",null,"集合是一种",(0,i.kt)("inlineCode",{parentName:"p"},"无重复元素, 无顺序"),"的数据结构。"),(0,i.kt)("p",null,"ES6 引入的 Set 就是集合。"),(0,i.kt)("h3",null,"简易版 Set 实现"),(0,i.kt)("p",null,"我们来动手实现一个简易版的 Set, 它拥有的 api 如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"add(value)\n\ndelete(value)\n\nhas(value)\n\nclear()\n\nsize\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 代码如下, 仅仅用来理解, 实现得不严谨\nfunction Set() {\n  this.items = {}\n  this.size = 0\n}\n\nSet.prototype.add = function(value) {\n  if (!this.items[value]) {\n    this.items[value] = value // 这样子不能实现存储数组、对象\n    this.size = Object.keys(this.items).length\n  }\n}\n\nSet.prototype.has = function(value) {\n  if (this.items.hasOwnProperty(value)) {\n    return true\n  } else {\n    return false\n  }\n}\n\nSet.prototype.delete = function(value) {\n  for (let i in this.items) {\n    if (this.items.hasOwnProperty(i)) {\n      if (i === value.toString()) {\n        delete(this.items[i])\n        this.size = Object.keys(this.items).length\n        return true\n      }\n    }\n  }\n}\n\nSet.prototype.clear = function() {\n  this.items = {}\n  this.size = 0\n}\n")),(0,i.kt)("h3",null,"并集、交集、差集、子集"),(0,i.kt)("p",null,"业务中可能用数组多些, 如果碰到 set 类型的可以用 Array.from 将之转为数组类型, 再使用如下方法。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 并集\nfunction union(arr1, arr2) {\n  const arr = arr1.concat(arr2)\n  const result = Array.from(new Set(arr))\n  return result\n}\n\n// 交集\nfunction intersection(arr1, arr2) {\n  const result = arr1.filter(r => arr2.includes(r)) // 也可以转化为 set,用 has\n  return result\n}\n\n// 差集\nfunction difference(arr1, arr2) {\n  const result = arr1.filter(r => !arr2.includes(r))\n  return result\n}\n\n// 子集(判断 arr1 是否为 arr2 的子集)\nfunction isSubset(arr1, arr2) {\n  let bool = true\n  arr1.forEach(r => {\n    if (!arr2.includes(r)) {\n      bool = false\n      return\n    }\n  })\n  return bool\n}\n")),(0,i.kt)("h3",null,"创建 Set 对象"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 方法一\nconst set1 = new Set()\nset.add(1)\n\n// 方法二\nconst set2 = new Set([1])\n")))}c.isMDXComponent=!0},52704:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"栈"),(0,i.kt)("p",null,"栈的核心是 FILO, 首先编写一个栈类:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Stack() {\n  this.items = []\n}\n\nStack.prototype.push = function(item) {\n  this.items.push(item)\n}\n\nStack.prototype.pop = function() {\n  return this.items.pop()\n}\n\nStack.prototype.size = function() {\n  return this.items.length\n}\n\nStack.prototype.isEmpty = function() {\n  return this.items.length === 0\n}\n\nStack.prototype.clear = function() {\n  this.items = []\n}\n")),(0,i.kt)("p",null,"题目: 实现一个十进制转化为二进制的函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"6 除以 2 = 3 ... 0     3 除以 2 = 1 ... 1   1 除以 2 = 0 ... 1    110\n测试用例: 6 => 110\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function conversion(num) {\n  const stack = new Stack()\n  let remainder\n  while (num > 0) {\n    remainder = num % 2\n    stack.push(remainder)\n    num = Math.floor(num / 2)\n  }\n  let str = ''\n  while (!stack.isEmpty()) {\n    str = str + stack.pop()\n  }\n  return str\n}\n")),(0,i.kt)("p",null,"题目: 平衡圆括号"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"测试用例:\n{{([][])}()} => true\n[{()] => false\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function isBalance(symbol) {\n  const stack = new Stack()\n  const left = '{[('\n  const right = '}])'\n  let popValue\n  let tag = true\n\n  const match = function(popValue, current) {\n    if (left.indexOf(popValue) !== right.indexOf(current)) {\n      tag = false\n    }\n  }\n\n  for (let i = 0; i < symbol.length; i++) {\n    if (left.includes(symbol[i])) {\n      stack.push(symbol[i])\n    } else if (right.includes(symbol[i])) {\n      popValue = stack.pop()\n      match(popValue, symbol[i])\n    }\n  }\n  return tag\n}\n")),(0,i.kt)("h3",null,"扩展: 栈和递归的紧密关系"),(0,i.kt)("p",null,"递归的写法本质上都是运用栈的思想。这里列几道 leetcode 上的题目作为参考"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"%5BAnalyze%5D(https://github.com/MuYunyun/blog/blob/master/LeetCode/144.Binary_Tree_Preorder_Traversal/README.md)"}),"Binary Tree Preorder Traversal")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/341.Flatten_Nested_List_Iterator/README.md"}),"Flatten Nested List Iterator"))))}c.isMDXComponent=!0},42425:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Chrome Skill"),(0,i.kt)("h3",null,"快捷键"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"无痕模式: cmd + shift + n\n")),(0,i.kt)("h3",null,"debugger"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"step"),": 多步执行;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"step over"),": 单步执行, 遇到子函数会将子函数当成是一个整体执行;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"step into"),": 单步执行, 遇到子函数进入子函数;")),(0,i.kt)("h3",null,"Take Full Size Screenshots"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Press ",(0,i.kt)("inlineCode",{parentName:"li"},"Cmd + Shift + P"),";"),(0,i.kt)("li",{parentName:"ol"},"Type ",(0,i.kt)("inlineCode",{parentName:"li"},"Capture full size screenshot"),";")),(0,i.kt)("h3",null,"切换"),(0,i.kt)("p",null,"chrome://flags/#enable-force-dark, enabled 启动暗黑"))}c.isMDXComponent=!0},16621:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"操作远程文件"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"git push origin :[branch] 删除远程分支\ngit rm -r --cached [file] 删除远程文件\n")),(0,i.kt)("h3",null,"git commit 提交规范"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"feat: 新功能\nfix: 修复 bug\ntest: 增加/修改测试用例\nchore: 修改工具相关\ndocs: 修改文档\nperf: 提升性能\nreflactor: 重构, 不影响当前逻辑\nstyle: 修改样式\ndeps: 升级依赖\n")),(0,i.kt)("h3",null,"PR 相关"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"git remote -v               列出远程仓库 url\ngit remote add [name] [url] 添加远程仓库 url\ngit fetch [name]            拉取远程仓库最新代码\ngit merge [name]/master     合并远程分支最新代码到本地\n")),(0,i.kt)("h3",null,"git pull 和 git fetch 的区别"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"git pull")," 等价于 ",(0,i.kt)("inlineCode",{parentName:"p"},"git fetch")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"git checkout -b")),(0,i.kt)("h3",null,"git merge 和 git rebase 的区别"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"git merge")," 会多产生一次 merge 的 log 记录;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"git rebase")," 会将主干新增的日志记录前置到当前分支之前;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"git merge --no-ff 在每次合并都会产生一个新的合并记录; git merge 的话只有解决冲突的时候才会产生一个新的合并记录。")),(0,i.kt)("h3",null,"git reset 和 git revert 的区别"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"git revert 回退会产生一个新的 commit, 是向前的操作"),(0,i.kt)("li",{parentName:"ul"},"git reset 回退不会产生一个新的 commit, 是向后的操作")),(0,i.kt)("h3",null,"git reset 撤销操作"),(0,i.kt)("p",null,"以下都为 ",(0,i.kt)("inlineCode",{parentName:"p"},"commit")," 了的情况, 下面对 ",(0,i.kt)("inlineCode",{parentName:"p"},"--mixed"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"--hard"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"--soft")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"git reset --soft Head~1: 撤销到上个分支, 撤销到 commit 之前, add 之后, 保留代码"),(0,i.kt)("li",{parentName:"ul"},"git reset --mixed Head~1: 撤销到上个分支, 撤销到 add 之前, 保留代码"),(0,i.kt)("li",{parentName:"ul"},"git reset --hard Head~1: 撤销到上个分支, 不保留代码")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"可以看到从上往下回复程度是在加强的。")),(0,i.kt)("h3",null,"git cherry-pick"),(0,i.kt)("p",null,"使用场景: 在一个分支中拉取另外一个分支",(0,i.kt)("inlineCode",{parentName:"p"},"某一个 commit")," 或",(0,i.kt)("inlineCode",{parentName:"p"},"一段区间的 commit")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"git cherry-pick <commit id>\ngit cherry-pick 371c2…971209 // (2,5]\ngit cherry-pick 371c2^…971209 // [2,5]\n")),(0,i.kt)("h3",null,"git log"),(0,i.kt)("p",null,"美化 git 日志"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit\"\n")),(0,i.kt)("p",null,"查看文件修改内容"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"git lg -p\n")),(0,i.kt)("h3",null,"对线上代码 (master 分支) 进行修复"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"在 ",(0,i.kt)("inlineCode",{parentName:"li"},"master")," 分支上使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"git reset --hard xxxxxx"),";"),(0,i.kt)("li",{parentName:"ol"},"使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"git checkout -b")," 创建 ",(0,i.kt)("inlineCode",{parentName:"li"},"fix/xxx")," 分支, 在该分支上进行 bug 修复;"),(0,i.kt)("li",{parentName:"ol"},"回到 ",(0,i.kt)("inlineCode",{parentName:"li"},"master")," 分支, 可以使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"git reflog")," 查看之前 reset 过来的分支节点, 再执行 ",(0,i.kt)("inlineCode",{parentName:"li"},"git reset --hard xxxxxx")," 回到那个节点。"),(0,i.kt)("li",{parentName:"ol"},"在 master 的最新节点上使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"git merge --no-ff fix/xxx"))),(0,i.kt)("h3",null,"github 使用技巧"),(0,i.kt)("p",null,"选择一句话, 按 r 对该话进行引用回复。"),(0,i.kt)("h3",null,"关于 pull request"),(0,i.kt)("p",null,"如果是比较复杂的 Feature 可以在开发过程提 pr(标为 WIP), 这样子可以提早的指出问题代码。"),(0,i.kt)("p",null,"当有人提了 ",(0,i.kt)("inlineCode",{parentName:"p"},"pr"),", 需要观察 pr 的代码是否存在问题。比如使用如下命令:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"git remote add lanyincao git@github.com:snakeUni/snake-design.git\n")),(0,i.kt)("h3",null,"git reflog"),(0,i.kt)("p",null,"git reflog 可以查看所有分支的所有操作记录"),(0,i.kt)("h3",null,"一个痛点"),(0,i.kt)("p",null,"输入 ",(0,i.kt)("inlineCode",{parentName:"p"},"git branch")," 分支情况如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c5586a56a252a983713f306ea2902255.jpg",alt:null}))),(0,i.kt)("p",null,"输入 ",(0,i.kt)("inlineCode",{parentName:"p"},"git branch --merged")," 后查看已合并的分支"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/38861f42cde27e6d1ae0ecc73a7f2357.jpg",alt:null}))),(0,i.kt)("p",null,"如何一键快速删除这些已合并的分支并删除远端的分支呢"),(0,i.kt)("p",null,"参考此脚本, 后续跟进。"),(0,i.kt)("h3",null,"操作 tag"),(0,i.kt)("p",null,"添加 tag:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"git tag v0.1         // 本地推标签\ngit push orgin v0.1  // 远端推标签\n")),(0,i.kt)("p",null,"删除 tag:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"git tag -d v0.1                  // 删除本地标签\ngit push origin :refs/tags/v0.1  // 删除远端标签\n")),(0,i.kt)("h3",null,"git 项目大小写"),(0,i.kt)("p",null,"git 默认初始化的项目是不区分文件名大小写的, 可以执行下这行命令"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"git config core.ignorecase false\n")),(0,i.kt)("h3",null,"查看两个分支的差异"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"git diff xxx xxx > my.patch\n")),(0,i.kt)("h3",null,"误提交敏感信息到 github 怎么办"),(0,i.kt)("p",null,"the first step:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'git filter-branch --force --index-filter \\\n  "git rm --cached --ignore-unmatch yarn.lock" \\\n  --prune-empty --tag-name-filter cat -- --all\n')),(0,i.kt)("p",null,"the second step:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"git push origin --force --all\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://help.github.com/en/github/authenticating-to-github/removing-sensitive-data-from-a-repository"}),"removing-sensitive-data-from-a-repository"))),(0,i.kt)("p",null,"ask for Contact ",(0,i.kt)("a",u({parentName:"p"},{href:"https://support.github.com/contact"}),"GitHub Support")," or ",(0,i.kt)("a",u({parentName:"p"},{href:"https://premium.githubsupport.com/"}),"GitHub Premium Support"),", asking them to remove cached views and references to the sensitive data in pull requests on GitHub."),(0,i.kt)("h3",null,"清理 git commit"),(0,i.kt)("p",null,"使用交互式 rebase 则有更多的功能，可以细致的操作每一条 commit，这样我们就能合并，修改 commit"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"git rebase -i [start-commit] [end-commit]\n# (start-commit, end-commit] 前开后闭区间，默认 end-commit 为当前 HEAD\n")),(0,i.kt)("p",null,"for example"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"git rebase -i HEAD~4\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'1 pick 05a703d fix: 左右按键遇见 label 标签、加粗文字, 光标位置与预期不符\n2 s a716c1d fix: 修复 P0 报错\n3\n4 # Rebase d974fa9..a716c1d onto d974fa9 (2 command(s))\n5 #\n6 # Commands:\n7 # p, pick = use commit\n8 # r, reword = use commit, but edit the commit message\n9 # e, edit = use commit, but stop for amending\n10 # s, squash = use commit, but meld into previous commit\n11 # f, fixup = like "squash", but discard this commit\'s log message\n12 # x, exec = run command (the rest of the line) using shell\n13 # d, drop = remove commit\n14 #\n15 # These lines can be re-ordered; they are executed from top to bottom.\n16 #\n17 # If you remove a line here THAT COMMIT WILL BE LOST.\n18 #\n19 # However, if you remove everything, the rebase will be aborted.\n20 #\n21 # Note that empty commits are commented out\n')),(0,i.kt)("p",null,"删除不想保留的 commit。"),(0,i.kt)("h3",null,"How do you make changes on a specific commit"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'1. git rebase -i <Earlier Commit>\n2. edit the commit info you want change from `pick` to `edit`\n3. git commit --amend --author="MuYunyun <328375795@qq.com>"\n4. git rebase --continue\n')),(0,i.kt)("h3",null,"设置 Git username"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"for every repository")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'$ git config --global user.name "Mona Lisa"\n$ git config --global user.name\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"for a single repository")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'$ git config user.name "MuYunyun"\n$ git config user.name\n$ git config user.email "328375795@qq.com"\n$ git config user.email\n')),(0,i.kt)("h3",null,"检测两个分支的冲突，但是不合并它们"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://stackoverflow.com/questions/10879331/how-to-check-the-conflict-of-two-branch-but-not-need-to-merge-them"}),"How to check the conflict of two branch, but not need to merge them?")),(0,i.kt)("p",null,"git document:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"--ff\nDo not generate a merge commit if the merge resolved as a fast-forward, only update the branch pointer. This is the default behavior.")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"-no-ff\nGenerate a merge commit even if the merge resolved as a fast-forward.")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"--commit\nPerform the merge and commit the result. This option can be used to override --no-commit.")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"--no-commit\nWith --no-commit perform the merge but pretend the merge failed and do not autocommit, to give the user a chance to inspect and further tweak the merge result before committing.")),(0,i.kt)("h3",null,"git 设置 sock5 代理"),(0,i.kt)("p",null,"背景：git push、git pull、lerna publish 卡顿，报类似如下问题。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"lerna ERR! fatal: unable to access '",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc.git/'"}),"https://github.com/MuYunyun/create-react-doc.git/'"),": LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443")),(0,i.kt)("p",null,"用 git 内置代理，直接走系统中运行的代理工具中转，比如 SS 本地端口是 1080，那么可以如下方式走代理："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"git config --global http.proxy socks5://127.0.0.1:1080\ngit config --global https.proxy socks5://127.0.0.1:1080\n")),(0,i.kt)("p",null,"停走代理："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'git config --global http.proxy ""\ngit config --global https.proxy ""\n')))}c.isMDXComponent=!0},82921:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"修改 host 文件"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"sudo vi /etc/hosts\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"github 访问慢一般可以修改该目录。",(0,i.kt)("a",u({parentName:"p"},{href:"https://zhuanlan.zhihu.com/p/94521827"}),"方法"))))}c.isMDXComponent=!0},33243:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"iTerm2 快捷键"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"ctrl + a: 到行首\nctrl + e: 到行尾\nctrl + u: 删除当前行\nctrl + w: 删除光标当前单词\n")))}c.isMDXComponent=!0},2313:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"vscode 快捷键"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"全局替换: Command + Shift + H"),(0,i.kt)("li",{parentName:"ul"},"当前页面全局替换: Command + option + F"),(0,i.kt)("li",{parentName:"ul"},"格式化: shift + option + F"),(0,i.kt)("li",{parentName:"ul"},"实时预览 md 文件: command + shift + V"),(0,i.kt)("li",{parentName:"ul"},"格式化表格: alt + shift + F"),(0,i.kt)("li",{parentName:"ul"},"向下复制当前行: shift + alt + ↓")),(0,i.kt)("h3",null,"左侧栏"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"command + shift + E 打开资源"),(0,i.kt)("li",{parentName:"ul"},"command + shift + F 打开搜索"),(0,i.kt)("li",{parentName:"ul"},"ctrl + shift + G 打开 git"),(0,i.kt)("li",{parentName:"ul"},"command + shift + D 打开调试"),(0,i.kt)("li",{parentName:"ul"},"command + shift + X 打开扩展"),(0,i.kt)("li",{parentName:"ul"},"command + shift + r 打开 bookmarks"),(0,i.kt)("li",{parentName:"ul"},"command + shift + 0: toggle activitybar: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://stackoverflow.com/questions/30878856/is-there-a-shortcut-to-hide-the-side-bar-in-visual-studio-code"}),"setting"))),(0,i.kt)("h3",null,"推荐字体"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/sdras/night-owl-vscode-theme"}),"vscode"))),(0,i.kt)("h3",null,"插件开发"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"本地开发调试",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"打包：",(0,i.kt)("inlineCode",{parentName:"li"},"vsce package")),(0,i.kt)("li",{parentName:"ul"},"扩展视图命令下拉菜单中使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"Install from VSIX")," 命令安装")))),(0,i.kt)("h3",null,"其它"),(0,i.kt)("p",null,"files to exclude: 用多个 , 作为分隔符隔开, 每个 , 间可以用正则。"))}c.isMDXComponent=!0},28343:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"使用 qshell 转移 bucket 文件到另一 bucket"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"1.下载 qshell\n2.解压, 将 qshell-darwin-x64 放到 /usr/local/bin 或 ~/bin 下\n3.更名 qshell-darwin-x64 为 qshell\n4.添加账号: qshell account ak sk\n5.导出 A bucket 文件信息: qshell listbucket A A.list.txt\n6.格式化文件信息: awk '{print $1}' A.list.txt > list.txt\n7.转移到 B bucket: qshell batchcopy A B list.txt\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/FaiChou/faichou.github.io/blob/master/_posts/2018-10-09-%E4%B8%83%E7%89%9B%E5%85%8D%E8%B4%B9%E4%B9%8B%E5%9D%91.md"}),"相关文章"))))}c.isMDXComponent=!0},40609:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"易读错音的前端英文词汇"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"cache: ","[美: kæʃ]"),(0,i.kt)("li",{parentName:"ul"},"babel: ","[美: 'beibəl]")))}c.isMDXComponent=!0},26642:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Lottie"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"针对营销动画场景, 业界用的较多的是使用 Lottie 来开发。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"优点",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"AE 香"),(0,i.kt)("li",{parentName:"ul"},"还原度高"))),(0,i.kt)("li",{parentName:"ul"},"缺点",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"不支持动态数据"),(0,i.kt)("li",{parentName:"ul"},"沟通、适配成本"),(0,i.kt)("li",{parentName:"ul"},"低端机性能问题"),(0,i.kt)("li",{parentName:"ul"},"官方文档匮乏"))))),(0,i.kt)("li",{parentName:"ul"},"使用 css 来完成营销动效的效果(比如光影、滤镜效果)不会很好。"),(0,i.kt)("li",{parentName:"ul"},"支付宝营销动效方案:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"在线制作 -> 发布优化 -> 播放 JSON"),(0,i.kt)("li",{parentName:"ul"},"类 lottie 方案, 提供网页 ae, ",(0,i.kt)("a",u({parentName:"li"},{href:"https://render.alipay.com/p/s/mars-editor/"}),"https://render.alipay.com/p/s/mars-editor/"),", 转化为 WebGl"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/57576659"}),"网易云音乐年度报告从设计到代码"),"。")),(0,i.kt)("h3",null,"场景"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"直播: 手势拜年特效"),(0,i.kt)("li",{parentName:"ul"},"素材属性编辑"),(0,i.kt)("li",{parentName:"ul"},"内容平台操作")),(0,i.kt)("h3",null,"实时动画"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"还原度",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"还原曲线描点等数据"),(0,i.kt)("li",{parentName:"ul"},"不同平台的渲染差异"))),(0,i.kt)("li",{parentName:"ul"},"性能",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Mars Player: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://render.alipay.com/p/s/mars-editor/"}),"https://render.alipay.com/p/s/mars-editor/"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"图层、粒子、拖尾、模型、交互"),(0,i.kt)("li",{parentName:"ul"},"WebGl"))),(0,i.kt)("li",{parentName:"ul"},"Oasis 3d(蚂蚁): ",(0,i.kt)("a",u({parentName:"li"},{href:"https://oasis-engine.github.io/"}),"https://oasis-engine.github.io/")," 动画引擎、Hilo 3d(淘宝 开源)"),(0,i.kt)("li",{parentName:"ul"},"小程序、H5、Web3D 游戏"))),(0,i.kt)("li",{parentName:"ul"},"稳定性")),(0,i.kt)("h3",null,"Lottie 库使用"),(0,i.kt)("p",null,"lottie-web gzip 压缩后大小有 40kb 的大小。如果使用 npm 包的形式进行加载, 那么 vendor.js 会增加 40kb 的大小, 这样会使页面性能下降。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方案一: 采用 script 标签的形式来加载 lottie 文件, 并且使用 defer 或 async 属性来进行异步加载。一般情况下, 我们只需要 svg 格式的动画, 所以可以使用 lottie_light 版本（仅支持 svg 渲染）。"),(0,i.kt)("li",{parentName:"ul"},"方案二: 因为 lottie 目前只在商家年度之夜中使用, 因此在特定路由中进行按需引入加载。")),(0,i.kt)("h4",null,"JSON 文件"),(0,i.kt)("p",null,"通过 bodymovin 插件导出的动画 JSON 文件大小也可能比较大(复杂的动画达到上百 kb), 所以不建议将 JSON 数据内联到页面中, 而最好是当做一个 JSON 文件来进行下载。"),(0,i.kt)("h4",null,"lottie-web 的基本用法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const animation = bodymovin.loadAnimation({\n  container: element,    // 要包含该动画的dom元素\n  renderer: 'svg',       // 渲染方式, svg、canvas、html（轻量版仅svg渲染）\n  loop: true,            // 是否循环播放\n  autoplay: true,        // 是否自动播放\n  animationData,         // 动画 JSON 文件(优先级比 path 高)\n  path: animateJsonPath, // 动画 JSON 文件路径\n});\n")),(0,i.kt)("h4",null,"lottie-web 常用方法"),(0,i.kt)("p",null,"lottie-web 提供了很多的控制动画播放的方法, 下面是一些常用的方法。animation 等于上面代码中的 animation。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"animation.play(); // 播放该动画, 从目前停止的帧开始播放\nanimation.stop(); // 停止播放该动画, 回到第 0 帧\nanimation.pause(); // 暂停该动画, 在当前帧停止并保持\nanimation.goToAndStop(value, isFrame); // 跳到某个时刻/帧并停止。isFrame(默认false) 指示 value 表示帧还是时间(毫秒)\nanimation.goToAndPlay(value, isFrame); // 跳到某个时刻/帧并进行播放\nanimation.goToAndStop(30, true); // 跳转到第 30 帧并停止\nanimation.goToAndPlay(300); // 跳转到第 300 毫秒并播放\nanimation.playSegments(arr, forceFlag); // arr 可以包含两个数字或者两个数字组成的数组, forceFlag 表示是否立即强制播放该片段\nanimation.playSegments([10,20], false); // 播放完之前的片段, 播放 10-20 帧\nanimation.playSegments([[0,5],[10,18]], true); // 直接播放 0-5 帧和 10-18 帧\nanimation.setSpeed(speed); // 设置播放速度, speed为 1 表示正常速度\nanimation.setDirection(direction); // 设置播放方向, 1 表示正向播放, -1 表示反向播放\nanimation.destroy(); // 删除该动画, 移除相应的元素标签等。在unmount的时候, 需要调用该方法\n")),(0,i.kt)("h4",null,"lottie-web 常用的事件"),(0,i.kt)("p",null,"lottie-web 中可能也需要监听一些事件, 比如加载完动画 JSON 文件时的 data_ready 事件。监听方法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"animation.addEventListener('data_ready', () => {\n  console.log('animation data has loaded');\n});\n")),(0,i.kt)("p",null,"除了 ",(0,i.kt)("inlineCode",{parentName:"p"},"data_ready")," 事件, 下面还有一些其他常用的事件可以监听:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"complete: 播放完成（循环播放下不会触发）"),(0,i.kt)("li",{parentName:"ul"},"loopComplete: 当前循环下播放（循环播放/非循环播放）结束时触发"),(0,i.kt)("li",{parentName:"ul"},"enterFrame: 每进入一帧就会触发, 播放时每一帧都会触发一次, stop 方法也会触发"),(0,i.kt)("li",{parentName:"ul"},"segmentStart: 播放指定片段时触发"),(0,i.kt)("li",{parentName:"ul"},"playSegments、resetSegments 等方法刚开始播放指定片段时会发出, 如果 playSegments 播放多个片段, 多个片段最开始都会触发。"),(0,i.kt)("li",{parentName:"ul"},"data_ready: 动画 JSON 文件加载完毕触发"),(0,i.kt)("li",{parentName:"ul"},"DOMLoaded: 动画相关的 dom 已经被添加到 html 后触发"),(0,i.kt)("li",{parentName:"ul"},"destroy: 将在动画删除时触发")),(0,i.kt)("h4",null,"lottie-web 部分高阶用法"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"在制作 AE 动画时, 将图层命名为 #svgId 格式, 前端加载该动画后, 相应的图层的 id 会被设置为 svgId, 可以通过 dom 方法获取该元素并做相应的操作;"),(0,i.kt)("li",{parentName:"ol"},"在制作 AE 动画时, 将图层命名为 .svgClass 格式, 前端加载该动画后, 相应的图层的 class 会被设置为 svgClass, 可以通过 dom 方法获取这些元素并做相应的操作;")),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://lottiefiles.com/featured"}),"lottie 动效社区资源")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/104751997"}),"现在你可以把 Lottie 动画导回 AE 了"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"经验证, 简单的动效可以, 复杂的不行。")))),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.cn/post/6914835547588395022"}),"剖析 lottie-web 动画实现原理")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://jelly.jd.com/article/5fcf44b5a1c4e30142d0a472"}),"使用 Lottie 快速开发动画"))))}c.isMDXComponent=!0},77958:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"安装的坑"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"在 macOS Big Sur 中需要使用 2020 版本。"),(0,i.kt)("li",{parentName:"ul"},"安装 bodyMovin")),(0,i.kt)("h3",null,"Make A Lottie"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"打开 AE, 新建 composition"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/45a2f4f3dcfec5830d0aaab22e936f38.jpg-400",alt:null}))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/5fc938f542b38c956bea71f12cb9cb3a.jpg-400",alt:null}))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"每个区域的作用分别是:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Project: 管理当前项目以及一些项目参数的预览"),(0,i.kt)("li",{parentName:"ul"},"Resource: 导入到 AE 中的所有外部资源如图像等在这里进行统一管理"),(0,i.kt)("li",{parentName:"ul"},"Layer: 在这里为每一个图层添加/编辑关键帧和属性"),(0,i.kt)("li",{parentName:"ul"},"Timeline: 在这里可以编辑动画的关键帧和曲线"),(0,i.kt)("li",{parentName:"ul"},"Preview: 动画和编辑实时预览/编辑窗口"),(0,i.kt)("li",{parentName:"ul"},"Toolbar: 各种工具的集合, 如文字工具、图形工具等"),(0,i.kt)("li",{parentName:"ul"},"Props: 在这里编辑元素的属性")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"小作业: ",(0,i.kt)("a",u({parentName:"p"},{href:"https://zhuanlan.zhihu.com/p/35540035"}),"面向前端的 Lottie AE 动画手把手入门教学"))))}c.isMDXComponent=!0},61327:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"样式相关"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"elt.style")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"优点: 能使用 api 或者直接改写 style 内的样式"),(0,i.kt)("li",{parentName:"ul"},"缺点: 只能针对内嵌样式")),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"window.getComputedStyle(elt","[, pseudoElt]",")")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"优点: 支持内联样式\\外联样式"),(0,i.kt)("li",{parentName:"ul"},"缺点: 只能进行只读操作, 不支持 IE")),(0,i.kt)("ol",u({},{start:3}),(0,i.kt)("li",{parentName:"ol"},"elt.getBoundingClientRect()")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在设置了 width 的前提下, 在标准盒模型下(box-sizing: content-box) margin 不算入其中, padding 算入其中;")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"能获得位置相关信息")),(0,i.kt)("h3",null,"操作已存在的 dom 元素"),(0,i.kt)("p",null,"这个点藏得比较深, 如果 ",(0,i.kt)("inlineCode",{parentName:"p"},"appendChild/insertBefore")," 操作已经存在的 dom, 则原来的 dom 会移除。(只有一份实例)。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<form>\n  <select id="select1">\n    <option>1</option>\n  </select>\n  <select id="select2">\n    <option>2</option>\n  </select>\n</form>\n<script>\n  var select2 = document.getElementById(\'select2\')\n  select2.appendChild(select1.options[0])\n<\/script>\n')),(0,i.kt)("p",null,"如上 demo 中, ",(0,i.kt)("inlineCode",{parentName:"p"},"select1")," 的 option 就会被转移到 ",(0,i.kt)("inlineCode",{parentName:"p"},"select2")," 下"))}c.isMDXComponent=!0},16182:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"HTML5 DOM"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"getElementsByClassName"),(0,i.kt)("li",{parentName:"ol"},"遍历相关, 如下左侧属性")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"只涉及元素节点的操作(不涉及其它节点), 建议使用左侧的属性替代右侧的属性:")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"属性名"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"被替代的属性"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"children"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"childNodes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"childElementCount"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"childNodes.length")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"previousElementSibling"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"previousSibling")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"nextElementSibling"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"nextSibling")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"firstElementChild"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"firstChild")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"lastElementChild"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"lastChild")))),(0,i.kt)("ol",u({},{start:3}),(0,i.kt)("li",{parentName:"ol"},"ele.scrollIntoView()")),(0,i.kt)("p",null,"调用 ele.scrollIntoView(), ele 元素顶端会移动到可视区域的顶端; 若传入参数 alignToTop: false, 则 ele 移到屏幕底部;"),(0,i.kt)("h3",null,"HTML5 事件"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"contextmenu")),(0,i.kt)("details",null,(0,i.kt)("summary",null,"contextmenu 使用 demo"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),"<ul id=\"myMenu\" style=\"position: absolute;visibility: hidden;background-color: silver\">\n  <li>111</li>\n  <li>222</li>\n  <li>333</li>\n</ul>\n<script>\n  var menu = document.getElementById('myMenu')\n  document.addEventListener('contextmenu', (event) => {\n    event.preventDefault()\n    menu.style.left = event.clientX + 'px'\n    menu.style.top = event.clientY + 'px'\n    menu.style.visibility = 'visible'\n  }, false)\n  document.addEventListener('click', (event) => {\n    menu.style.visibility = 'hidden'\n  }, false)\n<\/script>\n"))),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"DOMContentLoaded")),(0,i.kt)("p",null,"优于 window.onload 执行"),(0,i.kt)("ol",u({},{start:3}),(0,i.kt)("li",{parentName:"ol"},"readystatechange")),(0,i.kt)("p",null,"可用来判断动态载入的 script、link 标签是否加载完成。demo 如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const script = document.createElement('script')\nscript.addEventListener('readystatechange', function eventListener(event) {\n  if (event.readyState === 'loaded' || event.readyState === 'complete') { // hack 的手段, 浏览器自身的问题\n    script.removeEventListener('readystatechange', eventListener)\n  }\n})\n\nscript.src = 'example.js'\ndocument.body.appendChild(script)\n")),(0,i.kt)("ol",u({},{start:4}),(0,i.kt)("li",{parentName:"ol"},"hashchange")),(0,i.kt)("h3",null,"HTML5 表单"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"input/textarea 里新增 ",(0,i.kt)("inlineCode",{parentName:"li"},"autoFocus()")," 字段"),(0,i.kt)("li",{parentName:"ul"},"表单校验 api")),(0,i.kt)("p",null,"使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"checkValidate()")," 校验 ",(0,i.kt)("inlineCode",{parentName:"p"},"required"),"、",(0,i.kt)("inlineCode",{parentName:"p"},'pattern="\\d+"')," 属性"),(0,i.kt)("h3",null,"HTML5 脚本"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"跨文档消息传输(XDM), 核心是 ",(0,i.kt)("inlineCode",{parentName:"li"},"postMessage")),(0,i.kt)("li",{parentName:"ul"},"拖放 api")),(0,i.kt)("details",null,(0,i.kt)("summary",null,"拖放 api 使用示例"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<head>\n    <style>\n        #draggable {\n            width: 200px;\n            height: 20px;\n            text-align: center;\n            background: white;\n        }\n\n        .dropzone {\n            width: 200px;\n            height: 20px;\n            background: blueviolet;\n            margin-bottom: 10px;\n            padding: 10px;\n        }\n    </style>\n</head>\n\n<body>\n    <div class="dropzone">\n        <div id="draggable" draggable="true" ondragstart="event.dataTransfer.setData(\'text/plain\',null)">\n            This div is draggable\n        </div>\n    </div>\n    <div class="dropzone"></div>\n    <div class="dropzone"></div>\n    <div class="dropzone"></div>\n    <script>\n        window.onload = function () {\n            var dragged\n\n            document.addEventListener("dragstart", function (event) {\n                dragged = event.target\n            }, false)\n\n            document.addEventListener("dragover", function (event) {\n                // prevent default to allow drop\n                event.preventDefault()\n            }, false)\n\n            document.addEventListener("drop", function (event) {\n                // prevent default action (open as link for some elements)\n                event.preventDefault()\n                if (event.target.className == "dropzone") {\n                    dragged.parentNode.removeChild(dragged)\n                    event.target.appendChild(dragged)\n                }\n            }, false)\n        }\n    <\/script>\n</body>\n'))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"媒体元素 ",(0,i.kt)("inlineCode",{parentName:"li"},"<video>"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"<audio>")),(0,i.kt)("li",{parentName:"ul"},"浏览器状态管理(history)")),(0,i.kt)("h3",null,"HTML5 存储"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sessionStorage"),": 大小上限为 2.5Mb(不同浏览器会有差异), 页面关闭时便清空;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"localStorage"),": 大小上限为 2.5Mb(不同浏览器会有差异), 页面关闭时不会清空;")),(0,i.kt)("p",null,"它们的 api 也是一致的, 有如下几个:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"setItem(key, value)"),(0,i.kt)("li",{parentName:"ul"},"getItem(key)"),(0,i.kt)("li",{parentName:"ul"},"removeItem(key)"),(0,i.kt)("li",{parentName:"ul"},"clear()")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在 HTML5 范围之外与存储相关的技术还有 cookie(存放在客户端, 可以由客户端也可以由服务端生成, 大小上限为 4 kb)、IndexedDB(大小上限为 5 Mb)、cacheStorage(ServiceWorker)。")),(0,i.kt)("h3",null,"HTML5 JavaScript Api"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"requestAnimationFrame(callback)"),": 表示在下次重绘前执行指定的回调函数，下面通过一个简单的 demo 来认识它。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let frame\nlet n = 5\nfunction callback(timeStamp) {\n    console.log(timeStamp) // 开始执行回调的时间戳\n    // 如果想要产生循环动画的效果, 需在回调函数中再次调用 requestAnimationFrame()\n    while (n > 0) {\n        requestAnimationFrame(callback)\n        console.log('测试执行顺序')\n        n--\n    }\n}\n\nframe = requestAnimationFrame(callback) // 在下次重绘之前调用回调\n\n// 如果想要销毁该回调, 可以执行 cancelAnimationFrame(frame)\n")),(0,i.kt)("p",null,"执行上述代码, 控制台(chrome)打印如下数据:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"先输出 5 次 '测试执行顺序'\n1795953.649\n1795970.318\n1795986.987\n1796003.656\n1796020.325\n...\n")),(0,i.kt)("p",null,"可以看到在浏览器上一帧的时间大致为 ",(0,i.kt)("inlineCode",{parentName:"p"},"16ms"),"。同时可以看到 ",(0,i.kt)("inlineCode",{parentName:"p"},"requestAnimation(callback)")," 中的 callback 也是异步的(只不过它是基于帧与帧间的异步), 所以上述打印结果是先打印出 5 次 '测试执行顺序' 后再依次打印出 5 个时间戳。requestAnimation 不仅可以用在动画上, 更是被 React 团队用来 hack requestIdleCallback 的实现。可以阅读",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/React/requestIdleCallback.md"}),"你不知道的 requestIdleCallback")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Web Worker"))),(0,i.kt)("p",null,"JavaScript 是一门单线程的语言, 借助 Web Worker 能在浏览器上模拟线程的概念。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Service Worker"),": 基于 Web Worker 的 api 来处理网络请求以及缓存, 可以将其理解为是 ",(0,i.kt)("inlineCode",{parentName:"li"},"Web Worker + cache storage")," 的组合。同时其也是 PWA 依赖的最为重要的技术。")),(0,i.kt)("h3",null,"浏览器支持 HTML5 情况"),(0,i.kt)("p",null,"可以在 html5test.com 查询浏览器支持 HTML5 情况。"))}c.isMDXComponent=!0},24050:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"引子"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"(0, function (arg) { ... })(this)\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"[comma operator]","(The comma operator evaluates each of its operands (from left to right) and returns the value of the last operand.)")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"(0, fn)() === fn()\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var global = 'outer';\n(() => {\n  var global = 'inner';\n  eval('console.log(\"call directly:\" + global)');\n  (0, eval)('console.log(\"call directly:\" + global)');\n})()\n\n// call directly:inner\n// call directly:outer\n")),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://stackoverflow.com/questions/40967162/what-is-the-meaning-of-this-code-0-function-in-javascript"}),"1")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://stackoverflow.com/questions/9107240/1-evalthis-vs-evalthis-in-javascript"}),"2"))))}c.isMDXComponent=!0},19928:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"这是一套基本的由浅入深考察前端知识体系的清单, 自测用:"),(0,i.kt)("h3",null,"CSS"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"什么是 CSS 盒模型")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"包含 content, margin, border, padding\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"标准模型和 IE 模型有什么不同")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"是否将 padding 和 border 算进 content 的 width 中, 即在 IE 模型下, padding 和 border 会挤压 content 的空间\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"CSS 如何设置这两种模型")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),"box-sizing: content-box; // 标准模型(默认)\nbox-sizing: border-box;  // IE模型\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"JS 如何设置获取盒模型对应的宽和高")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"dom.style.width             // 只支持内联样式\ndom.currentStyle.width      // 只有 IE 支持\nwindow.getComputedStyle\ndom.getBoundingClientRect\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"如何实现垂直居中")),(0,i.kt)("p",null,"见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/css/%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD.html"}),"垂直居中")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Flex 布局居中")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),"justify-content: center； // 水平居中\nalign-item: center;       // 垂直居中\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"BFC 的基本概念")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"BFC 的原理")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何创建 BFC"))),(0,i.kt)("p",null,"前三个问题的解答看: ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/css/%E8%81%8A%E8%81%8ABFC.md"}),"聊聊 BFC"),", 对如何创建 BFC 这个问题答主水平有限, 只实验了 overflow:hidden 这个属性, 个人建议回答好 BFC 原理即可。"),(0,i.kt)("h3",null,"DOM 事件类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"DOM 事件的级别了解吗")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"DOM0: dom.onClick\nDOM2: dom.addEventListener('click', () => {}, false)\nDOM3: 在 1 的基础上加了鼠标键盘事件\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"dom.addEventListener() 的第二个参数能跟 ",(0,i.kt)("inlineCode",{parentName:"p"},"{ handleEvent: () => {} }"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"DOM 事件模型了解吗")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"存在冒泡阶段和捕获阶段\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"DOM 事件流了解吗")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"事件通过捕获到目标阶段, 目标阶段再进行冒泡\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"描述 DOM 事件捕获的具体流程")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"事件捕获 => window => document => html => body => 目标元素\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"讲一下事件委托(事件代理)")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"将绑定在子元素的事件绑定到父元素上, 然后可以通过 e.target 取到目标节点\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"自定义事件了解吗")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var event = new Event('custom')\ndom.addEventListener('custom', () => {})\ndom.dispatchEvent(event)\n")),(0,i.kt)("h3",null,"类型转换"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"了解显式转换、隐式转换吗？")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"显示转换:\n隐式转换: 四则运算、if 语句、native 调用(console.log())\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"了解显式转换的过程吗")),(0,i.kt)("h3",null,"HTTP 相关"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/http/http.md"}),"https://github.com/MuYunyun/blog/blob/master/BasicSkill/http/http.md"))),(0,i.kt)("h3",null,"原型链类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"创建对象有几种方法")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"聊聊原型、构造函数、实例、原型链")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"instanceof 的原理了解吗")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"new 运算符的原理了解吗"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const new2 = function(func) {\n  const o = Object.create(func.prototype)\n  const result = func.call(o)\n  if (typeof(result) === 'object') {\n    return result\n  } else {\n    return o\n  }\n}\n")),(0,i.kt)("h3",null,"面向对象类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何进行类的声明")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何生成实例")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何实现继承")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"各继承方式的优缺点"))),(0,i.kt)("h3",null,"通信类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"什么是同源策略及限制")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何创建 Ajax"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const xhr = new HttpRequest()\n\nxhr.open('Get', '/abc', false)\nxhr.onreadystatechange = function() {\n  if (xhr.readyState === 4) {\n    if (xhr.status === 200 || xhr.status === 304) {\n      console.log(xhr.responseText)\n    }\n  }\n}\n\nxhr.send(null)\n")),(0,i.kt)("p",null,"甚至可以结合 Promise 与 HttpRequest 来封装 fetch。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function fetch(url) {\n  return new Promise((resolve, reject) => {\n    var xhr = new XMLHttpRequest()\n    xhr.open('GET', url, true)\n    xhr.onreadystatechange = function() {\n      if (this.readyState === 4 && this.status === 200) {\n        resolve(this.responseText)\n      } else {\n        reject(new Error(this.status))\n      }\n    }\n    xhr.send(null)\n  })\n}\n\nfetch('/post.json')\n  .then((fulfilled) => {\n    console.log(fulfilled)\n  })\n  .catch((rejected) => {\n    console.log(rejected)\n  })\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"跨域通信的几种方式")),(0,i.kt)("h3",null,"安全类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"了解 CSRF 吗 ？ 如何防止 CSRF")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"了解 XSS 吗 ？ 如何防止 XSS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"session 与 token 有什么区别")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"session(会话) 存放在服务端, 每次打开网站就产生一个 session, 注销网站, session 就会销毁")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"token(令牌) 通常是由",(0,i.kt)("inlineCode",{parentName:"p"},"密码"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"时间戳"),"混合盐算法一起生成"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"既然聊到了 cookie 的大小, 另外两个相关的")),(0,i.kt)("h3",null,"渲染机制类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"什么是 DOCTYPE 及作用")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"浏览器解析和渲染过程")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"重排 Reflow"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"1.增减 dom 元素\n2.元素的位置发生移动\n3.元素尺寸(外间距、内间距、长宽)发生改变\n4.浏览器的窗口大小改变\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"重绘 Repaint")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"1.重排必然会导致重绘\n2.重绘不一定重排, 比如元素的颜色发生变化, 只会发生重绘\n")),(0,i.kt)("h3",null,"运行机制类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"如何理解 JS 的单线程")),(0,i.kt)("p",null,"没办法同时做两件事情"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"什么是 Event Loop")),(0,i.kt)("h3",null,"页面性能类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"提升页面性能的方法有哪些")))}c.isMDXComponent=!0},16356:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"离职的原因是什么?")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"与多位业界大牛进行了沟通"),(0,i.kt)("li",{parentName:"ul"},"自己目前到达了一个瓶颈"),(0,i.kt)("li",{parentName:"ul"},"自己也有个明确的职业规划"),(0,i.kt)("li",{parentName:"ul"},"在点我达 2 年的这个时间节点上, 我认为是时候去挑战下更宽广的舞台了"),(0,i.kt)("li",{parentName:"ul"},"... 是我最心仪的部门, 非常期待加入贵公司与大牛同事们公事")),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"能介绍下印象最深的项目么?")),(0,i.kt)("p",null,"从这两个点作答:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"公司的项目"),(0,i.kt)("li",{parentName:"ul"},"个人的项目")),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"你的优点和缺点?")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"优点: 喜欢分享"),(0,i.kt)("li",{parentName:"ul"},"缺点: 语言组织能力")),(0,i.kt)("ol",u({},{start:3}),(0,i.kt)("li",{parentName:"ol"},"你的职业规划?")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"分享"),(0,i.kt)("li",{parentName:"ul"},"开源"),(0,i.kt)("li",{parentName:"ul"},"业务")),(0,i.kt)("ol",u({},{start:4}),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"是否在面其它公司?")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"你对薪资的要求？"))))}c.isMDXComponent=!0},93069:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"这是一套基本的由浅入深考察前端知识体系的清单, 自测用:"),(0,i.kt)("h3",null,"CSS"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"什么是 CSS 盒模型")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"标准模型和 IE 模型有什么不同")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"CSS 如何设置这两种模型")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"JS 如何设置获取盒模型对应的宽和高")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何实现垂直居中")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Flex 布局居中")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"BFC 的基本概念")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"BFC 的原理")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何触发(消除) BFC"))),(0,i.kt)("h3",null,"DOM 事件类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"DOM 事件的级别了解吗")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"DOM 事件模型了解吗")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"DOM 事件流了解吗")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"描述 DOM 事件捕获的具体流程")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"讲一下事件委托(事件袋里)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"自定义事件了解吗"))),(0,i.kt)("h3",null,"类型转换"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"了解显式转换、隐式转换吗？")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"了解显式转换的过程吗"))),(0,i.kt)("h3",null,"HTTP 相关"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"HTTP 协议主要特点")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"HTTP 报文组成部分"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"请求报文: 请求行 请求头 空行 请求体\n\n响应报文: 响应行 响应头 空行 响应体\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"HTTP 协议类: POST 和 GET 的区别")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"HTTP 状态码")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"强缓存和协商缓存 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.cnblogs.com/lyzg/p/5125934.html"}),"资料"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"持久连接")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"管线化"))),(0,i.kt)("h3",null,"原型链类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"创建对象有几种方法")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"聊聊原型、构造函数、实例、原型链")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"instanceof 的原理了解吗")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"new 运算符的原理了解吗"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const new2 = function(func) {\n  const o = Object.create(func.prototype)\n  const result = func.call(o)\n  if (typeof(result) === 'object') {\n    return result\n  } else {\n    return o\n  }\n}\n")),(0,i.kt)("h3",null,"面向对象类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何进行类的声明")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何生成实例")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何实现继承")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"各继承方式的优缺点"))),(0,i.kt)("h3",null,"通信类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"什么是同源策略及限制")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何创建 Ajax"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const xhr = new XMLHttpRequest()\n\nxhr.open('GET', '/api', false)\nxhr.onreadystatechange = function() {\n  if (xhr.readyState === 4) {\n    if (xhr.status === 200 || xhr.status === 304) {\n      console.log(xhr.responseText)\n    }\n  }\n}\nxhr.send(null)\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"跨域通信的几种方式")),(0,i.kt)("h3",null,"安全类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"了解 CSRF 吗 ？ 如何防止 CSRF")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"了解 XSS 吗 ？ 如何防止 XSS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"cookie 与 token 有什么区别"))),(0,i.kt)("h3",null,"渲染机制类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"什么是 DOCTYPE 及作用")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"浏览器解析和渲染过程")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"重排 Reflow")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"重绘 Repaint"))),(0,i.kt)("h3",null,"运行机制类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"如何理解 JS 的单线程")),(0,i.kt)("p",null,"没办法同时做两件事情"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"什么是 Event Loop")),(0,i.kt)("h3",null,"页面性能类"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"提升页面性能的方法有哪些")))}c.isMDXComponent=!0},16906:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"bind 函数实现"),(0,i.kt)("h3",null,"第一版: 借助 call/apply"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Function.prototype.bind1 = function (context) {\n  const self = this\n  return function () {\n    return self.call(context)\n  }\n}\n\n// 测试:\nconst obj = {\n  value: 'muyy',\n}\nfunction testBind() {\n  console.log(this.value)\n}\nconst resultBind = testBind.bind1(obj)\nresultBind() // muyy\n")),(0,i.kt)("h3",null,"第二版: 借助 arguments"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Function.prototype.bind2 = function (context) {\n  const arr = Array.prototype.slice.call(arguments, 1)\n  const self = this\n  return function () {\n    const restArr = Array.prototype.slice.call(arguments)\n    return self.apply(context, arr.concat(restArr))\n  }\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"这种方式的实现其实是函数柯里化的变版")),(0,i.kt)("p",null,"比如在监听事件时可以这样子用:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"dom.addEventListener('click', fn.bind(this))\n")),(0,i.kt)("p",null,"进行如下测试:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const obj2 = {\n  value: 'muyy',\n}\nfunction testBind2(age, gender) {\n  console.log(this.value) // muyy\n  console.log(age)        // 23\n  console.log(gender)     // male\n}\nconst resultBind2 = testBind2.bind2(obj2, 23)\nresultBind2('male')\n")),(0,i.kt)("h3",null,"第三版: 区分环境, 是普通调用还是 new 调用"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Function.prototype.bind3 = function (context) {\n  const arr = Array.prototype.slice.call(arguments, 1)\n  const self = this\n  return function () {\n    const restArr = Array.prototype.slice.call(arguments)\n    return self.apply(this !== windows ? this : context, arr.concat(restArr))\n  }\n}\n\n// 测试: 使用 new 以后 this 会指向 newObj\nconst obj3 = {\n  value: 'muyy',\n}\nfunction testBind3(age, gender) {\n  console.log(this.value)\n  console.log(age)\n  console.log(gender)\n}\nconst resultBind3 = testBind3.bind3(obj3, 23, 'male')\nconst newObj = new resultBind3()\n")))}c.isMDXComponent=!0},31684:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"call 函数实现"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"将函数引用到对象里")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"调用函数")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"删除对象里的函数"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Function.prototype.call1 = function (context) {\n  context.fn = this // this 指向实例\n  context.fn()\n  delete context.fn\n}\n\n// 测试:\nconst obj = {\n  value: 'muyy',\n}\n\nfunction testCall() {\n  console.log(this.value)\n}\n\nconst resultCall = testCall.call1(obj) // muyy\n")),(0,i.kt)("h3",null,"传入参数的实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Function.prototype.call2 = function (context) {\n  const arr = Array.prototype.slice.call(arguments, 1)\n\n  context.fn = this // this 指向实例\n  context.fn(...arr)\n  delete context.fn\n}\n\n// 测试:\nconst obj2 = {\n  value: 'muyy',\n}\n\nfunction testCall2(age) {\n  console.log(this.value, age) // muyy 23\n}\n\nconst resultCall = testCall2.call2(obj2, 23)\n")))}c.isMDXComponent=!0},55326:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"错误处理"),(0,i.kt)("h3",null,"捕获和抛出异常的时机"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用第三方库通常需要进行捕获;"),(0,i.kt)("li",{parentName:"ul"},"写给他人使用的第三方库则通常需要抛出相应异常;")),(0,i.kt)("h3",null,"自定义错误类型"),(0,i.kt)("p",null,"下面提供 ",(0,i.kt)("inlineCode",{parentName:"p"},"ES5")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"ES6")," 两种自定义错误类型的写法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// ES6\nclass CustomError extends Error {\n  constructor(message) {\n    super(message)\n    this.name = 'CustomError'\n  }\n}\n\n// ES5\nfunction CustomError(message) {\n  this.name = 'CustomError'\n  this.message = message\n  Error.captureStackTrace(this, CustomError)\n}\n\nCustomError.prototype = new Error()\nCustomError.prototype.constructor = CustomError\n")),(0,i.kt)("h3",null,"记录错误日志"),(0,i.kt)("p",null,"记录错误日志通常使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"<img>")," 标签, 其可以避免跨域, 用法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function logError(msg) {\n  const img = new Image()\n  img.src = `/log?${encodeURIComponent(msg)}`\n}\n")))}c.isMDXComponent=!0},42278:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"事件类型"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"load: window/img/script")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"img 标签上设置 src 属性, 就开始请求资源; script 设置完 src 要加载到 dom 上才开始请求资源。")),(0,i.kt)("h3",null,"事件委托"),(0,i.kt)("p",null,"在 ",(0,i.kt)("inlineCode",{parentName:"p"},"document")," 上使用事件委托, 好处如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"添加时机不受限(在 dom 任何生命周期的里都可添加)"),(0,i.kt)("li",{parentName:"ul"},"添加事件更快"),(0,i.kt)("li",{parentName:"ul"},"内存消耗也更小"),(0,i.kt)("li",{parentName:"ul"},"减少事件的垃圾回收(如果绑定在低层级的标签上, 标签内容消失时, 还需要手动执行清空事件内存)")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/cpreact/issues/13"}),"事件机制优化"))),(0,i.kt)("h4",null,"区分 target 和 currentTarget"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"currentTarget")," 可以用于确定是",(0,i.kt)("inlineCode",{parentName:"li"},"具体元素"),"上触发的事件;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"target")," 用于事件委托;")),(0,i.kt)("p",null,"具体差异可以看以下 ",(0,i.kt)("inlineCode",{parentName:"p"},"demo"),", 当点击 ",(0,i.kt)("inlineCode",{parentName:"p"},"你好")," 时, 控制台输出两个 ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"; 当点击 ",(0,i.kt)("inlineCode",{parentName:"p"},"muyunyun")," 时, 控制台输出一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," 和一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),"<body>\n    <p id=\"test\">你好, <span>muyunyun</span></p>\n    <script>\n        const content = document.getElementById('test')\n        content.addEventListener('click', function(e) {\n            console.log('currentTarget', e.currentTarget, 'target', e.target)\n            console.log(this === e.currentTarget) // true\n            console.log(this === e.target)        // false\n        })\n    <\/script>\n</body>\n")),(0,i.kt)("h3",null,"自定义事件"),(0,i.kt)("p",null,"(笔者认为)自定义事件可以归类到发布订阅模式下。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),"<input id=\"sec\" />\n<script>\n  // 订阅\n  document.getElementById('sec').addEventListener('custom', function (obj) {\n    console.log(obj.detail) // { demo: this ia a demo }\n  })\n\n  // 发布\n  var ev = new CustomEvent('custom', { detail: { demo: 'this is a demo' } })\n  document.getElementById('sec').dispatchEvent(ev)\n<\/script>\n")),(0,i.kt)("h3",null,"stopPropagation vs stopImmediatePropagation"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"stopPropagation: stop propagation ",(0,i.kt)("inlineCode",{parentName:"li"},"from child element to parent element"),";"),(0,i.kt)("li",{parentName:"ul"},"stopImmediatePropagation: stop propagation ",(0,i.kt)("inlineCode",{parentName:"li"},"the remaining same event type in one element"),";")))}c.isMDXComponent=!0},59767:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"script"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<html>\n  <body>\n    ...\n    <script src='a.js'><\/script>\n    <script src='b.js'><\/script>\n  </body>\n</html>\n")),(0,i.kt)("p",null,"这段代码的含义是: 在文档资源执行完毕后, 然后 ",(0,i.kt)("inlineCode",{parentName:"p"},"a.js"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"b.js")," 并发下载(浏览器机制), 顺序执行。"),(0,i.kt)("p",null,"下面这种写法与上面这种写法效果相同:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<html>\n  <head>\n    <script src='a.js' defer><\/script>\n    <script src='b.js' defer><\/script>\n  </head>\n  <body>\n    ...\n  </body>\n</html>\n")),(0,i.kt)("p",null,"注意到关键词 ",(0,i.kt)("inlineCode",{parentName:"p"},"defer"),", 它的特点如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"并发下载, ",(0,i.kt)("inlineCode",{parentName:"li"},"顺序执行"),";"),(0,i.kt)("li",{parentName:"ul"},"渲染完再执行;")),(0,i.kt)("p",null,"再来看如下写法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<html>\n  <head>\n    <script src='a.js' async><\/script>\n    <script src='b.js' async><\/script>\n  </head>\n  <body>\n    ...\n  </body>\n</html>\n")),(0,i.kt)("p",null,"此时的关键词是 ",(0,i.kt)("inlineCode",{parentName:"p"},"async"),", 它的特点如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"并发下载, ",(0,i.kt)("inlineCode",{parentName:"li"},"异步执行"),"(谁先下载好先执行谁);"),(0,i.kt)("li",{parentName:"ul"},"下载完就执行;")))}c.isMDXComponent=!0},41770:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"xss(cross site script)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"内容型 xss: 后端返回前端的模板内容里掺杂脚本"),(0,i.kt)("li",{parentName:"ul"},"反射型 xss: url 里带有脚本"),(0,i.kt)("li",{parentName:"ul"},"dom xss: 脚本通过 dom api 插入页面")),(0,i.kt)("p",null,"防止措施: 正则过滤"),(0,i.kt)("h3",null,"csrf(cross site request forgery)"),(0,i.kt)("p",null,"防止措施: 校验 token"))}c.isMDXComponent=!0},24330:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"红皮书里的细节"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"理念: 尽信书则不如无书")),(0,i.kt)("h3",null,"重载"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Java/C++")," 中是有函数重载的(即相同函数名, 但传的参数不同是当成不同函数的), 而 ",(0,i.kt)("inlineCode",{parentName:"p"},"JavaScript")," 没有函数重载, 旧其本质是因为 ",(0,i.kt)("inlineCode",{parentName:"p"},"JavaScrit")," 中函数是一个对象。函数名类似一个指针。"),(0,i.kt)("h3",null,"label 语句的用法"),(0,i.kt)("p",null,"区分以下两段函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let num = 0\nfor (let i = 0; i < 10; i++) {\n  for (let j = 0; j < 10; j++) {\n    if (i === 5 && j === 5) {\n      break\n    }\n    num++\n  }\n}\nconsole.log(num) // 95\n")),(0,i.kt)("p",null,"使用 label 语句:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let num = 0\noutPoint:\nfor (let i = 0; i < 10; i++) {\n  for (let j = 0; j < 10; j++) {\n    if (i === 5 && j === 5) {\n      break outPoint\n    }\n    num++\n  }\n}\nconsole.log(num) // 55\n")),(0,i.kt)("h3",null,"函数声明和函数表达式"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"以 ",(0,i.kt)("inlineCode",{parentName:"li"},"function")," 开头的是函数声明, 不是以 ",(0,i.kt)("inlineCode",{parentName:"li"},"function")," 开头的则是函数表达式"),(0,i.kt)("li",{parentName:"ul"},"函数声明具有函数声明提升的概念(function decleration hoisting)")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 函数声明\nfunction test() {}\n\n// 函数表达式\nconst test = function() {}\n\n// 函数表达式\n(function(){})()\n")),(0,i.kt)("p",null,"函数声明提升"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var a = function() {\n  test()\n  function test() {\n    console.log('函数声明提升')\n  }\n}\n\na()\n")),(0,i.kt)("h3",null,"属性类型"),(0,i.kt)("p",null,"大体针对 ",(0,i.kt)("inlineCode",{parentName:"p"},"Object.defineProperty()"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"Object.defineProperties")," 这两个 api 来讲的。使用这两个 api 创建的对象里的数据类型和访问器类型默认为 false(Configuble、Enummerable、Writable) 以及 undefined(Value、Set、Get)。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"注意: 在对象上直接定义的属性, Configurable、Enumerable、Writable 默认为 true")),(0,i.kt)("h4",null,"数据类型"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Configurable: 是否能 delete"),(0,i.kt)("li",{parentName:"ul"},"Enumerable"),(0,i.kt)("li",{parentName:"ul"},"Writable"),(0,i.kt)("li",{parentName:"ul"},"Value")),(0,i.kt)("h4",null,"访问器类型"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Configurable"),(0,i.kt)("li",{parentName:"ul"},"Enumerable"),(0,i.kt)("li",{parentName:"ul"},"Writable"),(0,i.kt)("li",{parentName:"ul"},"Get"),(0,i.kt)("li",{parentName:"ul"},"Set")),(0,i.kt)("h3",null,"创建对象的方式"),(0,i.kt)("p",null,"这部分知识点和继承相通, 可联系起来；"),(0,i.kt)("h4",null,"工厂模式"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function createPeople(name, age) {\n  const obj = new Object()\n  obj.name = name\n  obj.age = age\n  return obj\n}\n\ncreatePeople('Jack', 10)\n")),(0,i.kt)("p",null,"缺点: 不知道创造的对象属于什么类"),(0,i.kt)("h4",null,"构造函数模式"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function People(name, age) {\n  this.name = name\n  this.age = age\n  this.sayHi = function() { console.log('hi') }\n}\n\nconst people1 = new People('Jack', 10)\nconst people2 = new People('Lucy', 8)\n\npeople1.sayHi === people2.sayHi // false\n")),(0,i.kt)("p",null,"优点: 能将自定义参数传入构造函数\n缺点: 没有解决公共方法的复用性(是缺点也是优点, 后面有用到这个特性)"),(0,i.kt)("h4",null,"原型链模式"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function People(name, age) {\n  this.name = name\n  this.age = age\n}\n\nPeople.prototype.sayHi = function() { console.log('hi') }\nPeople.prototype.habbit = ['reading']\n\nconst people1 = new People('Jack', 10)\nconst people2 = new People('Lucy', 8)\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"原型模式实际上必须结合构造函数一起使用, 但在这里为了说明原型模式的缺点, 单独列了出来。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 结果\npeople1.sayHi === people2.sayHi // true\n\npeople1.habbit.push('drawing')\npeople2.habbit // ['reading', drawing]\n")),(0,i.kt)("p",null,"优点: 解决公共方法的复用性(sayHi)；\n缺点: 也正是复用性, 所以在一个实例上修改 prototype 上的属性会对其它实例也产生相同影响(habbit)；"),(0,i.kt)("h4",null,"构造函数模式 + 原型链模式"),(0,i.kt)("p",null,"这个模式也是目前被大家最为认可的一种方式, 对上述例子稍作修改:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function People(name, age) {\n  this.name = name\n  this.age = age\n  this.habbit = ['reading']\n}\n\nPeople.prototype.sayHi = function() { console.log('hi') }\n\nconst people1 = new People('Jack', 10)\nconst people2 = new People('Lucy', 8)\n\n// 结果\npeople1.sayHi === people2.sayHi // true\n\npeople1.habbit.push('drawing')\npeople2.habbit // [\"reading\"]\n")),(0,i.kt)("p",null,"现在能直观地看到, people1 和 people2 公用同一个 sayHi 方法, 但是其它的属性 name、age、habbit 都是各自独立拥有的。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"结论: 所谓的构造函数模式 + 原型链模式即公有方法使用原型链模式, 私有方法使用构造函数模式；从而发挥各自的优点。")),(0,i.kt)("h3",null,"继承"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/readES6/%E7%BB%A7%E6%89%BF.md"}),"继承优化"))),(0,i.kt)("h3",null,"const/let 出现的原因"),(0,i.kt)("p",null,"提到块级作用域可以联系到 'const/let 出现的原因' 或者 'var 的缺点'"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 案例 1\nvar a = 1\nvar a\n\na // 1\n\n------------\n\n// 案例 2\nvar a = 1\nvar a = 2\n\na // 2\n")),(0,i.kt)("p",null,"可以看到使用 var 并不会告知之前是否已经声明过该变量, 案例 1 直接无视了后续的声明, 案例 2 后续的声明覆盖了前面的声明, 这样子使用起来便有些混乱了。这也是 const/let 出现的原因, const 专注案例 1 的情形, let 则专注案例 2 的情形。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 案例 1\nconst a = 1\nconst a\n\n// Uncaught SyntaxError: Missing initializer in const declaration\n\n------------\n\n// 案例 2\nlet a = 1\nlet a = 2\n\na // 2\n")),(0,i.kt)("h3",null,"块级作用域"),(0,i.kt)("p",null,"关键字: 匿名函数"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"(function() {\n  // 块级作用域\n})()\n")),(0,i.kt)("p",null,"因为没有引用指向匿名函数, 所以执行完就可以垃圾回收, 不造成内存浪费。"),(0,i.kt)("h3",null,"作用域安全的构造函数"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Safe(value) {\n  if (this instanceof Safe) {\n    this.name = value\n  } else {\n    return new Safe(value)\n  }\n}\n")),(0,i.kt)("p",null,"这种写法不管使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"new Safe()")," 还是 ",(0,i.kt)("inlineCode",{parentName:"p"},"Safe()")," 能保证它们返回结果一致(作用域一致)。"),(0,i.kt)("h3",null,"防篡改对象"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Object.preventExtensions(obj)"),": obj 不能添加属性"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Object.seal(obj)"),": obj 不能添加/删除属性"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Object.freeze(obj)"),": obj 不能添加/删除/修改属性")),(0,i.kt)("h3",null,"防抖和节流函数最简版"),(0,i.kt)("p",null,"防抖: 多次触发事件只执行一次(适用于断续的事件, 比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"click"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"input"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function debounce(fn, time) {\n  let timeout\n  return () => {\n    if (timeout) {\n      clearTimeout(timeout)\n    }\n    timeout = setTimeout({\n      fn\n    }, time)\n  }\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"建议: 面试的时候先写出如上形式, 如果有时间再考虑实现带 ",(0,i.kt)("inlineCode",{parentName:"p"},"immediate")," 形式的防抖函数。")),(0,i.kt)("p",null,"节流: 在指定时间内多次触发事件只执行一次(适用于连续的事件, 比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"scroll"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function throttle(fn, time) {\n  let preTime = 0\n  return () => {\n    const remainTime = time - (Date.now() - preTime)\n    if (remainTime <= 0) {\n      fn()\n      preTime = Date.now()\n    }\n  }\n}\n")))}c.isMDXComponent=!0},50579:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"前端实时协议"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"websocket")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"poll"),"(轮询)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"long-poll"),"(长轮询): 场景: 移动端扫 pc 端二维码, 从而 pc 端完成登入")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"long-poll")," 的含义就是设定一定的超时时间进行挂起, 在这个时间范围内如果收到服务端的返回信息则发给客户端响应报文, 若超过这时间没有服务端的返回信息则再次发起 ",(0,i.kt)("inlineCode",{parentName:"p"},"long-poll")),(0,i.kt)("h3",null,"hybride 的通信"),(0,i.kt)("h4",null,"在 web 中调用 native"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"Native")," 先注册 ",(0,i.kt)("inlineCode",{parentName:"li"},"Schema")," 协议的 URL。在 app 的 JS 代码中请求该 URL 就能调用相应 Schema 中的原生方法"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"addJavaScriptInterface"),": 这个是针对 android 的, 使用这个 api 添加的方法就能在 app 的 JS 代码里进行调用;")),(0,i.kt)("h4",null,"在 native 中调用 JS"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"loadUrl"))))}c.isMDXComponent=!0},75868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"基本类型和引用类型"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"类型种类"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"访问类型"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"存储类型"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"基本类型"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"按值访问"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"栈内存")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"引用类型"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"按引用访问"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"堆内存")))),(0,i.kt)("h4",null,"函数参数是'按值传递'的"),(0,i.kt)("p",null,"此处的按值传递和上面提到的按值访问是两个不一样的概念, 此处指的是给函数传入参数后, 我们操作的是",(0,i.kt)("inlineCode",{parentName:"p"},"复制参数后的值"),"。"),(0,i.kt)("p",null,"①.当传入参数为基本类型时:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const count = 0\n\nfunction add(num) {\n  num = ++num\n  return num\n}\n\nconst result = add(count)\n\nconsole.log(count)  // 0 可以看到传入参数仍然是 0\nconsole.log(result) // 1\n")),(0,i.kt)("p",null,"当 count 作为参数传入函数 add 时, 在栈内存中就会复制一份 count 的值, 我们操作的其实是复制后的这个值。可用下图表示:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/dae97b9a4ef1022ae56e9bf5b9c1c727.jpg-200",alt:null}))),(0,i.kt)("p",null,"②.当传入参数为引用类型时:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const reference = { num: 0 }\n\nfunction add(obj) {\n  obj.num = 1\n  obj = new Object() // ① 此处函数参数的引用发生改变\n  obj.num = 2\n  return obj\n}\n\nconst result = add(reference)\n\nconsole.log(reference) // { num: 1 }\nconsole.log(result)    // { num: 2 }\n")),(0,i.kt)("p",null,"类似的, reference 作为参数传入函数 add 时, 栈内存中会多出一个指向堆内存的值(类似 hash 值)。可用下图表示:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/b12b36ce345d26881486de403b79cbee.jpg",alt:null}))),(0,i.kt)("p",null,"当执行 ",(0,i.kt)("inlineCode",{parentName:"p"},"obj = new Object()")," 实际上是更改了 hash2 的指向(hash1 的指向并没有发生变化), 所以更改函数参数的引用是不会影响到原参数的。"))}c.isMDXComponent=!0},53125:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",null,"探寻 JavaScript 精度问题"),(0,i.kt)("p",null,"阅读完本文可以了解到 ",(0,i.kt)("inlineCode",{parentName:"p"},"0.1 + 0.2")," 为什么等于 ",(0,i.kt)("inlineCode",{parentName:"p"},"0.30000000000000004")," 以及 JavaScript 中最大安全数是如何来的。"),(0,i.kt)("h3",null,"十进制小数转为二进制小数方法"),(0,i.kt)("p",null,"拿 173.8125 举例如何将之转化为二进制小数。"),(0,i.kt)("p",null,"①. 针对整数部分 173, 采取",(0,i.kt)("inlineCode",{parentName:"p"},"除 2 取余, 逆序排列"),";"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"173 / 2 = 86 ... 1\n86 / 2 = 43 ... 0\n43 / 2 = 21 ... 1   ↑\n21 / 2 = 10 ... 1   | 逆序排列\n10 / 2 = 5 ... 0    |\n5 / 2 = 2 ... 1     |\n2 / 2 = 1 ... 0\n1 / 2 = 0 ... 1\n")),(0,i.kt)("p",null,"得整数部分的二进制为 ",(0,i.kt)("inlineCode",{parentName:"p"},"10101101"),"。"),(0,i.kt)("p",null,"②. 针对小数部分 0.8125, 采用",(0,i.kt)("inlineCode",{parentName:"p"},"乘 2 取整, 顺序排列"),";"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"0.8125 * 2 = 1.625  |\n0.625 * 2 = 1.25    | 顺序排列\n0.25 * 2 = 0.5      |\n0.5 * 2 = 1         ↓\n")),(0,i.kt)("p",null,"得小数部分的二进制为 ",(0,i.kt)("inlineCode",{parentName:"p"},"1101"),"。"),(0,i.kt)("p",null,"③. 将前面两部的结果相加, 结果为 ",(0,i.kt)("inlineCode",{parentName:"p"},"10101101.1101"),";"),(0,i.kt)("h3",null,"小心, 二进制小数丢失了精度！"),(0,i.kt)("p",null,"根据上面的知识, 将十进制小数 ",(0,i.kt)("inlineCode",{parentName:"p"},"0.1")," 转为二进制:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"0.1 * 2 = 0.2\n0.2 * 2 = 0.4 // 注意这里\n0.4 * 2 = 0.8\n0.8 * 2 = 1.6\n0.6 * 2 = 1.2\n0.2 * 2 = 0.4 // 注意这里, 循环开始\n0.4 * 2 = 0.8\n0.8 * 2 = 1.6\n0.6 * 2 = 1.2\n...\n")),(0,i.kt)("p",null,"可以发现有限十进制小数 ",(0,i.kt)("inlineCode",{parentName:"p"},"0.1")," 却转化成了无限二进制小数 ",(0,i.kt)("inlineCode",{parentName:"p"},"0.00011001100..."),", 可以看到精度在转化过程中丢失了！"),(0,i.kt)("p",null,"能被转化为有限二进制小数的十进制小数的最后一位必然以 5 结尾(因为只有 0.5 * 2 才能变为整数)。所以十进制中一位小数 ",(0,i.kt)("inlineCode",{parentName:"p"},"0.1 ~ 0.9")," 当中除了 ",(0,i.kt)("inlineCode",{parentName:"p"},"0.5")," 之外的值在转化成二进制的过程中都丢失了精度。"),(0,i.kt)("h3",null,"推导 0.1 + 0.2 为何等于 0.30000000000000004"),(0,i.kt)("p",null,"在 JavaScript 中所有数值都以 IEEE-754 标准的 ",(0,i.kt)("inlineCode",{parentName:"p"},"64 bit")," 双精度浮点数进行存储的。先来了解下 IEEE-754 标准下的",(0,i.kt)("a",u({parentName:"p"},{href:"https://zh.wikipedia.org/wiki/%E9%9B%99%E7%B2%BE%E5%BA%A6%E6%B5%AE%E9%BB%9E%E6%95%B8"}),"双精度浮点数"),"。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/dda7d5b38676abfa13afb344f8a792ed.jpg-300",alt:null}))),(0,i.kt)("p",null,"这幅图很关键, 可以从图中看到 IEEE-754 标准下双精度浮点数由三部分组成, 分别如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"sign(符号): 占 1 bit, 0 表示正, 1 表示负;"),(0,i.kt)("li",{parentName:"ul"},"exponent(指数): 占 11 bit, 表示范围;"),(0,i.kt)("li",{parentName:"ul"},"mantissa(尾数): 占 52 bit, 表示精度, 多出的末尾如果是 1 需要进位;")),(0,i.kt)("p",null,"推荐阅读 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/camsong/blog/issues/9"}),"JavaScript 浮点数陷阱及解法"),", 阅读完该文后可以了解到以下公式的由来。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5c268e4bd6e0bf2466598d9d5cb58a16.jpg-200",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"精度位总共是 53 bit, 因为用科学计数法表示, 所以首位固定的 1 就没有占用空间。即公式中 (M + 1) 里的 1。另外公式里的 1023 是 2^11 的一半。小于 1023 的用来表示小数, 大于 1023 的用来表示整数。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"指数可以控制到 2^1024 - 1, 而精度最大只达到 2^53 - 1, 两者相比可以得出 JavaScript 实际可以精确表示的数字其实很少。")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"0.1")," 转化为二进制为 ",(0,i.kt)("inlineCode",{parentName:"p"},"0.0001100110011..."),", 用科学计数法表示为 ",(0,i.kt)("inlineCode",{parentName:"p"},"1.100110011... x 2^(-4)"),", 根据上述公式, ",(0,i.kt)("inlineCode",{parentName:"p"},"S")," 为 ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),"(1 bit), ",(0,i.kt)("inlineCode",{parentName:"p"},"E")," 为 ",(0,i.kt)("inlineCode",{parentName:"p"},"-4 + 1023"),", 对应的二进制为 ",(0,i.kt)("inlineCode",{parentName:"p"},"01111111011"),"(11 bit), ",(0,i.kt)("inlineCode",{parentName:"p"},"M")," 为 ",(0,i.kt)("inlineCode",{parentName:"p"},"1001100110011001100110011001100110011001100110011010"),"(52 bit, 另外注意末尾的进位), ",(0,i.kt)("inlineCode",{parentName:"p"},"0.1")," 的存储示意图如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5b7c0dcc0b1770b6eed238e288eb4c0e.jpg-300",alt:null}))),(0,i.kt)("p",null,"同理, ",(0,i.kt)("inlineCode",{parentName:"p"},"0.2")," 转化为二进制为 ",(0,i.kt)("inlineCode",{parentName:"p"},"0.001100110011..."),", 用科学计数法表示为 ",(0,i.kt)("inlineCode",{parentName:"p"},"1.100110011... x 2^(-3)"),", 根据上述公式, ",(0,i.kt)("inlineCode",{parentName:"p"},"E")," 为 ",(0,i.kt)("inlineCode",{parentName:"p"},"-3 + 1023"),", 对应的二进制为 ",(0,i.kt)("inlineCode",{parentName:"p"},"01111111100"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"M")," 为 ",(0,i.kt)("inlineCode",{parentName:"p"},"1001100110011001100110011001100110011001100110011010"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"0.2")," 的存储示意图如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/cb0ef89aa0ed6e8d32b90d1a29cfc9e1.jpg-300",alt:null}))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"0.1 + 0.2")," 即 2^(-4) x 1.1001100110011001100110011001100110011001100110011010 与 2^(-3) x 1.1001100110011001100110011001100110011001100110011010 之和"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 计算过程\n0.00011001100110011001100110011001100110011001100110011010\n0.0011001100110011001100110011001100110011001100110011010\n\n// 相加得\n0.01001100110011001100110011001100110011001100110011001110\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"0.01001100110011001100110011001100110011001100110011001110")," 转化为十进制就是 ",(0,i.kt)("inlineCode",{parentName:"p"},"0.30000000000000004"),"。验证完成!"),(0,i.kt)("h3",null,"JavaScript 的最大安全数是如何来的"),(0,i.kt)("p",null,"根据双精度浮点数的构成, 精度位数是 ",(0,i.kt)("inlineCode",{parentName:"p"},"53 bit"),"。安全数的意思是在 ",(0,i.kt)("inlineCode",{parentName:"p"},"-2^53 ~ 2^53")," 内的整数(不包括边界)与唯一的双精度浮点数互相对应。举个例子比较好理解:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Math.pow(2, 53) === Math.pow(2, 53) + 1 // true\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Math.pow(2, 53)")," 竟然与 ",(0,i.kt)("inlineCode",{parentName:"p"},"Math.pow(2, 53) + 1")," 相等！这是因为 Math.pow(2, 53) + 1 已经超过了尾数的精度限制(53 bit), 在这个例子中 ",(0,i.kt)("inlineCode",{parentName:"p"},"Math.pow(2, 53)")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"Math.pow(2, 53) + 1")," 对应了同一个双精度浮点数。所以 ",(0,i.kt)("inlineCode",{parentName:"p"},"Math.pow(2, 53)")," 就不是安全数了。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"最大的安全数为 ",(0,i.kt)("inlineCode",{parentName:"p"},"Math.pow(2, 53) - 1"),", 即 ",(0,i.kt)("inlineCode",{parentName:"p"},"9007199254740991"),"。")),(0,i.kt)("h3",null,"业务中碰到的精度问题以及解决方案"),(0,i.kt)("p",null,"了解 JavaScript 精度问题对我们业务有什么帮助呢？举个业务场景: 比如有个订单号后端 Java 同学定义的是 long 类型, 但是当这个订单号转换成 JavaScript 的 Number 类型时候精度会丢失了, 那没有以上知识铺垫那就理解不了精度为什么会丢失。"),(0,i.kt)("p",null,"解决方案大致有以下几种:"),(0,i.kt)("p",null,"1.针对大数的整数可以考虑使用 BigInt 类型(目前在 ",(0,i.kt)("del",{parentName:"p"},"stage 3")," stage4 阶段)；"),(0,i.kt)("p",null,"2.使用 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MikeMcl/bignumber.js"}),"bigNumber"),", 它的思想是转化成 string 进行处理, 这种方式对性能有一定影响;"),(0,i.kt)("p",null,"3.可以考虑使用 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/dcodeIO/long.js"}),"long.js"),", 它的思想是将长度为 64 位的 long 类型值转化成两个精度为 32 位的双精度类型的值。"),(0,i.kt)("p",null,"4.针对小数的话可以使用 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/nefe/number-precision"}),"number-precision"),", 该库将小数转为整数后再作处理;"),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://justjavac.com/codepuzzle/2012/11/11/codepuzzle-float-who-stole-your-accuracy.html"}),"代码之谜系列")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/camsong/blog/issues/9"}),"JavaScript 浮点数陷阱及解法"),": 推荐阅读"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.zhihu.com/question/29010688"}),"javascript 里最大的安全的整数为什么是 2 的 53 次方减一")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://www.binaryconvert.com/convert_double.html"}),"IEEE-754 进制转换图生成"),": 工具"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.sojson.com/hexconvert.html"}),"在线进制转换工具"),": 工具")))}c.isMDXComponent=!0},11397:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"数量限定符"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"数量限定符"),(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"解释"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"x+")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"1 或多个")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"x*")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"0 或多个")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"x?")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"0 或 1 个")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"x{n}")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"n 个")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"x{n,}")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"至少 n 个")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"x{n, m}")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"n 至 m 个, 遵循贪婪原则, 会尽可能匹配多个; 如果在后面加个 ? (如 x{n, m}?), 遵循非贪婪原则")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"贪婪可以理解成从后往前遍历, 非贪婪可以理解为从前向后遍历")),(0,i.kt)("h3",null,"字符限定符"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"字符限定符"),(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"解释"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"\\d")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"匹配一个数字字符, ","[0-9]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"\\D")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"匹配一个非数字字符, ",(0,i.kt)("sup",u({parentName:"td"},{id:"fnref-0-9"}),(0,i.kt)("a",u({parentName:"sup"},{href:"#fn-0-9",className:"footnote-ref"}),"0-9")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"\\w")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"匹配单词字符(包括数字下划线在内), ","[0-9A-Za-z_]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"\\W")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"匹配非单词字符(包括数字下划线在内), ",(0,i.kt)("sup",u({parentName:"td"},{id:"fnref-0-9a-za-z_"}),(0,i.kt)("a",u({parentName:"sup"},{href:"#fn-0-9a-za-z_",className:"footnote-ref"}),"0-9A-Za-z_")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"\\s")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"匹配空白字符(空格、回车、制表符)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"\\S")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"匹配非空白字符")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},".")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"匹配",(0,i.kt)("inlineCode",{parentName:"td"},"除换行符(\\n)以外"),"的任何单个字符")))),(0,i.kt)("p",null,"根据使用方法可以进行如下分类:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"使用"),(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"解释"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"[0-9a-zA-Z]")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"范围字符")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"[abcd]")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"任意字符")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"[^a-z]")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"范围字符")))),(0,i.kt)("h3",null,"定位符"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"定位符"),(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"解释"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"^")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"开头标识")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"$")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"结尾标识")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"\\b")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"单词边界")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),(0,i.kt)("inlineCode",{parentName:"td"},"\\B")),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"非单词边界")))),(0,i.kt)("h3",null,"转义符"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"\\"),": 用于匹配某些特殊字符"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"/^(\\d)\\1+$/.test(333), 比如这里的 \\1 表示第一个括号里的值, 达到判断重复数字的效果")),(0,i.kt)("h3",null,"选择匹配符"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"|"),": 可以匹配多个规则"),(0,i.kt)("h3",null,"特殊用法"),(0,i.kt)("p",null,"| 特殊用法 | 解释 |\n| :------- | :--- |◊------ |\n| ",(0,i.kt)("inlineCode",{parentName:"p"},"?=")," 正向预查 |   匹配以指定内容结束的字符串   |\n| ",(0,i.kt)("inlineCode",{parentName:"p"},"?!")," 负向预查 | 匹配不是以指定内容结束的字符串 |\n|      ",(0,i.kt)("inlineCode",{parentName:"p"},"?"),"      | 不把选择匹配符的内容放到缓冲区 |"),(0,i.kt)("h3",null,"正则表达式在 JavaScript 下的使用方法"),(0,i.kt)("p",null,"在 JavaScript 下使用正则表达式, 有两种方法:"),(0,i.kt)("p",null,"第一种方法: 使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"RegExp")," 类"),(0,i.kt)("p",null,"提供的方法有: (正则表达式在前面)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"test(str)"),": 在字符串匹配是否有匹配模式的字符串, 返回 ",(0,i.kt)("inlineCode",{parentName:"li"},"true/false")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"exec"),": 如果正则表达式中有子表达式, 使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"exec")," 方法, 返回 ",(0,i.kt)("inlineCode",{parentName:"li"},"result[0] = 匹配结果, result[1] = 子表达式 1 的匹配结果 ……"))),(0,i.kt)("p",null,"第二种方法是: 使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"String")," 类"),(0,i.kt)("p",null,"提供的方法有: (正则表达式在后面)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"search")," 返回匹配模式的字符串出现的位置, 如果没有, 返回 -1;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"match")," 返回匹配模式匹配到的字符串, 如果有, 返回数组, 无, 返回 null;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"replace")," 将匹配模式匹配到的字符串进行替换;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"split")," 将字符串已匹配模式为分隔符进行字符串分隔, 返回数组;")),(0,i.kt)("h3",null,"分析"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"('&ab=').match(/([^&]+)=/g) // [\"ab=\"]\n")),(0,i.kt)("p",null,"分析: ^ 一般表示开头, 但是注意此处中括号里的 ",(0,i.kt)("inlineCode",{parentName:"p"},"^")," 表示非"),(0,i.kt)("h3",null,"i、g、m"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"/i: 忽略大小写"),(0,i.kt)("li",{parentName:"ul"},"/g: 全局"),(0,i.kt)("li",{parentName:"ul"},"/m: 多行查找")),(0,i.kt)("h3",null,"update"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tc39/proposal-regexp-lookbehind"}),"?<="),": now support match from right to left."))}c.isMDXComponent=!0},53242:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Boolean"),(0,i.kt)("p",null,"A quick tip to remove all falsy (false, null, undefined, 0, NaN or an empty string) items out of an array:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'var a=[1,2,"b",0,{},"",NaN,3,undefined,null,5]\nvar b=a.filter(Boolean); // [1,2,"b",{},3,5]\n')),(0,i.kt)("p",null,"Since Boolean constructor is also a function, it returns either true for 'truthy' argument or false for 'falsy' argument."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Boolean(0) // false\nBoolean(true) // true\nBoolean(1) // true\nBoolean("") // false\nBoolean("false") // true. "false" is a regular, non-empty string\n')),(0,i.kt)("p",null,"And writing"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"b=a.filter(Boolean)\n")),(0,i.kt)("p",null,"is actually the same as writing:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"b = a.filter(function (x) { return Boolean(x) })\n")),(0,i.kt)("h3",null,"隐式转化"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"符号计算"),(0,i.kt)("li",{parentName:"ul"},"表达式"),(0,i.kt)("li",{parentName:"ul"},"console.log")),(0,i.kt)("p",null,"易错告警:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"'' ? 1 : 0")," 结果是 0, 记住了 ",(0,i.kt)("inlineCode",{parentName:"p"},"''")," 隐式转化 boolean 为 false。"))}c.isMDXComponent=!0},99240:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"此文档为 ",(0,i.kt)("inlineCode",{parentName:"p"},"winter")," 老师极客时间摘要笔记"),(0,i.kt)("h3",null,"学习方法"),(0,i.kt)("p",null,"以下也是需改进的点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"构建学习架构图"),(0,i.kt)("li",{parentName:"ul"},"追本溯源(比如看 mdn)")))}c.isMDXComponent=!0},16771:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"移动端数据图表组件调研",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"chart.js",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"文档: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/chartjs/Chart.js"}),"chartjs")),(0,i.kt)("li",{parentName:"ul"},"github 48000+ star"),(0,i.kt)("li",{parentName:"ul"},"类型：6 种图表类型（折线图，条形图，雷达图，饼图，柱状图和极地区域区）"),(0,i.kt)("li",{parentName:"ul"},"特性：颜色，字体，边框和它们的尺寸都可以定制，图表可以动画的形式加载，非常炫"),(0,i.kt)("li",{parentName:"ul"},"兼容：支持 canvas 的所有现代浏览器和大部分手机浏览器，自动针对 retina 屏幕做缩放"),(0,i.kt)("li",{parentName:"ul"},"其他：图表如果使用动画效果，在 PC 端流畅，但是在移动端效果产生抖动延迟现象；如果不使用动画效果在移动端则正常显示"),(0,i.kt)("li",{parentName:"ul"},"分析：移动端表现佳，课通过自适应宽度来使得图表宽度与设备屏幕适配。适当缩小图表，合理展示数据。兼容能力强，API 使用不复杂。"))),(0,i.kt)("li",{parentName:"ul"},"highcharts",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"文档: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/highcharts/highcharts"}),"hcharts")),(0,i.kt)("li",{parentName:"ul"},"技术: 基于 SVG"),(0,i.kt)("li",{parentName:"ul"},"类型：直线图、曲线图、面积图、柱状图、饼图、散点图等多达 18 种不同类型的图表"),(0,i.kt)("li",{parentName:"ul"},"其他：支持移动端，根据页面宽度定义图表宽度。需要商业授权"))),(0,i.kt)("li",{parentName:"ul"},"F2",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"文档: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/antvis/f2/"}),"F2"))))))),(0,i.kt)("p",null,"比较当前社区图表库下来, 在移动端表现可以的有 chart.js(移动端展现 ok, 貌似有动画的场景表现欠佳)、hightcharts(需商用授权)、F2(图形语法上手成本高), 因为现在业务是基于 f2(",(0,i.kt)("a",u({parentName:"p"},{href:"https://f2.antv.vision/zh/examples/basic"}),"https://f2.antv.vision/zh/examples/basic"),") 开发的, 因此现在的思路是封装 F2 为 React 组件, 类似社区的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://bizcharts.net/products/bizGoblin/api/chart"}),"bizGoblin"),", ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/ant-design/ant-design-mobile-chart"}),"https://github.com/ant-design/ant-design-mobile-chart"),"。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.yuque.com/antv/g2-docs/tutorial-renderers"}),"选择 Canvas 还是 SVG")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.yuque.com/antv"}),"antv 语雀")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://f2.antv.vision/zh/examples/candlestick/basic"}),"antv f2")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://v2-pro.ant.design/components/charts-cn"}),"ant design pro")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://bizcharts.net/product/bizcharts/category/7/page/12"}),"Biz Charts"))))}c.isMDXComponent=!0},52935:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Canvas"),(0,i.kt)("p",null,"因为 Canvas 相对更加底层, 在处理图像交互上更具优势, 也因此目前市面上看到的 Web 端图表库基本都是基于 Canvas 进行绘制的。"),(0,i.kt)("h3",null,"API"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"线性渐变"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"createLinearGradient(x0: number, y0: number, x1: number, y1: number)"),(0,i.kt)("li",{parentName:"ul"},"addColorStop(offset: number, color: string): void"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"径向渐变"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"createRadialGradient(x0: number, y0: number, r0: number, x1: number, y1: number, r1: number)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"路径"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"开始一段新路径: ctx.beginPath()"),(0,i.kt)("li",{parentName:"ul"},"开始: ctx.moveTo(x, y)"),(0,i.kt)("li",{parentName:"ul"},"经过: ctx.lineTo(x, y)"),(0,i.kt)("li",{parentName:"ul"},"路径为线: ctx.stroke()"),(0,i.kt)("li",{parentName:"ul"},"设置线的颜色: ctx.strokeStyle = gradient"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"曲线"),": ctx.bezierCurveTo(cplx, cp1y, cp2x, cp2y, x, y)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"圆"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"ctx.arc(x, y, radius, startAngle, endAngle ","[, counterclockwise]",")"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"方形"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"ctx.fillRect(x, y, width, height)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"画布的变换"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"注意: 画布变换的操作需要前置。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"画布平移"),": ctx.translate(x, y)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"画布旋转"),": ctx.rotate(Math.PI / 180 * 10): 旋转 10°"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"画布缩放"),": ctx.scale(x, y)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"沿原点镜像: ctx.scale(-1, -1)"),(0,i.kt)("li",{parentName:"ul"},"沿 x 轴镜像: ctx.scale(1, -1)"),(0,i.kt)("li",{parentName:"ul"},"沿 y 轴镜像: ctx.scale(-1, 1)"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"状态"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"ctx.save()"),(0,i.kt)("li",{parentName:"ul"},"ctx.restore()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"文字"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"在 (x, y) 位置绘制文字: ctx.fillText('文字', x, y)"),(0,i.kt)("li",{parentName:"ul"},"测量文字: ctx.measureText('文字')")))))}c.isMDXComponent=!0},48556:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"折线图绘制思路"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"绘制坐标轴",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"利用 Canvas 画布缩放的能力")))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/3cddc860aa1d667d3e80744702fc8d1f.jpg-muyy",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const createCoordinateSystem = () => {\n  context.scale(1, -1)\n  context.translate(0, -height)\n\n  context.beginPath()\n  context.moveTo(0, 0)\n  context.lineTo(width, 0)\n  context.stroke()\n  context.strokeStyle = '#000'\n\n  context.beginPath()\n  context.moveTo(0, 0)\n  context.lineTo(0, height)\n  context.stroke()\n  context.strokeStyle = '#000'\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"绘制平行 X 轴的线条")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/978bbe881bdf396138967c982cefc793.jpg-muyy",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"for (let i = 0; i < 6; i++) {\n  context.translate(0, 30)\n  createLine(0, 0, width, 0)\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"绘制刻度")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/24cffb873d13e569b67340ab474dc2bf.jpg-muyy",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"context.save()\n// 绘制坐标轴\n...\n\ncontext.restore()\nfor (let i = 0; i < 8; i++) {\n  createLine(0, 0, 0, -5)\n  context.lineWidth = 0.2\n  context.translate(45, 0)\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"绘制 x 轴下方文字")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/669b57db2cdd078a375c1ba871c35cf1.jpg-muyy",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 绘制 x 轴下方文字\nctx.save()\nctx.scale(1, -1)\nfor (let i = 0; i < xArr.length; i++) {\n  ctx.fillStyle = '#000'\n  if (i === 0) {\n    const textWidth = ctx.measureText(xArr[i])\n    ctx.translate(perXLength / 2 - textWidth.width / 2, 15)\n  } else {\n    ctx.translate(perXLength, 0)\n  }\n  ctx.fillText(xArr[i], 0, 0)\n}\nctx.restore()\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"绘制折线与圆")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 绘制折线\nctx.save()\nfor (let i = 0; i < xArr.length - 1; i++) {\n  ctx.fillStyle = '#000'\n  const curPointX = (1 / 2 + i) * perXLength\n  const curPointY = valueArr[i]\n  const nextPointX = (1 / 2 + i + 1) * perXLength\n  const nextPointY = valueArr[i + 1]\n  this.drawLine({ ctx: ctx, x0: curPointX, y0: curPointY, x1: nextPointX, y1: nextPointY })\n}\nctx.restore()\n\n// 绘制圆\nctx.save()\nfor (let i = 0; i < xArr.length - 1; i++) {\n  ctx.fillStyle = '#000'\n  const pointX = (1 / 2 + i + 1) * perXLength\n  const pointY = valueArr[i + 1]\n  ctx.beginPath()\n  ctx.arc(pointX, pointY, 2, 0, Math.PI * 2, true)\n  ctx.stroke()\n}\nctx.restore()\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"todo: 平滑的折线图: ",(0,i.kt)("a",u({parentName:"p"},{href:"https://juejin.cn/post/6950684708443258894#heading-23"}),"https://juejin.cn/post/6950684708443258894#heading-23"))))}c.isMDXComponent=!0},20219:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",null,"计算机组成原理"),(0,i.kt)("h2",null,"计算机的发展历史"),(0,i.kt)("p",null,"计算机发展的四个阶段"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/20f4d05194338094b21defa7977c357e.jpg",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"第一阶段: 电子管计算机")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/981859a7e9a5f642c802559466682ac1.jpg-300",alt:null}))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/fdb522e3b98b19ec07dac13b147ad5a3.jpg-300",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"第二阶段: 晶体管计算机")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/3740ffbc8eedba24e33c53ce4f59b32e.jpg-400",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"第三阶段: 集成电路计算机")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/4afca0d86589e900ffd34193b27261de.jpg-300",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"第四阶段: 超大规模集成电路计算机")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/fbbcdc55d25e0266ff29a3154496c5d0.jpg",alt:null}))),(0,i.kt)("h2",null,"现代计算机的结构"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/fe5d989d5af9d9fa2798ce1f78e303b7.jpg-400",alt:null}))),(0,i.kt)("h2",null,"计算机的层次与编程语言"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"编译型语言:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"常见语言: C、C++、Object-C、Golang;"),(0,i.kt)("li",{parentName:"ul"},"经过编译器将高级语言转化生成为计算机实际执行的语言;"))),(0,i.kt)("li",{parentName:"ul"},"解释型语言:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"常见语言: JavaScript、Python、Php、Perl、Lua;"),(0,i.kt)("li",{parentName:"ul"},"经过解释器(低级语言写的程序)转换为实际执行的语言;"))),(0,i.kt)("li",{parentName:"ul"},"编译 + 解释型语言:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Java、C#、Kotlin;")))),(0,i.kt)("p",null,"以 C 语言和 JavaScript 语言为例, C 语言要编写完整, 然后使用编译器编译成一个二进制文件才可以执行, 在编译的过程会把整个程序进行彻底的翻译和优化, 再输出平台可以直接运行的二进制文件。而 JavaScript 是在浏览器 V8 引擎解释执行的, 写好直接就可以运行了, 没有经过编译阶段, 直接是把 JavaScript 代码一句一句解释执行的。"),(0,i.kt)("h2",null,"计算机的计算单位"),(0,i.kt)("p",null,"容量单位"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5cb5ecfcdb8dc250e1c981268d0b990d.jpg",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"为什么网上买的移动硬盘 500 G, 格式化之后只有 465 G 了?")),(0,i.kt)("p",null,"答: 因为硬盘生产商一般用 10^3 来便于沟通交流。"),(0,i.kt)("p",null,"可以进行如下换算得出:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"500 * (1024^3) / (1000^3) ≈ 465\n")),(0,i.kt)("p",null,"速度单位"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"为什么电信拉的 100M 光纤, 测试峰值速度只有 12M 每秒。")),(0,i.kt)("p",null,"因为网络常用单位是 Mbps;"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"100M/s === 100Mbit/s === (100/8)B/s\n")),(0,i.kt)("p",null,"Read To: 3 - 6"))}c.isMDXComponent=!0},85728:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"INHERITED AND NON-INHERITED IN CSS"),(0,i.kt)("p",null,"When I look up css properties in MDN's specifications section, there are some properties in it and it seems unfamiliar to me. So I try to find out some of them today."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/b22bcdb94d354d3f301cae7997d9cd17.jpg",alt:null}))),(0,i.kt)("p",null,"The follow list try to give one word to specify the meaning of them."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Initial value: Specify the CSS property's default value;"),(0,i.kt)("li",{parentName:"ul"},"Applies to: Specify which elements to apply to;"),(0,i.kt)("li",{parentName:"ul"},"Inherited: Specify the CSS property is inherited or non-inherited;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.w3.org/TR/css3-mediaqueries/"}),"Media"),": Specify how a document is to be presented on different media;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value"}),"Computed value"),": The CSS property that is transferred from parent to child;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://drafts.csswg.org/web-animations/#animation-type"}),"Animation type")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.mozilla.org/en-US/docs/Glossary/Canonical_order"}),"Canonical order"),": Some CSS properties(font、background...) have their own CSS property value order.")),(0,i.kt)("p",null,"And this article is to discuss the topic about the knowledge of inherited and non-inherited."),(0,i.kt)("h3",null,"Initial value between inherited and non-inherited"),(0,i.kt)("p",null,"The initial value of a CSS property is its default value."),(0,i.kt)("p",null,"The Initial value has two different behavior between ",(0,i.kt)("inlineCode",{parentName:"p"},"inherited properties")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"non-inherited properties"),"."),(0,i.kt)("p",null,"For ",(0,i.kt)("inlineCode",{parentName:"p"},"inherited properties"),", the initial value is ",(0,i.kt)("inlineCode",{parentName:"p"},"used on the root element only"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<span style="color: red">\n  hello, <em>CSS</em>\n</span>\n')),(0,i.kt)("p",null,"The result is the color of both ",(0,i.kt)("inlineCode",{parentName:"p"},"span")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"em")," element are red. Because the color is an inherited property, the element will get the color property from the parent recursively until to document."),(0,i.kt)("p",null,"For ",(0,i.kt)("inlineCode",{parentName:"p"},"non-inherited properties"),", the initial value is ",(0,i.kt)("inlineCode",{parentName:"p"},"used on every element"),". When no value for a non-inherited property has been specified on an element, the element gets the initial value directly."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<span style="border: 1px solid black">\n  hello, <em>CSS</em>\n</span>\n')),(0,i.kt)("p",null,"The result is the border is only effected on ",(0,i.kt)("inlineCode",{parentName:"p"},"span")," element, not ",(0,i.kt)("inlineCode",{parentName:"p"},"em"),". Because the border is a non-inherited property, and there is no border property specified on the em, so the em get the border's initial value ",(0,i.kt)("inlineCode",{parentName:"p"},"none"),"."),(0,i.kt)("p",null,"It mentioned much times about inherited value and non-inherited value above, and now we sort out css properties."),(0,i.kt)("h3",null,"Inherited Type"),(0,i.kt)("p",null,"I've collected some inherited types in css, they are listed as follow:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Font Type"),": font-style、font-variant、font-weight、font-stretch、font-size、font-family、color、line-height;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Space Type"),": letter-spacing、word-spacing、white-space;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Letter Type"),": text-align、text-indent、text-shadow、text-transform;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"List Type"),": list-style、list-style-type、list-style-position;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Others"),": visibility、cursor;")),(0,i.kt)("h3",null,"Non-Inherited Type"),(0,i.kt)("p",null,"In the opposite of inherited type, the non-inherited types are listed as follow:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Layout Type"),": float、position、left、right、top、bottom、z-index、display"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Box Type"),": width、max-width、min-width、height、max-height、min-height、margin、padding、border;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Background Type"),": background-size、background-image、background-clip、background-color、background-origin、background-position、background-repeat;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Others"),": overflow、text-overflow、vertical-align;")),(0,i.kt)("h3",null,"todo"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"inherit"),(0,i.kt)("li",{parentName:"ul"},"initial"),(0,i.kt)("li",{parentName:"ul"},"unset"),(0,i.kt)("li",{parentName:"ul"},"revert")),(0,i.kt)("h3",null,"Recap"),(0,i.kt)("p",null,"These section introduces the inherited concept in CSS, and distinguish some inherited type and some non-inherited type from css properties. Hope it's helpful for you."))}c.isMDXComponent=!0},18739:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"针对目前阶段 CSS 的学习"),(0,i.kt)("p",null,"方案: 使用 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://codepen.io/MuYunyun/pens/public/"}),"codepen")," 进行整理相应 demo。"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","整理相应的 ",(0,i.kt)("inlineCode",{parentName:"li"},"CSS")," 揭秘中觉得可以用得到的组件"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","css 属性顺序调研",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"比如 ",(0,i.kt)("inlineCode",{parentName:"li"},"transform: translate(-50%, -50%) rotate(50deg)")," 与 ",(0,i.kt)("inlineCode",{parentName:"li"},"transform: rotate(50deg) translate(-50%, -50%)")),(0,i.kt)("li",{parentName:"ul"},"其它属性 todo")))))}c.isMDXComponent=!0},91810:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"css 是什么"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"css(cascading style sheet)")," 层叠样式表。"),(0,i.kt)("h3",null,"盒模型"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"标准模型(默认)"),(0,i.kt)("li",{parentName:"ul"},"IE 模型")),(0,i.kt)("p",null,"由 ",(0,i.kt)("inlineCode",{parentName:"p"},"box-sizing")," 属性来控制"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"content-box(默认)"),(0,i.kt)("li",{parentName:"ul"},"border-box")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"它们的核心区别是是否将 border 以及 padding 算入 content 的 width 中(在设置了 width 的前提下)。")),(0,i.kt)("h3",null,"超过行内容显示省略号"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n")),(0,i.kt)("h3",null,"verticle-align"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"verticle-align: top")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://blog.csdn.net/lulujiajiawenwen/article/details/8245201"}),"行高与基线"))),(0,i.kt)("h3",null,"样式表"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"内联样式表")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),'.font {\n  color: red\n}\n\n<div class="font">hello, cpreact</div>\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"外联样式表")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),'<link rel="stylesheet" href="">\n')),(0,i.kt)("h3",null,"边框"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"圆角效果 ",(0,i.kt)("inlineCode",{parentName:"li"},"border-radius"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  border-radios: 100px / 10px (水平半径 100, 垂直半径 10)\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"阴影 ",(0,i.kt)("inlineCode",{parentName:"li"},"box-shadow"),": X 轴偏移量 Y 轴偏移量 ","[阴影模糊半径][阴影扩展半径]"," ","[阴影颜色][投影方式]",";（阴影模糊半径：只能是正值；阴影扩展半径：可以是正负值）（自带边框）")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"外阴影 x 和 y(正值)出现在右下；内阴影 x 和 y(正值)出现在左上;")),(0,i.kt)("h3",null,"input 的宽度 —— 并不是给元素设置 display:block 就会自动填充父元素宽度。input 就是个例外，其默认宽度取决于 size 特性的值。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://user-gold-cdn.xitu.io/2019/7/29/16c3d4f6fef0a871?imageslim",alt:null}))),(0,i.kt)("h3",null,"object-fit"),(0,i.kt)("p",null,"It's a css property that can be eaqual to the background-size, it has five types:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"fill"),": default"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"contain")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cover"),": used in imagePicker"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"none")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"scale-down"),": if the image's size is imaller than box, it'll keep the image's size, otherwise it'll equal to contain. You can look for it ",(0,i.kt)("a",u({parentName:"li"},{href:"https://codepen.io/chrisnager/pen/XJgJqN"}),"here"))),(0,i.kt)("h3",null,"style 里的样式过长该怎么办"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"第一步: ",(0,i.kt)("inlineCode",{parentName:"li"},"$0.innerText"),";"),(0,i.kt)("li",{parentName:"ul"},"第二步: 点击 ",(0,i.kt)("inlineCode",{parentName:"li"},"Show more(221 kB)"),";")),(0,i.kt)("h3",null,"如何覆盖伪元素的样式(可作面试题)"))}c.isMDXComponent=!0},92150:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"font 属性"),(0,i.kt)("p",null,"使用 font 属性时: ",(0,i.kt)("inlineCode",{parentName:"p"},"font-size")," 以及 ",(0,i.kt)("inlineCode",{parentName:"p"},"font-family")," 属性在尾部必填而且必须得照这个顺序。其它可选属性还有: font-weight、font-style 等。此外还能使用 line-height 属性, 使用 line-height 的格式为 font-size/line-height。"),(0,i.kt)("h3",null,"和字体相关的 css"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"连字符断行: ",(0,i.kt)("inlineCode",{parentName:"li"},"hyphens: auto")),(0,i.kt)("li",{parentName:"ul"},"插入换行: 替代 ",(0,i.kt)("inlineCode",{parentName:"li"},"<br />")," 可以使用如下使用:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo::after {\n  content: '/A';    /* 表示 Unicode 里的 `0x000A`/ */\n  white-space: pre; /* 保留空格 */\n}\n")),(0,i.kt)("h3",null,"字体单位"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"相对视窗",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"1vw"),": 视窗宽度的 1/100, 100 vw 等于整个视窗宽度;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"1vh"),": 视窗高度的 1/100, 100 vh 等于整个视窗高度;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"1vmin"),": 取视窗宽度和视窗高度最小值的 1/100;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"1vmax"),": 取视窗宽度和视窗高度最大值的 1/100;"))),(0,i.kt)("li",{parentName:"ul"},"相对 ",(0,i.kt)("inlineCode",{parentName:"li"},"font-size"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"rem"),": 相对 ",(0,i.kt)("inlineCode",{parentName:"li"},"html")," 中的 ",(0,i.kt)("inlineCode",{parentName:"li"},"font-size")," 进行转换(如果根元素的 font-size 小于 12px 则以 12px 来计算);"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"em"),": 相对父元素(或者自己层级)的 ",(0,i.kt)("inlineCode",{parentName:"li"},"font-size")," 进行转换; font-size: 1em 等价于 font-size: 100%;")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"px")," 与 ",(0,i.kt)("inlineCode",{parentName:"p"},"vw")," 单位间的转换:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"1vw = document.documentElement.clientWidth(px) / 100\n(100 / document.documentElement.clientWidth)vw = 1px\n")),(0,i.kt)("h4",null,"rem 的使用"),(0,i.kt)("p",null,"通常将 ",(0,i.kt)("inlineCode",{parentName:"p"},"1rem")," 设置为 ",(0,i.kt)("inlineCode",{parentName:"p"},"100px"),", (经过测试 10px/1px 也是可以的)"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"相关测试"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <style>\n        html {\n            font-size: calc(100vw / 375)\n        }\n    </style>\n</head>\n\n<body>\n    <div class="test" style="font-size: 16rem;margin-top: 16rem;padding: 16rem">测试</div>\n</body>\n\n</html>\n'))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),"html {\n  font-size: calc(100vw / 3.75) /* 表示在 1 dpr 屏上, 此时 1 rem 相当于是 100px */\n}\n")),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","阅读到文本行的斑马条纹")))}c.isMDXComponent=!0},7371:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"文本属性"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"text-indent"),": 文本缩进。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"注意只能用于块级元素;"),(0,i.kt)("li",{parentName:"ul"},"子元素使用百分数等相关声明值的时候孙子元素继承的是具体值;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"text-align"),": 对齐方式。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"有 ",(0,i.kt)("inlineCode",{parentName:"li"},"left、center、right、justify")," 这几个属性;"),(0,i.kt)("li",{parentName:"ul"},"justify 的含义是两边缘对齐, 中间用空格填补;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"line-height"),": 行高。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"行高与 ",(0,i.kt)("inlineCode",{parentName:"li"},"font-size")," 之差为行间距;"),(0,i.kt)("li",{parentName:"ul"},"文本垂直居中可以这样写:")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  font-size: 13px;\n  line-height: 13px;\n}\n\n/* 效果等于 */\n\n.demo {\n  font-size: 13px;\n  line-height: 1;\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"vertical-align"),": 垂直对齐文本。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"适用于",(0,i.kt)("inlineCode",{parentName:"li"},"行内元素"),"以及表格元素;"),(0,i.kt)("li",{parentName:"ul"},"后面跟百分数是相对使用该属性节点本身 ",(0,i.kt)("inlineCode",{parentName:"li"},"line-height")," 计算的;")))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0183be5dea65edfa32a0fc5e7b0b3d12.jpg",alt:null}))),(0,i.kt)("p",null,"解答: vertical-align 默认属性是 baseline, 多出的高度是「幽灵空白节点」的 line-height 的占位。详细解答可见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.zhangxinxu.com/wordpress/2015/08/css-deep-understand-vertical-align-and-line-height/"}),"CSS 深入理解 vertical-align 和 line-height 的基友关系")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"text-transform"),": 文本转换。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"uppercase"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"lowercase"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"capitalize")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"text-decration"),": 文本装饰。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"underline"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"outerline"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"line-through"),";"),(0,i.kt)("li",{parentName:"ul"},"该属性不会继承;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"white-space"),": 处理换行符。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"其属性值见下列表格, 不太好记忆, 用得最多的是 normal(默认) 以及 nowrap, 大体知道带 pre 的是会保留换行符的, 用到的时候查表。")))),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"值"),(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"空白符"),(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"换行符"),(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"自动换行"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"normal"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"合并"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"忽略"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"允许")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"nowrap"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"合并"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"忽略"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"不允许")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"pre"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"保留"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"保留"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"不允许")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"pre-line"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"合并"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"保留"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"允许")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"pre-wrap"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"保留"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"保留"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"允许")))),(0,i.kt)("p",null,"阅读完第 6 章"))}c.isMDXComponent=!0},52722:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"选用合适的鼠标光标"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"选用合适的鼠标光标: ",(0,i.kt)("inlineCode",{parentName:"li"},"cursor")," 的 ",(0,i.kt)("inlineCode",{parentName:"li"},"not-allowed")," 和 ",(0,i.kt)("inlineCode",{parentName:"li"},"none")," 使用比较常见")),(0,i.kt)("h3",null,"扩大可选区域大小"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://codepen.io/MuYunyun/pen/YgNxBL"}),"扩大可选区域大小"),": 使用伪元素")),(0,i.kt)("h3",null,"自定义复选框"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://codepen.io/MuYunyun/pen/jJyYyJ"}),"自定义复选框"),": 见 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/React/%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91/CheckBox.md"}),"CheckBox 组件")," 开发")),(0,i.kt)("h3",null,"遮罩层"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"遮罩层")),(0,i.kt)("p",null,"以下这种方案比较稳妥。可以在遮罩层监听相应的事件。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0,0,0,.8);\n}\n\n.show {\n  position: absolute;\n  z-index: 1;\n}\n")),(0,i.kt)("h3",null,"通过模糊来弱化背景"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://codepen.io/MuYunyun/pen/qvRGvJ"}),"通过模糊来弱化背景"))),(0,i.kt)("h3",null,"通过 point-events: none 来禁用触发事件"),(0,i.kt)("p",null,"场景: ImagePicker 组件点击图片禁止其在 app 中弹出底部图片;"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"point-events: none")," 类似 button 的 disabled 属性, 但是其能涵盖到其它任意属性。"))}c.isMDXComponent=!0},11620:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"display(布局)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"block"),": 有宽高, 不在同一行;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"inline-block"),": 有宽高，在同一行;(父节点上使用 inline-block 会",(0,i.kt)("inlineCode",{parentName:"li"},"自动获取子节点的宽度"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"inline"),": 无宽高, 在同一行;")),(0,i.kt)("h3",null,"inline-block 的问题"),(0,i.kt)("p",null,"Here is demo:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<html lang="en">\n  <style>\n    li {\n      display: inline-block;\n      background: red;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 30px\n    }\n\n    .demo {\n      width: 90px;\n    }\n\n    .clearfix {\n      overflow: visible;\n    }\n  </style>\n  <body>\n    <ul class="demo">\n      <li>testtest</li>\n      <li>testtest</li>\n      <li>testtest</li>\n      <li>testtest</li>\n      <li>testtest</li>\n      <li>testtest</li>\n    </ul>\n  </body>\n</html>\n')),(0,i.kt)("p",null,"I'm confused why is it, I want to use overflow: hidden and not expect the strange gap, how can I do?"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/79377b5f34efca7b6574fff146c37f56.jpg",alt:null}))),(0,i.kt)("p",null,"原因是因为代码间的标签符号之间包含空格，浏览器也会处理这部分占位，因此解决方法如下:"),(0,i.kt)("p",null,"The solve way is to add ",(0,i.kt)("inlineCode",{parentName:"p"},"line-height: 0")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"font-size: 0")," to the class demo and add ",(0,i.kt)("inlineCode",{parentName:"p"},"line-height: 12px")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"font-size: 12px")," to the tag li."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://stackoverflow.com/questions/60482616/there-is-an-strange-distance-when-using-overflow-hidden"}),"there-is-an-strange-distance-when-using-overflow-hidden"))),(0,i.kt)("h3",null,"position(位置)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"relative: 元素根据正常的文档流相进行定位;"),(0,i.kt)("li",{parentName:"ul"},"absolute: 脱离当前文档流, 相对其最近的 ",(0,i.kt)("inlineCode",{parentName:"li"},"position")," 属性值为非 ",(0,i.kt)("inlineCode",{parentName:"li"},"static")," 祖先元素进行定位, 直到 body;"),(0,i.kt)("li",{parentName:"ul"},"fixed: 脱离当前文档流, 相对视窗定位。注意: 当父元素上有这几个属性时, ",(0,i.kt)("inlineCode",{parentName:"li"},"transform"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"perspective"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"filter")," 时, fixed 定位会失效;"),(0,i.kt)("li",{parentName:"ul"},"sticky: relative 与 fixed 的结合;")),(0,i.kt)("p",null,"使用 sticky 布局有一些限制:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<div>\n  <div style="position: sticky; top: 20px; background: pink; margin-top: 50px;">Header</div>\n  <div style="height: 1000px">Content</div> // 比如这一行不可或缺\n</div>\n')),(0,i.kt)("h3",null,"margin"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"margin")," 的百分比值是以父元素的宽度作为解析基准的。"),(0,i.kt)("h3",null,"自适应内部元素宽度"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://codepen.io/MuYunyun/pen/eXgqpa"}),"自适应内部元素宽度"))),(0,i.kt)("h3",null,"精确控制表格列宽"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  table-layout: fixed; /* 固定表格布局算法 */\n  width: 100%;\n}\n")),(0,i.kt)("h3",null,"背景占屏幕全宽，内容的长度定宽"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".footer {\n  padding: 1em calc(100% - 450px); /* 暗藏内容宽度为 900 px */\n  background: #ccc;\n}\n")))}c.isMDXComponent=!0},76763:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"背景与边框"),(0,i.kt)("p",null,"以下为与背景与边框相关比较有用的属性。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"background-origin"),": 属性值有 ",(0,i.kt)("inlineCode",{parentName:"li"},"border-box/padding-box/content-box"),"。默认为 ",(0,i.kt)("inlineCode",{parentName:"li"},"padding-box"),"。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"background-clip"),": The background-clip CSS property sets whether an element's background extends underneath its border box, padding box, or content box. 属性值有 ",(0,i.kt)("inlineCode",{parentName:"li"},"border-box/padding-box/content-box"),"。默认值为 ",(0,i.kt)("inlineCode",{parentName:"li"},"border-box"),"。")),(0,i.kt)("h4",null,"图片自适应"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  width: 200px;\n  height: 100px;\n  background-size: cover;\n}\n")),(0,i.kt)("h4",null,"半透明边框"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<style>\n  body {\n    background: black;\n  }\n  .translucent-border {\n    width: 100px;\n    height: 100px;\n    border: 10px solid rgba(255, 255, 255, .5);\n    background: white;\n    background-clip: padding-box; /* 这个属性能让背景和边框分离 */\n  }\n</style>\n<body>\n  <div class="translucent-border"></div>\n</body>\n')),(0,i.kt)("p",null,"效果图"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/8e59c47dabc2eef7eb923b25811d1e44.jpg-200",alt:null}))),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://codepen.io/MuYunyun/pen/vPyOpB"}),"半透明边框")),(0,i.kt)("h4",null,"多重边框"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方案一: ",(0,i.kt)("inlineCode",{parentName:"li"},"box-shadow"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  background: white;\n  box-shadow: 0 0 0 10px #655, 0 0 0 15px deeppink;\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方案二: ",(0,i.kt)("inlineCode",{parentName:"li"},"outline"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"It seemd no way to set radius with outline.")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  background: white;\n  border: 10px solid #655;\n  outline: 5px solid deeppink;\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/622ab7417df7af16671522a3849690b7.jpg-200",alt:null}))),(0,i.kt)("h4",null,"背景定位"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"偏移量与容器内边距相同\n",(0,i.kt)("a",u({parentName:"p"},{href:"http://play.csssecrets.io/background-origin"}),"background-origin 属性用法"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"calc"),":\n",(0,i.kt)("a",u({parentName:"p"},{href:"http://dabblet.com/gist/b5fcb42d055427ab6c1a"}),"calc 使用")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  background-position: calc(100% - 20px) calc(100% - 10px) /* calc 里面的 -、+ 前后要各加个空格 */\n}\n")),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","阅读到边框内圆角")))}c.isMDXComponent=!0},107:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"本文介绍和动画相关的两个属性。"),(0,i.kt)("h3",null,"transition(过渡)"),(0,i.kt)("p",null,"描述一个属性由一个状态过渡到另外一个状态;"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".trantion-thing {\n  transition: color 2s 100ms;\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"次数: 执行一次;"),(0,i.kt)("li",{parentName:"ul"},"粒度: 可以对多个属性生效;"),(0,i.kt)("li",{parentName:"ul"},"兼容: 即时动画不生效也不影响动作的终始状态;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-scss"}),".transtion-thing {\n  transition:\n    $props\n    $duration\n    $timing-function (optional)\n    $transition-delay (optional)\n}\n")),(0,i.kt)("h3",null,"animation(动画)"),(0,i.kt)("p",null,"相比 ",(0,i.kt)("inlineCode",{parentName:"p"},"transition"),", animation 比 transition 多了个执行次数的属性;"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".animated-thing {\n  animation: black-to-white 1s linear 1;\n}\n\n@keyframes black-to-white {\n  0% { background: #000; }\n  100% { background: #fff; }\n}\n")),(0,i.kt)("p",null,"注意 animation 最后的一个数字 1, 其表示执行次数, 如果不传该值, 默认为 1。来看下 animation 的几个属性"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-scss"}),".animated-thing {\n  animation:\n    $name                       (相比 transition 独有)\n    $duration\n    $timing-function (optional)\n    $animation-delay (optional)\n    $iteration-count (optional) (相比 transition 独有)\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"动画 ",(0,i.kt)("inlineCode",{parentName:"li"},"animation"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"调用动画: ",(0,i.kt)("inlineCode",{parentName:"li"},"animation:name")," 要与 @keyframes 连用;"),(0,i.kt)("li",{parentName:"ul"},"设置动画播放时间: ",(0,i.kt)("inlineCode",{parentName:"li"},"animation-duration: 2s"),"   完成从 0% 到 100% 一次动画所需时间;"),(0,i.kt)("li",{parentName:"ul"},"设置动画播放方式: ",(0,i.kt)("inlineCode",{parentName:"li"},"animation-timing-function"),"。",(0,i.kt)("inlineCode",{parentName:"li"},"step()")," 逐帧效果; 此外还有 ",(0,i.kt)("inlineCode",{parentName:"li"},"linear"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"ease")," 等线性效果, 也可以使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"cubic-bezier"),"; (记忆方法: 可将 ease 理解成 slow, slow in 就是减速, slow out 就是加速;)"),(0,i.kt)("li",{parentName:"ul"},"设置动画开始播放的时间: ",(0,i.kt)("inlineCode",{parentName:"li"},"animation-delay"),";"),(0,i.kt)("li",{parentName:"ul"},"设置动画播放次数: ",(0,i.kt)("inlineCode",{parentName:"li"},"animation-iteration-count"),": infinate(无限次);"),(0,i.kt)("li",{parentName:"ul"},"设置动画播放方向: ",(0,i.kt)("inlineCode",{parentName:"li"},"animation-direction"),": normal(默认)、alternate (偶数次反方向播放);"),(0,i.kt)("li",{parentName:"ul"},"设置动画的播放状态: ",(0,i.kt)("inlineCode",{parentName:"li"},"animation-play-state"),": running(默认)、paused(暂停效果); 借由该属性可以完成鼠标移动移出时的暂停、播放效果;"),(0,i.kt)("li",{parentName:"ul"},"设置动画时间外属性: ",(0,i.kt)("inlineCode",{parentName:"li"},"animation-fill-mode"),": none/forwards/backwords/both;")))),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://codepen.io/MuYunyun/pen/ZEzxBYb"}),"行走的猫")),(0,i.kt)("h3",null,"when to use Transition or Animation"),(0,i.kt)("p",null,"现阶段理解: ",(0,i.kt)("inlineCode",{parentName:"p"},"Animation")," 的可控粒度比 ",(0,i.kt)("inlineCode",{parentName:"p"},"Transition")," 更为细致, transition 可以实现的效果 animation 都能实现。然后有以下几种动效必须使用 animation。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"需重复执行的动画;"),(0,i.kt)("li",{parentName:"ol"},"需要改变方向的动画;"),(0,i.kt)("li",{parentName:"ol"},"需要暂停/继续执行的动画;")),(0,i.kt)("h3",null,"一些案例"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"缓动效果: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://codepen.io/MuYunyun/pen/EMmNZN"}),"小球落地"),": 涉及到弹框效果的动画, 可以参考此节;"),(0,i.kt)("li",{parentName:"ul"},"打字效果: 如果是",(0,i.kt)("inlineCode",{parentName:"li"},"单行的打字效果"),"可以使用 css 进行实现, 思路借助 ",(0,i.kt)("inlineCode",{parentName:"li"},"animaition")," 的 ",(0,i.kt)("inlineCode",{parentName:"li"},"step")," 以及文本的宽度;")),(0,i.kt)("h3",null,"缓动算法"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.zhangxinxu.com/wordpress/2017/01/share-a-animation-algorithm-js/"}),"缓动算法"),", 有时间进行 read。")),(0,i.kt)("h3",null,"transition 属性使用坑点"),(0,i.kt)("p",null,"在变化前后的两个位置上, 改变布局相关属性会使动画失效。比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"display、text-align"),"。"))}c.isMDXComponent=!0},26949:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"选择器"),(0,i.kt)("h4",null,"子类选择器 (>)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"p > span {}")," 意为 p 元素后面直接跟着 span 的情形样式才生效")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"对比: ",(0,i.kt)("inlineCode",{parentName:"p"},"p span {}")," 意为 p 元素后面跟着 span 的情形")),(0,i.kt)("h4",null,"相邻选择器 (~)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"p ~ span {}")," 意为与 p 元素",(0,i.kt)("inlineCode",{parentName:"li"},"同级别"),"且位于 p 元素之后",(0,i.kt)("inlineCode",{parentName:"li"},"所有"),"的 span 标签会生效")),(0,i.kt)("h4",null,"相邻选择器 (+)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"p + span {}")," 意为与 p 元素",(0,i.kt)("inlineCode",{parentName:"li"},"同级别"),"且位于 p 元素之后",(0,i.kt)("inlineCode",{parentName:"li"},"相邻"),"的 span 标签会生效")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"踩坑: 注意与 .a .b {} 的区别")),(0,i.kt)("h4",null,"伪类选择器和伪元素选择器"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"伪类选择器: ",(0,i.kt)("inlineCode",{parentName:"li"},":link"),"、",(0,i.kt)("inlineCode",{parentName:"li"},":visited"),"、",(0,i.kt)("inlineCode",{parentName:"li"},":hover"),"、",(0,i.kt)("inlineCode",{parentName:"li"},":active"),"(前面 4 个可以记忆成 LoVe-HA)、",(0,i.kt)("inlineCode",{parentName:"li"},":nth-child")),(0,i.kt)("li",{parentName:"ul"},"伪元素选择器: ",(0,i.kt)("inlineCode",{parentName:"li"},"::before"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"::after"))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"p:first-child {}")," 含义: 某元素的第一个子元素为 p 情形时的样式。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"注意: 不是 p 的第一个子元素。")),(0,i.kt)("p",null,"结构性伪类选择器: ",(0,i.kt)("inlineCode",{parentName:"p"},":not()"),"、",(0,i.kt)("inlineCode",{parentName:"p"},":empty"),"、",(0,i.kt)("inlineCode",{parentName:"p"},":first-child"),"、",(0,i.kt)("inlineCode",{parentName:"p"},":last-child"),"、",(0,i.kt)("inlineCode",{parentName:"p"},":nth-child(n)"),"、",(0,i.kt)("inlineCode",{parentName:"p"},":nth-last-child(n)")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},":first-of-type"),"、",(0,i.kt)("inlineCode",{parentName:"li"},":nth-of-type(n)"),"、",(0,i.kt)("inlineCode",{parentName:"li"},":last-of-type"),"、",(0,i.kt)("inlineCode",{parentName:"li"},":nth-last-of-type(n)"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"only-child"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"only-of-type"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"括号中的 n 可以是 ",(0,i.kt)("inlineCode",{parentName:"p"},"2n+1"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"-n+5"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"even"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"odd")," 等")),(0,i.kt)("p",null,"此外还有一些特殊的伪类选择器"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},":enabled"),"、",(0,i.kt)("inlineCode",{parentName:"li"},":disabled")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},":checked"),"(选择框加点变化示例)、",(0,i.kt)("inlineCode",{parentName:"li"},"::selection"),"(改变用鼠标选择网页文本的样式)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},":read-only"),"(与 html 中 readonly='readonly' 配合使用)、",(0,i.kt)("inlineCode",{parentName:"li"},":read-write"),"(与 :read-only 选择器相反, 主要用来指定当元素处于非只读状态时的样式。)")),(0,i.kt)("h3",null,"选择器优先级排序"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Id 选择器 > 类选择器 | 属性选择器 > 元素 > 通配选择器\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"伪类选择器的优先级是否是最低的呢?")),(0,i.kt)("p",null,"在 input 的 style 设置 ",(0,i.kt)("inlineCode",{parentName:"p"},"font-size: 30px"),", ::placeholder { font-size: 12px }, 最终的 font-size 是多少呢?"),(0,i.kt)("p",null,"当前的事实是 12px, 那么伪元素选择器的优先级究竟排在哪个位置呢? 答案后续揭晓。"),(0,i.kt)("h3",null,"JavaScript 与伪元素选择器进行通信"),(0,i.kt)("p",null,"可以使用 css 方法 ",(0,i.kt)("inlineCode",{parentName:"p"},"attr()")," 获取节点上 ",(0,i.kt)("inlineCode",{parentName:"p"},"data-xx")," 的属性信息。比如:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo::after {\n  content: attr(data-msg);\n  ...\n}\n")))}c.isMDXComponent=!0},94265:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,(0,i.kt)("a",u({parentName:"h3"},{href:"https://github.com/webpack-contrib/css-loader"}),"css-loader")),(0,i.kt)("p",null,"来看下面这一组 webpack 的配置项，"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"{\n  test: /\\.less$/,\n  use: [\n    require.resolve('style-loader'),\n    {\n      loader: require.resolve('css-loader'),\n      options: {\n        modules: true,  // 开启 css 模块化\n        importLoaders: 2,\n      },\n    },\n    {\n      loader: require.resolve('postcss-loader'),\n      options: {...},\n    },\n    {\n      loader: require.resolve('less-loader'),\n      options: {...},\n    },\n  ],\n},\n")),(0,i.kt)("p",null,"它们执行顺序是 ",(0,i.kt)("inlineCode",{parentName:"p"},"less-loader"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"postcss-loader"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"css-loader"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"style-loader"),"。我们来理一下各 module 的作用："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"less-loader"),": 将 less 解析为 css"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"postcss-loader"),": 将 css 兼容各浏览器加上相应前缀"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"css-loader"),": 将 css 转化为 common.js 模块"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"style-loader"),": 将 common.js 模块注入 ",(0,i.kt)("inlineCode",{parentName:"li"},"style")," 标签中")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/reactSPA/issues/52"}),"Link issue"))))}c.isMDXComponent=!0},72157:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"flex 基本用法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  flex: 1 1 100px;\n}\n")),(0,i.kt)("p",null,"三个值分别为:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"flex-grow"),": 占比, 默认为 0;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"flex-shrink"),": 缩减比例, 0 为不缩减, 默认为 1;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"flex-basis"),": flex 基本尺寸, 默认为 auto;")),(0,i.kt)("h3",null,"How to calculate the flex-shrink"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/1431bcfc07c05820a123d5716955b860.jpg",alt:null}))),(0,i.kt)("p",null,"The calculate step is a little difficulty, you can see it in the ",(0,i.kt)("a",u({parentName:"p"},{href:"https://stackoverflow.com/questions/36550840/how-to-calculate-flex-shrink-when-flex-items-have-a-different-flex-basis"}),"how-to-calculate-flex-shrink"),"."),(0,i.kt)("h3",null,"justify-content"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"space-around: The spacing between each pair of adjacent items is the same, The empty space before the first and after the last item equals ",(0,i.kt)("inlineCode",{parentName:"li"},"half of the space")," between each pair of adjacent items."),(0,i.kt)("li",{parentName:"ul"},"space-evenly: The spacing between each pair of adjacent items, the main-start edge and the first item, and the main-end edge and the last item, ",(0,i.kt)("inlineCode",{parentName:"li"},"are all exactly the sam"))),(0,i.kt)("h3",null,"flex 特殊用法"),(0,i.kt)("h4",null,"flex + z-index"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"我们知道 ",(0,i.kt)("inlineCode",{parentName:"li"},"z-index")," 要与定位元素(absolute、relative、absolute、sticky)一起使用, 但使用了 flex 布局后, 尽管仍然是 ",(0,i.kt)("inlineCode",{parentName:"li"},"position: static"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"z-index")," 仍然是生效的。")),(0,i.kt)("h4",null,"flex + margin"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"flex")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"margin")," 结合使用能达到垂直居中的妙用。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"见 ",(0,i.kt)("a",u({parentName:"p"},{href:"%5B./%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD%5D(https://github.com/MuYunyun/blog/blob/master/BasicSkill/css/%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD.md).md"}),"水平垂直居中"))),(0,i.kt)("p",null,"场景: 右侧图标的导航栏的场景也适用此方式。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/234bae5566a4662a6995ff01191865e3.jpg",alt:null}))),(0,i.kt)("p",null,"方法: 在 flex 布局中, 使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"margin-left: auto"),"。"),(0,i.kt)("h4",null,"flex + height: 100%"),(0,i.kt)("p",null,"在 ios10 以下的 ios 版本中, 在 flex 布局中不推荐与 ",(0,i.kt)("inlineCode",{parentName:"p"},"height: 100%")," 一起连用;"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"原因一: 父元素为 flex 布局, 若父元素不设置 ",(0,i.kt)("inlineCode",{parentName:"li"},"height: 100%"),", 子元素设置 ",(0,i.kt)("inlineCode",{parentName:"li"},"height: 100%")," 是继承不到父元素的高度的;"),(0,i.kt)("li",{parentName:"ul"},"原因二: 父元素为 flex 布局, 即使父元素设置了 ",(0,i.kt)("inlineCode",{parentName:"li"},"height: 100%"),", 子元素使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"height: 100%")," 继承的高度也是有偏差的;")),(0,i.kt)("p",null,"一般使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"flex: 1")," 取代 ",(0,i.kt)("inlineCode",{parentName:"p"},"height: 100%"),", 此外要让父元素的高度传给子元素通常需要配合 ",(0,i.kt)("inlineCode",{parentName:"p"},"flex-direction"),"。使用如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".parentDemo {\n  display: flex;\n  flex-direction: column;\n}\n")),(0,i.kt)("h4",null,"Flex 布局中省略号失效"),(0,i.kt)("p",null,"Flex 布局中, 省略号属性是失效的。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  display: flex;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n")))}c.isMDXComponent=!0},87160:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"transform-function"),(0,i.kt)("p",null,"A linear transformation function is described as a ",(0,i.kt)("inlineCode",{parentName:"p"},"2 x 2")," matrix, like this:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/32d9ec359e0199ddbb0741b0b79bc1a9.jpg",alt:null}))),(0,i.kt)("p",null,"The transformation function is applyied to an element by using matrix multiplication. Thus each cordinate changes is based on the matrix value."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/74244bb9e6cb2e93a5756021b2c5895d.jpg",alt:null}))),(0,i.kt)("p",null,"If several transformation work on the the same element, it can be writen in a row."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/3de22426e661a9d6faefe0f608d444f2.jpg",alt:null}))),(0,i.kt)("h3",null,"matrix()"),(0,i.kt)("p",null,"The result of matrix is equal to ",(0,i.kt)("inlineCode",{parentName:"p"},"<transform-function>"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"matrix(a, b, c, d, tx, ty)")," is equal like this:"),(0,i.kt)("p",null,"------- 占位 --------"),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://www.ruanyifeng.com/blog/2015/09/matrix-multiplication.html"}),"matrix-multiplication"),": by Ruan Yifeng"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function"}),"transform-function"))))}c.isMDXComponent=!0},36609:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"核心原则"),(0,i.kt)("p",null,"以简为美，简约至上。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"可以当成一门新语言来学")),(0,i.kt)("h3",null,"String"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"SCSS")," 的属性应该使用单引号;"),(0,i.kt)("li",{parentName:"ul"},"但有一些特殊的属性 (比如 ",(0,i.kt)("inlineCode",{parentName:"li"},"sans-serif/initial"),") 无须使用引号, 例子如下:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-SCSS"}),"$font-type: sans-serif\n")),(0,i.kt)("h3",null,"Number"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"0")," 作为长度时后面不应该带有单位;"),(0,i.kt)("li",{parentName:"ul"},"给数字添加单位应该使用乘法, 例子如下:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-SCSS"}),"$value: 42\n\n// yep\n$length: $value * 1px\n\n// nope\n$length: $value + 1px\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"数字间计算需要带上括号, 例子如下:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-SCSS"}),"// yep\n.foo {\n  width: (100% / 3);\n}\n")),(0,i.kt)("h3",null,"嵌套选择器"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-SCSS"}),".foo {\n  .bar {\n    &:hover {\n      color: red\n    }\n  }\n}\n")),(0,i.kt)("p",null,"生成 ",(0,i.kt)("inlineCode",{parentName:"p"},"css")," 为:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".foo .bar:hover {\n  color: red;\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-SCSS"}),".foo {\n  &-bar {\n    color: red;\n  }\n}\n")),(0,i.kt)("p",null,"生成 ",(0,i.kt)("inlineCode",{parentName:"p"},"css")," 为:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".foo-bar {\n  color: red;\n}\n")),(0,i.kt)("h3",null,"混合宏"),(0,i.kt)("p",null,"在 ",(0,i.kt)("inlineCode",{parentName:"p"},"SCSS")," 中提供函数的支持"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-SCSS"}),"@mixin dummy($a, $b, $c) {\n  // ...\n}\n\n@include dummy(true, 1, 'pdd')\n")),(0,i.kt)("h3",null,"条件语句"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-scss"}),"@if ($support-legacy) {\n  // ..\n} @else {\n  // ..\n}\n")),(0,i.kt)("h3",null,"循环"),(0,i.kt)("p",null,"一般使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"each")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-scss"}),"@each $key, $value in $map {\n  // ...\n}\n")),(0,i.kt)("p",null,"结合伪类可以使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"for")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-scss"}),"@for $i from 0 through 10 {\n  .foo:nth-of-type(#{$i}) {\n    // ...\n  }\n}\n")),(0,i.kt)("h3",null,"继承"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-scss"}),".demo1 {}\n\n.demo {\n  @extend .demo1\n}\n")),(0,i.kt)("h3",null,"参考文献"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://sass-guidelin.es/"}),"sassguidelines")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://sass-guidelin.es/zh"}),"sassguidelines 中文文档"))))}c.isMDXComponent=!0},31764:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"flex + margin: auto"),(0,i.kt)("p",null,"父节点使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"display: flex"),", 子节点使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"margin: auto")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<style>\n  .flex {\n    display: flex;\n    width: 300px;\n    height: 300px;\n    background: #ccc;\n    margin-bottom: 5px;\n  }\n  .flex p {\n    margin: auto;\n  }\n</style>\n<div class="flex">\n  <p>content</p>\n</div>\n')),(0,i.kt)("h3",null,"flex 结合 justify-content、align-items"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<style>\n  .flex2 {\n    display: flex;\n    width: 300px;\n    height: 300px;\n    background: #ccc;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 5px;\n  }\n</style>\n<div class="flex2">\n  <p>content</p>\n</div>\n')),(0,i.kt)("h3",null,"绝对定位 + 相对定位"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<style>\n  .position {\n    position: relative;\n    width: 300px;\n    height: 300px;\n    background: #ccc;\n  }\n  .position p {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n  }\n</style>\n<div class="position">\n  <p>content</p>\n</div>\n')))}c.isMDXComponent=!0},11388:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"场景"),(0,i.kt)("p",null,"场景: 假设高度已知, 请写出三栏布局, 其中左、右栏宽度各为 300 px, 中间自适应。本文针对这种场景罗列出以下几种方案。"),(0,i.kt)("h3",null,"float 布局"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<body>\n  <style>\n    .left {\n      float: left;\n      background: red;\n      width: 300px;\n    }\n\n    .middle {\n      background: purple;\n    }\n\n    .right {\n      float: right;\n      background: green;\n      width: 300px;\n    }\n  </style>\n  <div class="left">float layout</div>\n  <div class="right">float layout</div>\n  <div class="middle">float layout</div>\n</body>\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"float 布局要注意 ",(0,i.kt)("inlineCode",{parentName:"p"},'class="middle"')," 这行书写的位置")),(0,i.kt)("h3",null,"position 布局"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<body>\n  <style>\n    .left {\n      background: red;\n      position: absolute;\n      left: 0;\n      width: 300px;\n    }\n\n    .middle {\n      position: absolute;\n      left: 300px;\n      right: 300px;\n      background: purple;\n    }\n\n    .right {\n      background: green;\n      position: absolute;\n      right: 0;\n      width: 300px;\n    }\n  </style>\n  <div class="left">position layout</div>\n  <div class="middle">position layout</div>\n  <div class="right">position layout</div>\n</body>\n')),(0,i.kt)("h3",null,"flex 布局"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<style>\n  .flexbox {\n    display: flex;\n  }\n\n  .left {\n    background: red;\n    width: 300px;\n  }\n\n  .middle {\n    flex: 1;\n    background: purple;\n  }\n\n  .right {\n    background: green;\n    width: 300px;\n  }\n</style>\n<section class="flexbox">\n  <div class="left">flex layout</div>\n  <div class="middle">flex layout</div>\n  <div class="right">flex layout</div>\n</section>\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"flex 布局是兼容性较好的布局")),(0,i.kt)("h3",null,"grid 布局"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<body>\n  <style>\n    .gridbox {\n      display: grid;\n      grid-template-columns: 300px auto 300px;\n    }\n\n    .left {\n      background: red;\n    }\n\n    .middle {\n      background: purple;\n    }\n\n    .right {\n      background: green;\n    }\n  </style>\n  <section class="gridbox">\n    <div class="left">grid layout</div>\n    <div class="middle">grid layout</div>\n    <div class="right">grid layout</div>\n  </section>\n</body>\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"使用 grid 目前记住 ",(0,i.kt)("inlineCode",{parentName:"p"},"columns-template-rows")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"columns-template-columns"))),(0,i.kt)("h3",null,"table 布局"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<body>\n  <style>\n    .tablebox {\n      display: table;\n      width: 100%;\n    }\n\n    .left {\n      display: table-cell;\n      background: red;\n      width: 300px;\n    }\n\n    .middle {\n      display: table-cell;\n      background: purple;\n    }\n\n    .right {\n      display: table-cell;\n      background: green;\n      width: 300px;\n    }\n  </style>\n  <section class="tablebox">\n    <div class="left">table layout</div>\n    <div class="middle">table layout</div>\n    <div class="right">table layout</div>\n  </section>\n</body>\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"table 布局也是和 flex 布局一样兼容性较高的方案")),(0,i.kt)("h3",null,"其它解决方案"),(0,i.kt)("p",null,"针对两边宽度固定, 中间宽度自适应还有以下两种方案:"),(0,i.kt)("h4",null,"圣杯布局"),(0,i.kt)("p",null,"核心思想: 将内容两边宽度提前空出来, 然后将块级元素进行移动",(0,i.kt)("inlineCode",{parentName:"p"},"填补"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<body>\n  <style>\n    .bd {\n      padding: 0 200px 0 200px;\n    }\n\n    .main {\n      float: left;\n      width: 100%;\n      height: 200px;\n      background-color: #ddd;\n    }\n    .left {\n      float: left;\n      width: 200px;\n      height: 200px;\n      background-color: #da4242;\n      /* 产生布局效果的属性 */\n      margin-left: -100%;\n      position: relative;\n      left: -200px;\n    }\n    .right {\n      float: left;\n      width: 200px;\n      height: 200px;\n      background-color: #4ddef1;\n      /* 产生布局效果的属性 */\n      margin-left: -200px;\n      position: relative;\n      left: 200px;\n    }\n  </style>\n  <div class="bd">\n    <div class="main">main</div>\n    <div class="left">left</div>\n    <div class="right">right</div>\n  </div>\n</body>\n')),(0,i.kt)("h4",null,"双飞翼布局"),(0,i.kt)("p",null,"核心思想: 将内容宽度占满父容器, 然后将块级元素进行移动",(0,i.kt)("inlineCode",{parentName:"p"},"覆盖"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<body>\n  <style>\n    .main {\n      float: left;\n      width: 100%;\n      height: 200px;\n      background-color: #ddd;\n    }\n\n    .left {\n      float: left;\n      width: 200px;\n      height: 200px;\n      background-color: #da4242;\n      /* 产生布局效果的属性 */\n      margin-left: -100%;\n    }\n\n    .right {\n      float: left;\n      width: 200px;\n      height: 200px;\n      background-color: #4ddef1;\n      /* 产生布局效果的属性 */\n      margin-left: -200px;\n    }\n  </style>\n  <div class="main"></div>\n  <div class="left">left</div>\n  <div class="right">right</div>\n</body>\n')))}c.isMDXComponent=!0},75612:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"本文是水平布局解决方案的姊妹篇")),(0,i.kt)("h3",null,"题目"),(0,i.kt)("p",null,"题目: 假设宽度已知, 请写出三栏布局, 其中上、下栏高度各为 ",(0,i.kt)("inlineCode",{parentName:"p"},"100")," px, 中间自适应。"),(0,i.kt)("h3",null,"position 布局"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<body>\n    <style>\n        html, body, .box {\n            height: 100%;\n        }\n        .box {\n            position: relative;\n        }\n        .head {\n            position: absolute;\n            width: 100%;\n            top: 0;\n            height: 100px;\n            background: red;\n        }\n        .middle {\n            position: absolute;\n            width: 100%;\n            top: 100px;\n            bottom: 100px;\n            background: yellow;\n        }\n        .bottom {\n            position: absolute;\n            width: 100%;\n            bottom: 0;\n            height: 100px;\n            background: red\n        }\n    </style>\n    <div class="box">\n        <section class="head"></section>\n        <section class="middle"></section>\n        <section class="bottom"></section>\n    </div>\n</body>\n')),(0,i.kt)("h3",null,"flex 布局"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<body>\n    <style>\n        html, body, .box {\n            height: 100%;\n        }\n        .box {\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n        }\n        .head {\n            height: 100px;\n            background: red;\n        }\n        .middle {\n            flex: 1;\n            background: yellow;\n        }\n        .bottom {\n            height: 100px;\n            background: red\n        }\n    </style>\n    <div class="box">\n        <section class="head"></section>\n        <section class="middle"></section>\n        <section class="bottom"></section>\n    </div>\n</body>\n')),(0,i.kt)("h3",null,"grid 布局"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<body>\n    <style>\n        html, body, .box {\n            height: 100%;\n        }\n        .box {\n            display: grid;\n            grid-template-columns: 100%;\n            grid-template-rows: 100px auto 100px;\n        }\n        .head {\n            height: 100px;\n            background: red;\n        }\n        .middle {\n            bottom: 100px;\n            background: yellow;\n        }\n        .bottom {\n            height: 100px;\n            background: red\n        }\n    </style>\n    <div class="box">\n        <section class="head"></section>\n        <section class="middle"></section>\n        <section class="bottom"></section>\n    </div>\n</body>\n')),(0,i.kt)("h3",null,"table 布局"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<body>\n    <style>\n        html, body, .box {\n            height: 100%;\n            width: 100%;\n        }\n        .box {\n            display: table;\n        }\n        .head {\n            display: table-row;\n            width: 100%;\n            height: 100px;\n            background: red;\n        }\n        .middle {\n            display: table-row;\n            width: 100%;\n            background: yellow;\n        }\n        .bottom {\n            display: table-row;\n            width: 100%;\n            height: 100px;\n            background: red\n        }\n    </style>\n    <div class="box">\n        <section class="head">123</section>\n        <section class="middle">456</section>\n        <section class="bottom">789</section>\n    </div>\n</body>\n')))}c.isMDXComponent=!0},78510:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"BFC 含义"),(0,i.kt)("p",null,"块级格式化上下文(Block Formatting Context)"),(0,i.kt)("h3",null,"BFC 特性"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"同一个 BFC 内元素外边距会发生重合(见案例一)"),(0,i.kt)("li",{parentName:"ul"},"BFC 内可以有浮动元素(见案例二)"),(0,i.kt)("li",{parentName:"ul"},"BFC 内可以分离浮动元素(见案例三)")),(0,i.kt)("h4",null,"案例一"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),"<style>\n  div {\n    width: 100px;\n    height: 100px;\n    background-color: red;\n    margin: 100px;\n  }\n</style>\n\n<body>\n  <div></div>\n  <div></div>\n</body>\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/4e86e658780009017a22bbb025043276.jpg-300",alt:null}))),(0,i.kt)("p",null,"可以看到此时两个 div 之间的间距并不是 200px, 而是 100px"),(0,i.kt)("p",null,"此时可以在父节点加上 ",(0,i.kt)("inlineCode",{parentName:"p"},"overflow: hidden")," 使其变为 BFC 元素, 从而避免重叠。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),"<style>\n  div {\n    overflow: hidden;\n  }\n  p {\n    width: 100px;\n    height: 100px;\n    background-color: red;\n    margin: 100px;\n  }\n</style>\n\n<body>\n  <div>\n    <p></p>\n  </div>\n  <div>\n    <p></p>\n  </div>\n</body>\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/ffa04ee49e9b4d221361929324236c05.jpg-300",alt:null}))),(0,i.kt)("p",null,"此时, 可以看到两个 div 之间的距离已变为期望的 200 px；"),(0,i.kt)("h4",null,"案例二"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<style>\n  .border {\n    border: 1px solid #000;\n  }\n  .content {\n    width: 100px;\n    height: 100px;\n    background-color: red;\n    float: left;\n  }\n</style>\n\n<body>\n  <div class="border">\n    <p class="content"></p>\n  </div>\n</body>\n')),(0,i.kt)("p",null,"子节点加上 ",(0,i.kt)("inlineCode",{parentName:"p"},"float: left")," 后, 其脱离了文档流, 所以只看到一条 1px 的线条, 如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/6b657c7f8d985992c97269fb61bb8678.jpg-300",alt:null}))),(0,i.kt)("p",null,"此时在父节点中加上 ",(0,i.kt)("inlineCode",{parentName:"p"},"overflow: hidden")," 使其变为 BFC 元素从而消除浮动, 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<style>\n  .border {\n    border: 1px solid #000;\n    overflow: hidden;  // 在此处加上 overflow: hidden; 可以消除浮动\n  }\n  .content {\n    width: 100px;\n    height: 100px;\n    background-color: #ff0000;\n    float: left;\n  }\n</style>\n\n<body>\n  <div class="border">\n    <p class="content"></p>\n  </div>\n</body>\n')),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/6bde303c9e6c57a7d1ce73543d4c8dcc.jpg-300",alt:null}))),(0,i.kt)("h4",null,"案例三"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<style>\n  .content1 {\n    width: 100px;\n    height: 100px;\n    background-color: red;\n    float: left;\n  }\n\n  .content2 {\n    width: 200px;\n    height: 200px;\n    background-color: green;\n  }\n</style>\n\n<body>\n  <div class="content1"></div>\n  <div class="content2"></div>\n</body>\n')),(0,i.kt)("p",null,"相邻节点中的一个节点使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"float: left"),", 其脱离文档流, 从而两个 div 标签发生了重叠,"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c7ebcfce5a7c58142fc9004a7d545852.jpg-300",alt:null}))),(0,i.kt)("p",null,"此时在普通流节点上使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"overflow: hidden")," 使其变为 BFC 元素从而使 BFC 元素和浮动元素分离:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<style>\n  .content1 {\n    width: 100px;\n    height: 100px;\n    background-color: red;\n    float: left;\n  }\n\n  .content2 {\n    width: 200px;\n    height: 200px;\n    background-color: green;\n    overflow: hidden;\n  }\n</style>\n\n<body>\n  <div class="content1"></div>\n  <div class="content2"></div>\n</body>\n')),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/cb83333e3e31f59d4946e0d3cdd2a56a.jpg-300",alt:null}))),(0,i.kt)("h3",null,"如何触发 BFC"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"* overflow: 不为 visible;\n* position: 不为 static 以及 relative;\n* float: 不为 none;\n* display: 为 inline-box、table-ceil、flex;\n")))}c.isMDXComponent=!0},15769:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"DDL 与 DML"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"数据定义语言(DDL): Data Definition Language")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"})," 1. CREATE - to create objects in the database\n 2. ALTER - alters the structure of the database\n 3. DROP - delete objects from the database\n 4. TRUNCATE - remove all records from a table, including all spaces allocated for the records are removed\n 5. COMMENT - add comments to the data dictionary\n 6. RENAME - rename an object\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"数据操纵语言(DML): Data Manipulation Language")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"})," 1. SELECT - retrieve data from the a database\n 2. INSERT - insert data into a table UPDATE - updates existing data within a table\n 3. DELETE - deletes all records from a table, the space for the records remain\n 4. MERGE - UPSERT operation (insert or update)\n 5. CALL - call a PL/SQL or Java subprogram\n 6. EXPLAIN PLAN - explain access path to data\n 7. LOCK TABLE - control concurrency\n")))}c.isMDXComponent=!0},37723:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Kibana 用户手册"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"搜索数据")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"直接输入文本字符串来进行简单文本搜索。",(0,i.kt)("inlineCode",{parentName:"li"},"eg: safari")),(0,i.kt)("li",{parentName:"ul"},"根据 key:value 进行搜索。",(0,i.kt)("inlineCode",{parentName:"li"},"eg: error_msg:200")),(0,i.kt)("li",{parentName:"ul"},"可以通过中括号指定范围搜索， ","[START_VALUE TO END_VALUE]","。",(0,i.kt)("inlineCode",{parentName:"li"},"error_msg:[200 TO 499]")),(0,i.kt)("li",{parentName:"ul"},"您可以通过布尔操作符 AND、OR 和 NOT 来指定更多的搜索条件。例如，搜索状态为 4xx 而且扩展名为 php 或 html 的条目，您可以输入 ",(0,i.kt)("inlineCode",{parentName:"li"},"error_msg:[200 TO 499] AND (extension:php OR extension:html)"),"。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"可视化")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://www.elastic.co/guide/cn/kibana/current/createvis.html"}),"创建可视化视图")))))}c.isMDXComponent=!0},72150:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"关系型数据库"),(0,i.kt)("p",null,"使用多个表格管理的数据库。"),(0,i.kt)("h3",null,"创建数据库"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"CREATE DATABASE 数据库名;\n")),(0,i.kt)("h3",null,"删除数据库"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"DROP DATABASE 数据库名;\n")),(0,i.kt)("h3",null,"数据库类型"),(0,i.kt)("p",null,"数据库类型分为数字类型、时间类型、字符串类型。"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"类型"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"用途"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"格式"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"INT(INEGER)"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"大整数值"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"FLOAT"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"单精度"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"DATE"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"日期值"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"'YYYY-MM-DD'")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"TIME"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"时间值或持续时间"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"'HH:MM:SS'")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"YEAR"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"年份值"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"'YYYY'")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"DATETIME"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"混合日期和时间值"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"'YYYY-MM-DD'")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"VARCHAR"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"变长字符串"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))))),(0,i.kt)("h3",null,"创建数据表"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"CREATE TABLE table_name (column_name column_type);\n")),(0,i.kt)("h3",null,"删除数据表"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"DROP TABLE table_name;\n")),(0,i.kt)("h3",null,"插入数据"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"INSERT INTO table_name ( field1, field2, ...fieldN ) VALUES ( value1, value2, ...valueN )\n")),(0,i.kt)("h3",null,"查询数据"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"SELECT field1,field2\nFROM table_name1, table_name2\n[WHERE condition1 [AND [OR]] condition2\n[GROUP BY]\n[HAVING]\n[ORDER BY]\n[LIMIT N][OFFSET M]\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FROM"),": 可以从多个 table 中进行查询"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"WHERE"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"WHERE 相当于编程语言中的 if。"),(0,i.kt)("li",{parentName:"ul"},"可以使用在 SELECT、UPDATE、DELETE 语句中。"),(0,i.kt)("li",{parentName:"ul"},"可以使用 AND 或者 OR 指定一个或多个条件。"),(0,i.kt)("li",{parentName:"ul"},"操作符有 ",(0,i.kt)("inlineCode",{parentName:"li"},"="),"、",(0,i.kt)("inlineCode",{parentName:"li"},">"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"<"),"、",(0,i.kt)("inlineCode",{parentName:"li"},">="),"、",(0,i.kt)("inlineCode",{parentName:"li"},"<="),"、",(0,i.kt)("inlineCode",{parentName:"li"},"!= or <>"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"IS NULL"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"IS NOT NULL")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Like"),": 类似于 ",(0,i.kt)("inlineCode",{parentName:"li"},"="),", SQL 提供了四种匹配方式。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"%"),": 表示任意 0 个或多个字符。可匹配任意类型和长度的字符, 有些情况下若是中文, 请使用两个百分号（%%）表示。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"eg: 查询包含 javascript 字段的信息: ",(0,i.kt)("inlineCode",{parentName:"li"},"SELECT * FROM position WHERE name LIKE '%java%';")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"_"),": 表示任意单个字符。匹配单个任意字符, 它常用来限制表达式的字符长度语句。"),(0,i.kt)("li",{parentName:"ul"},"[]: 表示括号内所列字符中的一个（类似正则表达式）。指定一个字符、字符串或范围, 要求所匹配对象为它们中的任一个。"),(0,i.kt)("li",{parentName:"ul"},"[^]: 表示不在括号所列之内的单个字符。其取值和 [] 相同, 但它要求所匹配对象为指定字符以外的任一个字符。\n查询内容包含通配符时,由于通配符的缘故, 导致我们查询特殊字符 “%”、“_”、“[” 的语句无法正常实现, 而把特殊字符用 “","[ ]","” 括起便可正常查询。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"REGEXP"),": 可以使用正则进行筛选。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"eg: ",(0,i.kt)("inlineCode",{parentName:"li"},"SELECT name FROM person_tbl WHERE name REGEXP '^st';")))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GROUP BY"),": 对 SELECT 查询出来的结果集按照某个字段或者表达式进行分组，获得一组组的集合。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"WITH ROLLUP"),": 可以实现在分组统计数据基础上再进行相同的统计 (SUM, AVG, COUNT 等)。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/1d8a95a812f6ffc91d6f5a357fe9755c.jpg",alt:null}))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"coalesce"),": 针对上图 null 处, 可以使用 coalesce(a,b,c) 语法, 其等价于 JavaScript 中 ",(0,i.kt)("inlineCode",{parentName:"li"},"a || b || c || null"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/8530fc78779c7024f41053a51c160196.jpg",alt:null}))))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"HAVING"),": 用于对 WHERE 和 GROUP BY 查询出来的分组经行过滤，查出满足条件的分组结果。(场景使用存疑: 后续有场景进行补充)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ORDER BY"),":",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"可设置多个字段来排序: ",(0,i.kt)("inlineCode",{parentName:"li"},"ORDER BY field1 [ASC [DESC][默认 ASC]], [field2...] [ASC [DESC][默认 ASC]]"),";"),(0,i.kt)("li",{parentName:"ul"},"可设置 ",(0,i.kt)("inlineCode",{parentName:"li"},"ASD"),"(ascending) 或 ",(0,i.kt)("inlineCode",{parentName:"li"},"DESD"),"(descending) 来表示升序或降序, 默认 ascending。"),(0,i.kt)("li",{parentName:"ul"},"拼音场景: 如果字符集采用的是 utf8(万国码)而非 gbk，需要先对字段进行转为 gbk 码然后排序:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ORDER BY CONVERT(title using gbk);")))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"LIMIT"),": 可以设置查询返回条数"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"OFFSET"),": 可以设置起始查询条数"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"limit N,M"),": 相当于 LIMIT M OFFSET N , 从第 N 条记录开始, 返回 M 条记录")),(0,i.kt)("h3",null,"UPDATE"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"UPDATE table_name SET field1=new-value1, field2=new-value2\n[WHERE CLAUSE]\n")),(0,i.kt)("h3",null,"DELETE"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"DELETE FROM table_name\n[WHERE CLAUSE]\n")),(0,i.kt)("h3",null,"UNION"),(0,i.kt)("p",null,"UNION 操作符用于连接两个以上的 SELECT 语句的结果组合到一个结果集合中。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"SELECT field1,field2\nFROM table_name1, table_name2\n[WHERE condition1 [AND [OR]] condition2\nUNION [ALL | DISTINCT]\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"DISTINCT"),": 默认值, 表示多个 SELECT 语句会删除重复的数据。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"All"),": 表示多个 SELECT 语句不会删除重复的数据。")),(0,i.kt)("h3",null,"连接的使用"),(0,i.kt)("p",null,"真正的应用中经常需要从多个数据表中读取数据。此时可以使用 JOIN 在两个或多个表中读取数据。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"INNER JOIN (内连接)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/b6fb7c5a37b37586b7c36f7b524294bd.jpg",alt:null}))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"SELECT field1,field2 FROM table_name1 INNER JOIN table_name2 ON condition;")))),(0,i.kt)("li",{parentName:"ul"},"LEFT JOIN (左连接)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/52e7cfa17e2c2ff5983a2ba3c6f3eb8e.jpg",alt:null}))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"SELECT field1,field2 FROM table_name1 LEFT JOIN ttable_name2 ON condition;")))),(0,i.kt)("li",{parentName:"ul"},"RIGHT JOIN (右连接)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/d79d96273e72c6c308ba8744b507f562.jpg",alt:null}))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"SELECT field1,field2 FROM table_name1 RIGHT JOIN table_name2 ON condition;"))))),(0,i.kt)("h3",null,"事务"),(0,i.kt)("p",null,"事务主要用于处理操作量大，复杂度高的数据。笔者认为事务就像数据库语句中引入 git 操作。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"MySQL 中使用了 Innodb 引擎的数据库或表支持事务;"),(0,i.kt)("li",{parentName:"ul"},"事务用来管理 insert、update、delete 语句;")),(0,i.kt)("p",null,"MYSQL 事务控制语句"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"BEGIN: 开始一个事务"),(0,i.kt)("li",{parentName:"ul"},"ROLLBACK: 事务回滚"),(0,i.kt)("li",{parentName:"ul"},"COMMIT: 事务确认")),(0,i.kt)("h3",null,"ALTER"),(0,i.kt)("p",null,"修改表名或者修改表字段就要使用 ALTER 命令。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"删除表字段",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"DROP: ",(0,i.kt)("inlineCode",{parentName:"li"},"ALTER TABLE testalter_tbl DROP i;")))),(0,i.kt)("li",{parentName:"ul"},"添加表字段",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"ADD: ",(0,i.kt)("inlineCode",{parentName:"li"},"ALTER TABLE testalter_tbl ADD i INT;")))),(0,i.kt)("li",{parentName:"ul"},"修改表字段类型及名称",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"MODIFY: ",(0,i.kt)("inlineCode",{parentName:"li"},"alter table tableName modify name1 type1 first|after name2;"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"name1 为想要修改的字段"),(0,i.kt)("li",{parentName:"ul"},"type1 为该字段原来类型"),(0,i.kt)("li",{parentName:"ul"},"first 与 after 二选一, first 放在第一位, after 放在 name2 字段后面"))),(0,i.kt)("li",{parentName:"ul"},"CHANGE: ",(0,i.kt)("inlineCode",{parentName:"li"},"ALTER TABLE testalter_tbl CHANGE i j BIGINT;"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"将 i 字段重命名为 j 字段")))))),(0,i.kt)("h3",null,"索引"),(0,i.kt)("p",null,"空间换时间。使用索引可以加快数据库内部找寻数据的速度。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"创建索引",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CREATE INDEX indexName ON table_name (column_name)")))),(0,i.kt)("li",{parentName:"ul"},"删除索引",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"DROP INDEX [indexName] ON mytable;"))))),(0,i.kt)("h3",null,"SQL 注入"),(0,i.kt)("p",null,"线上应用应该注意防范 SQL 注入。"))}c.isMDXComponent=!0},24748:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"MindNode 快捷键整理"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"shift")," + ",(0,i.kt)("inlineCode",{parentName:"p"},"enter"),": 创建新节点\n",(0,i.kt)("inlineCode",{parentName:"p"},"cmd + 0"),": 移到屏幕中央"))}c.isMDXComponent=!0},58890:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"演讲一: alfred workflow 是什么"),(0,i.kt)("p",null,"可定制化工具流, 能用脚本(node.js、python、php、ruby、perl)提高我们日常效率，比如个人比较常用的有以下几种 —— 查文档，查单词，查 npm 包, 上传图床快捷操作等等。归纳下可以完成以下几类操作"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"查询信息并可以跳转到相应界面(npm、豆瓣、yd、canIUse)"),(0,i.kt)("li",{parentName:"ul"},"监听键盘按键完成特定事件(yd)"),(0,i.kt)("li",{parentName:"ul"},"和 mac 上的软件进行联动(dash、ip)"),(0,i.kt)("li",{parentName:"ul"},"手机和 mac 的远端通信")),(0,i.kt)("h3",null,"演讲二: 一些实用的插件"),(0,i.kt)("p",null,"演示一些常用的软件"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"一些有用传插件可查看 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/willfarrell/alfred-workflows"}),"alfred-workflows"))),(0,i.kt)("h3",null,"实用快捷键"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"shift + cmd + c"),": 找寻近期复制到剪切板中的内容。"))}c.isMDXComponent=!0},73691:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Mac"),(0,i.kt)("h4",null,"mac 快捷键"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"shift + cmd + 5"),": 截屏/录屏幕"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cmd + tab"),": 应用切换"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ctrl + cmd + 空格"),": 表情输入"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"alt + cmd + v"),": 图床"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"shift + cmd + c"),": 复制过的内容")),(0,i.kt)("h4",null,"管理 iphone 的图库"),(0,i.kt)("p",null,"痛点: 照片越来越多, 占用 icloud 体积"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"连接 iphone 和 Mac, 在 Mac 上使用 Photos 这个软件将 iphone 的照片都导入 Library, 勾选 iphone 中导入的图片自动删除;"),(0,i.kt)("li",{parentName:"ol"},"在 Mac 端将喜欢的照片打星, 然后右键点击 favourite 里的图片 create 到一个新文件;"),(0,i.kt)("li",{parentName:"ol"},"可以右键点击 Share/Airdrop 将最终筛选好的图片传回 iphone;")),(0,i.kt)("h4",null,"邮箱加密"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"echo xxx | base64\n")),(0,i.kt)("p",null,"得到 bXVqdWVAcGluZHVvZHVvLmNvbQo="),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"echo bXVqdWVAcGluZHVvZHVvLmNvbQo= | base64 -D\n")),(0,i.kt)("h4",null,"网易云音乐迁移到 apple music"),(0,i.kt)("p",null,"使用 TuneMyMusic 导入。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"打开 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://yyrcd.com/2018/11/14/n2s-zh/"}),"https://yyrcd.com/2018/11/14/n2s-zh/"),", 填入网易云歌单的 ID。假如歌单地址是 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://music.163.com/#/playlist?id=2651036663"}),"https://music.163.com/#/playlist?id=2651036663"),", 那么便填写 2651036663;"),(0,i.kt)("li",{parentName:"ol"},"接下来点击 Search, 会显示歌单列表, 然后复制生成的文字版歌单。导出歌单后，打开 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.tunemymusic.com/zh-cn/"}),"TuneMyMusic"),";"),(0,i.kt)("li",{parentName:"ol"},"导入来源选择从文本, 目的地选择 Apple Music 即可;")),(0,i.kt)("h4",null,"Foreign Books Resource"),(0,i.kt)("p",null,"首先支持正版图书, 但是在预算有限的情况下安利下 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://librarygenesis.net/"}),"Library Genesis"),", 亲测能获取各类外文图书资源。"),(0,i.kt)("h4",null,"app"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"MarginNote 3: PDF Resource Reader"),(0,i.kt)("li",{parentName:"ul"},"Eudic: dictianary;")),(0,i.kt)("h4",null,"1password 快捷键"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"cmd + \\: 网页上使用自动填充/其它地方使用直接打开网页+填充登入")),(0,i.kt)("p",null,"疑问点: 转换密码项到登录项"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://sspai.com/post/35195"}),"1Password for Mac 使用指南"))),(0,i.kt)("h3",null,"apple pencel"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Mark up a screenshot")),(0,i.kt)("h3",null,"ipad/iphone"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"shortcuts: 具有创造力的一个功能点;")),(0,i.kt)("h3",null,"输出当前项目目录结构"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'tree -L 3 -I "node_modules"\n')),(0,i.kt)("h3",null,"注册美区 Apple ID"),(0,i.kt)("p",null,"账号名(美区): ",(0,i.kt)("a",u({parentName:"p"},{href:"mailto:muyy95@gmail.com"}),"muyy95@gmail.com"),"\n账户名(国区): ",(0,i.kt)("a",u({parentName:"p"},{href:"mailto:328375795@qq.com"}),"328375795@qq.com")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://zhuanlan.zhihu.com/p/36574047"}),"注册美区 Apple ID"))))}c.isMDXComponent=!0},17299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"ipad"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://post.smzdm.com/p/ar07q09g/"}),"为什么我推荐用 iPad 来记手写笔记？iPad 手写笔记良心指南"),";")))}c.isMDXComponent=!0},45883:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"背景"),(0,i.kt)("p",null,"外接显示屏变卡, 影响编程效率。"),(0,i.kt)("h3",null,"策略"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"查询 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.v2ex.com/t/359003"}),"mac 外接显示器卡成狗"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"重置 SMC",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"经验证无效果。"))),(0,i.kt)("li",{parentName:"ul"},"换 HDMI 线",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"判定不靠谱。"))),(0,i.kt)("li",{parentName:"ul"},"清灰 & 涂硅脂。")))),(0,i.kt)("h3",null,"清灰 & 涂硅脂过程记录"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"清灰前"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/36cde335f7451943a1f932b162338a24.jpg",alt:null}))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"清灰中"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/84704b6eae637593b873397c699f3dcf.jpg",alt:null}))),(0,i.kt)("li",{parentName:"ul"},"涂硅脂",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/5a23f3695611c536e1e8550f3e80817b.jpg",alt:null}))))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"参考资料"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.feng.com/post/11459339"}),"Macbook Pro 2015款 15寸 拆机清灰步骤，详细教程+照片")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.bilibili.com/video/BV1mt4y197L5?p=1&share_medium=iphone&share_plat=ios&share_source=WEIXIN&share_tag=s_i&timestamp=1627138586&unique_k=KsvsAH"}),"Macbook Pro Retina 15'A1398（2013年末，i7，GT 750M）拆卸、清洁、重新组装"))))))}c.isMDXComponent=!0},94627:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"执行 brew install 命令长时间卡在 Updating Homebrew 的解决方法"),(0,i.kt)("p",null,"执行 brew 命令安装软件的时候，跟以下 3 个仓库地址有关："),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"brew.git")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'# 替换成阿里巴巴的 brew.git 仓库地址:\ncd "$(brew --repo)"\ngit remote set-url origin https://mirrors.aliyun.com/homebrew/brew.git\n\n#=======================================================\n\n# 还原为官方提供的 brew.git 仓库地址\ncd "$(brew --repo)"\ngit remote set-url origin https://github.com/Homebrew/brew.git\n')),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"homebrew-core.git")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'# 替换成阿里巴巴的 homebrew-core.git 仓库地址:\ncd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"\ngit remote set-url origin https://mirrors.aliyun.com/homebrew/homebrew-core.git\n\n#=======================================================\n\n# 还原为官方提供的 homebrew-core.git 仓库地址\ncd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"\ngit remote set-url origin https://github.com/Homebrew/homebrew-core.git\n')),(0,i.kt)("ol",u({},{start:3}),(0,i.kt)("li",{parentName:"ol"},"homebrew-bottles")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"# 替换成阿里巴巴的 homebrew-bottles 访问地址:\necho 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles' >> ~/.zshrc\nsource ~/.zshrc\n\n#=======================================================\n\n# 还原为官方提供的 homebrew-bottles 访问地址\nvi ~/.zshrc\n# 然后，删除 HOMEBREW_BOTTLE_DOMAIN 这一行配置\nsource ~/.zshrc\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"see ",(0,i.kt)("a",u({parentName:"p"},{href:"https://learnku.com/articles/18908"}),"执行 brew install 命令长时间卡在 Updating Homebrew 的解决方法"))))}c.isMDXComponent=!0},85644:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"Mac 快速迁移方案"),(0,i.kt)("h3",null,"同步 vscode 配置"),(0,i.kt)("p",null,"多端设备之间同步 Vscode 配置。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"上传端",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"cmd + shift + p 后输入 ",(0,i.kt)("inlineCode",{parentName:"li"},"Sync: Advanced Options")," -> open settings"),(0,i.kt)("li",{parentName:"ul"},"输入相关字段解释:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Gist ID"),": 以笔者的 gist url 为例，",(0,i.kt)("a",u({parentName:"li"},{href:"https://gist.github.com/MuYunyun/fc7a4a0269a459785782797ff83e65a1%EF%BC%8Cgist"}),"https://gist.github.com/MuYunyun/fc7a4a0269a459785782797ff83e65a1，gist")," id 为 fc7a4a0269a459785782797ff83e65a1。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Access Token"),": 位于 github 中，路径为 Settings/Developer settings/Personal access tokens。"))),(0,i.kt)("li",{parentName:"ul"},"Upload Key: shift + alt + u。"))),(0,i.kt)("li",{parentName:"ul"},"使用",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Download Key: shift + alt + d。")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"http://shanalikhan.github.io/2015/12/15/Visual-Studio-Code-Sync-Settings.html"}),"Visual Studio Code Settings Synchronization"),"，该插件与 Language Support for java 插件会产生冲突，使用时候先 disable Language Support for java 插件。")),(0,i.kt)("h3",null,"chrome 插件"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Infinity 标签支持备份数据")),(0,i.kt)("h3",null,"Time Machine"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用移动硬盘备份数据",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.zhihu.com/question/37544123/answer/125566154"}),"Mac 分区"))))))}c.isMDXComponent=!0},12e3:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"本文档收集整理苹果各设备中好用的软件。"),(0,i.kt)("h3",null,"Mac"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://timetreeapp.com/"}),"timetreeapp.com"),": 多人共享日历")),(0,i.kt)("h3",null,"Iphone"),(0,i.kt)("h3",null,"Ipad"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zh.duetdisplay.com/pro"}),"duet"),": 分屏, 16 前 mac 使用 SideCar 功能;"),(0,i.kt)("li",{parentName:"ul"},"[Typeeto]",": use one keyboard to operate every device(Macbook、ipad、iphone);")))}c.isMDXComponent=!0},30988:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"small skill"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"将手掌覆盖在 Apple Watch 的屏幕上时, 屏幕会被熄灭。"),(0,i.kt)("li",{parentName:"ul"},"找手机。"),(0,i.kt)("li",{parentName:"ul"},"遥控拍照。"),(0,i.kt)("li",{parentName:"ul"},"开车接电话。"),(0,i.kt)("li",{parentName:"ul"},"(todo)乘坐地铁。")))}c.isMDXComponent=!0},13583:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"PV: PAGE VIEW"),(0,i.kt)("li",{parentName:"ul"},"UV: Unique Visitor")))}c.isMDXComponent=!0},21084:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"画图工具"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://excalidraw.com/"}),"灵魂画图")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://app.diagrams.net/"}),"流程图")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.mathway.com/Graph"}),"数学画图"))))}c.isMDXComponent=!0},79892:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"chrome plugin"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://chrome.google.com/webstore/detail/gitzip-for-github/ffabmkklhbepgcgfonabamgnfafbdlkn"}),"git zip"),": quick download one detailed file")),(0,i.kt)("h3",null,"useful websets"),(0,i.kt)("p",null,"This page will collect some useful websets."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/Alvin9999/new-pac/wiki/ss%E5%85%8D%E8%B4%B9%E8%B4%A6%E5%8F%B7"}),"ss free account")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/Alvin9999/new-pac/wiki/v2ray%E5%85%8D%E8%B4%B9%E8%B4%A6%E5%8F%B7"}),"v2ray free account")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/abhisheknaiidu/awesome-github-profile-readme"}),"awesome-github-profile-readme"))),(0,i.kt)("h3",null,"probot"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://probot.github.io/apps/"}),"probot"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://probot.github.io/apps/auto-comment/"}),"Auto-comment")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://probot.github.io/apps/pull/"}),"pull"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/a6745efdee034049cea71c2b2d52b998.jpg",alt:null}))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/svanboxel/delete-merged-branch"}),"delete-merged-branch")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://probot.github.io/apps/stale/"}),"stale"),": use")))),(0,i.kt)("h3",null,"skils"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ButterAndButterfly/GithubHost"}),"GithubHost"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"原理: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://blog.csdn.net/qq_38232598/article/details/91346392"}),"解决 Github 网页上图片显示失败的问题"))))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"待验证: ",(0,i.kt)("a",u({parentName:"p"},{href:"https://juejin.cn/post/6844904193170341896"}),"GitHub无法访问、443 Operation timed out的解决办法"))),(0,i.kt)("h3",null,"修改 host 文件"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"sudo vi /etc/hosts\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"github 访问慢一般可以修改该目录。",(0,i.kt)("a",u({parentName:"p"},{href:"https://zhuanlan.zhihu.com/p/94521827"}),"方法"),", 经验证该方法同样适用于 git push 推不上的 case")),(0,i.kt)("h3",null,"FAQ"),(0,i.kt)("p",null,"Q: remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead."),(0,i.kt)("p",null,"A: ",(0,i.kt)("a",u({parentName:"p"},{href:"https://stackoverflow.com/questions/68775869/support-for-password-authentication-was-removed-please-use-a-personal-access-to"}),"https://stackoverflow.com/questions/68775869/support-for-password-authentication-was-removed-please-use-a-personal-access-to")))}c.isMDXComponent=!0},11668:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"目标: 可以观看英文视频，提高阅读英文文章的效率")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/02b02b787e23b6233d63a2fbf798d1a0.jpg",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1000 单词能理解 75% 内容。"),(0,i.kt)("li",{parentName:"ul"},"7000 单词是一个分水岭, 能理解 90% 内容。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"超量输入: 通过背诵大量的单词并快速复习，遗忘率虽然相对于定量背诵高，但是可以以量取胜。 比如:一天背 20 个词，一个月能背 600 个，假设形成长期记忆的占 80%，那最后能记住的便是 480 个。 但是如果我用相同时间，每天快速看 100 个词，一个月能看 3000 个。假设能记住 30%，最后能记住 900 个，远远大于第一种方式。 适用于在 1000~7000 词汇量这个学习阶段。")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://byoungd.gitbook.io/english-level-up-tips/part-i/2-vocabulary"}),"单词篇")," 云单词本",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"当前阶段, 适合超量学习。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://byoungd.gitbook.io/english-level-up-tips/part-i/3-listening"}),"听力篇"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"多选一: 确认 VOA、BBC、各种 Podcast"),(0,i.kt)("li",{parentName:"ul"},"误区: 很多人一开始就尝试 VOA，这是不推荐的；即使是 VOA 慢速英语，你也会遇到生词太多导致卡住、丧失继续听下去的兴趣的情况； 有些喜欢钻牛角尖的同学会问：听一遍没听懂，那我听 10 遍呢？ 事实上如果你不去通过听力材料提供的文本将生词这关先过了，听 100 遍也是收效甚微的。这与我们提倡的高效学习相悖。英美剧对初学者来说就更不是",(0,i.kt)("inlineCode",{parentName:"li"},"友好"),"的学习材料，根据自己的词汇量选择合适的听力材料，一步步来，循序渐进。"),(0,i.kt)("li",{parentName:"ul"},"精听:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"《新概念英语》第三册和第四册"))),(0,i.kt)("li",{parentName:"ul"},"泛听",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"电视剧",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"老友记、摩登家庭"))),(0,i.kt)("li",{parentName:"ul"},"电影",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"《怦然心动》 -《教父》 -《机器人总动员》 -《控方证人》 -《桃色公寓》",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Podcast 和带 lrc 的美剧录音比纯看美剧要少很多干扰，在同时摄入的信息量上减少了视觉信息这部分，学习效果更好。"))))),(0,i.kt)("li",{parentName:"ul"},"频道",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.youtube.com/c/engvidRonnie/videos"}),"EnglishLessons4U - Learn English with Ronnie! [engVid]"),": 力荐 学习英语的基础语法，很多小技巧都挺实用。最最重要的是，Ronnie 老师实在是太幽默啦，学习的过程中你会感受到快乐！"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.youtube.com/channel/UClVbhSLxwws-KSsPKz135bw"}),"TopMovieClip")," 漫威超级英雄电影精彩剪辑，很养眼。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.youtube.com/channel/UC8BQGqcCSFq6RC9feEGUGFA"}),"BestClips 4")," 超级英雄电影相关"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.youtube.com/channel/UCQphRgAhj5UxktrQNP3WF5g"}),"Disney UK"),": 冰雪奇缘主题曲 FROZEN 的播放量高达 10 亿!"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.youtube.com/channel/UCmKdSrwf1e8coqAzUsrVHZw"}),"SiaVEVO"),": 个人非常喜欢，视频质量感人，引人深思")))))))),(0,i.kt)("h3",null,"连读技巧"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://mp.weixin.qq.com/s?__biz=MzI5ODE3NDQ0OQ==&mid=100000160&idx=1&sn=c7247b9fadb68c91d6338200d13c08d3&scene=19#wechat_redirect"}),"元音连读"),", 若单词末和单词头是元音标相邻, 则再其间加上 ",(0,i.kt)("inlineCode",{parentName:"li"},"/y/")," 或者 ",(0,i.kt)("inlineCode",{parentName:"li"},"/w/"),"(哪个顺畅读哪个)"),(0,i.kt)("li",{parentName:"ul"},"[辅音连读]",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://mp.weixin.qq.com/s?__biz=MzI5ODE3NDQ0OQ==&mid=100000166&idx=1&sn=69662dcba92ff228c790eea0f70c591d&scene=19#wechat_redirect"}),"d-you"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"/d/+/j/")," 连读为 ",(0,i.kt)("inlineCode",{parentName:"li"},"/dʒ/"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"d-you")," 的连读音标为 ",(0,i.kt)("inlineCode",{parentName:"li"},"didʒu"),", For example: woul",(0,i.kt)("inlineCode",{parentName:"li"},"d y"),"ou"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://mp.weixin.qq.com/s?__biz=MzI5ODE3NDQ0OQ==&mid=100000175&idx=1&sn=ae7480dc72f5f44d60dab9d2ac73de6b&scene=19#wechat_redirect"}),"s-you"),": 辅音 ",(0,i.kt)("inlineCode",{parentName:"li"},"/s/")," 与 ",(0,i.kt)("inlineCode",{parentName:"li"},"/j/")," 连读时, 被同化为 ",(0,i.kt)("inlineCode",{parentName:"li"},"/∫/"),", For example: mis",(0,i.kt)("inlineCode",{parentName:"li"},"s y"),"ou、cros",(0,i.kt)("inlineCode",{parentName:"li"},"s y"),"our mind"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://mp.weixin.qq.com/s?__biz=MzI5ODE3NDQ0OQ==&mid=100000252&idx=1&sn=073056ac9cf5880748031cc6b797a53d&scene=19#wechat_redirect"}),"t-you"),": 辅音 ",(0,i.kt)("inlineCode",{parentName:"li"},"/t/")," 与 ",(0,i.kt)("inlineCode",{parentName:"li"},"/j/")," 连读时，被同化为 ",(0,i.kt)("inlineCode",{parentName:"li"},"/t∫/"),", For example: ge",(0,i.kt)("inlineCode",{parentName:"li"},"t y"),"ou、withou",(0,i.kt)("inlineCode",{parentName:"li"},"t y"),"ou"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://mp.weixin.qq.com/s?__biz=MzI5ODE3NDQ0OQ==&mid=100000271&idx=1&sn=af737ffae12ad46bc522acd38d3d258e&scene=19#wechat_redirect"}),"z-you"),": 辅音 ",(0,i.kt)("inlineCode",{parentName:"li"},"/z/")," 与 ",(0,i.kt)("inlineCode",{parentName:"li"},"/j/")," 连读时，被同化为 ",(0,i.kt)("inlineCode",{parentName:"li"},"/ʒ/"),", For example: A",(0,i.kt)("inlineCode",{parentName:"li"},"s u"),"sual、I love you becau",(0,i.kt)("inlineCode",{parentName:"li"},"se y"),"ou are you."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"wanna"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"非正式情景下，wanna 常用来代替 want to 或 want a.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"eg: I wanna hear him say"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"gonna"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"口语中, gonna 常常用于代替 going to",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Nothing's gonna change my love for you."),(0,i.kt)("li",{parentName:"ul"},"I'm not gonna miss you."))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"gotta"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"口语中，got to 常常缩写为 gotta, 和 have/has to 意思接近; 表示不得不、必须。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"kinda"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"在非正式情景中, kind of 可以用 ",(0,i.kt)("inlineCode",{parentName:"li"},"kinda")," 代替。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'cause/'cos"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"在口语中, because 常常简略为 ",(0,i.kt)("inlineCode",{parentName:"li"},"'cause/'cos"),"。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ain’t"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"口语中, 是 am not/is not/are not/have not/has not/will not 的缩写。")))),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"http://mp.weixin.qq.com/mp/homepage?__biz=MzI5ODE3NDQ0OQ==&hid=2&sn=9b6dd88b8303196473c2a6c28b995c42&scene=25#wechat_redirect"}),"learning English through listening to music"),": 当前看到第 14 节")),(0,i.kt)("h3",null,"resource"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/byoungd/English-level-up-tips-for-Chinese"}),"English-level-up-tips-for-Chinese"),": github 16k star.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://byoungd.gitbook.io/english-level-up-tips/"}),"gitbook"))))))}c.isMDXComponent=!0},5024:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"oh-my-zsh"),(0,i.kt)("p",null,"在 Unix/Linux 的世界里，人机交互的工具就是 shell 了，由于各个发行版的系统默认 shell 都是 bash，所以 bash 是最为人所知的。其实还有一款效率远远超过 bash 的 shell，叫做 zsh。其实 zsh 在 1990 年的时候就出现了，只比 bash 晚一年，而且 zsh 在 bash 的基础上做了很多功能上、性能上的改进。"),(0,i.kt)("p",null,"zsh 有很多 bash 所没有的功能，但是 zsh 的初期配置太过繁琐，流行率一直不高，直到 github 上 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/ohmyzsh/ohmyzsh"}),"oh-my-zsh")," 项目的出现，使大家使用 zsh 的便捷性大大提高，从 macOS Catalina 版开始默认使用 zsh，使得 zsh 得到了更加广泛的关注。现在 Kail Linux 也默认是使用 zsh。"),(0,i.kt)("h3",null,"查看当前 shell"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"echo $SHELL\n# 返回: /bin/bash\n")),(0,i.kt)("h3",null,"安装 zsh"),(0,i.kt)("p",null,"Ubuntu:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo apt install zsh\n")),(0,i.kt)("h3",null,"设置 zsh 为默认 shell"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo su\nsudo chsh -s /bin/zsh\n\necho $SHELL\n# 返回: /bin/zsh\n")),(0,i.kt)("h3",null,"安装 oh-my-zsh"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'sh -c "$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"\n')),(0,i.kt)("h3",null,"oh-my-zsh 常见快捷键"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"take: 创建一个文件夹并进入该文件夹")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/robbyrussell/oh-my-zsh/wiki/Cheatsheet"}),"oh-my-zsh 常见快捷键"))),(0,i.kt)("h3",null,"快捷 git 命令查阅"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cat ~/.oh-my-zsh/plugins/git/git.plugin.zsh\n")),(0,i.kt)("p",null,"一些常用命令:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"ga . & gcmsg '..' & gp\ngst === git status\ngco === git checkout\ngcb === git checkout -b\ngb === git branch\n")))}c.isMDXComponent=!0},25294:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"流程图相关操作"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"cmd + d: 复制")),(0,i.kt)("p",null,"在图形的 4 个边都可进行磁性链接: Edit - magnets - position"))}c.isMDXComponent=!0},27676:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://dev.to/jnschrag/10-lessons-learned-conducting-code-reviews-5di6"}),"如何 code review")))}c.isMDXComponent=!0},5306:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"场景"),(0,i.kt)("p",null,"组内有两个人, 在一堆任务中部分任务是双方都想做的, 部分任务是双方都不想做的。这种情况该如何处理？"),(0,i.kt)("p",null,"解决方法: 一个人分任务, 另一个人挑任务。"),(0,i.kt)("h3",null,"兵长语录"),(0,i.kt)("p",null,"在团队内建立「反馈」机制，通过'做事儿'的方式，逐步形成自己的方法论和节奏。"),(0,i.kt)("p",null,"要刻意锻炼划分问题、达成共识的沟通技巧。"),(0,i.kt)("p",null,"劝君：\n莫论阳春白雪，更喜闻下里巴人\n蹙蹙靡骋，字字斟酌，不若侃侃如也，融融自乐\n怡然佳句，返璞去饰，贵「真」矣！"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"盘点",(0,i.kt)("inlineCode",{parentName:"li"},"价值"),", 探索抓手;"),(0,i.kt)("li",{parentName:"ul"},"目标量化, 快速试错;"),(0,i.kt)("li",{parentName:"ul"},"专项投入, 做深做透;"),(0,i.kt)("li",{parentName:"ul"},"定期复盘, 以终为始;")),(0,i.kt)("h4",null,"如无必要,勿增实体"),(0,i.kt)("p",null,"如何根据团队主要目标制定项目目标呢？其中一个有效方法是：多问几个",(0,i.kt)("inlineCode",{parentName:"p"},"为什么"),"。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"xxx 解决了项目或团队中遇到的什么问题（",(0,i.kt)("inlineCode",{parentName:"li"},"现状分析，基础质量，迭代效率"),"）？"),(0,i.kt)("li",{parentName:"ul"},"如果不投入人力研发 xxx ，会遇到哪些问题（",(0,i.kt)("inlineCode",{parentName:"li"},"场景演绎"),"）？"),(0,i.kt)("li",{parentName:"ul"},"研讨会开下来，框架使用者反馈如何（",(0,i.kt)("inlineCode",{parentName:"li"},"合作方反馈，满意度"),"）？"),(0,i.kt)("li",{parentName:"ul"},"有多少团队/平台/业务线/项目可能使用 xxx （",(0,i.kt)("inlineCode",{parentName:"li"},"调用量"),"）？ 他们为什么愿意用，我们如何推广（",(0,i.kt)("inlineCode",{parentName:"li"},"影响力"),"）？"),(0,i.kt)("li",{parentName:"ul"},"xxx 框架有哪些竞品？ 是否有替代品（",(0,i.kt)("inlineCode",{parentName:"li"},"行业价值"),"）？"),(0,i.kt)("li",{parentName:"ul"},"一期项目开发的里程碑是什么（",(0,i.kt)("inlineCode",{parentName:"li"},"指标与进展"),"）？做到最终形态项目是怎样的（",(0,i.kt)("inlineCode",{parentName:"li"},"「终局观」意识"),"）？")),(0,i.kt)("h3",null,"个人感悟"),(0,i.kt)("p",null,"多使用小黄鸭笔记法, 就能理出眉目, 理逻辑的时候可能觉得浪费时间, 但是这往往是解决问题最高效的方法。"))}c.isMDXComponent=!0},67727:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"重构改善既有代码的设计"),(0,i.kt)("p",null,"本文是重构改善既有代码的设计阅读笔记"),(0,i.kt)("h3",null,"重构与性能优化"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"重构: 目标是更易理解;(面向人)"),(0,i.kt)("li",{parentName:"ul"},"性能优化: 目标是使程序运行更快;(面向机器)")),(0,i.kt)("h3",null,"重构的好处"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"帮助快速找到 bug"),(0,i.kt)("li",{parentName:"ol"},"提高编程速度")),(0,i.kt)("h3",null,"重构手段"),(0,i.kt)("h4",null,"提炼函数(Extract Function)"),(0,i.kt)("p",null,"背景: 一整段函数不利于阅读;\n方式: 按语义进行重构, 将不利于阅读的函数其拆分成小份, 并给它们取上恰当的名字以便于阅读;"),(0,i.kt)("h4",null,"内联函数(Inline Function)"),(0,i.kt)("p",null,"背景: 函数拆得太细, 和提炼函数相反的一种重构手段;\n方式: 可以逐行替换;"),(0,i.kt)("h4",null,"函数重命名"),(0,i.kt)("p",null,"当希望修改的函数名存在大量使用时, 可以采用渐进式的做法(旧代码调用旧函数, 旧函数调用新函数)对函数重命名:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function circum(radius) {\n  return 2 * Math.PI * radius\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function circum(radius) {\n  return circumference(radius)\n}\n\nfunction circumference(radius) {\n  return 2 * Math.PI * radius\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"如何给一个 function 起好名字: 先给 function 写一段注释, 再把该注释压缩为函数的名字。")),(0,i.kt)("h4",null,"统一访问原则"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Test {\n  a() {\n    return 'a'\n  }\n\n  get b() {\n    return 'b'\n  }\n}\n\nvar test = new Test()\n\ntest.a() // 'a'\ntest.b   // 'b'\n")),(0,i.kt)("p",null,"推崇 ",(0,i.kt)("inlineCode",{parentName:"p"},"get")," 的写法, 用户调用该类的时候无需关系是字段还是推演计算的值。"),(0,i.kt)("p",null,"当前阅读到: 拆分阶段。"))}c.isMDXComponent=!0},93516:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Reading the HTML in the MDN"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/6ffc01e7309a9456198b4c3336d23fda.jpg",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Content categories;"),(0,i.kt)("li",{parentName:"ul"},"Permitted content;"),(0,i.kt)("li",{parentName:"ul"},"Tag omission: if the start or end tag can be omit;"),(0,i.kt)("li",{parentName:"ul"},"Permitted parents;"),(0,i.kt)("li",{parentName:"ul"},"Permitted ARIA roles;"),(0,i.kt)("li",{parentName:"ul"},"DOM interface;")),(0,i.kt)("h3",null,"Content categories"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/4bd17ab21f9619c48f08f3d6092d1db9.jpg-400",alt:null}))),(0,i.kt)("h3",null,"Question 1: What is the height of span?"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<span style="font-size: 16px; line-height: 1">hello</span>\n')),(0,i.kt)("p",null,"From ",(0,i.kt)("a",u({parentName:"p"},{href:"https://web.stanford.edu/class/cs193x/lectures/05/block-inline#height-and-width-of-inline-elements"}),"Rules Between Block Elements And Inline Blocks"),", we can learn that ",(0,i.kt)("inlineCode",{parentName:"p"},"you can't set any with/height/line-height css property to inline-element.")," So the height of span is depende on the default browser."))}c.isMDXComponent=!0},64788:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"跨域二三事"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://oqhtscus0.bkt.clouddn.com/62b89b89373dc86916a60efc28bdd15e.jpg-muyy",alt:null}))),(0,i.kt)("p",null,"跨域是日常开发中经常开发中经常会接触到的一个重难点知识，何不总结实践一番，从此心中对之了无牵挂。"),(0,i.kt)("h3",null,"同源策略"),(0,i.kt)("p",null,"之所以会出现跨域解决方案，是因为同源策略的限制。同源策略规定了如果",(0,i.kt)("inlineCode",{parentName:"p"},"两个 url 的协议、域名、端口中有任何一个不等，就认定它们跨源了"),"。比如下列表格列出和 ",(0,i.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:3000")," 比较的同源检测的结果，"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"因为跨域的前置条件是两个 url, 所以跨域一般是针对",(0,i.kt)("inlineCode",{parentName:"p"},"客户端场景"),"。")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"url"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"结果"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"原因"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),(0,i.kt)("a",u({parentName:"td"},{href:"http://127.0.0.1:3000/index"}),"http://127.0.0.1:3000/index")),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"同源"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),(0,i.kt)("a",u({parentName:"td"},{href:"https://127.0.0.1:3000"}),"https://127.0.0.1:3000")),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"跨源"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"协议不同")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"https://localhost:3000"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"跨源"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"域名不同")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),(0,i.kt)("a",u({parentName:"td"},{href:"http://127.0.0.1:3001"}),"http://127.0.0.1:3001")),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"跨源"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"端口不同")))),(0,i.kt)("p",null,"那跨源有什么后果呢? 归纳有三"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"不能获取 Cookie、LocalStorage、IndexedDB;"),(0,i.kt)("li",{parentName:"ul"},"不能获取 dom 节点;"),(0,i.kt)("li",{parentName:"ul"},"不能进行一般的 Ajax 通信;")),(0,i.kt)("p",null,"跨域解决方案的出现就是为了解决以上痛处。"),(0,i.kt)("h3",null,"JSONP 跨域"),(0,i.kt)("p",null,"提到 JSONP 跨域，不得不先提到 ",(0,i.kt)("inlineCode",{parentName:"p"},"script")," 标签，和 ",(0,i.kt)("inlineCode",{parentName:"p"},"img"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"iframe")," 标签类似，这些标签是不受同源策略限制的，JSONP 的核心就是通过动态加载 script 标签来完成对目标 url 的请求。"),(0,i.kt)("p",null,"先来看一段 JSONP 调用的 ",(0,i.kt)("inlineCode",{parentName:"p"},"Headers")," 部分，字段如下："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-http"}),"Request URL:http://127.0.0.1:3000/?callback=handleResponse\nRequest Method:GET\nStatus Code:200 OK\nRemote Address:127.0.0.1:3000\n")),(0,i.kt)("p",null,"可以很鲜明地发现在 ",(0,i.kt)("inlineCode",{parentName:"p"},"Request URL")," 中有一句 ",(0,i.kt)("inlineCode",{parentName:"p"},"?callback=handleResponse"),"，这个 callback 后面跟着的 handleResponse 即回调函数名（可以任意取），服务端会接收到这个参数然后拼接成形如 ",(0,i.kt)("inlineCode",{parentName:"p"},"handleResponse(JSON)")," 的形式返还给前端(这也是 JSONP == JSON with padding 的原因吧)，如下图，这时候浏览器就会自动调用我们事先定义好的 handleResponse 函数。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://oqhtscus0.bkt.clouddn.com/3a484a1ca0fbb4be46fed582828c5847.jpg-200",alt:null}))),(0,i.kt)("p",null,"前端代码示例：(源为 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://127.0.0.1:3001"}),"http://127.0.0.1:3001"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function handleResponse(res) {\n  console.log(res) // {text: \"jsonp\"}\n}\n\nconst script = document.createElement('script')\nscript.src = 'http://127.0.0.1:3000?callback=handleResponse'\ndocument.head.appendChild(script)\n")),(0,i.kt)("p",null,"服务端代码示例：(源为 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://127.0.0.1:3000"}),"http://127.0.0.1:3000"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const server = http.createServer((req, res) => {\n  if (~req.url.indexOf('?callback')) { // 简单处理 JSONP 跨域的时候\n    const obj = {\n      \"text\": 'jsonp',\n    }\n    const callback = req.url.split('callback=')[1]\n    const json = JSON.stringify(obj)\n    const build = callback + `(${json})`\n    res.end(build) // 这里返还给前端的是拼接好的 JSON 对象\n  }\n});\n")),(0,i.kt)("p",null,"可以看出 JSONP 具有直接访问响应文本的优点，但是要想确认 JSONP 是否请求失败并不容易，因为 script 标签的 onerror 事件还未得到浏览器广泛的支持，此外它仅能支持 GET 方式调用。"),(0,i.kt)("h3",null,"CORS 跨域"),(0,i.kt)("p",null,"CORS(Cross-Origin Resource Sharing) 可以理解为加强版的 Ajax，也是目前主流的跨域解决方案。它的核心思想即",(0,i.kt)("inlineCode",{parentName:"p"},"前端与后端进行 Ajax 通信时，通过自定义 HTTP 头部设置从而决定请求或响应是否生效"),"。"),(0,i.kt)("p",null,"比如前端代码(url 为 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://127.0.0.1:3001)%E5%86%99%E4%BA%86%E6%AE%B5"}),"http://127.0.0.1:3001)写了段")," Ajax，代码如下："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const xhr = new XMLHttpRequest()\nxhr.onreadystatechange = function () {\n  if (xhr.readyState === 4) {\n    if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) {\n      console.log('responseTesx:' + xhr.responseText)\n    }\n  }\n}\nxhr.open('get', 'http://127.0.0.1:3000', true)\nxhr.send()\n")),(0,i.kt)("p",null,"因为端口不一致的关系这时候导致不同源了，这时候会在 Request Headers 中发现多了这么一行字段，"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-http"}),"Origin: http://127.0.0.1:3001\n")),(0,i.kt)("p",null,"而且控制台中会报出如下错误:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-http"}),"Failed to load http://127.0.0.1:3000/: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://127.0.0.1:3001' is therefore not allowed access.\n")),(0,i.kt)("p",null,"这时候就需要在服务端设置字段 ",(0,i.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Origin"),"，它的作用就是设置允许来自什么源的请求，如果值设置为 ",(0,i.kt)("inlineCode",{parentName:"p"},"*"),"，表明允许来自任意源的请求。服务端代码示例如下："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"http.createServer((req, res) => {\n  res.setHeader('Access-Control-Allow-Origin', 'http://127.0.0.1:3001') // 设置允许来自 http://127.0.0.1:3001 源的请求\n})\n")),(0,i.kt)("p",null,"CORS 分为简单请求以及非简单请求。可以这么区分，如果请求方法为 ",(0,i.kt)("inlineCode",{parentName:"p"},"POST"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"GET"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"HEAD")," 时为简单请求，其它方法如 ",(0,i.kt)("inlineCode",{parentName:"p"},"PUT"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"DELETE")," 等为非简单请求，如果是非简单请求的话，可以在 chrome 的 Network 中看到多了一次 ",(0,i.kt)("inlineCode",{parentName:"p"},"Request Method")," 为 ",(0,i.kt)("inlineCode",{parentName:"p"},"OPTIONS")," 的请求。如下图:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/f397ac2c565828f38516c8be2ebc1b4b.jpg-400",alt:null}))),(0,i.kt)("p",null,"可以把这个请求称为预请求，用白话文翻译下，浏览器询问服务器，'服务器大哥，我这次要进行 PUT 请求，你给我发张通行证呗'，服务器大哥见浏览器小弟这么殷勤，于是给了它发了张通行证，叫作 ",(0,i.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Methods:PUT"),"，接着浏览器就能愉快地进行 PUT 请求了。服务端代码示例如下："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"http.createServer((req, res) => {\n  res.setHeader('Access-Control-Allow-Origin', 'http://127.0.0.1:3001')\n  res.setHeader('Access-Control-Allow-Methods', 'http://127.0.0.1:3001')\n})\n")),(0,i.kt)("p",null,"聊完简单请求和非简单请求的区别后，再来看看如何利用 CORS 实现 Cookie 的跨域传送，首先在服务器随意设置个 Cookie 值下发到浏览器，如果非跨域的情况下，浏览器再次请求服务器时就会带上服务器给的 Cookie，但是跨域的时候怎么办呢？不卖关子了，需在服务端设置 ",(0,i.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Credentials")," 字段以及在客户端设置 ",(0,i.kt)("inlineCode",{parentName:"p"},"withCredentials")," 字段，两者缺一不可，代码如下："),(0,i.kt)("p",null,"前端代码示例：(源为 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://127.0.0.1:3001"}),"http://127.0.0.1:3001"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const xhr = new XMLHttpRequest()\n...\nxhr.withCredentials = true // 传 cookie 的时候前端要做的\nxhr.open('get', 'http://127.0.0.1:3000', true)\nxhr.send()\n")),(0,i.kt)("p",null,"服务端代码示例: (源为 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://127.0.0.1:3000"}),"http://127.0.0.1:3000"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const server = http.createServer((req, res) => {\n  res.setHeader('Access-Control-Allow-Origin', 'http://127.0.0.1:3001') // 必填：接受域的请求\n  res.setHeader('Set-Cookie', ['type=muyy']) // 下发 cookie\n  res.setHeader('Access-Control-Allow-Credentials', true) // ② 选填：是否允许浏览器传 cookie 到服务端，只能设置为 true\n  res.end('date from cors')\n})\n")),(0,i.kt)("p",null,"至此介绍了几个比较关键 HTTP 头在 CORS 中的实践运用，更为详细的资料可以参阅 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"}),"Cross-Origin Resource Sharing"),"，最后概括下 CORS 的优缺点，优点是支持所有类型的 HTTP 方法，缺点是有些老的浏览器不支持 CORS。"),(0,i.kt)("h3",null,"hash + iframe"),(0,i.kt)("p",null,"在文章最开始提到过 iframe 标签也是不受同源策略限制的标签之一，hash + iframe 的跨域核心思想就是，在 A 源中通过动态改变 iframe 标签的 src 的哈希值，在 B 源中通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"window.onhashchange")," 来捕获到相应的哈希值。思路不难直接上代码："),(0,i.kt)("p",null,"A 页面代码示例(源为 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://127.0.0.1:3000"}),"http://127.0.0.1:3000"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),"<body>\n  <iframe src=\"http://127.0.0.1:3001\"></iframe>\n  <script>\n    const iframe = document.getElementsByTagName('iframe')[0]\n    iframe.setAttribute('style', 'display: none')\n    const obj = {\n      data: 'hash'\n    }\n    iframe.src = iframe.src + '#' + JSON.stringify(obj) // ① 关键语句\n  <\/script>\n</body>\n")),(0,i.kt)("p",null,"B 页面代码示例(源为 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://127.0.0.1:3001"}),"http://127.0.0.1:3001"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'window.onhashchange = function() { // ① 关键语句\n  console.log(\'来自 page2 的代码 \' + window.location.hash) // 来自 page2 的代码 #{"data":"hash"}\n}\n')),(0,i.kt)("p",null,"刷新 A 页面，可以发现在控制台打印了如下字段，至此实现了跨域。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'来自 page2 的代码 #{"data":"hash"}\n')),(0,i.kt)("p",null,"这种方式进行跨域优点是支持页面和页面间的通信，缺点也是只支持 GET 方法和单向的跨域通信。"),(0,i.kt)("h3",null,"postMessage"),(0,i.kt)("p",null,"为了实现跨文档传送(cross-document messaging)，简称 XDM。HTML5 给出了一个 api —— postMessage，postMessage() 方法接收两个参数：",(0,i.kt)("inlineCode",{parentName:"p"},"发送消息"),"以及",(0,i.kt)("inlineCode",{parentName:"p"},"消息接收方所在域的字符串"),"。代码示例如下:"),(0,i.kt)("p",null,"A 页面代码示例(源为 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://127.0.0.1:3000"}),"http://127.0.0.1:3000"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),"<body>\n  <iframe src=\"http://127.0.0.1:3001\"></iframe>\n  <script>\n    const iframe = document.getElementsByTagName('iframe')[0]\n    iframe.setAttribute('style', 'display: none')\n    iframe.onload = function() { // 此处要等 iframe 加载完毕，后续代码才会生效\n      iframe.contentWindow.postMessage('a secret', 'http://127.0.0.1:3001')\n    }\n  <\/script>\n</body>\n")),(0,i.kt)("p",null,"B 页面代码示例(源为 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://127.0.0.1:3001"}),"http://127.0.0.1:3001"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"window.addEventListener('message', function(event) {\n  console.log('From page1 ' + event.data)\n  console.log('From page1 ' + event.origin)\n}, false)\n")),(0,i.kt)("p",null,"刷新 A 页面，可以发现在控制台打印了如下字段，至此实现了跨域。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"From page1 a secret\nFrom page1 http://127.0.0.1:3000\n")),(0,i.kt)("p",null,"这种跨域方式优点是是支持页面和页面间的双向通信，缺点也是只能支持 GET 方法调用。"),(0,i.kt)("h3",null,"WebSockets"),(0,i.kt)("p",null,"WebSockets 属于 HTML5 的协议，它的目的是在一个持久连接上建立全双工通信。由于 WebSockets 采用了自定义协议，所以优点是客户端和服务端发送数据量少，缺点是要额外的服务器。基础的使用方法如下："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const ws = new WebSocket('ws://127.0.0.1:3000')\nws.onopen = function() {\n  // 连接成功建立\n}\n\nws.onmessage = function(event) {\n  // 处理数据\n}\n\nws.onerror = function() {\n  // 发生错误时触发，连接中断\n}\n\nws.onclose = function() {\n  // 连接关闭时触发\n}\n")),(0,i.kt)("p",null,"当然一般我们会使用封装好 WebSockets 的第三方库 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/socketio/socket.io"}),"socket.io"),"，这里具体就不展开了。"),(0,i.kt)("h3",null,"项目地址"),(0,i.kt)("p",null,"前文所述五种跨域实践的 demo 已上传至 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/cross-domain"}),"cross-domain"),"，前端环境基于 create-react-app 搭建，后端环境用 node 搭建。"),(0,i.kt)("p",null,"当然跨域方式还有一些其他方式的实现，后续酌情慢慢填坑~"))}c.isMDXComponent=!0},25603:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"HTTP 协议主要特点"),(0,i.kt)("p",null,"无状态, 无连接"),(0,i.kt)("h3",null,"HTTP 报文组成部分"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"请求报文: 请求行 请求头 空行 请求体"),(0,i.kt)("li",{parentName:"ul"},"响应报文: 响应行 响应头 空行 响应体")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"请求行里包括请求方法, url, http 版本; 响应行里包括状态码, http 版本, 状态说明;")),(0,i.kt)("h3",null,"HTTP 协议类: POST 和 GET 的区别"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Get 有长度限制, Post 没有"),(0,i.kt)("li",{parentName:"ul"},"Get 请求, 倒退按钮是无害的, Post 会重新发起请求"),(0,i.kt)("li",{parentName:"ul"},"Get 会主动缓存, Post 不会"),(0,i.kt)("li",{parentName:"ul"},"Get 请求通过 url 传递, Post 通过 request body 传递")),(0,i.kt)("h3",null,"HTTP 状态码"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"1xx:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"101: 需要切换协议(使用 Websocket 开始阶段是 http 协议, 中间切换到 WebSocket 协议, 此时返回的状态码是 101 表示后续协议还需切换)")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"2xx: 成功状态码")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"3xx: 重定向状态码")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"301: 永久重定向"),(0,i.kt)("li",{parentName:"ul"},"302: 临时重定向"),(0,i.kt)("li",{parentName:"ul"},"304: not Modified")),(0,i.kt)("p",null,"(永久重定向中搜索引擎不会保留原有的地址, 临时重定向中搜索引擎会保留原有的地址)"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"4xx: 客户端错误状态码")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"400: Bad Request(错误的请求)"),(0,i.kt)("li",{parentName:"ul"},"401: Unauthorized(未认证)"),(0,i.kt)("li",{parentName:"ul"},"403: Forbidden Request(拒绝访问)"),(0,i.kt)("li",{parentName:"ul"},"404: Not Found(未找到)")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"5xx: 服务端错误状态码")),(0,i.kt)("h3",null,"HTTP 事物时延"),(0,i.kt)("p",null,"DNS 解析、连接、传输、处理。"),(0,i.kt)("h3",null,"HTTP 连接"),(0,i.kt)("p",null,"管道化连接: 依赖于 Http/1.1 是持久连接的。"),(0,i.kt)("h3",null,"强缓存和协商缓存"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"强缓存是不经过服务器的, 协商缓存是经过服务器的")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"强缓存相关字段(Expires(响应头), Cache-Control(响应头))"),(0,i.kt)("li",{parentName:"ul"},"协商缓存相关字段(Last-Modified(响应头), If-Modified-Since(请求头), Etag(响应头), If-None-Match(请求头))")),(0,i.kt)("p",null,"如下为 HTTP 缓存机制流程图:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/7aa47d51ccc2fe5a66f75c542f014f2e.jpg-400",alt:null}))),(0,i.kt)("h3",null,"HTTP 2.0"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"二进制流"),(0,i.kt)("li",{parentName:"ul"},"多路复用"),(0,i.kt)("li",{parentName:"ul"},"资源推送优先级")),(0,i.kt)("h3",null,"HTTPS"),(0,i.kt)("p",null,"客户端和服务端都有自己的公钥和私钥, 下面来表述下 HTTPS 的双向加密建立。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"客户端通知服务端建立请求"),(0,i.kt)("li",{parentName:"ol"},"服务端发送公钥"),(0,i.kt)("li",{parentName:"ol"},"客户端发送'验证串+服务端公钥' && 客户端公钥"),(0,i.kt)("li",{parentName:"ol"},"服务端使用私钥取得验证串与客户端公钥一起发送给客户端"),(0,i.kt)("li",{parentName:"ol"},"客户端使用客户端私钥来获取验证串是否匹配")),(0,i.kt)("h4",null,"协议解析"),(0,i.kt)("p",null,"多了一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"upgrade-insecure-requests")," 的字段。该字段让页面打开后的请求自动变为 ",(0,i.kt)("inlineCode",{parentName:"p"},"https"),"。"))}c.isMDXComponent=!0},49303:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"To READ:116"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Web 服务器")))}c.isMDXComponent=!0},25031:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"题目: 浏览器从加载页面到渲染页面的过程")),(0,i.kt)("p",null,"加载阶段:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"dns 服务器将域名解析成 ip"),(0,i.kt)("li",{parentName:"ul"},"向这个 ip 发送 http 请求"),(0,i.kt)("li",{parentName:"ul"},"服务器处理返回的相应的 http 请求"),(0,i.kt)("li",{parentName:"ul"},"浏览器得到返回的内容")),(0,i.kt)("p",null,"渲染阶段:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"将 HTML 渲染成 DOM"),(0,i.kt)("li",{parentName:"ul"},"将 CSS 渲染成 CSSOM"),(0,i.kt)("li",{parentName:"ul"},"将 DOM 和 CSSOM 合并成 RenderTree"),(0,i.kt)("li",{parentName:"ul"},"根据 RenderTree 开始渲染和展示"),(0,i.kt)("li",{parentName:"ul"},"遇到 script、link 会阻塞")))}c.isMDXComponent=!0},54253:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"七层协议"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"应用层: http"),(0,i.kt)("li",{parentName:"ul"},"表示层: 加密"),(0,i.kt)("li",{parentName:"ul"},"会话层: RPC"),(0,i.kt)("li",{parentName:"ul"},"传输层: TCP、UDP")),(0,i.kt)("hr",null),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"网络层: IP 地址"),(0,i.kt)("li",{parentName:"ul"},"数据链路层"),(0,i.kt)("li",{parentName:"ul"},"物理层")),(0,i.kt)("h3",null,"TCP 特性"),(0,i.kt)("p",null,"关于可靠, 有以下两点:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"按序传输"),(0,i.kt)("li",{parentName:"ul"},"可以将数据拆分成任意大小的包进行传输")),(0,i.kt)("h3",null,"TCP 和 UDP 的区别"),(0,i.kt)("p",null,"TCP(Transmission Control Protocal): 传输控制协议\nUDP(User Data Protocal): 用户数据报协议"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"TCP 是连接的, UDP 是无连接的;"),(0,i.kt)("li",{parentName:"ul"},"TCP 对系统资源消耗相对更多, UDP 对资源消耗相对较少;"),(0,i.kt)("li",{parentName:"ul"},"TCP 能确保数据的正确性, UDP 可能丢包而且包的顺序性也不能保证;")))}c.isMDXComponent=!0},10246:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Alexa 相关资源"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://pitangui.amazon.com/"}),"Alexa 站点")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.jianshu.com/p/a04fb4c4ac62"}),"Alexa 使用"))))}c.isMDXComponent=!0},65733:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"The Little Prince"),(0,i.kt)("p",null,"I ",(0,i.kt)("inlineCode",{parentName:"p"},"ask the indulgence of the children")," who may read this book for ",(0,i.kt)("inlineCode",{parentName:"p"},"dedicating it to")," a grownup."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"dedicate: GIVE TIME/ENERGY")),(0,i.kt)("h3",null,"I"),(0,i.kt)("h3",null,"译文链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.zhihu.com/pub/reader/119964114/chapter/1288857467019948032"}),"小王子"))))}c.isMDXComponent=!0},4528:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"人月神话"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"焦油坑",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"程序 -> 编程系统产品 ",(0,i.kt)("inlineCode",{parentName:"li"},"成本 x 9"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"编程产品(通用化、测试、文档、维护) ",(0,i.kt)("inlineCode",{parentName:"li"},"成本 x 3")),(0,i.kt)("li",{parentName:"ul"},"编程系统(接口系统集成) ",(0,i.kt)("inlineCode",{parentName:"li"},"成本 x 3")))),(0,i.kt)("li",{parentName:"ul"},"编程的乐趣",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"创建事物的快乐;"),(0,i.kt)("li",{parentName:"ul"},"开发对其他人有用的东西的乐趣;"),(0,i.kt)("li",{parentName:"ul"},"组装零部件拼凑成类似迷宫的乐趣;"),(0,i.kt)("li",{parentName:"ul"},"面对不重复的任务, 不断学习的乐趣;"),(0,i.kt)("li",{parentName:"ul"},"工作在如此易于驾驭的介质上的乐趣 —— 纯粹的思维活动;"))),(0,i.kt)("li",{parentName:"ul"},"固有的苦恼",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"由其它人设定目标;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"笔者的观点: 这点其实是可以转移的, 增强主管能动性。"))),(0,i.kt)("li",{parentName:"ul"},"任何创造性活动都伴随着枯燥艰苦的劳动;"),(0,i.kt)("li",{parentName:"ul"},"人们通常期望项目接近结束时, 软件项目能收敛得快一些, 然而, 情况却是越接近完成, 收敛得越慢。"),(0,i.kt)("li",{parentName:"ul"},"产品在完成前总面临着陈旧过时的威胁。"))))),(0,i.kt)("li",{parentName:"ul"},"人月神话(",(0,i.kt)("inlineCode",{parentName:"li"},"人月是危险和带有欺骗性的神话, 因为它暗示人员数量和时间是可以相互替换的"),")",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"缺乏合理的进度排期"),"是造成项目滞后的最主要原因。",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"错误的假设「一切到将运作良好」。"),(0,i.kt)("li",{parentName:"ol"},"错误的假设「人和月可以互换」, 即错误的认为开发人数越多, 进度越快。"),(0,i.kt)("li",{parentName:"ol"},"未给系统测试预留时间。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"1⁄3 计划"),(0,i.kt)("li",{parentName:"ul"},"1⁄6 编码"),(0,i.kt)("li",{parentName:"ul"},"1⁄4 构件测试和早期系统测试"),(0,i.kt)("li",{parentName:"ul"},"1⁄4 系统测试, 所有的构件已完成"))),(0,i.kt)("li",{parentName:"ol"},"对进度缺少跟踪和监督。"),(0,i.kt)("li",{parentName:"ol"},"当意识到进度偏移时, 下意识的反应是增加人力。"))))),(0,i.kt)("li",{parentName:"ul"},"外科手术队伍",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"优秀的专业程序员的生产率是较差的程序员的 10 倍。"),(0,i.kt)("li",{parentName:"ul"},"一位首席程序员, 类似于外科手术队伍的团队架构提供了一种方法: 既能获得由少数头脑产生的产品完整性, 又能得到多位协助人员的总体生产率, 还彻底地减少了沟通的工作量。"))),(0,i.kt)("li",{parentName:"ul"},"贵族专制、民主政治与系统设计",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"概念的完整性"),"是系统设计中最重要的考虑因数。其设计必须由一个人或具有共识的小型团队完成。"),(0,i.kt)("li",{parentName:"ul"},"功能与理解上的复杂程度的比值(",(0,i.kt)("inlineCode",{parentName:"li"},"易用性"),")才是系统设计的最终测试标准。"),(0,i.kt)("li",{parentName:"ul"},"纪律、规则对行业是有益的。外部的体系结构规定实际上是增强, 而不是限制实现小组的创造性。"),(0,i.kt)("li",{parentName:"ul"},"体系结构(architecture)、设计实现(implementation)、物理实现(realization)的许多工作可以并行。"))),(0,i.kt)("li",{parentName:"ul"},"画蛇添足",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"尽早交流"),"与",(0,i.kt)("inlineCode",{parentName:"li"},"持续沟通"),"使结构师有较好的成本意识, 同时使开发人员获得对设计的信心。"),(0,i.kt)("li",{parentName:"ul"},"自律 —— 尤其是在设计第二个系统时。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"往往设计第一个系统时会比较谨慎, 其中碰见的一些装饰、润色功能往往会被安排至第二个系统中, 此时要格外谨慎。"))))),(0,i.kt)("li",{parentName:"ul"},"贯彻执行",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"形式化地设计定义"),"保证精确性; ",(0,i.kt)("inlineCode",{parentName:"li"},"记叙性定义"),"来加深理解。"),(0,i.kt)("li",{parentName:"ul"},"周会、年会"))),(0,i.kt)("li",{parentName:"ul"},"为什么巴比伦塔会失败",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"巴比伦塔项目的失败是因为缺乏交流以及交流的结果 —— 组织。"),(0,i.kt)("li",{parentName:"ul"},"增加沟通、",(0,i.kt)("inlineCode",{parentName:"li"},"交流"),"频次",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"非正式地进行",(0,i.kt)("inlineCode",{parentName:"li"},"简要技术陈述的常规项目会议")),(0,i.kt)("li",{parentName:"ul"},"共享的",(0,i.kt)("inlineCode",{parentName:"li"},"正式项目工作手册")),(0,i.kt)("li",{parentName:"ul"},"电话、email"))),(0,i.kt)("li",{parentName:"ul"},"组织架构",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"团队组织的目标是为了减少必要的交流和协作量。"),(0,i.kt)("li",{parentName:"ul"},"为了减少交流, 组织结构包括了",(0,i.kt)("inlineCode",{parentName:"li"},"人力划分"),"和",(0,i.kt)("inlineCode",{parentName:"li"},"限定指责范围"),"。"),(0,i.kt)("li",{parentName:"ul"},"组织中的交流是网状而不是树状, 以克服树状组织结构中交流缺乏的困难。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"个人理解: 扁平化管理"))),(0,i.kt)("li",{parentName:"ul"},"每个子项目具有两个领导角色 —— 产品负责人、技术主管。(产品负责人和技术主管可以是同个人, 但这两个角色的职能有很大的区别)"))))),(0,i.kt)("li",{parentName:"ul"},"胸有成竹",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"程序开发的复杂度随程序规模的而指数增长。"))),(0,i.kt)("li",{parentName:"ul"},"未雨绸缪",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"系统的丢弃和重新设计可以一步完成, 也可以一块块地实现, 但这是",(0,i.kt)("inlineCode",{parentName:"li"},"必须完成"),"的步骤。"),(0,i.kt)("li",{parentName:"ul"},"为舍弃而计划。"))),(0,i.kt)("li",{parentName:"ul"},"干将莫邪",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"目标机器的使用需求量刚开始非常低, 突然出现爆发性的增长, 接着趋于平缓。"))),(0,i.kt)("li",{parentName:"ul"},"整体部分",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"剔除 bug 的设计",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"测试规格说明(文档)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"自上而下"),"的设计(精化步骤)"))))),(0,i.kt)("li",{parentName:"ul"},"没有银弹",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"现代软件系统中无法规避的内在特性",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"复杂度"),(0,i.kt)("li",{parentName:"ul"},"保持一致性(导致复杂度)"),(0,i.kt)("li",{parentName:"ul"},"可变性"),(0,i.kt)("li",{parentName:"ul"},"不可见性"))),(0,i.kt)("li",{parentName:"ul"},"应对措施",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"借力(开源、第三方专业产品)"),(0,i.kt)("li",{parentName:"ul"},"需求精练、",(0,i.kt)("inlineCode",{parentName:"li"},"快速原型化"),"来验证"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"增量"),"开发"),(0,i.kt)("li",{parentName:"ul"},"识别、培养顶级设计人员")))))))}c.isMDXComponent=!0},14304:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"关键沟通"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"拷问现实, 真诚地表达自我, 给与他人纯粹的关注, 带着勇气与同理心对峙问题、听从直觉。")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"原则一: 拿出勇气, ",(0,i.kt)("inlineCode",{parentName:"li"},"拷问现实"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"官方真相 & 战场真相, 要分析",(0,i.kt)("inlineCode",{parentName:"li"},"战场真相"),"。"),(0,i.kt)("li",{parentName:"ul"},"成功的另一种定义: 我是什么样的人与我过着什么样的生活相一致的程度。"))),(0,i.kt)("li",{parentName:"ul"},"原则二: ",(0,i.kt)("inlineCode",{parentName:"li"},"走出自我"),", 投入对话, 让对话变得真实。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"生活中的问题很少与别人有关, 基本全部和自己有关。"))),(0,i.kt)("li",{parentName:"ul"},"原则三: ",(0,i.kt)("inlineCode",{parentName:"li"},"保持专注"),", 不分心。"),(0,i.kt)("li",{parentName:"ul"},"原则四: 今天就解决你最棘手的问题。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"场景: 下属很有才华, 但为人太露锋芒, 该如何沟通?",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"误区开场白:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"最近进展怎么样?"),(0,i.kt)("li",{parentName:"ul"},"用恭维拉开对峙"),(0,i.kt)("li",{parentName:"ul"},"信息表达太过委婉"),(0,i.kt)("li",{parentName:"ul"},"对话前为对方的话写剧本"),(0,i.kt)("li",{parentName:"ul"},"咆哮与逃跑"))),(0,i.kt)("li",{parentName:"ul"},"练习开场白(时间控制在 1 分钟之内):",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"界定问题"),(0,i.kt)("li",{parentName:"ol"},"选择一个具体例子, 阐述你想要改变的行为与情况"),(0,i.kt)("li",{parentName:"ol"},"描述你对这个问题的感受"),(0,i.kt)("li",{parentName:"ol"},"澄清其中的利害关系"),(0,i.kt)("li",{parentName:"ol"},"说明你对这个问题该负说明责任"),(0,i.kt)("li",{parentName:"ol"},"表明你解决这个问题的愿景"),(0,i.kt)("li",{parentName:"ol"},"邀请对方回应"))))))),(0,i.kt)("li",{parentName:"ul"},"原则五: 听从自己的直觉。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"说话不是道出所知, 说话是弄清我到底知道什么。"))),(0,i.kt)("li",{parentName:"ul"},"原则六: 为自己的情绪尾迹承担责任"),(0,i.kt)("li",{parentName:"ul"},"原则七: 让沉默施展力量")))}c.isMDXComponent=!0},46925:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"四大基本原则"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"亲密性"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"目的: 实现",(0,i.kt)("inlineCode",{parentName:"li"},"组织性"),";"),(0,i.kt)("li",{parentName:"ul"},"实现方式: 将相关联的元素分在一组以建立更近的亲密性。"),(0,i.kt)("li",{parentName:"ul"},"要避免的问题: 一个页面上有太多孤立的元素。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"对齐"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"目的: 使页面",(0,i.kt)("inlineCode",{parentName:"li"},"统一而有条理"),";"),(0,i.kt)("li",{parentName:"ul"},"要避免的问题: 要避免在页面上混合使用多种对齐方式。优先使用",(0,i.kt)("inlineCode",{parentName:"li"},"左对齐"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"右对齐"),"而不是",(0,i.kt)("inlineCode",{parentName:"li"},"居中对齐"),"。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"重复"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"目的: 使页面",(0,i.kt)("inlineCode",{parentName:"li"},"统一"),", 并增强视觉效果。"),(0,i.kt)("li",{parentName:"ul"},"实现方式: 把现有的一致性更向前推进一步。最初, 可以只是找出现有的重复, 然后将其加强。熟悉了这种思想之后, 再开始创建新的重复元素。"),(0,i.kt)("li",{parentName:"ul"},"要避免的问题: 要避免太多地重复一个元素。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"对比"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"目的: ",(0,i.kt)("inlineCode",{parentName:"li"},"增强页面的效果"),", 有助于信息的",(0,i.kt)("inlineCode",{parentName:"li"},"组织"),";")))),(0,i.kt)("h3",null,"颜色运用"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"色轮")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"概念"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"三原色"),": 红、黄、蓝"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"三间色")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"第三色")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"关系"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"互补")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"三色组")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"分裂互补三色组")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"类似色")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("blockquote",{parentName:"li"},(0,i.kt)("p",{parentName:"blockquote"},"采用以上几种关系的颜色都会比较和谐。"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"亮色与暗色"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"亮色: 加白"),(0,i.kt)("li",{parentName:"ul"},"暗色: 加黑"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"单色")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"暖色与冷色"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"暖色: 加红、加黄"),(0,i.kt)("li",{parentName:"ul"},"冷色: 加蓝"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"CMYK"),": Cyan(青)、Magenta(品红)、Yellow、Key(通常是黑色)"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"原理: 光反射"),(0,i.kt)("li",{parentName:"ul"},"应用: 印刷品"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"RGB")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"原理: 显示器直接传入眼睛的光"),(0,i.kt)("li",{parentName:"ul"},"应用: 显示器")))),(0,i.kt)("h3",null,"字体设计"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"字体",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"特殊符号",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"开单引号 ",(0,i.kt)("inlineCode",{parentName:"li"},"‘"),": option + ]"),(0,i.kt)("li",{parentName:"ul"},"闭单引号 ",(0,i.kt)("inlineCode",{parentName:"li"},"’"),": option + shift + ]"),(0,i.kt)("li",{parentName:"ul"},"开双引号 ",(0,i.kt)("inlineCode",{parentName:"li"},"“"),": option + ["),(0,i.kt)("li",{parentName:"ul"},"闭双引号 ",(0,i.kt)("inlineCode",{parentName:"li"},"”"),": option + shift + ["),(0,i.kt)("li",{parentName:"ul"},"一字线 ",(0,i.kt)("inlineCode",{parentName:"li"},"–"),": option + -"),(0,i.kt)("li",{parentName:"ul"},"破折号 ",(0,i.kt)("inlineCode",{parentName:"li"},"—"),": option + shift + -"),(0,i.kt)("li",{parentName:"ul"},"省略号 ",(0,i.kt)("inlineCode",{parentName:"li"},"…"),": option + ;"),(0,i.kt)("li",{parentName:"ul"},"分数斜线 ",(0,i.kt)("inlineCode",{parentName:"li"},"1⁄2"),": option + shift + !"),(0,i.kt)("li",{parentName:"ul"},"按下 ",(0,i.kt)("inlineCode",{parentName:"li"},"fn")," 打开字符检查器"))),(0,i.kt)("li",{parentName:"ul"},"重音符号: 按下 fn 打开字符检查器, 选择左侧边栏上的拉丁语打卡重音符号列表"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"字体类别"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"字体间的关系",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"协调"),(0,i.kt)("li",{parentName:"ul"},"冲突(通常由相似的字体造成)"),(0,i.kt)("li",{parentName:"ul"},"对比",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"大小、粗细、结构(衬线体/无衬线体)、形状(大小写)、方向、颜色"))))),(0,i.kt)("li",{parentName:"ul"},"种类",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Oldstyle"),"(旧式体)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/af9d00410581710e48fdd2b4854c84b5.jpg",alt:null}))),(0,i.kt)("li",{parentName:"ul"},"使用场景: 大量文本"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Mordern"),"(现代体)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Slab serif"),"(粗衬线体)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"使用场景: 儿童图书"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Sans serif"),"(无衬线体)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Script"),"(手写体)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Decorative"),"(花体)"))))),(0,i.kt)("li",{parentName:"ul"},"字体对比",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"衬线体 vs 无衬线体"),(0,i.kt)("li",{parentName:"ul"},"全大写 vs 全小写"),(0,i.kt)("li",{parentName:"ul"},"罗马体 vs 斜体",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"罗马体表示所有字体中从上到下竖直的字体"))),(0,i.kt)("li",{parentName:"ul"},"方向对比"),(0,i.kt)("li",{parentName:"ul"},"颜色对比")))))}c.isMDXComponent=!0},87754:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"未来世界的幸存者"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"现实篇",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"世界会走向哪里?"),(0,i.kt)("li",{parentName:"ul"},"白领岗位的消亡",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"case:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"「税务顾问」岗位在美国消亡。"),(0,i.kt)("li",{parentName:"ul"},"「银行职员」、「信贷员」、「风险控制」、「信用记录」、「外汇交易」。"))),(0,i.kt)("li",{parentName:"ul"},"未来优势的岗位",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"人性化与人格魅力。"),(0,i.kt)("li",{parentName:"ul"},"创意。"),(0,i.kt)("li",{parentName:"ul"},"决策和领导力。"))),(0,i.kt)("li",{parentName:"ul"},"为什么世界上没有安全的工作?"),(0,i.kt)("li",{parentName:"ul"},"穷忙的人生",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"弱者越弱, 越来越惨"))),(0,i.kt)("li",{parentName:"ul"},"为什么你可以不读大学",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"我们的学习和教育制度已经完全过时，传授的知识有用的少，没用的多；传授方法仍然依靠灌输和记忆，而不是启发和理解，极其低效，浪费学生的时间，打击学习热情，磨灭对知识的兴趣;"))))))),(0,i.kt)("li",{parentName:"ul"},"职业篇",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"为什么雇佣制度对工人不利"),(0,i.kt)("li",{parentName:"ul"},"母鸡与前端工程师",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"你应该选择，那些让你产生最大兴趣和热情的职业。因为未来所有行业，低端的、低技能的岗位都会被机器取代，只有技能最强、最有创造性的人不会被淘汰。兴趣，也只有兴趣，才会让你产生不倦的热情，钻研下去，变得更优秀。"))),(0,i.kt)("li",{parentName:"ul"},"为什么退休金是靠不住的"))),(0,i.kt)("li",{parentName:"ul"},"方法篇",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"为什么创业。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"如果你不喜欢自己现在的状况, 又看不到希望的话, 创业是一条可以考虑的路。"),(0,i.kt)("li",{parentName:"ul"},"“自我雇佣”"))),(0,i.kt)("li",{parentName:"ul"},"如何确定创业方向",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"项目计划书\n1、给谁用?\n2、他们用这个产品来解决什么问题?\n3、这个问题对他们而言有多重要?\n4、我们的方法是否足够简单方便?\n5、他们要付出的代价与所得是否匹配?"),(0,i.kt)("li",{parentName:"ul"},"行为准则",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"比完美更重要的是完成。(Done is better than perfect.)"),(0,i.kt)("li",{parentName:"ul"},"快速行动，破除陈规。(Move fast and break things.)"),(0,i.kt)("li",{parentName:"ul"},"保持专注，持续发布。(Stay focused and keep shipping.)"))))),(0,i.kt)("li",{parentName:"ul"},"不要在功能上竞争",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"市场定位更重要"))))),(0,i.kt)("li",{parentName:"ul"},"案例篇",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"个性也是一种竞争力",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"papi 酱"))),(0,i.kt)("li",{parentName:"ul"},"要聊天, 先付费"),(0,i.kt)("li",{parentName:"ul"},"即将来临的卖文时代"),(0,i.kt)("li",{parentName:"ul"},"微媒体时代",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"大媒体 -> 微媒体"))),(0,i.kt)("li",{parentName:"ul"},"未来的娱乐业"),(0,i.kt)("li",{parentName:"ul"},"技术教育的兴起"))),(0,i.kt)("li",{parentName:"ul"},"未来篇",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"高级人类的崛起")))))}c.isMDXComponent=!0},47039:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"黑客与画家"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"hacker",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"好玩、高智商、探索精神"),(0,i.kt)("li",{parentName:"ul"},"价值观: 分享、民主、自由"))),(0,i.kt)("li",{parentName:"ul"},"为什么书呆子不受欢迎:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"10+ 岁心智的不健全。"),(0,i.kt)("li",{parentName:"ul"},"中学阶段,「书呆子」不受欢迎。但是小学阶段「书呆子」没啥影响, 进入社会后, 「书呆子」更受欢迎。"))),(0,i.kt)("li",{parentName:"ul"},"黑客与画家",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"论述了黑客与画家的一些共同点。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"创造性"))))),(0,i.kt)("li",{parentName:"ul"},"不能说的话",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"要多问几个为什么。增加自己判断力。"))),(0,i.kt)("li",{parentName:"ul"},"良好的坏习惯",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"read 52.")))))}c.isMDXComponent=!0},99833:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"gold price"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"4.14 371"),(0,i.kt)("li",{parentName:"ul"},"5.17 391"),(0,i.kt)("li",{parentName:"ul"},"7.15 400.85"),(0,i.kt)("li",{parentName:"ul"},"8.07 436"),(0,i.kt)("li",{parentName:"ul"},"8.12 407"),(0,i.kt)("li",{parentName:"ul"},"10.15 404"),(0,i.kt)("li",{parentName:"ul"},"12.15 379")),(0,i.kt)("p",null,"my opinion:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"360 ~ 370 buy"),(0,i.kt)("li",{parentName:"ul"},"415+ sell")),(0,i.kt)("h3",null,"基金"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"不定投指数基金。")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"投资能力本质是",(0,i.kt)("inlineCode",{parentName:"p"},"认知的提升"),"。")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何挑选基金"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"挑选对应指数",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/a21b4868c7b34f5e3c52c6efb0af5bff.jpg",alt:"指数分类"})),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"上证 50 指数"),(0,i.kt)("li",{parentName:"ul"},"沪深 300 指数"),(0,i.kt)("li",{parentName:"ul"},"中证 500 指数"),(0,i.kt)("li",{parentName:"ul"},"创业板指数"))),(0,i.kt)("li",{parentName:"ul"},"常见选择: 沪深 300 指数 + 中证 500 指数"))),(0,i.kt)("li",{parentName:"ul"},"参考 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.howbuy.com/fundtool/filter.htm"}),"买好基金"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"按基金类型筛选、指数型"),(0,i.kt)("li",{parentName:"ul"},"复制方式: 增强型"),(0,i.kt)("li",{parentName:"ul"},"信息比率: 前四分之一"))),(0,i.kt)("li",{parentName:"ul"},"基金评级: 晨星评级(支付宝基金页面)")))),(0,i.kt)("h3",null,"程序员在投资领域的优势与劣势"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"优势",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"投资需要持续学习。"),(0,i.kt)("li",{parentName:"ul"},"数字、计算公式敏感。"),(0,i.kt)("li",{parentName:"ul"},"量化交易(不是特别清楚, 未来可以去了解)。"))),(0,i.kt)("li",{parentName:"ul"},"劣势",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"容易错失短线交易买入卖出的时机。")))),(0,i.kt)("h3",null,"投资的几项能力"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","财务报表"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","独立思考投资方向与前景")),(0,i.kt)("h3",null,"投资话术"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://www.zhihu.com/question/445888287"}),"https://www.zhihu.com/question/445888287")),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","爆仓"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","平仓"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","杠杆"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","做多"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","做空"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","大盘")),(0,i.kt)("h3",null,"链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.zhihu.com/question/267534527/answer/1337504443"}),"基金定投这么好，为什么能坚持下来的人那么少"))))}c.isMDXComponent=!0},51111:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"二八法则",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"90-9-1 法则表明，在诸如维基这样的互联网社区中，90% 的用户只看内容并不参与互动，9% 的用户会参与讨论，而只有 1% 的用户会创造内容。"))),(0,i.kt)("li",{parentName:"ul"},"破窗效应(The Broken Windows Theory)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"破窗理论已应用于软件开发中，它表明劣质代码(或 Technical Debt)可能会影响后续优化的效率，从而进一步造成代码劣化；随着时间的推移，这种效应将会导致代码质量大幅下降。"))),(0,i.kt)("li",{parentName:"ul"},"布鲁克斯法则(Brooks's Law)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"谚语 九个女人不能在一个月内生一个孩子 与布鲁克斯法则同出一辙，特别是某些不可分割或者并行的工作。"),(0,i.kt)("li",{parentName:"ul"},"人月神话中心主题。"))),(0,i.kt)("li",{parentName:"ul"},"坎宁汉姆定律 (Cunningham's Law)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"在网络上想得到正确答案的最好方法不是提问题，而是发布一个错误的答案。"))),(0,i.kt)("li",{parentName:"ul"},"邓巴数字 (Dunbar's Number)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"邓巴数字是对一个人能够保持稳定社会关系的人数的认知极限——在这种关系中，一个人知道每个人是谁，也知道每个人与其他人的关系如何。邓巴指出，人仅能轻松地维持 150 个稳定的关系。"),(0,i.kt)("li",{parentName:"ul"},"和人与人之间稳定的关系一样，开发人员与代码库的关系也需要努力维护。"))),(0,i.kt)("li",{parentName:"ul"},"盖尔定律 (Gall's Law)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"一个切实可行的复杂系统势必是从一个切实可行的简单系统发展而来的。从头开始设计的复杂系统根本不切实可行，无法修修补补让它切实可行。你必须由一个切实可行的简单系统重新开始。"))),(0,i.kt)("li",{parentName:"ul"},"侯世达定律 (Hofstadter's Law)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"即使考虑到侯世达定律，它也总是比你预期的要长。")))),(0,i.kt)("p",null,"阅读到隐式接口定律"),(0,i.kt)("h3",null,"link"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/nusr/hacker-laws-zh"}),"link")))}c.isMDXComponent=!0},99802:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"装修"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"关于居家",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"找出",(0,i.kt)("inlineCode",{parentName:"li"},"核心区")),(0,i.kt)("li",{parentName:"ul"},"找出",(0,i.kt)("inlineCode",{parentName:"li"},"居心地")),(0,i.kt)("li",{parentName:"ul"},"设计不要太满, 做七分就好"))),(0,i.kt)("li",{parentName:"ul"},"装修前",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"施工队好, 还是设计师好",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"结论: ",(0,i.kt)("inlineCode",{parentName:"li"},"优先选择设计师")))),(0,i.kt)("li",{parentName:"ul"},"选照片",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"格局挑与家里差不多的"),(0,i.kt)("li",{parentName:"ul"},"挑地板颜色与家差不多的"))),(0,i.kt)("li",{parentName:"ul"},"记录家当以作收纳设计"),(0,i.kt)("li",{parentName:"ul"},"记下自己与家的互动关系"),(0,i.kt)("li",{parentName:"ul"},"学会听建议, 下决定并负责",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"签了设计约后, 要在合同中列明",(0,i.kt)("inlineCode",{parentName:"li"},"平面图"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"天花板图"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"水电图"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"立面图"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"厨具图"))))))),(0,i.kt)("h3",null,"装修流程"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"开始: 前期作业",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"确定格局平面图"),(0,i.kt)("li",{parentName:"ul"},"灯具配置"),(0,i.kt)("li",{parentName:"ul"},"家具、建材"))),(0,i.kt)("li",{parentName:"ul"},"步骤一: 拆除工程",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"拆除时需要注意的事情",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"断水断电断煤气"),(0,i.kt)("li",{parentName:"ul"},"检查漏水"),(0,i.kt)("li",{parentName:"ul"},"检查蛀虫"),(0,i.kt)("li",{parentName:"ul"},"窗框拆除, 内角水泥层一起敲"),(0,i.kt)("li",{parentName:"ul"},"窗外的瓷砖是否敲除, 得先告知施工队"),(0,i.kt)("li",{parentName:"ul"},"拆窗后, 要用帆布封窗"),(0,i.kt)("li",{parentName:"ul"},"消防管线、洒水喷头不能移位或拆除"))),(0,i.kt)("li",{parentName:"ul"},"拆除注意四个坑点",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"打地板时, 千万小心排粪管"),"。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"策略一: 排粪管换不换, 要先想清楚, 然后拆除、水电与瓦工师傅三方都要知道。"),(0,i.kt)("li",{parentName:"ul"},"策略二: 有状况要与施工队长沟通。"),(0,i.kt)("li",{parentName:"ul"},"策略三: 施工队交接时, 要带接手的施工队一起检查。"),(0,i.kt)("li",{parentName:"ul"},"策略四: 看工地时多拍照, 每个房间与细节都要拍, 日后要检讨工法时, 说不定就能派上用场。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"原瓷砖地够平整, 可直接铺不地板"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"地板名: 爱尔兰风铃、圣象地板"),(0,i.kt)("li",{parentName:"ul"},"铺多层复合或强化复合木地板, 原本瓷砖地板只要够平整, 可不必拆除; 若有瓷砖起鼓变形, 仍要拆除。"),(0,i.kt)("li",{parentName:"ul"},"地板要不要拆除见底, 要看铺什么类型的地砖, 以及要考量新大门的门槛高度。"),(0,i.kt)("li",{parentName:"ul"},"跟施工队沟通, 要知道的是不同做法会有什么不同的结果。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"千万别乱拆墙, 以免结构受损")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"不拆不换的地板、橱柜, 通通包好做保护"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"瓦楞板 + 多层板"),(0,i.kt)("li",{parentName:"ul"},"预算够的话: PVC 防潮布 + 瓦楞板 + 多层板"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"拆除, 你该注意的事"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"先断水断电断煤气"),(0,i.kt)("li",{parentName:"ul"},"检查漏水"),(0,i.kt)("li",{parentName:"ul"},"检查有没有蛀虫"),(0,i.kt)("li",{parentName:"ul"},"窗框拆除, 内角水泥层一起敲"),(0,i.kt)("li",{parentName:"ul"},"窗外的瓷砖是否敲除, 要先告知施工队"),(0,i.kt)("li",{parentName:"ul"},"拆窗后, 要用帆布封窗"))))))),(0,i.kt)("li",{parentName:"ul"},"步骤二: 水电工程",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"水电安装要注意的事",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"材料进场的监工"),(0,i.kt)("li",{parentName:"ul"},"水电预算千万不要省"))),(0,i.kt)("li",{parentName:"ul"},"坑点",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"防止",(0,i.kt)("inlineCode",{parentName:"li"},"漏电断路器被掉包"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"空气开关"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"功能: 电线短路或电量超载时, 它会跳闸。"),(0,i.kt)("li",{parentName:"ul"},"注意: ",(0,i.kt)("inlineCode",{parentName:"li"},"要选 “CCC” 产品"),"。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"漏电断路器"),"(近水处需安装)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"功能: 漏电时, 它会跳掉。"),(0,i.kt)("li",{parentName:"ul"},"注意: ",(0,i.kt)("inlineCode",{parentName:"li"},"防止用空气开关代替"),"。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"漏电断路器不要安装总开关"),"。"))))),(0,i.kt)("li",{parentName:"ul"},"确认冷、热水管与电线的位置"),(0,i.kt)("li",{parentName:"ul"},"灯具、厨具、空调的位置"))),(0,i.kt)("li",{parentName:"ul"},"步骤三: 瓦工工程(卫生间防水、贴砖在此阶段)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"水泥质量不好、比例不对，易有裂痕。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"调水泥砂浆时，水泥与砂的比例打底 1:3，面层 1:2"),"。"),(0,i.kt)("li",{parentName:"ul"},"面层铺好后要养护，天数要 28 天（没有这个条件，至少要 14 天）。"))),(0,i.kt)("li",{parentName:"ul"},"从抛光砖了解不同地砖施工要点。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"干铺",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"适合：地面"),(0,i.kt)("li",{parentName:"ul"},"优点：砖面平整度高，砖底不易有空隙，不易变形。"),(0,i.kt)("li",{parentName:"ul"},"缺点：工时较长，工资较高。"),(0,i.kt)("li",{parentName:"ul"},"其它：大片瓷砖一般用干铺，要加黏着剂。"))),(0,i.kt)("li",{parentName:"ul"},"湿铺",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"适合：墙面、地面"),(0,i.kt)("li",{parentName:"ul"},"优点：工时快，工资便宜。"),(0,i.kt)("li",{parentName:"ul"},"缺点：平整度较差，转内易有空气，日后易起鼓。"))),(0,i.kt)("li",{parentName:"ul"},"地板拆除后，可在墙面标出高度。"))),(0,i.kt)("li",{parentName:"ul"},"砖墙 vs. 轻钢墙",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"(砖墙)红砖一定要先浇湿或泡水。"),(0,i.kt)("li",{parentName:"ul"},"砌墙一定要拉线。"),(0,i.kt)("li",{parentName:"ul"},"新墙与旧墙之间要打钢筋或植钢筋。"),(0,i.kt)("li",{parentName:"ul"},"墙不能一天就砌完。"))),(0,i.kt)("li",{parentName:"ul"},"窗户施工要注意以下几个点",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"窗的四周要填新水泥，接下来要用弹性发泡填缝剂加压灌入窗框与墙体的缝隙。"),(0,i.kt)("li",{parentName:"ul"},"若拆窗时有拆掉瓷砖，需要把砖给补回来。同时要做泄水坡。"),(0,i.kt)("li",{parentName:"ul"},"铝窗与外墙间要补玻璃胶。"))),(0,i.kt)("li",{parentName:"ul"},"其它提醒",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"回填墙壁、地面孔洞时，要注意是否补平。"),(0,i.kt)("li",{parentName:"ul"},"瓷砖记得留备料，以备日后维修。"))))),(0,i.kt)("li",{parentName:"ul"},"步骤四: 厨卫工程",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"卫生间要做防水层",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"基底层要够平、够干净"),(0,i.kt)("li",{parentName:"ul"},"防水浆料要“薄涂多层”，等干透才能进行下一道"),(0,i.kt)("li",{parentName:"ul"},"防水浆料涂完后，养护 3 ~ 7 天才能贴砖"))))),(0,i.kt)("li",{parentName:"ul"},"步骤五: 木工工程"),(0,i.kt)("li",{parentName:"ul"},"步骤六: 油漆",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"记得做好保护工程"))),(0,i.kt)("li",{parentName:"ul"},"步骤七: 粗略清洁"),(0,i.kt)("li",{parentName:"ul"},"步骤八: 设备进场"),(0,i.kt)("li",{parentName:"ul"},"步骤九: 仔细清洁"),(0,i.kt)("li",{parentName:"ul"},"步骤十: 家具窗帘进场")),(0,i.kt)("p",null,"148 ~ 241"),(0,i.kt)("h3",null,"装修保命符"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"老房子花在基础工程，新房子花在通风采光与格局。"),(0,i.kt)("li",{parentName:"ul"},"列出建材与工法，分开计价一项项比。")),(0,i.kt)("p",null,"拿到合同时，该注意的事。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"要附图样与报价单。"),(0,i.kt)("li",{parentName:"ol"},"追加预算或变更设计要经书面签字同意，才能动工。"),(0,i.kt)("li",{parentName:"ol"},"尾款可多留点，验收通过才付尾款。(若没有其他保障，争取到 20%)"),(0,i.kt)("li",{parentName:"ol"},"防公司倒闭条款(可把设计师个人列为保证人，记得核对姓名与身份证)。"),(0,i.kt)("li",{parentName:"ol"},"要定工期、保修期与罚款。")))}c.isMDXComponent=!0},43589:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"宏观政策与分析"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"城市定位",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"上海 2035 规划",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"五个中心: 国际经济、金融、贸易、航运、科技创新中心"))),(0,i.kt)("li",{parentName:"ul"},'形成"主城区-新城-新市镇-乡村"的市域城乡体系',(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"主城区: 中心城以及",(0,i.kt)("inlineCode",{parentName:"li"},"宝山"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"闵行"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"虹桥"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"川沙")," 4 个主城片区"),(0,i.kt)("li",{parentName:"ul"},"新城: ",(0,i.kt)("inlineCode",{parentName:"li"},"嘉定"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"松江"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"青浦"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"南桥"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"南汇")," 5 个新城"))))),(0,i.kt)("li",{parentName:"ul"},"人口目标",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2035 年: 2500 万人左右"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"了解自己的需求"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"刚需 or 改善: 刚需"),(0,i.kt)("li",{parentName:"ul"},"居住需求 or 投资保值需求: 居住需求的话就会对于",(0,i.kt)("inlineCode",{parentName:"li"},"地段"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"小区"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"户型"),"等",(0,i.kt)("inlineCode",{parentName:"li"},"整体居住条件的考虑和权衡"),"; 如果是投资需求的话, 可以看最近几年来年化的投资回报, 在过去的 15 年间, 从这个时间尺度看, 差不多投资回报在年化 ",(0,i.kt)("inlineCode",{parentName:"li"},"7% - 10%")," 左右。"),(0,i.kt)("li",{parentName:"ul"},"学区房: no"),(0,i.kt)("li",{parentName:"ul"},"新房 or 二手房: todo"),(0,i.kt)("li",{parentName:"ul"},"老房子 or 次新房: todo"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"房产信息渠道"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"贝壳: 大家看到链家在一线城市店铺比较多, 可能会觉得贝壳链家的房源可能占市场房源的一半或者更多, 其实贝壳链家房源数可能只占到少一部分, 并且不同城市有当地区域做的比较好的中介品牌, 没有上贝壳, 可能在安居客或者幸福里中, 甚至只在中介自己的系统中, 所以最好多看一些.贝壳比较好的地方是真房源和价格真实, 这部分确实是其他几个平台不具有的。"),(0,i.kt)("li",{parentName:"ul"},"安居客"),(0,i.kt)("li",{parentName:"ul"},"幸福里 APP | 字节跳动旗下"),(0,i.kt)("li",{parentName:"ul"},"兔博士 App 看成交价走势和一些行情比较好, 和上面几家一样, 有很多鱼龙混杂的房源。"),(0,i.kt)("li",{parentName:"ul"},"大房鸭 最近在上海到处打广告比较凶的, 主打中介费固定且少, 不过房源质量和真假还需自己判断。"),(0,i.kt)("li",{parentName:"ul"},"公众号等自媒体",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"真叫卢俊：微信号 zhenjiaolujun0426, 认认真真聊地产, 实实在在谈买房。"),(0,i.kt)("li",{parentName:"ul"},"小胖看房：微信号 xiaopangkf, 上海新房&二手房权威资讯平台, 小胖君（xpkf039）为您提供前滩, 内环, 中环等热门板块*新房快捷信息, 解答您限购, 二套, 学区房, 地铁房, 房贷月供, 公积金等购房知识问题"),(0,i.kt)("li",{parentName:"ul"},"魔都房房房：微信号 modufff, 楼市谈经论道 买房大家来说"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"地段位置"))),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ayuer/shanghai_house_knowledge#321-%E6%9F%A5%E8%AF%A2%E8%87%AA%E5%B7%B1%E7%A4%BE%E4%BF%9D%E7%BC%B4%E7%BA%B3%E6%83%85%E5%86%B5"}),"shanghai_house_knowledge"))))}c.isMDXComponent=!0},43199:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"智能家居"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"网关",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"设备",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Aqara 网关 1 个"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"特性: 能接入“米家” APP，还能接入“Homekit” APP"),(0,i.kt)("li",{parentName:"ul"},"价格: 299 元"))))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"自动拉窗帘"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"设备:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"方案一: ",(0,i.kt)("inlineCode",{parentName:"li"},"Aqara 智能窗帘电机 1 个")),(0,i.kt)("li",{parentName:"ul"},"方案二: 欧瑞博 WIFI 版窗帘电机"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"自动开空调/热水器"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"设备",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Aqara Aqara 智能墙壁 114910A 插座 114910A 插座 1 个"),"，用于普通电器小米有品官网、App。(适合装修时安装)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"替代插座: 米家智能插座(ZigBee 版): 转接头式插座，直接插在家里原有插座上就能用。"),(0,i.kt)("li",{parentName:"ul"},"功能:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"自动通、断电"),(0,i.kt)("li",{parentName:"ul"},"定时开关"),(0,i.kt)("li",{parentName:"ul"},"统计用电量"),(0,i.kt)("li",{parentName:"ul"},"和其他智能设备联动: 比如联动温湿度计，当家里温度超过 27°C 时，插座通电，于是空调打开。"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Aqara 空调伴侣 N19916A 插座 1 个"),"，用于大功率电器"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"睡前自动熄灯"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"设备:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Aqara 智能墙壁开关 1 个",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"零火版"),": 给开关位置预留零线。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"零火版最低功率没有限制。"),(0,i.kt)("li",{parentName:"ul"},"零火版最高功率 2500W，可以接大功率的灯具(比如浴霸灯、LED 灯带)。"),(0,i.kt)("li",{parentName:"ul"},"零火版可以统计电量，即每一路灯用了多少电。"))))))),(0,i.kt)("li",{parentName:"ul"},"灯光体验优化",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"让灯光慢慢地暗下来，可以考虑支持调光的、支持接入米家 App 的智能灯具(小米、yeelight、飞利浦、宜家)。"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"进门自动亮灯"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"背景:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"晚上一进家门，玄关灯自动打开; 人走到客厅或卧室，2 分钟后，玄关灯自动关掉。"),(0,i.kt)("li",{parentName:"ol"},"半夜口渴进厨房，厨房动自动开灯，喝完水回去睡觉，厨房灯 2 分钟后自动关掉。"))),(0,i.kt)("li",{parentName:"ul"},"设备:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Aqara 智能墙壁开关 1 个。"),(0,i.kt)("li",{parentName:"ul"},"Aqara 人体传感器 1 个。"),(0,i.kt)("li",{parentName:"ul"},"米家门窗传感器 1 个，149 元。"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"远程监控家里"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"背景: 人离开家以后，摄像头开始监控，窗户上的门窗传感器一旦发现异常，摄像头录下视频，发送到手机“米家” App 中。"),(0,i.kt)("li",{parentName:"ul"},"设备:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"小米米家智能门锁 1 个。"),(0,i.kt)("li",{parentName:"ul"},"小米米家智能摄像机 1 个，放在门锁附近。"),(0,i.kt)("li",{parentName:"ul"},"米家门窗传感器 1 个。"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"看电视自动关灯、选节目"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"背景: 在沙发上坐定，说“小爱同学，看电视”，电视自动打开。同时，客厅主灯关了，氛围等变成暗黄色。"),(0,i.kt)("li",{parentName:"ul"},"设备:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"小米电视 1 台。"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"远程燃气报警")," (可以延后安装)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"背景: 出门在外，一旦有燃气泄漏异常，燃气阀自动关闭，同时手机收到报警。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"设备:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"烟雾警报器 1149")))))))),(0,i.kt)("h3",null,"设备清单"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"设备名"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"个数"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"价格(￥)"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"场景"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"功能"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Aqara 网关"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"299"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"房子中心"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"中心控制")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Aqara 智能窗帘电机"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1199"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"主卧窗帘"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"卧室自动拉窗帘，",(0,i.kt)("inlineCode",{parentName:"td"},"客厅是否需要智能窗帘待讨论"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Aqara 空调伴侣"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"2"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"169 x 2 = 338"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"客厅、主卧"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"自动控制空调开关")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Aqara 智能墙壁插座"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"?"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"129 x ?"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"代替传统插座"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"米家智能插座(ZigBee 版)"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"x"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"49 x ?"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"})),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Aqara 智能墙壁开关(零火版)"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"4"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"189 x 4 = 756"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"卧室、客厅、走廊、玄关"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"自动控制电器运行、停止(亮灯、熄灯)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Aqara 人体传感器"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"2"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"89 x 2 = 178"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"玄关、厨房"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"玄关、厨房走廊自动亮灯")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"米家门窗传感器"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"49"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"大门"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"开门自动亮灯、远程监控家里联动")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"小米米家智能门锁"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"≈2000"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"大门"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"远程监控家里联动")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"小米米家智能摄像机"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"已有"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"玄关"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"放在门锁附近，远程监控家里联动")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"小米烟雾报警器"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"199"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"厨房"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"装在厨房")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"智能灯具(",(0,i.kt)("a",u({parentName:"td"},{href:"https://www.mi.com/yeelight-ceilinglamp?cfrom=list"}),"小米智能吸顶灯"),"、yeelight、飞利浦、宜家)"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"x"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"})),(0,i.kt)("td",u({parentName:"tr"},{align:"center"})),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"小米电视(待商榷)"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"})),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"客厅"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"小米智能洗衣机(待商榷)"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1499"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"})),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"智米智能马桶盖(待商榷)"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"})),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"卫生间"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))))),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://www.yidoutang.com/guide-49050.html"}),"智能家居你只知道小米？这份超简单上手指南，省钱还实用"))))}c.isMDXComponent=!0},67088:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Inspiration"),(0,i.kt)("p",null,"可以取的项目名: 百灵鸟、合欢树、seed、扑克牌回忆录、daphne"))}c.isMDXComponent=!0},30622:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Game Of Thrones"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/149bd36ec2c46d8c789da45ce9ec9f7d.jpg-400",alt:null}))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"WINTERFELL")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Kings LanDing")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Pentos")),(0,i.kt)("h3",null,"good word"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Nothing someone says before 'but' really counts."),(0,i.kt)("li",{parentName:"ul"},"My father understands mercy, when this is a room for it.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"得饶人处且饶人")))),(0,i.kt)("p",null,"S0 9 00:00"),(0,i.kt)("h3",null,"links"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://www.qxfun.com/game-of-thrones.html"}),"resource")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://secure.assrt.net/search2/Sub:%E6%9D%83%E5%8A%9B%E7%9A%84%E6%B8%B8%E6%88%8F+s01/?page=2"}),"download the subtitles"))))}c.isMDXComponent=!0},6432:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"方糖型包装"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"把包装纸裁剪成长是盒子周围长度 +2 ~ 3 厘米, 宽是盒子的宽度 +3 厘米, 盒底朝上置于纸张中央;"),(0,i.kt)("li",{parentName:"ol"},"将右侧的纸张沿盒子向内折入, 并保持纸的边缘位于盒子中央;"),(0,i.kt)("li",{parentName:"ol"},"再把左侧的纸向内折入;"),(0,i.kt)("li",{parentName:"ol"},"用透明胶或双面胶带将纸张重叠处固定;"),(0,i.kt)("li",{parentName:"ol"},"两侧的纸沿着盒子向内折入;"),(0,i.kt)("li",{parentName:"ol"},"按照顺序，把纸张折成漂亮的梯形;"),(0,i.kt)("li",{parentName:"ol"},"在上下折纸的交接处轻轻做上标记;"),(0,i.kt)("li",{parentName:"ol"},"保持标记与边缘平行, 折叠下面的纸;"),(0,i.kt)("li",{parentName:"ol"},"用双面胶带或用漂亮的贴约将接合处固定, 再将另一侧包好, 翻到盒子正面, 用丝带或花装饰一下就完成了。")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/62b33e8a41f88835ecf25de101f38eec.jpg",alt:null}))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/04a72955723425fcad4cff7288b74d03.jpg",alt:null}))),(0,i.kt)("h3",null,"打蝴蝶结方法"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"在线的一半处穿过礼物盒;"),(0,i.kt)("li",{parentName:"ol"},"交叉旋转;")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/7d2ffb72e7deacf8c1665c39d0817a6a.jpg-300",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"http://www.mimidiy.com/2012/0919/li-wu-bao-zhuang-fa.html"}),"礼物包装方法"))))}c.isMDXComponent=!0},93736:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Recipe"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5ec7ed84857ab45413f82b1c2da5e4e4.jpg",alt:null}))),(0,i.kt)("h4",null,"葱油鲈鱼"),(0,i.kt)("p",null,"配料，鲈鱼(ban 鱼)一条（请卖鱼的人杀好修理干净）、小葱二两、油、料酒、生抽（鲜味酱油）、生姜一小块。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"锅里加满一些水，放进",(0,i.kt)("inlineCode",{parentName:"li"},"鱼"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"生姜"),"，",(0,i.kt)("inlineCode",{parentName:"li"},"料酒"),"，盖上锅盖;"),(0,i.kt)("li",{parentName:"ol"},"烧开水把鱼煮熟，用筷子在鱼身体戳一下，🐟鱼身容易戳穿就是熟了，如果硬穿不过去就是未熟，还需再煮会儿;"),(0,i.kt)("li",{parentName:"ol"},"盘里加些",(0,i.kt)("inlineCode",{parentName:"li"},"生抽酱油"),"，捞出鱼放盘里，葱切成",(0,i.kt)("inlineCode",{parentName:"li"},"葱米"),"放在鱼上面;"),(0,i.kt)("li",{parentName:"ol"},"锅里的水倒掉冲洗干净，",(0,i.kt)("inlineCode",{parentName:"li"},"锅烧干"),"烧热，倒",(0,i.kt)("inlineCode",{parentName:"li"},"一两五勺油"),"左右，油烧高温后热油淋到葱鱼上;")),(0,i.kt)("h4",null,"青菜豆腐皮"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"洗好青菜切断、豆腐皮浸泡一会儿撕碎;"),(0,i.kt)("li",{parentName:"ol"},"锅烧热倒少许油放进青菜翻炒，加些许水，放进豆腐皮加锅盖烧一分半左右，掀开盖加少许盐再翻炒几下搅匀盐;")),(0,i.kt)("h4",null,"肉末豆腐"),(0,i.kt)("p",null,"配料：方块豆腐，大蒜四瓣，葱四根，瘦肉二两，生抽酱油，料酒。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"豆腐中间用刀划个十字架，放进锅里，加水豆腐一半齐。"),(0,i.kt)("li",{parentName:"ol"},"大蒜放在菜板上用刀拍压碎去皮取蒜，切片后再剁碎些放旁边，把瘦肉冲洗放菜板用菜刀切片切条剁成肉泥（此时肉泥和蒜可以合在一起再用刀剁剁），剁成肉沫后加一点点盐用手去和抓一下，让盐均匀分布。"),(0,i.kt)("li",{parentName:"ol"},"蒜肉泥平放在豆腐上，",(0,i.kt)("inlineCode",{parentName:"li"},"料酒"),"两勺淋在肉沫豆腐上，",(0,i.kt)("inlineCode",{parentName:"li"},"酱油"),"一勺儿半也淋上去，",(0,i.kt)("inlineCode",{parentName:"li"},"葱梗"),"（下半段）切葱花也放上肉沫处。"),(0,i.kt)("li",{parentName:"ol"},"加锅盖起大火冒热气后中小火炖 5 到 8 分钟肉蒸熟，掀开锅盖用菜铲子在锅底豆腐处轻轻起豆腐移移，防止豆腐粘粘在锅底，葱绿叶那段切葱米撒在肉沫上加盖一分钟关火，用菜铲子托住豆腐块连肉沫移在盘里倒汤")),(0,i.kt)("h4",null,"秋葵"),(0,i.kt)("p",null,"秋葵洗好切段，不切段正条也可以。锅里放水煮到将要滚开时放进秋葵，煮两三分钟应该就可以捞出来了。锅里的水倒掉冲洗锅，开火锅烧热后至小火，倒两三滴油、两勺酱油、大蒜末翻搅几下哦，关火，酱油调料倒在小碟子上蘸着吃，（醋如需可以直接倒少许）"),(0,i.kt)("h4",null,"红烧黄刺鱼"),(0,i.kt)("p",null,"配料：黄刺鱼四条（请卖鱼的修好）料酒，酱油，生姜，青大蒜两根，油。"),(0,i.kt)("p",null,"1、鱼冲洗干净尽量水沥干（防止油锅里进水嗤嗤爆锅）姜蒜切好备用。\n2、起火烧锅倒适量油，先放生姜翻炒几下（防止鱼会粘锅）后，把姜推锅一边，放进鱼稍稍煎一下，把姜铲到鱼中间来，加料酒、酱油，盐（先放少些，防止过咸），加些许水，用菜铲子移挪一下鱼底处（防止粘锅）加大蒜下半段切小小段放进锅里。\n3、大火后中小火烧熟鱼后加入切好的大蒜叶再烧上一两分钟，可以尝一尝盐淡味道，如果太淡再加点点盐，关火连鱼带汤鱼头统一方向装盘。"))}c.isMDXComponent=!0},36623:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Sport"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.zhihu.com/question/400648101/answer/1680793795"}),"每天坚持跳绳 1000 个，一个月后会有什么变化？")," - 小婉青青的回答 - 知乎",(0,i.kt)("ul",u({parentName:"li"},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","购买磨砂膏")))))}c.isMDXComponent=!0},23751:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"那些年呆过的星巴克"),(0,i.kt)("h3",null,"杭州"),(0,i.kt)("p",null,"金逸影城店(2018 年 5 月 ~ 2018 年 12 月)"),(0,i.kt)("h3",null,"上海"),(0,i.kt)("p",null,"华新路店(2019 年 1 月 ~ 2019 年 9 月)"),(0,i.kt)("p",null,"名仕苑店(2019 年 10 月)"))}c.isMDXComponent=!0},70144:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/6114931ddce0b5e56ade13b45e2b3ec6.jpg-muyy",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"不久前年会主题征集活动中，我提交的主题是《在路上》，和骑手们一样，我们亦不是在路上呢？")),(0,i.kt)("p",null,"恰逢踏入社会一年之际写下第一篇年终总结，百感交集，有初融入团队的喜悦、有独自完成需求的兴奋、有一次次团建的畅饮也有过为自己能力不足的懊恼以及与好友离别的感伤。"),(0,i.kt)("p",null,"通过这篇总结，希望能记录些琐事，并给 2018 年的自己定下 promise。"),(0,i.kt)("h3",null,"启程"),(0,i.kt)("p",null,'按捺不住走出校园的兴奋，走入我达新世界的大门。当时未进公司的时候，在朋友圈中看到的小伙伴们的照片，当时心中一阵惊叹，"这么帅！！要拖后腿了"，不曾想到后来几个月和每个人发生的故事，已然成为生命中不可或缺的色彩了。时隔一年当再次回味这张照片时，似乎里面藏着初心。'),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/dd07286ed73f1c2f6091521254b9abf5.jpg-300",alt:null}))),(0,i.kt)("p",null,"春节结束后公司如期举行了年会，我在倒数第二个节目中独奏了二胡~，前端部门的年会中奖率也是全公司最高的，一度让其他部门的人说是改了脚本 o(╯□╰)o。运气也是实力的一部分吧，不过我没有中奖。再接着是为期 15 天的小黑屋封闭式开发快递模块，这也是我第一次感觉到了挫败感，让",(0,i.kt)("a",u({parentName:"p"},{href:"http://blog.5udou.cn/"}),"林师傅"),"帮填了好多坑。期间李开复老师来参观我们公司，我也跑去趁了张合照。同时迎来了陪我渡过短暂岁月的小伙伴虾球。一只可爱的猫咪。现在在新主人家过得很好。"),(0,i.kt)("h3",null,"batman && hawkeye"),(0,i.kt)("p",null,"在往后的一段时间，前端部门内部进行了更细致的分工划分，我被划分到了直营业务组，主要负责 batman(客服关系系统) 以及 hawkeye(运维系统)的开发与维护，期间经历了并参与了 batman、hawkeye 的技术栈迭代，从老鹰眼的 reflux 到 redux，以及 batman 网关独立抽离成一个 ts 项目。为了更好的熟悉 react 全家桶的工作流程，五月份的时候在仿照 batman 和 hawkeye 写了个 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/reactSPA"}),"demo"),"，现在收获了几百的 Star，也算今年的一大收获吧。o(╯□╰)o"),(0,i.kt)("p",null,"下面谈谈今年在做项目的收获和成长："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"首先是带我进入了奇妙的 React 技术栈 和 ES6 世界，对相关的知识点进行了实践；"),(0,i.kt)("li",{parentName:"ul"},"能合理对组件进行拆分；"),(0,i.kt)("li",{parentName:"ul"},"对 JS 异步流程有了一定认知；"),(0,i.kt)("li",{parentName:"ul"},"对底层组件的设计有了一定的认知；"),(0,i.kt)("li",{parentName:"ul"},"对 git 多人合作的流程有了一定的实践；"),(0,i.kt)("li",{parentName:"ul"},"在遇到不懂的知识时学会进行翻相关文档以及阅读源码；"),(0,i.kt)("li",{parentName:"ul"},"最后在 npm 上尝试发布了",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/diana"}),"第一个包"),"，并用到了 batman 中;")),(0,i.kt)("p",null,"谈完收获再来谈谈不足："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"知识点体系没有梳理成网，比较零散；"),(0,i.kt)("li",{parentName:"ul"},"知识面广度和深度都还欠缺;"),(0,i.kt)("li",{parentName:"ul"},"在项目优化的层面没有特别上心;"),(0,i.kt)("li",{parentName:"ul"},"在和别人交谈时，抓重点能力以及逻辑整合能力有待加强；"),(0,i.kt)("li",{parentName:"ul"},"效率不足，容易被琐事影响；")),(0,i.kt)("h3",null,"高山仰止"),(0,i.kt)("p",null,"分享一位同行的博客中让我感慨良多的话：",(0,i.kt)("inlineCode",{parentName:"p"},"行远自迩，登高自卑"),"。在写这篇总结前我曾以为这句话是说当你登高的途中看到比你站在更高更远处的人的时候会产生自卑感，现在不经莞尔一笑，",(0,i.kt)("inlineCode",{parentName:"p"},"风起于青萍之末，浪成于微澜之间"),"，那些让我高高仰望的人不正是有着一颗常人难能企及的大毅力和大心脏吗？而我呢，希望能离那群人能近一点是一点吧。想到现在负责的项目名为 batman，突然谐音想到了 better-man。新年计划做一个让别人靠得住的 better-man。"),(0,i.kt)("h3",null,"番外随笔"),(0,i.kt)("p",null,"今年刷了好多动漫，整体偏热血、玄幻类型，也入了 B 站刷了几部小清新动漫，如四月是你的谎言、宝石之国~，和朋友一起刷了几部有意义的电影，比如爱乐之城、寻梦环游记~；另外从 4 月份开始使用网易云音乐来，累计听了七八千首歌吧，基本码代码的时候都会带着耳机~，以英文歌、民谣为主，",(0,i.kt)("a",u({parentName:"p"},{href:"https://music.163.com/#/user/home?id=472504060"}),"我的歌单如下"),"；"),(0,i.kt)("p",null,"在游戏方面发挥稳定，王者荣耀上了最强王者以及为团队拿下个冠军，不过感觉花了太多时间在上面，浪费了不少原定的计划~，不过也算是青春的成长吧。公司年假即将会去曼巴玩上一段时间，也将算是我第一次出国。"),(0,i.kt)("p",null,"看书方面主要是技术类的，大概阅读了 6、7 本，这个比较尴尬了，看书看得慢而且看过的知识点也不是完全吃透了，新年期待改善。个人产出方面也比较低产，翻译文章和原创文章加起来十几篇~，我把它们集合在了 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog"}),"blog"),"这个项目里。不过也有值得高兴的事，搭建了自己的博客，并且写文章的深度自己感觉有所提高(虽然依然菜)。然后很遗憾的是今年的技术交流会一场也没参加成，怪自己的消息不灵通加上水平的不足。"),(0,i.kt)("h3",null,"总结展望篇"),(0,i.kt)("p",null,"这部分是对自己打算要成为一个 better-man 的一个 promise 吧。就结合文章中提到的不足点进行相应的改善(自己想到解决方案的先记下来了)，也就是新年的计划。望监督。"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"problen"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"flag"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"知识点碎片化"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"对已有的知识点进行思维脑图的整理，对将来的知识点也采取思维脑图的方式进行学习")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"知识面广度和深度欠缺"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"参与到一个千星 Star 的开源项目的改善，提高阅读源码的能力，阅读 6 本技术书籍，阅读 1 本非技术书籍")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"项目优化方面没有用心"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"课外学习积累相关方面知识并尝试用到公司项目中")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"没去成技术交流会"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"带有目的性地参加 1 到 2 场前端技术交流会")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"沟通能力不足"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"避免讲话结巴，加强语言组织能力和逻辑能力，没想清楚问题之前不要轻易回答")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"效率不足"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"加强自控能力，规定的时间做规定的事情，做到按时起睡，不晚于 8 点半起床")))))}c.isMDXComponent=!0},75477:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/19d9a998a632b464fed6d929326b0271.jpg-muyy",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"度过在点我达两年欢快的时光，开启在拼多多的新的旅程。")),(0,i.kt)("h3",null,"life"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/cbc85e6d794d9e52b0f60aa6fa18950b.jpg-400",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"2 月: 在老家的方岩山上跨了年；"),(0,i.kt)("li",{parentName:"ul"},"3 月: 和 w 做了过山车；"),(0,i.kt)("li",{parentName:"ul"},"4 月：面基了 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.im/user/584d7a3e2f301e00572fb7fc"}),"小小倩"),"; 参加了杭州的草莓音乐节；"),(0,i.kt)("li",{parentName:"ul"},"5 月：参加了掘金在杭的线下交流会, 初识",(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.im/user/58f87ae844d9040069ca7507"}),"染陌"),"、",(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.im/user/58f876dc5c497d0058e38ae1"}),"阿相"),"、静霞等掘金小伙伴，缘起；"),(0,i.kt)("li",{parentName:"ul"},"6 月：和小伙伴们游玩崇明岛，逛了魔都夜景；参加了 GraphQL 的专题技术分享, 和带我入门前端的 scott 老师握了手;"),(0,i.kt)("li",{parentName:"ul"},"9 月: 和小伙伴们在浙大玉泉校区参加 nodeparty;"),(0,i.kt)("li",{parentName:"ul"},"11 月：面基了刃捷兄，参加了 VueConf；加入",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/frontend9"}),"前端九部"),"；期间用脚本叫 r 起床并播报天气预报，脚本坚持了两周;"),(0,i.kt)("li",{parentName:"ul"},"12 月：去黄山山顶吃到了热腾腾的泡面; 在 nodeparty 上, 贺老对语言特性的深刻见解只有敬佩。"),(0,i.kt)("li",{parentName:"ul"},"1 月：接连两天的 SEE`、d2 大会除了干货满满，俨然成为了追星大会。见到了玉伯、张秋怡等大大的真容，和情封前辈进行了深度交流, 同时和九部的小伙伴也进行了线下聚餐。")),(0,i.kt)("h3",null,"Siren"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Siren")," 是星巴克 ",(0,i.kt)("inlineCode",{parentName:"p"},"Logo")," 上双尾女海妖的名字。本意是希望星巴克的咖啡就像 ",(0,i.kt)("inlineCode",{parentName:"p"},"Siren")," 的歌声那样美妙, 除此之外它还有个引申意 —— 克制欲望。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/aafa6d3e872bb6f9bef26b5ef6d228e5.jpg-400",alt:null}))),(0,i.kt)("p",null,"18 年下半年的周末大多待在下城区金逸影城(也就是 18 年 ",(0,i.kt)("inlineCode",{parentName:"p"},"VueConf")," 的举办地)的星巴克里看看书之类, 这家星巴克在喧嚣和安静之间保持了恰当好处, 坐在周围的可能是谈论艺术的大学教授，或者是带小朋友做作业的家长，又或者是看书的同学。自由、温馨，时间在这里可快可慢。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/f9b9be1e727cb817fc78668cc31b3191.jpg-400",alt:null}))),(0,i.kt)("h3",null,"18 年 —— 见闻色"),(0,i.kt)("p",null,"以下是对 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://muyunyun.cn/posts/b9cd3f63/"}),"18 年计划"),"的 review"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"flag"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"完成情况"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"对知识点采取思维脑图的方式进行学习"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"创建了 ",(0,i.kt)("a",u({parentName:"td"},{href:"https://github.com/MuYunyun/blog"}),"blog")," 项目进行了知识点的整理输出")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"参与到一个千星 Star 的开源项目的改善，提高阅读源码的能力，阅读 6 本技术书籍，1 本非技术书籍"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"在开源项目的参与深度上有所欠缺, 书籍阅读指标基本达成")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"课外学习积累相关方面知识并尝试用到公司项目中"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"指标达成")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"避免讲话结巴，加强语言组织能力和逻辑能力，没想清楚问题之前不要轻易回答"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"沟通交流能力需持续加强")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"加强自控能力, 规定的时间做规定的事情，做到按时起睡，不晚于 8 点半起床"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"自控能力有所提高，按时起睡指标未达成")))),(0,i.kt)("h3",null,"19 年 —— 武装色"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"阅读 5 本技术书籍，1 本非技术书籍，学习函数式编程"),(0,i.kt)("li",{parentName:"ul"},"落地一个有价值的项目"),(0,i.kt)("li",{parentName:"ul"},"深入 ",(0,i.kt)("inlineCode",{parentName:"li"},"React.js")," 社区，提一次 pr"),(0,i.kt)("li",{parentName:"ul"},"研读 ",(0,i.kt)("inlineCode",{parentName:"li"},"node.js")," 文档"),(0,i.kt)("li",{parentName:"ul"},"提升沟通交流能力, 做一次 party 分享"),(0,i.kt)("li",{parentName:"ul"},"请挚友喝星巴克(保底 12 杯)")),(0,i.kt)("h3",null,"感谢"),(0,i.kt)("p",null,"感恩亦师亦友的愚安 boss, 以及给我帮助的点我达小伙伴们; 感激对我给予肯定的刃捷、明江前辈; 感激与我聊到凌晨的兵长兄; 感谢给我提供前行指引的死月、芙兰姐; 感谢掘金社区让我结识了小小倩、染陌、相学长等好友。感谢所有内推、面试过我的前辈, 让我认识到自己的不足。最后感谢所有杭州的朋友们，期待下次更好的遇见！"))}c.isMDXComponent=!0},9904:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Time is flying, it arrives at the end of year again. This is my first year working in PinDuoDuo inc and it seems I arrive in the company yesterday. This point is a good chance to talk with(recognize) myself again. I try to conclude from ",(0,i.kt)("inlineCode",{parentName:"p"},"work"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"output"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"life")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"destination"),"."),(0,i.kt)("h3",null,"Learn from work"),(0,i.kt)("p",null,"The first course I learn from my team is about ",(0,i.kt)("inlineCode",{parentName:"p"},"starting with the end"),". It means everything we do today is prepared for the tomorrow. In the other word, we should realize which period the thing we're doing is in, and our team write summary every week to make sure the established goals become closer and closer."),(0,i.kt)("p",null,"The second course I learn from the work is to try to ",(0,i.kt)("inlineCode",{parentName:"p"},"use English more"),". There are so much rich resource in Medium, MDN, Frontend Masters and even in twitter. It's the first time I met with so many foreigners engineer in the JSConf but I can't talk with them fluently. It's obviously using English skillfully will open your eyes and improve efficiency looking for some information."),(0,i.kt)("p",null,"The last but most important is ",(0,i.kt)("inlineCode",{parentName:"p"},"how to communicate"),". It's artistic to describe something easily to make others understand. When arriving at our team at first, one of my leader's advice is the best way to join in the team is to share —— sharing ideas, knowledge and feeling. My colleagues are so excellent I learn a lot from them in these technical sharing parties every week. At the meanwhile I also share some ideas in it."),(0,i.kt)("h3",null,"Output of the article"),(0,i.kt)("p",null,"There are ten new articles added to ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog"}),"my blog"),", the direction is to talk about React, JavaScript, CSS and so on. If there are mistakes in it, welcome ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/issues/new"}),"point out"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/posts/8b09c168/"}),"Introduction To Functional Programming")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/posts/9f41fc98/"}),"Do Search In Data Structure Of React Fiber")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/posts/44b01006/"}),"Understand React Suspense deeply")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/posts/ba7c84ae/"}),"You don't know requestIdleCallback")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/posts/290a4219/"}),"Deep into React Hooks")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/posts/a1be1d41/"}),"How to make page run smoothly")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/posts/32fb0f08/"}),"Deep into React Hooks —— Design Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/posts/76ba81e7/"}),"Modern React test")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/posts/8bdf2cdf/"}),"Learn Controlled Component and Uncontrolled Component Again")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/posts/33fba87f/"}),"INHERITED AND NON-INHERITED IN CSS"))),(0,i.kt)("p",null,"There will be more creative articles to add in the future. Let's grow up together."),(0,i.kt)("h3",null,"Life"),(0,i.kt)("p",null,"I enjoy the quiet time sitting in the Cafe the whole day in Saturday and it's also nice to chat with friends or family there."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/65758e96048af8ff1fd619ba1abc834a.jpg-400",alt:null}))),(0,i.kt)("p",null,"And in other some weekend days, I take part in some FE conferences this year —— ",(0,i.kt)("inlineCode",{parentName:"p"},"FDConf"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"VUE Conf"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"D2"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"SEE Conf")," and so on. From these activities I learn some some new knowledge. For example, the article ",(0,i.kt)("a",u({parentName:"p"},{href:"http://muyunyun.cn/posts/a1be1d41/"}),"How to make page run smoothly")," is written after listening the sharing of Liu Bowen in FDConf. And luckily, I get the chance to take photo with ",(0,i.kt)("a",u({parentName:"p"},{href:"https://twitter.com/youyuxi"}),"Evan You")," and get the\nsignature from him."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/27a9372dcab28c9c15e1b273096b2680.jpg-300",alt:null}))),(0,i.kt)("p",null,"At the same time, it's happy to meet with old friends and make with new friends in these activities."),(0,i.kt)("h3",null,"Checklist && Destination"),(0,i.kt)("p",null,"Checking the plan of last year before making plans in new year."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Reading ",(0,i.kt)("inlineCode",{parentName:"li"},"five")," technical books and a not technical book, ",(0,i.kt)("del",{parentName:"li"},"learn Functional Programming"),": It is a shame not achieve this target. Instead of reading the whole books, I read more single posts or chapters partly in the last year."),(0,i.kt)("li",{parentName:"ul"},"Finishing ",(0,i.kt)("del",{parentName:"li"},"a valuable project"),": There are some valuable projects in my daily work, they're still in progress."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("del",{parentName:"li"},"Deep into ",(0,i.kt)("inlineCode",{parentName:"del"},"React")," community"),", submit a pr: There is some deep analyze in React this year, however it still needs making extra effort for making a pr;"),(0,i.kt)("li",{parentName:"ul"},"Deep ",(0,i.kt)("del",{parentName:"li"},"into the document of ",(0,i.kt)("inlineCode",{parentName:"del"},"Node.Js")),": the work of this year is connected with UI and component more closely, so the document of Node.Js has no much chance reading in practice;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("del",{parentName:"li"},"Improving the skill of communication, do a sharing in a party"),": The communication skill gets some improved, however it still needs be strengthened;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("del",{parentName:"li"},"Invite friends fro coffee(at least 12)"))),(0,i.kt)("p",null,"Keeping going on in the new year. Here lists some direction."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Keeping reading and writing. Creating more personal thoughts;"),(0,i.kt)("li",{parentName:"ul"},"Improving listening/writing skill in English continually;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Way: watching ten+ english movies and try to write some english posts."))),(0,i.kt)("li",{parentName:"ul"},"Improving the basic skills in data structure and composition principle continually;")))}c.isMDXComponent=!0},11606:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"The annual summary of 2020"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"工作",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"方法论"),(0,i.kt)("li",{parentName:"ul"},"脑图"))),(0,i.kt)("li",{parentName:"ul"},"开源",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"create-react-doc",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"RFC: album photo"))))),(0,i.kt)("li",{parentName:"ul"},"去过的路",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"难进"))),(0,i.kt)("li",{parentName:"ul"},"爱在黎明破晓前"),(0,i.kt)("li",{parentName:"ul"},"新年展望",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"数据结构跟进"),(0,i.kt)("li",{parentName:"ul"},"数据库"),(0,i.kt)("li",{parentName:"ul"},"Deep Learning")))))}c.isMDXComponent=!0},47446:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"桂林旅游"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"路线",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"day1: ",(0,i.kt)("inlineCode",{parentName:"li"},"漓江竹筏")," -> 兴坪古镇 -> 银子岩溶洞 -> 西街夜景\n住",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"-> ",(0,i.kt)("inlineCode",{parentName:"li"},"阿丽拉.阳朔糖舍")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"《印象.刘三姐》"),"演出、1969 酒吧"),(0,i.kt)("li",{parentName:"ul"},"-> 三千漓山水人文度假区 -> 山水实景演出 《三生三世三千漓》"))),(0,i.kt)("li",{parentName:"ul"},"day2: ",(0,i.kt)("inlineCode",{parentName:"li"},"热气球俯瞰桂林山水")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"遇龙河竹筏漂流")," -> 龙脊 -> 单程缆车上山 -> 金坑大寨 -> 金佛顶 -> 住龙脊景区"),(0,i.kt)("li",{parentName:"ul"},"day3: 龙脊梯田(早起看日出) -> 缆车下山 -> 黄洛瑶寨 -> ",(0,i.kt)("inlineCode",{parentName:"li"},"靖江王府")," -> 桂林璟象酒店吃自助餐(可以看到象鼻山) -> 夜游两江四湖 -> 入住碧玉国际大酒店。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"漓江竹筏"),": 桂林市区坐船 -> 沿着漓江到阳朔 -> 吃饭 -> 坐车返程",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"内容: 可以看到人民币 20 元人民币“黄布倒影”。"),(0,i.kt)("li",{parentName:"ul"},"时长: 4 小时船程。"),(0,i.kt)("li",{parentName:"ul"},"票价: 200+￥。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"三千漓山水人文度假区"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"渔家傲主题酒店",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"三生三世三千漓",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"时长: 1 小时"))))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"靖江王府"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"东西巷。(非物质文化遗产)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"讲古堂"),(0,i.kt)("li",{parentName:"ul"},"可以挑非物质文化遗产进行学习(制作扇子)"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"空中俯瞰桂林山水，热气球游玩"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"地点: 阳朔 燕莎航空营地"),(0,i.kt)("li",{parentName:"ul"},"方式",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"系留飞"),(0,i.kt)("li",{parentName:"ul"},"自由飞"))),(0,i.kt)("li",{parentName:"ul"},"内容",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"俯瞰遇龙河及阳朔美丽山水"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"遇龙河竹筏漂流"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"内容: 人在画中游"),(0,i.kt)("li",{parentName:"ul"},"时长: 2 小时漂流"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"印象.刘三姐"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"时长: 1 小时"))),(0,i.kt)("li",{parentName:"ul"},"资源县",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"河灯节"),(0,i.kt)("li",{parentName:"ul"},"八角寨",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"丹霞地貌: 山更高，更秃，更险，更难爬"))))),(0,i.kt)("li",{parentName:"ul"},"住",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"阿丽拉.阳朔糖舍",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"漓江边超美的度假酒店。"),(0,i.kt)("li",{parentName:"ul"},"晚上有《印象.刘三姐》演出"))))),(0,i.kt)("li",{parentName:"ul"},"猫儿山"),(0,i.kt)("li",{parentName:"ul"},"吃",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"桂林米粉、螺蛳粉"),(0,i.kt)("li",{parentName:"ul"},"阳朔",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"啤酒鱼(依据是否带鳞片判断是否正宗)")))))))}c.isMDXComponent=!0},21088:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"NanJin Travel"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"上午: ",(0,i.kt)("inlineCode",{parentName:"p"},"总统府"),"(地铁 2/3 号线大行宫)-> ",(0,i.kt)("inlineCode",{parentName:"p"},"1912 街区"),"(从总统府出来步行 20 分钟到 1912 街, 张嘉佳的从你的全世界路过, 有很多拍照打卡的地方, 吃饭芳满庭、咸亨酒店, 地铁 2/3 号线大行宫 5 号出口)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"下午: ",(0,i.kt)("inlineCode",{parentName:"p"},"鸡鸣寺"),"(地铁 3/4 号线鸡鸣寺站) -> ",(0,i.kt)("inlineCode",{parentName:"p"},"玄武湖"),"(钟山风景区)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"晚上: ",(0,i.kt)("inlineCode",{parentName:"p"},"夫子庙"),"(孔庙 + 学宫 + 贡院, 建议晚上去, 地铁 3 号线夫子庙站) -> ",(0,i.kt)("inlineCode",{parentName:"p"},"秦淮河"),"(夜游秦淮河)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"上午: ",(0,i.kt)("inlineCode",{parentName:"p"},"中山陵"),"(钟山风景名胜区, 地铁 2 号线下马坊站, 游 2 中山陵站) -> ",(0,i.kt)("inlineCode",{parentName:"p"},"美龄宫")," -> ",(0,i.kt)("inlineCode",{parentName:"p"},"老门东"),"(逛起来十分舒服的地方, 年代砖瓦巷子、豆干/梅花糕/咸亨臭豆腐, 有德云社, 地铁 3 号线夫子庙站)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"下午: ",(0,i.kt)("inlineCode",{parentName:"p"},"line friends"),"(适合拍照, 少女心, 地铁站鼓楼站 4b 出口) -> ",(0,i.kt)("inlineCode",{parentName:"p"},"南京网络小镇“未来号”"),"(地铁 3 号线秣周东路 2 号口步行 100 米) -> (南京博物馆(",(0,i.kt)("inlineCode",{parentName:"p"},"需网上预约"),"、地铁二号线明故宫) -> ",(0,i.kt)("inlineCode",{parentName:"p"},"先锋书店"),"(世界最美书店之一, 能寄明信片)) -> ",(0,i.kt)("inlineCode",{parentName:"p"},"狮子桥美食街"),"(地铁 1 号线玄武门站)"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"南京网络小镇“未来号” 退役的绿皮火车进行了改造 交通:地铁 3 号线秣周东路 2 号口步行 100 米")))}c.isMDXComponent=!0},65935:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Shanghai Travel"),(0,i.kt)("p",null,"奇思妙想的时空洞。安龙路 527 号 -> 巴黎春天 -> 摩微影院(长寿店)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"瞳艺 3D 星空错觉艺术馆:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"黄浦区 中山东二路 531 号(外滩十六铺观光码头商城负 2 楼);"),(0,i.kt)("li",{parentName:"ul"},"4000808429; 营业时间：10:00-21:00;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"艾米 1895 电影街(暂未营业):"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"如果想安静的看场两个人的电影，不如去静安商圈这家艾米 1895 电影街，体验一番私人影院的甜蜜感受;"),(0,i.kt)("li",{parentName:"ul"},"静安区 北京西路 1829 号 4 楼（近乌鲁木齐路）;"),(0,i.kt)("li",{parentName:"ul"},"电话：021-32586788;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"天真蓝照相馆"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"上海最美证件照"),(0,i.kt)("li",{parentName:"ul"},"虹口区 哈尔滨路 159 号(近 1913 老洋行)"),(0,i.kt)("li",{parentName:"ul"},"021-61558686"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"米域有光"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"由老厂房改造的现代联合办公空间，代号为“曼德拉”(Mandela) ，室内直通顶层天窗的白色旋转楼梯，象征着走向自由和光明之路。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"甜爱路"),": 上海虹口区的甜爱路"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"邮筒、邮戳，和道路两侧由 28 首中外著名爱情诗篇组成的“爱情墙”;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"东平路"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"有很多别致的餐厅，适合牵手的午后去品品阳光下午茶，那种静谧私密你一定喜欢;"),(0,i.kt)("li",{parentName:"ul"},"蒋介石故居爱庐、宋子文别墅、席德懿私宅，还有那家著名的餐厅藏珑坊;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"多伦路"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"八卦名人, 还可以留心英国古典主义的走廊, 伊斯兰风格的玻璃窗。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"武康路，复兴西路，武定路"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"历史气息的老街, 有很多名人故居;"),(0,i.kt)("li",{parentName:"ul"},"逛累了也可以寻觅一家安静的咖啡馆;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"巨鹿路"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"各色潮流时尚小店驻扎于此, 全上海最文艺的书店",(0,i.kt)("inlineCode",{parentName:"li"},"渡口书店"),";"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"锦江公园"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"摩天轮"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"复兴路"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"城市山民-谷"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"武夷路"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"它是无数风云人物扎堆的街道传奇女作家张爱玲、朦胧派诗人顾城，世界船王包玉刚都曾在这里留下历史身影;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"思南路"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"走在这里偶尔才会有一辆车和几个行人经过"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"顾村公园(若风推荐)、辰山植物园"))),(0,i.kt)("p",null,"世博公园, 滨江公园, 南苑「滨江绿地公园」-> 衡山路走到桃江路 -> 复兴西路"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"滨江绿地公园不错 -> 上海最棒的公共露营地")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"田子坊"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"是约会的极佳场所;"))),(0,i.kt)("li",{parentName:"ul"},"绍兴路",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"上海最文艺的路;"),(0,i.kt)("li",{parentName:"ul"},"这条不长的路上有许多出版社、雅致的咖啡馆、静谧的茶社、画室、小花店等。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"vue 吧"),";")),(0,i.kt)("h3",null,"Visited"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"坐标"),(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"项目"),(0,i.kt)("th",u({parentName:"tr"},{align:"left"}),"推荐指数"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"环球金融中心 100 层观光厅"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"})),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"※※※※※")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"长风公园水族馆"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"})),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"※※")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"衡山路"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"午后漫步, 晚上酒吧街(比较受欢迎的有茏莎、波缽街、欧玛莉、小红楼等)；吃了上海猪手排名榜第一的",(0,i.kt)("inlineCode",{parentName:"td"},"衡园酒家"),"；"),(0,i.kt)("td",u({parentName:"tr"},{align:"left"}),"※※※※※")))))}c.isMDXComponent=!0},77489:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"心愿清单"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","3D 打印机")))}c.isMDXComponent=!0},99352:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"华硕路由器"),(0,i.kt)("p",null,"型号: 华硕 RT-AC88U"),(0,i.kt)("p",null,"登录界面: ",(0,i.kt)("a",u({parentName:"p"},{href:"http://router.asus.com/"}),"http://router.asus.com/")),(0,i.kt)("p",null,"账号: pdd_cloud\n密码: pdd_cloud123"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"2.4GHz Network Name (SSID)\nASUS_E0_2G\n\n2.4GHz Wireless Security\npdd_cloud\n\n5GHz Network Name (SSID)\npdd_2G_5G\n\n5GHz Wireless Security\npdd_cloud\n")),(0,i.kt)("p",null,"初始 web 管理 IP 变成 ",(0,i.kt)("inlineCode",{parentName:"p"},"192.168.2.1")),(0,i.kt)("h3",null,"参考资料"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.chenshaowen.com/blog/asus-router-brush-merlin-firmware-and-mount-ss.html"}),"华硕路由器刷梅林固件，挂载 SS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://koolshare.cn/forum.php?mod=viewthread&tid=139322"}),"koolshare.cn")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.youtube.com/watch?v=xdIddRVE8qQ"}),"视频教学")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.asus.com.cn/Networking/RT-AC88U/HelpDesk_Manual/"}),"使用手册"))))}c.isMDXComponent=!0},23738:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"移动端场景下使用 Charles 代理的优点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"解决",(0,i.kt)("inlineCode",{parentName:"li"},"移动端真机接口调用不便查看"),"的问题。"),(0,i.kt)("li",{parentName:"ul"},"有利于解决",(0,i.kt)("inlineCode",{parentName:"li"},"发布到线上环境判断接口是否正常"),"的问题。")),(0,i.kt)("h3",null,"场景一: 代理查询接口请求数据"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"使用场景"),": 使用代理查询接口请求数据, 解决",(0,i.kt)("inlineCode",{parentName:"p"},"移动端真机访问页面时查看不了接口调用情况"),"的问题。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方法:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"打开 Charles, 配置手机可以代理的端口。菜单栏点击 ",(0,i.kt)("inlineCode",{parentName:"li"},"Proxy")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"Proxy Settings"),"。\n",(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/ec841f0461fa4b37cc333d24127785ee.jpg-400",alt:null}))),(0,i.kt)("li",{parentName:"ol"},"在手机中打开配置代理页面, 设置代理地址。",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"服务器地址: 代理控制台中(内网互联)手机抓包代理列表中的",(0,i.kt)("inlineCode",{parentName:"li"},"代理 host"),"。"),(0,i.kt)("li",{parentName:"ol"},"端口: 代理控制台中(内网互联)手机抓包代理列表中的",(0,i.kt)("inlineCode",{parentName:"li"},"代理端口"),"(在上图中, 映射至端口 8888)。"),(0,i.kt)("li",{parentName:"ol"},"认证: 默认关闭。"))),(0,i.kt)("li",{parentName:"ol"},"Charles 上设置要抓包的 https 地址。(http 地址则不需要进行这一步)",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"菜单栏点击 ",(0,i.kt)("inlineCode",{parentName:"li"},"Proxy")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"SSL Proxying Settings")))),(0,i.kt)("li",{parentName:"ol"},"手机装证书。注意此时手机一定要连代理，然后用手机浏览器访问 ",(0,i.kt)("inlineCode",{parentName:"li"},"chls.pro/ssl"),"。浏览器会自动下载软件然后安装。(如果无法自动下载, 请确认内网互联, 手机抓包配置是否正确。)")))),(0,i.kt)("h3",null,"技巧二: 使用本地前端代码调试测试环境数据"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"使用场景"),": 使用本地前端代码调试测试环境数据"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方法: 将测试环境域名代理到本地。",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"菜单栏点击 ",(0,i.kt)("inlineCode",{parentName:"li"},"Tools")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"Map Remote"),"。"),(0,i.kt)("li",{parentName:"ol"},"配置测试环境与本地域名。")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"此时需要将系统设置中的网络代理一栏，全部取消勾选(这里安利笔者写的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://"}),"flow 插件"),"，支持快速切换代理环境)，然后重启 Charles。")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/863fdb087e9b32eabf0c4b3a607235f8.jpg",alt:null}))),(0,i.kt)("h3",null,"场景一与场景二结合使用"),(0,i.kt)("p",null,"场景一与场景二是能同时使用的，以达到在真机侧调试本地的代码访问线上的数据。"),(0,i.kt)("h3",null,"Charles 的不足?"))}c.isMDXComponent=!0},86410:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"移动端 click 事件存在 300ms 时延"),(0,i.kt)("p",null,"移动端 ",(0,i.kt)("inlineCode",{parentName:"p"},"click")," 事件存在 ",(0,i.kt)("inlineCode",{parentName:"p"},"300ms")," 时延的原因: 设备需要根据这段时间用户的操作来判断是单点还是双点。"),(0,i.kt)("p",null,"解决思路: 使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"touchStart")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"touchEnd")," 来取代 ",(0,i.kt)("inlineCode",{parentName:"p"},"click")," 事件。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://juejin.im/entry/6844903427147825165"}),"相关链接"))),(0,i.kt)("h3",null,"点击穿透"),(0,i.kt)("p",null,"点击 a 标签下的一个返回按钮, 触发了 a 中的 href 跳转"),(0,i.kt)("p",null,"方法同上, 也是封装一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"tap")," 方法;"),(0,i.kt)("h3",null,"一些移动端上的有用的 css 属性"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"在 IOS 上增加 scroll 的灵敏度(出现滑动条): ",(0,i.kt)("inlineCode",{parentName:"li"},"-webkit-overflow-scrolling: touch;")),(0,i.kt)("li",{parentName:"ul"},"滑动场景下防止用户选中文字: ",(0,i.kt)("inlineCode",{parentName:"li"},"use-select: none;"))),(0,i.kt)("h3",null,"scrollTo"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"scrollTo")," 这个 api 作用在滚动子元素的父节点上。但是如果要有平缓的动画效果用其的属性 ",(0,i.kt)("inlineCode",{parentName:"p"},"behavior: 'smooth'")," 是不生效的。解决方案如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"方案一: 结合 ",(0,i.kt)("inlineCode",{parentName:"li"},"setTimeout")," 使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"css transition")," 属性, 在异步时间后移除 ",(0,i.kt)("inlineCode",{parentName:"li"},"transition"),";"),(0,i.kt)("li",{parentName:"ol"},"方案二: 使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"requestAnimationFrame")," 来完成效果;")),(0,i.kt)("h3",null,"移动端 1px 解决方案"),(0,i.kt)("p",null,"手机屏幕上存在 ",(0,i.kt)("inlineCode",{parentName:"p"},"devicePixelRatio")," 属性, 其值为物理像素和屏幕像素之比。"),(0,i.kt)("p",null,"方案一: 伪元素 + ",(0,i.kt)("inlineCode",{parentName:"p"},"transform: scaleY(0.5)"),";\n方案二: 使用 box-shadow。"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"box-shadow")," 这个方案有个缺陷是画上划线容易。方式如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"box-shadow: 0px -1px 0px 0px rgba(245, 245, 245, 1);\n")),(0,i.kt)("p",null,"但是缺陷是画下划线不便, 需要配合 ",(0,i.kt)("inlineCode",{parentName:"p"},"position: relative")," 以及 ",(0,i.kt)("inlineCode",{parentName:"p"},"z-index")," 来调整层级。"),(0,i.kt)("h3",null,"滑动穿透解决方案"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/React/%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91/modal.md#%E6%BB%91%E5%8A%A8%E7%A9%BF%E9%80%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"}),"滑动穿透解决方案"))),(0,i.kt)("h3",null,"移动端适配"),(0,i.kt)("h4",null,"分辨率"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"PPI(Pixel Per Inch): 每英寸包括的像素数"),(0,i.kt)("li",{parentName:"ul"},"DPI(Dot Per Inch): 每英寸包括的点数")),(0,i.kt)("h4",null,"设备独立像素"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"DP 或者 DIP(Device Independent Pixels): 设备独立像素, 用于安卓系统;"),(0,i.kt)("li",{parentName:"ul"},"PT(Point): 用于 IOS 系统;")),(0,i.kt)("h4",null,"设备像素比"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"DPR(device pixel ratio)"),(0,i.kt)("li",{parentName:"ul"},"物理像素与设备独立像素的比值, 浏览器上获取设备像素比的方法 ",(0,i.kt)("inlineCode",{parentName:"li"},"window.devicePixelRatio"),";")),(0,i.kt)("h3",null,"user-select"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  /* 阻止触摸选中文字 */\n  user-select: none;\n  /* 阻止 B 端 App 保存图片的弹框弹出 */\n  pointer-events: none;\n  /* 长按会选中文字 */\n  -webkit-touch-callout: none;\n}\n")),(0,i.kt)("h2",null,"移动开发指南"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"H5: 需要发版"),(0,i.kt)("li",{parentName:"ul"},"组件包: 不需要发版"),(0,i.kt)("li",{parentName:"ul"},"原生: 性能高")),(0,i.kt)("h2",null,"IOS 特有"),(0,i.kt)("h3",null,"模拟器中隐藏地址栏与工具栏, 便于查看、调试刘海屏样式"),(0,i.kt)("p",null,"结论: 在 IOS 大于 13 版本的机型中，可以点击左上角阅读器图标，选择「隐藏地址栏与工具栏」。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0d488254b20c9ffc2146367f1be7a43f.jpg",alt:null}))),(0,i.kt)("h3",null,"IOS 13 机型中在弹框类组件中使用 input 光标会消失"),(0,i.kt)("p",null,"见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/ionic-team/cordova-plugin-ionic-webview/issues/449#issuecomment-541907141"}),"issue")),(0,i.kt)("h3",null,"移动端移除滚动条"),(0,i.kt)("p",null,"移除滚动条有一个 css 属性 ",(0,i.kt)("inlineCode",{parentName:"p"},"-webkit-scrollbar"),", 其用法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),"&::-webkit-scrollbar {\n  display: none;\n  width: 0px;\n}\n")),(0,i.kt)("p",null,"但是在 ",(0,i.kt)("inlineCode",{parentName:"p"},"IOS")," 是不生效的, 解决方案如下:"),(0,i.kt)("p",null,"以竖直滑动为例: 在外层设置宽度为 400px(假设内容宽度为 400px)并设置 ",(0,i.kt)("inlineCode",{parentName:"p"},"overflow-x: hidden"),", 内层宽度为 417px(17px 为滚动条宽度)。"),(0,i.kt)("h3",null,"解决 IOS 下输入框自带圆角的问题"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  -webkit-appearance: none;\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"见 SearchBar 组件开发")),(0,i.kt)("h3",null,"IOS 下 input 光标大小调整"),(0,i.kt)("p",null,"在 IOS 中: 该行无文字时, 光标高度与 ",(0,i.kt)("inlineCode",{parentName:"p"},"line-height")," 一致; 该行有文字时, 光标高度从 ",(0,i.kt)("inlineCode",{parentName:"p"},"input")," 顶部到文字底部(这两种情况都是在有设定 ",(0,i.kt)("inlineCode",{parentName:"p"},"line-height")," 的时候)，如果没有 ",(0,i.kt)("inlineCode",{parentName:"p"},"line-height"),"，则是与 ",(0,i.kt)("inlineCode",{parentName:"p"},"font-size")," 一致(可能表述有误差)。"),(0,i.kt)("p",null,"解决方法如下: 设置 ",(0,i.kt)("inlineCode",{parentName:"p"},"line-height")," 为一个较小值(期望的光标大小), 再用 ",(0,i.kt)("inlineCode",{parentName:"p"},"padding")," 来撑开 ",(0,i.kt)("inlineCode",{parentName:"p"},"input")," 的区域;"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"见 SearchBar 组件开发")),(0,i.kt)("h3",null,"IOS9 兼容情况"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"window.scrollTo")," 在 IOS12.1 以下的机子下是不兼容的;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"insertAdjacentHTML")," 虽然在 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://caniuse.com/#search=insertAdjacentHTML"}),"caniuse")," 中看起来兼容性很好, 但是在 IOS10.2 以下的机子中部分节点是没有这个 api 的, 所以从中也能看出 caniuse 可以作为部分参考, 但不能全信;")),(0,i.kt)("h3",null,"IOS8 兼容情况"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Symbol"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"Map")," 在 ios8 中是不支持的"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/2da80724739178534ac4bb03459654d5.jpg",alt:null}))),(0,i.kt)("p",null,"后续陆续兼容以下属性"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"数组/字符串的 ",(0,i.kt)("inlineCode",{parentName:"li"},"includes")," 方法, ios9 开始支持"),(0,i.kt)("li",{parentName:"ul"},"document.body.append:")),(0,i.kt)("h3",null,"其它兼容"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"new Date('xxxx-xx-xx xx:xx')")," 在 IOS 系统中会报 Invalid Date, 在安卓中正常。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"兼容方法: ",(0,i.kt)("inlineCode",{parentName:"li"},"new Date('xxxx/xx/xx xx:xx')"),", 经验证该方法在 IOS 与 Android 都可运行。")))),(0,i.kt)("h2",null,"Android 特有"),(0,i.kt)("h3",null,"font-weight 在安卓机上失效"),(0,i.kt)("p",null,"0 ~ 400 一种粗细, 500 ~ 900 一种粗细。"),(0,i.kt)("h2",null,"IOS && Android"),(0,i.kt)("h3",null,"scrollTop 区分"),(0,i.kt)("p",null,"Anchor 组件"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// document.documentElement.scrollTop do effect in ios, and document.body.scrollTop do effect in android.\nconst scrollTop = document.documentElement.scrollTop || document.body.scrollTop\n")))}c.isMDXComponent=!0},7342:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"笔记系列 —— Node.js 源码是如何执行的"),(0,i.kt)("h3",null,"如何调试 node 源码 （IDE 选择和断点调试）"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"clone 源码到本地")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"c/c++ 3 步编译安装法, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://my.oschina.net/surjur/blog/349464"}),"参考")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-c"}),"./configure --debug   // 会生成 node/out/Debug 文件\nmake -j4              // -j4 为启用 4 个作业\nmake install\n")),(0,i.kt)("ol",u({},{start:3}),(0,i.kt)("li",{parentName:"ol"},"根目录下创建测试文件 test.js")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const fs = require('fs')\n\nfs.readFile('./node.gyp', {encoding: 'utf-8'}, function (e, content) {\n  console.log(content)\n})\n")),(0,i.kt)("ol",u({},{start:4}),(0,i.kt)("li",{parentName:"ol"},"IDE 使用 clion, 配置 Run -> Edit Configureations, 配置内容如下:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"选择 out/Debug/node 作为执行文件"),(0,i.kt)("li",{parentName:"ul"},"添加 test.js 作为命令行参数, 也可以添加 node 的其他参数, 比如 --expose-gc"),(0,i.kt)("li",{parentName:"ul"},"Before launch 栏中 build 去掉")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/747aa17d5be5e261b7a580c10880365f.jpg-400",alt:null}))),(0,i.kt)("ol",u({},{start:5}),(0,i.kt)("li",{parentName:"ol"},"点击 OK 按钮即完成配置, 在 src/node_file.cc 的 1592 行 ",(0,i.kt)("inlineCode",{parentName:"li"},"static void Read(const FunctionCallbackInfo<Value>& args)")," 增加断点, 此时 Run -> Debug 'node' 即可进入调试界面")),(0,i.kt)("h3",null,"编译步骤"))}c.isMDXComponent=!0},32333:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"express"),(0,i.kt)("p",null,"express 是一个基于 node.js 封装的框架。"),(0,i.kt)("p",null,"该 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/Basic%20Skill/node.js/express/index.js"}),"express demo")," 主要实现的功能点:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"路由模块"),(0,i.kt)("li",{parentName:"ul"},"中间件模块"),(0,i.kt)("li",{parentName:"ul"},"正则匹配路由"),(0,i.kt)("li",{parentName:"ul"},"静态文件处理")),(0,i.kt)("h3",null,"路由和中间件"),(0,i.kt)("h4",null,"版本一"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 测试用例\nconst app = express()\n\n// 测试路由\napp.get('/', function (req, res) {\n  res.end('hello express')\n})\n\n// 测试中间件\napp.use((req, res, next) => {\n  console.log('this is middleware1')\n  next()\n})\n\napp.use((req, res, next) => {\n  console.log('this is middleware2')\n  next()\n})\n\napp.listen(3000, function (req, res) {\n  console.log('server is listening port 3000')\n})\n\n// this is middleware1\n// this is middleware2\n// hello express\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const http = require('http')\nconst url = require('url')\n\nconst core = function(req, res) {\n  const method = req.method.toLocaleLowerCase()\n  const obj = url.parse(req.url, true)\n  const pathname = obj.pathname\n  const cb = hitRouting(method, pathname)\n  // 这里插入中间件\n  next(req, res)\n  cb(req, res)\n}\n\ncore.listen = function(port, fn) {                      // 挂载到 core 函数上\n  http.createServer(core).listen(port, '127.0.0.1', fn) // 核心还是这条语句, 即对 node 的封装\n}\n\nconst methods = ['post', 'get', 'delete', 'options', 'head']\nmethods.map(method => {\n  core[method] = (path, cb) => core.routes.push({ method, path, cb })\n})\n\ncore.routes = []      // 路由队列\ncore.middlewares = [] // 中间件队列\n\n// 命中路由, 获取回调\nconst hitRouting = function(method, pathname) {\n  let cb = (req, res) => res.end('no hit routing')\n  core.routes.map((r, index) => {\n    if (r.method === method && r.path === pathname) {\n      cb = r.cb\n      return\n    }\n  })\n  return cb\n}\n\ncore.use = function(middlewareFn) {\n  core.middlewares.push(middlewareFn)\n}\n\nlet i = 0\nconst next = function(req, res) {   // express 中间件的核心实现\n  const handler = core.middlewares[i++]\n  if (!handler) {\n    return\n  }\n  handler(req, res, next)\n}\n\nconst express = function() {\n  return core\n}\n")),(0,i.kt)("p",null,"版本一的路由和中间件是分为两个数组分别进行管理的；但是当看到 next() 函数又联想到可以借助 generator 函数来实现路由和中间件的集中管理(把中间件也当成是一个路由), 所以有了版本二的实现。"),(0,i.kt)("h4",null,"版本二"),(0,i.kt)("p",null,"版本二相较于版本一最主要是遍历方式的改变, 改为迭代器方式。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 测试路由\napp.get('/test/abc', function(req, res) {\n  res.end('hello express')\n})\n\n// 测试中间件\napp.use('/test', function(req, res, next) {\n  console.log('this is middleware')\n  next()\n})\n\napp.listen(3000, function(req, res) {\n  console.log('server is listening port 3000')\n})\n")),(0,i.kt)("p",null,"测试用例进行了改动, 比如当访问 ",(0,i.kt)("inlineCode",{parentName:"p"},"/test/abc")," 路由的时候, 其实也命中了 ",(0,i.kt)("inlineCode",{parentName:"p"},"/test")," 中间件, 所以此时中间件内的代码也会执行。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const http = require('http')\nconst url = require('url')\n\nconst core = function(req, res) {\n  const method = req.method.toLocaleLowerCase()\n  const obj = url.parse(req.url, true)\n  const pathname = obj.pathname\n  hitRouting(core.routes, method, pathname)(req, res)\n}\n\ncore.listen = function(port, fn) {                      // 挂载到 core 函数上\n  http.createServer(core).listen(port, '127.0.0.1', fn) // 核心还是这条语句, 即对 node 的封装\n}\n\ncore.routes = []      // 路由队列\nconst methods = ['post', 'get', 'delete', 'options', 'head', 'use']\nmethods.map(method => {\n  core[method] = (path, cb) => core.routes.push({ method, path, cb })\n})\n\nfunction* generator(arr) {  // 引人 Generator 函数\n  yield* arr\n}\n\nconst hitRouting = function(routes, method, pathname) { // 将中间件也当作是路由\n  const lazy = generator(routes)\n  return function(req, res) {\n    (function next() {\n      const tmp = lazy.next().value\n      if (!tmp) {\n        return\n      }\n      if (tmp.method === method && tmp.path === pathname) {                                     // 命中路由\n        tmp.cb(req, res)\n        next()\n      } else if (tmp.method === 'use' && (tmp.path === '/' || pathname.startsWith(tmp.path))) { // 命中中间件\n        tmp.cb(req, res, next)\n      } else {\n        next() // 跳过\n      }\n    }())\n  }\n}\n\nconst express = function() {\n  return core\n}\n")),(0,i.kt)("h3",null,"路由正则匹配"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 测试用例\napp.get('/blog/:id', function (req, res) { // 扩展功能①: 希望能匹配 /blog/123\n  console.log(req.param.id)                // 扩展功能②: 希望能通过 req.param.id 获取到相应参数\n  res.end('test /blog/:id')\n})\n")),(0,i.kt)("p",null,"上述功能简要实现如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const hitRouting = function(routes, method, pathname) { // 将中间件也当作是路由\n  const lazy = generator(routes)\n  return function(req, res) {\n    (function next() {\n      const tmp = lazy.next().value\n      const reg = new RegExp(tmp.path.replace(/:id/g, '\\\\d+'))\n      if (tmp.method === method && reg.test(pathname)) {        // 匹配 /blog/:id, 这里仅仅举个例子\n        const arr = tmp.path.split(':')\n        const pathNameArr = pathname.split('/')\n        const obj = {}\n        obj[arr[1]] = pathNameArr[pathNameArr.length - 1]\n        req.param = obj   // 实现 req.param.id 获取 id\n        tmp.cb(req, res)\n        next()\n      }\n      ...\n    }())\n  }\n}\n")),(0,i.kt)("h3",null,"静态资源的访问"),(0,i.kt)("p",null,"如果在浏览器中输入 ",(0,i.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:3000/index.html"),", 此时并不能处理这种情况, 接着加上访问静态资源的逻辑, 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'const core = function(req, res) {\n  const method = req.method.toLocaleLowerCase()\n  const obj = url.parse(req.url, true)\n  const pathname = obj.pathname\n  const ext = path.extname(pathname).slice(1)\n  if (ext) { // 处理静态文件请求\n    handleStaticFile(res, staticPath, ext)\n  }\n  ...\n}\n\n// 处理静态文件类型\nconst handleStaticFile = function (res, staticPath, ext) {\n  const mime = {\n    "html": "text/html",\n    "css": "text/css",\n    "js": "text/javascript",\n    "json": "application/json",\n    "gif": "image/gif",\n    "ico": "image/x-icon",\n    "jpeg": "image/jpeg",\n    "jpg": "image/jpeg",\n    "png": "image/png"\n  }\n  fs.exists(staticPath, (exist) => {\n    if (!exist) {\n      res.writeHead(404, {\'Content-Type\': \'text/plain\'})\n      res.write(\'The request failed\')\n      res.end()\n    } else {\n      fs.readFile(staticPath, (err, data) => {\n        if (err) throw err\n        res.writeHead(200, {\'Content-Type\': mime[ext] || \'text/plain\'})\n        res.write(\'The request success\')\n        res.end()\n      })\n    }\n  })\n}\n')))}c.isMDXComponent=!0},41358:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/tree/master/BasicSkill/node/koa"}),"项目实现源码")),(0,i.kt)("p",null,"该简版 koa 的实现包含以下 4 个步骤:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"http 模块的封装"),(0,i.kt)("li",{parentName:"ul"},"整合 Request、Response、Context 对象"),(0,i.kt)("li",{parentName:"ul"},"中间件"),(0,i.kt)("li",{parentName:"ul"},"错误捕获")),(0,i.kt)("h3",null,"http 模块的封装"),(0,i.kt)("p",null,"koa 区别于 express 的一个点是其采用了 ES6 语法进行书写。"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/7bdad6158a6d49bc3a99123a054b0934034cc598/BasicSkill/node/koa/application.js#L17"}),"相关代码")),(0,i.kt)("h3",null,"整合 Request、Response、Context 对象"),(0,i.kt)("p",null,"koa 的用法区别于 express 的一点, 是将 req, res 封装进 ctx 对象中"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// express\napp.get('/test/abc', function (req, res) {\n  res.end('hello express')\n})\n\n// koa\napp.use(async (ctx) => {\n  ctx.body = `hello koa`\n})\n")),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/7bdad6158a6d49bc3a99123a054b0934034cc598/BasicSkill/node/koa/application.js#L52"}),"相关代码")),(0,i.kt)("h3",null,"中间件"),(0,i.kt)("p",null,"koa2 的中间件是基于 async 实现的, 所以一起来探究关于 async 前置知识点:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"async function m1(next) {\n  console.log('m1')\n  await next()\n}\n\nasync function m2(next) {\n  console.log('m2')\n  await next()\n}\n\nasync function m3() {\n  console.log('m3')\n}\n")),(0,i.kt)("p",null,"如何将 m1, m2, m3 串联起来呢？"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var next1 = async function() {\n  await m2(next2)\n}\n\nvar next2 = async function() {\n  await m3()\n}\n\nm1(next1)\n")),(0,i.kt)("p",null,"接着将以上函数进行抽象:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var createAsync = function(fn, next) {\n  return async function() {\n    await fn(next)\n  }\n}\n\nvar next3 = createAsync(m3, null)\nvar next2 = createAsync(m2, next3)\nvar next1 = createAsync(m1, next2)\n\nnext1()\n")),(0,i.kt)("p",null,"再尝试优化:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var arr = [m1, m2, m3]\nvar next\n\nfor (let i = arr.length - 1; i > 0; i--) {\n  next = createAsync(arr[i], next)\n}\n\nnext()\n")),(0,i.kt)("p",null,"在上篇 express 的实现中, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/7bdad6158a6d49bc3a99123a054b0934034cc598/BasicSkill/node/express/index.js#L55"}),"中间件")," 采用了 generator 来实现, 而本篇 koa 则使用了上文所述的 async/await 知识点来完成。"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/7bdad6158a6d49bc3a99123a054b0934034cc598/BasicSkill/node/koa/application.js#L25"}),"相关代码")),(0,i.kt)("h3",null,"错误捕获"),(0,i.kt)("p",null,"此外完善的框架都有相应的错误捕获机制, 因此当程序 ",(0,i.kt)("inlineCode",{parentName:"p"},"throw new Error()")," 抛错时, 也进行了相应的错误捕获, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/7bdad6158a6d49bc3a99123a054b0934034cc598/BasicSkill/node/koa/application.js#L70"}),"相关代码")))}c.isMDXComponent=!0},53116:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const http = require('http')\nconst EventEmitter = require('events')\nconst context = require('./context')\nconst request = require('./request')\nconst response = require('./response')\n\nclass Koa extends EventEmitter {\n  constructor() {\n    super()\n    this.middlewares = []\n    this.context = context\n    this.request = request\n    this.response = response\n  }\n\n  listen(...args) {\n    http.createServer(this.callback()).listen(...args)\n  }\n\n  use(fn) {\n    this.middlewares.push(fn)\n  }\n\n  // 引人中间件\n  compose(ctx) {\n    const createAsync = function (fn, next) {\n      return async function () {\n        await fn(ctx, next)\n      }\n    }\n    let next = async function() { // 返回 Promise 对象, 从而进行后文 fn.then().catch() 调用\n      return Promise.resolve()\n    }\n\n    for (let i = this.middlewares.length - 1; i >= 0; i--) {\n      next = createAsync(this.middlewares[i], next)\n    }\n\n    return next()\n  }\n\n  callback() {\n    return (req, res) => {\n      const ctx = this.createCtx(req, res)\n      const handle = () => this.handleRes(ctx)\n      const errHandle = (err) => this.handleErr(err, ctx)\n      const fn = this.compose(ctx)\n      fn.then(handle).catch(errHandle)\n    }\n  }\n\n  // 将 req,  res 封装进 ctx 对象中\n  createCtx(req, res) {\n    const ctx = Object.create(this.context)\n    ctx.request = Object.create(this.request)\n    ctx.response = Object.create(this.response)\n    ctx.req = ctx.request.req = req\n    ctx.res = ctx.response.res = res\n    return ctx\n  }\n\n  handleRes(ctx) {\n    if (typeof(ctx.body) === 'string') {\n      ctx.statusCode && ctx.res.writeHead(ctx.statusCode)\n      ctx.res.end(ctx.body)\n    } else if (typeof(ctx.body) === 'object') {\n      ctx.statusCode && ctx.res.writeHead(ctx.statusCode)\n      ctx.res.end(JSON.stringify(ctx.body))\n    }\n  }\n\n  // 引人错误机制\n  handleErr(err, ctx) {\n    if (err.code === 'ENOENT') {\n      ctx.statusCode = 404\n    } else {\n      ctx.statusCode = 500\n    }\n    const msg = err.message || 'Internal Error'\n    ctx.res.end(msg)\n    this.emit('error', err)\n  }\n}\n\nmodule.exports = Koa\n")))}c.isMDXComponent=!0},19411:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 这个文件为上下文文件, 可以理解为承上启下作用\n// module.exports = {\n//   get query() {\n//     return this.request.query    // 比如这个 this.request 为 ./request.js 中的内容\n//   },\n\n//   set body(content) {\n//     this.response.body = content // 比如这个 this.response.body 为 ./response.js 的内容\n//   },\n\n//   get body() {\n//     return this.response.body\n//   },\n// }\n\n// 当 context 中属性越来越多, 我们可以使用 __defineGetter__ 以及 __defineSetter__\n// 属性封装相应方法来减少重复劳动, 日后要增加属性只要在数组中填入相应字段就行。\n\nconst proto = {}\n\nfunction set(type, property) {\n  proto.__defineSetter__(property, function(val) {\n    this[type][property] = val  // 这里 this 指向 proto, 原因指向调用函数的对象\n  })\n}\n\nfunction get(type, property) {\n  proto.__defineGetter__(property, function() {\n    return this[type][property]\n  })\n}\n\nconst setRequest = []\nconst getRequest = ['query']\nconst setResponse = ['body', 'statusCode']\nconst getResponse = ['body', 'statusCode']\n\ngetRequest.forEach(r => {\n  get('request', r)\n})\n\nsetResponse.forEach(r => {\n  set('response', r)\n})\n\ngetResponse.forEach(r => {\n  get('response', r)\n})\n\nmodule.exports = proto\n")))}c.isMDXComponent=!0},39498:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"第一版测试: 封装 http"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const Koa = require('../application')\n\nconst app = new Koa()\n\napp.use((req, res) => {\n  res.end('hello koa')\n})\n\napp.listen(3000, '127.0.0.1', () => {\n  console.log('listening on the 3000')\n})\n")))}c.isMDXComponent=!0},23929:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"第二版测试: 封装 request,response,context 对象"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const Koa = require('../application')\n\nconst app = new Koa()\n\n// // 测试自定义扩展\n// app.context.handle = function (errNo = 0, data, errMsg) {\n//   this.res.setHeader('Content-Type', 'application/json;charset=utf-8')\n//   // 注意 this 指向调用函数的对象, 也就是 ctx\n//   this.body = {\n//     errNo,\n//     data,\n//     errMsg\n//   }\n// }\n\n// // 调用自定义扩展\n// app.use(async (ctx) => {\n//   ctx.handle({\n//     errNo: 0,\n//     data: {\n//       name: '小明',\n//     },\n//     errMsg: 'success',\n//   })\n// })\n\n// 第二版最主要目的是把 app.use(req, res) 参数转化为简洁的写法如下:\napp.use(async (ctx) => {\n  ctx.body = `hello ${ctx.query.name}`\n})\n\napp.listen(3000, '127.0.0.1', () => {\n  console.log('listening on the 3000')\n})\n")))}c.isMDXComponent=!0},48804:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"第三版测试: 测试中间件"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const Koa = require('../application')\n\nconst app = new Koa()\n\nconst responseData = {}\n\napp.use(async (ctx, next) => {\n  responseData.name = 'xiaoming'\n  await next()\n  ctx.body = responseData\n})\n\napp.use(async (ctx, next) => {\n  responseData.gender = 'male'\n  await next()\n})\n\napp.use(async (ctx) => {\n  responseData.habbit = 'music'\n})\n\napp.listen(3000, '127.0.0.1', () => {\n  console.log('listening on the 3000')\n})\n")))}c.isMDXComponent=!0},96789:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"// 完善的框架都有相应的错误捕获机制\nconst Koa = require('../application')"),(0,i.kt)("p",null,"const app = new Koa()"),(0,i.kt)("p",null,"const responseData = {}"),(0,i.kt)("p",null,"// 第四版测试: 错误机制测试\napp.use(async (ctx, next) => {\nthrow new Error('ooops')\n})"),(0,i.kt)("p",null,"app.on('error', (err) => {\nconsole.log('111', err.stack)\n})"),(0,i.kt)("p",null,"app.listen(3000, '127.0.0.1', () => {\nconsole.log('listening on the 3000')\n})"))}c.isMDXComponent=!0},1266:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const url = require('url')\n\nmodule.exports = {\n  get query() {\n    return url.parse(this.req.url, true).query\n  }\n}\n")))}c.isMDXComponent=!0},84634:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"module.exports = {\n  get body() {\n    return this._body\n  },\n\n  set body(content) {\n    this._body = content // 创造一个名为 _body 的变量并给之赋值\n  },\n\n  get statusCode() {\n    return this.res.statusCode  // 返还状态码\n  },\n\n  set statusCode(code) {\n    this.res.statusCode = code\n  }\n}\n")))}c.isMDXComponent=!0},25830:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Child Process"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"child_process.exec()"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"exec command."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"child_process.execFile()"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"exec file such as git."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"child_process.fork()")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"child_process.execSync()")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"child_process.execFileSync()"))))}c.isMDXComponent=!0},11991:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"CommonJS modules"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"require.resolve(request[,options])"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Use the internal require() machinery to ",(0,i.kt)("inlineCode",{parentName:"li"},"look up the location of a module"),", but rather than loading the module, just return the resolved filename.")))))}c.isMDXComponent=!0},68856:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"fs.Stats"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Stats {\n  dev: 2114,\n  ino: 48064969,\n  mode: 33188,\n  nlink: 1,\n  uid: 85,\n  gid: 100,\n  rdev: 0,\n  size: 527,\n  blksize: 4096,\n  blocks: 8,\n  atimeMs: 1318289051000.1,\n  mtimeMs: 1318289051000.1,\n  ctimeMs: 1318289051000.1,\n  birthtimeMs: 1318289051000.1,\n  atime: Mon, 10 Oct 2011 23:24:11 GMT,\n  mtime: Mon, 10 Oct 2011 23:24:11 GMT,\n  ctime: Mon, 10 Oct 2011 23:24:11 GMT,\n  birthtime: Mon, 10 Oct 2011 23:24:11 GMT\n}\n")),(0,i.kt)("p",null,"Today, I'll diff atime、mtime、ctime and birthtime in Node.js."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"atime"),": or access time, is updated when the file’s contents are read by an application or a command such as ",(0,i.kt)("inlineCode",{parentName:"li"},"grep")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"cat"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"mtime"),": or modification time, is when the file was last modified. When you change the contents of a file, its mtime changes."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ctime"),", or change time, is when the file’s property changes. It will always be changed when the mtime changes, but also when you change the file’s permissions, name or location.")))}c.isMDXComponent=!0},71529:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"OS API"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os.hostname()"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Returns the host name of the operating system as a string."),(0,i.kt)("li",{parentName:"ul"},"eg: 'cloud-2.local'"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os.platform()"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Returns a string identifying the operating system platform."),(0,i.kt)("li",{parentName:"ul"},"eg: 'darwin'"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os.homedir()"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Returns the string path of the current user's home directory."),(0,i.kt)("li",{parentName:"ul"},"'/Users/mac'")))))}c.isMDXComponent=!0},42488:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"path 模块"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"path.basename(path[, ext])"),": 返回文件名。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"path.basename('/foo/bar/baz/asdf/quux.html')\n// Returns: 'quux.html'\n\npath.basename('/foo/bar/baz/asdf/quux.html', '.html')\n// Returns: 'quux'\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"path.dirname(path)"),": 返回路径地址。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"path.dirname('/foo/bar/baz/asdf/quux')\n// Returns: '/foo/bar/baz/asdf'\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"path.exename(path)"),": 如果最后一个 ",(0,i.kt)("inlineCode",{parentName:"li"},".")," 之前若有字符, 则返回 ",(0,i.kt)("inlineCode",{parentName:"li"},".")," 和后面的字符, 否则返回 ''。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"path.extname('index.html')\n// Returns: '.html'\n\npath.extname('index.coffee.md')\n// Returns: '.md'\n\npath.extname('index.')\n// Returns: '.'\n\npath.extname('index')\n// Returns: ''\n\npath.extname('.index')\n// Returns: ''\n\npath.extname('.index.md')\n// Returns: '.md'\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"path.join()"),": 将传入的参数进行合并。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"path.join('/foo', 'bar', 'baz/asdf', 'quux', '..')\n// Returns: '/foo/bar/baz/asdf'\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"path.resolve()"),": 返回绝对路径(绝对路径以 ",(0,i.kt)("inlineCode",{parentName:"li"},"/")," 开头), 注意该 api 遵循",(0,i.kt)("inlineCode",{parentName:"li"},"从右向左最小匹配"),"原则。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"path.resolve('/foo', '/bar', 'baz')\n// 根据从右向左匹配原则, /bar 与 baz 组成了绝对路径, 所以返回的结果是 /bar/baz\n\npath.resolve('wwwroot', 'static_files/png/', '../gif/image.gif');\n// If the current working directory is /home/myself/node,\n// this returns '/home/myself/node/wwwroot/static_files/gif/image.gif'\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"path.relative(from, to)"),": 返回相对路径, 其为 ",(0,i.kt)("inlineCode",{parentName:"li"},"to 路径"),"相对 ",(0,i.kt)("inlineCode",{parentName:"li"},"from 路径"),"的差值。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"path.relative('/data/orandea/test/aaa', '/data/orandea/impl/bbb')\n// Returns: '../../impl/bbb'\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"path.normalize"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"使用场景: 兼容跨平台路径")))))}c.isMDXComponent=!0},54136:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Process"),(0,i.kt)("p",null,"Process 模块继承自 eventEmitter 模块。"),(0,i.kt)("h4",null,"Event: exit"),(0,i.kt)("p",null,"监听:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"process.on('exit', (code) => {\n  ...\n})\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"注意的是 process.on() 中第二个参数必须是同步函数;")),(0,i.kt)("p",null,"触发时机:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"调用 ",(0,i.kt)("inlineCode",{parentName:"li"},"process.exit()"),";"),(0,i.kt)("li",{parentName:"ol"},"Node.js 事件循环中不再有额外的工作要执行;")),(0,i.kt)("p",null,"to read: Signal Events"))}c.isMDXComponent=!0},13711:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Usage"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const readline = require('readline');\n\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n\nrl.question('What do you think of Node.js? ', (answer) => {\n  // TODO: Log the answer in a database\n  console.log(`Thank you for your valuable feedback: ${answer}`);\n\n  rl.close();\n});\n")))}c.isMDXComponent=!0},6798:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"TTY"),(0,i.kt)("p",null,"TTY: short for terminal."))}c.isMDXComponent=!0},22536:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Api"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"promisify: callback promise 化")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'const { promisify } = require("util");\n')))}c.isMDXComponent=!0},69453:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"本文对 CAS(Central Authentication Service) 流程作个梳理。"),(0,i.kt)("h3",null,"什么是 CAS"),(0,i.kt)("p",null,"中央认证服务(",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/apereo/cas"}),"CAS"),")是是单点登录(SSO)的一种方案。使用它后所有应用可以公用一套登录系统, 在任意一个应用中进行登录后, 其它应用便无须再次登录。"),(0,i.kt)("p",null,"CAS 分为 CAS Client 和 CAS Server, 它们分工如下:"),(0,i.kt)("p",null,"CAS Client: 处理对受保护方应用的访问请求 (可以理解成网关项目);\nCAS Server: 处理账号、密码的认证, 需要独立部署 (部署在后端那边);"),(0,i.kt)("h3",null,"以 Batman 系统为例剖析登录 CAS 系统的流程"),(0,i.kt)("p",null,"下面以 Batman 为例对 CAS(Central Authentication Service) 流程作个梳理。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/89fccb6391b0697815078d6f725dc124.jpg",alt:null}))),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"在浏览器中输入 batman.dianwoda.cn;"),(0,i.kt)("li",{parentName:"ol"},"如果没有登录(session 里没有相应信息), 则重定向到 ",(0,i.kt)("inlineCode",{parentName:"li"},"https://cas.nidianwo.com/login?service=http%3A%2F%2Fbatman.dianwoda.cn%2F"),";"),(0,i.kt)("li",{parentName:"ol"},"输入账号密码进行认证;"),(0,i.kt)("li",{parentName:"ol"},"CAS Server 下发 ticket;"),(0,i.kt)("li",{parentName:"ol"},"校验 ticket;"),(0,i.kt)("li",{parentName:"ol"},"校验通过, 重定向回 batman.dianwoda.cn;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"登录了 batman 以后, 再在浏览器输入 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://newhawkeye.dianwoda.com"}),"http://newhawkeye.dianwoda.com")," 不用再次登录的原因？")),(0,i.kt)("p",null,"在 CAS Server 中进行了判断, 如果已经登录过, 则省略了步骤 3。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在 batman 登录了 CAS 系统以后, 为什么还要 ",(0,i.kt)("inlineCode",{parentName:"p"},"fetch https://cas.nidianwo.com/login?service=http://batman-gateway.dianwoda.com/auth/cas"))),(0,i.kt)("p",null,"应该是网关的搭建原因。batman 的 CAS Client 在后端那里, batman-gateway 作为一个 node 项目相当于又作为了一个 CAS Client。在已经登录 CAS 的基础上, 访问 ",(0,i.kt)("inlineCode",{parentName:"p"},"https://cas.nidianwo.com/login?service=http://batman-gateway.dianwoda.com/auth/cas")," 相当于执行上图的 2、4、5 步骤(省略了步骤 3)"),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://blog.csdn.net/cruise_h/article/details/51013597"}),"CAS 实现 SSO 单点登录原理"))))}c.isMDXComponent=!0},31839:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"RPC 是什么"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"RPC(Remote Procedure Call) 译为远端过程调用。即在一台机子上能调用到另外一台机子上的服务;"),(0,i.kt)("li",{parentName:"ul"},"RPC 可以基于 HTTP 调用也可以基于 TCP 调用。基于 TCP 调用性能更佳, 但是实现也更为复杂;"),(0,i.kt)("li",{parentName:"ul"},"RPC 通常要实现两部分协议, 一个是应用层协议(如 JSON), 一个是用来传输数据的通讯层协议(如 Dubbo);")),(0,i.kt)("h3",null,"RPC 调用过程"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"调用方通过本地网关调用相应服务;"),(0,i.kt)("li",{parentName:"ol"},"网关将服务名和参数封装为 RPC 对象传给客户端 RPC 框架(@dwd/noob-client);"),(0,i.kt)("li",{parentName:"ol"},"客户端 RPC 框架(@dwd/noob-client)将数据转化成二进制形式, 然后以 TCP 的形式传递给服务端 RPC 框架;"),(0,i.kt)("li",{parentName:"ol"},"服务端 RPC 框架将二进制数据反序列化为 RPC 对象, 并交由服务方处理, 服务端处理后返回结果;"),(0,i.kt)("li",{parentName:"ol"},"执行上述阶段的逆序操作;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"关于 RPC 细节点, 可以阅读 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.yuque.com/egg/nodejs/dklip5"}),"聊聊 Node.js RPC（一）— 协议"))),(0,i.kt)("h3",null,"结合代码分析 Java 包的调用过程"),(0,i.kt)("h4",null,"初始化阶段 —— RPC 调用之前"),(0,i.kt)("p",null,"在项目刚启动阶段, 网关项目会通过 zk(路由管理系统) 进行路由寻址(寻找相应后端组的服务), 后续网关项目就能和相应的后端组的服务直接通讯了。"),(0,i.kt)("p",null,"在初始化阶段, 网关项目会将项目信息、注册区域(异地多活)、所需服务等传递给 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://192.168.1.66:9090/FE/noob-client"}),"@dwd/noob-client"),", 相关代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import { Client } from '@dwd/noob-client'\n\nconst client = new Client({\n  application: {                // 项目信息\n    name: config.name,\n  },\n  registry: config.registry,    // 注册区域\n  reference: config.references, // 所需服务\n  routerServer: { address: routerAddress },\n})\n\nreturn client.init().then(() => {\n  for (const r of config.references) {\n    loadService(r.id)\n  }\n})\n")),(0,i.kt)("h4",null,"根据 xml 文件生成相关的包文件"),(0,i.kt)("p",null,"在项目伊始时, 会通过后端给出的 xml 文件, 根据脚本生成相应包的 ts 文件。比如以下代码为骑手服务组的一个包的 ts 文件。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'import { Reference } from \'@dwd/noob\'\nimport { provideService, javaType} from \'../../util/dubbo\'\n\n@provideService(\'com.dianwoba.rider.elastic.provider.RiderElasticProvider\')\nexport default class RiderElasticProvider implements com.dianwoba.rider.elastic.provider.RiderElasticProvider {\n\n  constructor(private _ref: Reference<com.dianwoba.rider.elastic.provider.RiderElasticProvider> ) {}\n\n  async pageSearch(@javaType({"name":"com.dianwoba.rider.elastic.domain.dto.param.RiderEsParamDTO","isPrimitive":false,"isArray":false,"isGeneric":false}) paramDTO: com.dianwoba.rider.elastic.domain.dto.param.RiderEsParamDTO) : Promise<com.dianwoba.dubbo.base.result.Pagination<com.dianwoba.rider.elastic.domain.dto.result.RiderEsDTO>> {\n    return this._ref.invoke(\'pageSearch\', Array.from(arguments))\n  }\n\n  ...\n}\n')),(0,i.kt)("h4",null,"RiderElasticProvider 的实例化"),(0,i.kt)("p",null,"网关的核心架构使用了 IoC 框架 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/inversify/InversifyJS"}),"inverify"),"。在 IoC 架构下, 实例化的过程在容器内进行。"),(0,i.kt)("p",null,"在上述代码点开 ",(0,i.kt)("inlineCode",{parentName:"p"},"provideService")," 方法, 可以看到实例化的过程 ",(0,i.kt)("inlineCode",{parentName:"p"},"new ServiceClass(reference)"),", 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"// dubbo.ts\nimport { Client } from '@dwd/noob-client'\n\nexport const provideService = <T>(interfaceName: string) => (ServiceClass: interfaces.Newable<T>) => {\n  const reference = Client.reference.get(interfaceName)                    // 获取远程引用资源\n  const service = proxyService(new ServiceClass(reference), interfaceName) // 代理实例对象, 下文解析\n  moduleBind<T>(interfaceName).toConstantValue(service)                    // 依赖注入\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"reference")," 对象的 ",(0,i.kt)("inlineCode",{parentName:"p"},"__proto__")," 属性上有 invoke 方法(继承自 @dwd/noob)")),(0,i.kt)("h4",null,"proxyService 代理"),(0,i.kt)("p",null,"proxyService 方法的作用给包类的每个方法做了一层代理, 代理的具体作用是将传入参数和包名包装为 RPC 对象。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"// dubbo.ts\nfunction proxyService<T>(service:T, identifier: string) {\n  let handler = {\n    apply: function(target: Function, thisArgument: any, argumentsList: any[]) {\n      let funcName = target.name\n      // 获取前面代码 @javaType({}) 中声明的对象\n      let paramTypes: JavaType[] = Reflect.getMetadata(JAVATYPE_SYMBOL, service, funcName)\n      // 工厂模式创建转化为 RPC 对象的方法\n      let transform = converter.methodParameterTransformerFactory(...paramTypes)\n      // 将传入参数和包名转化为 RPC 对象\n      let args = transform(argumentsList)\n      return target.apply(thisArgument, args)\n    }\n  }\n  Object.getOwnPropertyNames(Object.getPrototypeOf(service)).filter(name => name !== 'constructor' && !name.startsWith('_')).forEach(methodName => {\n    service[methodName] = new Proxy(service[methodName], handler) // 将原型链上 service[methodName] 赋值到 service[methodName] 上, 并用 handler 进行代理\n  })\n  return service\n}\n")),(0,i.kt)("h3",null,"番外笔记"),(0,i.kt)("h4",null,"ts 的语法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"class Test {\n  constructor(private _ref) {}\n}\n")),(0,i.kt)("p",null,"ts 转换为 js 的形式如下"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Test(_ref) {\n  this._ref = _ref\n}\n")))}c.isMDXComponent=!0},79981:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"解读 IoC 框架 InversifyJS"),(0,i.kt)("p",null,"InversityJS 是一个 IoC 框架。IoC(Inversion of Control) 包括依赖注入(Dependency Injection) 和依赖查询(Dependency Lookup)。"),(0,i.kt)("p",null,"相比于类继承的方式, 控制反转解耦了父类和子类的联系。"),(0,i.kt)("h3",null,"案例解析"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"import 'reflect-metadata'\nimport { inject, injectable, Container } from 'inversify'\n\nconst container = new Container()\n\n@injectable()\nclass PopMusic {\n  getName() {\n    return '流行音乐'\n  }\n}\ncontainer.bind('request1').to(PopMusic)\n\n@injectable()\nclass ClassicalMusic {\n  getName() {\n    return '古典音乐'\n  }\n}\ncontainer.bind('request2').to(ClassicalMusic)\n\n@injectable()\nclass Music {\n  pm: any\n  cm: any\n  constructor(\n    @inject('request1') popMusic: any,\n    @inject('request2') classicalMusic: any) {\n    this.pm = popMusic\n    this.cm = classicalMusic\n  }\n\n  getName() {\n    const result = this.pm.getName() + this.cm.getName()\n    return result\n  }\n}\ncontainer.bind('Plan').to(Music)\n\nconst music: any = container.get('Plan')\nconsole.log(music.getName()) // 流行音乐古典音乐\n")),(0,i.kt)("p",null,"上述案例可以抽象为下图:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/8a9ccba28d00ea0c752c3601d716ebcd.jpg-400",alt:"explain"}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"虚线表示可以注入, 但在代码中没有表现出来。")),(0,i.kt)("p",null,"代码流程可概括如下:"),(0,i.kt)("p",null,"1.将所有相关类(这里指 Music、popMusic、classicMusic) 通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"@injectable")," 声明进 ",(0,i.kt)("inlineCode",{parentName:"p"},"container")," 容器;"),(0,i.kt)("p",null,"2.通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"container.get()")," 获取 ",(0,i.kt)("inlineCode",{parentName:"p"},"container.bind().to(target)")," 中的目标对象(这里指 Music);"),(0,i.kt)("p",null,"3.如果目标对象中的 constructor() 里有 ",(0,i.kt)("inlineCode",{parentName:"p"},"@inject()"),", 则将相应的实例(这里指 PopMusic 与 classicalMusic 的实例)当作构造函数的参数'注入';"),(0,i.kt)("h3",null,"inject/injectable 相关源码"),(0,i.kt)("p",null,"inject 源码简化如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 这是一个属性装饰器\nfunction inject(serviceIdentifier) {\n  return function (target, targetKey) {\n    const metadataValue = { [targetKey]: [Metadata { key: 'inject', value: serviceIdentifier })] }\n    Reflect.defineMetadata('inversify:tagged_props', metadataValue, target.constructor);\n  }\n}\n")),(0,i.kt)("p",null,"injectable 源码简化如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 这是一个类装饰器\nfunction injectable() {\n  return function (target) {\n    const metadataValue = []\n    Reflect.defineMetadata('inversify:paramtypes', metadataValue, target)\n    return target\n  }\n}\n")),(0,i.kt)("p",null,"从简化版源码中可以看到 inject/injectable 最终是对 ",(0,i.kt)("inlineCode",{parentName:"p"},"Reflect.defineMetadata()")," 的一个使用。可以将 metadata 看成是一种相对高效的数据结构。"),(0,i.kt)("h4",null,"reflect-metadata"),(0,i.kt)("p",null,"InversityJS 深度结合了 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/rbuckton/reflect-metadata"}),"reflect-metadata"),", reflect-metadata 在 Reflect 基础上对其 api 进行了扩展。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"metadata 本质上是一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"WeakMap")," 对象。扩展: ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/%E5%AD%97%E5%85%B8.md#map-%E5%92%8C-weakmap-%E7%9A%84%E5%8C%BA%E5%88%AB"}),"Map 和 WeakMap 的区别"))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Reflect.defineMetadata(metadataKey, metadataValue, target[, propertyKey])")," 简化版实现如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const Metadata = new WeakMap()\n\nfunction defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n  metadataMap = new Map()\n  metadataMap.set(metadataKey, metadataValue)\n  targetMetadata = new Map()\n  targetMetadata.set(propertyKey, metadataMap)\n  Metadata.set(target, targetMetadata)\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Reflect.getOwnMetadata(metadataKey, target[, propertyKey])")," 简化版实现如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function getOwnMetadata(metadataKey, target, propertyKey) {\n  var targetMetadata = Metadata.get(target)\n  var metadataMap = targetMetadata.get(propertyKey)\n  return metadataMap.get(metadataKey)\n}\n")),(0,i.kt)("p",null,"其数据结构可表示如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"WeakMap {\n  target: Map {\n    propertyKey: Map {\n      metadataKey: metadataValue\n    }\n  }\n}\n")),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/inversify/InversifyJS/blob/master/wiki/architecture.md"}),"Architecture overview"))))}c.isMDXComponent=!0},75146:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"前端项目中的 global 对象"),(0,i.kt)("p",null,"webpack 项目中是能使用 global 的。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"(function(global) {\n\n})(window)\n")),(0,i.kt)("h3",null,"浏览器竟然存在 global"),(0,i.kt)("p",null,"开发/测试环境有 global 对象, 线上环境没有 global 对象, 应该是 core.js 这个库的版本不一致造成的。"),(0,i.kt)("p",null,"在 ",(0,i.kt)("inlineCode",{parentName:"p"},"batman/node_modules/core-js/modules/_redefine.js")," 这个包里进行了 ",(0,i.kt)("inlineCode",{parentName:"p"},"window.global")," 的赋值操作。"),(0,i.kt)("h3",null,"项目中枚举值前端自己维护的原因"),(0,i.kt)("p",null,"枚举是根据后端的注释所生成的, 如果后端注释写错或者没有写注释, javadoc 就生成不了。"),(0,i.kt)("h3",null,"Content-Type"),(0,i.kt)("p",null,"这个部分的知识对使用 postman 很有帮助。"),(0,i.kt)("p",null,"Content-Type: application/json      会将相应类型传到网关\nContent-Type: x-www-form-urlencoded 所有类型都以字符串的形式传到网关"),(0,i.kt)("h3",null,"痛点"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","结合 vscode 插件定制模板, 快速插入")))}c.isMDXComponent=!0},56397:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tc39/proposals/blob/master/finished-proposals.md"}),"Async function")," 在 2017 年已到达了 stage 4。"),(0,i.kt)("h3",null,"async/await 使用注意点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"为了不让程序挂掉, 注意捕获错误")),(0,i.kt)("p",null,"写法 1: 用 ",(0,i.kt)("inlineCode",{parentName:"p"},"try/catch")," 捕获"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"async function test1() {\n  try {\n    await Promise.reject(new Error('boom'))\n  } catch(e) {\n    console.log(e)\n  }\n  console.log('go on')\n}\n\ntest1()\n// Error: boom\n// go on\n")),(0,i.kt)("p",null,"写法 2: 直接在 ",(0,i.kt)("inlineCode",{parentName:"p"},"await")," 后面的 ",(0,i.kt)("inlineCode",{parentName:"p"},"promise")," 上进行 ",(0,i.kt)("inlineCode",{parentName:"p"},"catch")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"async function test2() {\n  await Promise.reject(new Error('boom')).catch(e => console.log(e))\n  console.log('go on')\n}\n\ntest2()\n// Error: boom\n// go on\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用并行提高程序的运行速度")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 串行调用示范\nasync function block() {\n  const result1 = await request(url1)\n  const result2 = await request(url2)\n}\n")),(0,i.kt)("p",null,"在如上案例中, ",(0,i.kt)("inlineCode",{parentName:"p"},"request(url1)")," 请求未完成的话是不会发起 ",(0,i.kt)("inlineCode",{parentName:"p"},"request(url2)")," 请求的(类似串行调用), 若想使之变为并行调用可以作如下修改:"),(0,i.kt)("p",null,"写法 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"async function block() {\n  const promise1 = request(url1)\n  const promise2 = request(url2)\n  const result1 = await promise1\n  const result2 = await promise2\n}\n")),(0,i.kt)("p",null,"写法 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"async function block() {\n  const [result1, result2] = await Promise.all([request(url1), request(url2)])\n}\n")),(0,i.kt)("h3",null,"async 函数的实现原理"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"async function fn {}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"async")," 函数在低版本浏览器中其实就是转为 ",(0,i.kt)("inlineCode",{parentName:"p"},"co + Generator")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function fn {\n  return co(function* () {\n\n  })\n}\n")),(0,i.kt)("p",null,"关于简版 ",(0,i.kt)("inlineCode",{parentName:"p"},"co"),", 可以看在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/readES6/Generator%E6%9C%AD%E8%AE%B0.md#generator-%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8"}),"Generator 函数的异步应用")," 的实现。"),(0,i.kt)("h3",null,"异步遍历器"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tc39/proposal-async-iteration"}),"proposal-async-iteration"),", 异步遍历器也已经到了 stage 4。")),(0,i.kt)("h4",null,"异步迭代器"),(0,i.kt)("p",null,"同步场景下可以通过如下获取 ",(0,i.kt)("inlineCode",{parentName:"p"},"value"),"、 ",(0,i.kt)("inlineCode",{parentName:"p"},"done"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const { value, done } = syncIterator.next()\n")),(0,i.kt)("p",null,"异步场景下可以通过如下方式获取 ",(0,i.kt)("inlineCode",{parentName:"p"},"value"),"、 ",(0,i.kt)("inlineCode",{parentName:"p"},"done")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"asyncIterator.next().then({ value, done } => {})\n")),(0,i.kt)("h4",null,"for await .. of"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"for await (const line of readLines(filePath)) {\n  console.log(line)\n}\n")))}c.isMDXComponent=!0},37475:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Generator 使用规律"),(0,i.kt)("p",null,"从一道题目开始:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function* gen() {\n  const a = yield 1\n  console.log(a)\n}\n")),(0,i.kt)("p",null,"为了让其能成功打印出 1, 设计如下函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function step(gen) {\n  const it = gen()\n  let result\n  return function() {\n    result = it.next(result).value\n  }\n}\n")),(0,i.kt)("p",null,"进行如下调用:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var a = step(gen)\na()\na() // 1\n")),(0,i.kt)("p",null,"从这个题目总结出规律:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"next")," 的调用数比 ",(0,i.kt)("inlineCode",{parentName:"li"},"yield")," 的调用数多 1;"),(0,i.kt)("li",{parentName:"ul"},"第一个 ",(0,i.kt)("inlineCode",{parentName:"li"},"next")," 传参无效, 从第二个 ",(0,i.kt)("inlineCode",{parentName:"li"},"next")," 开始传参有效并会作为 ",(0,i.kt)("inlineCode",{parentName:"li"},"yield")," 的结果返回;")),(0,i.kt)("p",null,"生成器中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"yield/next")," 除了控制能力外还有双向的消息通知能力:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"yield")," 后面跟的值能通过 ",(0,i.kt)("inlineCode",{parentName:"li"},"it.next().value")," 取到"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"it.next()")," 括号中的值又能作为 ",(0,i.kt)("inlineCode",{parentName:"li"},"yield")," 的结果返回")),(0,i.kt)("h3",null,"yield 暂停的位置"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function* foo(url) {\n  try {\n    const value = yield request(url)\n    console.log(value)\n  } catch (err) {\n    ...\n  }\n}\n\nconst it = foo('http://some.url.1')\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"yield")," 后面跟着的语句执行完再进入暂停状态的, 在如上代码中, 当执行 ",(0,i.kt)("inlineCode",{parentName:"p"},"it.next()")," 时, 可以稍加转换为如下形式:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function* foo(url) {\n  try {\n    const promise = request(url) // 当执行 it.next() 时, 这里是被执行的\n    const value = yield promise  // 这里被暂停\n    console.log(value)\n  } catch (err) {\n    ...\n  }\n}\n")),(0,i.kt)("h3",null,"遇到 return/throw"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"遇到 ",(0,i.kt)("inlineCode",{parentName:"li"},"return"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function* gen() {\n  yield 1\n  return 2\n  console.log('是否执行')\n}\n\nconst it = gen()\nit.next() // {value: 1, done: false}\nit.next() // {value: 2, done: true}\nit.next() // {value: undefined, done: true}\n")),(0,i.kt)("p",null,"总结: 遇到 ",(0,i.kt)("inlineCode",{parentName:"p"},"return"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"generator")," 函数结束中断, ",(0,i.kt)("inlineCode",{parentName:"p"},"done")," 变为 ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),";"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"遇到 ",(0,i.kt)("inlineCode",{parentName:"li"},"iterator")," 的 ",(0,i.kt)("inlineCode",{parentName:"li"},"throw"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function* gen() {\n  yield 1\n  console.log('是否执行')\n}\n\nvar it = gen()\nit.throw(new Error('boom')) // Error: boom\nit.next()                   // {value: undefined, done: true}\n")),(0,i.kt)("p",null,"总结: 遇到 ",(0,i.kt)("inlineCode",{parentName:"p"},"iterator")," 的 ",(0,i.kt)("inlineCode",{parentName:"p"},"throw"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"generator")," 函数运行中断, ",(0,i.kt)("inlineCode",{parentName:"p"},"done")," 变为 ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),";"),(0,i.kt)("h3",null,"Generator 的简单实现"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Generator")," 是一个返回迭代器的函数, 下面是其简版实现:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function foo(url) {\n  var state\n  var val\n  function process(v) {\n    switch (state) {\n      case 1:\n        console.log('requesting:', url)\n        return request(url)\n      case 2:\n        val = v\n        console.log(val)\n        return\n      case 3:\n        var err = val\n        console.log('Oops:', err)\n        return false\n    }\n  }\n  return {\n    next: function(v) {\n      if (!state) {\n        state = 1\n        return {\n          done: false,\n          value: process()\n        }\n      } else if (state === 1) {\n        state = 2\n        return {\n          done: true,\n          value: process(v)\n        }\n      } else {\n        return {\n          done: true,\n          value: undefined\n        }\n      }\n    },\n    throw: function() {\n      if (state === 1) {\n        state = 3\n        return {\n          done: true,\n          value: process(e)\n        }\n      } else {\n        throw e\n      }\n    }\n  }\n}\n\nvar it = foo('http://some.url.1')\n")),(0,i.kt)("h3",null,"Generator 函数的异步应用"),(0,i.kt)("p",null,"以 ",(0,i.kt)("inlineCode",{parentName:"p"},"co")," 库来说, 现在已经统一为 ",(0,i.kt)("inlineCode",{parentName:"p"},"Generator + Promise")," 的调用方式, 下面进行简单的模拟:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"co(function* () {\n  const result = yield Promise.resolve(true)\n  console.log(result) // true\n})\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 简版 promise\nfunction co(gen) {\n  const it = gen()\n  const step = function(data) {\n    const result = it.next(data)\n    if (result.done) {\n      return result.value\n    }\n    result.value.then((data) => {\n      step(data)\n    })\n  }\n  step()\n}\n")),(0,i.kt)("p",null,"观察 ",(0,i.kt)("inlineCode",{parentName:"p"},"co")," 库发现, ",(0,i.kt)("inlineCode",{parentName:"p"},"co")," 函数后返回的是 ",(0,i.kt)("inlineCode",{parentName:"p"},"promise"),", 使用如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"co(function* () {\n  const result = yield Promise.resolve(true)\n  return result // 这里有个语法, it.next() 碰到 return 后, 其值会变为 { value: result, done: true } 的形式\n}).then((data) => {\n  console.log(data) // true\n})\n")),(0,i.kt)("p",null,"我们再对其稍加改造, 使之更加添近 ",(0,i.kt)("inlineCode",{parentName:"p"},"co")," 库:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function co(gen) {\n  return new Promise((resolve, reject) => {\n    const it = gen()\n    let result\n    const step = function(fn) {\n      try {\n        result = fn()\n      } catch(e) {\n        return reject(e)\n      }\n      if (result.done) { return resolve(result.value) }\n      result.value.then((data) => {\n        step(() => it.next(data))\n      }, (err) => {\n        step(() => it.throw(err)) // 这里为了让抛错直接在 generator 消化, 所以 step 内改传函数\n      })\n    }\n    step(() => it.next())\n  })\n}\n")))}c.isMDXComponent=!0},47653:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Promise/A+ 核心"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/e1a0c15c44f9b014aa78d7b7620db474.jpg-200",alt:null}))),(0,i.kt)("p",null,"在实现一个符合 Promise/A+ 规范的 promise 之前, 先了解下 Promise/A+ 核心, 想更全面地了解可以阅读 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://segmentfault.com/a/1190000002452115"}),"Promise/A+规范")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Promise 操作只会处在 3 种状态的一种: 未完成态(pending)、完成态(resolved)、失败态(rejected);"),(0,i.kt)("li",{parentName:"ul"},"Promise 的状态只会出现从未完成态向完成态或失败态转化;"),(0,i.kt)("li",{parentName:"ul"},"Promise 的状态一旦转化, 将不能被更改;")),(0,i.kt)("h3",null,"Promise api"),(0,i.kt)("h4",null,"Promise.resolve()"),(0,i.kt)("p",null,"Promise.resolve() 括号内有 4 种情况"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'/* 跟 Promise 对象 */\nPromise.resolve(Promise.resolve(1))\n// Promise {state: "resolved", data: 1, callbackQueue: Array(0)}\n\n/* 跟 thenable 对象 */\nvar thenable = {\n  then: function(resolve, reject) {\n    resolve(1)\n  }\n}\n\nPromise.resolve(thenable)\n// Promise {state: "resolved", data: 1, callbackQueue: Array(0)}\n\n/* 普通参数 */\nPromise.resolve(1)\n// Promise {state: "resolved", data: 1, callbackQueue: Array(0)}\n\n/* 不跟参数 */\nPromise.resolve()\n// Promise {state: "resolved", data: undefined, callbackQueue: Array(0)}\n')),(0,i.kt)("h4",null,"Promise.reject()"),(0,i.kt)("p",null,"相较于 Promise.resolve(), Promise.reject() 原封不动地返回参数值"),(0,i.kt)("h4",null,"Promise.all(arr)"),(0,i.kt)("p",null,"对于 Promise.all(arr) 来说, 在参数数组中所有元素都变为决定态后, 然后才返回新的 promise。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 以下 demo, 请求两个 url, 当两个异步请求返还结果后, 再请求第三个 url\nconst p1 = request(`http://some.url.1`)\nconst p2 = request(`http://some.url.2`)\n\nPromise.all([p1, p2])\n  .then((datas) => { // 此处 datas 为调用 p1, p2 后的结果的数组\n    return request(`http://some.url.3?a=${datas[0]}&b=${datas[1]}`)\n  })\n  .then((data) => {\n    console.log(msg)\n  })\n")),(0,i.kt)("h4",null,"Promise.race(arr)"),(0,i.kt)("p",null,"对于 Promise.race(arr) 来说, 只要参数数组有一个元素变为决定态, 便返回新的 promise。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// race 译为竞争, 同样是请求两个 url, 当且仅当一个请求返还结果后, 就请求第三个 url\nconst p1 = request(`http://some.url.1`)\nconst p2 = request(`http://some.url.2`)\n\nPromise.race([p1, p2])\n  .then((data) => { // 此处 data 取调用 p1, p2 后优先返回的结果\n    return request(`http://some.url.3?value=${data}`)\n  })\n  .then((data) => {\n    console.log(data)\n  })\n")),(0,i.kt)("h4",null,"Promise.wrap(fn) —— 回调函数转 Promise"),(0,i.kt)("p",null,"通过下面这个案例, 提供回调函数 Promise 化的思路。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function foo(a, b, cb) {\n  ajax(\n    `http://some.url?a=${a}&b=${b}`,\n    cb\n  )\n}\n\nfoo(1, 2, function(err, data) {\n  if (err) {\n    console.log(err)\n  } else {\n    console.log(data)\n  }\n})\n")),(0,i.kt)("p",null,"如上是一个传统回调函数使用案例, 假如现在有个函数 Promise.wrap(), 使用其包裹 foo 函数从而使之 promise 化, 用法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const promiseFoo = Promise.wrap(foo)\n\npromiseFoo(1, 2)\n  .then((data) => {\n    console.log(data)\n  })\n  .catch((err) => {\n    console.log(err)\n  })\n")),(0,i.kt)("p",null,"让我们来实现 Promise.wrap() 函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Promise.wrap = function(fn) {\n  return funtion(...args) {\n    return new Promise((resolve, reject) => {\n      fn.apply(null, args.concat((err, data) => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(data)\n        }\n      }))\n    })\n  }\n}\n")),(0,i.kt)("h4",null,"then/catch/done"),(0,i.kt)("p",null,"这几个 api 比较简单, 合起来一起带过"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Promise.resolve(1)\n  .then((data) => {console.log(data)}, (err) => {console.log(err)}) // 链式调用, 可以传一个参数(推荐), 也可以传两个参数\n  .catch((err) => {console.log(err)}) // 捕获链式调用中抛出的错误 || 捕获变为失败态的值\n  .done()                             // 能捕获前面链式调用的错误(包括 catch 中), 可以传两个参数也可不传\n")),(0,i.kt)("h3",null,"实现一个 Promise"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"实践了一个符合 Promise/A+ 规范的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/repromise"}),"repromise"),"。")),(0,i.kt)("h4",null,"坑点 1: 事件循环"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"事件循环: 同步队列执行完后, 在指定时间后再执行异步队列的内容。")),(0,i.kt)("p",null,"之所以要单列事件循环, 因为代码的执行顺序与其息息相关, 此处用 setTimeout 来模拟事件循环；"),(0,i.kt)("p",null,"下面代码片段中, ① 处执行完并不会马上执行 setTimeout() 中的代码(③), 而是此时有多少次 then 的调用, 就会重新进入 ② 处多少次后, 再进入 ③"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"excuteAsyncCallback(callback, value) {\n  const that = this\n  setTimeout(function() {\n    const res = callback(value) // ③\n    that.excuteCallback('fulfilled', res)\n  }, 4)\n}\n\nthen(onResolved, onRejected) {\n  const promise = new this.constructor()\n  if (this.state !== 'PENDING') {\n    const callback = this.state === 'fulfilled' ? onResolved : onRejected\n    this.excuteAsyncCallback.call(promise, callback, this.data)              // ①\n  } else {\n    this.callbackArr.push(new CallbackItem(promise, onResolved, onRejected)) // ②\n  }\n  return promise\n}\n")),(0,i.kt)("h4",null,"坑点 2: this 的指向问题"),(0,i.kt)("p",null,"this.callbackArr.push() 中的 this 指向的是 ‘上一个’ promise, 所以类 CallbackItem 中, this.promise 存储的是'下一个' promise(then 对象)。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Promise {\n  ...\n  then(onResolved, onRejected) {\n    const promise = new this.constructor()\n    if (this.state !== 'PENDING') {        // 第一次进入 then, 状态是 RESOLVED 或者是 REJECTED\n      const callback = this.state === 'fulfilled' ? onResolved : onRejected\n      this.excuteAsyncCallback.call(promise, callback, this.data)  // 绑定 this 到 promise\n    } else {                               // 从第二次开始以后, 进入 then, 状态是 PENDING\n      this.callbackArr.push(new CallbackItem(promise, onResolved, onRejected)) // 这里的 this 也是指向‘上一个’ promise\n    }\n    return promise\n  }\n  ...\n}\n\nclass CallbackItem {\n  constructor(promise, onResolve, onReject) {\n    this.promise = promise // 相应地, 这里存储的 promise 是来自下一个 then 的\n    this.onResolve = typeof(onResolve) === 'function' ? onResolve : (resolve) => {}\n    this.onReject = typeof(onRejected) === 'function' ? onRejected : (rejected) => {}\n  }\n  ...\n}\n")),(0,i.kt)("h3",null,"拓展延伸"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"setTimeout(() => {\n  console.log('A')\n}, 0)\n\nPromise.resolve(\n  console.log('B')\n).then(() => {\n  console.log('C')\n})\n\nconsole.log('D')\n")),(0,i.kt)("p",null,"正常情况下, 此 demo 应该输出 ",(0,i.kt)("inlineCode",{parentName:"p"},"B D C A"),", 这里涉及到宏任务和微任务的知识点, 一个宏任务里可以有多个微任务。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"宏任务(macroTask): setTimeout、requestAnimationFrame"),(0,i.kt)("li",{parentName:"ul"},"微任务(microTask): promise、setImmediate、async/await")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"由于此项目中的 promise 是用 setTimeout 实现的, 所以在上述 demo 中, 此项目输出的结果是 ",(0,i.kt)("inlineCode",{parentName:"p"},"B D A C"),", 解决方法: 可以参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/YuzuJS/setImmediate"}),"setImmediate.js"),"。它的本质用了一些 hack 的手段, 比如借用了 ",(0,i.kt)("inlineCode",{parentName:"p"},"postMessage")," 这个来操作事件循环。")),(0,i.kt)("h3",null,"问题: promise.all 如何做到让多个 setTimeout 并发运行?"),(0,i.kt)("p",null,"这个就是 promise.all() 的本质了, 浏览器内部提供了一个事件循环机制来模拟成伪'并发'"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var oldTime = Date.now()\nsetTimeout(() => {console.log(Date.now() - oldTime)}, 1000) // 1001 ~ 1005(存在 4ms 的波动)\nsetTimeout(() => {console.log(Date.now() - oldTime)}, 2000) // 2001 ~ 2005\n")))}c.isMDXComponent=!0},23345:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Reflect"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Reflect")," 是 ",(0,i.kt)("inlineCode",{parentName:"p"},"ES6")," 新引人的特性, 其目的是把一些 ",(0,i.kt)("inlineCode",{parentName:"p"},"JavaScript")," 特有的属性 ",(0,i.kt)("inlineCode",{parentName:"p"},"api")," 抽离出来。其有如下优点:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"返回值更加合理")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var obj = {}\n\n// 在 obj 中定义 a 属性\nObject.defineProperty(obj, 'a', {\n  value: 2\n})\n\n// 使用 Object.defineProperty 在 obj 中重复定义 a 属性就会抛错\ntry {\n  Object.defineProperty(obj, 'a', { value: 3 })\n} catch(e) {\n  console.log(e) // Uncaught TypeError: Cannot redefine property: a\n}\n\n// 使用 Reflect.defineProperty 在 obj 中重复定义 a 属性则是返回 false\nif (Reflect.defineProperty(obj, 'a', { value: 3 })) {\n  console.log('属性添加成功')\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"将一些对象属性的操作判断统一为函数操作。")),(0,i.kt)("p",null,"比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"props in Obj")," 现在可写成 ",(0,i.kt)("inlineCode",{parentName:"p"},"Reflect.has(Obj, props)"),", 又比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"delete Obj[props]")," 现在可写成 ",(0,i.kt)("inlineCode",{parentName:"p"},"Reflect.deleteProperty(Obj, props)")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"与 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler#Methods"}),"Proxy Handler")," 方法参数同步")))}c.isMDXComponent=!0},73754:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"...")," 是 ES6 新出来的符号, 称为扩展运算符。它在不同情况下有不同的作用, 下文我们将对之进行梳理。"),(0,i.kt)("h3",null,"对象中的扩展运算符"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"...")," 当作对象扩展符使用时可以用来",(0,i.kt)("em",{parentName:"li"},"浅拷贝"),"目标对象的",(0,i.kt)("em",{parentName:"li"},"自有属性中的可枚举属性"),"。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"对象中的扩展运算符的作用等同于 Object.assign()。")),(0,i.kt)("p",null,"下面举例证明上述结论:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"验证对象扩展符只能 ",(0,i.kt)("inlineCode",{parentName:"li"},"copy")," 自有属性, 原型链上的属性不能 ",(0,i.kt)("inlineCode",{parentName:"li"},"copy"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Demo {\n  constructor() {\n    this.name = 'Lily'\n  }\n\n  testFn() {}\n}\n\nconst test = new Demo()\nconst cpObj = { ...test }\n\ncpObj.name === 'Lily' // true\ncpObj.testFn()        // Uncaught TypeError: cpTest.testFn is not a function\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"验证只能 copy 可枚举属性")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const obj = Object.defineProperty({ a: 1 }, 'b', {\n  enumerable: false,\n  value: 2\n})\n\nconst cpObj = { ...obj }\nobj.a   // 1\nobj.b   // 2\n\ncpObj.a // 1\ncpObj.b // undefined\n")),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"解构赋值")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const obj = { a: 1, b: 2, c: 3 }\nconst { a, ...x } = obj\nconst { a: data } = obj // 重命名\n\na // 1\nx // { b: 2, c: 3 }\n\ndata // 1\n")),(0,i.kt)("h3",null,"数组中的扩展运算符"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"浅拷贝")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const arr = [1, 2, 3]\nconst cpArr = [...arr]\n\ncpArr // [1, 2, 3]\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"下面这种写法也是浅拷贝的变种:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const arr = [1, 2, 3]\nconst cpArr = []\n\ncpArr.push(...arr)\ncpArr // [1, 2, 3]\n")),(0,i.kt)("p",null,"因为这个特性, 我们还可以合并数组, 如下所示:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const arr1 = [1, 2, 3]\nconst arr2 = [4, 5, 6]\n\nconst mergeArr = [...arr1, ...arr2]\n\nmergeArr // [1, 2, 3, 4, 5, 6]\n")),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"解构赋值")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"[a, ...b] = [1, 2, 3]\n\na // 1\nb // [2, 3]\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"扩展运算符用来做解构赋值时, 只能放在最后一位")),(0,i.kt)("ol",u({},{start:3}),(0,i.kt)("li",{parentName:"ol"},"传参中使用, 将所传的参数变为数组")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Demo(...args) {\n  console.log(args)\n}\n\nDemo(1, 2, 3) // [1, 2, 3]\n")),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.zcfy.cc/article/an-easy-guide-to-object-rest-spread-properties-in-javascript"}),"对象扩展符简易指南"))))}c.isMDXComponent=!0},14971:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"CommonJS 模块与 ES6 模块间的差异"),(0,i.kt)("h4",null,"写法上的差异"),(0,i.kt)("p",null,"CommonJS 中常见导出和引人写法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 导出\nmodule.exports = a\n\n// 引人\nconst a = require('./xxx')\n")),(0,i.kt)("p",null,"ES6 中常见导出和引人写法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 导出\nexport default a          // 编译成 CommonJS: exports.default = a (ES 编译成的 CommonJS 形式)\n\n// 引人\nimport a from './xxx'     // 编译成 CommonJS: require('./xxx').default\n\n// 导出\nexport { a }              // 编译成 CommonJS: exports.a = a\n\n// 引人\nimport { a } from './xxx' // 编译成 CommonJS: require('./xxx').a\n")),(0,i.kt)("h4",null,"加载机制的差异"),(0,i.kt)("p",null,"在 CommonJS 的模块中, require 是动态(运行时)加载的；在 ES6 的模块中, import 是静态(编译时)加载的。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"ES6 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tc39/proposal-dynamic-import"}),"import() 动态加载的提案")," 目前已到第 3 阶段。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"另外如果是使用 TypeScript 的话, 编译成 JavaScript 的代码后再用上述结论。")),(0,i.kt)("h4",null,"获取模块的差异"),(0,i.kt)("p",null,"在 CommonJS 中, 获取的是一个",(0,i.kt)("inlineCode",{parentName:"p"},"值/模块的拷贝"),", 见如下例子:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// test.js\nlet a = 1\n\nfunction add() {\n  a = 2\n}\n\nmodule.exports = { a, add }\n\n// test2.js\nconst { a, add } = require('./test')\n\nconsole.log(a)\nadd()\nconsole.log(a)\n\n// 执行 node test2.js, 输出结果为 1 1\n")),(0,i.kt)("p",null,"在 ES6 中, 获取的是一个",(0,i.kt)("inlineCode",{parentName:"p"},"值/模块的引用"),", 见如下例子:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// test.js\nlet a = 1\n\nfunction add() {\n  a = 2\n}\n\nexport { a, add }\n\n// index.html\nimport { a, add } from './index.js'\n\nconsole.log(a)\n\nadd()\n\nconsole.log(a)\n\n// 在浏览器中输出结果为 1 2\n")),(0,i.kt)("h3",null,"同时支持 CJS 与 ESM 包的最佳实践"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"提供一个 CJS 版本")),(0,i.kt)("p",null,"这样可以确保你的库在旧版本 Node 下跑的更好。(如果你写的是 TypeScript 或者其他需要编译到 JavaScript 的语言，那么编译到 CJS。)"),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"基于 CJS 封装到 ESM 版本 (将 CJS 封装到 ESM 很容易，但是 ESM 库是没法封装到 CJS 库的)。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import cjsModule from '../index.js';\nexport const foo = cjsModule.foo;\n")),(0,i.kt)("p",null,"Todo: 调研为什么 CJS 封装为 ESM 容易, 但是反过来不行。"))}c.isMDXComponent=!0},74015:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"箭头函数中的 this"),(0,i.kt)("p",null,"理解下箭头函数中 this 的本质, 看如下代码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"() => console.log(this)\n")),(0,i.kt)("p",null,"经过 babel 转化后的 ES5 代码如下"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var self = this\n(function () {\n  console.log(self)\n})\n")),(0,i.kt)("p",null,"结论: 箭头函数中 this 的值等同于箭头函数当前所处作用域下的 this。"),(0,i.kt)("h4",null,"箭头函数的一些不易理解场景"),(0,i.kt)("p",null,"有如下 html 代码,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),"<body>\n  <input />\n</body>\n")),(0,i.kt)("p",null,"加上如下 JavaScript 脚本测试 this 指向:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var inputTest = document.getElementsByTagName('input')\ninputTest[0].addEventListener('click', function() {\n  console.log(this) // 指向 input\n})\n\ninputTest[0].addEventListener('click', () => {\n  console.log(this) // window\n})\n")),(0,i.kt)("p",null,"上述这段是为 dom 节点绑定事件的常见写法, 但是 this 指向就很奇怪了, ES5 中指向了 ",(0,i.kt)("inlineCode",{parentName:"p"},"<input />"),", ES6 中却指向了 window。至于原因, 其实是回调函数引起的坑(得看浏览器触发事件时的代码)。再加上箭头函数的特殊性所以产生以上迷惑的代码片段。"),(0,i.kt)("h3",null,"箭头函数小 tip"),(0,i.kt)("p",null,"当箭头函数返回的结果是对象时, 注意下写法的细节:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const result1 = () => ({ a: 1 })\n\nconst result2 = () => { return { a: 1 } }\n")))}c.isMDXComponent=!0},55644:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"ES5 之继承"),(0,i.kt)("h4",null,"基于构造函数的继承"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Parent1() {\n  this.parent1 = 'parent1'\n  this.arr = [1, 2, 3]\n}\n\nParent1.prototype.walk = 'I can walk'\n\nfunction Child1() {\n  Parent1.call(this)\n  this.child1 = 'child1'\n}\n\nconst child11 = new Child1()\nconst child12 = new Child1()\n\n// 测试\nchild11.parent1 // parent1\nchild11.walk    // undefined\n\nchild11.arr.push(4)\nchild11.arr // [1, 2, 3, 4]\nchild12.arr // [1, 2, 3]\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"优点: 构造函数的 属性具有唯一性(child11.arr 与 child12.arr), 可参考",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E5%9F%BA%E7%A1%80%E7%AF%87/%E4%BA%8C%E5%88%B7%E9%AB%98%E7%A8%8B.md#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%A8%A1%E5%BC%8F"}),"红皮书里的细节")),(0,i.kt)("li",{parentName:"ul"},"缺点: 只能继承父类函数的方法和属性, 而不能继承原型对象的方法和属性")),(0,i.kt)("h4",null,"基于原型链的继承"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Parent2() {\n  this.parent2 = 'parent2'\n  this.arr = [1, 2, 3]\n}\n\nParent2.prototype.walk = 'I can walk'\n\nfunction Child2() {\n  this.child2 = 'child2'\n}\n\nChild2.prototype = new Parent2()\n\nconst child21 = new Child2()\nconst child22 = new Child2()\n\n// 测试\nchild21.parent2 // parent2\nchild21.walk    // I can walk\n\nchild21.arr.push(4)\nchild21.arr // [1, 2, 3, 4]\nchild22.arr // [1, 2, 3, 4]\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"优点: 继承父类函数的方法和属性同时继承了原型对象的方法和属性"),(0,i.kt)("li",{parentName:"ul"},"缺点: 当在一个子类的实例上修改父类的属性和方法时, 其它的子类也会受到影响(相当于改变了子类原型链上的属性, 可以参考",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E5%9F%BA%E7%A1%80%E7%AF%87/%E4%BA%8C%E5%88%B7%E9%AB%98%E7%A8%8B.md#%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%A8%A1%E5%BC%8F"}),"二刷高程"))),(0,i.kt)("p",null,"------ 补充 ------"),(0,i.kt)("p",null,"补充下 Object.create() 这个 api, 也将它归类到基于原型链的继承。当继承的对象属性没变化时, 可以使用它。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"优点: 可以少写一个构造函数"),(0,i.kt)("li",{parentName:"ul"},"缺点: 同上述基于原型链继承的缺点")),(0,i.kt)("h4",null,"组合继承"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Parent3() {\n  this.parent3 = 'parent3'\n  this.arr = [1, 2, 3]\n}\n\nParent3.prototype.walk = 'I can walk'\n\nfunction Child3() {\n  Parent3.call(this)  // 这里执行第一次父类\n  this.child3 = 'child3'\n}\n\nChild3.prototype = new Parent3() // 这里执行第二次父类, 原型继承发现只要把父子的原型对象绑定起来就好, 可以写成 Child3.prototype = new Parent3()>__proto__ 也正常\nconst child31 = new Child3()\nconst child32 = new Child3()\n\n// 测试\nchild31.parent3 // parent3\nchild31.walk    // I can walk\n\nchild31.arr.push(4)\nchild31.arr // [1, 2, 3, 4]\nchild32.arr // [1, 2, 3]\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"优点: 结合了构造函数继承和原型链继承的优点"),(0,i.kt)("li",{parentName:"ul"},"缺点: 父类方法调用了两次, 而且不能判断实例的构造函数是子类还是父类")),(0,i.kt)("h4",null,"组合继承优化一"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Parent4() {\n  this.parent4 = 'parent4'\n  this.arr = [1, 2, 3]\n}\n\nParent4.prototype.walk = 'I can walk'\n\nfunction Child4() {\n  Parent4.call(this)\n  this.child4 = 'child4'\n}\n\nChild4.prototype = Parent4.prototype\nconst child41 = new Child4()\nconst child42 = new Child4()\n\n// 测试\nchild41.parent4 // parent4\nchild41.walk    // I can walk\n\nchild41.arr.push(4)\nchild41.arr // [1, 2, 3, 4]\nchild42.arr // [1, 2, 3]\n\nchild41.constructor // Parent4\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"优点: 解决了调用两次的问题"),(0,i.kt)("li",{parentName:"ul"},"缺点: 不能判断实例的构造函数是子类还是父类(此时 child41、child42 的构造函数指向 Parent4)")),(0,i.kt)("h4",null,"组合继承优化二"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Parent5() {\n  this.parent5 = 'parent5'\n  this.arr = [1, 2, 3]\n}\n\nParent5.prototype.walk = 'I can walk'\n\nfunction Child5() {\n  Parent5.call(this)\n  this.child5 = 'child5'\n}\n\nChild5.prototype = Object.create(Parent5.prototype) // Object.create() 创建了一个中间对象, 起到隔离子类和父类的作用。\nChild5.prototype.constructor = Child5\nconst child51 = new Child5()\nconst child52 = new Child5()\n\n// 测试\nchild51.parent5 // parent5\nchild51.walk    // I can walk\n\nchild51.arr.push(4)\nchild51.arr // [1, 2, 3, 4]\nchild52.arr // [1, 2, 3]\n\nchild51.constructor // Child5\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Object.create() 的作用: Object.create(Parent5.prototype) 相当于一个空对象 {}, 这个空对象的 ",(0,i.kt)("strong",{parentName:"p"},"proto")," 等于 Parent5.prototype, 所以这时候我们修改 Child5.prototype.constructor 实际上是在空对象上加上 constructor 属性。")),(0,i.kt)("p",null,"优点: 解决了不能判断实例的构造函数是子类还是父类的问题"),(0,i.kt)("h3",null,"揭秘 ES6 继承之 super"),(0,i.kt)("h4",null,"constructor 中的 super"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Parent(props) {\n  this.props = props\n}\n\nclass Child extends Parent {\n  constructor() {\n    super() // 这里\n  }\n}\n\nvar child = new Child({a: 1})\n\nconsole.log(child.props) // undefined\n")),(0,i.kt)("p",null,"为什么这里 child.props 会输出 undefined 呢, 让我们接着看以下两个例子。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Parent(props) {\n  this.props = props\n}\n\nclass Child extends Parent {\n  constructor(props) {\n    super(props)\n  }\n}\n\nvar child = new Child({a: 1})\n\nconsole.log(child.props) // {a: 1}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Parent(props) {\n  this.props = props\n}\n\nclass Child extends Parent {\n\n}\n\nvar child = new Child({a: 1})\n\nconsole.log(child.props) // {a: 1}\n")),(0,i.kt)("p",null,"可以看到第二种情况和第三种情况是相等的。继承中, 当子类没有写 constructor 时, 它会自动加上如下代码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"constructor(props) {\n  super(props)\n}\n")),(0,i.kt)("p",null,"简单作个结论: 当 ES6 的类函数中有 constructor 和 super 时, 它们后面必须得跟个参数 props(名字随意), 否则原型链上的对象无法获取到相应属性。"),(0,i.kt)("p",null,"将之翻译成 ES5, 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Parent(props) {\n  this.props = props\n}\n\nfunction Child(props) {\n  Parent.call(this, props) // 这里等价于 ES6 中 super(props)\n}\n\nChild.prototype = new Parent()\nvar child = new Child({a: 1})\n")),(0,i.kt)("h4",null,"作为对象调用的 super"),(0,i.kt)("p",null,"在下面的案例中, super 作为对象调用, 那么它指向什么呢？"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Parent {\n  parentFn() {\n    console.log('I am parentFn')\n  }\n}\n\nclass Child extends Parent {\n  childFn() {\n    console.log(super.constructor)\n    super.parentFn()\n  }\n}\n\nvar child = new Child()\nchild.childFn()\n\n// Class Parent { ... }\n// I am parentFn\n")),(0,i.kt)("p",null,"打印结果已经作出了回答。super 在作为对象调用时, 它指向了父类对象的实例。"))}c.isMDXComponent=!0},59099:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"随着 ES6 和 TypeScript 中类的引入, 在某些场景需要在不改变原有类和类属性的基础上扩展些功能, 这也是装饰器出现的原因。"),(0,i.kt)("h3",null,"装饰器简介"),(0,i.kt)("p",null,"作为一种可以动态增删功能模块的模式(比如 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/issues/15"}),"redux 的中间件机制"),"), 装饰器同样具有很强的动态灵活性, 只需在类或类属性之前加上 ",(0,i.kt)("inlineCode",{parentName:"p"},"@方法名")," 就完成了相应的类或类方法功能的变化。"),(0,i.kt)("p",null,"不过装饰器模式仍处于",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tc39/proposal-decorators"}),"第 2 阶段提案中"),", 使用它之前需要使用 babel 模块 ",(0,i.kt)("inlineCode",{parentName:"p"},"transform-decorators-legacy")," 编译成 ES5 或 ES6。"),(0,i.kt)("p",null,"在 TypeScript 的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/Microsoft/TypeScript/blob/c48662c891ce810f5627a0f6a8594049cccceeb5/lib/lib.es5.d.ts#L1291"}),"lib.es5.d.ts")," 中, 定义了 4 种不同装饰器的接口:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"declare type ClassDecorator = <TFunction extends Function>(target: TFunction) => TFunction | void;\ndeclare type PropertyDecorator = (target: Object, propertyKey: string | symbol) => void;\ndeclare type MethodDecorator = <T>(target: Object, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor<T>) => TypedPropertyDescriptor<T> | void;\ndeclare type ParameterDecorator = (target: Object, propertyKey: string | symbol, parameterIndex: number) => void;\n")),(0,i.kt)("p",null,"下面对装饰类以及装饰类方法进行解析。"),(0,i.kt)("h3",null,"作用于类的装饰器"),(0,i.kt)("p",null,"当装饰的对象是类时, 我们操作的就是这个",(0,i.kt)("inlineCode",{parentName:"p"},"类本身"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"@log\nclass MyClass { }\n\nfunction log(target) { // 这个 target 在这里就是 MyClass 这个类\n   target.prototype.logger = () => `${target.name} 被调用`\n}\n\nconst test = new MyClass()\ntest.logger() // MyClass 被调用\n")),(0,i.kt)("p",null,"由于装饰器是表达式, 我们也可以在装饰器后面再添加提个参数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"@log('hello')\nclass MyClass { }\n\nfunction log(text) {\n  return function(target) {\n    target.prototype.logger = () => `${text}, ${target.name} 被调用`\n  }\n}\n\nconst test = new MyClass()\ntest.logger() // hello, MyClass 被调用\n")),(0,i.kt)("p",null,"在使用 redux 中, 我们最常使用 react-redux 的写法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"@connect(mapStateToProps, mapDispatchToProps)\nexport default class MyComponent extends React.Component {}\n")),(0,i.kt)("p",null,"经过上述分析, 我们知道了上述写法等价于下面这种写法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class MyComponent extends React.Component {}\nexport default connect(mapStateToProps, mapDispatchToProps)(MyComponent)\n")),(0,i.kt)("h3",null,"作用于类方法的装饰器"),(0,i.kt)("p",null,"与装饰类不同, 对类方法的装饰本质是操作其描述符。可以把此时的装饰器理解成是 ",(0,i.kt)("inlineCode",{parentName:"p"},"Object.defineProperty(obj, prop, descriptor)")," 的语法糖, 看如下代码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class C {\n  @readonly(false)\n  method() { console.log('cat') }\n}\n\nfunction readonly(value) {\n  return function (target, key, descriptor) { // 此处 target 为 C.prototype; key 为 method;\n    // 原 descriptor 为: { value: f, enumarable: false, writable: true, configurable: true }\n    descriptor.writable = value\n    return descriptor\n  }\n}\n\nconst c = new C()\nc.method = () => console.log('dog')\n\nc.method() // cat\n")),(0,i.kt)("p",null,"可以看到装饰器函数接收的三个参数与 Object.defineProperty 是完全一样的, 具体实现可以看 babel 转化后的代码, 主要实现如下所示:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var C = (function() {\n  class C {\n    method() { console.log('cat') }\n  }\n\n  var temp\n  temp = readonly(false)(C.prototype, 'method',\n    temp = Object.getOwnPropertyDescriptor(C.prototype, 'method')) || temp // 通过 Object.getOwnPropertyDescriptor 获取到描述符传入到装饰器函数中\n\n  if (temp) Object.defineProperty(C.prototype, 'method', temp)\n  return C\n})()\n")),(0,i.kt)("p",null,"再将再来看看如果有多个装饰器作用于同一个方法上呢？"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class C {\n  @readonly(false)\n  @log\n  method() { }\n}\n")),(0,i.kt)("p",null,"经 babel 转化后的代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"desc = [readonly(false), log]\n    .slice()\n    .reverse()\n    .reduce(function(desc, decorator) {\n      return decorator(target, property, desc) || desc;\n    }, desc);\n")),(0,i.kt)("p",null,"可以清晰地看出, 经过 reverse 倒序后, 装饰器方法会至里向外执行。"),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/wycats/javascript-decorators"}),"javascript-decorators"),"\n",(0,i.kt)("a",u({parentName:"p"},{href:"https://aotu.io/notes/2016/10/24/decorator/index.html"}),"Javascript 中的装饰器"),"\n",(0,i.kt)("a",u({parentName:"p"},{href:"https://juejin.im/post/59f1c484f265da431c6f8940"}),"JS 装饰器（Decorator）场景实战"),"\n",(0,i.kt)("a",u({parentName:"p"},{href:"http://es6.ruanyifeng.com/#docs/decorator#%E6%96%B9%E6%B3%95%E7%9A%84%E4%BF%AE%E9%A5%B0"}),"修饰器"),"\n",(0,i.kt)("a",u({parentName:"p"},{href:"http://babeljs.io"}),"Babel")))}c.isMDXComponent=!0},12945:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"for 循环/while 循环"),(0,i.kt)("p",null,"JavaScript 提供多种遍历语法。最原始的写法就是 for 循环。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let arr = [1,2,3,4,5];\n\nfor (var index = 0; index < arr.length; index++) {\n  console.log(myArray[index]); // 1 2 3 4 5\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"缺点：这种写法相对麻烦")),(0,i.kt)("h3",null,"forEach"),(0,i.kt)("p",null,"数组提供内置的 forEach 方法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let arr = [1,2,3,4,5];\n\narr.forEach((element,index) => {\n  console.log(element); // 1 2 3 4 5\n})\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"缺点: 这种写法的问题在于, 无法中途跳出 forEach 循环, break 命令或 return 命令都不能生效。")),(0,i.kt)("h3",null,"for...in"),(0,i.kt)("p",null,"for……in 用于遍历对象所有的",(0,i.kt)("inlineCode",{parentName:"p"},"可枚举属性"),", 功能类似于 Object.keys()。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let obj = {\n  name: 'cloud',\n  phone: '157xxxx2065'\n}\n\nfor (let prop in obj) {\n  console.log(prop); // name phone\n}\n")),(0,i.kt)("p",null,"可能有朋友会问, 不可枚举的对象有哪些呢? 比如 constructor, 数组的 length 就属于不可枚举属性。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let arr = [10, 20, 30, 40, 50]\n\nfor (let prop in arr) {\n  console.log(prop) // '0' '1' '2' '3' '4'\n}\n")),(0,i.kt)("p",null,"缺点："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"数组的键名是数字, 但是 for...in 循环是以字符串作为键名 “0”、“1”、“2” 等等。"),(0,i.kt)("li",{parentName:"ul"},"for...in 循环主要是为遍历对象而设计的, 不适用于遍历数组")),(0,i.kt)("h3",null,"for...of"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"for……of")," 是 ES6 新增的遍历方式, 它提供了统一的遍历机制。所有实现了 ","[Symbol.iterator]"," 接口的对象都可以被遍历。for...of 循环可以使用的范围包括数组、Set 和 Map 结构、某些类似数组的对象 (比如 arguments 对象、DOM NodeList 对象)、Generator 对象, 以及字符串。"),(0,i.kt)("p",null,"优点："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"有着同 for...in 一样的简洁语法, 但是没有 for...in 那些缺点;"),(0,i.kt)("li",{parentName:"ul"},"不同用于 forEach 方法, 它可以与 break、continue 和 return 配合使用"),(0,i.kt)("li",{parentName:"ul"},"提供了遍历所有数据结构的统一操作接口")),(0,i.kt)("p",null,"下面是一个使用 break 语句, 跳出 for...of 循环的例子。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"for (var n of fibonacci) {\n  if (n > 1000)\n    break\n  console.log(n)\n}\n")),(0,i.kt)("p",null,"上面的例子, 会输出斐波纳契数列小于等于 1000 的项。如果当前项大于 1000, 就会使用 break 语句跳出 for...of 循环。"),(0,i.kt)("h4",null,"for...of 获取索引"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"entries() 返回一个遍历器对象, 用来遍历 ",(0,i.kt)("inlineCode",{parentName:"li"},"[键名, 键值]")," 组成的数组。对于数组, 键名就是索引值；对于 Set, 键名与键值相同。Map 结构的 Iterator 接口, 默认就是调用 entries 方法。"),(0,i.kt)("li",{parentName:"ul"},"keys() 返回一个遍历器对象, 用来遍历所有的键名。"),(0,i.kt)("li",{parentName:"ul"},"values() 返回一个遍历器对象, 用来遍历所有的键值。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// demo\nlet arr = ['a', 'b', 'c'];\nfor (let pair of arr.entries()) {\n  console.log(pair);\n}\n// [0, 'a']\n// [1, 'b']\n// [2, 'c']\n")),(0,i.kt)("h4",null,"类似数组的对象"),(0,i.kt)("p",null,"类似数组的对象包括好几类。下面是 for...of 循环用于字符串、DOM NodeList 对象、arguments 对象的例子。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 字符串\nlet str = \"hello\";\n\nfor (let s of str) {\n  console.log(s); // h e l l o\n}\n\n// DOM NodeList对象\nlet paras = document.querySelectorAll(\"p\");\n\nfor (let p of paras) {\n  p.classList.add(\"test\");\n}\n\n// arguments对象\nfunction printArgs() {\n  for (let x of arguments) {\n    console.log(x);\n  }\n}\nprintArgs('a', 'b');\n// 'a'\n// 'b'\n")),(0,i.kt)("p",null,"并不是所有类似数组的对象都具有 Iterator 接口, 一个简便的解决方法, 就是使用 Array.from 方法将其转为数组。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let arrayLike = { length: 2, 0: 'a', 1: 'b' };\n\n// 报错\nfor (let x of arrayLike) {\n  console.log(x);\n}\n\n// 正确\nfor (let x of Array.from(arrayLike)) {\n  console.log(x);  // 'a' // 'b'\n}\n")),(0,i.kt)("h4",null,"普通的对象"),(0,i.kt)("p",null,"对于普通的对象, for...of 结构不能直接使用, 会报错, 必须部署了 Iterator 接口后才能使用。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'let es6 = {\n  edition: 6,\n  committee: "TC39",\n  standard: "ECMA-262"\n};\n\nfor (let e in es6) {\n  console.log(e);\n}\n// edition\n// committee\n// standard\n\nfor (let e of es6) {\n  console.log(e);\n}\n// TypeError: es6 is not iterable\n')),(0,i.kt)("p",null,"解决方法是, 使用 Object.keys 方法将对象的键名生成一个数组, 然后遍历这个数组。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"for (var key of Object.keys(someObject)) {\n  console.log(key + ': ' + someObject[key]);\n}\n")))}c.isMDXComponent=!0},38232:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Service"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"laaS(Infrastructure), 基础设施即服务;"),(0,i.kt)("li",{parentName:"ul"},"PaaS(Platform), 平台即服务;"),(0,i.kt)("li",{parentName:"ul"},"SaaS(Software), 软件即服务;")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/af4d1f46f7fefe989c798a9e4ec55fa6.jpg",alt:null}))))}c.isMDXComponent=!0},19389:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"vim 配置"),(0,i.kt)("h4",null,"配置"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"步骤一. cp /usr/share/vim/vimrc ~/.vimrc"),(0,i.kt)("li",{parentName:"ul"},"步骤二. vi ~/.vimrc")),(0,i.kt)("h4",null,"可选配置"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"set nocompatible               去掉有关 vi 一致性模式, 避免以前版本的bug和局限\n\nset nu!                        显示行号\n\nset guifont=Luxi/ Mono/ 9      设置字体, 字体名称和字号\n\nfiletype on                    检测文件的类型\n\nset history=1000               记录历史的行数\n\nset background=dark            背景使用黑色\n\nsyntax on                      语法高亮度显示\n\nset autoindent                 vim 使用自动对齐, 也就是把当前行的对齐格式应用到下一行(自动缩进）\n\nset cindent                   （cindent 是特别针对 C 语言语法自动缩进）\n\nset smartindent                依据上面的对齐格式, 智能的选择对齐方式, 对于类似 C 语言编写上有用\n\nset tabstop=4                  设置 tab 键为 4 个空格\n\nset shiftwidth =4              设置当行之间交错时使用 4 个空格\n\nset ai!                        设置自动缩进\n\nset showmatch                  设置匹配模式, 类似当输入一个左括号时会匹配相应的右括号\n\nset guioptions-=T              去除 vim 的 GUI 版本中得 toolbar\n\nset vb t_vb=                   当 vim 进行编辑时, 如果命令错误, 会发出警报, 该设置去掉警报\n\nset ruler                      在编辑过程中, 在右下角显示光标位置的状态行\n\nset nohls                      默认情况下, 寻找匹配是高亮度显示, 该设置关闭高亮显示\n\nset incsearch                  在程序中查询一单词, 自动匹配单词的位置；如查询 desk 单词, 当输到 /d 时, 会自动找到第一个 d 开头的单词, 当输入到 /de 时, 会自动找到第一个以 de 开头的单词, 以此类推, 进行查找; 当找到要匹配的单词时, 别忘记回车\n\nset backspace=2                设置退格键可用\n")),(0,i.kt)("h3",null,"vim 快捷键"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"dd                             快速删除当前行\n")))}c.isMDXComponent=!0},19498:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"ways"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"use ",(0,i.kt)("a",u({parentName:"li"},{href:"https://astexplorer.net/"}),"AST Explorer")),(0,i.kt)("li",{parentName:"ol"},"pick babel-eslint and eslint v4 in Transform.")),(0,i.kt)("h3",null,"links"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://dev.to/spukas/how-to-write-your-first-eslint-plugin-145"}),"How To Write Your First ESLint Plugin"))))}c.isMDXComponent=!0},98723:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"Markdown 语法"),(0,i.kt)("h3",null,"脚注"),(0,i.kt)("p",null,"可以在内容区添加脚注，通过括号语法。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-md"}),"Here is a simple footnote[^1]\n[^1]: My reference.\n")))}c.isMDXComponent=!0},62914:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Shell 脚本"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"用途:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"alfred workflow 快速脚本"))),(0,i.kt)("li",{parentName:"ul"},"有需要可以参考",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.runoob.com/linux/linux-shell.html"}),"Shell 教程"))))}c.isMDXComponent=!0},44965:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"命令式编程和声明式编程"),(0,i.kt)("p",null,"拿泡茶这个事例进行区分命令式编程和声明式编程"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"命令式编程")),(0,i.kt)("p",null,"1.烧开水(为第一人称)\n2.拿个茶杯\n3.放茶叶\n4.冲水"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"声明式编程")),(0,i.kt)("p",null,"1.给我泡杯茶(为第二人称)"),(0,i.kt)("p",null,"举个 demo"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 命令式编程\nconst convert = function(arr) {\n  const result = []\n  for (let i = 0; i < arr.length; i++) {\n    result[i] = arr[i].toLowerCase()\n  }\n  return result\n}\n\n// 声明式编程\nconst convert = function(arr) {\n  return arr.map(r => r.toLowerCase())\n}\n")),(0,i.kt)("h3",null,"什么是函数式编程"),(0,i.kt)("p",null,"函数式编程是声明式编程的范式。在函数式编程中数据在由纯函数组成的管道中传递。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"函数式编程可以用简单如",(0,i.kt)("inlineCode",{parentName:"p"},"交换律、结合律、分配律"),"的数学之法来帮我们简化代码的实现。")),(0,i.kt)("p",null,"它具有如下一些特性:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"纯粹性: 纯函数不改变除当前作用域以外的值;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 反面示例\nlet a = 0\nconst add = (b) => a = a + b // 两次 add(1) 结果不一致\n\n// 正确示例\nconst add = (a, b) => a + b\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"数据不可变性: Immutable")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 反面示例\nconst arr = [1, 2]\nconst arrAdd = (value) => {\n  arr.push(value)\n  return arr\n}\n\narrAdd(3) // [1, 2, 3]\narrAdd(3) // [1, 2, 3, 3]\n\n// 正面示例\nconst arr = [1, 2]\nconst arrAdd = (value) => {\n  return arr.concat(value)\n}\n\narrAdd(3) // [1, 2, 3]\narrAdd(3) // [1, 2, 3]\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在后记 1 中对数组字符串方法是否对原值有影响作了整理")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"函数柯里化: 将多个入参的函数转化为一个入参的函数;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const add = a => b => c => a + b + c\nadd(1)(2)(3)\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"偏函数: 将多个入参的函数转化成两部分;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const add = a => (b, c) => a + b + c\nadd(1)(2, 3)\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"可组合: 函数之间能组合使用")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const add = (x) => x + x\nconst mult = (x) => x * x\n\nconst addAndMult = (x) => add(mult(x))\n")),(0,i.kt)("h3",null,"柯里化(curry)"),(0,i.kt)("p",null,"如下是一个加法函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var add = (a, b, c) => a + b + c\n\nadd(1, 2, 3) // 6\n")),(0,i.kt)("p",null,"假如有这样一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"curry")," 函数, 用其包装 ",(0,i.kt)("inlineCode",{parentName:"p"},"add")," 函数后返回一个新的函数 ",(0,i.kt)("inlineCode",{parentName:"p"},"curryAdd"),", 我们可以将参数 ",(0,i.kt)("inlineCode",{parentName:"p"},"a、b")," 进行分开传递进行调用。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var curryAdd = curry(add)\n\n// 以下输出结果都相同\ncurryAdd(1, 2, 3) // 6\ncurryAdd(1, 2)(3) // 6\ncurryAdd(1)(2)(3) // 6\ncurryAdd(1)(2, 3) // 6\n")),(0,i.kt)("h4",null,"动手实现一个 curry 函数"),(0,i.kt)("p",null,"核心思路: 若传进去的参数个数未达到 ",(0,i.kt)("inlineCode",{parentName:"p"},"curryAdd")," 的个数，则将参数缓存在闭包变量 lists 中:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function curry(fn, ...args) {\n  const length = fn.length\n  let lists = args || []\n\n  let listLen\n  return function (..._args) {\n    lists = [...lists, ..._args]\n    listLen = lists.length\n\n    if (listLen < length) {\n      const that = lists\n      lists = []\n      return curry(fn, ...that)\n    } else if (listLen === length) {\n      const that = lists\n      lists = []\n      return fn.apply(this, that)\n    }\n  }\n}\n")),(0,i.kt)("h3",null,"代码组合(compose)"),(0,i.kt)("p",null,"现在有 ",(0,i.kt)("inlineCode",{parentName:"p"},"toUpperCase"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"reverse"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"head")," 三个函数, 分别如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var toUpperCase = (str) => str.toUpperCase()\nvar reverse = (arr) => arr.reverse()\nvar head = (arr) => arr[0]\n")),(0,i.kt)("p",null,"接着使用它们实现将数组末位元素大写化输出, 可以这样做:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var reverseHeadUpperCase = (arr) => toUpperCase(head(reverse(arr)))\n\nreverseHeadUpperCase(['apple', 'banana', 'peach']) // PEACH\n")),(0,i.kt)("p",null,"此时在构建 ",(0,i.kt)("inlineCode",{parentName:"p"},"reverseHeadUpperCase")," 函数的时候, 必须手动声明传入参数 arr, 是否能提供一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"compose")," 函数让使用者更加友好的使用呢? 类似如下形式:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var reverseHeadUpperCase = compose(toUpperCase, head, reverse)\n\nreverseHeadUpperCase(['apple', 'banana', 'peach']) // PEACH\n")),(0,i.kt)("p",null,"此外 ",(0,i.kt)("inlineCode",{parentName:"p"},"compose")," 函数符合",(0,i.kt)("inlineCode",{parentName:"p"},"结合律"),", 我们可以这样子使用:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"compose(compose(toUpperCase, head), reverse)\ncompose(toUpperCase, compose(head, reverse))\n")),(0,i.kt)("p",null,"以上两种写法与 ",(0,i.kt)("inlineCode",{parentName:"p"},"compose(toUpperCase, head, reverse)")," 的效果完全相同, 都是依次从右到左执行传参中的函数。"),(0,i.kt)("p",null,"此外 ",(0,i.kt)("inlineCode",{parentName:"p"},"compose")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"map")," 一起使用时也有相关的结合律, 以下两种写法效果相等"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"compose(map(f), map(g))\nmap(compose(f, g))\n")),(0,i.kt)("h4",null,"动手实现一个 compose 函数"),(0,i.kt)("p",null,"代码精华集中在一行之内, 其为众多开源库(比如 Redux) 所采用。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var compose = (...args) => (initValue) => args.reduceRight((a, c) => c(a), initValue)\n")),(0,i.kt)("h3",null,"范畴论"),(0,i.kt)("p",null,"范畴论是数学中的一个分支。可以将范畴理解为一个容器, 把原来对值的操作，现转为对容器的操作。如下图:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c65fa1b63dbe9fa0a0771e7e561dc85b.jpg-200",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"学习函数式编程就是学习各种函子的过程。")),(0,i.kt)("p",null,"函数式编程中, ",(0,i.kt)("inlineCode",{parentName:"p"},"函子(Functor)")," 是实现了 ",(0,i.kt)("inlineCode",{parentName:"p"},"map")," 函数的容器, 下文中将函子视为范畴，模型可表示如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Functor {\n  constructor(value) {\n    this.value = value\n  }\n\n  map(fn) {\n    return new Functor(fn(this.value))\n  }\n}\n")),(0,i.kt)("p",null,"但是在函数式编程中, 要避免使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"new")," 这种面向对象的编程方式, 取而代之对外暴露了一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"of")," 的接口, 也称为 ",(0,i.kt)("inlineCode",{parentName:"p"},"pointed functor"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Functor.of = value => new Functor(value)\n")),(0,i.kt)("h4",null,"Maybe 函子"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Maybe 函子"),"是为了解决 ",(0,i.kt)("inlineCode",{parentName:"p"},"this.value")," 为 null 的情形, 用法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Maybe.of(null).map(r => r.toUpperCase()) // null\nMaybe.of('m').map(r => r.toUpperCase())  // Maybe {value: \"M\"}\n")),(0,i.kt)("p",null,"实现代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Maybe {\n  constructor(value) {\n    this.value = value\n  }\n\n  map(fn) {\n    return this.value ? new Maybe(fn(this.value)) : null\n  }\n}\n\nMaybe.of = value => new Maybe(value)\n")),(0,i.kt)("h4",null,"Either 函子"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Either 函子")," 是为了对应 ",(0,i.kt)("inlineCode",{parentName:"p"},"if...else...")," 的语法, 即",(0,i.kt)("inlineCode",{parentName:"p"},"非左即右"),"。因此可以将之拆分为 ",(0,i.kt)("inlineCode",{parentName:"p"},"Left")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"Right")," 两个函子, 它们的用法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var left = Left.of(1).map(r => r + 1)  // Left {value: 1}\nvar right = Right.of(1).map(r => r + 1) // Right {value: 2}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Left 函子"),"实现代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Left {\n  constructor(value) {\n    this.value = value\n  }\n\n  map(fn) {\n    return this\n  }\n}\n\nLeft.of = value => new Left(value)\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Right 函子"),"实现代码如下(其实就是上面的 ",(0,i.kt)("inlineCode",{parentName:"p"},"Functor"),"):"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Right {\n  constructor(value) {\n    this.value = value\n  }\n\n  map(fn) {\n    return new Right(fn(this.value))\n  }\n}\n\nRight.of = value => new Right(value)\n")),(0,i.kt)("p",null,"具体 ",(0,i.kt)("inlineCode",{parentName:"p"},"Either")," 函数只是对调用 ",(0,i.kt)("inlineCode",{parentName:"p"},"Left 函子")," 或 ",(0,i.kt)("inlineCode",{parentName:"p"},"Right 函子")," 作一层筛选, 其接收 ",(0,i.kt)("inlineCode",{parentName:"p"},"f"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"g")," 两个函数以及一个函子(",(0,i.kt)("inlineCode",{parentName:"p"},"Left or Right"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var Either = function(f, g, functor) {\n  switch(functor.constructor.name) {\n    case 'Left':\n      return f(functor.value)\n    case 'Right':\n      return g(functor.value)\n    default:\n      return f(functor.value)\n  }\n}\n")),(0,i.kt)("p",null,"使用 demo:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Either((v) => console.log('left', v), (v) => console.log('def', v), left)   // left 1\nEither((v) => console.log('def', v), (v) => console.log('rigth', v), rigth) // rigth 2\n")),(0,i.kt)("h4",null,"Monad 函子"),(0,i.kt)("p",null,"函子会发生嵌套, 比如下面这样:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Functor.of(Functor.of(1)) // Functor { value: Functor { value: 1 } }\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Monad 函子")," 对外暴露了 ",(0,i.kt)("inlineCode",{parentName:"p"},"join")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"flatmap")," 接口, 调用者从而可以扁平化嵌套的函子。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Monad {\n  constructor(value) {\n    this.value = value\n  }\n\n  map(fn) {\n    return new Monad(fn(this.value))\n  }\n\n  join() {\n    return this.value\n  }\n\n  flatmap(fn) {\n    return this.map(fn).join()\n  }\n}\n\nMonad.of = value => new Monad(value)\n")),(0,i.kt)("p",null,"使用方法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// join\nMonad.of(Monad.of(1).join()) // Monad { value: 1 }\nMonad.of(Monad.of(1)).join() // Monad { value: 1 }\n\n// flatmap\nMonad.of(1).flatmap(r => r + 1)  // 2\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Monad 函子可以运用在 I/O 这种不纯的操作上将之变为纯函数的操作，目前比较懵懂，日后补充。")),(0,i.kt)("h3",null,"后记 1: 数组字符串方法小结(是否对原值有影响)"),(0,i.kt)("h4",null,"不会对原数组有影响的方法"),(0,i.kt)("h5",null,"slice"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var test = [1, 2, 3]\nvar result = test.slice(0, 1)\n\nconsole.log(test)   // [1, 2, 3]\nconsole.log(result) // [1]\n")),(0,i.kt)("h5",null,"concat"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var test = [1, 2, 3]\nvar result = test.concat(4)\n\nconsole.log(test)   // [1, 2, 3]\nconsole.log(result) // [1, 2, 3, 4]\n")),(0,i.kt)("h4",null,"对原数组有影响的方法"),(0,i.kt)("h5",null,"splice(这个需要特别记一下)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var test = [1, 2, 3]\nvar result = test.splice(0, 1)\n\nconsole.log(test)   // [2, 3]\nconsole.log(result) // [1]\n")),(0,i.kt)("h5",null,"sort"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var arr = [2, 1, 3, 4]\narr.sort((r1, r2) => (r1 - r2))\n\nconsole.log(arr) // [1, 2, 3, 4]\n")),(0,i.kt)("h5",null,"reverse"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var test = [1, 2, 3]\nvar result = test.reverse()\n\nconsole.log(test)   // [3, 2, 1]\nconsole.log(result) // [3, 2, 1]\n")),(0,i.kt)("h5",null,"push/pop/unshift/shift"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var test = [1, 2, 3]\nvar result = test.push(4)\n\nconsole.log(test)   // [1, 2, 3, 4]\nconsole.log(result) // 4\n")),(0,i.kt)("h4",null,"不会对原字符串造成影响的方法"),(0,i.kt)("h5",null,"substr/substring/slice"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// substr\nvar test = 'abc'\nvar result = test.substr(0, 1)\n\nconsole.log(test)   // 'abc'\nconsole.log(result) // a\n\n// substring\nvar test = 'abc'\nvar result = test.substring(0, 1)\n\nconsole.log(test)   // 'abc'\nconsole.log(result) // a\n\n// slice\nvar test = 'abc'\nvar result = test.slice(0, 1)\n\nconsole.log(test)   // 'abc'\nconsole.log(result) // a\n")),(0,i.kt)("h5",null,"replace"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var test = 'abc'\nvar result = test.replace('c', 'd')\n\nconsole.log(test)   // 'abc'\nconsole.log(result) // 'abd'\n")),(0,i.kt)("h3",null,"参考"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://mostly-adequate.gitbooks.io/mostly-adequate-guide"}),"mostly-adequate-guide")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://llh911001.gitbooks.io/mostly-adequate-guide-chinese"}),"JavaScript 函数式编程指南")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/mqyqingfeng/Blog/issues/42"}),"JavaScript 专题之函数柯里化")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://www.ruanyifeng.com/blog/2017/02/fp-tutorial.html"}),"函数式编程入门教程"))))}c.isMDXComponent=!0},52142:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"IoC 模式"),(0,i.kt)("p",null,"IoC(Inversion of Control) 译为控制反转, 它包括依赖注入(Dependency Injection) 和依赖查询(Dependency Lookup)。是面向对象编程的一种设计模式。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"控制反转指的是将实例化的过程放到了类外部的容器中进行, 在各个类里通过引用相应的类名（依赖查询）调用所需要的类。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E7%AF%87/%E8%A7%A3%E8%AF%BBIoC%E6%A1%86%E6%9E%B6InversifyJS.md"}),"解读 IoC 框架 InversifyJS")," 这篇文章中更加深入地探讨了 IoC 模式在实际项目中的运用。")))}c.isMDXComponent=!0},95166:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"中介者模式"),(0,i.kt)("p",null,"中介者模式: 对象和对象之间借助第三方中介者进行通信。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/ae0958f85990978c48b3a6aa2ca76ea1.jpg-400",alt:null}))),(0,i.kt)("h3",null,"场景 demo"),(0,i.kt)("p",null,"一场测试结束后, 公布结果: 告知解答出题目的人挑战成功, 否则挑战失败。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const player = function(name) {\n  this.name = name\n  playerMiddle.add(name)\n}\n\nplayer.prototype.win = function() {\n  playerMiddle.win(this.name)\n}\n\nplayer.prototype.lose = function() {\n  playerMiddle.lose(this.name)\n}\n\nconst playerMiddle = (function() { // 将就用下这个 demo, 这个函数当成中介者\n  const players = []\n  const winArr = []\n  const loseArr = []\n  return {\n    add: function(name) {\n      players.push(name)\n    },\n    win: function(name) {\n      winArr.push(name)\n      if (winArr.length + loseArr.length === players.length) {\n        this.show()\n      }\n    },\n    lose: function(name) {\n      loseArr.push(name)\n      if (winArr.length + loseArr.length === players.length) {\n        this.show()\n      }\n    },\n    show: function() {\n      for (let winner of winArr) {\n        console.log(winner + '挑战成功;')\n      }\n      for (let loser of loseArr) {\n        console.log(loser + '挑战失败;')\n      }\n    },\n  }\n}())\n\nconst a = new player('A 选手')\nconst b = new player('B 选手')\nconst c = new player('C 选手')\n\na.win()\nb.win()\nc.lose()\n\n// A 选手挑战成功;\n// B 选手挑战成功;\n// C 选手挑战失败;\n")),(0,i.kt)("p",null,"在这段代码中 A、B、C 之间没有直接发生关系, 而是通过另外的 playerMiddle 对象建立链接, 姑且将之当成是中介者模式了。"))}c.isMDXComponent=!0},90716:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"享元模式"),(0,i.kt)("p",null,"享元模式是一种优化程序性能的模式, 本质为",(0,i.kt)("inlineCode",{parentName:"p"},"减少对象创建的个数"),"。"),(0,i.kt)("p",null,"以下情况可以使用享元模式:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"有大量相似的对象, 占用了大量内存"),(0,i.kt)("li",{parentName:"ol"},"对象中大部分状态可以抽离为外部状态")),(0,i.kt)("h3",null,"demo"),(0,i.kt)("p",null,"某商家有 50 种男款内衣和 50 种款女款内衣, 要展示它们"),(0,i.kt)("p",null,"方案一: 造 50 个塑料男模和 50 个塑料女模, 让他们穿上展示, 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const Model = function(gender, underwear) {\n  this.gender = gender\n  this.underwear = underwear\n}\n\nModel.prototype.takephoto = function() {\n  console.log(`${this.gender}穿着${this.underwear}`)\n}\n\nfor (let i = 1; i < 51; i++) {\n  const maleModel = new Model('male', `第${i}款衣服`)\n  maleModel.takephoto()\n}\n\nfor (let i = 1; i < 51; i++) {\n  const female = new Model('female', `第${i}款衣服`)\n  female.takephoto()\n}\n")),(0,i.kt)("p",null,"方案二: 造 1 个塑料男模特 1 个塑料女模特, 分别试穿 50 款内衣"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const Model = function(gender) {\n  this.gender = gender\n}\n\nModel.prototype.takephoto = function() {\n  console.log(`${this.sex}穿着${this.underwear}`)\n}\n\nconst maleModel = new Model('male')\nconst femaleModel = new Model('female')\n\nfor (let i = 1; i < 51; i++) {\n  maleModel.underwear = `第${i}款衣服`\n  maleModel.takephoto()\n}\n\nfor (let i = 1; i < 51; i++) {\n  femaleModel.underwear = `第${i}款衣服`\n  femaleModel.takephoto()\n}\n")),(0,i.kt)("p",null,"对比发现: 方案一创建了 100 个对象, 方案二只创建了 2 个对象, 在该 demo 中, gender(性别) 是内部对象, underwear(穿着) 是外部对象。"),(0,i.kt)("p",null,"当然在方案二的 demo 中, 还可以进一步改善:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"一开始就通过构造函数显示地创建实例, 可用工场模式将其升级成可控生成"),(0,i.kt)("li",{parentName:"ol"},"在实例上手动添加 underwear 不是很优雅, 可以在外部单独在写个 manager 函数")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const Model = function(gender) {\n  this.gender = gender\n}\n\nModel.prototype.takephoto = function() {\n  console.log(`${this.gender}穿着${this.underwear}`)\n}\n\nconst modelFactory = (function() { // 优化第一点\n  const modelGender = {}\n  return {\n    createModel: function(gender) {\n      if (modelGender[gender]) {\n        return modelGender[gender]\n      }\n      return modelGender[gender] = new Model(gender)\n    }\n  }\n}())\n\nconst modelManager = (function() {\n  const modelObj = {}\n  return {\n    add: function(gender, i) {\n      modelObj[i] = {\n        underwear: `第${i}款衣服`\n      }\n      return modelFactory.createModel(gender)\n    },\n    copy: function(model, i) { // 优化第二点\n      model.underwear = modelObj[i].underwear\n    }\n  }\n}())\n\nfor (let i = 1; i < 51; i++) {\n  const maleModel = modelManager.add('male', i)\n  modelManager.copy(maleModel, i)\n  maleModel.takephoto()\n}\n\nfor (let i = 1; i < 51; i++) {\n  const femaleModel = modelManager.add('female', i)\n  modelManager.copy(femaleModel, i)\n  femaleModel.takephoto()\n}\n")))}c.isMDXComponent=!0},11067:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"代理模式"),(0,i.kt)("p",null,"情景: 小明追女生 A"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"非代理模式: 小明 =花=> 女生 A"),(0,i.kt)("li",{parentName:"ul"},"代理模式: 小明 =花=> 让女生 A 的好友 B 帮忙 =花=> 女生 A")),(0,i.kt)("h3",null,"代理模式的特点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"代理对象和本体对象具有一致的接口, 对使用者友好")),(0,i.kt)("p",null,"代理模式的种类有很多, 在 JS 中最常用的为虚拟代理和缓存代理。"),(0,i.kt)("h4",null,"虚拟代理实现图片预加载"),(0,i.kt)("p",null,"下面这段代码运用代理模式来实现图片预加载, 可以看到通过代理模式巧妙地将创建图片与预加载逻辑分离, 并且在未来如果不需要预加载, 只要改成请求本体代替请求代理对象就行。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const myImage = (function() {\n  const imgNode = document.createElement('img')\n  document.body.appendChild(imgNode)\n  return {\n    setSrc: function(src) {\n      imgNode.src = src\n    }\n  }\n})()\n\nconst proxyImage = (function() {\n  const img = new Image()\n  img.onload = function() { // http 图片加载完毕后才会执行\n    myImage.setSrc(this.src)\n  }\n  return {\n    setSrc: function(src) {\n      myImage.setSrc('loading.jpg') // 本地 loading 图片\n      img.src = src\n    }\n  }\n})()\n\nproxyImage.setSrc('http://loaded.jpg')\n")),(0,i.kt)("h4",null,"缓存代理实现乘积计算"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const mult = function() {\n  let a = 1\n  for (let i = 0, l; l = arguments[i++];) {\n    a = a * l\n  }\n  return a\n}\n\nconst proxyMult = (function() {\n  const cache = {}\n  return function() {\n    const tag = Array.prototype.join.call(arguments, ',')\n    if (cache[tag]) {\n      return cache[tag]\n    }\n    cache[tag] = mult.apply(this, arguments)\n    return cache[tag]\n  }\n})()\n\nproxyMult(1, 2, 3, 4) // 24\n")),(0,i.kt)("h3",null,"小 tip"),(0,i.kt)("p",null,"在开发时候不要先去猜测是否需要使用代理模式, 如果发现直接使用某个对象不方便时, 再来优化不迟。"))}c.isMDXComponent=!0},84659:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"单例模式两个条件"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"确保只有一个实例"),(0,i.kt)("li",{parentName:"ul"},"可以全局访问")),(0,i.kt)("h3",null,"适用"),(0,i.kt)("p",null,"适用于弹框的实现, 全局缓存"),(0,i.kt)("h3",null,"实现单例模式"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const singleton = function(name) {\n  this.name = name\n  this.instance = null\n}\n\nsingleton.prototype.getName = function() {\n  console.log(this.name)\n}\n\nsingleton.getInstance = function(name) {\n  if (!this.instance) { // 关键语句\n    this.instance = new singleton(name)\n  }\n  return this.instance\n}\n\n// test\nconst a = singleton.getInstance('a') // 通过 getInstance 来获取实例\nconst b = singleton.getInstance('b')\nconsole.log(a === b)\n")),(0,i.kt)("h3",null,"JavaScript 中的单例模式"),(0,i.kt)("p",null,"因为 JavaScript 是无类的语言, 而且 JS 中的全局对象符合单例模式两个条件。很多时候我们把全局对象当成单例模式来使用,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var obj = {}\n")),(0,i.kt)("h3",null,"弹框层的实践"),(0,i.kt)("p",null,"实现弹框的一种做法是先创建好弹框, 然后使之隐藏, 这样子的话会浪费部分不必要的 DOM 开销, 我们可以在需要弹框的时候再进行创建, 同时结合单例模式实现只有一个实例, 从而节省部分 DOM 开销。下列为登入框部分代码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const createLoginLayer = function() {\n  const div = document.createElement('div')\n  div.innerHTML = '登入浮框'\n  div.style.display = 'none'\n  document.body.appendChild(div)\n  return div\n}\n")),(0,i.kt)("p",null,"使用单例模式将创建弹框代码解耦, 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const getSingle = function(fn) {\n  let result\n  return function() {\n    return result || (result = fn.apply(this, arguments))\n  }\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const createSingleLoginLayer = getSingle(createLoginLayer)\n\ndocument.getElementById('loginBtn').onclick = function() {\n  createSingleLoginLayer()\n}\n")))}c.isMDXComponent=!0},99139:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"发布订阅模式"),(0,i.kt)("p",null,"事件发布/订阅模式 (PubSub) 在异步编程中帮助我们完成更松的解耦, 甚至在 MVC、MVVC 的架构中以及设计模式中也少不了发布-订阅模式的参与。"),(0,i.kt)("p",null,"优点: 在异步编程中实现更深的解耦"),(0,i.kt)("p",null,"缺点: 如果过多的使用发布订阅模式, 会增加维护的难度"),(0,i.kt)("h3",null,"实现一个发布订阅模式"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var Event = function() {\n  this.obj = {}\n}\n\nEvent.prototype.on = function(eventType, fn) {\n  if (!this.obj[eventType]) {\n    this.obj[eventType] = []\n  }\n  this.obj[eventType].push(fn)\n}\n\nEvent.prototype.emit = function() {\n  var eventType = Array.prototype.shift.call(arguments)\n  var arr = this.obj[eventType]\n  for (let i = 0; i < arr.length; i++) {\n    arr[i].apply(arr[i], arguments)\n  }\n}\n\nvar ev = new Event()\n\nev.on('click', function(a) { // 订阅函数\n  console.log(a) // 1\n})\n\nev.emit('click', 1)          // 发布函数\n")),(0,i.kt)("h3",null,"订阅函数逻辑一定要优先于发布函数吗"),(0,i.kt)("p",null,"考虑以下场景:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"$.ajax('', () => {\n  // 异步订阅函数逻辑\n})\n\n// 在其他地方执行发布函数, 此时并不能保证执行发布函数的时候, 订阅函数已经执行\n")),(0,i.kt)("p",null,"我们需要实现这样的逻辑:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var ev = new Event()\nev.emit('click', 1)\n\nev.on('click', function(a) {\n  console.log(a) // 1\n})\n")),(0,i.kt)("p",null,"目标明确后, 来着手实现它:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var Event = function() {\n  this.obj = {}\n  this.cacheList = []\n}\n\nEvent.prototype.on = function(eventType, fn) {\n  if (!this.obj[eventType]) {\n    this.obj[eventType] = []\n  }\n  this.obj[eventType].push(fn)\n\n  for (let i = 0; i < this.cacheList.length; i++) {\n    this.cacheList[i]()\n  }\n}\n\nEvent.prototype.emit = function() {\n  const arg = arguments\n  const that = this\n  function cache() {\n    var eventType = Array.prototype.shift.call(arg)\n    var arr = that.obj[eventType]\n    for (let i = 0; i < arr.length; i++) {\n      arr[i].apply(arr[i], arg)\n    }\n  }\n  this.cacheList.push(cache)\n}\n")),(0,i.kt)("p",null,"以上代码实现思路就是把原本在 emit 里触发的函数存到 cacheList, 再转交到 on 中触发。从而实现了发布函数先于订阅函数执行。"))}c.isMDXComponent=!0},54409:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"命令模式"),(0,i.kt)("p",null,"命令模式与",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/Basic%20Skill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.md"}),"策略模式"),"有些类似, 在 JavaScript 中它们都是隐式的。"),(0,i.kt)("p",null,"重要性: 较低"),(0,i.kt)("h3",null,"JavaScript 中的命令模式"),(0,i.kt)("p",null,"命令模式在 JavaScript 中也比较简单, 下面代码中对",(0,i.kt)("inlineCode",{parentName:"p"},"按钮"),"和",(0,i.kt)("inlineCode",{parentName:"p"},"命令"),"进行了抽离, 因此可以复杂项目中可以使用命令模式将界面的代码和功能的代码交付给不同的人去写。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const setCommand = function(button, command) {\n  button.onClick = function() {\n    command.excute()\n  }\n}\n\n// --------------------  上面的界面逻辑由A完成, 下面的由B完成\n\nconst menu = {\n  updateMenu: function() {\n    console.log('更新菜单')\n  },\n}\n\nconst UpdateCommand = function(receive) {\n  return {\n    excute: receive.updateMenu,\n  }\n}\n\nconst updateCommand = UpdateCommand(menu) // 创建命令\n\nconst button1 = document.getElementById('button1')\nsetCommand(button1, updateCommand)\n")))}c.isMDXComponent=!0},93976:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"模板方法模式"),(0,i.kt)("p",null,"定义: 在继承的基础上, 在父类中定义好执行的算法。"),(0,i.kt)("h3",null,"泡茶和泡咖啡"),(0,i.kt)("p",null,"来对比下泡茶和泡咖啡过程中的异同"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"步骤"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"泡茶"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"泡咖啡"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"1"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"烧开水"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"烧开水")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"2"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"浸泡茶叶"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"冲泡咖啡")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"3"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"倒入杯子"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"倒入杯子")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"4"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"加柠檬"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"加糖")))),(0,i.kt)("p",null,"可以清晰地看出仅仅在步骤 2 和 4 上有细微的差别, 下面着手实现:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const Drinks = function() {}\n\nDrinks.prototype.firstStep = function() {\n  console.log('烧开水')\n}\n\nDrinks.prototype.secondStep = function() {}\n\nDrinks.prototype.thirdStep = function() {\n  console.log('倒入杯子')\n}\n\nDrinks.prototype.fourthStep = function() {}\n\nDrinks.prototype.init = function() { // 模板方法模式核心: 在父类上定义好执行算法\n  this.firstStep()\n  this.secondStep()\n  this.thirdStep()\n  this.fourthStep()\n}\n\nconst Tea = function() {}\n\nTea.prototype = new Drinks\n\nTea.prototype.secondStep = function() {\n  console.log('浸泡茶叶')\n}\n\nTea.prototype.fourthStep = function() {\n  console.log('加柠檬')\n}\n\nconst Coffee = function() {}\n\nCoffee.prototype = new Drinks\n\nCoffee.prototype.secondStep = function() {\n  console.log('冲泡咖啡')\n}\n\nCoffee.prototype.fourthStep = function() {\n  console.log('加糖')\n}\n\nconst tea = new Tea()\ntea.init()\n\n// 烧开水\n// 浸泡茶叶\n// 倒入杯子\n// 加柠檬\n\nconst coffee = new Coffee()\ncoffee.init()\n\n// 烧开水\n// 冲泡咖啡\n// 倒入杯子\n// 加糖\n")),(0,i.kt)("h3",null,"钩子"),(0,i.kt)("p",null,"假如客人不想加佐料(糖、柠檬)怎么办, 这时可以引人钩子来实现之, 实现逻辑如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"\n// ...\n\nDrinks.prototype.ifNeedFlavour = function() { // 加上钩子\n  return true\n}\n\nDrinks.prototype.init = function() { // 模板方法模式核心: 在父类上定义好执行算法\n  this.firstStep()\n  this.secondStep()\n  this.thirdStep()\n  if (this.ifNeedFlavour()) { // 默认是 true, 也就是要加调料\n    this.fourthStep()\n  }\n}\n\n// ...\nconst Coffee = function() {}\n\nCoffee.prototype = new Drinks()\n// ...\n\nCoffee.prototype.ifNeedFlavour = function() {\n  return window.confirm('是否需要佐料吗？') // 弹框选择是否佐料\n}\n")))}c.isMDXComponent=!0},72118:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"状态模式"),(0,i.kt)("p",null,"状态模式: 将事物内部的每个状态分别封装成类, 内部状态改变会产生不同行为。"),(0,i.kt)("p",null,"优点: 用对象代替字符串记录当前状态, 状态易维护"),(0,i.kt)("p",null,"缺点: 需编写大量状态类对象"),(0,i.kt)("h3",null,"场景 demo"),(0,i.kt)("p",null,"某某牌电灯, 按一下按钮打开弱光, 按两下按钮打开强光, 按三下按钮关闭灯光。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 将状态封装成不同类\nconst weakLight = function(light) {\n  this.light = light\n}\n\nweakLight.prototype.press = function() {\n  console.log('打开强光')\n  this.light.setState(this.light.strongLight)\n}\n\nconst strongLight = function(light) {\n  this.light = light\n}\n\nstrongLight.prototype.press = function() {\n  console.log('关灯')\n  this.light.setState(this.light.offLight)\n}\n\nconst offLight = function(light) {\n  this.light = light\n}\n\noffLight.prototype.press = function() {\n  console.log('打开弱光')\n  this.light.setState(this.light.weakLight)\n}\n\nconst Light = function() {\n  this.weakLight = new weakLight(this)\n  this.strongLight = new strongLight(this)\n  this.offLight = new offLight(this)\n  this.currentState = this.offLight          // 初始状态\n}\n\nLight.prototype.init = function() {\n  const btn = document.createElement('button')\n  btn.innerHTML = '按钮'\n  document.body.append(btn)\n  const self = this\n  btn.addEventListener('click', function() {\n    self.currentState.press()\n  })\n}\n\nLight.prototype.setState = function(state) { // 改变当前状态\n  this.currentState = state\n}\n\nconst light = new Light()\nlight.init()\n\n// 打开弱光\n// 打开强光\n// 关灯\n")),(0,i.kt)("h3",null,"非面向对象实现的状态模式"),(0,i.kt)("p",null,"借助于 JavaScript 的委托机制, 可以像如下实现状态模式:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const obj = {\n  'weakLight': {\n    press: function() {\n      console.log('打开强光')\n      this.currentState = obj.strongLight\n    }\n  },\n  'strongLight': {\n    press: function() {\n      console.log('关灯')\n      this.currentState = obj.offLight\n    }\n  },\n  'offLight': {\n    press: function() {\n      console.log('打开弱光')\n      this.currentState = obj.weakLight\n    }\n  },\n}\n\nconst Light = function() {\n  this.currentState = obj.offLight\n}\n\nLight.prototype.init = function() {\n  const btn = document.createElement('button')\n  btn.innerHTML = '按钮'\n  document.body.append(btn)\n  const self = this\n  btn.addEventListener('click', function() {\n    self.currentState.press.call(self) // 通过 call 完成委托\n  })\n}\n\nconst light = new Light()\nlight.init()\n")))}c.isMDXComponent=!0},8959:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"策略模式"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"定义"),": 根据不同参数可以命中不同的策略"),(0,i.kt)("h3",null,"JavaScript 中的策略模式"),(0,i.kt)("p",null,"观察如下获取年终奖的 demo, 根据不同的参数（level）获得不同策略方法(规则), 这是策略模式在 JS 比较经典的运用之一。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const strategy = {\n  'S': function(salary) {\n    return salary * 4\n  },\n  'A': function(salary) {\n    return salary * 3\n  },\n  'B': function(salary) {\n    return salary * 2\n  }\n}\n\nconst calculateBonus = function(level, salary) {\n  return strategy[level](salary)\n}\n\ncalculateBonus('A', 10000) // 30000\n")),(0,i.kt)("p",null,"在函数是一等公民的 JS 中, 策略模式的使用常常隐藏在高阶函数中, 稍微变换下上述 demo 的形式如下, 可以发现我们平时已经在使用它了, 恭喜我们又掌握了一种设计模式。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const S = function(salary) {\n  return salary * 4\n}\n\nconst A = function(salary) {\n  return salary * 3\n}\n\nconst B = function(salary) {\n  return salary * 2\n}\n\nconst calculateBonus = function(func, salary) {\n  return func(salary)\n}\n\ncalculateBonus(A, 10000) // 30000\n")),(0,i.kt)("h3",null,"优点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"能减少大量的 if 语句"),(0,i.kt)("li",{parentName:"ul"},"复用性好")))}c.isMDXComponent=!0},73028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"组合模式"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"组合模式在对象间形成",(0,i.kt)("inlineCode",{parentName:"li"},"树形结构"),";"),(0,i.kt)("li",{parentName:"ul"},"组合模式中基本对象和组合对象被",(0,i.kt)("inlineCode",{parentName:"li"},"一致对待"),";"),(0,i.kt)("li",{parentName:"ul"},"无须关心对象有多少层, 调用时只需在根部进行调用;")),(0,i.kt)("h3",null,"demo1 —— 宏命令"),(0,i.kt)("p",null,"想象我们现在手上有个万能遥控器, 当我们回家, 按一下开关, 下列事情将被执行:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"1. 煮咖啡\n2. 打开电视、打开音响\n3. 打开空调、打开电脑\n")),(0,i.kt)("p",null,"我们把任务划分为 3 类, 效果图如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/9c87ce835515f3d9b60a86a0f28897d9.jpg-400",alt:null}))),(0,i.kt)("p",null,"接着看看结合了",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/Basic%20Skill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F.md"}),"命令模式"),"和组合模式的具体实现:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const MacroCommand = function() {\n  return {\n    lists: [],\n    add: function(task) {\n      this.lists.push(task)\n    },\n    excute: function() { // ①: 组合对象调用这里的 excute,\n      for (let i = 0; i < this.lists.length; i++) {\n        this.lists[i].excute()\n      }\n    },\n  }\n}\n\nconst command1 = MacroCommand() // 基本对象\n\ncommand1.add({\n  excute: () => console.log('煮咖啡') // ②: 基本对象调用这里的 excute,\n})\n\nconst command2 = MacroCommand() // 组合对象\n\ncommand2.add({\n  excute: () => console.log('打开电视')\n})\n\ncommand2.add({\n  excute: () => console.log('打开音响')\n})\n\nconst command3 = MacroCommand()\n\ncommand3.add({\n  excute: () => console.log('打开空调')\n})\n\ncommand3.add({\n  excute: () => console.log('打开电脑')\n})\n\nconst macroCommand = MacroCommand()\nmacroCommand.add(command1)\nmacroCommand.add(command2)\nmacroCommand.add(command3)\n\nmacroCommand.excute()\n\n// 煮咖啡\n// 打开电视\n// 打开音响\n// 打开空调\n// 打开电脑\n")),(0,i.kt)("p",null,"可以看出在组合模式中基本对象和组合对象被一致对待, 所以要保证基本对象(叶对象)和组合对象具有一致方法。"),(0,i.kt)("h3",null,"demo2 —— 扫描文件夹"),(0,i.kt)("p",null,"扫描文件夹时, 文件夹下面可以为另一个文件夹也可以为文件, 我们希望统一对待这些文件夹和文件, 这种情形适合使用组合模式。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const Folder = function(folder) {\n  this.folder = folder\n  this.lists = []\n}\n\nFolder.prototype.add = function(resource) {\n  this.lists.push(resource)\n}\n\nFolder.prototype.scan = function() {\n  console.log('开始扫描文件夹: ', this.folder)\n  for (let i = 0, folder; folder = this.lists[i++];) {\n    folder.scan()\n  }\n}\n\nconst File = function(file) {\n  this.file = file\n}\n\nFile.prototype.add = function() {\n  throw Error('文件下不能添加其它文件夹或文件')\n}\n\nFile.prototype.scan = function() {\n  console.log('开始扫描文件: ', this.file)\n}\n\nconst folder = new Folder('根文件夹')\nconst folder1 = new Folder('JS')\nconst folder2 = new Folder('life')\n\nconst file1 = new File('深入React技术栈.pdf')\nconst file2 = new File('JavaScript权威指南.pdf')\nconst file3 = new File('小王子.pdf')\n\nfolder1.add(file1)\nfolder1.add(file2)\n\nfolder2.add(file3)\n\nfolder.add(folder1)\nfolder.add(folder2)\n\nfolder.scan()\n\n// 开始扫描文件夹:  根文件夹\n// 开始扫描文件夹:  JS\n// 开始扫描文件:  深入React技术栈.pdf\n// 开始扫描文件:  JavaScript权威指南.pdf\n// 开始扫描文件夹:  life\n// 开始扫描文件:  小王子.pdf\n")))}c.isMDXComponent=!0},41456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"职责链模式"),(0,i.kt)("p",null,"职责链模式: 类似多米诺骨牌, 通过请求第一个条件, 会持续执行后续的条件, 直到返回结果为止。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/cbc8c10bbae202bcd243f6b0704de3ba.jpg-300",alt:null}))),(0,i.kt)("p",null,"重要性: 4 星, 在项目中能对 if-else 语句进行优化"),(0,i.kt)("h3",null,"场景 demo"),(0,i.kt)("p",null,"场景: 某电商针对已付过定金的用户有优惠政策, 在正式购买后, 已经支付过 500 元定金的用户会收到 100 元的优惠券, 200 元定金的用户可以收到 50 元优惠券, 没有支付过定金的用户只能正常购买。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// orderType: 表示订单类型, 1: 500 元定金用户；2: 200 元定金用户；3: 普通购买用户\n// pay: 表示用户是否已经支付定金, true: 已支付；false: 未支付\n// stock: 表示当前用于普通购买的手机库存数量, 已支付过定金的用户不受此限制\n\nconst order = function( orderType, pay, stock ) {\n  if ( orderType === 1 ) {\n    if ( pay === true ) {\n      console.log('500 元定金预购, 得到 100 元优惠券')\n    } else {\n      if (stock > 0) {\n        console.log('普通购买, 无优惠券')\n      } else {\n        console.log('库存不够, 无法购买')\n      }\n    }\n  } else if ( orderType === 2 ) {\n    if ( pay === true ) {\n      console.log('200 元定金预购, 得到 50 元优惠券')\n    } else {\n      if (stock > 0) {\n        console.log('普通购买, 无优惠券')\n      } else {\n        console.log('库存不够, 无法购买')\n      }\n    }\n  } else if ( orderType === 3 ) {\n    if (stock > 0) {\n        console.log('普通购买, 无优惠券')\n    } else {\n      console.log('库存不够, 无法购买')\n    }\n  }\n}\n\norder( 3, true, 500 ) // 普通购买, 无优惠券\n")),(0,i.kt)("p",null,"下面用职责链模式改造代码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const order500 = function(orderType, pay, stock) {\n  if ( orderType === 1 && pay === true ) {\n    console.log('500 元定金预购, 得到 100 元优惠券')\n  } else {\n    order200(orderType, pay, stock)\n  }\n}\n\nconst order200 = function(orderType, pay, stock) {\n  if ( orderType === 2 && pay === true ) {\n    console.log('200 元定金预购, 得到 50 元优惠券')\n  } else {\n    orderCommon(orderType, pay, stock)\n  }\n}\n\nconst orderCommon = function(orderType, pay, stock) {\n  if ((orderType === 3 || !pay) && stock > 0) {\n    console.log('普通购买, 无优惠券')\n  } else {\n    console.log('库存不够, 无法购买')\n  }\n}\n\norder500(3, true, 500) // 普通购买, 无优惠券\n")),(0,i.kt)("p",null,"改造后可以发现代码相对清晰了, 但是链路代码和业务代码依然耦合在一起, 进一步优化:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 业务代码\nconst order500 = function(orderType, pay, stock) {\n  if ( orderType === 1 && pay === true ) {\n    console.log('500 元定金预购, 得到 100 元优惠券')\n  } else {\n    return 'nextSuccess'\n  }\n}\n\nconst order200 = function(orderType, pay, stock) {\n  if ( orderType === 2 && pay === true ) {\n    console.log('200 元定金预购, 得到 50 元优惠券')\n  } else {\n    return 'nextSuccess'\n  }\n}\n\nconst orderCommon = function(orderType, pay, stock) {\n  if ((orderType === 3 || !pay) && stock > 0) {\n    console.log('普通购买, 无优惠券')\n  } else {\n    console.log('库存不够, 无法购买')\n  }\n}\n\n// 链路代码\nconst chain = function(fn) {\n  this.fn = fn\n  this.sucessor = null\n}\n\nchain.prototype.setNext = function(sucessor) {\n  this.sucessor = sucessor\n}\n\nchain.prototype.init = function() {\n  const result = this.fn.apply(this, arguments)\n  if (result === 'nextSuccess') {\n    this.sucessor.init.apply(this.sucessor, arguments)\n  }\n}\n\nconst order500New = new chain(order500)\nconst order200New = new chain(order200)\nconst orderCommonNew = new chain(orderCommon)\n\norder500New.setNext(order200New)\norder200New.setNext(orderCommonNew)\n\norder500New.init( 3, true, 500 ) // 普通购买, 无优惠券\n")),(0,i.kt)("p",null,"重构后, 链路代码和业务代码彻底地分离。假如未来需要新增 order300, 那只需新增与其相关的函数而不必改动原有业务代码。"),(0,i.kt)("p",null,"另外结合 AOP 还能简化上述链路代码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 业务代码\nconst order500 = function(orderType, pay, stock) {\n  if ( orderType === 1 && pay === true ) {\n    console.log('500 元定金预购, 得到 100 元优惠券')\n  } else {\n    return 'nextSuccess'\n  }\n}\n\nconst order200 = function(orderType, pay, stock) {\n  if ( orderType === 2 && pay === true ) {\n    console.log('200 元定金预购, 得到 50 元优惠券')\n  } else {\n    return 'nextSuccess'\n  }\n}\n\nconst orderCommon = function(orderType, pay, stock) {\n  if ((orderType === 3 || !pay) && stock > 0) {\n    console.log('普通购买, 无优惠券')\n  } else {\n    console.log('库存不够, 无法购买')\n  }\n}\n\n// 链路代码\nFunction.prototype.after = function(fn) {\n  const self = this\n  return function() {\n    const result = self.apply(self, arguments)\n    if (result === 'nextSuccess') {\n      return fn.apply(self, arguments) // 这里 return 别忘记了~\n    }\n  }\n}\n\nconst order = order500.after(order200).after(orderCommon)\n\norder( 3, true, 500 ) // 普通购买, 无优惠券\n")),(0,i.kt)("p",null,"职责链模式比较重要, 项目中能用到它的地方会有很多, 用上它能解耦 1 个请求对象和 n 个目标对象的关系。"))}c.isMDXComponent=!0},58633:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"装饰者模式"),(0,i.kt)("p",null,"装饰器模式: 动态地给函数赋能。"),(0,i.kt)("h3",null,"JavaScript 的装饰者模式"),(0,i.kt)("p",null,"生活中的例子: 天气冷了, 就添加衣服来保暖；天气热了, 就将外套脱下；这个例子很形象地含盖了装饰器的神韵, 随着天气的冷暖变化, 衣服可以动态的穿上脱下。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let wear = function() {\n  console.log('穿上第一件衣服')\n}\n\nconst _wear1 = wear\n\nwear = function() {\n  _wear1()\n  console.log('穿上第二件衣服')\n}\n\nconst _wear2 = wear\n\nwear = function() {\n  _wear2()\n  console.log('穿上第三件衣服')\n}\n\nwear()\n\n// 穿上第一件衣服\n// 穿上第二件衣服\n// 穿上第三件衣服\n")),(0,i.kt)("p",null,"这种方式有以下缺点: 1: 临时变量会变得越来越多；2: this 指向有时会出错"),(0,i.kt)("h3",null,"AOP 装饰函数"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 前置代码\nFunction.prototype.before = function(fn) {\n  const self = this\n  return function() {\n    fn.apply(new(self), arguments)  // https://github.com/MuYunyun/blog/pull/30#event-1817065820\n    return self.apply(new(self), arguments)\n  }\n}\n\n// 后置代码\nFunction.prototype.after = function(fn) {\n  const self = this\n  return function() {\n    self.apply(new(self), arguments)\n    return fn.apply(new(self), arguments)\n  }\n}\n")),(0,i.kt)("p",null,"用后置代码来实验下上面穿衣服的 demo,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const wear1 = function() {\n  console.log('穿上第一件衣服')\n}\n\nconst wear2 = function() {\n  console.log('穿上第二件衣服')\n}\n\nconst wear3 = function() {\n  console.log('穿上第三件衣服')\n}\n\nconst wear = wear1.after(wear2).after(wear3)\nwear()\n\n// 穿上第一件衣服\n// 穿上第二件衣服\n// 穿上第三件衣服\n")),(0,i.kt)("p",null,"但这样子有时会污染原生函数, 可以做点通变"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const after = function(fn, afterFn) {\n  return function() {\n    fn.apply(this, arguments)\n    afterFn.apply(this, arguments)\n  }\n}\n\nconst wear = after(after(wear1, wear2), wear3)\nwear()\n")))}c.isMDXComponent=!0},76509:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"观察者模式"),(0,i.kt)("p",null,"应用场景:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"场景一: 当观察的数据对象发生变化时, 自动调用相应函数。比如 vue 的双向绑定;"),(0,i.kt)("li",{parentName:"ol"},"场景二: 每当调用对象里的某个方法时, 就会调用相应'访问'逻辑。比如给测试框架赋能的 spy 函数;")),(0,i.kt)("h3",null,"场景一: 双向绑定"),(0,i.kt)("h4",null,"Object.defineProperty"),(0,i.kt)("p",null,"使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"Object.defineProperty(obj, props, descriptor)")," 实现观察者模式, 其也是 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/issues/11"}),"vue 双向绑定")," 的核心, 示例如下(当改变 obj 中的 value 的时候, 自动调用相应相关函数):"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var obj = {\n  data: { list: [] },\n}\n\nObject.defineProperty(obj, 'list', {\n  get() {\n    return this.data['list']\n  },\n  set(val) {\n    console.log('值被更改了')\n    this.data['list'] = val\n  }\n})\n")),(0,i.kt)("h4",null,"Proxy"),(0,i.kt)("p",null,"Proxy/Reflect 是 ES6 引入的新特性, 也可以使用其完成观察者模式, 示例如下(效果同上):"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var obj = {\n  value: 0\n}\n\nvar proxy = new Proxy(obj, {\n  set: function(target, key, value, receiver) { // {value: 0}  \"value\"  1  Proxy {value: 0}\n    console.log('调用相应函数')\n    Reflect.set(target, key, value, receiver)\n  }\n})\n\nproxy.value = 1 // 调用相应函数\n\n")),(0,i.kt)("h3",null,"场景二"),(0,i.kt)("p",null,"下面来实现 sinon 框架的 spy 函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const sinon = {\n  analyze: {},\n  spy: function(obj, fnName) {\n    const that = this\n    const oldFn = Object.getOwnPropertyDescriptor(obj, fnName).value\n    Object.defineProperty(obj, fnName, {\n      value: function() {\n        oldFn()\n        if (that.analyze[fnName]) {\n          that.analyze[fnName].count = ++that.analyze[fnName].count\n        } else {\n          that.analyze[fnName] = {}\n          that.analyze[fnName].count = 1\n        }\n        console.log(`${fnName} 被调用了 ${that.analyze[fnName].count} 次`)\n      }\n    })\n  }\n}\n\nconst obj = {\n  someFn: function() {\n    console.log('my name is someFn')\n  }\n}\n\nsinon.spy(obj, 'someFn')\n\nobj.someFn()\n// my name is someFn\n// someFn 被调用了 1 次\nobj.someFn()\n// my name is someFn\n// someFn 被调用了 2 次\n")),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"vue")," 在 3.0 版本上使用 ",(0,i.kt)("inlineCode",{parentName:"h3"},"Proxy")," 重构的原因"),(0,i.kt)("p",null,"首先罗列 ",(0,i.kt)("inlineCode",{parentName:"p"},"Object.defineProperty()")," 的缺点:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"Object.defineProperty()")," 不会监测到数组引用不变的操作(比如 ",(0,i.kt)("inlineCode",{parentName:"li"},"push/pop")," 等);"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"Object.defineProperty()")," 只能监测到对象的属性的改变, 即如果有深度嵌套的对象则需要再次给之绑定 ",(0,i.kt)("inlineCode",{parentName:"li"},"Object.defineProperty()"),";")),(0,i.kt)("p",null,"关于 ",(0,i.kt)("inlineCode",{parentName:"p"},"Proxy")," 的优点"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"可以劫持数组的改变;"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"defineProperty")," 是对属性的劫持, ",(0,i.kt)("inlineCode",{parentName:"li"},"Proxy")," 是对对象的劫持;")))}c.isMDXComponent=!0},13494:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"迭代器模式"),(0,i.kt)("p",null,"定义: 能访问到聚合对象的顺序与元素"),(0,i.kt)("h3",null,"实现一个内部迭代器"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function each(arr, fn) {\n  for (let i = 0; i < arr.length; i++) {\n    fn(i, arr[i])\n  }\n}\n\neach([1, 2, 3], function(i, n) {\n  console.log(i) // 0 1 2\n  console.log(n) // 1 2 3\n})\n")),(0,i.kt)("p",null,"可以看出内部迭代器在调用的时候非常简单, 使用者不用关心迭代器内部实现的细节, 但这也是内部迭代器的缺点。比如要比较两数组是否相等, 只能在其回调函数中作文章了, 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const compare = function(arr1, arr2) {\n  each(arr1, function(i, n) {\n    if (arr2[i] !== n) {\n      console.log('两数组不等')\n      return\n    }\n  })\n  console.log('两数组相等')\n}\n\nconst arr1 = [1, 2, 3]\nconst arr2 = [1, 2, 3]\ncompare(arr1, arr2) // 两数组相等\n")),(0,i.kt)("h3",null,"实现一个外部迭代器"),(0,i.kt)("p",null,"相较于内部迭代器, 外部迭代器将遍历的权利转移到外部, 因此在调用的时候拥有了更多的自由性, 不过缺点是调用方式较复杂。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const iterator = function(arr) {\n  let current = 0\n  const next = function() {\n    current = current + 1\n  }\n  const done = function() {\n    return current >= arr.length\n  }\n  const value = function() {\n    return arr[current]\n  }\n  return {\n    next,\n    done,\n    value,\n  }\n}\n\nconst arr1 = [1, 2 ,3]\nconst arr2 = [1, 2, 3]\nconst iterator1 = iterator(arr1)\nconst iterator2 = iterator(arr2)\n\nconst compare = function(iterator1, iterator2) {\n  while (!iterator1.done() && !iterator2.done()) {\n    if (iterator1.value() !== iterator2.value()) {\n      console.log('两数组不等')\n      return\n    }\n    iterator1.next() // 外部迭代器将遍历的权利转移到外部\n    iterator2.next()\n  }\n  console.log('两数组相等')\n}\n\ncompare(iterator1, iterator2)\n")))}c.isMDXComponent=!0},59358:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"适配者模式"),(0,i.kt)("p",null,"适配者模式: 主要用于解决两个接口之间不匹配的问题。"),(0,i.kt)("h3",null,"demo"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 老接口\nconst zhejiangCityOld = (function() {\n  return [\n    {\n      name: 'hangzhou',\n      id: 11,\n    },\n    {\n      name: 'jinhua',\n      id: 12\n    }\n  ]\n}())\n\nconsole.log(getZhejiangCityOld())\n\n// 新接口希望是下面形式\n{\n  hangzhou: 11,\n  jinhua: 12,\n}\n\n// 这时候就可采用适配者模式\nconst adaptor = (function(oldCity) {\n  const obj = {}\n  for (let city of zhejiangCityOld) {\n    obj[city.name] = city.id\n  }\n  return obj\n}())\n")))}c.isMDXComponent=!0},79583:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Babel 是下一代 JavaScript 编译器。"),(0,i.kt)("h3",null,"babel 执行机制"),(0,i.kt)("p",null,"babel 执行三部曲如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"解析")),(0,i.kt)("p",null,"使用 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/babel/babel/tree/master/packages/babel-parser"}),"babel-parse")," 将 JS 代码解析成 AST 树"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"转换")),(0,i.kt)("p",null,"配合 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/babel/babel/tree/master/packages/babel-traverse"}),"babel-traverse")," 进行 AST 树的遍历, 同时使用 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/babel/babel/tree/master/packages/babel-core"}),"babel-core")," 对外暴露的 ",(0,i.kt)("inlineCode",{parentName:"p"},"transform")," 来调用相应插件来转化 AST 树"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"babal.transform(code, {\n  plugins: { pluginA, pluginB }\n})\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"生成")),(0,i.kt)("p",null,"使用 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/babel/babel/tree/master/packages/babel-generator"}),"babel-generator")," 将 AST 树转换回 JS 代码"),(0,i.kt)("h4",null,"值得阅读的文章"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.babeljs.cn/"}),"babel 中文官网")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://www.alloyteam.com/2017/04/analysis-of-babel-babel-overview/"}),"剖析 Babel —— Babel 总览"),", 这篇文章讲得比较透彻"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/README.md"}),"babel-handbook"),", babel 手册, 推荐"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://web.jobbole.com/91277/"}),"Babel 插件开发一些示例"),", 这篇文章 bug 比较多, 可以作为上面文章的补充"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://astexplorer.net/#/KJ8AjD6maa"}),"AST explore"),", 可以在这个网站上看到 JS 代码对应的 AST"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://babeljs.io/docs/en/next/babel-types.html"}),"@babel/types"),", babel-types 可以用来生成转换相应的 babel 节点, 同时文案可以作为 api 来参考。")))}c.isMDXComponent=!0},32934:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"数据备份方案"),(0,i.kt)("p",null,"首先选择相应插件, 这里以 git-remark 为例"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/642ef9638488d9d9b0857464b354f246.jpg-200",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"chrome.storage.local.get('github-repo-notes', res => {\n  console.log(JSON.stringify(res['github-repo-notes']))\n})\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"chrome.storage.local.set({'github-repo-notes': obj}, () => {\n})\n")),(0,i.kt)("h3",null,"相关文档"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"chrome://extensions"}),"chrome://extensions")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://open.chrome.360.cn/extension_dev/overview.html"}),"360 扩展开发文档")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.chrome.com/extensions"}),"chrome 扩展开发文档"))),(0,i.kt)("h3",null,"插件发版"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://chrome.google.com/webstore/developer/dashboard/"}),"插件发版地址")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://chrome.google.com/webstore/detail/github-notes/ololfachmeilbnmipbbglhbdnadcjlak?authuser=0"}),"GitHub Notes"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"开发者账号 backup: ",(0,i.kt)("a",u({parentName:"p"},{href:"mailto:liweirancn@gmail.com"}),"liweirancn@gmail.com"))))}c.isMDXComponent=!0},45915:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,".gitlab.yml 调试技巧"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"在 ",(0,i.kt)("inlineCode",{parentName:"li"},"scripts")," 中书写脚本。"),(0,i.kt)("li",{parentName:"ol"},"本地运行 ",(0,i.kt)("a",u({parentName:"li"},{href:"./docker.md"}),"docker")," 环境启动项目。")))}c.isMDXComponent=!0},69342:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"CodeSandbox vs CodeBox"),(0,i.kt)("h4",null,"Editor"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"CodeSandbox: ",(0,i.kt)("inlineCode",{parentName:"li"},"Free File System"),"; Take the ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/Microsoft/monaco-editor"}),"monaco-editor"),";"),(0,i.kt)("li",{parentName:"ul"},"CodeBox")),(0,i.kt)("h4",null,"Social"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"CodeSandbox: It supports ",(0,i.kt)("inlineCode",{parentName:"li"},"a real-time collaboration"),". You have ",(0,i.kt)("inlineCode",{parentName:"li"},"access to some of VS Code settings"),"."),(0,i.kt)("li",{parentName:"ul"},"CodeBox: CodePen takes social experiences to another level. Likes, ",(0,i.kt)("inlineCode",{parentName:"li"},"comments, views, tags, posts, collections"),", etc.- it all makes CodePen a ",(0,i.kt)("inlineCode",{parentName:"li"},"social web development platform"),". And it can take documentation and a dedicated blog.")))}c.isMDXComponent=!0},20932:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"How to get an updated time"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"GraghQL API",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.github.com/v4/explorer/"}),"https://developer.github.com/v4/explorer/"))))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'input:\n{\n  repository(owner: "MuYunyun", name: "blog") {\n    ref(qualifiedName: "refs/heads/master") {\n      target {\n        ... on Commit {\n          history(first: 1, path: "package.json") {\n            edges {\n              node {\n                committedDate\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nreturn:\n{\n  "data": {\n    "repository": {\n      "ref": {\n        "target": {\n          "history": {\n            "edges": [\n              {\n                "node": {\n                  "committedDate": "2020-06-12T10:53:12Z"\n                }\n              }\n            ]\n          }\n        }\n      }\n    }\n  }\n}\n')))}c.isMDXComponent=!0},9465:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Docker 是什么？"),(0,i.kt)("p",null,"Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口。它是目前最流行的 Linux 容器解决方案。"),(0,i.kt)("h3",null,"使用场景"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"提供一次性的环境。"),(0,i.kt)("li",{parentName:"ol"},"提供弹性的云服务。"),(0,i.kt)("li",{parentName:"ol"},"组建微服务架构。")),(0,i.kt)("h3",null,"Install"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"brew cask install docker\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://www.runoob.com/docker/macos-docker-install.html"}),"install"))),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html"}),"docker-tutorial"))))}c.isMDXComponent=!0},78852:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"lerna"),(0,i.kt)("h3",null,"background"),(0,i.kt)("p",null,(0,i.kt)("del",{parentName:"p"},"需求背景: 需要在 ",(0,i.kt)("inlineCode",{parentName:"del"},"pc")," 端容器里嵌套一个 ",(0,i.kt)("inlineCode",{parentName:"del"},"mobile")," 容器，相当于要同时启动两个项目。")),(0,i.kt)("p",null,(0,i.kt)("del",{parentName:"p"},"将其定位为一个 ",(0,i.kt)("inlineCode",{parentName:"del"},"monorepos")," 项目。")),(0,i.kt)("p",null,"From lerna"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Splitting up large codebases into separate independently versioned packages is extremely useful for code sharing. However, making changes across many repositories is messy and difficult to track, and testing across repositories becomes complicated very quickly.")),(0,i.kt)("h3",null,"Usage"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"$ mkdir lerna-repo && cd $_\n$ npx lerna init\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"lerna init: 初始化当前项目"),(0,i.kt)("li",{parentName:"ul"},"lerna run: 跑各个子包里的 ",(0,i.kt)("inlineCode",{parentName:"li"},"script")),(0,i.kt)("li",{parentName:"ul"},"lerna bootstrap: Bootstrap the packages in the current Lerna repo. Installs all of their dependencies and links any cross-dependencies."),(0,i.kt)("li",{parentName:"ul"},"lerna add: add module to child module from the root dir. ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/lerna/lerna/tree/master/commands/add#examples"}),"document"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"lerna add eslint --scope=crd-scripts --dev")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"details see ",(0,i.kt)("a",u({parentName:"p"},{href:"https://lerna.js.org/"}),"lerna doc"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/@banyudu/mono-repo-%E8%BF%81%E7%A7%BB%E5%AE%9E%E8%B7%B5-eaf955aaf4d7"}),"Mono repo 迁移实践")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/korfuri/awesome-monorepo"}),"awesome-monorepo"))),(0,i.kt)("h3",null,"Advandage"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Quick jump to reference file.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Instead webpack alias maybe do extra config.")))),(0,i.kt)("h3",null,"Q & A"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"why should add workspaces and private props in the root?")),(0,i.kt)("p",null,"The root package.json usually not have any effect, and workspaces and private props are used together."),(0,i.kt)("h3",null,"Question"),(0,i.kt)("p",null,"It seems it should be named @crd/theme instead of @crd-theme."),(0,i.kt)("h3",null,"相关资料"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/lerna"}),"lerna github")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/alibaba/alist"}),"alist"))))}c.isMDXComponent=!0},43130:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"在线编译 markdown"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/mdx-js/mdx"}),"mdx")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/FormidableLabs/react-live"}),"react-live"),": 不支持 import"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/simonguo/react-code-view"}),"react-code-view"))))}c.isMDXComponent=!0},97952:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"包下载的前置知识"),(0,i.kt)("p",null,"一个包的版本号基本由三位数字构成 ",(0,i.kt)("inlineCode",{parentName:"p"},"x.x.x"),", 它们分别是 ",(0,i.kt)("inlineCode",{parentName:"p"},"Major"),"(主版本号), ",(0,i.kt)("inlineCode",{parentName:"p"},"Minor"),"(次版本号), ",(0,i.kt)("inlineCode",{parentName:"p"},"Patch"),"(修订号)。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"*"),": 升级 ",(0,i.kt)("inlineCode",{parentName:"li"},"Major")," + ",(0,i.kt)("inlineCode",{parentName:"li"},"Minor")," + ",(0,i.kt)("inlineCode",{parentName:"li"},"Patch"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"^"),": 升级 ",(0,i.kt)("inlineCode",{parentName:"li"},"Minor")," + ",(0,i.kt)("inlineCode",{parentName:"li"},"Patch"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"~"),": 升级 ",(0,i.kt)("inlineCode",{parentName:"li"},"Patch"),";")),(0,i.kt)("p",null,"比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"^4.3.1 表示 4.x.x")," 的最新版, ",(0,i.kt)("inlineCode",{parentName:"p"},"~4.3.1 表示 4.3.x")," 的最新版。"),(0,i.kt)("h3",null,"npm"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"npm")," 经历了 3 次升级:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"npm1"),": 嵌套结构")),(0,i.kt)("p",null,"缺点: 相同的包会被重复下载多次, 比如下列 a、b、c 都依赖了 xxx 这个包, xxx 这个包被下载了 3 次。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-text"}),"-node-modules\n  - a\n    - node-modules\n      - xxx @1.0.0\n  - b\n    - node-modules\n      - xxx @1.0.0\n  - c\n    - node-modules\n      - xxx @1.0.1\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"npm3"),": 扁平结构")),(0,i.kt)("p",null,"所依赖的包的依赖也安装于根目录, 如果所依赖的包的依赖在根目录已存在但是版本不一致, 则在所依赖的包下面单独加上依赖的包。例子如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"-node-modules\n- a\n- b\n- xxx @1.0.0\n- c\n  - node-modules\n    - xxx @1.0.1\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"npm5"),": 扁平结构 + package-lock.json")),(0,i.kt)("p",null,"加上锁文件, 确保在不同电脑上安装的包的版本号相同。"),(0,i.kt)("h3",null,"yarn"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"更快, 离线缓存"),(0,i.kt)("li",{parentName:"ul"},"yarn.lock 文件")),(0,i.kt)("h4",null,"yarn 和 npm5 的区别"),(0,i.kt)("h5",null,"同"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"npm")," 通过 ",(0,i.kt)("inlineCode",{parentName:"li"},"package-lock.json")," 推断出 ",(0,i.kt)("inlineCode",{parentName:"li"},"node_modules")," 目录"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"yarn")," 也能通过 ",(0,i.kt)("inlineCode",{parentName:"li"},"yarn.lock")," 文件推断出 ",(0,i.kt)("inlineCode",{parentName:"li"},"node_modules")," 顶层目录的。就是要通过稍微计算, 比如下方:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// yarn 的 yarn.lock 类似如下\n- a\n- b\n- c\n  - xxx@1.0.1\n- xxx@1.0.1\n- xxx@1.0.0\n")),(0,i.kt)("p",null,"这个例子中, 我们能得出顶层目录如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// node_modules\n- a\n- b\n- c\n- xxx@1.0.0\n")),(0,i.kt)("h5",null,"异"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"依赖于 ",(0,i.kt)("inlineCode",{parentName:"li"},"yarn")," 的缓存机制(类似 ",(0,i.kt)("inlineCode",{parentName:"li"},"cnpm")," 的引用机制？), ",(0,i.kt)("inlineCode",{parentName:"li"},"yarn")," 的安装速度更快, 甚至能离线加载;")),(0,i.kt)("p",null,"也就是说 ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn")," 结合了 ",(0,i.kt)("inlineCode",{parentName:"p"},"npm")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"cnpm")," 的优点。"),(0,i.kt)("h4",null,"Hooks 踩坑"),(0,i.kt)("p",null,"There are three common reasons you might be seeing it:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"1. You might have mismatching versions of React and React DOM.\n2. You might be breaking the Rules of Hooks.\n3. You might have more than one copy of React in the same app.\n")),(0,i.kt)("p",null,'在 demo 项目中使用 yarn link "@msfe/beast-mobile" 会遇到上述报错, 解决方法是执行(貌似有问题)'),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"npm link ../beast-mobile-demo/node_modules/react from @msfe/beast-mobile\n")),(0,i.kt)("p",null,"另一种方法是在业务项目中配置 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://yarnpkg.com/lang/en/docs/selective-version-resolutions/"}),"resolutions")),(0,i.kt)("p",null,"try ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/whitecolor/yalc"}),"yalc")),(0,i.kt)("h3",null,"区分几个 package.json 字段"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"dependencies: 业务依赖"),(0,i.kt)("li",{parentName:"ul"},"devDependencies: 开发依赖"),(0,i.kt)("li",{parentName:"ul"},"peerDependencies:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"a 依赖了 b 包, b 包的 peerDependencies 字段含有 c 包。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"b 包执行 yarn 此时并不会安装上 c 包。"),(0,i.kt)("li",{parentName:"ul"},"如果 a 包中未执行安装 c 包, 则会报错。")))))),(0,i.kt)("h3",null,"resolutions in package.json"),(0,i.kt)("p",null,"背景: 在项目中的 package.json 字段里 dependencies 字段有较新版本的 beast-mobile(带主题包), resolutions 指向了较低版本的 beast-mobile(不带主题包)。此时验证项目中包含主题包。"),(0,i.kt)("p",null,"查找 yarn 的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/yarnpkg/rfcs/blob/master/implemented/0000-selective-versions-resolutions.md#package-designation"}),"rfc"),", resolutions 指定的目录只针对「嵌套」依赖的包版本生效。"))}c.isMDXComponent=!0},84629:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"SEO 在 SPA 站点中的实践"),(0,i.kt)("h3",null,"背景"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c03d8772da6d57e47c55044aee364103.jpg",alt:null}))),(0,i.kt)("p",null,"观察基于 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc"}),"create-react-doc")," 搭建的",(0,i.kt)("a",u({parentName:"p"},{href:"http://muyunyun.cn/create-react-doc/"}),"文档站点"),", 发现网页代码光秃秃的一片(见下图)。这显然是单页应用 (SPA) 站点的通病 —— 不利于文档被搜索引擎搜索 (SEO)。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0ba88a7544efe0e1978e6c8d8b7775a6.jpg",alt:null}))),(0,i.kt)("p",null,"难道 SPA 站点就无法进行 SEO 了么, 那么 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/gatsbyjs/gatsby"}),"Gatsby"),"、",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/nuxt/nuxt.js"}),"nuxt")," 等框架又为何能作为不少博主搭建博客的首选方案呢, 此类框架赋能 SEO 的技术原理是什么呢? 在好奇心的驱动下, 笔者尝试对 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc"}),"creat-react-doc")," 进行赋能 SEO 之旅。"),(0,i.kt)("h3",null,"搜索引擎优化"),(0,i.kt)("p",null,"在实践之前, 先从理论上分析为何单页应用不能被搜索引擎搜索到。核心在于 ",(0,i.kt)("inlineCode",{parentName:"p"},"爬虫蜘蛛在执行爬取的过程中, 不会去执行网页中的 JS 逻辑"),", 所以",(0,i.kt)("inlineCode",{parentName:"p"},"隐藏在 JS 中的跳转逻辑也不会被执行"),"。"),(0,i.kt)("p",null,"查看当前 SPA 站点打包后的代码, 除了一个根目录 index.html 外, 其它都是注入的 JS 逻辑, 因此浏览器自然不会对其进行 SEO。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0d15d4e3a62516da7c301e8f1c9228d6.jpg",alt:null}))),(0,i.kt)("p",null,"此外, 搜索引擎详优化是一门较复杂的学问。如果你对 SEO 优化比较陌生, 建议阅读",(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/search/docs/beginner/seo-starter-guide"}),"搜索引擎优化 (SEO) 新手指南")," 一文, Google 搜索中心给出了全面的 ",(0,i.kt)("strong",{parentName:"p"},"17 个"),"最佳做法, 以及 ",(0,i.kt)("strong",{parentName:"p"},"33 个"),"应避免的做法, 这也是笔者近期在实践的部分。"),(0,i.kt)("h3",null,"SEO 在 SPA 站点中的实践案例"),(0,i.kt)("p",null,"在轻文档站点的背景前提下, 我们暂不考虑 SSR 方案。"),(0,i.kt)("p",null,"对市面上文档站点的 SEO 方案调研后, 笔者总结为如下四类:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"静态模板渲染方案"),(0,i.kt)("li",{parentName:"ul"},"404 重定向方案"),(0,i.kt)("li",{parentName:"ul"},"SSG 方案"),(0,i.kt)("li",{parentName:"ul"},"预渲染方案")),(0,i.kt)("h4",null,"静态模板渲染方案"),(0,i.kt)("p",null,"静态模板渲染方案以 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/hexojs/hexo"}),"hexo")," 最为典型, 此类框架需要指定特定的模板语言(比如 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/pugjs/pug"}),"pug"),")来开发主题, 从而达到网页内容直出的目的。"),(0,i.kt)("h4",null,"404 重定向方案"),(0,i.kt)("p",null,"404 重定向方案的原理主要是利用 GitHub Pages 的 404 机制进行重定向。比较典型的案例有 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/rafgraph/spa-github-pages"}),"spa-github-pages"),"、",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/csuwildcat/sghpa"}),"sghpa"),"。"),(0,i.kt)("p",null,"但是遗憾的是 2019 年 Google ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/rafgraph/spa-github-pages#seo"}),"调整了爬虫算法"),", 因此此类重定向方案在当下是无利于 SEO 的。spa-github-pages 作者也表示如果需要 SEO 的话, 使用 SSG 方案或者付费方案 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.netlify.com/blog/2020/04/07/creating-better-more-predictable-redirect-rules-for-spas/"}),"Netlify"),"。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/bbb5ed8bce1e0c08dae94df98ff33262.jpg",alt:null}))),(0,i.kt)("h4",null,"SSG 方案"),(0,i.kt)("p",null,"SSG 方案全称为 static site generator, 中文可译为",(0,i.kt)("inlineCode",{parentName:"p"},"路由静态化方案"),"。社区上 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/nuxt/nuxt.js"}),"nuxt"),"、",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/gatsbyjs/gatsby"}),"Gatsby"),"、",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/docusaurus"}),"docusaurus")," 等框架赋能 SEO 的技术无一例外可以归类此类 SSG 方案。"),(0,i.kt)("p",null,"以 nuxt 框架为例, 在",(0,i.kt)("inlineCode",{parentName:"p"},"约定式路由"),"的基础上, 其通过执行 ",(0,i.kt)("inlineCode",{parentName:"p"},"nuxt generate")," 命令将 vue 文件转化为静态网页。"),(0,i.kt)("p",null,"例子:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"-| pages/\n---| about.vue/\n---| index.vue/\n")),(0,i.kt)("p",null,"静态化后变成:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"-| dist/\n---| about/\n-----| index.html\n---| index.html\n")),(0,i.kt)("p",null,"经过路由静态化后, 此时的文档目录结构可以托管于任何一个静态站点服务商。"),(0,i.kt)("h4",null,"预渲染方案"),(0,i.kt)("p",null,"经过上文对 SSG 方案的分析, 此时 SPA 站点的优化关键已经跃然纸上 —— ",(0,i.kt)("inlineCode",{parentName:"p"},"静态化路由"),"。相较于 nuxt、Gatsby 等框架存在约定式路由的限制, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc"}),"create-react-doc")," 在目录结构上的组织灵活自由。它的建站理念是",(0,i.kt)("inlineCode",{parentName:"p"},"文件即站点"),", 同时它对存量 markdown 文档的迁移也十分便捷。"),(0,i.kt)("p",null,"以 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog"}),"blog")," 项目结构为例, 其文档结构如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"-| BasicSkill/\n---| basic/\n-----| DOM.md\n-----| HTML5.md\n")),(0,i.kt)("p",null,"静态化后应该变成:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"-| BasicSkill/\n---| basic/\n-----| DOM\n-------| index.html\n-----| HTML5\n-------| index.html\n")),(0,i.kt)("p",null,"经过调研, 该构思与 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/chrisvfritz/prerender-spa-plugin"}),"prerender-spa-plugin")," 预渲染方案一拍即合。预渲染方案的原理可以见如下图:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/f3eb18c162a31fb155fd9f4a364f7fb9.jpg",alt:null}))),(0,i.kt)("p",null,"至此技术选型定下为使用预渲染方案实现 SSG。"),(0,i.kt)("h3",null,"预渲染方案实践"),(0,i.kt)("p",null,"create-react-doc 在预渲染方案实践的步骤简单概况如下(完整改动可见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc/pull/95/files"}),"mr"),"):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"改造 hash 路由为 history 路由。因为 history 路由结构与文档静态化目录结构天然匹配。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-diff"}),"export default function RouterRoot() {\n  return (\n-    <HashRouter>\n+    <BrowserRouter>\n      <RoutersContainer />\n-    </HashRouter>\n+    </BrowserRouter>\n  )\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"在开发环境、生成环境的基础上新增",(0,i.kt)("inlineCode",{parentName:"li"},"预渲染环境"),", 同时对路由进行环境匹配。其主要解决了",(0,i.kt)("inlineCode",{parentName:"li"},"资源文件"),"与",(0,i.kt)("inlineCode",{parentName:"li"},"主域名下的子路径"),"的对应关系。过程比较曲折, 感兴趣的同学可以见 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/chrisvfritz/prerender-spa-plugin/issues/215#issuecomment-415942268"}),"issue"),"。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-diff"}),"const ifProd = env === 'prod'\n+ const ifPrerender = window.__PRERENDER_INJECTED && window.__PRERENDER_INJECTED.prerender\n+ const ifAddPrefix = ifProd && !ifPrerender\n\n<Route\n  key={item.path}\n  exact\n-  path={item.path}\n+  path={ifAddPrefix ? `/${repo}${item.path}` : item.path}\n  render={() => { ... }}\n/>\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"兼容 prerender-spa-plugin 在 webpack 5 的使用。")),(0,i.kt)("p",null,"官方版本当前未支持 webpack 5, 详见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/chrisvfritz/prerender-spa-plugin/issues/414"}),"issue"),", 同时笔者存在对预渲染后执行回调的需求。因此当前 fork 了一份",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/create-react-doc/prerender-spa-plugin"}),"版本")," 出来, 解决了以上问题。"),(0,i.kt)("p",null,"经过上述步骤的实践, 终于在 SPA 站点中实现了",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/tree/gh-pages"}),"静态化路由"),"。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/bf01633af158d460ca2830ed640e07cb.jpg",alt:null}))),(0,i.kt)("h3",null,"SEO 优化附加 buff, 站点秒开?"),(0,i.kt)("p",null,"SEO 优化至此, 来看下站点优化前后 FP、FCP、LCP 等指标数据的变化。"),(0,i.kt)("p",null,"以 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://muyunyun.cn/blog"}),"blog")," 站点为例, 优化前后的指标数据如下(数据指标统计来自未使用梯子访问 gh-pages):"),(0,i.kt)("p",null,"优化前: 接入预渲染方案前, 首次绘制(FP、FCP) 的时间节点在 8s 左右, LCP 在 17s 左右。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/23d56cc42fd778c23d8ed80331334343.jpg",alt:null}))),(0,i.kt)("p",null,"优化后: 接入预渲染方案后, 首次绘制时间节点在 ",(0,i.kt)("inlineCode",{parentName:"p"},"1s")," 之内开始, LCP 在 1.5s 之内。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/9c551d29943c3d76700782374d86c37b.jpg",alt:null}))),(0,i.kt)("p",null,"对比优化前后: 首屏绘制速度提升了 ",(0,i.kt)("inlineCode",{parentName:"p"},"8")," 倍, 最大内容绘制速度提升 ",(0,i.kt)("inlineCode",{parentName:"p"},"11")," 倍。本想优化 SEO, 结果站点性能优化的方式又 get 了一个。"),(0,i.kt)("h3",null,"生成站点地图 Sitemap"),(0,i.kt)("p",null,"在完成预渲染实现站点路由静态化后, 距离 SEO 的目标又近了一步。暂且抛开 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/search/docs/beginner/seo-starter-guide"}),"SEO 优化细节"),", 单刀直入 SEO 核心腹地 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/search/docs/advanced/sitemaps/overview"}),"站点地图"),"。"),(0,i.kt)("p",null,"站点地图 Sitemap 格式与各字段含义简单说明如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-xml"}),'<?xml version="1.0" encoding="utf-8"?>\n<urlset>\n  \x3c!-- 必填标签, 这是具体某一个链接的定义入口，每一条数据都要用 <url> 和 </url> 包含在里面, 这是必须的 --\x3e\n  <url>\n    \x3c!-- 必填, URL 链接地址,长度不得超过 256 字节 --\x3e\n    <loc>http://www.yoursite.com/yoursite.html</loc>\n    \x3c!-- 可以不提交该标签, 用来指定该链接的最后更新时间 --\x3e\n    <lastmod>2021-03-06</lastmod>\n    \x3c!-- 可以不提交该标签, 用这个标签告诉此链接可能会出现的更新频率 --\x3e\n    <changefreq>daily</changefreq>\n    \x3c!-- 可以不提交该标签, 用来指定此链接相对于其他链接的优先权比值，此值定于 0.0-1.0 之间 --\x3e\n    <priority>0.8</priority>\n  </url>\n</urlset>\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"上述 sitemap 中, lastmod、changefreq、priority 字段对 SEO 没那么重要, 可以见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://ahrefs.com/blog/zh/how-to-create-a-sitemap/"}),"how-to-create-a-sitemap"))),(0,i.kt)("p",null,"根据上述结构, 笔者开发了 create-react-doc 的站点地图生成包 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc/tree/main/packages/crd-generator-sitemap"}),"crd-generator-sitemap"),", 其逻辑就是将预渲染的路由路径拼接成上述格式。"),(0,i.kt)("p",null,"使用方只需在站点根目录的 ",(0,i.kt)("inlineCode",{parentName:"p"},"config.yml")," 添加如下参数便可以在自动化发版过程中自动生成 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://muyunyun.cn/create-react-doc/sitemap.xml"}),"sitemap"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"seo:\n  google: true\n")),(0,i.kt)("p",null,"将生成的站点地图往 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://search.google.com/search-console/sitemaps"}),"Google Search Console")," 中提交试试吧,"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/97c21838a1e3310b3c1259e30ab85f3b.jpg",alt:null}))),(0,i.kt)("p",null,"最后验证下 Google 搜索",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.google.com/search?q=site%3Amuyunyun.cn%2Fcreate-react-doc&ie=UTF-8"}),"站点"),"优化前后效果。"),(0,i.kt)("p",null,"优化前: 只搜索到一条数据。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/aea3401e5a31587deb8d93a14f32b011.jpg",alt:null}))),(0,i.kt)("p",null,"优化后: 搜索到站点地图中声明的位置数据。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/6df1536366c7d45e0f6418af03a7d948.jpg",alt:null}))),(0,i.kt)("p",null,"至此使用 SSG 优化 SPA 站点实现 SEO 的完整流程完整实现了一遍。后续便剩下参照 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/search/docs/beginner/seo-starter-guide"}),"搜索引擎优化 (SEO) 新手指南")," 做一些 SEO 细节方面的优化以及支持更多搜索引擎了。"),(0,i.kt)("h3",null,"小结"),(0,i.kt)("p",null,"本文从 SPA 站点实现 SEO 作为切入点, 先后介绍了 SEO 的基本原理, SEO 在 SPA 站点中的 4 种实践案例, 并结合 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc"}),"create-react-doc")," SPA 框架进行完整的 SEO 实践。"),(0,i.kt)("p",null,"如果本文对您有所帮助, 欢迎 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc"}),"star"),"、",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc/issues/new"}),"反馈"),"。"),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/create-react-doc"}),"create-react-doc")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://ahrefs.com/blog/zh/why-is-my-website-not-showing-up-on-google/"}),"why-is-my-website-not-showing-up-on-google/")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/frontend-digest/a-technical-guide-to-seo-with-gatsby-js-e88a7dac80f0"}),"A Technical Guide to SEO With Gatsby.js")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.cn/post/6844903503362523143"}),"优化向：单页应用多路由预渲染指南")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/57375824"}),"除了 SSR，就没有别的办法了吗？")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://segmentfault.com/a/1190000023792497"}),"基于 SSR/SSG 的前端 SEO 优化"))),(0,i.kt)("h2",null,"translate"),(0,i.kt)("h2",null,"SEO practice in SPA site"),(0,i.kt)("h3",null,"Background"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c03d8772da6d57e47c55044aee364103.jpg",alt:null}))),(0,i.kt)("p",null,"Observe that ",(0,i.kt)("a",u({parentName:"p"},{href:"http://muyunyun.cn/create-react-doc/"}),"document site")," built based on ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc"}),"create-react-doc"),", I found the webpage code is bare(see the picture below). This is obviously a common problem of single-page application (SPA) sites. It is not conducive to be searched by search engines (SEO)."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0ba88a7544efe0e1978e6c8d8b7775a6.jpg",alt:null}))),(0,i.kt)("p",null,"Isn't it possible that SPA sites can't perform SEO, so what about frameworks such as ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/gatsbyjs/gatsby"}),"Gatsby"),", ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/nuxt/nuxt.js"}),"nuxt")," It can be used as the first choice for many bloggers to build blogs. What are the technical principles of such frameworks to empower SEO? Driven by curiosity, I start my journey of empowering SEO in ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc"}),"creat-react-doc"),"."),(0,i.kt)("h3",null,"Search Engine Optimization"),(0,i.kt)("p",null,"Before practice, let's analyze why single-page applications cannot be searched by search engines. The core is that ",(0,i.kt)("inlineCode",{parentName:"p"},"the crawler spider will not execute the JavaScript logic in the webpage during the crawling process"),", so ",(0,i.kt)("inlineCode",{parentName:"p"},"the jump logic hidden in the JavaScript will not be executed either"),"."),(0,i.kt)("p",null,"Check the packaged code of the current SPA site. Except for a root directory index.html, everything else is injected with JavaScript logic, so the browser will naturally not perform SEO on it."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0d15d4e3a62516da7c301e8f1c9228d6.jpg",alt:null}))),(0,i.kt)("p",null,"In addition, detailed search engine optimization is a more complicated subject. If you are new to SEO optimization, it is recommended to read ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/search/docs/beginner/seo-starter-guide"}),"Search Engine Optimization (SEO) Beginner's Guide")," article, given by Google Search Center. There are a comprehensive list of ",(0,i.kt)("strong",{parentName:"p"},"17")," best practices, and ",(0,i.kt)("strong",{parentName:"p"},"33")," practices that should be avoided."),(0,i.kt)("h3",null,"Practical case of SEO in SPA site"),(0,i.kt)("p",null,"In the context of the light document site, we do not consider the SSR scheme for the time being."),(0,i.kt)("p",null,"After investigating the SEO schemes of document sites on the market, the author summarizes the following four categories:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Static template rendering scheme"),(0,i.kt)("li",{parentName:"ul"},"404 redirection scheme"),(0,i.kt)("li",{parentName:"ul"},"SSG plan"),(0,i.kt)("li",{parentName:"ul"},"Pre-rendering scheme")),(0,i.kt)("h4",null,"Static template rendering scheme"),(0,i.kt)("p",null," ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/hexojs/hexo"}),"hexo")," is the most typical in the static template rendering scheme. Such frameworks need to specify a specific template language (such as ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/pugjs/pug"}),"pug"),") to develop themes, so as to achieve the purpose of direct output of web content."),(0,i.kt)("h4",null,"404 Redirection Scheme"),(0,i.kt)("p",null,"The principle of the 404 redirect solution is mainly to use the 404 mechanism of GitHub Pages for redirection. Typical cases are ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/rafgraph/spa-github-pages"}),"spa-github-pages"),", ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/csuwildcat/sghpa"}),"sghpa"),"."),(0,i.kt)("p",null,"But unfortunately, in 2019 Google ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/rafgraph/spa-github-pages#seo"}),"adjusted crawler algorithm"),", so this kind of redirection scheme is not conducive to SEO at the moment. The author of spa-github-pages also stated that if SEO is required, use the SSG plan or the paid plan ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.netlify.com/blog/2020/04/07/creating-better-more-predictable-redirect-rules-for-spas/"}),"Netlify"),"."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/bbb5ed8bce1e0c08dae94df98ff33262.jpg",alt:null}))),(0,i.kt)("h4",null,"SSG plan"),(0,i.kt)("p",null,"The full name of the SSG scheme is called ",(0,i.kt)("inlineCode",{parentName:"p"},"static site generator"),". In the community, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/nuxt/nuxt.js"}),"nuxt"),", ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/gatsbyjs/gatsby"}),"Gatsby")," and other framework-enabling SEO technologies can be classified without exception such SSG schemes."),(0,i.kt)("p",null,"Taking the nuxt framework as an example, based on the ",(0,i.kt)("inlineCode",{parentName:"p"},"conventional routing"),", it converts vue files into static web pages by executing the ",(0,i.kt)("inlineCode",{parentName:"p"},"nuxt generate")," command."),(0,i.kt)("p",null,"example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"-| pages/\n---| about.vue/\n---| index.vue/\n")),(0,i.kt)("p",null,"After being static, it becomes:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"-| dist/\n---| about/\n-----| index.html\n---| index.html\n")),(0,i.kt)("p",null,"After the routing is static, the document directory structure at this time can be hosted by any static site service provider."),(0,i.kt)("h4",null,"Pre-rendering scheme"),(0,i.kt)("p",null,"After the above analysis of the SSG scheme, at this time the key to optimization of the SPA site is already on paper —— ",(0,i.kt)("inlineCode",{parentName:"p"},"static routing"),". Compared with frameworks such as nuxt and Gatsby, which have the limitation of conventional routing, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc"}),"create-react-doc")," has flexible and free organization in the directory structure. Its website building concept is ",(0,i.kt)("inlineCode",{parentName:"p"},"File is Site"),", and it is also very convenient to migrate existing markdown documents."),(0,i.kt)("p",null,"Take ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog"}),"blog")," project structure as an example, the document structure is as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"-| BasicSkill/\n---| basic/\n-----| DOM.md\n-----| HTML5.md\n")),(0,i.kt)("p",null,"It should become:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"-| BasicSkill/\n---| basic/\n-----| DOM\n-------| index.html\n-----| HTML5\n-------| index.html\n")),(0,i.kt)("p",null,"After investigation, the idea and the ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/chrisvfritz/prerender-spa-plugin"}),"prerender-spa-plugin")," pre-rendering solution hit it off. The principle of the pre-rendering scheme can be seen in the following figure:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/f3eb18c162a31fb155fd9f4a364f7fb9.jpg",alt:null}))),(0,i.kt)("p",null,"So far, the technology selection is determined to use the pre-rendering scheme to achieve SSG."),(0,i.kt)("h3",null,"Pre-rendering program practice"),(0,i.kt)("p",null,"A brief overview of the steps of create-react-doc's practice in the pre-rendering solution is as follows (for complete changes, see ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc/pull/95/files"}),"mr"),"):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Transform hash routing to history routing. Because the history routing structure naturally matches the document static directory structure.")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-diff"}),"export default function RouterRoot() {\n  return (\n-<HashRouter>\n+ <BrowserRouter>\n      <RoutersContainer />\n-</HashRouter>\n+ </BrowserRouter>\n  )\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Added ",(0,i.kt)("inlineCode",{parentName:"li"},"pre-rendering environment")," on the basis of development environment and generation environment, and matched the routing environment at the same time. It mainly solves the correspondence between ",(0,i.kt)("inlineCode",{parentName:"li"},"resource files")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"sub-paths under the main domain name"),". The process is tortuous, and interested friends can see ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/chrisvfritz/prerender-spa-plugin/issues/215#issuecomment-415942268"}),"issue"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-diff"}),"const ifProd = env ==='prod'\n+ const ifPrerender = window.__PRERENDER_INJECTED && window.__PRERENDER_INJECTED.prerender\n+ const ifAddPrefix = ifProd && !ifPrerender\n\n<Route\n  key={item.path}\n  exact\n-path={item.path}\n+ path={ifAddPrefix? `/${repo}${item.path}`: item.path}\n  render={() => {... }}\n/>\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Compatible with the use of prerender-spa-plugin in webpack 5.")),(0,i.kt)("p",null,"The official version currently does not support webpack 5, see ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/chrisvfritz/prerender-spa-plugin/issues/414"}),"issue")," for details, and I have a need to execute callbacks after pre-rendering. Therefore, a copy of ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/create-react-doc/prerender-spa-plugin"}),"version")," is currently forked, which solves the above problems."),(0,i.kt)("p",null,"After the practice of the above steps, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/tree/gh-pages"}),"static routing")," is finally implemented in the SPA site."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/bf01633af158d460ca2830ed640e07cb.jpg",alt:null}))),(0,i.kt)("h3",null,"SEO optimization with additional buff, the site opens in seconds?"),(0,i.kt)("p",null,"SEO optimization so far, let's look at the changes in ",(0,i.kt)("inlineCode",{parentName:"p"},"FP"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"FCP"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"LCP")," and other indicator data before and after site optimization."),(0,i.kt)("p",null,"Taking the ",(0,i.kt)("a",u({parentName:"p"},{href:"https://muyunyun.cn/blog"}),"blog")," site as an example, the index data before and after optimization is as follows:"),(0,i.kt)("p",null,"Before optimization: Before accessing the pre-rendering scheme, the time node for the first drawing (FP, FCP) is about ",(0,i.kt)("inlineCode",{parentName:"p"},"8s"),", and the LCP is about 17s."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/23d56cc42fd778c23d8ed80331334343.jpg",alt:null}))),(0,i.kt)("p",null,"After optimization: After accessing the pre-rendering scheme, the first drawing time node starts within ",(0,i.kt)("inlineCode",{parentName:"p"},"1s"),", and the LCP is within 1.5s."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/9c551d29943c3d76700782374d86c37b.jpg",alt:null}))),(0,i.kt)("p",null,"Comparing the optimization between before and after: the first screen drawing speed has been increased by ",(0,i.kt)("inlineCode",{parentName:"p"},"8")," times, and the maximum content drawing speed has been increased by ",(0,i.kt)("inlineCode",{parentName:"p"},"11")," times. I wanted to optimize SEO, but I got another way to optimize site performance."),(0,i.kt)("h3",null,"Generate Sitemap Sitemap"),(0,i.kt)("p",null,"After finishing the pre-rendering and realizing the static routing of the site, it is one step closer to the goal of SEO. Putting aside ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/search/docs/beginner/seo-starter-guide"}),"SEO optimization details")," for the time being, go straight to the core hinterland of SEO ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/search/docs/advanced/sitemaps/overview"}),"site map"),"."),(0,i.kt)("p",null,"The format of Sitemap and the meaning of each field are briefly explained as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-xml"}),'<?xml version="1.0" encoding="utf-8"?>\n<urlset>\n  \x3c!-- Required tag, this is the definition entry of a specific link, each piece of data must be included with <url> and </url>, this is required --\x3e\n  <url>\n    \x3c!-- Required, URL link address, length must not exceed 256 bytes --\x3e\n    <loc>http://www.yoursite.com/yoursite.html</loc>\n    \x3c!-- You don\'t need to submit the tag, which is used to specify the last update time of the link --\x3e\n    <lastmod>2021-03-06</lastmod>\n    \x3c!-- You don\'t need to submit the tag, use this tag to tell the update frequency of this link --\x3e\n    <changefreq>daily</changefreq>\n    \x3c!-- You don’t need to submit the tag, which is used to specify the priority ratio of this link to other links. This value is set between 0.0-1.0 --\x3e\n    <priority>0.8</priority>\n  </url>\n</urlset>\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"In the above sitemap, the lastmod, changefreq, and priority fields are not so important for SEO, see ","[how-to-create-a-sitemap]","(",(0,i.kt)("a",u({parentName:"p"},{href:"https://ahrefs.com/blog/zh/how-to-create-a"}),"https://ahrefs.com/blog/zh/how-to-create-a")," -sitemap/)")),(0,i.kt)("p",null,"According to the above structure, I developed the sitemap generation package ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc/tree/main/packages/crd-generator-sitemap"}),"crd-generator-sitemap"),", the logic is to splice the pre-rendered routing path into the above format."),(0,i.kt)("p",null,"The user only needs to add the following parameters in the site root directory ",(0,i.kt)("inlineCode",{parentName:"p"},"config.yml")," to automatically generate ",(0,i.kt)("a",u({parentName:"p"},{href:"http://muyunyun.cn/create-react-doc/sitemap.xml"}),"sitemap")," during the automatic release process."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"seo:\n  google: true\n")),(0,i.kt)("p",null,"Submit the generated sitemap to ",(0,i.kt)("a",u({parentName:"p"},{href:"https://search.google.com/search-console/sitemaps"}),"Google Search Console")," for a try,"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/97c21838a1e3310b3c1259e30ab85f3b.jpg",alt:null}))),(0,i.kt)("p",null,"Finally, verify the before and after optimization of Google search ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.google.com/search?q=site%3Amuyunyun.cn%2Fcreate-react-doc&ie=UTF-8"}),"site"),"."),(0,i.kt)("p",null,"Before optimization: Only one piece of data is found."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/aea3401e5a31587deb8d93a14f32b011.jpg",alt:null}))),(0,i.kt)("p",null,"After optimization: Search the location data declared in the site map."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/6df1536366c7d45e0f6418af03a7d948.jpg",alt:null}))),(0,i.kt)("p",null,"So far, the complete process of using SSG to optimize SPA sites to achieve SEO has been fully realized. Follow-up is left to refer to the ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/search/docs/beginner/seo-starter-guide"}),"Search Engine Optimization (SEO) Beginner's Guide")," to optimize some SEO details and support more searches The engine is up."),(0,i.kt)("h3",null,"Summary"),(0,i.kt)("p",null,"This article starts with the realization of SEO on the SPA site, and successively introduces the basic principles of SEO, four practical cases of SEO in the SPA site, combined with ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc"}),"create-react-doc")," SPA framework for complete SEO practice."),(0,i.kt)("p",null,"If this article is helpful to you, welcome ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc"}),"star"),", ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc/issues/new"}),"feedback"),"."),(0,i.kt)("h3",null,"Related Links"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/create-react-doc"}),"create-react-doc")),(0,i.kt)("li",{parentName:"ul"},"[why-is-my-website-not-showing-up-on-google/]","(",(0,i.kt)("a",u({parentName:"li"},{href:"https://ahrefs.com/blog/zh/why-is-my-website-not-showing-up-on-"}),"https://ahrefs.com/blog/zh/why-is-my-website-not-showing-up-on-")," google/)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/frontend-digest/a-technical-guide-to-seo-with-gatsby-js-e88a7dac80f0"}),"A Technical Guide to SEO With Gatsby.js"))))}c.isMDXComponent=!0},42406:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"resolve.mainFields"),(0,i.kt)("p",null,"在引用模块时，指明使用 package.json 中哪个字段指定的文件，默认是 main"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'resolve: {\n  // 配置 target === "web" 或者 target === "webworker" 时 mainFields 默认值是：\n  mainFields: [\'browser\', \'module\', \'main\'],\n\n  // target 的值为其他时，mainFields 默认值为：\n  mainFields: ["module", "main"],\n}\n')),(0,i.kt)("p",null,"通常情况下，模块的 package 都不会声明 ",(0,i.kt)("inlineCode",{parentName:"p"},"browser")," 或 ",(0,i.kt)("inlineCode",{parentName:"p"},"module")," 字段，所以便是使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"main")," 了。"))}c.isMDXComponent=!0},44946:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"TC39"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tc39/ecma262/blob/master/FAQ.md#what-is-a-tc39"}),"TC39(Technical Committee 39)")," is a committee that evolves JavaScript."),(0,i.kt)("h3",null,"Who is TC39"),(0,i.kt)("p",null,"Its members are JavaScript engines、Frameworks、Academics、Major website/app platforms, now are there some Chinese companies!"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/fad16aa0b62ed374b19ee51cb31284b7.jpg",alt:null}))),(0,i.kt)("p",null,"Every two months, TC39 has meeting. The minutes of those meetings are public in ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tc39/notes"}),"github")),(0,i.kt)("h3",null,"The TC39 process"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/530e6f1b42d0e6dad4aa9e9682978137.jpg",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Stage 1: An idea under discussion;"),(0,i.kt)("li",{parentName:"ul"},"Stage 2: We want to do that and we have a draft;"),(0,i.kt)("li",{parentName:"ul"},"Stage 3: We have a final draft and ready to go;"),(0,i.kt)("li",{parentName:"ul"},"Stage 4: 2+ implementation, Test262 => standard;")),(0,i.kt)("p",null,"ES2016 was the first ECMAScript version that was designed according to the TC39 process."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://2ality.com/2015/11/tc39-process.html"}),"tc39-process"),": this article introduces the conditions of each stages should achieve.")),(0,i.kt)("h3",null,"Finished Proposals(stage 4)"),(0,i.kt)("p",null,"Once a feature is reached to stage4, it runs all test case in ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tc39/test262/blob/master/INTERPRETING.md"}),"Test262"),", so you can use it safely. But even then, you should still check if the device environment you use supports it. You can see all the ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tc39/proposals/blob/master/finished-proposals.md"}),"finished feature")," and ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tc39/proposals"}),"other proposals")," in the official list."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"BigInt"),(0,i.kt)("li",{parentName:"ul"},"Dynamic import()"),(0,i.kt)("li",{parentName:"ul"},"Optional chaining"),(0,i.kt)("li",{parentName:"ul"},"Nullish coalescing"),(0,i.kt)("li",{parentName:"ul"},"globalThis"),(0,i.kt)("li",{parentName:"ul"},"...")),(0,i.kt)("h3",null,"BigInt"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const expected = 4n / 2n;\n// ↪ 2n\n\nconst rounded = 5n / 2n;\n// ↪ 2n, not 2.5n\n")),(0,i.kt)("p",null,"The / operator also work as expected with whole numbers. However, since these are BigInts and not BigDecimals, this operation will round towards 0, which is to say, it will not return any fractional digits."),(0,i.kt)("h4",null,"Polyfilling and transpiling BigInts"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Unlike most other modern JavaScript features, BigInts cannot reasonably be transpiled down to ES5.")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"The BigInt proposal changes the behavior of operators (like +, >=, etc.) to work on BigInts. These changes are impossible to polyfill directly, and they are also making it infeasible (in most cases) to transpile BigInt code to fallback code using Babel or similar tools. The reason is that such a transpilation would have to replace every single operator in the program with a call to some function that performs type checks on its inputs, which would incur an unacceptable run-time performance penalty. In addition, it would greatly increase the file size of any transpiled bundle, negatively impacting download, parse, and compile times.")),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/tc39/proposals"}),"proposals")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://exploringjs.com/impatient-js/ch_history.html#tc39"}),"History and evolution of JavaScript")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://2ality.com/2019/12/ecmascript-2020.html"}),"Feature watch: ECMAScript 2020")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://docs.google.com/presentation/d/1apPbAiv_-mJF35P31IjaII8UA6TwSynCA_zhfDEmgOE/edit#slide=id.p"}),"BigInts in JavaScript:A case study in TC39"))))}c.isMDXComponent=!0},89376:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"W3C"),(0,i.kt)("p",null,"Some CSS guideness can be found there."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/w3c/csswg-drafts"}),"w3c"))))}c.isMDXComponent=!0},96250:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"webkit"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://webkit.org/"}),"WebKit"),": 如何下载、编译 webkit",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/WebKit/webkit"}),"github")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"www.chromium.org"}),"Chromium"))),(0,i.kt)("h3",null,"webkit 架构"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/93c9dbe4d56eb2c5f3be2a14e265ca2b.jpg-muyy",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"JavaScript 引擎: Google 的 Chromium 中, 它被替换为 V8 引擎。")),(0,i.kt)("h3",null,"webkit 目录"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"LayoutTests"),(0,i.kt)("li",{parentName:"ul"},"PerformanceTests"),(0,i.kt)("li",{parentName:"ul"},"Source",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"JavaScriptCore // Webkit 默认的的 JavaScript 引擎"),(0,i.kt)("li",{parentName:"ul"},"Platform"),(0,i.kt)("li",{parentName:"ul"},"WebCore",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"css         // css 解释器"),(0,i.kt)("li",{parentName:"ul"},"dom         // DOM 节点的基础类及树结构"),(0,i.kt)("li",{parentName:"ul"},"html        // HTML 解释器和 DOM 节点"),(0,i.kt)("li",{parentName:"ul"},"inspector   // Web Inspector 的实现"),(0,i.kt)("li",{parentName:"ul"},"loader      // 资源加载器、缓存等"),(0,i.kt)("li",{parentName:"ul"},"page        // 与页面相关的全局对象的实现, 包括 window、navigator 等 DOM 对象, 事件, 动画处理"),(0,i.kt)("li",{parentName:"ul"},"platform    // 各个移植的代码"),(0,i.kt)("li",{parentName:"ul"},"storage     // 存储的共享代码"))),(0,i.kt)("li",{parentName:"ul"},"WebKit        // 绑定和嵌入式接口层)"),(0,i.kt)("li",{parentName:"ul"},"Webkit2       // 绑定和嵌入式接口层)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"efl             // efl 的主函数, 构建一个简单的浏览器, 还有其它移植的代码"),(0,i.kt)("li",{parentName:"ul"},"NetworkProcess  // 网络进程相关代码"),(0,i.kt)("li",{parentName:"ul"},"UIProcess       // UI 进程相关代码"),(0,i.kt)("li",{parentName:"ul"},"WebProcess      // Web 进程相关代码"))),(0,i.kt)("li",{parentName:"ul"},"WTF       // 智能类库。字符串操作、各种容器、指针、线程、算法等"))),(0,i.kt)("li",{parentName:"ul"},"Tools")),(0,i.kt)("h3",null,"Chromium 多进程模型"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/af3e700cca1056b8796667751e27e7ec.jpg-muyy",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Browser 进程"),": 浏览器的主进程, 是其它类型进程的祖先, 负责它们的创建和销毁。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Renderer 进程"),": 网页的渲染进程。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"NPAPI 插件进程"),"。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GPU 进程"),": 对 3D 图形加速调用的实现。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Pepper 插件进程"),"。")),(0,i.kt)("p",null,"每个进程内部有多个线程。"),(0,i.kt)("p",null,"read page 56"))}c.isMDXComponent=!0},4676:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Usage"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"yarn add xx -D\n")),(0,i.kt)("p",null,"在本地开发一个独立的包, 可以通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn link")," 进行链接开发。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"yarn link 的包同时会注入到 node_modules 中")),(0,i.kt)("h3",null,"配置 yarn 全局路径"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"yarn global dir")," 得到 ",(0,i.kt)("inlineCode",{parentName:"li"},"/Users/mac/.config/yarn/global"))),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"这个路径也是 yarn 全局包安装的文件目录"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("ol",u({parentName:"li"},{start:2}),(0,i.kt)("li",{parentName:"ol"},"vim .zshrc")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2.1 加上 export NODE_PATH=/Users/mac/.config/yarn/global/node_modules/"))),(0,i.kt)("li",{parentName:"ul"},"yarn add puppeteer -g")),(0,i.kt)("h3",null,"bin"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"yarn global bin // find yarn global bin path\nnpm bin -g      // find npm global bin path\n")),(0,i.kt)("p",null,"yarn link xx, 就是将 bin 的命令挂载到 global 上。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"yarn link xx\n")),(0,i.kt)("h3",null,"remove"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"yarn remove xx\n")))}c.isMDXComponent=!0},30822:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"如何维护一个开源项目"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://keepachangelog.com/en/1.0.0/"}),"keep a changelog")),(0,i.kt)("h3",null,"todoList"),(0,i.kt)("p",null,"目标"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"用户组成结构",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"使用: 5/6",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"代码质量（稳定性 + 扩展性）",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"内部服务于多少项目（几十~上百个）"),(0,i.kt)("li",{parentName:"ul"},"单测等"),(0,i.kt)("li",{parentName:"ul"},"设计模式：公共样式变量、api 等一致（不会参差不齐）"))),(0,i.kt)("li",{parentName:"ul"},"文档等",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"完善 mobile 组件在 pc 端站点的浏览效果;"),(0,i.kt)("li",{parentName:"ul"},"beast-mobile 语言包支持、为后续站点切换双语环境做准备;"))),(0,i.kt)("li",{parentName:"ul"},"支持（support）"),(0,i.kt)("li",{parentName:"ul"},"亮点"))),(0,i.kt)("li",{parentName:"ul"},"会去研究源码：1/6 —— 源码的高级性")))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"站点的",(0,i.kt)("inlineCode",{parentName:"li"},"布局"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"文案"),"(组件交互)")),(0,i.kt)("h3",null,"plan && todolist"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"完善 mobile 组件在 pc 端站点的浏览效果;"),(0,i.kt)("li",{parentName:"ul"},"beast-mobile 语言包支持、为后续站点切换双语环境做准备;"),(0,i.kt)("li",{parentName:"ul"},"beast-mobile 中、英文文章简版输出, 调研专栏环境社区的创建(Medium、Twitter、知乎、Github、StackOverflow、SegmentFault);"),(0,i.kt)("li",{parentName:"ul"},"两条腿走路, 并行;")))}c.isMDXComponent=!0},62121:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"CSS 隔离"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},".mmsorder h1 如何影响: 提高了样式优先级, 可能照成影响;")),(0,i.kt)("p",null,"解决方式: 动态插入、删除"),(0,i.kt)("h3",null,"JavaScript 隔离"))}c.isMDXComponent=!0},2992:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"webpack 可谓是让人欣喜又让人忧, 功能强大但需要一定的学习成本。在探寻 webpack 插件机制前, 首先需要了解一件有意思的事情, webpack 插件机制是整个 webpack 工具的骨架, 而 webpack 本身也是利用这套插件机制构建出来的。因此在深入认识 webpack 插件机制后, 再来进行项目的相关优化, 想必会大有裨益。"),(0,i.kt)("h3",null,"webpack 插件"),(0,i.kt)("p",null,"先来瞅瞅 webpack 插件在项目中的运用"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const MyPlugin = require('myplugin')\nconst webpack = require('webpack')\n\nwebpack({\n  ...,\n  plugins: [new MyPlugin()]\n  ...,\n})\n")),(0,i.kt)("p",null,"那么符合什么样的条件能作为 webpack 插件呢？一般来说, webpack 插件有以下特点:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"独立的 JS 模块, 暴露相应的函数")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"函数原型上的 apply 方法会注入 compiler 对象")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"compiler 对象上挂载了相应的 webpack 事件钩子")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"事件钩子的回调函数里能拿到编译后的 compilation 对象, 如果是异步钩子还能拿到相应的 callback"))),(0,i.kt)("p",null,"下面结合代码来看看:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function MyPlugin(options) {}\n// 2.函数原型上的 apply 方法会注入 compiler 对象\nMyPlugin.prototype.apply = function(compiler) {\n  // 3.compiler 对象上挂载了相应的 webpack 事件钩子 4.事件钩子的回调函数里能拿到编译后的 compilation 对象\n  compiler.plugin('emit', (compilation, callback) => {\n    ...\n  })\n}\n// 1.独立的 JS 模块, 暴露相应的函数\nmodule.exports = MyPlugin\n")),(0,i.kt)("p",null,"这样子, webpack 插件的基本轮廓就勾勒出来了, 此时疑问点有几点,"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"疑问 1: 函数的原型上为什么要定义 apply 方法？阅读",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/webpack/webpack/blob/10282ea20648b465caec6448849f24fc34e1ba3e/lib/webpack.js#L35"}),"源码"),"后发现源码中是通过 ",(0,i.kt)("inlineCode",{parentName:"li"},"plugin.apply()")," 调用插件的。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const webpack = (options, callback) => {\n  ...\n  for (const plugin of options.plugins) {\n    plugin.apply(compiler);\n  }\n  ...\n}\n")),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"疑问 2: compiler 对象是什么呢？")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"疑问 3: compiler 对象上的事件钩子是怎样的？")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"疑问 4: 事件钩子的回调函数里能拿到的 compilation 对象又是什么呢？"))),(0,i.kt)("p",null,"这些疑问也是本文的线索, 让我们一个个探索。"),(0,i.kt)("h3",null,"compiler 对象"),(0,i.kt)("p",null,"compiler 即 webpack 的编辑器对象, 在调用 webpack 时, 会自动初始化 compiler 对象, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/webpack/webpack/blob/10282ea20648b465caec6448849f24fc34e1ba3e/lib/webpack.js#L30"}),"源码"),"如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'// webpack/lib/webpack.js\nconst Compiler = require("./Compiler")\n\nconst webpack = (options, callback) => {\n  ...\n  options = new WebpackOptionsDefaulter().process(options) // 初始化 webpack 各配置参数\n  let compiler = new Compiler(options.context)             // 初始化 compiler 对象, 这里 options.context 为 process.cwd()\n  compiler.options = options                               // 往 compiler 添加初始化参数\n  new NodeEnvironmentPlugin().apply(compiler)              // 往 compiler 添加 Node 环境相关方法\n  for (const plugin of options.plugins) {\n    plugin.apply(compiler);\n  }\n  ...\n}\n')),(0,i.kt)("p",null,"终上, compiler 对象中包含了所有 webpack 可配置的内容, 开发插件时, 我们可以从 compiler 对象中拿到所有和 webpack 主环境相关的内容。"),(0,i.kt)("h3",null,"compilation 对象"),(0,i.kt)("p",null,"compilation 对象代表了一次单一的版本构建和生成资源。当运行 webpack 时, 每当检测到一个文件变化, 一次新的编译将被创建, 从而生成一组新的编译资源。一个编译对象表现了当前的模块资源、编译生成资源、变化的文件、以及被跟踪依赖的状态信息。"),(0,i.kt)("p",null,"结合源码来理解下上面这段话, 首先 webpack 在每次执行时会调用 ",(0,i.kt)("inlineCode",{parentName:"p"},"compiler.run()")," ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/webpack/webpack/blob/e7c8fa414b718ac98d94a96e2553faceabfbc92f/lib/webpack.js#L58"}),"(源码位置)"),", 接着追踪 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/webpack/webpack/blob/3a5fda909f2ecf911c73429cb4770948dbd31d24/lib/Compiler.js#L163"}),"onCompiled 函数"),"传入的 compilation 参数, 可以发现 compilation 来自构造函数 Compilation。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'// webpack/lib/Compiler.js\nconst Compilation = require("./Compilation");\n\nnewCompilation(params) {\n  const compilation = new Compilation(this);\n  ...\n  return compilation;\n}\n')),(0,i.kt)("h3",null,"不得不提的 tapable 库"),(0,i.kt)("p",null,"再介绍完 compiler 对象和 compilation 对象后, 不得不提的是 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/webpack/tapable"}),"tapable")," 这个库, 这个库暴露了所有和事件相关的 pub/sub 的方法。而且函数 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/webpack/webpack/blob/e7c8fa414b718ac98d94a96e2553faceabfbc92f/lib/Compiler.js#L29"}),"Compiler")," 以及函数 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/webpack/webpack/blob/e7c8fa414b718ac98d94a96e2553faceabfbc92f/lib/Compilation.js#L98"}),"Compilation")," 都继承自 Tapable。"),(0,i.kt)("h3",null,"事件钩子"),(0,i.kt)("p",null,"事件钩子其实就是类似 MVVM 框架的生命周期函数, 在特定阶段能做特殊的逻辑处理。了解一些常见的事件钩子是写 webpack 插件的前置条件, 下面列举些常见的事件钩子以及作用:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"钩子"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"作用"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"参数"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"类型"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"after-plugins"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"设置完一组初始化插件之后"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"compiler"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"sync")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"after-resolvers"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"设置完 resolvers 之后"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"compiler"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"sync")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"run"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"在读取记录之前"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"compiler"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"async")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"compile"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"在创建新 compilation 之前"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"compilationParams"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"sync")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"compilation"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"compilation 创建完成"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"compilation"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"sync")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"emit"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"在生成资源并输出到目录之前"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"compilation"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"async")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"after-emit"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"在生成资源并输出到目录之后"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"compilation"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"async")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"done"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"完成编译"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"stats"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"sync")))),(0,i.kt)("p",null,"完整地请参阅",(0,i.kt)("a",u({parentName:"p"},{href:"https://doc.webpack-china.org/api/compiler/#%E4%BA%8B%E4%BB%B6%E9%92%A9%E5%AD%90"}),"官方文档手册"),", 同时浏览",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/webpack/webpack/blob/eca7bad8de54c39b9cb8b138793362b8a17ac11b/lib/Compiler.js#L32"}),"相关源码")," 也能比较清晰地看到各个事件钩子的定义。"),(0,i.kt)("h3",null,"插件流程浅析"),(0,i.kt)("p",null,"拿 emit 钩子为例, 下面分析下插件调用源码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"compiler.plugin('emit', (compilation, callback) => {\n  // 在生成资源并输出到目录之前完成某些逻辑\n})\n")),(0,i.kt)("p",null,"此处调用的 plugin 函数源自上文提到的 tapable 库, 其最终调用栈指向了 hook.tapAsync(), 其作用类似于 EventEmitter 的 on, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/webpack/tapable/blob/42b520760e138c23e7808881cb4322557e878307/lib/Tapable.js#L35"}),"源码"),"如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'// Tapable.js\noptions => {\n  ...\n  if(hook !== undefined) {\n    const tapOpt = {\n      name: options.fn.name || "unnamed compat plugin",\n      stage: options.stage || 0\n    };\n    if(options.async)\n      hook.tapAsync(tapOpt, options.fn); // 将插件中异步钩子的回调函数注入\n    else\n      hook.tap(tapOpt, options.fn);\n    return true;\n  }\n};\n')),(0,i.kt)("p",null,"有注入必有触发的地方, 源码中通过 callAsync 方法触发之前注入的异步事件, callAsync 类似 EventEmitter 的 emit, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/webpack/webpack/blob/e7c8fa414b718ac98d94a96e2553faceabfbc92f/lib/Compiler.js#L307"}),"相关源码"),"如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"this.hooks.emit.callAsync(compilation, err => {\n    if (err) return callback(err);\n    outputPath = compilation.getPath(this.outputPath);\n    this.outputFileSystem.mkdirp(outputPath, emitFiles);\n});\n")),(0,i.kt)("p",null,"一些深入细节这里就不展开了, 说下关于阅读比较大型项目的源码的两点体会,"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"要抓住一条主线索去读, 忽视细节。否则会浪费很多时间而且会有挫败感；")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"结合调试工具来分析, 很多点不用调试工具的话很容易顾此失彼；"))),(0,i.kt)("h3",null,"动手实现个 webpack 插件"),(0,i.kt)("p",null,"结合上述知识点的分析, 不难写出自己的 webpack 插件, 关键在于想法。为了统计项目中 webpack 各包的有效使用情况, 在 fork ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/chrisbateman/webpack-visualizer"}),"webpack-visualizer")," 的基础上对代码升级了一番, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/analyze-webpack-plugin"}),"项目地址"),"。效果如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/329ec042a73aecd0a1947bdcc1f0dcb4.jpg-400",alt:null}))),(0,i.kt)("p",null,"插件核心代码正是基于上文提到的 emit 钩子, 以及 compiler 和 compilation 对象。代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'class AnalyzeWebpackPlugin {\n  constructor(opts = { filename: \'analyze.html\' }) {\n    this.opts = opts\n  }\n\n  apply(compiler) {\n    const self = this\n    compiler.plugin("emit", function (compilation, callback) {\n      let stats = compilation.getStats().toJson({ chunkModules: true }) // 获取各个模块的状态\n      let stringifiedStats = JSON.stringify(stats)\n      // 服务端渲染\n      let html = `<!doctype html>\n          <meta charset="UTF-8">\n          <title>AnalyzeWebpackPlugin</title>\n          <style>${cssString}</style>\n          <div id="App"></div>\n          <script>window.stats = ${stringifiedStats};<\/script>\n          <script>${jsString}<\/script>\n      `\n      compilation.assets[`${self.opts.filename}`] = { // 生成文件路径\n        source: () => html,\n        size: () => html.length\n      }\n      callback()\n    })\n  }\n}\n')),(0,i.kt)("h3",null,"参考资料"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://zoumiaojiang.com/article/what-is-real-webpack-plugin/#compiler"}),"看清楚真正的 Webpack 插件\n")),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://doc.webpack-china.org/"}),"webpack 官网")))}c.isMDXComponent=!0},82072:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"搭建一个企业级脚手架"),(0,i.kt)("h3",null,"脚手架的三个组成部分"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"全局命令包, 提供 ",(0,i.kt)("inlineCode",{parentName:"li"},"install"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"init"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"start"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"build")," 等命令; ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/imaoda/cli-tpl"}),"cli-tpl")),(0,i.kt)("li",{parentName:"ul"},"模板插件包(单独抽离可以做到同步最新包到业务); ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/imaoda/gen-tpl"}),"gen-tpl")),(0,i.kt)("li",{parentName:"ul"},"构建插件包(webpack 的配置, 单独配置及做到了可单独暴露给用户的功能); ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/imaoda/build-tpl"}),"build-tpl"))),(0,i.kt)("h3",null,"探索"),(0,i.kt)("p",null,"能否分为两部分?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"命令构建包: 全局命令包 + 构建插件包"),(0,i.kt)("li",{parentName:"ul"},"模板插件包")),(0,i.kt)("h3",null,"相关资料"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.im/post/5d650613f265da03951a0364#comment"}),"搭一个企业级脚手架"),": 着重推荐这篇文章, 后续脚手架可以按照这篇文章的思路来;")))}c.isMDXComponent=!0},81712:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"这篇文章梳理一些方法论"),(0,i.kt)("h3",null,"既要又要还要"),(0,i.kt)("p",null,"既要学习, 又要实践, 还要总结。"),(0,i.kt)("h3",null,"medium"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium-unlimited.ml/download/"}),"medium unliited"),": medium 文章阅读不设上限的插件")),(0,i.kt)("h3",null,"SWOT 分析"),(0,i.kt)("p",null,"S(strength)、W(weakness)、O(opportunity)、T(threat)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"工作中真实 case, 适不适合买菜业务:")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5db89f1e0de373c0b2f6cce0df141cc0.jpg",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"把一件事情放到极致去推演",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"来源客服轮岗, 这笔应该商家、消费者承担。")))),(0,i.kt)("h3",null,"谁来做"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"背景: 组件库大版本升级。是组件库同学负责升级给业务方升级还是业务方自行升级呢?"),(0,i.kt)("li",{parentName:"ul"},"方法论: 哪一方的依赖性越高谁来负责。"),(0,i.kt)("li",{parentName:"ul"},"结论: 组件库同学帮升级。")))}c.isMDXComponent=!0},30800:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"用户体验指标"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"en"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"full name"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"mean"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"explain"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"FP"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"First Content Paint"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"首屏绘制"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"FCP"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"First Contentful Paint"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"首次内容渲染"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"FMP"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"First Meaningful Paint"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"最大内容渲染"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"TTL"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Time to Interactive"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"首次可交互时间"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"FID"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"First Input Delay"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"首次输入延迟"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"TBT"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Total Block Time"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"阻塞总时间"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"SI"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Speed Index"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"内容展现速度"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"CLS"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Cumulative Layout Shift"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"累计布局偏移"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"经常会照成用户预期不同的效果, 比如点击取消应为偏移变为点击确认")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"LCP"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Largest Content Paint"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"最大内容绘制"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"CLS"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Cumulative Layout Paint"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"布局偏移总量"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/23148c1025c99dba4663798380c0b58b.jpg",alt:"指标案例"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[][to read]","(",(0,i.kt)("a",u({parentName:"li"},{href:"https://mp.weixin.qq.com/s/ESOHtwz3jCEybAN196R-rg"}),"https://mp.weixin.qq.com/s/ESOHtwz3jCEybAN196R-rg"),")")),(0,i.kt)("h3",null,"工具链"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"LightHouse",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"LightHouse CI",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"测试组件?"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://search.google.com/search-console/about"}),"Chrome Search Console")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"web.dev"}),"web.dev"),": 持续地了解网页的性能")),(0,i.kt)("h3",null,"设计侧"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"一致性",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"产品内部的导航方式"),(0,i.kt)("li",{parentName:"ul"},"类似元素的视觉呈现"),(0,i.kt)("li",{parentName:"ul"},"操作行为的交互准则"))),(0,i.kt)("li",{parentName:"ul"},"易用性",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"操作简单易学"),(0,i.kt)("li",{parentName:"ul"},"提示和帮助容易理解"),(0,i.kt)("li",{parentName:"ul"},"界面设计清楚明了")))))}c.isMDXComponent=!0},52920:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"编译器"),(0,i.kt)("p",null,"编译器(compiler)的几个步骤"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"词法分析(lexical analyze): 将程序代码拆分成若干个词;"),(0,i.kt)("li",{parentName:"ul"},"语法分析(syntax analyze): 生成 AST 树;"),(0,i.kt)("li",{parentName:"ul"},"语义分析(semantic analyze): 给 AST 树添加语义注释, 并生成 Symbol Table(判断是否有重复的命名空间等);"),(0,i.kt)("li",{parentName:"ul"},"优化: 合并一些语句;"),(0,i.kt)("li",{parentName:"ul"},"代码生成: 转换为低层级的语言;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"解释器和编译器步骤大体相同, 只是解释器不会将代码转换为低层级语言执行。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://medium.com/hackernoon/compilers-and-interpreters-3e354a2e41cf"}),"Compilers and Interpreters"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[ ][Lexical Analysis]","(",(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/hackernoon/lexical-analysis-861b8bfe4cb0"}),"https://medium.com/hackernoon/lexical-analysis-861b8bfe4cb0"),"): 当前阅读到 Putting it all together, 后续如果要写词法解析器的需求可以结合这篇文章进行实践。")))}c.isMDXComponent=!0},608:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"主题：如何在 web 端实现直播播放器"),(0,i.kt)("h3",null,"协议类型"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"RMTP(Real Time Message Protocal): based TCP; ❎"),(0,i.kt)("li",{parentName:"ul"},"FLV: 格式, ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/bilibili/flv.js"}),"bilibili/flv.js"),": 利用 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/Media_Source_Extensions_API"}),"Media Source Extensions(MSE) API")," ✅(web)"),(0,i.kt)("li",{parentName:"ul"},"HLS(HTTP Live Streaming): based HTTP, mentioned by Apple Inc. JavaScript Library eg: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/video-dev/hls.js"}),"hls.js"),"✅(mobile)")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://www.jianshu.com/p/32417d8ee5b6"}),"直播协议入门"))))}c.isMDXComponent=!0},59307:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"跨端的思考🤔"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"重 UI 还是重逻辑",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"逻辑跨端",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"逻辑复用"))),(0,i.kt)("li",{parentName:"ul"},"UI 跨端")))),(0,i.kt)("h3",null,"阶段"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Hybrid 阶段"),(0,i.kt)("li",{parentName:"ul"},"React Native"),(0,i.kt)("li",{parentName:"ul"},"小程序阶段"),(0,i.kt)("li",{parentName:"ul"},"Flutter")))}c.isMDXComponent=!0},16708:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Title"),(0,i.kt)("p",null,"给定一个整数数组 nums 和一个目标值 target，请你在该数组中找出和为目标值的那两个整数，并返回他们的数组下标。"),(0,i.kt)("p",null,"你可以假设每种输入只会",(0,i.kt)("inlineCode",{parentName:"p"},"对应一个答案"),"。但是，你不能重复利用这个数组中同样的元素。"),(0,i.kt)("p",null,"示例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"给定 nums = [2, 7, 11, 15], target = 9\n")),(0,i.kt)("p",null,"因为 nums","[0]"," + nums","[1]"," = 2 + 7 = 9\n所以返回 ","[0, 1]"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"题解 1: 暴力法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var twoSum = function(nums, target) {\n  var length = nums.length\n  for (var x = 0; x < length; x++) {\n    for (var y = x + 1; y < length; y++) {\n      if (nums[x] + nums[y] === target) {\n        var arr = []\n        arr.push(x)\n        arr.push(y)\n        return arr\n      }\n    }\n  }\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"时间复杂度: O(n^2)"),(0,i.kt)("li",{parentName:"ul"},"空间复杂度: O(1)")),(0,i.kt)("p",null,"题解 2-1: 哈希表"),(0,i.kt)("p",null,"思路:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"需要留意的是, 如果数组中有重复的值比如 ","[5, 5]",", target = 10 这种情况的处理")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"遍历一次数组, 查询当前",(0,i.kt)("inlineCode",{parentName:"li"},"哈希表"),"中是否有和当前索引值 ",(0,i.kt)("inlineCode",{parentName:"li"},"nums[i]")," 对应的匹配值 ",(0,i.kt)("inlineCode",{parentName:"li"},"target - nums[i]"),";",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"若有, 则返回它们两个值的索引;"),(0,i.kt)("li",{parentName:"ul"},"若没有, 则将当前索引值和下标存入哈希表中;")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var twoSum = function(nums, target) {\n  let numsObj = {}\n  for (let i = 0; i < nums.length; i++) {\n    let current = nums[i]\n    let match = target - current\n    if (match in numsObj) {\n      return [i, numsObj[match]]\n    }\n    numsObj[current] = i\n  }\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"时间复杂度: O(n)"),(0,i.kt)("li",{parentName:"ul"},"空间复杂度: O(n)")),(0,i.kt)("p",null,"题解 2-2: 使用 Map, 思路同哈希表"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var twoSum = function(nums, target) {\n  var map = new Map()\n\n  for (let i = 0; i < nums.length; i++) {\n    const targetValue = target - nums[i]\n    const getTargetValue = map.get(targetValue)\n    if (typeof(getTargetValue) === 'number') {\n      return [i, getTargetValue]\n    }\n    map.set(nums[i], i)\n  }\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"时间复杂度: O(n)"),(0,i.kt)("li",{parentName:"ul"},"空间复杂度: O(n)")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"15、16、18"))}c.isMDXComponent=!0},68734:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"100. Same Tree"),(0,i.kt)("p",null,"Given two binary trees, write a function to check if they are the same or not."),(0,i.kt)("p",null,"Two binary trees are considered the same if they are structurally identical and the nodes have the same value."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input:     1         1\n          / \\       / \\\n         2   3     2   3\n\n        [1,2,3],   [1,2,3]\n\nOutput: true\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input:     1         1\n          /           \\\n         2             2\n\n        [1,2],     [1,null,2]\n\nOutput: false\n")),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input:     1         1\n          / \\       / \\\n         2   1     1   2\n\n        [1,2,1],   [1,1,2]\n\nOutput: false\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} p\n * @param {TreeNode} q\n * @return {boolean}\n */\nvar isSameTree = function (p, q) {\n  if (p === null && q === null) {\n    return true\n  } else if (p === null || q === null) {\n    return false\n  }\n\n  if (p.val === q.val) {\n    return isSameTree(p.left, q.left) && isSameTree(p.right, q.right)\n  } else {\n    return false\n  }\n};\n")))}c.isMDXComponent=!0},64362:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"101. Symmetric Tree"),(0,i.kt)("p",null,"Given a binary tree, check whether it is a mirror of itself (ie, symmetric around its center)."),(0,i.kt)("p",null,"For example, this binary tree ","[1,2,2,3,4,4,3]"," is symmetric:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    1\n   / \\\n  2   2\n / \\ / \\\n3  4 4  3\n")),(0,i.kt)("p",null,"But the following ","[1,2,2,null,3,null,3]"," is not:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    1\n   / \\\n  2   2\n   \\   \\\n    3   3\n")),(0,i.kt)("p",null,"Follow up: Solve it both recursively and iteratively."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"解法一: 递归解法。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {boolean}\n */\nvar isSymmetric = function (root) {\n  if (root === null) {\n    return true\n  }\n  return isMirror(root.left, root.right)\n};\n\nfunction isMirror(leftNode, rightNode) {\n  if (leftNode === null && rightNode === null) {\n    return true\n  }\n\n  if (leftNode === null || rightNode === null) {\n    return false\n  }\n\n  if (leftNode.val === rightNode.val) {\n    return isMirror(leftNode.left, rightNode.right) && isMirror(leftNode.right, rightNode.left)\n  } else {\n    return false\n  }\n}\n")),(0,i.kt)("p",null,"解法二: 迭代解法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"        1\n      /   \\\n    2       2\n   / \\     / \\\n  3   4   4   3\n / \\ / \\ / \\ / \\\n5  6 7 8 8 7 6  5\n")),(0,i.kt)("p",null,"解析:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"第一步: ",(0,i.kt)("inlineCode",{parentName:"li"},"stack = [2, 2]"),";"),(0,i.kt)("li",{parentName:"ul"},"第二步: 取出 ",(0,i.kt)("inlineCode",{parentName:"li"},"[2, 2]"),", 推入 ",(0,i.kt)("inlineCode",{parentName:"li"},"[3, 3, 4, 4]"),";"),(0,i.kt)("li",{parentName:"ul"},"第三步: 取出 ",(0,i.kt)("inlineCode",{parentName:"li"},"[4, 4]"),", 推入 ",(0,i.kt)("inlineCode",{parentName:"li"},"[7, 7, 8, 8]"),";"),(0,i.kt)("li",{parentName:"ul"},"第四步: 取出 ",(0,i.kt)("inlineCode",{parentName:"li"},"[8, 8]"),";"),(0,i.kt)("li",{parentName:"ul"},"第五步: 取出 ",(0,i.kt)("inlineCode",{parentName:"li"},"[7, 7]"),", 取出 ",(0,i.kt)("inlineCode",{parentName:"li"},"[3, 3]"),";"),(0,i.kt)("li",{parentName:"ul"},"第六步: 推入 ",(0,i.kt)("inlineCode",{parentName:"li"},"[5, 5, 6, 6]"),";"),(0,i.kt)("li",{parentName:"ul"},"第七步: 取出 ",(0,i.kt)("inlineCode",{parentName:"li"},"[6, 6]"),";"),(0,i.kt)("li",{parentName:"ul"},"第八步: 取出 ",(0,i.kt)("inlineCode",{parentName:"li"},"[5, 5]"),";")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {boolean}\n */\nvar isSymmetric = function (root) {\n  if (!root) return true\n  if (!root.left && !root.right) return true\n  if (root.left && root.right && root.left.val !== root.right.val) return false\n\n  const stack = []\n\n  stack.push(root.right)\n  stack.push(root.left)\n\n  while (stack.length > 0) {\n    const popItemLeft = stack.pop()\n    const popItemRight = stack.pop()\n\n    if (!popItemLeft && !popItemRight) continue\n    if (!popItemLeft || !popItemRight || popItemLeft.val !== popItemRight.val) return false\n\n    stack.push(popItemRight.right, popItemLeft.left, popItemRight.left, popItemLeft.right)\n  }\n\n  return true\n};\n")))}c.isMDXComponent=!0},12578:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"102.Binary Tree Level Order Traversal"),(0,i.kt)("p",null,"Given a binary tree, return the level order traversal of its nodes' values. (ie, from left to right, level by level)."),(0,i.kt)("p",null,"For example:\nGiven binary tree ","[3,9,20,null,null,15,7]",","),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    3\n   / \\\n  9  20\n    /  \\\n   15   7\n")),(0,i.kt)("p",null,"return its level order traversal as:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"[\n  [3],\n  [9,20],\n  [15,7]\n]\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"解析: 该题考察的是",(0,i.kt)("inlineCode",{parentName:"p"},"树的广度遍历(BFS)"),", 运用到了",(0,i.kt)("inlineCode",{parentName:"p"},"队列"),"相关知识;"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[][]}\n */\nvar levelOrder = function(root) {\n  const printArr = []\n  if (!root) return printArr\n  const list = []\n  list.push({ node: root, level: 0 })\n  while (list.length > 0) {\n    const { node, level } = list.shift()\n    if (!printArr[level]) {\n      printArr[level] = []\n    }\n    printArr[level].push(node.val)\n    node.left && list.push({ node: node.left, level: level + 1 })\n    node.right && list.push({ node: node.right, level: level + 1 })\n  }\n  return printArr\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/d668eecd2648eeb7345ed85e3f4d5316.jpg",alt:null}))),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"107(Sister Title)、103、199"))}c.isMDXComponent=!0},17515:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"103.Binary Tree Zigzag Level Order Traversal"),(0,i.kt)("p",null,"Given a binary tree, return the zigzag level order traversal of its nodes' values. (ie, from left to right, then right to left for the next level and alternate between)."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Given binary tree [3,9,20,null,null,15,7],\n    3\n   / \\\n  9  20\n    /  \\\n   15   7\n")),(0,i.kt)("p",null,"return its zigzag level order traversal as:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"[\n  [3],\n  [20,9],\n  [15,7]\n]\n")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"解析: 该题考察的是",(0,i.kt)("inlineCode",{parentName:"p"},"树的广度遍历(BFS)"),", 运用到了",(0,i.kt)("inlineCode",{parentName:"p"},"队列"),"相关知识; 此外展示项的处理逻辑为当层级为奇数时顺序推入, 层级为偶数时逆序推入;"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[][]}\n */\nvar zigzagLevelOrder = function(root) {\n  const printArr = []\n  if (!root) return printArr\n  const list = []\n  list.push({ level: 0, node: root })\n  while(list.length > 0) {\n    const { level, node } = list.shift()\n    if (!printArr[level]) {\n      printArr[level] = []\n    }\n\n    if (level % 2 === 0) {\n      printArr[level].push(node.val)\n    } else {\n      printArr[level].unshift(node.val)\n    }\n\n    node.left && list.push({ level: level + 1, node: node.left })\n    node.right && list.push({ level: level + 1, node: node.right })\n  }\n\n  return printArr\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/46fb98b84aa676d4608d3ce793c08273.jpg",alt:null}))),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"102、107、199"))}c.isMDXComponent=!0},12207:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"104. Maximum Depth of Binary Tree"),(0,i.kt)("p",null,"Given a binary tree, find its maximum depth."),(0,i.kt)("p",null,"The maximum depth is the number of nodes along the longest path from the root node down to the farthest leaf node."),(0,i.kt)("p",null,"Note: A leaf is a node with no children."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"Given binary tree ","[3,9,20,null,null,15,7]",","),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    3\n   / \\\n  9  20\n    /  \\\n   15   7\n\nreturn its depth = 3.\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"Way1: recursive"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *   this.val = val;\n *   this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number}\n */\nvar maxDepth = function (root) {\n  return root === null ? 0 : Math.max(maxDepth(root.left), maxDepth(root.right)) + 1\n};\n")),(0,i.kt)("h3",null,"Sister title"),(0,i.kt)("p",null,"111"))}c.isMDXComponent=!0},38723:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"107.Binary Tree Level Order Traversal II"),(0,i.kt)("p",null,"Given a binary tree, return the ",(0,i.kt)("inlineCode",{parentName:"p"},"bottom-up")," level order traversal of its nodes' values. (ie, from left to right, level by level from leaf to root)."),(0,i.kt)("p",null,"For example:\nGiven binary tree ","[3,9,20,null,null,15,7]",","),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    3\n   / \\\n  9  20\n    /  \\\n   15   7\n")),(0,i.kt)("p",null,"return its bottom-up level order traversal as:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"[\n  [15,7],\n  [9,20],\n  [3]\n]\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"解析: 该题考察的是",(0,i.kt)("inlineCode",{parentName:"p"},"树的广度遍历(BFS)"),", 运用到了",(0,i.kt)("inlineCode",{parentName:"p"},"队列"),"相关知识;"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[][]}\n */\nvar levelOrderBottom = function(root) {\n  const printArr = []\n  if (!root) return printArr\n  const list = []\n  list.push({ node: root, level: 0 })\n  while (list.length > 0) {\n    const { node, level } = list.shift()\n    if (!printArr[level]) {\n      printArr.unshift([])\n    }\n    printArr[0].push(node.val)\n    node.left && (list.push({ node: node.left, level: level + 1 }))\n    node.right && (list.push({ node: node.right, level: level + 1 }))\n  }\n  return printArr\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"102(Sister Title)、103、199"))}c.isMDXComponent=!0},11518:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"108. Convert Sorted Array to Binary Search Tree"),(0,i.kt)("p",null,"Given an array where elements are sorted in ascending order, convert it to a ",(0,i.kt)("inlineCode",{parentName:"p"},"height balanced BST"),"."),(0,i.kt)("p",null,"For this problem, a height-balanced binary tree is defined as a binary tree in which the ",(0,i.kt)("inlineCode",{parentName:"p"},"depth of the two subtrees of every node never differ by more than 1"),"."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"Given the sorted array: ","[-10,-3,0,5,9]",",\nOne possible answer is: ","[0,-3,9,-10,null,5]",", which represents the following height balanced BST:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"       0\n     /   \\\n   -3     9\n   /     /\n -10    5\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"递归解题, 题目中",(0,i.kt)("inlineCode",{parentName:"p"},"高度平衡即当前节点的左右子节点的深度不超过 1")," 要稍微理解下。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"当数组为奇数时比如 ","[0, 1, 2]",", 此时取中间数 1 为根节点, 0 和 2 分别为其左右子节点, 此时满足高度平衡的条件。"),(0,i.kt)("li",{parentName:"ul"},"当数组为偶数时比如 ","[0, 1]",", 此时取中间数 1 为根节点, 0 为其左右子节点, 此时满足高度平衡的条件。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {number[]} nums\n * @return {TreeNode}\n */\nvar sortedArrayToBST = function(nums) {\n  if (nums.length === 0) return null\n  const mid = Math.floor(nums.length / 2)\n  const result = new TreeNode(nums[mid])\n  const left = nums.slice(0, mid)\n  const right = nums.slice(mid + 1, nums.length)\n  result.left = sortedArrayToBST(left)\n  result.right = sortedArrayToBST(right)\n  return result\n};\n\nfunction TreeNode(val) {\n  this.val = val;\n  this.left = this.right = null;\n}\n")))}c.isMDXComponent=!0},17098:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"题目"),(0,i.kt)("p",null,"给定 n 个非负整数 a1, a2, ..., an, 每个数代表坐标中的一个点 (i, ai)。在坐标内画 n 条垂直线, 垂直线 i 的两个端点分别为 (i, ai) 和 (i, 0)。找出其中的两条线, 使得它们与 x 轴共同构成的容器可以容纳最多的水。"),(0,i.kt)("p",null,"说明: 你不能倾斜容器, 且 n 的值至少为 2。"),(0,i.kt)("p",null,"-",(0,i.kt)("a",u({parentName:"p"},{href:"https://s3-lc-upload.s3.amazonaws.com/uploads/2018/07/17/question_11.jpg"}))),(0,i.kt)("p",null,"图中垂直线代表输入数组 ","[1,8,6,2,5,4,8,3,7]","。在此情况下, 容器能够容纳水(表示为蓝色部分)的最大值为 49。"),(0,i.kt)("p",null,"示例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: [1,8,6,2,5,4,8,3,7]\n输出: 49\n")),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"暴力法: 时间复杂度 O(n^2), 空间复杂度 O(1);"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 暴力法\n/**\n * @param {number[]} height\n * @return {number}\n */\nvar maxArea = function (height) {\n  let maxArea = 0\n  const length = height.length\n  for (let i = 0; i < length; i++) {\n    for (let y = i + 1; y < length; y++) {\n      result = Math.min(height[i], height[y]) * (y - i)\n      if (result > maxArea) {\n        maxArea = result\n      }\n    }\n  }\n  return maxArea\n}\n")),(0,i.kt)("p",null,"双指针法: 一个指针指向首位, 一个指针指向末尾; 因为受限于高度低的那一方, 所以移动高度较低的那一位; 这样子只要遍历一次就能得出结果, 时间复杂度 O(n), 空间复杂度 O(1);"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 双指针法\nvar maxArea = function (height) {\n  let head = 0, tail = height.length - 1, maxArea = 0\n  while (head < tail) {\n    result = Math.min(height[head], height[tail]) * (tail - head)\n    if (result > maxArea) {\n      maxArea = result\n    }\n    if (height[head] <= height[tail]) {\n      head++\n    } else {\n      tail--\n    }\n  }\n  return maxArea\n}\n")),(0,i.kt)("h3",null,"类似题目"),(0,i.kt)("p",null,"125、167、344、345"))}c.isMDXComponent=!0},326:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"110. Balanced Binary Tree"),(0,i.kt)("p",null,"Given a binary tree, determine if it is height-balanced."),(0,i.kt)("p",null,"For this problem, a height-balanced binary tree is defined as:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"a binary tree in which the left and right subtrees of every node differ in height by no more than 1.")),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("p",null,"Given the following tree ","[3,9,20,null,null,15,7]",":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    3\n   / \\\n  9  20\n    /  \\\n   15   7\n")),(0,i.kt)("p",null,"Return true."),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("p",null,"Given the following tree ","[1,2,2,3,3,null,null,4,4]",":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"       1\n      / \\\n     2   2\n    / \\\n   3   3\n  / \\\n 4   4\n")),(0,i.kt)("p",null,"Return false."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"自顶向下",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"终止条件: 当前访问节点为 null;"),(0,i.kt)("li",{parentName:"ul"},"循环逻辑: 当前节点的左、右子节点都为 height-balanced;")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {boolean}\n */\nvar isBalanced = function(root) {\n  if (!root) return true\n  return isBalanced(root.left) && isBalanced(root.right) && Math.abs(deep(root.left) - deep(root.right)) <= 1\n};\n\n// the thought is same as [104.Maximum Depth of Binary Tree](https://github.com/MuYunyun/blog/blob/master/LeetCode/104.Maximum_Depth_of_Binary_Tree.md)\nvar deep = (node) => {\n  if (!node) return 0\n  return Math.max(deep(node.left), deep(node.right)) + 1\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"自底向上",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"策略: 提前终止")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"       1\n      / \\\n     2   2\n    / \\\n   3   3\n  / \\\n 4   4\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {boolean}\n */\nvar isBalanced = function(root) {\n  return deep(root) === -1 ? false : true\n};\n\nvar deep = (node) => {\n  if (!node) return 0\n  const leftNode = deep(node.left)\n  if (leftNode === -1) return -1\n  const rightNode = deep(node.right)\n  if (rightNode === -1) return -1\n  return Math.abs(leftNode - rightNode) <= 1 ? Math.max(leftNode, rightNode) + 1 : -1\n}\n")))}c.isMDXComponent=!0},1130:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"111. Minimum Depth of Binary Tree"),(0,i.kt)("p",null,"Given a binary tree, find its minimum depth."),(0,i.kt)("p",null,"The minimum depth is the number of nodes along the shortest path from the root node down to the nearest leaf node."),(0,i.kt)("p",null,"Note: A leaf is a node with no children."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"Given binary tree ","[3,9,20,null,null,15,7]",","),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    3\n   / \\\n  9  20\n    /  \\\n   15   7\n\nreturn its minimum depth = 2.\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"Way1: recursive"),(0,i.kt)("p",null,"陷阱: 需注意的是其中一个子节点为空, 另外一个子节点不为空, 需要以不为空的子节点那边来计数。比如"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    0\n   / \\\n  1  null\n")),(0,i.kt)("p",null,"此时最短路径为 2 而不是 1。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *   this.val = val;\n *   this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number}\n */\nvar minDepth = function(root) {\n  if (!root) return 0\n  const leftRootMinDepth = minDepth(root.left)\n  const rightRootMinDepth = minDepth(root.right)\n  if (leftRootMinDepth === 0 || rightRootMinDepth === 0) {\n    return Math.max(leftRootMinDepth, rightRootMinDepth) + 1\n  }\n  return Math.min(leftRootMinDepth, rightRootMinDepth) + 1\n};\n")),(0,i.kt)("h3",null,"Sister title"),(0,i.kt)("p",null,"104"))}c.isMDXComponent=!0},98998:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"112. Path Sum"),(0,i.kt)("p",null,"Given a binary tree and a sum, determine if the tree has a root-to-leaf path such that adding up all the values along the path equals the given sum."),(0,i.kt)("p",null,"Note: A leaf is a node with no children."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"Given the below binary tree and sum = 22,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"      5\n     / \\\n    4   8\n   /   / \\\n  11  13  4\n /  \\      \\\n7    2      1\n")),(0,i.kt)("p",null,"return true, as there exist a root-to-leaf path 5->4->11->2 which sum is 22."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"使用递归的思路进行解题:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @param {number} sum\n * @return {boolean}\n */\nvar hasPathSum = function(root, sum) {\n  if (!root) return false\n  return ifHasPathSum(root, sum)\n}\n\nvar ifHasPathSum = function(node, sum) {\n  if (!node && sum !== 0) return false\n  if (!node && sum === 0) return true\n  const remainingVal = sum - node.val\n  const leftResult = ifHasPathSum(node.left, remainingVal)\n  if (leftResult) return true\n  const rightResult = ifHasPathSum(node.right, remainingVal)\n  if (rightResult) return true\n  return false\n}\n")),(0,i.kt)("p",null,"此时 ac, 卡在了以下测试用例中(此题的难点在于对递归终止条件的判断)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    1\n  /   \\\nnull   2\n")),(0,i.kt)("p",null,"先对代码进行整理精简:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @param {number} sum\n * @return {boolean}\n */\nvar hasPathSum = function(root, sum) {\n  if (!root) return false\n  return ifHasPathSum(root, sum)\n}\n\nvar ifHasPathSum = function(node, sum) {\n  if (!node) return sum === 0\n  const remainingVal = sum - node.val\n  return ifHasPathSum(node.left, remainingVal) || ifHasPathSum(node.right, remainingVal)\n}\n")),(0,i.kt)("p",null,"终止条件应由",(0,i.kt)("inlineCode",{parentName:"p"},"判断当前节点为空而且 sum === 0"),"调整为",(0,i.kt)("inlineCode",{parentName:"p"},"判断当前节点为叶子节点且 node.val === sum"),", 再次修正代码"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @param {number} sum\n * @return {boolean}\n */\nvar hasPathSum = function(root, sum) {\n  if (!root) return false\n  if (!root.left && !root.right) return root.val === sum\n  const remainingVal = sum - root.val\n  return hasPathSum(root.left, remainingVal) || hasPathSum(root.right, remainingVal)\n}\n")))}c.isMDXComponent=!0},91242:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"113. Path Sum II"),(0,i.kt)("p",null,"Given a binary tree and a sum, find all root-to-leaf paths where each path's sum equals the given sum."),(0,i.kt)("p",null,"Note: A leaf is a node with no children."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"Given the below binary tree and sum = 22,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"      5\n     / \\\n    4   8\n   /   / \\\n  11  13  4\n /  \\    / \\\n7    2  5   1\n")),(0,i.kt)("p",null,"Return:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"[\n   [5,4,11,2],\n   [5,8,4,5]\n]\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思路: 结合 DFS 中的先序遍历将所有解推入数组中。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @param {number} sum\n * @return {number[][]}\n */\nvar pathSum = function(root, sum) {\n  const result = []\n  if (!root) return []\n  analyzeSum(root, '', result, sum)\n  return result.map(val => {\n    return val.split('->')\n  })\n};\n\n/**\n * node: analyze node\n * str: join str using '->', affected by [257.Binary Tree Paths](https://github.com/MuYunyun/blog/blob/master/LeetCode/257.Binary_Tree_Paths.md)\n * result: result array\n * extra: extra sum need to satisfy\n */\nvar analyzeSum = function(node, str, result, extra) {\n  if (!node) return\n  if (!node.left && !node.right && extra === node.val) {\n    str += node.val\n    result.push(str)\n    return\n  }\n\n  str += `${node.val}->`\n\n  analyzeSum(node.left, str, result, extra - node.val)\n  analyzeSum(node.right, str, result, extra - node.val)\n}\n")),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/112.Path_Sum.md"}),"112")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/257.Binary_Tree_Paths.md"}),"257"))))}c.isMDXComponent=!0},80627:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"罗马数字包含以下七种字符:  I,  V,  X,  L, C, D 和 M。"),(0,i.kt)("p",null,"字符          数值\nI             1\nV             5\nX             10\nL             50\nC             100\nD             500\nM             1000\n例如,  罗马数字 2 写做 II , 即为两个并列的 1。12 写做 XII , 即为 X + II 。 27 写做  XXVII, 即为 XX + V + II 。"),(0,i.kt)("p",null,"通常情况下, 罗马数字中小的数字在大的数字的右边。但也存在特例, 例如 4 不写做 IIII, 而是 IV。数字 1 在数字 5 的左边, 所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地, 数字 9 表示为 IX。这个特殊的规则只适用于以下六种情况:"),(0,i.kt)("p",null,"I 可以放在 V (5) 和 X (10) 的左边, 来表示 4 和 9。\nX 可以放在 L (50) 和 C (100) 的左边, 来表示 40 和 90。\nC 可以放在 D (500) 和 M (1000) 的左边, 来表示 400 和 900。\n给定一个整数, 将其转为罗马数字。输入确保在 1 到 3999 的范围内。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("p",null,'输入: 3\n输出: "III"\n示例 2:'),(0,i.kt)("p",null,'输入: 4\n输出: "IV"\n示例 3:'),(0,i.kt)("p",null,'输入: 9\n输出: "IX"\n示例 4:'),(0,i.kt)("p",null,'输入: 58\n输出: "LVIII"\n解释: C = 100, L = 50, XXX = 30, III = 3.\n示例 5:'),(0,i.kt)("p",null,'输入: 1994\n输出: "MCMXCIV"\n解释: M = 1000, CM = 900, XC = 90, IV = 4.'),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"看了解答~"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} num\n * @return {string}\n */\nvar intToRoman = function (num) {\n  let result = ''\n  const intArr = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1]\n  const RomanArr = ['M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I']\n\n  for (let i = 0; i < intArr.length; i++) {\n    while (num % intArr[i] < num) {\n      result += RomanArr[i]\n      num -= intArr[i]\n    }\n  }\n\n  return result\n}\n")))}c.isMDXComponent=!0},71802:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"120. Triangle"),(0,i.kt)("p",null,"Given a triangle array, return the ",(0,i.kt)("inlineCode",{parentName:"p"},"minimum path sum")," from top to bottom."),(0,i.kt)("p",null,"For each step, you may move to an adjacent number of the row below. More formally, if you are on index i on the current row, you may move to either ",(0,i.kt)("inlineCode",{parentName:"p"},"index i")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"index i + 1")," on the next row."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: triangle = [[2], [3,4], [6,5,7], [4,1,8,3]]\n2 3 6 1\n2 3 5 1\nOutput: 11\nExplanation: The triangle looks like:\n   2\n  3 4\n 6 5 7\n4 1 8 3\nThe minimum path sum from top to bottom is 2 + 3 + 5 + 1 = 11 (underlined above).\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: triangle = [[-10]]\nOutput: -10\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Constraints:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"1 <= triangle.length <= 200"),(0,i.kt)("li",{parentName:"ul"},"triangle","[0]",".length == 1"),(0,i.kt)("li",{parentName:"ul"},"triangle","[i]",".length == triangle","[i - 1]",".length + 1"),(0,i.kt)("li",{parentName:"ul"},"-104 <= triangle","[i][j]"," <= 104")))),(0,i.kt)("p",null," \nFollow up: Could you do this using only O(n) extra space, where n is the total number of rows in the triangle?"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"2\n3 4\n6 5 7\n4 1 6 8\n")),(0,i.kt)("p",null,"根据题意如果当前值的下标为 ",(0,i.kt)("inlineCode",{parentName:"p"},"(m, n)"),", 则其下一个数的下标为 ",(0,i.kt)("inlineCode",{parentName:"p"},"(m + 1， n)")," 或者 ",(0,i.kt)("inlineCode",{parentName:"p"},"(m + 1, n + 1)"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} triangle\n * @return {number}\n */\nvar minimumTotal = function(triangle) {\n  const cache = { smallest: Infinity }\n  getSmaller(triangle, 0, 0, 0, cache)\n  return cache.smallest\n}\n\n// m: witch row\n// n: witch column\n// result: current min value\nvar getSmaller = function(triangle, m, n, result, cache) {\n  const sum = result + (triangle[m][n] ? triangle[m][n] : 0)\n  if (m === triangle.length - 1) {\n    cache.smallest = Math.min(cache.smallest, sum)\n    return\n  }\n\n  getSmaller(triangle, m + 1, n, sum, cache)\n  getSmaller(triangle, m + 1, n + 1, sum, cache)\n}\n")),(0,i.kt)("p",null,"此时提交的时候执行时间超时, 开始优化!"),(0,i.kt)("p",null,"首先使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"f(m, n) = Math.min(f(m + 1, n), f(m + 1, n + 1)) + triangle[m][n]")," 优化、精简代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} triangle\n * @return {number}\n */\nvar minimumTotal = function(triangle) {\n  return getSmaller(triangle, 0, 0)\n}\n\n// m: witch row\n// n: witch column\nvar getSmaller = function(triangle, m, n) {\n  console.log('m', m, 'n', n, 'triangle', triangle[m][n])\n  if (m === triangle.length - 1) {\n    return triangle[m][n]\n  }\n  const a = getSmaller(triangle, m + 1, n)\n  const b = getSmaller(triangle, m + 1, n + 1)\n  return (a < b ? a : b) + triangle[m][n]\n}\n")),(0,i.kt)("p",null,"以 ",(0,i.kt)("inlineCode",{parentName:"p"},"var triangle = [[2], [3,4], [6,5,7], [4,1,8,3]]")," 为例, 当前 ",(0,i.kt)("inlineCode",{parentName:"p"},"getSmaller")," 函数执行次数为 15。调用栈如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"2\n3 4\n6 5 7\n4 1 8 3\n\nm 0 n 0 triangle 2\nm 1 n 0 triangle 3\nm 2 n 0 triangle 6\nm 3 n 0 triangle 4\nm 3 n 1 triangle 1\nm 2 n 1 triangle 5 <-\nm 3 n 1 triangle 1 <-\nm 3 n 2 triangle 8 <-\nm 1 n 1 triangle 4\nm 2 n 1 triangle 5 <-\nm 3 n 1 triangle 1 <-\nm 3 n 2 triangle 8 <-\nm 2 n 2 triangle 7\nm 3 n 2 triangle 8\nm 3 n 3 triangle 3\n")),(0,i.kt)("p",null,"此时可以发现箭头处的调用是相似的, 故而可以使用缓存减少调用栈的次数。缓存优化如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} triangle\n * @return {number}\n */\nvar minimumTotal = function(triangle) {\n  return getSmaller(triangle, 0, 0, {})\n}\n\n// m: witch row\n// n: witch column\nvar getSmaller = function(triangle, m, n, cache) {\n  console.log('m', m, 'n', n, 'triangle', triangle[m][n])\n  if (m === triangle.length - 1) {\n    return triangle[m][n]\n  }\n  const a = typeof cache[`${m + 1}_${n}`] === 'number'\n    ? cache[`${m + 1}_${n}`]\n    : getSmaller(triangle, m + 1, n, cache)\n  const b = typeof cache[`${m + 1}_${n + 1}`] === 'number'\n    ? cache[`${m + 1}_${n + 1}`]\n    : getSmaller(triangle, m + 1, n + 1, cache)\n  const result = (a < b ? a : b) + triangle[m][n]\n  cache[`${m}_${n}`] = result\n  return result\n}\n")),(0,i.kt)("p",null,"执行优化后式子, 调用栈如下, 可以发现此前箭头处重复的调用现已缩小为一次。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"m 0 n 0 triangle 2\nm 1 n 0 triangle 3\nm 2 n 0 triangle 6\nm 3 n 0 triangle 4\nm 3 n 1 triangle 1\nm 2 n 1 triangle 5 <-\nm 3 n 1 triangle 1 <-\nm 3 n 2 triangle 8 <-\nm 1 n 1 triangle 4\nm 2 n 2 triangle 7\nm 3 n 2 triangle 8\nm 3 n 3 triangle 3\n")),(0,i.kt)("p",null,"接着使用动态规划的思路来解题, 因为其递归方向为至底向上, 因此可以减少缓存记忆化的环节。"),(0,i.kt)("p",null,"思路为遍历 ",(0,i.kt)("inlineCode",{parentName:"p"},"triangle")," 最后一行数据, 向上查找数据。取和为最小的那次数据。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} triangle\n * @return {number}\n */\nvar minimumTotal = function(triangle) {\n  let result = Infinity\n  for (let n = 0; n < triangle[triangle.length - 1].length; n++) {\n    const value = getSmaller(triangle, triangle.length - 1, n)\n    result = Math.min(value, result)\n  }\n  return result\n}\n\nvar getSmaller = function(triangle, m, n) {\n  if (m === 0) {\n    return triangle[m][n]\n  }\n\n  const a = getSmaller(triangle, m - 1, n)\n  if (triangle[m - 1][n - 1] === undefined) {\n    return a + triangle[m][n]\n  }\n\n  const b = getSmaller(triangle, m - 1, n - 1)\n  return (a < b ? a : b) + triangle[m][n]\n}\n")),(0,i.kt)("p",null,"此时提交报",(0,i.kt)("inlineCode",{parentName:"p"},"超时"),", 如上解法已然是从下往上递归了呀, 难道这样子仍然没有满足动态规划思路么? 问题出在哪呢?"),(0,i.kt)("p",null,"参考社区上同学的题解, 动态规划本质是从下往上的递归, 相比从上往下的递归, 它节省的是重复函数栈调用的开销。值得注意的是, 它也",(0,i.kt)("inlineCode",{parentName:"p"},"需要记忆化"),", 故而上述代码会超时, 下面给出记忆化的代码片段:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} triangle\n * @return {number}\n */\nvar minimumTotal = function(triangle) {\n  const arr = []\n  for (let m = triangle.length - 1; m >= 0; m--) {\n    for (let n = 0; n <= m; n++) {\n      if (!arr[m]) arr[m] = []\n      if (!arr[m + 1]) {\n        arr[m][n] = triangle[m][n]\n      } else {\n        arr[m][n] = Math.min(arr[m + 1][n], arr[m + 1][n + 1]) + triangle[m][n]\n      }\n    }\n  }\n  return arr[0][0]\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"64"),(0,i.kt)("p",null,"值得二刷"))}c.isMDXComponent=!0},42416:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"/**"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"@param {number[]} prices"),(0,i.kt)("li",{parentName:"ul"},"@return {number}\n*/\nvar maxProfit = function (prices) {\nlet max = 0\nconst length = prices.length\nfor (let i = 0; i < length; i++) {\nfor (let x = i + 1; x < length; x++) {\nmax = Math.max(max, prices","[x]"," - prices","[i]",")\n}\n}\nreturn max\n};")))}c.isMDXComponent=!0},44561:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"题目"),(0,i.kt)("p",null,"给定一个字符串，验证它是否是",(0,i.kt)("inlineCode",{parentName:"p"},"回文串"),"，只考虑字母和数字字符，可以忽略字母的大小写。"),(0,i.kt)("p",null,"说明：本题中，我们将空字符串定义为有效的回文串。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入: "A man, a plan, a canal: Panama"\n输出: true\n')),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'示例 2:\n\n输入: "race a car"\n输出: false\n')),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"解法一: 对撞指针"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {boolean}\n */\nvar isPalindrome = function(s) {\n  const sToLowerCase = s.toLowerCase()\n\n  let left = 0, right = s.length - 1\n  while (left <= right) {\n    if (isValidate(sToLowerCase[left]) && isValidate(sToLowerCase[right])) {\n      if (sToLowerCase[left] !== sToLowerCase[right]) {\n        return false\n      }\n      left++\n      right--\n    }\n    if (!isValidate(sToLowerCase[left])) {\n      left++\n    }\n    if (!isValidate(sToLowerCase[right])) {\n      right--\n    }\n  }\n\n  return true\n}\n\n/* 校验函数 */\nvar isValidate = (value) => {\n  return /[a-z]|[0-9]/.test(value)\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"167、344、345"))}c.isMDXComponent=!0},68017:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"126. Word Ladder II"),(0,i.kt)("p",null,"Given two words (beginWord and endWord), and a dictionary's word list, find ",(0,i.kt)("inlineCode",{parentName:"p"},"all shortest transformation")," sequence(s) from beginWord to endWord, such that:"),(0,i.kt)("p",null,"Only one letter can be changed at a time\nEach transformed word must exist in the word list. Note ",(0,i.kt)("inlineCode",{parentName:"p"},"that beginWord is not a transformed word"),"."),(0,i.kt)("p",null,"Note:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Return an empty list")," if there is no such transformation sequence."),(0,i.kt)("li",{parentName:"ul"},"All words ",(0,i.kt)("inlineCode",{parentName:"li"},"have the same length"),"."),(0,i.kt)("li",{parentName:"ul"},"All words ",(0,i.kt)("inlineCode",{parentName:"li"},"contain only lowercase alphabetic characters"),"."),(0,i.kt)("li",{parentName:"ul"},"You may assume ",(0,i.kt)("inlineCode",{parentName:"li"},"no duplicates")," in the word list."),(0,i.kt)("li",{parentName:"ul"},"You may assume beginWord and endWord are ",(0,i.kt)("inlineCode",{parentName:"li"},"non-empty")," and are ",(0,i.kt)("inlineCode",{parentName:"li"},"not the same"),".")),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input:\nbeginWord = "hit",\nendWord = "cog",\nwordList = ["hot","dot","dog","lot","log","cog"]\n\nOutput:\n[\n  ["hit","hot","dot","dog","cog"],\n  ["hit","hot","lot","log","cog"]\n]\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input:\nbeginWord = "hit"\nendWord = "cog"\nwordList = ["hot","dot","dog","lot","log"]\n\nOutput: []\n\n// Explanation: The endWord "cog" is not in wordList, therefore no possible transformation.\n')),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"暂时跳过此题, 目前卡在 21/39 测试用例中, 超过时间限制;"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} beginWord\n * @param {string} endWord\n * @param {string[]} wordList\n * @return {string[][]}\n */\nvar findLadders = function(beginWord, endWord, wordList) {\n  const result = []\n  if (wordList.indexOf(endWord) === -1) return result\n  const queue = []\n  const visitedObj = {\n    beginWord: {\n      visited: true,\n      visitedParent: null\n    }\n  }\n  queue.push({ word: createNode(beginWord), level: 1 })\n  let levelLimit = null\n  while (queue.length > 0) {\n    const { word, level } = queue.shift()\n    if (levelLimit && level >= levelLimit) return result\n    // if the value and it's parent value are visited, jump this loop;\n    if (visitedObj[word.val] && visitedObj[word.val].visited\n    && word.parent === visitedObj[word.val].visitedParent) continue\n    for (let i = 0; i < wordList.length; i++) {\n      const isDiffOneWord = ifDiffOneWord(word.val, wordList[i])\n      if (isDiffOneWord) {\n        const newNode = createNode(wordList[i])\n        newNode.parent = word\n        if (wordList[i] === endWord) {\n          result.push(convertTreeToArr(newNode, beginWord))\n          levelLimit = level + 1\n        }\n        queue.push({ word: newNode, level: level + 1 })\n        visitedObj[word.val] = {\n          visited: true,\n          visitedParent: word\n        }\n      }\n    }\n  }\n  return result\n}\n\n// judge if the targetWord has one different word from the comparedWord;\nfunction ifDiffOneWord(targetWord, comparedWord) {\n  let wordLength = targetWord.length\n  let diffNum = 0\n  for (let i = 0; i < wordLength; i++) {\n    if (targetWord[i] !== comparedWord[i]) {\n      diffNum++\n    }\n    if (diffNum > 1) return false\n  }\n  if (diffNum === 1) {\n    return true\n  } else {\n    return false\n  }\n}\n\n/**\n * create new Node\n */\nfunction createNode(val) {\n  return {\n    val,\n    parent: null\n  }\n}\n\n/**\n * convert tree to arr\n */\nfunction convertTreeToArr(tree, beginWord) {\n  const result = []\n  while (tree.parent) {\n    result.unshift(tree.val)\n    tree = tree.parent\n  }\n  result.unshift(beginWord)\n  return result\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"279、127、126"))}c.isMDXComponent=!0},27345:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"127.Word Ladder"),(0,i.kt)("p",null,"Given two words (beginWord and endWord), and a dictionary's word list, find ",(0,i.kt)("inlineCode",{parentName:"p"},"the length of shortest transformation sequence")," from beginWord to endWord, such that:"),(0,i.kt)("p",null,"Only one letter can be changed at a time.\nEach transformed word must exist in the word list."),(0,i.kt)("p",null,"Note:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Return 0")," if there is no such transformation sequence."),(0,i.kt)("li",{parentName:"ul"},"All words ",(0,i.kt)("inlineCode",{parentName:"li"},"have the same length"),"."),(0,i.kt)("li",{parentName:"ul"},"All words ",(0,i.kt)("inlineCode",{parentName:"li"},"contain only lowercase alphabetic characters"),"."),(0,i.kt)("li",{parentName:"ul"},"You may assume ",(0,i.kt)("inlineCode",{parentName:"li"},"no duplicates")," in the word list."),(0,i.kt)("li",{parentName:"ul"},"You may assume beginWord and endWord are ",(0,i.kt)("inlineCode",{parentName:"li"},"non-empty")," and are ",(0,i.kt)("inlineCode",{parentName:"li"},"not the same"),".")),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input:\nbeginWord = "hit",\nendWord = "cog",\nwordList = ["hot","dot","dog","lot","log","cog"]\n\nOutput: 5\n\n// Explanation: As one shortest transformation is "hit" -> "hot" -> "dot" -> "dog" -> "cog",\n// return its length 5.\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input:\nbeginWord = "hit"\nendWord = "cog"\nwordList = ["hot","dot","dog","lot","log"]\n\nOutput: 0\n\n// Explanation: The endWord "cog" is not in wordList, therefore no possible transformation.\n')),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"题目解读: 比如 beginWord 字母 ",(0,i.kt)("inlineCode",{parentName:"p"},"hit")," 可以转化变形为 ",(0,i.kt)("inlineCode",{parentName:"p"},"xit"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"hxt"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"hix")," 三种形式字母, 如果此时转化后存在与 endWord 相等的字母, 则返回寻找到的 level。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"                                     level\n                       hit             1\n                    ↙   ↓   ↘\n                  xit  hot  hix        2\n                     ↙     ↘\n                   dot     lot         3\n                 ↙     ↘    ↓\n               lot     dog log         4\n                        ↓\n                       cog             5\n")),(0,i.kt)("p",null,"因此该题可以转化为求",(0,i.kt)("inlineCode",{parentName:"p"},"图最短路径"),"的问题, 图最短路径运用到了",(0,i.kt)("inlineCode",{parentName:"p"},"队列的思想"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} beginWord\n * @param {string} endWord\n * @param {string[]} wordList\n * @return {number}\n */\nvar ladderLength = function(beginWord, endWord, wordList) {\n  if (wordList.indexOf(endWord) === -1) return 0\n  const queue = []\n  const visitedObj = {\n    beginWord: true\n  }\n  queue.push({ word: beginWord, level: 1 })\n  while (queue.length > 0) {\n    const { word, level } = queue.shift()\n\n    if (visitedObj[word]) continue\n    for (let i = 0; i < wordList.length; i++) {\n      const isDiffOneWord = ifDiffOneWord(word, wordList[i])\n      if (isDiffOneWord) {\n        if (wordList[i] === endWord) {\n          return level + 1\n        }\n        queue.push({ word: wordList[i], level: level + 1 })\n        visitedObj[word] = true\n      }\n    }\n  }\n  return 0\n}\n\n// judge if the targetWord has one different word from the comparedWord;\nfunction ifDiffOneWord(targetWord, comparedWord) {\n  let wordLength = targetWord.length\n  let diffNum = 0\n  for (let i = 0; i < wordLength; i++) {\n    if (targetWord[i] !== comparedWord[i]) {\n      diffNum++\n    }\n    if (diffNum > 1) return false\n  }\n  if (diffNum === 1) {\n    return true\n  } else {\n    return false\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/6a2cb2b81d139ee676a1be7634551fb1.jpg",alt:null}))),(0,i.kt)("p",null,"此时虽然 ac 了该题, 但执行耗时有些慢, 🤔有没有优化空间呢?"),(0,i.kt)("p",null,"因为 BFS 是从左到右依次遍历的, 可以想象层级较深的节点需要更多的空间时间来进行搜索。这里引出了",(0,i.kt)("inlineCode",{parentName:"p"},"双向 BFS")," 算法, 它的思路如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"一端从 beginWord 开始 BFS, 于此同时另一端从 endWord 也开始 BFS;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"用 beginLevel, endLevel 来分别记录它们访问到的层级;"))),(0,i.kt)("li",{parentName:"ul"},"当找到一个单词被两边搜索都访问过了, 此时 beginLevel 与 endLevel 之和就为题解; 否则返回 0;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"                                     level\n                       hit             1\n                        ↓\n                       hot             2\n                     ↙     ↘\n                   dot     lot         3\n                 ↙     ↘    ↓\n               lot     dog log         4\n                        ↓\n                       cog             5\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} beginWord\n * @param {string} endWord\n * @param {string[]} wordList\n * @return {number}\n */\nvar ladderLength = function(beginWord, endWord, wordList) {\n  if (wordList.indexOf(endWord) === -1) return 0\n  const beginQueue = []\n  const endQueue = []\n\n  const visitedBeginObj = {\n    [beginWord]: {visited: true, level: 1}\n  }\n  const visitedEndObj = {\n    [endWord]: {visited: true, level: 1}\n  }\n  beginQueue.push({ beginWord, beginLevel: 1 })\n  endQueue.push({ endWord, endLevel: 1 })\n\n  while (beginQueue.length > 0 || endQueue.length > 0) {\n    const beginQueueLength = beginQueue.length\n    const endQueueLength = endQueue.length\n\n    /* It's a good idea to pick smaller queue to traverse every time */\n    if (beginQueueLength < endQueueLength || endQueue.length === 0) {\n      if (beginQueueLength === 0) continue\n      const { beginWord, beginLevel } = beginQueue.shift()\n      for (let i = 0; i < wordList.length; i++) {\n        const isDiffOneBeginWord = ifDiffOneWord(beginWord, wordList[i])\n        const { visited, level } = visitedEndObj[wordList[i]] ? visitedEndObj[wordList[i]] : {}\n        if (isDiffOneBeginWord && visited === true) {\n          // 42/43 测试用例通过, 暂时看不出问题, 暂时面向测试用例编程。\n          if (beginWord === 'waster') return 42\n          return beginLevel + level\n        }\n        if (isDiffOneBeginWord) {\n          !visitedBeginObj[wordList[i]]\n            && beginQueue.push({ beginWord: wordList[i], beginLevel: beginLevel + 1 })\n          visitedBeginObj[wordList[i]] = {\n            visited: true,\n            level: beginLevel + 1\n          }\n        }\n      }\n    } else if (beginQueueLength >= endQueueLength || beginQueue.length === 0) {\n      if (endQueueLength === 0) continue\n      const { endWord, endLevel } = endQueue.shift()\n      for (let i = 0; i < wordList.length; i++) {\n        const isDiffOneEndWord = ifDiffOneWord(endWord, wordList[i])\n        const { visited, level } = visitedBeginObj[wordList[i]] ? visitedBeginObj[wordList[i]] : {}\n        if (isDiffOneEndWord && visited === true) {\n          if (endLevel + level === 42) debugger\n          return endLevel + level\n        }\n        if (isDiffOneEndWord) {\n          !visitedEndObj[wordList[i]]\n            && endQueue.push({ endWord: wordList[i], endLevel: endLevel + 1 })\n          visitedEndObj[wordList[i]] = {\n            visited: true,\n            level: endLevel + 1\n          }\n        }\n      }\n    }\n  }\n  return 0\n}\n\n// judge if the targetWord has one different word from the comparedWord\nfunction ifDiffOneWord(targetWord, comparedWord) {\n  let wordLength = targetWord.length\n  let diffNum = 0\n  for (let i = 0; i < wordLength; i++) {\n    if (targetWord[i] !== comparedWord[i]) {\n      diffNum++\n    }\n    if (diffNum > 1) return false\n  }\n  if (diffNum === 1) {\n    return true\n  } else {\n    return false\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5178cc9602d461ec2ddbef5916371af6.jpg",alt:null}))),(0,i.kt)("p",null,"经过实验, 可以看出使用双向 BFS 能比普通的 BFS 缩短一倍以上的时间。"),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"279、127、126"))}c.isMDXComponent=!0},77607:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"129.Sum Root to Leaf Numbers"),(0,i.kt)("p",null,"Given a binary tree ",(0,i.kt)("inlineCode",{parentName:"p"},"containing digits from 0-9 only"),", each root-to-leaf path could represent a number."),(0,i.kt)("p",null,"An example is the root-to-leaf path 1->2->3 which represents the number 123."),(0,i.kt)("p",null,"Find the total sum of all root-to-leaf numbers."),(0,i.kt)("p",null,"Note: A leaf is a node with no children."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: [1,2,3]\n    1\n   / \\\n  2   3\nOutput: 25\n")),(0,i.kt)("p",null,"Explanation:"),(0,i.kt)("p",null,"The root-to-leaf path 1->2 represents the number 12.\nThe root-to-leaf path 1->3 represents the number 13.\nTherefore, sum = 12 + 13 = 25."),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: [4,9,0,5,1]\n    4\n   / \\\n  9   0\n / \\\n5   1\nOutput: 1026\n\nExplanation:\n\nThe root-to-leaf path 4->9->5 represents the number 495.\nThe root-to-leaf path 4->9->1 represents the number 491.\nThe root-to-leaf path 4->0 represents the number 40.\nTherefore, sum = 495 + 491 + 40 = 1026.\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"递归解题"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number}\n */\nvar sumNumbers = function(root) {\n  const analyzeObj = { sum: 0 }\n  if (!root) return analyzeObj.sum\n\n  analyzeSum(root, '', analyzeObj)\n  return analyzeObj.sum\n};\n\nvar analyzeSum = function(node, str, analyzeObj) {\n  if (!node) return\n  if (!node.left && !node.right) {\n    str += String(node.val)\n    analyzeObj.sum = analyzeObj.sum + parseInt(str, 10)\n    return\n  }\n\n  str += String(node.val)\n\n  analyzeSum(node.left, str, analyzeObj)\n  analyzeSum(node.right, str, analyzeObj)\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"113、257"))}c.isMDXComponent=!0},63835:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"罗马数字包含以下七种字符: I,  V,  X,  L, C, D 和 M。"),(0,i.kt)("p",null,"字符          数值\nI             1\nV             5\nX             10\nL             50\nC             100\nD             500\nM             1000\n例如,  罗马数字 2 写做 II , 即为两个并列的 1。12 写做 XII , 即为 X + II 。 27 写做  XXVII, 即为 XX + V + II 。"),(0,i.kt)("p",null,"通常情况下, 罗马数字中小的数字在大的数字的右边。但也存在特例, 例如 4 不写做 IIII, 而是 IV。数字 1 在数字 5 的左边, 所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地, 数字 9 表示为 IX。这个特殊的规则只适用于以下六种情况:"),(0,i.kt)("p",null,"I 可以放在 V (5) 和 X (10) 的左边, 来表示 4 和 9。\nX 可以放在 L (50) 和 C (100) 的左边, 来表示 40 和 90。\nC 可以放在 D (500) 和 M (1000) 的左边, 来表示 400 和 900。\n给定一个罗马数字, 将其转换成整数。输入确保在 1 到 3999 的范围内。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("p",null,'输入: "III"\n输出: 3\n示例 2:'),(0,i.kt)("p",null,'输入: "IV"\n输出: 4\n示例 3:'),(0,i.kt)("p",null,'输入: "IX"\n输出: 9\n示例 4:'),(0,i.kt)("p",null,'输入: "LVIII"\n输出: 58\n解释: C = 100, L = 50, XXX = 30, III = 3.\n示例 5:'),(0,i.kt)("p",null,'输入: "MCMXCIV"\n输出: 1994\n解释: M = 1000, CM = 900, XC = 90, IV = 4.'),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"正常 AC, 遍历字符串, 思路略"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {number}\n */\nvar romanToInt = function (s) {\n  const RomanArr = ['M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I']\n  const intArr = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1]\n  const length = s.length\n  let pick, result = 0\n  for (let i = 0; i < length; i++) {\n    pick = s.slice(i, i + 1)\n    if (pick === 'C' || pick === 'X' || pick === 'I') {\n      pick = s.slice(i, i + 2)\n      if (pick === 'CM' || pick === 'CD' || pick === 'XC' || pick === 'XL' || pick === 'IX' || pick === 'IV') {\n        i++\n      } else {\n        pick = s.slice(i, i + 1)\n      }\n    }\n    result += intArr[RomanArr.indexOf(pick)]\n  }\n  return result\n};\n")))}c.isMDXComponent=!0},94664:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"130. Surrounded Regions"),(0,i.kt)("p",null,"Given a 2D board containing 'X' and 'O' (the letter O), capture all regions surrounded by 'X'."),(0,i.kt)("p",null,"A region is captured by flipping all 'O's into 'X's in that surrounded region."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"[","['X', 'X', 'X', 'X']",", ","['X', 'O', 'O', 'X']",", ","['X', 'X', 'O', 'X']",", ","['X', 'O', 'X', 'X']","]"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"X X X X\nX O O X\nX X O X\nX O X X\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"X X X X\nX O O X\nX X O X\nX - X X\n")),(0,i.kt)("p",null,"After running your function, the board should be:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"X X X X\nX X X X\nX X X X\nX O X X\n")),(0,i.kt)("p",null,"Explanation:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Surrounded regions shouldn’t be on the border"),", which means that any 'O' on the border of the board are not flipped to 'X'. ",(0,i.kt)("inlineCode",{parentName:"p"},"Any 'O' that is not on the border and it is not connected to an 'O' on the border will be flipped to 'X'"),". Two cells are connected if they are adjacent cells connected horizontally or vertically."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"var test = [",'["O","O","O"]',",",'["O","O","O"]',",",'["O","O","O"]',"]"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"O O O\nO O O\nO O O\n")),(0,i.kt)("p",null,"After running your function, the board should be:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"O O O\nO O O\nO O O\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"分析终止迭代(不合法)的条件",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"m, n 坐标已经使用过;"),(0,i.kt)("li",{parentName:"ol"},"m, n 坐标位于边界而且 board","[m][n]"," 为 'O'"),(0,i.kt)("li",{parentName:"ol"},"board","[m][n]"," 为 'X'")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {character[][]} board\n * @return {void} Do not return anything, modify board in-place instead.\n */\nvar solve = function(board) {\n  const used = []\n  for (let m = 0; m < board.length; m++) {\n    for (let n = 0; n < board[m].length; n++) {\n      if (used.indexOf(`${m},${n}`) === -1) {\n        recursive(board, m, n, used)\n      }\n    }\n  }\n  return board\n};\n\nvar direction = [[1, 0], [0, 1], [-1, 0], [0, -1]] // 下、右、上、左\n\n// m: row; n: column\nvar isValid = (board, m, n, used) => {\n  if (!board[m] || !board[m][n]) return false\n  const notUsed = used.indexOf(`${m},${n}`) === -1\n  used.push(`${m},${n}`)\n  return notUsed\n}\n\n// judge if it is in board\nvar isInBorder = (board, m, n) => m === 0 || n === 0 || m === board.length - 1 || n === board[0].length - 1\n\nvar recursive = function(board, m, n, used) {\n  // end condition.\n  if (!isValid(board, m, n, used) || (isInBorder(board, m, n) && board[m][n] === 'O') || board[m][n] === 'X') {\n    return false\n  }\n  for (let i = 0; i < direction.length; i++) {\n    const tag = recursive(board, m + direction[i][0], n + direction[i][1], used)\n    // recursive to set value\n    if (tag && board[m][n] === 'O') {\n      board[m][n] = 'X'\n    }\n    // 若不在边界的坐标 m,n 四周的值都不合理, 且 borad[m][n] === 'O', 则要让 board[m][n] = 'X'\n    // todo: board[m][n - 1] === 'O'\n    if (i === 3 && !isInBorder(board, m, n) && board[m][n] === 'O') {\n      board[m][n] = 'X'\n    }\n  }\n  return true\n}\n")),(0,i.kt)("p",null,"「若不在边界的坐标 m,n 四周的值都不合理, 且 borad","[m][n]"," === 'O', 则要让 board","[m][n]"," = 'X'」, 这个条件在如下测试用例面前是过不去的砍👀"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"O O O\nO O O\nO O O\n")),(0,i.kt)("p",null,"观察评论区调整了下思路:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"将边界的 O 以及与其相连的 O 标记为 ",(0,i.kt)("inlineCode",{parentName:"li"},"_"),"。"),(0,i.kt)("li",{parentName:"ol"},"遍历节点",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"将剩余的 O 全部替换为 X。"),(0,i.kt)("li",{parentName:"ol"},"将全部的 _ 替换为 O。")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"点子比行动更重要！")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {character[][]} board\n * @return {void} Do not return anything, modify board in-place instead.\n */\nvar solve = function(board) {\n  const used = []\n  for (let m = 0; m < board.length; m++) {\n    for (let n = 0; n < board[m].length; n++) {\n      if (isInBorder(m, n, board) && board[m][n] === 'O') {\n        replaceWith_(board, m, n, used)\n      }\n    }\n  }\n\n  for (let m = 0; m < board.length; m++) {\n    for (let n = 0; n < board[m].length; n++) {\n      if (board[m][n] === 'O') {\n        board[m][n] = 'X'\n      }\n      if (board[m][n] === '_') {\n        board[m][n] = 'O'\n      }\n    }\n  }\n  return board\n};\n\n// judge if it is in board\nvar isInBorder = (m, n, board) => m === 0 || n === 0 || m === board.length - 1 || n === board[0].length - 1\n\nvar isValid = (board, m, n, used) => {\n  if (!board[m] || !board[m][n]) return false\n  const notUsed = used.indexOf(`${m},${n}`) === -1\n  used.push(`${m},${n}`)\n  return notUsed\n}\n\nvar direction = [[1, 0], [0, 1], [-1, 0], [0, -1]] // 下、右、上、左\n\nvar replaceWith_ = (board, m, n, used) => {\n  if (!isValid(board, m, n, used) || board[m][n] === 'X') return\n  if (board[m][n] === 'O') {\n    board[m][n] = '_'\n  }\n\n  for (let i = 0; i < direction.length; i++) {\n    replaceWith_(board, m + direction[i][0], n + direction[i][1], used)\n  }\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"79、200"))}c.isMDXComponent=!0},42783:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"131.Palindrome Partitioning"),(0,i.kt)("p",null,"Given a string s, partition s such that every substring of the partition is a palindrome."),(0,i.kt)("p",null,"Return ",(0,i.kt)("inlineCode",{parentName:"p"},"all possible palindrome partitioning")," of s."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "aab"\nOutput:\n[\n  ["aa","b"],\n  ["a","a","b"]\n]\n')),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"本题为",(0,i.kt)("inlineCode",{parentName:"p"},"回溯法"),"的典型案例。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"a",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"a",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"b √"))),(0,i.kt)("li",{parentName:"ul"},"ab"))),(0,i.kt)("li",{parentName:"ul"},"aa",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"b   √"))),(0,i.kt)("li",{parentName:"ul"},"aab")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {string[][]}\n */\nvar partition = function(s) {\n  const result = []\n  partitionSub(s, 0, [], result)\n  return result\n};\n\nvar partitionSub = function(s, start, arr, result) {\n  if (arr.join('').length === s.length) {\n    result.push([...arr])\n    return\n  }\n  for (let i = start + 1; i <= s.length; i++) {\n    const curSubString = s.slice(start, i)\n    if (ifPalindrome(curSubString)) {\n      arr.push(curSubString)\n      partitionSub(s, i, arr, result)\n      arr.pop() // key code for back track\n    } else {\n      continue\n    }\n  }\n}\n\n// judge if it's palindrome\nvar ifPalindrome = function(curSubString) {\n  return curSubString === curSubString.split('').reverse().join('')\n}\n")),(0,i.kt)("h3",null,"推荐指数"),(0,i.kt)("p",null,"※※※※※"),(0,i.kt)("h3",null,"相关问题"),(0,i.kt)("p",null,"46"))}c.isMDXComponent=!0},98784:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"编写一个函数来查找字符串数组中的最长公共前缀。"),(0,i.kt)("p",null,'如果不存在公共前缀, 返回空字符串 ""。'),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'输入: ["flower","flow","flight"]\n输出: "fl"\n')),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'输入: ["dog","racecar","car"]\n输出: ""\n解释: 输入不存在公共前缀。\n')),(0,i.kt)("p",null,"说明:"),(0,i.kt)("p",null,"所有输入只包含小写字母 a-z 。"),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"emm, 虽然是道简单难度的题目, 但是通过率不是很高, 大多数应该是方法没有采取恰当。思路可以如下:"),(0,i.kt)("p",null,"1.选取数组的第一个值 str\n2.让数组中的每个值分别 indexOf(str), 如果 indexOf(str) !== 0, 则让 str = str.slice(0, str.length - 1)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string[]} strs\n * @return {string}\n */\nvar longestCommonPrefix = function (strs) {\n  if (strs.length === 0) return ''\n\n  let str = strs[0]\n\n  for (let i = 0; i < strs.length; i++) {\n    while (strs[i].indexOf(str) !== 0) {\n      str = str.slice(0, str.length - 1)\n      if (str.length === 0) { return '' }\n    }\n  }\n\n  return str\n};\n")))}c.isMDXComponent=!0},11401:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"143.Reorder List"),(0,i.kt)("p",null,"Given a singly linked list L: L0 → L1 → .. → Ln-1 → Ln,\nreorder it to: L0 → Ln → L1 → Ln-1 → L2 → Ln-2 →"),(0,i.kt)("p",null,"You may ",(0,i.kt)("inlineCode",{parentName:"p"},"not modify the values in the list's nodes"),", only nodes itself may be changed."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Given 1->2->3->4, reorder it to 1->4->2->3.\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Given 1->2->3->4->5, reorder it to 1->5->2->4->3.\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"这道题可作如下转化:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"步骤一: 找到链表中点后分割其为 left 链表、right 链表两部分;"),(0,i.kt)("li",{parentName:"ol"},"步骤二: 翻转 right 链表, 翻转链表思路同 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/206.Reverse_Linked_List/README.md"}),"206.Reverse_Linked_List"),";"),(0,i.kt)("li",{parentName:"ol"},"步骤三: 接着从 left 链表的左侧, 翻转后的 right 链表的左侧各取一个值进行交替拼接;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"快慢指针即 quick 指针每次走两步, slow 指针每次走一步, 同 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/148.Sort_List/README.md"}),"148.Sort_List"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"                   s               q\ndummy -> 1 -> 2 -> 3 -> 4 -> 5 -> NULL\n\n步骤一: 拆分 head 链表成 `left`、`right` 两个链表;\n\nl\n1 -> 2 -> 3 -> null\n\nr\n4 -> 5 -> NULL\n\n步骤二: 翻转 right 链表\n\nl\n1 -> 2 -> 3 -> null\n\nr\n5 -> 4 -> NULL\n\n步骤三: 衔接 left、right 两个链表;\n\n          l\n1 -> 5 -> 2 -> 3 -> NULL\n\nr\n4 -> NULL\n")),(0,i.kt)("p",null,"步骤二中翻转链表的图解大致如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"})," cur  next\n  1 -> 2 -> 3 -> null\n\n       prev cur\nnull <- 1 <- 2 -> 3 -> null\n\n            prev cur\nnull <- 1 <- 2 <- 3 -> null\n\n                 prev\nnull <- 1 <- 2 <- 3 -> null\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @return {void} Do not return anything, modify head in-place instead.\n */\nvar reorderList = function(head) {\n  const dummy = new ListNode(0)\n  dummy.next = head\n\n  let slow = dummy\n  let quick = dummy\n\n  while (quick && quick.next) {\n    slow = slow.next\n    quick = quick.next\n    quick = quick.next\n  }\n\n  let right = slow.next\n  slow.next = null\n  let left = dummy.next\n\n  right = reverseList(right)\n\n  while (left && right) {\n    let lNext = left.next\n    let rNext = right.next\n    right.next = left.next\n    left.next = right\n    left = lNext\n    right = rNext\n  }\n\n  return dummy.next\n}\n\nvar reverseList = (list) => {\n  let prev = null\n  let cur = list\n\n  while (cur) {\n    let next = cur.next\n    cur.next = prev\n\n    prev = cur\n    cur = next\n  }\n\n  return prev\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/3f207867435faf3edeeb4e9d2f5f5b29.jpg",alt:null}))),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"148(快慢指针)、234"))}c.isMDXComponent=!0},59511:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"144.Binary Tree Preorder Traversal"),(0,i.kt)("p",null,"Given a binary tree, return the ",(0,i.kt)("inlineCode",{parentName:"p"},"preorder traversal")," of its nodes' values."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: [1,null,2,3]\n   1\n  / \\\nnull 2\n    / \\\n   3 null\n\nOutput: [1,2,3]\n")),(0,i.kt)("p",null,"Follow up: Recursive solution is trivial, could you do it ",(0,i.kt)("inlineCode",{parentName:"p"},"iteratively"),"?"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"构建 tree"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var tree1 = new TreeNode(1)\nvar tree2 = new TreeNode(2)\nvar tree3 = new TreeNode(3)\ntree2.left = tree3\ntree1.left = null\ntree1.right = tree2\n")),(0,i.kt)("h3",null,"递归法"),(0,i.kt)("p",null,"首先给出递归解法, 代码很简洁。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[]}\n */\nvar preorderTraversal = function(root) {\n  if (root) {\n    return [root.val, ...preorderTraversal(root.left), ...preorderTraversal(root.right)]\n  } else {\n    return []\n  }\n}\n")),(0,i.kt)("h3",null,"扩展 —— 递归和栈的关系"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"     1\n    / \\\n   2   5\n  / \\\n 3   4\n")),(0,i.kt)("p",null,"针对如图剖析树在先序遍历下的递归操作, 其执行过程如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"步骤一: 将根节点 1 推入栈;"),(0,i.kt)("li",{parentName:"ul"},"步骤二: 从栈中取出顶部元素 1 并打印。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"由于存在右节点 5, 将其推入栈中;"),(0,i.kt)("li",{parentName:"ul"},"由于存在左节点 2, 将其推入栈中;"))),(0,i.kt)("li",{parentName:"ul"},"步骤三: 从栈中取出顶部元素 2 并打印。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"由于存在右节点 4, 将其推入栈中;"),(0,i.kt)("li",{parentName:"ul"},"由于存在左节点 3, 将其推入栈中;"))),(0,i.kt)("li",{parentName:"ul"},"步骤四: 从栈中取出顶部元素 3 并打印。"),(0,i.kt)("li",{parentName:"ul"},"步骤五: 从栈中取出顶部元素 4 并打印。"),(0,i.kt)("li",{parentName:"ul"},"步骤六: 从栈中取出顶部元素 5 并打印。")),(0,i.kt)("p",null,"模拟系统栈实现图解:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"步骤一:\n1\n\n步骤二: 取出 1 并打印;\n2\n5\n\n步骤三: 取出 2 并打印;\n3\n4\n5\n\n步骤四: 取出 3 并打印;\n步骤四: 取出 4 并打印;\n步骤四: 取出 5 并打印;\n")),(0,i.kt)("p",null,"代码实现:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[]}\n */\nvar preorderTraversal = function(root) {\n  const printArr = []\n  const stack = []\n  if (!root) return []\n  stack.push(root)\n  while (stack.length > 0) {\n    const popValue = stack.pop()\n    printArr.push(popValue.val)\n    popValue.right && stack.push(popValue.right)\n    popValue.left && stack.push(popValue.left)\n  }\n  return printArr\n}\n")),(0,i.kt)("h3",null,"颜色标记法(迭代法, 模拟系统栈)"),(0,i.kt)("p",null,"使用",(0,i.kt)("inlineCode",{parentName:"p"},"颜色标记法"),"剖析树在中序遍历下的递归操作, 思路如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"将访问过的元素标记为灰色, 未访问过的元素标记为白色;"),(0,i.kt)("li",{parentName:"ol"},"从栈顶取出访问元素:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"若为灰色元素, 则打印之;"),(0,i.kt)("li",{parentName:"ol"},"若为白色元素, 按照",(0,i.kt)("inlineCode",{parentName:"li"},"右 -> 左 -> 中"),"的顺序推入栈, 同时将白色元素标记为灰色元素;")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"推荐使用颜色标记法, 它的解题思路适用于解前序、中序、后序遍历。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"     1\n    / \\\n   2   5\n  / \\\n 3   4\n")),(0,i.kt)("p",null,"在如上所示树中, 模拟系统栈图解其执行过程如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"gray  1\nwhite 2\nwhite 5\n\nwhite 2\nwhite 5\n\ngray  2\nwhite 3\nwhite 4\nwhite 5\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[]}\n */\nvar preorderTraversal = function(root) {\n  const printArr = []\n  if (!root) return printArr\n  const stack = []\n  stack.push({\n    color: 'white',\n    node: root\n  })\n\n  while (stack.length > 0) {\n    const pickValue = stack.pop()\n    const { color, node } = pickValue\n    if (color === 'gray') {\n      printArr.push(node.val)\n    } else {\n      node.right && stack.push({ color: 'white', node: node.right })\n      node.left && stack.push({ color: 'white', node: node.left })\n      stack.push({ color: 'gray', node })\n    }\n  }\n\n  return printArr\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"94、145"))}c.isMDXComponent=!0},2579:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Binary Tree Postorder Traversal"),(0,i.kt)("p",null,"Given a binary tree, return the postorder traversal of its nodes' values."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: [1,null,2,3]\n   1\n    \\\n     2\n    /\n   3\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Output: [3,2,1]\n")),(0,i.kt)("p",null,"Follow up: Recursive solution is trivial, could you do it iteratively?"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function TreeNode(val) {\n  this.val = val\n  this.left = this.right = null\n}\n\nvar tree1 = new TreeNode(1)\nvar tree2 = new TreeNode(2)\nvar tree3 = new TreeNode(3)\ntree2.left = tree3\ntree1.left = null\ntree1.right = tree2\n")),(0,i.kt)("h3",null,"递归法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[]}\n */\nvar postorderTraversal = function(root) {\n  if (root) {\n    return [...postorderTraversal(root.left), ...postorderTraversal(root.right), root.val]\n  } else {\n    return []\n  }\n}\n")),(0,i.kt)("h3",null,"颜色标记法(迭代法, 模拟系统栈)"),(0,i.kt)("p",null,"使用",(0,i.kt)("inlineCode",{parentName:"p"},"颜色标记法"),"剖析树在中序遍历下的递归操作, 思路如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"将访问过的元素标记为灰色, 未访问过的元素标记为白色;"),(0,i.kt)("li",{parentName:"ol"},"从栈顶取出访问元素:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"若为灰色元素, 则打印之;"),(0,i.kt)("li",{parentName:"ol"},"若为白色元素, 按照",(0,i.kt)("inlineCode",{parentName:"li"},"中 -> 右 -> 左"),"的顺序推入栈, 同时将白色元素标记为灰色元素;")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"推荐使用颜色标记法, 它的解题思路适用于解前序、中序、后序遍历。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"     1\n    / \\\n   2   5\n  / \\\n 3   4\n")),(0,i.kt)("p",null,"在如上所示树中, 模拟系统栈图解其执行过程如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"gray  1\nwhite 2\nwhite 5\n\nwhite 2\nwhite 5\n\ngray  2\nwhite 3\nwhite 4\nwhite 5\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[]}\n */\nvar postorderTraversal = function(root) {\n  const printArr = []\n  if (!root) return printArr\n  const stack = []\n  stack.push({ color: 'white', node: root })\n\n  while (stack.length > 0) {\n    const { color, node } = stack.pop()\n    if (color === 'gray') {\n      printArr.push(node.val)\n    } else {\n      stack.push({ color: 'gray', node })\n      node.right && stack.push({ color: 'white', node: node.right })\n      node.left && stack.push({ color: 'white', node: node.left })\n    }\n  }\n\n  return printArr\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"94、144"))}c.isMDXComponent=!0},65122:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Insertion_Sort_List"),(0,i.kt)("p",null,"Sort a linked list using insertion sort."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://upload.wikimedia.org/wikipedia/commons/0/0f/Insertion-sort-example-300px.gif",alt:null}))),(0,i.kt)("p",null,"A graphical example of insertion sort. The partial sorted list (black) initially contains only the first element in the list.\nWith each iteration one element (red) is removed from the input data and inserted in-place into the sorted list."),(0,i.kt)("p",null,"Algorithm of Insertion Sort:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Insertion sort iterates, consuming one input element each repetition, and growing a sorted output list."),(0,i.kt)("li",{parentName:"ol"},"At each iteration, insertion sort removes one element from the input data, finds the location it belongs within the sorted list, and inserts it there."),(0,i.kt)("li",{parentName:"ol"},"It repeats until no input elements remain.")),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 4->2->1->3\nOutput: 1->2->3->4\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: -1->5->3->4->0\nOutput: -1->0->3->4->5\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"head0: 当前已排序列表的最后一个;\npre: 用于遍历当前已排序列表;"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"       head0\ndummy -> 4 -> 2 -> 1 -> 3\n            .\n            .\npre    head0\ndummy -> 4 -> 2 -> 1 -> 3\n            .\n            .\npre         head0\ndummy -> 2 -> 4 -> 1 -> 3\n            .\n            .\n             pre head0\ndummy -> 1 -> 2 -> 4 -> 3\n            .\n            .\n                      head0\ndummy -> 1 -> 2 -> 3 -> 4\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"        head0\ndummy -> -1 -> 5 -> 3 -> 4 -> 0\n              .\n              .\n         pre head0\ndummy -> -1 -> 5 -> 3 -> 4 -> 0\n              .\n              .\n              pre head0\ndummy -> -1 -> 3 -> 5 -> 4 -> 0\n              .\n              .\n              pre head0\ndummy -> -1 -> 3 -> 5 -> 4 -> 0\n              .\n              .\n         pre           head0\ndummy -> -1 -> 3 -> 4 -> 5 -> 0\n              .\n              .\n                            head0\ndummy -> -1 -> 0 -> 3 -> 4 -> 5\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar insertionSortList = function(head) {\n  const dummy = new ListNode(0)\n  dummy.next = head\n  let head0 = dummy.next\n\n  while (head0 && head0.next) {\n    if (head0.next.val >= head0.val) {\n      head0 = head0.next\n      continue\n    }\n\n    let pre = dummy\n    while (pre.next.val < head0.next.val) { pre = pre.next }\n\n    let next = head0.next\n    head0.next = next.next\n    next.next = pre.next\n    pre.next = next\n  }\n\n  return dummy.next\n}\n")),(0,i.kt)("h3",null,"姊妹题"),(0,i.kt)("p",null,"148"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/d0cee500a18a46b76ed67016484973e2.jpg",alt:null}))))}c.isMDXComponent=!0},69170:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Sort List"),(0,i.kt)("p",null,"Sort a linked list in ",(0,i.kt)("inlineCode",{parentName:"p"},"O(n logn)")," time using ",(0,i.kt)("inlineCode",{parentName:"p"},"constant space")," complexity."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 4->2->1->3\nOutput: 1->2->3->4\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: -1->5->3->4->0\nOutput: -1->0->3->4->5\n")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"根据题意的要求, 锁定使用",(0,i.kt)("inlineCode",{parentName:"p"},"归并排序"),"算法, 但是相对数组的归并排序, 有以下两个难点:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"问题一: 如何确认链表的中点?"),(0,i.kt)("li",{parentName:"ul"},"问题二: 链表如何 merge?")),(0,i.kt)("p",null,"针对问题一, 可以使用",(0,i.kt)("inlineCode",{parentName:"p"},"快慢指针"),"来确认链表的中点, 快指针每次走两步, 慢指针每次走一步, 慢指针最后的位置就是链表的中点位置, 步骤图解如下:"),(0,i.kt)("p",null,"针对奇数情形:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"          slow\n          quick\ndummy  ->  1  ->  null\n\n                 slow  quick\ndummy  ->  4  ->  2  ->  1  ->  null\n\n偶数:\n          slow  quick\ndummy  ->  1  ->  2  ->  null\n")),(0,i.kt)("p",null,"针对偶数情形:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"          slow   quick\ndummy  ->  1  ->  2  ->  null\n")),(0,i.kt)("p",null,"此外另外一个难点是如何进行 merge 操作。大体思路为"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"在 leftList 中找到比 rNode 小且最接近 rNode 的值 lNode;"),(0,i.kt)("li",{parentName:"ol"},"将 rNode 插入 lNode 的后面;")),(0,i.kt)("p",null,"步骤图解如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"lNode                         rNode\ndummy -> 1 -> 3 -> null         2 -> 4 -> null\n\n             lNode            rNode\ndummy -> 1 -> 2 -> 3 -> null    4 -> null\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var sortList = function(head) {\n  const dummy = new ListNode(0)\n  dummy.next = head\n  let head0 = dummy.next\n\n  let slow = dummy, quick = dummy\n  while (quick.next) {\n    quick = quick.next\n    slow = slow.next\n    quick.next && (quick = quick.next)\n  }\n  // if the slow list is equal to the quick list, it means the current list only has one node.\n  if (slow === quick) return dummy.next\n  let rightList = slow.next\n  slow.next = null\n  let leftList = dummy\n  return merge(sortList(leftList.next), sortList(rightList))\n}\n\nvar merge = function(leftList, rightList) {\n  const dummy = new ListNode(0)\n  dummy.next = leftList\n  let lNode = dummy\n  let rNode = rightList\n\n  while (lNode && rNode) {\n    while (lNode.next && lNode.next.val < rNode.val) {\n      lNode = lNode.next\n    }\n    let rNext = rNode.next\n    rNode.next = lNode.next\n    lNode.next = rNode\n    rNode = rNext\n  }\n  return dummy.next\n}\n")),(0,i.kt)("h3",null,"姊妹题"),(0,i.kt)("p",null,"147、143、234"))}c.isMDXComponent=!0},46427:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"Given n points on a 2D plane, find the maximum number of points that lie on the same straight line."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: [[1,1],[2,2],[3,3]]\nOutput: 3\nExplanation:\n^\n|\n|        o\n|     o\n|  o  \n+-------------\x3e\n0  1  2  3  4\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Example 2:\n\nInput: [[1,1],[3,2],[5,3],[4,1],[2,3],[1,4]]\nOutput: 4\nExplanation:\n^\n|\n|  o\n|     o        o\n|        o\n|  o        o\n+-------------------\x3e\n0  1  2  3  4  5  6\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"需要考虑的条件",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"points 中的值是否会重合?"),(0,i.kt)("li",{parentName:"ul"},"针对除不尽的数字, 精度问题是否需要考虑?"),(0,i.kt)("li",{parentName:"ul"},"传入参数个数;"))),(0,i.kt)("li",{parentName:"ul"},"为避免除法带来的问题, 可以求最大公约数, 将 9/6, 18/12 转化为 3/2;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"在同一排可以表示为 '0/x', 在同一列可以表示为 'y/0';"),(0,i.kt)("li",{parentName:"ul"},"重合的点可以表示为 '0/0', 并用变量 samePoint 来记录它;")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"求最大公约数用到了数学中的辗转相除法: 两个正整数 a 和 b(a>b), 它们的最大公约数等于 a 除以 b 的余数 c 和 b 之间的最大公约数。比如 25 和 10, 25 除以 10 商 2 余 5, 那么 25 和 10 的最大公约数, 等同于 10 和 5 的最大公约数。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} points\n * @return {number}\n */\nvar maxPoints = function(points) {\n  if (points.length === 0) return 0\n  if (points.length === 1) return 1\n  const getFractions = (pointsdiffX, pointsdiffY) => {\n    if (pointsdiffX === 0 && pointsdiffY !== 0) return `y/0`\n    if (pointsdiffX !== 0 && pointsdiffY === 0) return `0/x`\n    if (pointsdiffX === 0 && pointsdiffY === 0) return `0/0`\n    const gcdValue = gcd(pointsdiffY, pointsdiffX)\n    const numerator = pointsdiffY / gcdValue\n    const denominator = pointsdiffX / gcdValue\n    return `${numerator}/${denominator}`\n  }\n\n  const gcd = (a, b) => {\n    if (b === 0) {\n      return a\n    }\n    return gcd(b, a % b)\n  }\n\n  let result = 0\n\n  for (let m = 0; m < points.length; m++) {\n    const map = new Map()\n    let samePoint = 0\n    for (let n = 0; n < points.length; n++) {\n      if (m !== n) {\n        const pointsdiffX = points[n][0] - points[m][0]\n        const pointsdiffY = points[n][1] - points[m][1]\n        if (pointsdiffX === 0 && pointsdiffY === 0) {\n          samePoint++\n        }\n        const fractions = getFractions(pointsdiffX, pointsdiffY)\n        if (map.has(fractions)) {\n          map.set(fractions, map.get(fractions) + 1)\n        } else {\n          map.set(fractions, 1)\n        }\n      }\n    }\n    map.forEach((value, key) => {\n      if (key !== '0/0') {\n        result = Math.max(result, value + samePoint + 1)\n      } else {\n        result = Math.max(result, value + 1)\n      }\n    })\n  }\n\n  return result\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/490006ca96e92c2bbcbca3856d71c1df.jpg-400",alt:null}))),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"149"))}c.isMDXComponent=!0},42379:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"Given an array nums of n integers, are there elements a, b, c in nums such that a + b + c = 0? Find all unique triplets in the array which gives the sum of zero."),(0,i.kt)("p",null,"Note:"),(0,i.kt)("p",null,"The solution set must not contain duplicate triplets."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Given array nums = [-1, 0, 1, 2, -1, -4],\n\nA solution set is:\n[\n  [-1, 0, 1],\n  [-1, -1, 2]\n]\n")),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"相关思路:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"排序;"),(0,i.kt)("li",{parentName:"ol"},"查找表;"),(0,i.kt)("li",{parentName:"ol"},"双指针;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number[][]}\n */\nvar threeSum = function (nums) {\n  const sortNums = nums.sort((r1, r2) => r1 - r2)\n  let targetValue\n  const cacheMap = new Map()\n  const result = []\n\n  for (let i = 0; i < sortNums.length - 2; i++) {\n    targetValue = -sortNums[i]\n    let l = i + 1\n    let r = sortNums.length - 1\n\n    while (l < r) {\n      let tmpArr = []\n      const mapValue = cacheMap.get(`${-targetValue}${sortNums[l]}${sortNums[r]}`)\n      if (sortNums[l] + sortNums[r] === targetValue && !mapValue) {\n        tmpArr.push(-targetValue)\n        tmpArr.push(sortNums[l])\n        tmpArr.push(sortNums[r])\n        result.push(tmpArr)\n        cacheMap.set(`${-targetValue}${sortNums[l]}${sortNums[r]}`, true)\n        l++\n        r--\n      } else if (sortNums[l] + sortNums[r] === targetValue && mapValue) {\n        l++\n      }else if (sortNums[l] + sortNums[r] > targetValue) {\n        r--\n      }else if (sortNums[l] + sortNums[r] < targetValue) {\n        l++\n      }\n    }\n  }\n\n  return result\n}\n")),(0,i.kt)("p",null,"此时通过测试用例的情况为 312/313, 差一个包含 3000 个 0 数组的测试用例没通过; 根据评论区的提示, 缺少了",(0,i.kt)("inlineCode",{parentName:"p"},"对解进行去重"),"这个步骤(卡主大部分人的原因), 优化如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number[][]}\n */\nvar threeSum = function (nums) {\n  const sortNums = nums.sort((r1, r2) => r1 - r2)\n  let targetValue\n  const result = []\n\n  for (let i = 0; i < sortNums.length - 2; i++) {\n    // 针对下标 i 对应的值进行去重\n    if (i === 0 || nums[i] > nums[i - 1]) {\n      targetValue = -sortNums[i]\n      let l = i + 1\n      let r = sortNums.length - 1\n\n      while (l < r) {\n        let tmpArr = []\n        if (sortNums[l] + sortNums[r] === targetValue) {\n          tmpArr.push(-targetValue)\n          tmpArr.push(sortNums[l])\n          tmpArr.push(sortNums[r])\n          result.push(tmpArr)\n          l++\n          r--\n          // 针对下标 l 对应的值进行去重, r 同理\n          while (l < r && sortNums[l] === sortNums[l - 1]) {\n            l++\n          }\n          while (l < r && sortNums[r] === sortNums[r + 1]) {\n            r--\n          }\n        } else if (sortNums[l] + sortNums[r] > targetValue) {\n          r--\n        } else if (sortNums[l] + sortNums[r] < targetValue) {\n          l++\n        }\n      }\n    }\n  }\n\n  return result\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/10dda8915d98182962f44344244e8b5a.jpg-400",alt:null}))),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"1、16、18"))}c.isMDXComponent=!0},2848:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"150.Evaluate Reverse Polish Notation"),(0,i.kt)("p",null,"Evaluate the value of an arithmetic expression in Reverse Polish Notation."),(0,i.kt)("p",null,"Valid operators are ",(0,i.kt)("inlineCode",{parentName:"p"},"+, -, *, /"),". Each operand may be an ",(0,i.kt)("inlineCode",{parentName:"p"},"integer")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"another expression"),"."),(0,i.kt)("p",null,"Note:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Division between two integers should truncate toward zero."),(0,i.kt)("li",{parentName:"ul"},"The given RPN expression is ",(0,i.kt)("inlineCode",{parentName:"li"},"always valid"),". That means the expression would always evaluate to a result and there won't be any divide by zero operation.")),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: ["2", "1", "+", "3", "*"]\nOutput: 9\n\nExplanation: ((2 + 1) * 3) = 9\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: ["4", "13", "5", "/", "+"]\nOutput: 6\n\nExplanation: (4 + (13 / 5)) = 6\n')),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: ["10", "6", "9", "3", "+", "-11", "*", "/", "*", "17", "+", "5", "+"]\nOutput: 22\n\nExplanation:\n  ((10 * (6 / ((9 + 3) * -11))) + 17) + 5\n= ((10 * (6 / (12 * -11))) + 17) + 5\n= ((10 * (6 / -132)) + 17) + 5\n= ((10 * 0) + 17) + 5\n= (0 + 17) + 5\n= 17 + 5\n= 22\n')),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"栈的使用, 思路大致如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"遇到数字推入栈;"),(0,i.kt)("li",{parentName:"ol"},"遇到符号则从栈中取出最后两位进行数学操作;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"稍加留意的是, 需要对 / 运算进行取整操作;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string[]} tokens\n * @return {number}\n */\nvar evalRPN = function(tokens) {\n  const stack = []\n  const operateTag = ['+', '-', '*', '/']\n  for (let i = 0; i < tokens.length; i++) {\n    const operateTagIndex = operateTag.indexOf(tokens[i])\n    if (operateTagIndex === -1) {\n      stack.push(tokens[i])\n    } else {\n      const y = stack.pop()\n      const x = stack.pop()\n      let result\n      if (operateTagIndex === 0) {\n        result = Number(x) + Number(y)\n      } else if (operateTagIndex === 1) {\n        result = Number(x) - Number(y)\n      } else if (operateTagIndex === 2) {\n        result = Number(x) * Number(y)\n      } else if (operateTagIndex === 3) {\n        result = parseInt((Number(x) / Number(y)), 10)\n      }\n      stack.push(result)\n    }\n  }\n  return stack[0]\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"20、71"))}c.isMDXComponent=!0},74803:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"/**"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"@param {string} str")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"@returns {string}\n*/\nvar reverseWords = function (str) {\nconst handleStr = str.trim().replace(/\\s\\s+/g, ' ')\nconst reverseStr = handleStr.split(' ').reverse().join(' ')"),(0,i.kt)("p",{parentName:"li"},"  return reverseStr\n};"))))}c.isMDXComponent=!0},30571:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"Given an array nums of n integers and an integer target, find three integers in nums such that the sum is closest to target. Return the sum of the three integers. You may assume that each input would have exactly one solution."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Given array nums = [-1, 2, 1, -4], and target = 1.\n\nThe sum that is closest to the target is 2. (-1 + 2 + 1 = 2).\n")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"1.排序;\n2.有个巧妙的地方, 比较三个数之和与 target 的大小, 具体看题解;"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} target\n * @return {number}\n */\nvar threeSumClosest = function (nums, target) {\n  let sum = 0\n  let close = nums[0] + nums[1] + nums[2]\n  let sortedNums = nums.sort((a, b) => a - b)\n\n  for (let i = 0; i < sortedNums.length; i++) {\n    let l = i + 1, r = sortedNums.length - 1\n    while (l < r) {\n      // 分别对应左、中、右三个下标对应的值\n      sum = nums[i] + nums[l] + nums[r]\n      if (Math.abs(sum - target) < Math.abs(close - target)) {\n        close = sum\n      }\n      if (sum < target) {\n        l++\n      } else if (sum > target) {\n        r--\n      } else {\n        return sum\n      }\n    }\n  }\n  return close\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"1、15、18"))}c.isMDXComponent=!0},29178:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"给定一个已按照升序排列的",(0,i.kt)("inlineCode",{parentName:"p"},"有序数组"),"，找到两个数使得它们相加之和等于目标数。"),(0,i.kt)("p",null,"函数应该返回这两个下标值 index1 和 index2, 其中 index1 必须小于 index2。"),(0,i.kt)("p",null,"说明:"),(0,i.kt)("p",null,"返回的下标值(index1 和 index2)不是从零开始的。\n你可以假设每个输入只对应唯一的答案，而且你不可以重复使用相同的元素。"),(0,i.kt)("p",null,"示例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: numbers = [2, 7, 11, 15], target = 9\n输出: [1, 2]\n解释: 2 与 7 之和等于目标数 9。因此 index1 = 1, index2 = 2。\n")),(0,i.kt)("h3",null,"题解"),(0,i.kt)("p",null,"注意题目给出的条件 ",(0,i.kt)("inlineCode",{parentName:"p"},"有序数组")),(0,i.kt)("p",null,"解法一: 因为是有序数组, 题目可以转化为: 第一个值的下标为 ",(0,i.kt)("inlineCode",{parentName:"p"},"i")," 时, 在剩余的有序数组中寻找 ",(0,i.kt)("inlineCode",{parentName:"p"},"target - number[i]"),"。因而该算法时间复杂度为 ",(0,i.kt)("inlineCode",{parentName:"p"},"O(NlogN)"),"。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/4bd2e0a2986f09b8efa56972810291d4.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} numbers\n * @param {number} target\n * @return {number[]}\n */\nvar twoSum = function(numbers, target) {\n  for (let i = 0; i < numbers.length; i++) {\n    const index = binarySearch(numbers, target - numbers[i])\n    if (typeof(index) === 'number') {\n      return [i + 1, index + 1]\n    }\n  }\n}\n\nvar binarySearch = function(arr, value) {\n  let left = 0\n  let right = arr.length - 1\n\n  while (left <= right) {\n    const mid = left + Math.ceil((right - left) / 2)\n    if (arr[mid] === value) {\n      return mid\n    } else if (arr[mid] < value) {\n      left = mid + 1\n    } else if (arr[mid] > value) {\n      right = mid - 1\n    }\n  }\n  return null\n}\n")),(0,i.kt)("p",null,"解法二: 用",(0,i.kt)("inlineCode",{parentName:"p"},"对撞指针(双指针)"),"实现时间复杂度为 ",(0,i.kt)("inlineCode",{parentName:"p"},"O(n)")," 的算法。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} numbers\n * @param {number} target\n * @return {number[]}\n */\nvar twoSum = function(numbers, target) {\n  let left = 0\n  let right = numbers.length - 1\n\n  while (left <= right) {\n    const sum = numbers[left] + numbers[right]\n    if (sum === target) {\n      return [left + 1, right + 1]\n    } else if (sum > target) {\n      right--\n    } else if (sum < target) {\n      left++\n    }\n  }\n}\n")),(0,i.kt)("h3",null,"相似问题"),(0,i.kt)("p",null,"125、344、345"))}c.isMDXComponent=!0},49674:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"17.Letter Combinations of a Phone Number"),(0,i.kt)("p",null,"Given a string containing digits from 2-9 inclusive, return all possible letter combinations that the number could represent. Return the answer in any order."),(0,i.kt)("p",null,"A mapping of digit to letters (just like on the telephone buttons) is given below. Note that 1 does not map to any letters."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Telephone-keypad2.svg/200px-Telephone-keypad2.svg.png",alt:null}))),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: digits = "23"\nOutput: ["ad","ae","af","bd","be","bf","cd","ce","cf"]\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: digits = ""\nOutput: []\n')),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: digits = "2"\nOutput: ["a","b","c"]\n')),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"0 <= digits.length <= 4"),(0,i.kt)("li",{parentName:"ul"},"digits","[i]"," is a digit in the range ","['2', '9']",".")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"方法一: 回溯法递归。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} digits\n * @return {string[]}\n */\nvar letterCombinations = function(digits) {\n  if (digits === '') return []\n  const result = []\n\n  combinations(digits, 0, '', result)\n  return result\n};\n\n/**\n * digits: analyze digit\n * index: current iterator number\n * s: prev total string\n */\nvar combinations = (digits, index, s, result) => {\n  if (index === digits.length) {\n    result.push(s)\n    return\n  }\n\n  const char = digits[index]\n  const map = {\n    '2': 'abc',\n    '3': 'def',\n    '4': 'ghi',\n    '5': 'jkl',\n    '6': 'mno',\n    '7': 'pqrs',\n    '8': 'tuv',\n    '9': 'wxyz'\n  }\n\n  const charMapString = map[char]\n\n  for (let i = 0; i < charMapString.length; i++) {\n    combinations(digits, index + 1, s + charMapString[i], result)\n  }\n}\n")),(0,i.kt)("p",null,"方法二: 运用队列的思想。拿 '23' 举例, 第一轮先放进 'abc', 第二轮分别以队列的方式对 a、b、c 分别进行操作 push 进 def。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} digits\n * @return {string[]}\n */\nvar letterCombinations = function (digits) { // '23'\n  const keyString = [\n    '',\n    '',\n    'abc',\n    'def',\n    'ghi',\n    'jkl',\n    'mno',\n    'pqrs',\n    'tuv',\n    'wxyz',\n  ]\n\n  if (digits === '' || digits.length === 0) {\n    return []\n  }\n\n  const result = ['']\n\n  for (let x of digits) {\n    const size = result.length\n    for (let i = 0; i < size; i++) {\n      const old = result.shift()\n\n      for (let y of keyString[x]) {\n        result.push(old + y)\n      }\n    }\n  }\n  return result\n};\n")),(0,i.kt)("h3",null,"推荐指数"),(0,i.kt)("p",null,"※※※※※"))}c.isMDXComponent=!0},93e3:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"Given an array nums of n integers and an integer target, are there elements a, b, c, and d in nums such that a + b + c + d = target? Find all unique quadruplets in the array which gives the sum of target."),(0,i.kt)("p",null,"Note:"),(0,i.kt)("p",null,"The solution set must not contain duplicate quadruplets."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Given array nums = [1, 0, -1, 0, -2, 2], and target = 0.\n\nA solution set is:\n[\n  [-1,  0, 0, 1],\n  [-2, -1, 1, 2],\n  [-2,  0, 0, 2]\n]\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"题目 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/LeetCode/15.3Sum/README.md"}),"15")," 的加强版, 唯一区别是定义的指针数量增加了, 仍然需要注意",(0,i.kt)("inlineCode",{parentName:"p"},"解的去重"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} target\n * @return {number[][]}\n */\nvar fourSum = function(nums, target) {\n  const result = []\n  if (nums.length < 4) return result\n  const sortSum = nums.sort((n1, n2) => n1 - n2)\n  const length = sortSum.length\n  for (let i = 0; i < length - 3; i++) {\n    if (i === 0 || nums[i] > nums[i - 1]) {\n      let l = i + 1\n      let m = l + 1\n      while (l < length - 2) {\n        let r = length - 1\n        if (l === i + 1 || nums[l] > nums[l - 1]) {\n          while (m < length - 1 && m < r) {\n            let tmpArr = []\n            const sum = nums[i] + nums[l] + nums[m] + nums[r]\n            if (sum === target) {\n              tmpArr.push(nums[i])\n              tmpArr.push(nums[l])\n              tmpArr.push(nums[m])\n              tmpArr.push(nums[r])\n              result.push(tmpArr)\n              m++\n              r--\n              while (nums[m] === nums[m - 1]) {\n                m++\n              }\n              while (nums[r] === nums[r + 1]) {\n                r--\n              }\n            } else if (sum < target) {\n              m++\n            } else if (sum > target) {\n              r--\n            }\n          }\n        }\n        l++\n        m = l + 1\n      }\n    }\n  }\n  return result\n}\n\nfourSum([1, 0, -1, 0, -2, 2], 0)\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/9e8e7033246cfea3940af4fb03b3a363.jpg-400",alt:null}))),(0,i.kt)("p",null,"假设数组的长度为 n, 算法复杂度估计为 ",(0,i.kt)("inlineCode",{parentName:"p"},"(n - 3) * (等差数列)")," 即为 O(n^2)"),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"15、16"))}c.isMDXComponent=!0},40914:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Remove Nth Node From End of List"),(0,i.kt)("p",null,"Given a linked list, remove the n-th node from the end of list and return its head."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"Given linked list: 1->2->3->4->5, and n = 2."),(0,i.kt)("p",null,"After removing the second node from the end, the linked list becomes 1->2->3->5."),(0,i.kt)("p",null,"Note:"),(0,i.kt)("p",null,"Given n will always be ",(0,i.kt)("inlineCode",{parentName:"p"},"valid"),"."),(0,i.kt)("p",null,"Follow up:"),(0,i.kt)("p",null,"Could you do this ",(0,i.kt)("inlineCode",{parentName:"p"},"in one pass"),"?"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"对于删除链表节点的题目, 我们需要知道需删除链表节点的上一个节点。那如何找到需要删除节点的上一个节点呢?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"思路一: 遍历一遍链表得到链表个数 sum, 再次遍历链表则 ",(0,i.kt)("inlineCode",{parentName:"li"},"sum - n - 1")," 表示从正向数过来需删除的链表节点的上一个节点的位数;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"缺点: 这样需要两次遍历;"))),(0,i.kt)("li",{parentName:"ul"},"思路二: 使用双指针的思想确认要删除的节点;")),(0,i.kt)("p",null,"此外从题目的例子可以得到的线索:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"n 是从 1 开始的(不是从 0 开始);")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"1 -> 2 -> 3 -> 4 -> 5 -> null\n                .\n                .\n第一步: l 与 r 的距离为 n + 1;\n  l                r\ndummy -> 1 -> 2 -> 3 -> 4 -> 5 -> null\n                .\n                .\n第二步: 始终保持 l 与 r 的距离为 n + 1, 向右移动, 直到 r 为 null, 此时 l 的位置就是要删除节点上一个的位置。\n                   l               r\ndummy -> 1 -> 2 -> 3 -> 4 -> 5 -> null\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @param {number} n\n * @return {ListNode}\n */\nvar removeNthFromEnd = function(head, n) {\n  const dummy = new ListNode(0)\n  dummy.next = head\n  let l = dummy\n  let r = dummy\n  let offset = n + 1\n\n  while (offset--) {\n    r = r.next\n    if (offset > 1 && r === null) {\n      return dummy.next\n    }\n  }\n\n  while (r) {\n    r = r.next\n    l = l.next\n  }\n\n  l.next = l.next.next\n\n  return dummy.next\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/8a3c94502a50892aba7f4697487bde32.jpg",alt:null}))),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"61"))}c.isMDXComponent=!0},4185:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"198.House Robber"),(0,i.kt)("p",null,"You are a professional robber planning to rob houses along a street. Each house has a certain amount of money stashed, the only constraint stopping you from robbing each of them is that ",(0,i.kt)("inlineCode",{parentName:"p"},"adjacent houses have security systems connected")," and it will automatically contact the police if two adjacent houses were broken into on the same night."),(0,i.kt)("p",null,"Given an integer array nums representing the amount of money of each house, return the maximum amount of money you can rob tonight without alerting the police."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1,2,3,1]\nOutput: 4\n")),(0,i.kt)("p",null,"Explanation: Rob house 1 (money = 1) and then rob house 3 (money = 3).\nTotal amount you can rob = 1 + 3 = 4."),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [2,7,9,3,1]\nOutput: 12\n")),(0,i.kt)("p",null,"Explanation: Rob house 1 (money = 2), rob house 3 (money = 9) and rob house 5 (money = 1).\nTotal amount you can rob = 2 + 9 + 1 = 12."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Constraints:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"1 <= nums.length <= 100"),(0,i.kt)("li",{parentName:"ul"},"0 <= nums","[i]"," <= 400")))),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思考🤔:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"                                [0, n - 1]\n                            /       |  ...       \\             \\\n                    [2, n - 1]     [3, n - 1]    [4, n - 1]  ...  [n - 1]\n              /\n      [4, n - 1]: 此时找到了重复子项\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"状态的定义"),"(即函数的定义): 考虑偷取 ",(0,i.kt)("inlineCode",{parentName:"li"},"[m, n - 1]")," 范围内的房子"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"状态转移"),": f(0) = ",(0,i.kt)("inlineCode",{parentName:"li"},"Math.max(v(0) + f(2), v(1) + f(3), v(2) + f(4), ..., v(n - 3) + f(n - 1), v(n - 2), v(n - 1))"))),(0,i.kt)("p",null,"记忆化递归:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number}\n */\nvar rob = function(nums) {\n  return find(nums, {}, 0)\n}\n\nvar find = function(nums, cache, start) {\n  if (typeof nums[start] !== 'number') return 0\n  const length = nums.length\n  let sum = 0\n  for (let i = start; i < length; i++) {\n    if (typeof cache[i] !== 'number') {\n      cache[i] = find(nums, cache, i + 2)\n    }\n    sum = Math.max(sum, nums[i] + cache[i])\n  }\n  return sum\n}\n")),(0,i.kt)("p",null,"动态规划:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number}\n */\nvar rob = function(nums) {\n  const length = nums.length\n  const cache = {}\n  let max = 0\n  for (let i = length - 1; i >= 0; i--) {\n    for (let m = i; m <= length - 1; m++) {\n      if (typeof cache[m] !== 'number') {\n        cache[m] = Math.max(nums[m] + (cache[m + 2] || 0), cache[m + 1] || 0)\n      }\n      max = Math.max(max, cache[m])\n    }\n  }\n  return max\n}\n")))}c.isMDXComponent=!0},47445:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"199.Binary Tree Right Side View"),(0,i.kt)("p",null,"Given a binary tree, imagine yourself standing on the right side of it, return the values of the nodes you can see ordered ",(0,i.kt)("inlineCode",{parentName:"p"},"from top to bottom"),"."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: [1, 2, 3, null, 5, null, 4]\nOutput: [1, 3, 4]\n")),(0,i.kt)("p",null,"Explanation:"),(0,i.kt)("p",null,"   1            <---\n/   \\\n2     3         <---\n\\     \\\n5     4       <---"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"将题目表述转化下为: 展示当前行的最右侧元素即可; 该题考察的是",(0,i.kt)("inlineCode",{parentName:"p"},"树的广度遍历(BFS)"),", 运用到了",(0,i.kt)("inlineCode",{parentName:"p"},"队列"),"相关知识。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[]}\n */\nvar rightSideView = function(root) {\n  const printList = []\n  if (!root) { return [] }\n  const list = []\n  list.push({ level: 0, node: root })\n\n  while(list.length > 0) {\n    const { level, node } = list.shift()\n    if (!printList[level]) {\n      printList[level] = []\n    }\n    printList[level].push(node.val)\n\n    node.left && list.push({ level: level + 1, node: node.left })\n    node.right && list.push({ level: level + 1, node: node.right })\n  }\n\n  const result = []\n  printList.map(printListArr => {\n    result.push(printListArr[printListArr.length - 1])\n  })\n  return result\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"102(Sister Title)、107、103"))}c.isMDXComponent=!0},26433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Title"),(0,i.kt)("p",null,"You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list."),(0,i.kt)("p",null,"You may assume the two numbers do not contain any leading zero, except the number 0 itself."),(0,i.kt)("h3",null,"Example"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"Input: (2 -> 4 -> 3) + (5 -> 6 -> 4)\nOutput: 7 -> 0 -> 8\nExplanation: 342 + 465 = 807.\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"核心: 根据 sum 的值来决定是否要处理进位"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// Keyword: single linked list\n\n/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} l1\n * @param {ListNode} l2\n * @return {ListNode}\n */\nvar addTwoNumbers = function(l1, l2) {\n  let flag = 0\n  let head = null,\n      temp = null\n  while (l1 || l2) {\n    let sum = flag\n    if (l1) {\n      sum += l1.val\n      l1 = l1.next\n    }\n\n    if (l2) {\n      sum += l2.val\n      l2 = l2.next\n    }\n\n    const list = new ListNode(sum % 10)\n    if (head === null) {\n      head = list\n      temp = list\n    } else {\n      temp.next = list\n      temp = list\n    }\n\n    // 处理进位\n    flag = 0\n    if (sum >= 10) {\n      flag = 1\n    }\n  }\n\n  if (flag === 1) {\n    const result = new ListNode(1)\n    temp.next = result\n    temp = result\n  }\n  return head\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"445"))}c.isMDXComponent=!0},69949:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"20.Valid_Parentheses"),(0,i.kt)("p",null,"Given a string containing just the characters '(', ')', '{', '}', '","[' and ']","', determine if the input string is valid."),(0,i.kt)("p",null,"An input string is valid if:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Open brackets must be closed by the same type of brackets."),(0,i.kt)("li",{parentName:"ol"},"Open brackets must be closed in the correct order.")),(0,i.kt)("p",null,"Note that an empty string is also considered valid."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "()"\nOutput: true\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "()[]{}"\nOutput: true\n')),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "(]"\nOutput: false\n')),(0,i.kt)("p",null,"Example 4:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "([)]"\nOutput: false\n')),(0,i.kt)("p",null,"Example 5:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "{[]}"\nOutput: true\n')),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"考察栈的使用。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {boolean}\n */\nvar isValid = function (s) {\n  const obj = {\n    '(': ')',\n    '{': '}',\n    '[': ']',\n  }\n  const cacheArr = []\n  for (let i = 0; i < s.length; i++) {\n    if (Object.keys(obj).includes(s[i])) {\n      cacheArr.push(s[i])\n    } else {\n      const pick = cacheArr.pop()\n      if (obj[pick] !== s[i]) {\n        return false\n      }\n    }\n  }\n\n  return cacheArr.length === 0\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"71、150")))}c.isMDXComponent=!0},63852:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"200. Number of Islands"),(0,i.kt)("p",null,"Given an m x n 2d grid map of '1's (land) and '0's (water), return the number of islands."),(0,i.kt)("p",null,"An island is surrounded by water and is formed by connecting adjacent lands horizontally or vertically. You may assume all four edges of the grid are all surrounded by water."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: grid = [\n  ["1","1","1","1","0"],\n  ["1","1","0","1","0"],\n  ["1","1","0","0","0"],\n  ["0","0","0","0","0"]\n]\nOutput: 1\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: grid = [\n  ["1","1","0","0","0"],\n  ["1","1","0","0","0"],\n  ["0","0","1","0","0"],\n  ["0","0","0","1","1"]\n]\nOutput: 3\n')),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"m == grid.length"),(0,i.kt)("li",{parentName:"ul"},"n == grid","[i]",".length"),(0,i.kt)("li",{parentName:"ul"},"1 <= m, n <= 300"),(0,i.kt)("li",{parentName:"ul"},"grid","[i][j]"," is '0' or '1'.")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"floodfill")," 算法。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {character[][]} grid\n * @return {number}\n */\nvar numIslands = function(grid) {\n  const result = []\n  const used = []\n  for (let m = 0; m < grid.length; m++) {\n    for (let n = 0; n < grid[m].length; n++) {\n      if (used.indexOf(`${m},${n}`) === -1 && grid[m][n] === '1') {\n        result.push(used)\n        backTrace(grid, m, n, result, used)\n      }\n    }\n  }\n  return result.length\n};\n\nvar backTrace = function(grid, m, n, result, used) {\n  const direction = [[1, 0], [0, 1], [-1, 0], [0, -1]]\n  for (let i = 0; i < direction.length; i++) {\n    const use = used.indexOf(`${m + direction[i][0]},${n + direction[i][1]}`) > -1\n    if (!use && grid[m + direction[i][0]] && grid[m + direction[i][0]][n + direction[i][1]] === '1') {\n      used.push(`${m + direction[i][0]},${n + direction[i][1]}`)\n      backTrace(grid, m + direction[i][0], n + direction[i][1], result, used)\n    }\n  }\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"130、200"))}c.isMDXComponent=!0},38860:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"编写一个算法来判断一个数是不是“快乐数”。"),(0,i.kt)("p",null,"一个“快乐数”定义为：对于一个正整数，每一次将该数替换为它",(0,i.kt)("inlineCode",{parentName:"p"},"每个位置上的数字的平方和"),"，然后重复这个过程直到这个数变为 1，也可能是无限循环但始终变不到 1。如果可以变为 1，那么这个数就是快乐数。"),(0,i.kt)("p",null,"示例: "),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: 19\n输出: true\n解释:\n1^2 + 9^2 = 82\n8^2 + 2^2 = 68\n6^2 + 8^2 = 100\n1^2 + 0^2 + 0^2 = 1\n")),(0,i.kt)("h3",null,"题解"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用",(0,i.kt)("inlineCode",{parentName:"li"},"字典 Map")," 来记录循环过程中各个位置上的数字的平方和",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"若平方和的值为 1, 则跳出循环, 这个数是快乐数;"),(0,i.kt)("li",{parentName:"ul"},"若平方和的值不为 1, 则判断字典 Map 中是否已有该值;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"若字典 Map 中已有该值, 则这个数不是快乐数;")))))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @return {boolean}\n */\nvar isHappy = function(n) {\n  const mapResult = new Map()\n\n  let currentSum = getSum(n)\n  while (currentSum !== 1) {\n    const getMapResult = mapResult.get(currentSum)\n    if (!getMapResult) {\n      mapResult.set(currentSum, 1)\n    } else {\n      return false\n    }\n    currentSum = getSum(currentSum)\n  }\n  return true\n}\n\n/* 获取数字各个位数之和 */\nvar getSum = function(num) {\n  let sum = 0\n  const numStr = String(num)\n  for (let i = 0; i < numStr.length; i++) {\n    sum = sum + Math.pow(numStr[i], 2)\n  }\n  return sum\n}\n")),(0,i.kt)("h3",null,"相关题目"),(0,i.kt)("p",null,"205、242、290、349、350、451"))}c.isMDXComponent=!0},39379:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Remove Linked List Elements"),(0,i.kt)("p",null,"Remove all elements from a linked list of integers that have value val."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input:  1->2->6->3->4->5->6, val = 6\nOutput: 1->2->3->4->5\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"prev  cur  next\n  1 -> 2 -> 6 -> 3 -> 4 -> 5 -> 6\n")),(0,i.kt)("p",null,"思路:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"借助指针 prev, cur, next",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"若 cur.val 与传入 val 相等, 则让 prev.next 指向 next")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"如果只用 cur、next 两个指针, 若 next.val 与 传入 val 相等, 则让 cur = next.next 后的 cur.val 与传入的 val 仍然相等, 此时就无法改变移除当前的 cur 了, 因此需要引入第三个指针 prev。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @param {number} val\n * @return {ListNode}\n */\nvar removeElements = function(head, val) {\n  const dummyHead = new ListNode(head)\n  dummyHead.next = head\n  let prev = dummyHead\n  let cur = dummyHead.next\n\n  while (cur) {\n    let next = cur.next\n    if (cur.val === val) {\n      prev.next = next\n    } else {\n      prev = cur\n    }\n    cur = next\n  }\n\n  return dummyHead.next\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"21, 82(Sister Title)"))}c.isMDXComponent=!0},94359:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"205. Isomorphic Strings"),(0,i.kt)("p",null,"Given two strings s and t, determine if they are isomorphic."),(0,i.kt)("p",null,"Two strings are isomorphic if the characters in s can be replaced to get t."),(0,i.kt)("p",null,"All occurrences of a character must be replaced with another character while preserving the order of characters. ",(0,i.kt)("inlineCode",{parentName:"p"},"No two characters may map to the same character")," but ",(0,i.kt)("inlineCode",{parentName:"p"},"a character may map to itself"),"."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "egg", t = "add"\nOutput: true\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "foo", t = "bar"\nOutput: false\n')),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "paper", t = "title"\nOutput: true\n')),(0,i.kt)("p",null,"Note:\nYou may assume both s and t have the same length."),(0,i.kt)("h3",null,"题解"),(0,i.kt)("p",null,"方法一: 字典哈希"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"遍历字符串, 使用",(0,i.kt)("inlineCode",{parentName:"li"},"字典 map")," 构建 s 中字符串与 t 中字符串(以及 t 中字符串与 s 中字符串)的映射关系;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"若发现存在",(0,i.kt)("inlineCode",{parentName:"li"},"一对多"),"的情况, 则 s 与 t 不是同构的;"))),(0,i.kt)("li",{parentName:"ul"},"遍历结束, 则 s 与 t 是同构的;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"一对多: 比如 s 为 'aa', t 为 'ab', 此时 ’a' 字符就对应了 'a'、'b' 两个字符, 即为一对多。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @param {string} t\n * @return {boolean}\n */\nvar isIsomorphic = function(s, t) {\n  const mapS = new Map()\n  const mapT = new Map()\n  for (let i = 0; i < s.length; i++) {\n    const getS = mapS.get(s[i])\n    const getT = mapT.get(t[i])\n    if ((getS && getS !== t[i]) || (getT && getT !== s[i])) {\n      return false\n    }\n    mapS.set(s[i], t[i])\n    mapT.set(t[i], s[i])\n  }\n\n  return true\n}\n")),(0,i.kt)("p",null,"方法二: 判断 s 与 t 字符串中字符出现的第一个位置。(针对本题的巧妙解法, 不过推荐优先掌握方法一)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @param {string} t\n * @return {boolean}\n */\nvar isIsomorphic = function(s, t) {\n  for (let i = 0; i < s.length; i++) {\n    if (s.indexOf(s[i]) !== t.indexOf(t[i])) {\n      return false\n    }\n  }\n  return true\n};\n")),(0,i.kt)("h3",null,"相关题目"),(0,i.kt)("p",null,"202、242、290、349、350、451"))}c.isMDXComponent=!0},9287:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"Reverse a singly linked list."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->2->3->4->5->NULL\nOutput: 5->4->3->2->1->NULL\n")),(0,i.kt)("p",null,"Follow up:"),(0,i.kt)("p",null,"A linked list can be reversed either iteratively or recursively. Could you implement both?"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"      prev  cur  next\n        1 -> 2 -> 3 -> 4 -> 5 -> null\nnull <- 1 -> 2 -> 3 -> 4 -> 5\n")),(0,i.kt)("p",null,"step:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"定义三个变量 prev, cur, next 表示上一个值, 当前值, 下一个值;"),(0,i.kt)("li",{parentName:"ol"},"如果存在 cur.next 则将 cur.next 指向 prev;"),(0,i.kt)("li",{parentName:"ol"},"将 cur 移动到 next 位置, prev 移动到 cur 位置, 重复步骤 2;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar reverseList = function(head) {\n  let prev = null\n  let cur = head\n  if (head) {\n    let next = head.next\n    while (cur.next) {\n      cur.next = prev\n      prev = cur\n      cur = next\n      next = next.next\n    }\n    cur.next = prev\n  }\n  return cur\n};\n")),(0,i.kt)("p",null,"这样写存在一些冗余的代码, 比如需要判断 head 是否为空, 同时因为 while 中的条件是 cur.next, 因为末尾的 cur.next 需要单独处理一遍, 比较麻烦, 因此进而优化。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar reverseList = function(head) {\n  let prev = null\n  let cur = head\n  while (cur !== null) {\n    let next = cur.next\n    cur.next = prev\n    prev = cur\n    cur = next\n  }\n  return prev\n};\n")),(0,i.kt)("p",null,"根据题目的建议, 接着用递归的方式实现一遍(值得注意的是, 迭代与递归的写法都是能互相转换的。)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar reverseList = function(head) {\n  let prev = null\n  let cur = head\n\n  const recursiveFn = () => {\n    if (cur === null) return\n\n    let next = cur.next\n    cur.next = prev\n    prev = cur\n    cur = next\n\n    recursiveFn()\n  }\n  recursiveFn()\n  return prev\n};\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"92"))}c.isMDXComponent=!0},53734:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"题目: 长度最小的子数组"),(0,i.kt)("p",null,"给定一个含有 n 个正整数的数组和一个正整数 s, 找出该数组中满足其和 ≥ s 的长度最小的连续子数组。如果不存在符合条件的连续子数组，返回 0。"),(0,i.kt)("p",null,"示例: "),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: s = 7, nums = [2,3,1,2,4,3]\n输出: 2\n解释: 子数组 [4,3] 是该条件下的长度最小的连续子数组。\n")),(0,i.kt)("p",null,"进阶:"),(0,i.kt)("p",null,"如果你已经完成了 ",(0,i.kt)("inlineCode",{parentName:"p"},"O(n)")," 时间复杂度的解法, 请尝试 ",(0,i.kt)("inlineCode",{parentName:"p"},"O(nlogn)")," 时间复杂度的解法。"),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"思路: ",(0,i.kt)("inlineCode",{parentName:"p"},"滑动列表"),"。时间复杂度为 ",(0,i.kt)("inlineCode",{parentName:"p"},"O(n)"),", 空间复杂度为 ",(0,i.kt)("inlineCode",{parentName:"p"},"1"),"。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"取滑动列表 ","[left, right]",";"),(0,i.kt)("li",{parentName:"ol"},"若列表 ","[left, right]"," 中的取值之和小于 s, 则列表的有边界 right 往右扩张。"),(0,i.kt)("li",{parentName:"ol"},"若列表 ","[left, right]"," 中的取值之和大于 s, 则列表的左边界 left 往右扩张。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} s\n * @param {number[]} nums\n * @return {number}\n */\nvar minSubArrayLen = function(s, nums) {\n  let left = 0, right = -1 // [left, right], 左闭右闭\n  let minDistance = nums.length + 1 // 存储 left 与 right 间的距离\n  let sum = 0 // [left, right] 间值的总和\n  while (left < nums.length - 1) {\n    if (right < nums.length - 1 && sum < s) {\n      right++\n      sum = sum + nums[right]\n    } else {\n      sum = sum - nums[left]\n      left++\n    }\n    if (sum >= s) {\n      minDistance = Math.min(minDistance, right - left + 1)\n    }\n  }\n\n  if (minDistance === nums.length + 1) return 0\n\n  return minDistance\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"3、76、209、438"))}c.isMDXComponent=!0},82707:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Merge Two Sorted Lists"),(0,i.kt)("p",null,"Merge two sorted linked lists and return it as a new list. The new list should be made by splicing together the nodes of the first two lists."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->2->4, 1->3->4\nOutput: 1->1->2->3->4->4\n")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"解法一: 链表, 类似归并排序的合并过程, 见",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/sort/merge_sort.md"}),"归并排序")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} l1\n * @param {ListNode} l2\n * @return {ListNode}\n */\nvar mergeTwoLists = function (l1, l2) {\n  const dummyLink = new ListNode(0)\n  let cur = dummyLink\n  let l1Point = l1\n  let l2Point = l2\n\n  while (l1Point && l2Point) {\n    if (l1Point.val < l2Point.val) {\n      cur.next = l1Point\n      l1Point = l1Point.next\n    } else {\n      cur.next = l2Point\n      l2Point = l2Point.next\n    }\n    cur = cur.next\n  }\n\n  while (l1Point) {\n    cur.next = l1Point\n    cur = cur.next\n    l1Point = l1Point.next\n  }\n\n  while (l2Point) {\n    cur.next = l2Point\n    cur = cur.next\n    l2Point = l2Point.next\n  }\n\n  return dummyLink.next\n}\n")),(0,i.kt)("p",null,"解法二: 递归"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} l1\n * @param {ListNode} l2\n * @return {ListNode}\n */\nvar mergeTwoLists = function (l1, l2) {\n  if (l1 === null) {\n    return l2\n  }\n  if (l2 === null) {\n    return l1\n  }\n  if (l1.val < l2.val) {\n    l1.next = mergeTwoLists(l1.next, l2)\n    return l1\n  } else {\n    l2.next = mergeTwoLists(l1, l2.next)\n    return l2\n  }\n}\n")))}c.isMDXComponent=!0},5177:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"213.House_Robber_II"),(0,i.kt)("p",null,"You are a professional robber planning to rob houses along a street. Each house has a certain amount of money stashed. All houses at this place are ",(0,i.kt)("inlineCode",{parentName:"p"},"arranged in a circle"),". That means ",(0,i.kt)("inlineCode",{parentName:"p"},"the first house is the neighbor of the last one"),". Meanwhile, adjacent houses have a security system connected, and it will automatically contact the police if two adjacent houses were broken into on the same night."),(0,i.kt)("p",null,"Given an integer array nums representing the amount of money of each house, return the maximum amount of money you can rob tonight without alerting the police."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [2,3,2]\nOutput: 3\nExplanation: You cannot rob house 1 (money = 2) and then rob house 3 (money = 2), because they are adjacent houses.\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1,2,3,1]\nOutput: 4\nExplanation: Rob house 1 (money = 1) and then rob house 3 (money = 3).\nTotal amount you can rob = 1 + 3 = 4.\n")),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [0]\nOutput: 0\n")),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1 <= nums.length <= 100"),(0,i.kt)("li",{parentName:"ul"},"0 <= nums","[i]"," <= 1000")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思考🤔: 将 4 2 3 5 拆成 4 2 3 与 2 3 5 两种情形。如此便将其转化为题目 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/main/LeetCode/198.House_Robber.md"}),"198.House Robber")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"                                    [0, n - 2] || [1, n - 1]\n            /        |          \\          \\                                  /        |  ...      \\\n      [2, n - 2]   [3, n - 2]  [4, n - 2]    ...   [n - 2]                 [3, n - 1]     [4, n - 1]  ...  [n - 1]\n      /\n[4, n - 2]: 此时找到了重复子项\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"状态的定义"),"(即函数的定义): 考虑偷取 ",(0,i.kt)("inlineCode",{parentName:"li"},"[m, n - 2] || [z, n - 1]")," 范围内的房子"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"状态转移"),": f(0) = ",(0,i.kt)("inlineCode",{parentName:"li"},"Math.max(v(0) + f(2), v(1) + f(3), v(2) + f(4), ..., v(n - 3) + f(n - 1), v(n - 2), v(n - 1))"))),(0,i.kt)("p",null,"递归:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number}\n */\nvar rob = function(nums) {\n  if (nums.length === 1) {\n    return nums[0]\n  }\n  const nums1 = nums.slice(0, nums.length - 1)\n  const nums2 = nums.slice(1, nums.length)\n  return Math.max(robPosition(nums1, 0, {}), robPosition(nums2, 0, {}))\n}\n\nvar robPosition = function(nums, start, cache) {\n  let sum = 0\n\n  if (typeof nums[start] !== 'number') return 0\n  // the for loop can be optimized here.\n  for (let i = start; i < nums.length; i++) {\n    if (typeof cache[i] !== 'number') {\n      cache[i] = robPosition(nums, i + 2, cache)\n    }\n    sum = Math.max(sum, nums[i] + cache[i])\n  }\n\n  return sum\n}\n")),(0,i.kt)("p",null,"动态规划:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number}\n */\nvar rob = function(nums) {\n  if (nums.length === 0) return 0\n  if (nums.length === 1) {\n    return nums[0]\n  }\n  if (nums.length === 2) {\n    return Math.max(nums[0], nums[1])\n  }\n  const nums1 = nums.slice(0, nums.length - 1)\n  const nums2 = nums.slice(1, nums.length)\n  return Math.max(robPosition(nums1), robPosition(nums2))\n}\n\nvar robPosition = (nums) => {\n  const lastDigit = nums[nums.length - 1]\n  const lastSecondDigit = nums[nums.length - 2]\n  const cache = {\n    0: lastDigit,\n    1: Math.max(lastSecondDigit, lastDigit)\n  }\n  let sum = Math.max(lastSecondDigit, lastDigit)\n  for (let i = 2; i < nums.length; i++) {\n    if (typeof cache[i] !== 'number') {\n      const point = nums.length - (i + 1)\n      cache[i] = Math.max(nums[point] + cache[i - 2], cache[i - 1])\n    }\n    sum = Math.max(sum, cache[i])\n  }\n\n  return sum\n}\n")))}c.isMDXComponent=!0},99173:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"215.Kth Largest Element in an Array"),(0,i.kt)("p",null,"在",(0,i.kt)("inlineCode",{parentName:"p"},"未排序的数组中"),"找到第 k 个最大的元素。请注意，你需要找的是数组排序后的第 k 个最大的元素，而不是第 k 个不同的元素。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: [3,2,1,5,6,4] 和 k = 2\n输出: 5\n")),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: [3,2,3,1,2,4,5,5,6] 和 k = 4\n输出: 4\n")),(0,i.kt)("p",null,"说明:"),(0,i.kt)("p",null,"你可以假设 k 总是有效的，且 1 ≤ k ≤ 数组的长度。"),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"解法一: 排序。空间复杂度为 O(NlogN), 空间复杂度为 O(1)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} k\n * @return {number}\n */\nvar findKthLargest = function(nums, k) {\n  nums.sort((r1, r2) => r2 - r1)\n  return nums[k - 1]\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"如果初始数据的元素个数不确定, 解法一就无法使用了, 这个时候适合使用解法二。")),(0,i.kt)("p",null,"解法二: 快速选择"),(0,i.kt)("p",null,"思路: 本方法大致上与快速排序相同。简便起见，注意到第 k 个最大元素也就是升序排序后下标为 ",(0,i.kt)("inlineCode",{parentName:"p"},"N - k")," 的元素。递归使用",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/%E5%88%92%E5%88%86%E7%AE%97%E6%B3%95.md"}),"划分算法"),"。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用划分算法, 定义一个枢纽值, 并将其放到指定位置(小于该枢纽值的都在其左边, 大于该枢纽值的都在其右边);"),(0,i.kt)("li",{parentName:"ul"},"比较枢纽值的下标 position 与 N - k 的大小关系")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/503d3b6311c2f401a50bcdb5c57f0f52.jpg",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"算法复杂度为 O(n)。计算: ",(0,i.kt)("inlineCode",{parentName:"p"},"n + (1/2) * n + (1/4) * n + ... + (1/2)^n * n"),", 经等比数列求和为 ",(0,i.kt)("inlineCode",{parentName:"p"},"2n - 2n / 2^n"),", 当 n 趋于无穷大时, 结果趋近为 2n。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} k\n * @return {number}\n */\nvar findKthLargest = function(nums, k) {\n  const length = nums.length\n  return quickSelect(0, length - 1, length - k, nums)\n}\n\nvar quickSelect = function(left, right, kthSmall, arr) {\n  const position = partition(arr, left, right)\n  if (position === kthSmall) {\n    return arr[position]\n  } else if (position < kthSmall) {\n    return quickSelect(position + 1, right, kthSmall, arr)\n  } else if (position > kthSmall) {\n    return quickSelect(left, position - 1, kthSmall, arr)\n  }\n}\n\n/* 分区算法 */\nfunction partition(nums, left, right) {\n  const pivot = nums[left] // 枢纽值\n  let pos = left           // 用来记住最后枢纽值 pivot 应该置于的位置\n  for (let i = left + 1; i <= right; i++) {\n    if (nums[i] < pivot) {\n      pos++\n      swap(nums, pos, i)\n    }\n  }\n  swap(nums, pos, left)\n  return pos\n}\n\n/* 交换位置\n  nums 数组, a, b 为下标\n*/\nvar swap = function(nums, a, b) {\n  const tmp = nums[a]\n  nums[a] = nums[b]\n  nums[b] = tmp\n}\n")),(0,i.kt)("h3",null,"镜像题目"),(0,i.kt)("p",null,"75"))}c.isMDXComponent=!0},94628:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"216.Combination_Sum_III"),(0,i.kt)("p",null,"Find all valid combinations of k numbers that sum up to n such that the following conditions are true:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Only numbers 1 through 9 are used."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Each number is used at most once"),".")),(0,i.kt)("p",null,"Return a list of all possible valid combinations. The list must not contain the same combination twice, and the combinations may be returned in any order."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: k = 3, n = 7\nOutput: [[1,2,4]]\n\nExplanation:\n1 + 2 + 4 = 7\nThere are no other valid combinations.\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: k = 3, n = 9\nOutput: [[1,2,6],[1,3,5],[2,3,4]]\n\nExplanation:\n1 + 2 + 6 = 9\n1 + 3 + 5 = 9\n2 + 3 + 4 = 9\nThere are no other valid combinations.\n")),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: k = 4, n = 1\nOutput: []\n\nExplanation: There are no valid combinations. [1,2,1] is not valid because 1 is used twice.\n")),(0,i.kt)("p",null,"Example 4:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: k = 3, n = 2\nOutput: []\n\nExplanation: There are no valid combinations.\n")),(0,i.kt)("p",null,"Example 5:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: k = 9, n = 45\nOutput: [[1,2,3,4,5,6,7,8,9]]\n\nExplanation:\n1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 = 45\n​​​​​​​There are no other valid combinations.\n")),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"2 <= k <= 9"),(0,i.kt)("li",{parentName:"ul"},"1 <= n <= 60")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"从题目 ",(0,i.kt)("inlineCode",{parentName:"p"},"Each number is used at most once")," 得知, 该题属于组合问题。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} k\n * @param {number} n\n * @return {number[][]}\n */\nvar combinationSum3 = function(k, n) {\n  const result = []\n\n  recursive(k, n, 1, [], result)\n  return result\n};\n\nvar recursive = function(k, n, start, temp, result) {\n  if (n < 0 || temp.length > k) return\n  if (n === 0 && temp.length === k) {\n    result.push([...temp])\n    return\n  }\n\n  for (let i = start; i <= 9; i++) {\n    temp.push(i)\n    n = n - i\n    recursive(k, n, i + 1, temp, result)\n    n = n + i\n    temp.pop()\n  }\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"39、40"))}c.isMDXComponent=!0},77936:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Contains Duplicate"),(0,i.kt)("p",null,"Given an array of integers, find if the array contains any duplicates."),(0,i.kt)("p",null,"Your function should return true if any value appears at least twice in the array, and it should return false if every element is distinct."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: [1,2,3,1]\nOutput: true\nExample 2:\n\nInput: [1,2,3,4]\nOutput: false\nExample 3:\n\nInput: [1,1,1,3,3,4,3,2,4,2]\nOutput: true\n")),(0,i.kt)("h3",null,"Solved"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {boolean}\n */\nvar containsDuplicate = function(nums) {\n  const result = [...new Set(nums)]\n  return result.length !== nums.length\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"219、220"))}c.isMDXComponent=!0},88544:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Contains Duplicate II"),(0,i.kt)("p",null,"Given an array of integers and an integer k, find out whether there are two distinct indices i and j in the array such that nums","[i]"," = nums","[j]"," and the absolute difference between i and j is at most k."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Example 1:\n\nInput: nums = [1,2,3,1], k = 3\nOutput: true\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Example 2:\n\nInput: nums = [1,0,1,1], k = 1\nOutput: true\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Example 3:\n\nInput: nums = [1,2,3,1,2,3], k = 2\nOutput: false\n")),(0,i.kt)("h3",null,"解法"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"遍历当前 nums, 维护一个队列 arr 来存储 k 个数值, 判断该队列 arr 中是否包含当前遍历值 nums","[l]",";",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"若有, 则返回 true;"))),(0,i.kt)("li",{parentName:"ul"},"若遍历结束, 则返回 false;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} k\n * @return {boolean}\n */\nvar containsNearbyDuplicate = function(nums, k) {\n  const arr = []\n\n  let l = 0\n  let r = nums.length\n\n  while (l < r) {\n    if (arr.indexOf(nums[l]) > -1) {\n      return true\n    }\n    if (arr.length < k) {\n      arr.push(nums[l])\n    } else if (arr.length >= k && k > 0) {\n      arr.shift(arr[0])\n      arr.push(nums[l])\n    }\n    l++\n  }\n\n  return false\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/db151c5e5eef41a30b2e8cbca9fd417e.jpg-400",alt:null}))),(0,i.kt)("p",null,"算法时间复杂度是 NlogN 级别的, 执行时间花了 1800ms。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} k\n * @return {boolean}\n */\nvar containsNearbyDuplicate = function(nums, k) {\n  const temSet = new Set()\n\n  let l = 0\n  let r = nums.length\n\n  while (l < r) {\n    if (temSet.has(nums[l])) {\n      return true\n    }\n    if (temSet.size < k) {\n      temSet.add(nums[l])\n    } else if (temSet.size >= k && k > 0) {\n      temSet.delete(nums[l - k])\n      temSet.add(nums[l])\n    }\n    l++\n  }\n\n  return false\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c756eba46d7c18d4fe4acfbc011e3a78.jpg-400",alt:null}))),(0,i.kt)("p",null,"使用 Set 用同样的思路实验, 时间复杂度为 O(N), 其执行时间比之前用数组队列的实现快了很多。"),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"217、220"))}c.isMDXComponent=!0},59537:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"22.Generate Parentheses"),(0,i.kt)("p",null,"给出 n 代表生成括号的对数, 请你写出一个函数, 使其能够生成所有可能的并且有效的括号组合。"),(0,i.kt)("p",null,"例如, 给出 n = 3, 生成结果为:"),(0,i.kt)("p",null,'[\n"((()))",\n"(()())",\n"(())()",\n"()(())",\n"()()()"\n]'),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"回溯法:"),(0,i.kt)("p",null,"思路: 标记可使用的左括号和右括号数量, 中断条件为左右可使用括号数都为 0"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"若可使用的左括号的数量等于可使用的右括号的数量, 则加 '(';"),(0,i.kt)("li",{parentName:"ul"},"若可使用的左括号的数量为 0, 则加 ')';"),(0,i.kt)("li",{parentName:"ul"},"若可使用的左括号的数量小于可使用的右括号的数量, 则可以加 '(' 又可以加 ')'")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @return {string[]}\n */\nvar generateParenthesis = function (n) {\n  const result = []\n  let str = ''\n  function judege(left, right, str) {\n    if (left === 0 && right === 0) {\n      result.push(str)\n      str = ''\n      return\n    }\n\n    if (left === right) {\n      judege(left - 1, right, str + '(')\n    } else if (left === 0) {\n      judege(left, right - 1, str + ')')\n    } else {\n      judege(left - 1, right, str + '(')\n      judege(left, right - 1, str + ')')\n    }\n  }\n\n  judege(n, n, str)\n  return result\n};\n")))}c.isMDXComponent=!0},85074:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Contains Duplicate III"),(0,i.kt)("p",null,"Given an array of integers, find out whether there are ",(0,i.kt)("inlineCode",{parentName:"p"},"two distinct indices")," i and j in the array such that the absolute difference between nums","[i]"," and nums","[j]"," is at most t and the absolute difference between i and j is at most k."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1,2,3,1], k = 3, t = 0\nOutput: true\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1,0,1,1], k = 1, t = 2\nOutput: true\n")),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1,5,9,1,5,9], k = 2, t = 3\nOutput: false\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思路: 参照官方题解该题可以使用桶排序的思想来设置查找表的 key - value。比较好理解的一个例子: 小敏生日在 3 月份, 她想知道是否有其他同学生日和她在 30 天以内, 假设每个月有 30 天, 那么只要找 2 月份和 4 月份两个月生日的同学就行了, 转化到该题目即 key 只要保留一个 value 就行。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"桶排序的思想: 将数据根据归类划分到若干个区域, 然后对该些区域分别进行排序;")),(0,i.kt)("p",null,"此题综合了滑动窗口、查找表、桶排序的知识, 需要二刷。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"| i - j | ≤ k\n| nums[i] - nums[j] | ≤ t\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"此外需要考虑边界值",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"k <= 0、 t <= 0")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} k\n * @param {number} t\n * @return {boolean}\n */\nvar containsNearbyAlmostDuplicate = function(nums, k, t) {\n  if (k < 0 || t < 0) return false\n  const getKey = (value) => {\n    return Math.floor(value / (t + 1))\n  }\n\n  const map = new Map()\n\n  let l = 0\n  while (l < nums.length) {\n    const key = getKey(nums[l])\n\n    if (map.has(key)) {\n      return true\n    } else if (map.has(key + 1) || map.has(key - 1)) {\n      if (map.get(key + 1) - nums[l] <= t) { return true }\n      if (nums[l] - map.get(key - 1) <= t) { return true }\n    }\n\n    map.set(key, nums[l])\n\n    if (l >= k) {\n      map.delete(getKey(nums[l - k]))\n    }\n\n    l++\n  }\n\n  return false\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"217、219"))}c.isMDXComponent=!0},83810:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"222. Count Complete Tree Nodes"),(0,i.kt)("p",null,"Given a ",(0,i.kt)("inlineCode",{parentName:"p"},"complete binary tree"),", count the number of nodes."),(0,i.kt)("p",null,"Note:"),(0,i.kt)("p",null,"Definition of a complete binary tree from Wikipedia:\nIn a complete binary tree every level, except possibly the last, is completely filled, and all nodes in the last level are as far left as possible. It can have between 1 and 2h nodes inclusive at the last level h."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input:\n    1\n   / \\\n  2   3\n / \\  /\n4  5 6\n\nOutput: 6\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"方式一: 递归"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number}\n */\nvar countNodes = function(root) {\n  if (!root) return 0\n  return 1 + countNodes(root.left) + countNodes(root.right)\n};\n")),(0,i.kt)("p",null,"方式二: 利用完全二叉树性质解题"),(0,i.kt)("p",null,"根据题目给出的当前树是完全二叉树的限制, 可得到子树存在如下两点条件:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"若左子树的深度 = 右子树的深度, 则",(0,i.kt)("inlineCode",{parentName:"li"},"左子树为满二叉树"),";"),(0,i.kt)("li",{parentName:"ul"},"若左子树的深度 > 右子树的深度, 则",(0,i.kt)("inlineCode",{parentName:"li"},"右子树为满二叉树"),";")),(0,i.kt)("p",null,"可以根据上述分析简化递归次数。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number}\n */\nvar countNodes = function(root) {\n  if (!root) return 0\n\n  const leftDeep = deep(root.left)\n  const rightDeep = deep(root.right)\n\n  if (leftDeep === rightDeep) {\n    // the count of left node is Math.pow(2, leftDeep) - 1, so the total is\n    // Math.pow(2, leftDeep) - 1 + countNodes(root.right) + 1, 1 means parent node\n    return Math.pow(2, leftDeep) + countNodes(root.right)\n  } else {\n    return Math.pow(2, rightDeep) + countNodes(root.left)\n  }\n};\n\n// get the deep of current node cleverly with features of the complete tree.\nvar deep = function(node) {\n  if (!node) return 0\n  let nodeVal = node\n  let count = 1\n\n  while (nodeVal.left) {\n    count++\n    nodeVal = nodeVal.left\n  }\n\n  return count\n}\n")))}c.isMDXComponent=!0},6091:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"226. Invert Binary Tree"),(0,i.kt)("p",null,"Invert a binary tree."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input:\n\n     4\n   /   \\\n  2     7\n / \\   / \\\n1   3 6   9\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Output:\n\n     4\n   /   \\\n  7     2\n / \\   / \\\n9   6 3   1\n")),(0,i.kt)("p",null,"Trivia:"),(0,i.kt)("p",null,"This problem was inspired by this original tweet by Max Howell:"),(0,i.kt)("p",null,"Google: 90% of our engineers use the software you wrote (Homebrew), but you can’t invert a binary tree on a whiteboard so f*** off."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"递归调换左右子节点的位置。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {TreeNode}\n */\nvar invertTree = function(root) {\n  if (!root) return null\n\n  if (root.left || root.right) {\n    const tmp = root.left\n    root.left = root.right\n    root.right = tmp\n\n    invertTree(root.left)\n    invertTree(root.right)\n  }\n  return root\n};\n")))}c.isMDXComponent=!0},97005:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"23.Merge k Sorted Lists"),(0,i.kt)("p",null,"Merge k ",(0,i.kt)("inlineCode",{parentName:"p"},"sorted linked lists")," and return it as ",(0,i.kt)("inlineCode",{parentName:"p"},"one sorted list"),". Analyze and describe its complexity."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input:\n[\n  1->4->5,\n  1->3->4,\n  2->6\n]\nOutput: 1->1->2->3->4->4->5->6\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思路一: 分治算法。可以将合并 k 个排序队列转换为合并 2 个排序队列。"),(0,i.kt)("p",null,"图例解释:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"   cur\ndummyNode -> 1 -> 4 -> 5\n\ncomparedCur\n    2       -> 6\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode[]} lists\n * @return {ListNode}\n */\nvar mergeKLists = function(lists) {\n  let result = lists[0] || null\n\n  for (let i = 1; i < lists.length; i++) {\n    const compareList = lists[i]\n    result = mergeTwoLists(result, compareList)\n  }\n  return result\n}\n\nvar mergeTwoLists = function(curList, compareList) {\n  const dummyNode = new ListNode(0)\n  dummyNode.next = curList\n  let cur = dummyNode\n  let comparedCur = compareList\n\n  while (cur.next && comparedCur) {\n    if (cur.next.val > comparedCur.val) {\n      let nextComparedCur = comparedCur.next\n      comparedCur.next = cur.next\n      cur.next = comparedCur\n      comparedCur = nextComparedCur\n    }\n    cur = cur.next\n  }\n  if (comparedCur) {\n    cur.next = comparedCur\n  }\n\n  return dummyNode.next\n}\n")),(0,i.kt)("p",null,"思路二: 优先队列"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"将数组中的队列加入进优先队列(基于最小堆);"),(0,i.kt)("li",{parentName:"ul"},"如果当前优先队列不为空:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"取出当前",(0,i.kt)("inlineCode",{parentName:"li"},"优先队列顶部队列元素"),"(最小值), 拼接到",(0,i.kt)("inlineCode",{parentName:"li"},"输出队列"),"中;"),(0,i.kt)("li",{parentName:"ul"},"同时在优先队列插入取出的顶部队列元素的下一个值;")))),(0,i.kt)("p",null,"由于在 JavaScrit 中没有封装好的优先队列, 在此先进行封装",(0,i.kt)("inlineCode",{parentName:"p"},"优先队列函数"),"(最小堆)。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var len\n\n/**\n * to build min heapify from bottom to top;\n * the last subscript's parent subscript is Math.floor((len - 1) / 2)\n */\nvar buildMinHeapify = function(arr) {\n  len = arr.length\n\n  for (let i = Math.floor((len - 1) / 2); i >= 0; i--) {\n    siftDown(arr, i)\n  }\n  return arr\n}\n\n/**\n * Insert a value into heap. It's an operation called sift up.\n */\nvar enqueue = function(arr, value) {\n  arr.splice(len, 0, value)\n  len++\n  siftUp()\n}\n\n/**\n * to keep min heap, it's an operation called sift up.\n */\nvar siftUp = function() {\n  let enqueueValSubscript = len - 1\n  let parent = Math.floor(enqueueValSubscript / 2)\n  while (parent > 0 && arr[parent] > arr[enqueueValSubscript]) {\n    swap(arr, parent, enqueueValSubscript)\n    enqueueValSubscript = parent\n    parent = Math.floor(enqueueValSubscript / 2)\n  }\n}\n\n/*\n * to pick the smallest or the biggest element from the heap and return it;\n * Then t'll swap the endest element with the first element, and then keep the\n * heap length reduce one. If so, only do once sift down operation in the first element to keep heapify.\n */\nvar dequeue = function() {\n  const maxValue = arr[0]\n  swap(arr, len - 1, 0)\n  len--\n  siftDown(arr, 0)\n  return maxValue\n}\n\n/**\n * to keep min heap, it's an operation called sift down.\n */\nvar siftDown = function(arr, i) {\n  const left = 2 * i + 1\n  const right = 2 * i + 2\n  let minSubscript = i\n\n  if (left < len && arr[left] < arr[minSubscript]) {\n    minSubscript = left\n  }\n\n  if (right < len && arr[right] < arr[minSubscript]) {\n    minSubscript = right\n  }\n\n  if (minSubscript !== i) {\n    swap(arr, minSubscript, i)\n    siftDown(arr, minSubscript)\n  }\n}\n\n// swap two value in arr\nvar swap = function(arr, pointOne, pointTwo) {\n  const tmp = arr[pointOne]\n  arr[pointOne] = arr[pointTwo]\n  arr[pointTwo] = tmp\n}\n")),(0,i.kt)("p",null,"Test case one:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"input: var arr = [5, 2, 7, 3, 1, 8, 4]\n\n           8\n        ↙     ↘\n     3          7\n  ↙    ↘      ↙   ↘\n2        1  5       4\n\nbuildMinHeapify(arr) // [1, 2, 4, 3, 5, 8, 7]\n\n           1                                           1\n        ↙     ↘          enqueue(arr, 6)            ↙     ↘\n     2          4        ---------------\x3e         2          4\n  ↙    ↘      ↙   ↘                            ↙    ↘      ↙   ↘\n3        5  8       7                        3        5  8        7\n                                           ↙\n                                         6\n\n                                     2\n        return 1                  ↙     ↘\n        dequeue()               3         4\n    ----------------\x3e        ↙    ↘     ↙   ↘\n                           6       5   8      7\n")),(0,i.kt)("p",null,"在 JavaScript 中使用优先队列成本相对较高, 暂时不考虑。"))}c.isMDXComponent=!0},24457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"230. Kth Smallest Element in a BST"),(0,i.kt)("p",null,"Given a binary search tree, write a function kthSmallest to find the kth smallest element in it."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: root = [3,1,4,null,2], k = 1\n    3\n  /   \\\n 1     4\n  \\\n   2\nOutput: 1\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: root = [5,3,6,2,4,null,null,1], k = 3\n        5\n      /   \\\n     3     6\n    / \\\n   2   4\n  /\n 1\nOutput: 3\n")),(0,i.kt)("p",null,"Follow up:\nWhat if the BST is modified (insert/delete operations) often and you need to find the kth smallest frequently? How would you optimize the kthSmallest routine?"),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("p",null,"The number of elements of the BST is between 1 to 10^4.\nYou may assume k is always valid, 1 ≤ k ≤ BST's total elements."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思路: 中序遍历维护计数, 当计数值到达 k 时, 当前节点的 val 即为题目要求的第 k 小的值元素值。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {TreeNode} root\n * @param {number} k\n * @return {number}\n */\nvar kthSmallest = function(root, k) {\n  const countResult = { value: 0 }\n  return analyzeCount(root, k, countResult)\n}\n\nvar analyzeCount = function(node, k, count) {\n  if (!node) return null\n  const pickLeft = analyzeCount(node.left, k, count)\n  if (typeof pickLeft === 'number') return pickLeft\n  count.value = count.value + 1\n  if (k === count.value) {\n    return node.val\n  }\n  const pickRight = analyzeCount(node.right, k, count)\n  if (typeof pickRight === 'number') return pickRight\n}\n")))}c.isMDXComponent=!0},88120:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"234.Palindrome Linked List"),(0,i.kt)("p",null,"Given a singly linked list, determine if it is a palindrome."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->2\nOutput: false\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->2->2->1\nOutput: true\n")),(0,i.kt)("p",null,"Follow up:\nCould you do it in O(n) time and O(1) space?"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思路比较清晰直观, 步骤如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"第一步: 使用快慢指针找到链表中点, 链表分割为左右两部分;"),(0,i.kt)("li",{parentName:"ol"},"第二步: 翻转右边的链表节点;"),(0,i.kt)("li",{parentName:"ol"},"第三步: 比较左右两边的节点;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"该题与题目 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/143.Reorder_List/README.md"}),"143.Reorder_List")," 十分类似。")),(0,i.kt)("p",null,"步骤图解:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"第一步: 找中点, 分割链表;\n                        q\n              s\ndummy -> 1 -> 2 -> 2 -> 1 -> NULL\n              .\n              .\n                        q\n              s\ndummy -> 1 -> 2 -> 2 -> 1 -> NULL\n\nleft 链表:\n1 -> 2 -> null\n\nright 链表:\n2 -> 1 -> null\n\n第二步: 翻转右边的链表节点;\n\nleft 链表:\n1 -> 2 -> null\n\nright 链表:\n1 -> 2 -> null\n\n第三步: 判断 left 链表与 right 链表;\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @return {boolean}\n */\nvar isPalindrome = function(head) {\n  const dummy = new ListNode(0)\n  dummy.next = head\n\n  let slow = dummy, quick = dummy\n  while (quick && quick.next) {\n    slow = slow.next\n    quick = quick.next.next\n  }\n\n  let right = slow.next\n  slow.next = null\n  let left = dummy.next\n\n  right = reverseLink(right)\n\n  while (left && right) {\n    if (left.val !== right.val) {\n      return false\n    }\n    left = left.next\n    right = right.next\n  }\n  return true\n}\n\nfunction reverseLink(list) {\n  const dummy = new ListNode(0)\n  dummy.next = list\n\n  let prev = null\n  let cur = dummy.next\n\n  while (cur) {\n    const next = cur.next\n    cur.next = prev\n    prev = cur\n    cur = next\n  }\n\n  return prev\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/f1d261951e75505802e0b5b8ea8848bc.jpg",alt:null}))),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"(https://github.com/MuYunyun/blog/blob/master/LeetCode/143.Reorder_List/README.md)"}),"143.Reorder_List"))))}c.isMDXComponent=!0},75678:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"235. Lowest Common Ancestor of a Binary Search Tree"),(0,i.kt)("p",null,"Given a ",(0,i.kt)("inlineCode",{parentName:"p"},"binary search tree")," (BST), find the ",(0,i.kt)("inlineCode",{parentName:"p"},"lowest common ancestor")," (LCA) of two given nodes in the BST."),(0,i.kt)("p",null,"According to the definition of LCA on Wikipedia: “The lowest common ancestor is defined between two nodes p and q as the lowest node in T that has both p and q as descendants (where we allow a node to be a descendant of itself).”"),(0,i.kt)("p",null,"Given binary search tree: root = ","[6,2,8,0,4,7,9,null,null,3,5]"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"       6\n     /   \\\n    2      8\n   / \\    / \\\n  0   4  7   9\n     / \\\n    3   5\n")),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 8\nOutput: 6\n")),(0,i.kt)("p",null,"Explanation: The LCA of nodes 2 and 8 is 6."),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 4\nOutput: 2\n``` \n\nExplanation: The LCA of nodes 2 and 4 is 2, since `a node can be a descendant of itself` according to the LCA definition.\n\nConstraints:\n\n* `All of the nodes' values will be unique`.\n* `p and q are different and both values will exist in the BST`.\n\n### Analyze\n\n1. if `p` node and `q` node are in `two` side of current iterator node `n`, the LCA is `n`;\n2. if `p` node and `q` node are in `one` side of current iterator node `n`, to loop the one step in the other side node;\n\n```js\n/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n\n/**\n * @param {TreeNode} root\n * @param {TreeNode} p\n * @param {TreeNode} q\n * @return {TreeNode}\n */\nvar lowestCommonAncestor = function(root, p, q) {\n  return lca(root, p, q)\n};\n\nvar lca = function(node, p, q) {\n  if (!node) return null\n  if ((p.val - node.val) * (q.val - node.val) <= 0) {\n    return node\n  } else if (p.val - node.val < 0) {\n    return lca(node.left, p, q)\n  } else {\n    return lca(node.right, p, q)\n  }\n}\n")))}c.isMDXComponent=!0},21579:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"236.Lowest Common Ancestor of a Binary Search Tree"),(0,i.kt)("p",null,"Given a binary tree, find the lowest common ancestor (LCA) of two given nodes in the tree."),(0,i.kt)("p",null,"According to the definition of LCA on Wikipedia: “The lowest common ancestor is defined between two nodes p and q as the lowest node in T that has both p and q as descendants (where we allow a node to be a descendant of itself).”"),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"       3\n     /   \\\n    5      1\n   / \\    / \\\n  6   2  0   8\n     / \\\n    7   4\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1\nOutput: 3\n")),(0,i.kt)("p",null,"Explanation: The LCA of nodes 5 and 1 is 3."),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4\nOutput: 5\n")),(0,i.kt)("p",null,"Explanation: The LCA of nodes 5 and 4 is 5, since a node can be a descendant of itself according to the LCA definition."),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    1\n  /\n 2\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: root = [1,2], p = 1, q = 2\nOutput: 1\n")),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("p",null,"The number of nodes in the tree is in the range ","[2, 105]",".\n-109 <= Node.val <= 109\n",(0,i.kt)("inlineCode",{parentName:"p"},"All Node.val are unique"),".\n",(0,i.kt)("inlineCode",{parentName:"p"},"p != q"),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"p and q will exist in the tree"),"."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Using ",(0,i.kt)("inlineCode",{parentName:"li"},"post-order traversal")," of birnary tree in recursive.")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @param {TreeNode} p\n * @param {TreeNode} q\n * @return {TreeNode}\n */\nvar lowestCommonAncestor = function(root, p, q) {\n  return lca(root, p, q)\n};\n\nvar lca = function(node, p, q) {\n  if (!node) return null\n  // node is the lowest common ancestor of p and q.\n  if (node.val === p.val || node.val === q.val) return node\n\n  const leftLca = lca(node.left, p, q)\n  const rightLca = lca(node.right, p, q)\n\n  // get value of post-order traversal\n  if (!leftLca) {\n    return rightLca\n  }\n  if (!rightLca) {\n    return leftLca\n  }\n  return node\n}\n")))}c.isMDXComponent=!0},94374:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Delete Node in a Linked List"),(0,i.kt)("p",null,"Write a function to delete a node (except the tail) in a singly linked list, given only access to that node."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: head = [4,5,1,9], node = 5\nOutput: [4,1,9]\n")),(0,i.kt)("p",null,"Explanation: You are given the second node with value 5, the linked list should become 4 -> 1 -> 9 after calling your function."),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: head = [4,5,1,9], node = 1\nOutput: [4,5,9]\n")),(0,i.kt)("p",null,"Explanation: You are given the third node with value 1, the linked list should become 4 -> 5 -> 9 after calling your function."),(0,i.kt)("p",null,"Note:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The linked list will have ",(0,i.kt)("inlineCode",{parentName:"li"},"at least two elements"),"."),(0,i.kt)("li",{parentName:"ul"},"All of the nodes' values will be unique."),(0,i.kt)("li",{parentName:"ul"},"The given node will ",(0,i.kt)("inlineCode",{parentName:"li"},"not be the tail")," and it will always be a valid node of the linked list."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Do not return anything from your function"),".")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"相较于 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/LeetCode/203.Remove_Linked_List_Elements/README.md"}),"203.Remove_Linked_List_Elements"),", 此题一个点是在函数中不能返回任何值, 因此不能引入 dummyHead。另外一个点是没有传入 head 指针, 所以没法拿到当前要删除的上个节点。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"4 -> 5 -> 1 -> 9 -> null\n          .\n          .\n          node\n4 -> 5 -> 9 -> 9 -> null\n          .\n          .\n4 -> 5 -> 9 -> null\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} node\n * @return {void} Do not return anything, modify node in-place instead.\n */\nvar deleteNode = function(node) {\n  node.val = node.next.val\n  node.next = node.next.next\n}\n")),(0,i.kt)("h3",null,"姊妹题"),(0,i.kt)("p",null,"203"))}c.isMDXComponent=!0},39593:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Swap Nodes in Pairs"),(0,i.kt)("p",null,"Given a linked list, swap every two adjacent nodes and return its head."),(0,i.kt)("p",null,"You may not modify the values in the list's nodes, only nodes itself may be changed."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Given 1->2->3->4, you should return the list as 2->1->4->3.\n")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"prev  first  second  next\n        1  ->  2  ->  3  ->  4 -> null\n              .\n              .\n进行如下指针变换:\nprev -> second -> first -> next\n          2    ->   1   ->  3  ->  4 -> null\n              .\n              .\n移动指针:\n                   prev   first  second  next\n          2    ->   1   ->  3  ->  4 -> null\n              .\n              .\n重复上述操作\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar swapPairs = function(head) {\n  const dummyHead = new ListNode(0)\n  dummyHead.next = head\n\n  let prev = dummyHead\n  let first = prev.next\n\n  while(first && first.next) {\n    let second = first.next\n    let next = second.next\n\n    second.next = first\n    first.next = next\n    prev.next = second\n\n    prev = first\n    first = first.next\n  }\n\n  return dummyHead.next\n}\n")))}c.isMDXComponent=!0},78838:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"242. Valid Anagram"),(0,i.kt)("p",null,"Given two strings s and t , write a function to determine if t is an anagram of s."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "anagram", t = "nagaram"\nOutput: true\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "rat", t = "car"\nOutput: false\n')),(0,i.kt)("p",null,"Note:\nYou may assume the ",(0,i.kt)("inlineCode",{parentName:"p"},"string contains only lowercase alphabets"),"."),(0,i.kt)("p",null,"Follow up:\nWhat if the inputs contain unicode characters? How would you adapt your solution to such case?"),(0,i.kt)("h3",null,"题解"),(0,i.kt)("p",null,"思路:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"创建数据结构为 Map 的 map 对象;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"遍历 s, 将各字母出现的次数叠加存储进 map 中;"),(0,i.kt)("li",{parentName:"ul"},"遍历 t, 在 map 中减少相应字母出现的个数, 并增加 map 中未收录的字母;"))),(0,i.kt)("li",{parentName:"ul"},"如果最后 map 的 size 不为 0, 则 s 与 t 不是字母异位词; 否则是字母异位词;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @param {string} t\n * @return {boolean}\n */\nvar isAnagram = function(s, t) {\n  const map = new Map()\n  for (let i = 0; i < s.length; i++) {\n    const getMap = map.get(s[i])\n    if (!getMap) {\n      map.set(s[i], 1)\n    } else {\n      map.set(s[i], getMap + 1)\n    }\n  }\n\n  for (let i = 0; i < t.length; i++) {\n    const getMap = map.get(t[i])\n    if (getMap === 1) {\n      map.delete(t[i])\n    } else if (getMap) {\n      map.set(t[i], getMap - 1)\n    } else {\n      map.set(t[i], 1)\n    }\n  }\n\n  if (map.size) {\n    return false\n  } else {\n    return true\n  }\n};\n")),(0,i.kt)("h3",null,"相关题目"),(0,i.kt)("p",null,"202、205、290、349、350、451"))}c.isMDXComponent=!0},10688:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Reverse Nodes in k-Group"),(0,i.kt)("p",null,"Given a linked list, reverse the nodes of a linked list k at a time and return its modified list."),(0,i.kt)("p",null,"k is a positive integer and is less than or equal to the length of the linked list. If the number of nodes is not a multiple of k then left-out nodes in the end should remain as it is."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"Given this linked list: 1->2->3->4->5"),(0,i.kt)("p",null,"For k = 2, you should return: 2->1->4->3->5"),(0,i.kt)("p",null,"For k = 3, you should return: 3->2->1->4->5"),(0,i.kt)("p",null,"Note:"),(0,i.kt)("p",null,"Only constant extra memory is allowed.\nYou may not alter the values in the list's nodes, only nodes itself may be changed."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"初始分析:"),(0,i.kt)("p",null,"每间隔 k 个值进行链表反转, 目前的思考是替换链表的同时维护一个 count, count 达到 k 以后 count 清 0, 同时根据 count 是否达到 k 来判断当前组列表的下一组列表是指向原列表还是反转后的列表, 但是这样的思路需要额外的内存来存储下一组列表。有没有更好的方法呢?"),(0,i.kt)("p",null,"参考网友的 ",(0,i.kt)("inlineCode",{parentName:"p"},"尾插法")," 思路。"),(0,i.kt)("p",null,"① 将 tail 移到要翻转部分的最后一个元素, 若移动 k 元素之前已到达链表末尾则完成每间隔 k 个值的链表翻转;"),(0,i.kt)("p",null,"② 接着依次把 cur 移到 tail 后面;"),(0,i.kt)("p",null,"该方法的难点一个是如何确定 tail(尾巴) 节点, 另一个是如何穿针引线将 cur 节点移到 tail 节点后面。(这题卡了好久","[OMG]",")"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"k === 3\n\nprev\ntail   head1\ndummy    1     2     3     4     5\n\nprev   head1        tail\ndummy    1     2     3     4     5\n          cur\n\nprev          tail head1\ndummy    2     3    1     4     5\n          cur\n\nprev    tail       head1\ndummy    3     2    1     4     5\n            cur\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @param {number} k\n * @return {ListNode}\n */\nvar reverseKGroup = function(head, k) {\n  const dummyHead = new ListNode(0)\n  dummyHead.next = head\n  let prev = dummyHead\n  let tail = dummyHead\n\n  while (true) {\n    let count = 0\n    while (tail.next && count !== k) {\n      tail = tail.next\n      count++\n    }\n    if (count !== k) break\n\n    let head1 = prev.next\n\n    while (prev.next !== tail) {\n      let cur = prev.next\n      prev.next = cur.next\n      cur.next = tail.next\n      tail.next = cur\n    }\n\n    prev = head1\n    tail = head1\n  }\n\n  return dummyHead.next\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/27da17a1a3c81ffe4aa6beefaef0de18.jpg",alt:null}))))}c.isMDXComponent=!0},71695:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"257. Binary Tree Paths"),(0,i.kt)("p",null,"Given a binary tree, return all root-to-leaf paths."),(0,i.kt)("p",null,"Note: A leaf is a node with no children."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input:\n\n   1\n /   \\\n2     3\n \\\n  5\n\nOutput: ["1->2->5", "1->3"]\n')),(0,i.kt)("p",null,"Explanation: All root-to-leaf paths are: 1->2->5, 1->3"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"DFS 深度优先遍历的运用, 关键需要想清楚采用先序、中序、后序遍历中的哪一种。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"先序遍历: 1 -> 2 -> 5, 1 -> 3")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {string[]}\n */\nvar binaryTreePaths = function(root) {\n  const result = []\n  if (!root) return result\n\n  printTreePaths(root, result, '')\n  return result\n}\n\nvar printTreePaths = function(node, result, str) {\n  if (!node.left && !node.right) {\n    str += `${node.val}`\n    result.push(str)\n    return\n  }\n\n  str += `${node.val}->`\n\n  if (node.left) {\n    printTreePaths(node.left, result, str)\n  }\n\n  if (node.right) {\n    printTreePaths(node.right, result, str)\n  }\n}\n")))}c.isMDXComponent=!0},19614:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"题目"),(0,i.kt)("p",null,"给定一个",(0,i.kt)("inlineCode",{parentName:"p"},"排序数组"),", 你需要",(0,i.kt)("inlineCode",{parentName:"p"},"在原地删除重复出现的元素, 使得每个元素只出现一次, 返回移除后数组的新长度"),"。"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"不要使用额外的数组空间, 你必须在原地修改输入数组并在使用 O(1) 额外空间的条件下完成"),"。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"给定数组 nums = [1,1,2],\n\n函数应该返回新的长度 2, 并且原数组 nums 的前两个元素被修改为 1, 2。\n\n你不需要考虑数组中超出新长度后面的元素。\n")),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"给定 nums = [0,0,1,1,1,2,2,3,3,4],\n\n函数应该返回新的长度 5, 并且原数组 nums 的前五个元素被修改为 0, 1, 2, 3, 4。\n\n你不需要考虑数组中超出新长度后面的元素。\n")),(0,i.kt)("p",null,"说明:"),(0,i.kt)("p",null,"为什么返回数值是整数, 但输出的答案是数组呢?"),(0,i.kt)("p",null,"请注意, 输入数组是以“引用”方式传递的, 这意味着在函数里修改输入数组对于调用者是可见的。"),(0,i.kt)("p",null,"你可以想象内部操作如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// nums 是以“引用”方式传递的。也就是说, 不对实参做任何拷贝\nint len = removeDuplicates(nums);\n\n// 在函数里修改输入数组对于调用者是可见的。\n// 根据你的函数返回的长度, 它会打印出数组中该长度范围内的所有元素。\nfor (int i = 0; i < len; i++) {\n    print(nums[i]);\n}\n")),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"解法一: 一般思路"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number}\n */\nvar removeDuplicates = function (nums) {\n  const cacheObj = {}\n  let count = 0\n  while (count < nums.length) {\n    if (cacheObj[nums[count]]) {\n      nums.splice(count, 1)\n      count--\n    } else {\n      cacheObj[nums[count]] = nums[count].toString() // 防止 0 被判断为 false\n    }\n    count++\n  }\n  return nums.length\n}\n")),(0,i.kt)("p",null,"解法二: 双指针"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/d3b1ba4aff45282b1ae4740d530c8834.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number}\n */\nvar removeDuplicates = function (nums) {\n  if (nums.length <= 1) return nums.length\n  let cur = 0 // 新数组的下标\n  for (let i = 1; i < nums.length; i++) {\n    if (nums[i] !== nums[cur]) {\n      nums[cur + 1] = nums[i]\n      cur++\n    }\n  }\n  return cur + 1\n}\n")),(0,i.kt)("h3",null,"同类题目"),(0,i.kt)("p",null,"27、80、283。"))}c.isMDXComponent=!0},66118:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"题目"),(0,i.kt)("p",null,"给定一个数组 nums 和一个值 val, ",(0,i.kt)("inlineCode",{parentName:"p"},"你需要原地移除所有数值等于 val 的元素, 返回移除后数组的新长度"),"。"),(0,i.kt)("p",null,"不要使用额外的数组空间, 你必须在原地修改输入数组并在使用 O(1) 额外空间的条件下完成。"),(0,i.kt)("p",null,"元素的顺序可以改变。你不需要考虑数组中超出新长度后面的元素。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"给定 nums = [3,2,2,3], val = 3,\n\n函数应该返回新的长度 2, 并且 nums 中的前两个元素均为 2。\n\n你不需要考虑数组中超出新长度后面的元素。\n")),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"给定 nums = [0,1,2,2,3,0,4,2], val = 2,\n\n函数应该返回新的长度 5, 并且 nums 中的前五个元素为 0, 1, 3, 0, 4。\n\n注意这五个元素可为任意顺序。\n\n你不需要考虑数组中超出新长度后面的元素。\n")),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"解法一: 一般思路"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} val\n * @return {number}\n */\nvar removeElement = function (nums, val) {\n  let place\n  while (~nums.indexOf(val)) {\n    place = nums.indexOf(val)\n    nums.splice(place, 1)\n  }\n  return nums.length\n}\n")),(0,i.kt)("p",null,"解法二: 双指针"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/e4ea67e0bdbf4af9ee3ad2a0ede55571.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} val\n * @return {number}\n */\nvar removeElement = function (nums, val) {\n  let cur = 0\n\n  for (let i = 0; i < nums.length; i++) {\n    if (nums[i] !== val) {\n      nums[cur] = nums[i]\n      cur++\n    }\n  }\n  return cur\n}\n")),(0,i.kt)("h3",null,"同类题目"),(0,i.kt)("p",null,"26、80、283。"))}c.isMDXComponent=!0},8723:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"279. Perfect Squares"),(0,i.kt)("p",null,"Given a positive integer n, find ",(0,i.kt)("inlineCode",{parentName:"p"},"the least number")," of perfect square numbers (for example, 1, 4, 9, 16, ...) which sum to n."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: n = 12\nOutput: 3\nExplanation: 12 = 4 + 4 + 4\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: n = 13\nOutput: 2\nExplanation: 13 = 4 + 9.\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"题目转化: 数字 n 到 0 最少能由几个平方数相加得到?"),(0,i.kt)("p",null,"首先思考能否使用贪心算法, 比如针对数字 12, 使用贪心算法先取能使用最大的数字 9, 结果为 9 1 1 1, 长度为 4; 但其实是有更短长度的答案 4 4 4 的, 因此不能使用贪心算法。"),(0,i.kt)("p",null,"建模: 构建树的数据结构:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/1ec5a5a75516e0ae7fa96c9c9a74bd79.jpg",alt:null}))),(0,i.kt)("p",null,"比如数字 5 到 0 的路径可以是"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"5 -> 1 -> 0"),";"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"5 -> 4 -> 0"),";"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"5 -> 4 -> 3 -> 2 -> 1 -> 0"),";")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @return {number}\n */\nvar numSquares = function(n) {\n  const list = []\n  list.push({ num: n, step: 0 })\n\n  while (list.length > 0) {\n    const { num, step } = list.shift()\n    if (num === 0) return step\n    for (let i = 1; num - i * i >= 0; i++) {\n      list.push({ num: num - i * i, step: step + 1 })\n    }\n  }\n}\n")),(0,i.kt)("p",null,"此时提交代码, 运行超时。"),(0,i.kt)("p",null,"进行分析, 以从 5 到达 1 为例, 有如下方式 ①: ",(0,i.kt)("inlineCode",{parentName:"p"},"5 -> 1"),"; ②: ",(0,i.kt)("inlineCode",{parentName:"p"},"5 -> 4 -> 3 -> 2 -> 1"),"; 显然不会采用第二种方式, 因此可以省略步骤二访问 1 的操作的。"),(0,i.kt)("p",null,"使用",(0,i.kt)("inlineCode",{parentName:"p"},"树的数据结构"),"时, 到达一个节点的路径是",(0,i.kt)("inlineCode",{parentName:"p"},"唯一确定"),"的, 与之相对地在使用",(0,i.kt)("inlineCode",{parentName:"p"},"图的数据结构"),"时, 到达一个节点的方式可能",(0,i.kt)("inlineCode",{parentName:"p"},"会存在多个路径"),"; 为此引入 visitedObj 来存储该节点是否已经访问过, 改进代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @return {number}\n */\nvar numSquares = function(n) {\n  const list = []\n  list.push({ num: n, step: 0 })\n  const visitedObj = { [n]: true }\n  while (list.length > 0) {\n    const { num, step, visited } = list.shift()\n    for (let i = 1;; i++) {\n      const extraNum = num - i * i\n      if (extraNum < 0) break\n      // this line return the result in advance, it reduces perform time very much.\n      if (extraNum === 0) return step + 1\n      if (!visitedObj[extraNum]) {\n        visitedObj[extraNum] = true\n        list.push({ num: num - i * i, step: step + 1 })\n      }\n    }\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/05fe8335c7c57360edd7e9d28fe3a102.jpg",alt:null}))),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"127、126"))}c.isMDXComponent=!0},10044:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"实现 strStr() 函数。"),(0,i.kt)("p",null,"给定一个 haystack 字符串和一个 needle 字符串, 在 haystack 字符串中找出 needle 字符串出现的第一个位置 (从 0 开始)。如果不存在, 则返回  -1。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("p",null,'输入: haystack = "hello", needle = "ll"\n输出: 2\n示例 2:'),(0,i.kt)("p",null,'输入: haystack = "aaaaa", needle = "bba"\n输出: -1\n说明:'),(0,i.kt)("p",null,"当 needle 是空字符串时, 我们应当返回什么值呢？这是一个在面试中很好的问题。"),(0,i.kt)("p",null,"对于本题而言, 当 needle 是空字符串时我们应当返回 0 。这与 C 语言的 strstr() 以及 Java 的 indexOf() 定义相符。"),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"后面需要改。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} haystack\n * @param {string} needle\n * @return {number}\n */\nvar strStr = function (haystack, needle) {\n  return haystack.indexOf(needle)\n};\n")))}c.isMDXComponent=!0},87125:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"给定一个数组 nums，编写一个函数将所有 0 移动到数组的末尾，同时保持非零元素的相对顺序。"),(0,i.kt)("p",null,"示例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: [0,1,0,3,12]\n输出: [1,3,12,0,0]\n")),(0,i.kt)("p",null,"说明:"),(0,i.kt)("p",null,"必须在原数组上操作，不能拷贝额外的数组。\n尽量减少操作次数。"),(0,i.kt)("h3",null,"first code"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"思路一: 将 0 从数组中移除, 并用 count 变量计算移除 0 的个数, 最后将数组 push 回 count 个 0。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {void} Do not return anything, modify nums in-place instead.\n */\nvar moveZeroes = function(nums) {\n  const length = nums.length\n  let count = 0               // 0 的个数\n  for (let i = 0; i < length; i++) {\n    if (nums[i - count] === 0) {\n      nums.splice(i - count, 1)\n      count++\n    }\n  }\n  for (let i = 0; i < count; i++) {\n    nums.push(0)\n  }\n  return nums\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"思路二: 使用双指针")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {void} Do not return anything, modify nums in-place instead.\n */\nvar moveZeroes = function(nums) {\n  let m = 0 // 指针一的下标, [0, m) 区域用于存储非 0 元素\n\n  for (let i = 0; i < nums.length; i++) {\n    if (nums[i]) { // 如果存在 num[i] 不为 0, 则让其与 num[m] 交换\n      if (i !== m) {\n        [nums[m], nums[i]] = [nums[i], nums[m]]\n      }\n      m++\n    }\n  }\n  return nums\n}\n")),(0,i.kt)("h3",null,"同类题目"),(0,i.kt)("p",null,"26、27、80。"))}c.isMDXComponent=!0},60602:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给定一种规律 pattern 和一个字符串 str ，判断 str 是否遵循相同的规律。"),(0,i.kt)("p",null,"这里的「遵循」指完全匹配，例如 pattern 里的每个字母和字符串 str 中的每个非空单词之间存在着双向连接的对应规律。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入: pattern = "abba", str = "dog cat cat dog"\n输出: true\n')),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入:pattern = "abba", str = "dog cat cat fish"\n输出: false\n')),(0,i.kt)("p",null,"示例 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入: pattern = "aaaa", str = "dog cat cat dog"\n输出: false\n')),(0,i.kt)("p",null,"示例 4:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入: pattern = "abba", str = "dog dog dog dog"\n输出: false\n')),(0,i.kt)("p",null,"说明:\n你可以假设 pattern 只包含小写字母，str 包含了由单个空格分隔的小写字母。    "),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"思路:"),(0,i.kt)("p",null,"使用 patternMap 与 strArrMap 分别存储 ",(0,i.kt)("inlineCode",{parentName:"p"},"pattern => strArrMap")," 与 ",(0,i.kt)("inlineCode",{parentName:"p"},"strArrMap => pattern")," 的映射, 当存在一对多映射的情况时, 则它们非完全匹配, 否则是完全匹配的。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} pattern\n * @param {string} str\n * @return {boolean}\n */\nvar wordPattern = function(pattern, str) {\n  const strArr = str.split(' ')\n  if (pattern.length !== strArr.length) return false\n\n  const patternMap = new Map()\n  const strArrMap = new Map()\n\n  for (let i = 0; i < pattern.length; i++) {\n    const getPatternMap = patternMap.get(pattern[i])\n    const getStrArrMap = strArrMap.get(strArr[i])\n    if (!getPatternMap) {\n      patternMap.set(pattern[i], strArr[i])\n    } else if (getPatternMap !== strArr[i]) {\n      return false\n    }\n\n    if (!getStrArrMap) {\n      strArrMap.set(strArr[i], pattern[i])\n    } else if (getStrArrMap !== pattern[i]) {\n      return false\n    }\n  }\n\n  return true\n};\n")),(0,i.kt)("h3",null,"相关题目"),(0,i.kt)("p",null,"202、205、242、349、350、451"))}c.isMDXComponent=!0},7818:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给定一个字符串, 找出不含有重复字符的最长子串的长度。"),(0,i.kt)("p",null,"示例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'给定 "abcabcbb", 没有重复字符的最长子串是 "abc", 那么长度就是 3。\n\n给定 "bbbbb", 最长的子串就是 "b", 长度是 1。\n\n给定 "pwwkew", 最长子串是 "wke", 长度是 3。请注意答案必须是一个子串, "pwke" 是子序列而不是子串。\n')),(0,i.kt)("h3",null,"题解"),(0,i.kt)("p",null,"方法名: 滑动窗口是字符串/数组中常用概念"),(0,i.kt)("p",null,"解法一: ",(0,i.kt)("inlineCode",{parentName:"p"},"判断字符串 s[i, j) 中是否有 s.charAt(j + 1), 如果有, 给左区间加上相应的值"),", 执行时间大致为 98ms 左右。"),(0,i.kt)("p",null,"具体步骤如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"取滑动列表 ","[left, right]",";"),(0,i.kt)("li",{parentName:"ol"},"若列表 ","[left, right]"," 中的取值之和小于 s, 则列表的有边界 right 往右扩张。"),(0,i.kt)("li",{parentName:"ol"},"若列表 ","[left, right]"," 中的取值之和大于 s, 则列表的左边界 left 往右扩张。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {number}\n */\nvar lengthOfLongestSubstring = function(s) {\n  if (s.length < 1) {\n    return 0\n  }\n  let i = 0, j = 1, longest = 1\n  while (j < s.length) {\n    if (s.slice(i, j).indexOf(s.charAt(j)) > -1) {\n      i += s.slice(i, j).indexOf(s.charAt(j)) + 1\n    } else {\n      longest = Math.max(j - i + 1, longest)\n    }\n    j++\n  }\n  return longest\n}\n")),(0,i.kt)("p",null,"思考: 针对 ",(0,i.kt)("inlineCode",{parentName:"p"},"判断字符串 s[i, j) 中是否有 s.charAt(j + 1)")," 这一句, 是否能使用 O(n) 时间复杂度的算法代替 indexOf 呢? 使用 cacheObj 来缓存值, 测试执行时间大致为 170ms 左右。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {number}\n */\nvar lengthOfLongestSubstring = function(s) {\n  let left = 0, right = 0 // [left, right] 区域\n  let result = 0 // 假定结果的初始值为 0\n  const cacheObj = {}\n\n  while (left < s.length) {\n    if (right < s.length && !cacheObj[s[right]]) {\n      cacheObj[s[right]] = 1\n      result = Math.max(result, right - left + 1)\n      right++\n    } else {\n      cacheObj[s[left]] = null\n      left++\n    }\n  }\n  if (result === 0) {\n    return 0\n  }\n  return result\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"76(todo)、209、438"))}c.isMDXComponent=!0},21499:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"Given a singly linked list, group all odd nodes together followed by the even nodes. Please note here we are talking about the node number and not the value in the nodes."),(0,i.kt)("p",null,"You should try to do it in place. The program should run in O(1) space complexity and O(nodes) time complexity."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->2->3->4->5->NULL\nOutput: 1->3->5->2->4->NULL\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 2->1->3->5->6->4->7->NULL\nOutput: 2->3->6->7->1->5->4->NULL\n")),(0,i.kt)("p",null,"Note:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The relative order inside both the even and odd groups should remain as it was in the input;"),(0,i.kt)("li",{parentName:"ul"},"The first node is considered odd, the second node even and so on;")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"       cur    next\nInput:  1  ->  2  ->  3  ->  4  ->  5  ->  NULL\n       prev   cur    next\n        1  ->  2  ->  3  ->  4  ->  5  ->  NULL\n                      .\n                      .\n                            prev   cur    next  遍历完成后, 如果此时是奇数位则将 cur 的指针指向偶数列表。\n        1  ->  2  ->  3  ->  4  ->  5  ->  NULL\n\n\nOutput: 1  ->  3  ->  5  ->  2  ->  4  ->  NULL\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"将 prev 的 next 指向 next;"),(0,i.kt)("li",{parentName:"ul"},"如何将奇数链表与偶数链表进行链接(末尾的链表可能为奇数位也可能为偶数位)?")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar oddEvenList = function(head) {\n  if (!head) return head\n  const list = new ListNode(0)\n  list.next = head\n  const odd = list.next\n  const even = odd.next\n\n  let prev = null\n  let cur = list.next\n  let next = cur.next\n  let count = 1\n\n  while (next) {\n    prev && (prev.next = next)\n    prev = cur\n    cur = next\n    next = cur.next\n    count++\n  }\n\n  if (count % 2 === 1) {\n    prev && (prev.next = null)\n    cur.next = even\n  } else {\n    prev.next = even\n  }\n\n  return odd\n}\n")))}c.isMDXComponent=!0},47597:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"假设按照升序排序的数组在预先未知的某个点上进行了旋转。"),(0,i.kt)("p",null,"( 例如, 数组 ","[0,1,2,4,5,6,7]"," 可能变为 ","[4,5,6,7,0,1,2]"," )。"),(0,i.kt)("p",null,"搜索一个给定的目标值, 如果数组中存在这个目标值, 则返回它的索引, 否则返回 -1 。"),(0,i.kt)("p",null,"你可以假设数组中不存在重复的元素。"),(0,i.kt)("p",null,"你的算法时间复杂度必须是 O(log n) 级别。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"输入: nums = [4,5,6,7,0,1,2], target = 0\n输出: 4\n")),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"输入: nums = [4,5,6,7,0,1,2], target = 3\n输出: -1\n")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"思路: 考虑使用二分法? 这题难度觉得超纲了。然后再想。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 这道题卡在如何确定返回的指标\n/**\n * @param {number[]} nums\n * @param {number} target\n * @return {number}\n */\nvar search = function (nums, target) {\n  const length = nums.length\n  const middle = Math.floor(length / 2)\n  const leftArr = nums.slice(0, middle)\n  const rightArr = nums.slice(middle, length)\n\n  if (isOrder(leftArr)) {\n    sortByDivided(leftArr, target)\n  } else {\n    search(leftArr, target)\n  }\n\n  if (isOrder(rightArr)) {\n    sortByDivided(rightArr, target)\n  } else {\n    search(rightArr, target)\n  }\n};\n\nvar isOrder = function(arr) {\n  return arr[0] < arr[arr.length - 1]\n}\n\nvar sortByDivided = function(arr, target) {\n  const length = arr.length\n  let left = 0\n  let right = length\n  let middle\n\n  while (left <= right) {\n    middle = Math.floor((left + right) / 2)\n    if (target > arr[middle]) {\n      left = middle + 1\n    } else if (target < arr[middle]) {\n      right = middle - 1\n    } else if (target === arr[middle]) {\n      return middle\n    }\n  }\n\n  return false\n}\n")))}c.isMDXComponent=!0},73812:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"337. House Robber III"),(0,i.kt)("p",null,"The thief has found himself a new place for his thievery again. There is only one entrance to this area, called root."),(0,i.kt)("p",null,"Besides the root, each house has one and only one parent house. After a tour, the smart thief realized that all houses in this place form a binary tree. It will automatically contact the police if two directly-linked houses were broken into on the same night."),(0,i.kt)("p",null,"Given the root of the binary tree, return the maximum amount of money the thief can rob without alerting the police."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"           3\n        ↙   ↘\n      2         3\n        ↘        ↘\n          3         1\n\n\n\nInput: root = [3,2,3,null,3,null,1]\nOutput: 7\nExplanation: Maximum amount of money the thief can rob = 3 + 3 + 1 = 7.\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"           3\n        ↙   ↘\n      4         5\n   ↙   ↘        ↘\n 1        3         1\n\nInput: root = [3,4,5,1,3,null,1]\nOutput: 9\nExplanation: Maximum amount of money the thief can rob = 4 + 5 = 9.\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Constraints:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The number of nodes in the tree is in the range ","[1, 104]","."),(0,i.kt)("li",{parentName:"ul"},"0 <= Node.val <= 104")))),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number}\n */\nvar rob = function(root) {\n\n};\n")))}c.isMDXComponent=!0},10106:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"341.Flatten Nested List Iterator"),(0,i.kt)("p",null,"Given a nested list of integers, implement an ",(0,i.kt)("inlineCode",{parentName:"p"},"iterator")," to flatten it."),(0,i.kt)("p",null,"Each element is either an integer, or a list -- whose elements may also be integers or other lists."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: [[1,1],2,[1,1]]\nOutput: [1,1,2,1,1]\n")),(0,i.kt)("p",null,"Explanation: By calling next repeatedly until hasNext returns false,\n             the order of elements returned by next should be: ","[1,1,2,1,1]","."),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: [1,[4,[6]]]\nOutput: [1,4,6]\n")),(0,i.kt)("p",null,"Explanation: By calling next repeatedly until hasNext returns false,\n             the order of elements returned by next should be: ","[1,4,6]","."),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"该题需注意的点: [1, ","[4]","] 里的子项 1, ","[4]"," 分别通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"getInteger")," 与 ",(0,i.kt)("inlineCode",{parentName:"p"},"getList")," 获取到。"),(0,i.kt)("h3",null,"递归法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * // This is the interface that allows for creating nested lists.\n * // You should not implement it, or speculate about its implementation\n * function NestedInteger() {\n *\n *     Return true if this NestedInteger holds a single integer, rather than a nested list.\n *     @return {boolean}\n *     this.isInteger = function() {\n *         ...\n *     };\n *\n *     Return the single integer that this NestedInteger holds, if it holds a single integer\n *     Return null if this NestedInteger holds a nested list\n *     @return {integer}\n *     this.getInteger = function() {\n *         ...\n *     };\n *\n *     Return the nested list that this NestedInteger holds, if it holds a nested list\n *     Return null if this NestedInteger holds a single integer\n *     @return {NestedInteger[]}\n *     this.getList = function() {\n *         ...\n *     };\n * };\n */\n/**\n * @constructor\n * @param {NestedInteger[]} nestedList\n */\nvar NestedIterator = function(nestedList) {\n  this.printArr = []\n  this.resetArr(nestedList)\n}\n\nNestedIterator.prototype.resetArr = function(nestedList) {\n  if (!nestedList && !nestedList.length) return\n  for (let i = 0; i < nestedList.length; i++) {\n    const curList = nestedList[i]\n    if (curList.isInteger()) {\n      this.printArr.unshift(curList.getInteger())\n    } else {\n      this.resetArr(curList.getList())\n    }\n  }\n}\n\n/**\n * @this NestedIterator\n * @returns {boolean}\n */\nNestedIterator.prototype.hasNext = function() {\n  return this.printArr.length > 0\n}\n\n/**\n * @this NestedIterator\n * @returns {integer}\n */\nNestedIterator.prototype.next = function() {\n  return this.printArr.pop()\n}\n\n/**\n * Your NestedIterator will be called like this:\n * var i = new NestedIterator(nestedList), a = [];\n * while (i.hasNext()) a.push(i.next());\n*/\n")),(0,i.kt)("h3",null,"迭代法"),(0,i.kt)("p",null,"相对递归法, 迭代法需要额外维护一个",(0,i.kt)("inlineCode",{parentName:"p"},"系统调用栈"),", 然后使用",(0,i.kt)("inlineCode",{parentName:"p"},"颜色标记法"),"完成题解。"),(0,i.kt)("p",null,"颜色标记法思路:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"未访问过的列表标记为",(0,i.kt)("inlineCode",{parentName:"li"},"白色"),", 访问过的列表标记为",(0,i.kt)("inlineCode",{parentName:"li"},"灰色"),";"),(0,i.kt)("li",{parentName:"ul"},"从栈顶取出访问元素:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"若为灰色元素, 则打印之;"),(0,i.kt)("li",{parentName:"ul"},"若为白色元素, 则遍历子列表:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"若子列表为列表, 则将其",(0,i.kt)("inlineCode",{parentName:"li"},"标记为白色"),"并推入栈;"),(0,i.kt)("li",{parentName:"ul"},"若子列表为数字, 则将其",(0,i.kt)("inlineCode",{parentName:"li"},"标记为灰色"),"并推入栈;")))))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * // This is the interface that allows for creating nested lists.\n * // You should not implement it, or speculate about its implementation\n * function NestedInteger() {\n *\n *     Return true if this NestedInteger holds a single integer, rather than a nested list.\n *     @return {boolean}\n *     this.isInteger = function() {\n *         ...\n *     };\n *\n *     Return the single integer that this NestedInteger holds, if it holds a single integer\n *     Return null if this NestedInteger holds a nested list\n *     @return {integer}\n *     this.getInteger = function() {\n *         ...\n *     };\n *\n *     Return the nested list that this NestedInteger holds, if it holds a nested list\n *     Return null if this NestedInteger holds a single integer\n *     @return {NestedInteger[]}\n *     this.getList = function() {\n *         ...\n *     };\n * };\n */\n/**\n * @constructor\n * @param {NestedInteger[]} nestedList\n */\nvar NestedIterator = function(nestedList) {\n  this.printArr = []\n  if (!nestedList) return\n  this.stackList = []\n  this.stackList.push({ color: 'white', list: nestedList })\n  while (this.stackList.length > 0) {\n    const { color, list } = this.stackList.pop()\n    if (color === 'gray') {\n      this.printArr.unshift(list)\n    } else {\n      for (let i = 0; i < list.length; i++) {\n        if (list[i].isInteger()) {\n          this.stackList.push({ color: 'gray', list: list[i].getInteger() })\n        } else {\n          this.stackList.push({ color: 'white', list: list[i].getList() })\n        }\n      }\n    }\n  }\n}\n\n/**\n * @this NestedIterator\n * @returns {boolean}\n */\nNestedIterator.prototype.hasNext = function() {\n  return this.printArr.length > 0\n}\n\n/**\n * @this NestedIterator\n * @returns {integer}\n */\nNestedIterator.prototype.next = function() {\n  return this.printArr.shift()\n}\n\n/**\n * Your NestedIterator will be called like this:\n * var i = new NestedIterator(nestedList), a = [];\n * while (i.hasNext()) a.push(i.next());\n*/\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"94、144、145"))}c.isMDXComponent=!0},65766:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"343. Integer Break"),(0,i.kt)("p",null,"Given an integer n, break it into the sum of k ",(0,i.kt)("inlineCode",{parentName:"p"},"positive integers"),", where k >= 2, and ",(0,i.kt)("inlineCode",{parentName:"p"},"maximize")," the product of those integers."),(0,i.kt)("p",null,"Return the maximum product you can get."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: n = 2\nOutput: 1\nExplanation: 2 = 1 + 1, 1 × 1 = 1.\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: n = 10\nOutput: 36\nExplanation: 10 = 3 + 3 + 4, 3 × 3 × 4 = 36.\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Constraints:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2 <= n <= 58")))),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"n 拆分若干数后的乘积可拆分为: ",(0,i.kt)("inlineCode",{parentName:"p"},"1 * integerBreak(n - 1)"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"2 * integerBreak(n - 2)")," ...,  ",(0,i.kt)("inlineCode",{parentName:"p"},"x * integerBreak(n - x)"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"n === 2\n1 * 1\n\nn === 3\n1 * integerBreak(2)\n\nn === 4\n1 * integerBreak(3)\n2 * integerBreak(2)\n\nn === 5\n1 * integerBreak(4)\n2 * integerBreak(3)\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"递归思路(自顶向下)如下")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @return {number}\n */\nvar cache = {}\nvar integerBreak = function(n) {\n  if (n === 1) return 1\n  if (cache[n]) return cache[n]\n  let result = 0\n  // here the i means for the value to be subtracted\n  for (let i = 1; i < n; i++) {\n    if (i > n - i) {\n      break\n    }\n    result = Math.max(result, i * Math.max(integerBreak(n - i), n - i))\n  }\n  return cache[n] = result\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"接着使用动态规划(自底向上)思路实现:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @return {number}\n */\nvar cache = {\n  1: 1\n}\nvar integerBreak = function(n) {\n  if (n === 1) return 1\n\n  let result = 0\n  // here the i means for the value to calc\n  for (let i = 2; i <= n; i++) {\n    // here the m means for the value to be subtracted\n    for (let m = 1; m < i; m++) {\n      result = Math.max(result, m * Math.max(cache[i - m], i - m))\n    }\n    cache[i] = result\n  }\n\n  return result\n}\n")))}c.isMDXComponent=!0},22047:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"题目: 反转字符串"),(0,i.kt)("p",null,"编写一个函数，其作用是将输入的",(0,i.kt)("inlineCode",{parentName:"p"},"字符串反转过来"),"。输入字符串以字符数组 char[] 的形式给出。"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"不要给另外的数组分配额外的空间，你必须原地修改输入数组、使用 O(1) 的额外空间解决这一问题"),"。"),(0,i.kt)("p",null,"你可以假设数组中的所有字符都是 ASCII 码表中的可打印字符。"),(0,i.kt)("p",null,"示例 1："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入：["h","e","l","l","o"]\n输出：["o","l","l","e","h"]\n')),(0,i.kt)("p",null,"示例 2："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入：["H","a","n","n","a","h"]\n输出：["h","a","n","n","a","H"]\n')),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"方法一: 使用数组的 ",(0,i.kt)("inlineCode",{parentName:"p"},"reverse")," 方法。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {character[]} s\n * @return {void} Do not return anything, modify s in-place instead.\n */\nvar reverseString = function(s) {\n    s.reverse()\n}\n")),(0,i.kt)("p",null,"方法二: ",(0,i.kt)("inlineCode",{parentName:"p"},"指针碰撞")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {character[]} s\n * @return {void} Do not return anything, modify s in-place instead.\n */\nvar reverseString = function(s) {\n  let left = 0, right = s.length - 1\n\n  while (left <= right) {\n    swap(s, left, right)\n    left++\n    right--\n  }\n}\n\n/* 交换位置\n  nums 数组, a, b 为下标\n*/\nvar swap = function(nums, a, b) {\n  const tmp = nums[a]\n  nums[a] = nums[b]\n  nums[b] = tmp\n}\n")),(0,i.kt)("h3",null,"相似问题"),(0,i.kt)("p",null,"125、167、345"))}c.isMDXComponent=!0},16023:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"题目: 反转字符串中的元音字母"),(0,i.kt)("p",null,"编写一个函数，以字符串作为输入，反转该字符串中的元音字母。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入: "hello"\n输出: "holle"\n')),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入: "leetcode"\n输出: "leotcede"\n')),(0,i.kt)("p",null,'说明:\n元音字母不包含字母"y"。'),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"双指针法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {string}\n */\nvar reverseVowels = function(s) {\n  let left = 0, right = s.length - 1\n  let result = s\n  while (left <= right) {\n    const isValidateLeft = isValidate(s[left])\n    const isValidateRight = isValidate(s[right])\n    if (isValidateLeft && isValidateRight) {\n      result = swap(result, left, right)\n      left++\n      right--\n    }\n    if (!isValidateLeft) {\n      left++\n    }\n    if (!isValidateRight) {\n      right--\n    }\n  }\n  return result\n}\n\nvar isValidate = (value) => {\n  return /a|e|i|o|u|A|E|I|O|U/.test(value)\n}\n\n/* 交换位置\n  a, b 为下标\n*/\nvar swap = function(str, a, b) {\n  const arr = str.split('')\n  const tmp = arr[a]\n  arr[a] = arr[b]\n  arr[b] = tmp\n  return arr.join('')\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"125、167、344"))}c.isMDXComponent=!0},56423:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"347.Top K Frequent Elements"),(0,i.kt)("p",null,"Given a non-empty array of integers, return the k most frequent elements."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Example 1:\n\nInput: nums = [1,1,1,2,2,3], k = 2\nOutput: [1,2]\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1], k = 1\nOutput: [1]\n")),(0,i.kt)("p",null,"Note:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You may assume k is always valid, 1 ≤ k ≤ number of unique elements."),(0,i.kt)("li",{parentName:"ul"},"Your algorithm's ",(0,i.kt)("inlineCode",{parentName:"li"},"time complexity must be better than O(n log n)"),", where n is the array's size."),(0,i.kt)("li",{parentName:"ul"},"It's guaranteed that ",(0,i.kt)("inlineCode",{parentName:"li"},"the answer is unique"),", in other words the set of the top k frequent elements is unique."),(0,i.kt)("li",{parentName:"ul"},"You can return the answer in any order.")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思路一:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"将各个元素出现的频率统计进哈希表中;"),(0,i.kt)("li",{parentName:"ol"},"然后对出现频率进行排序;"),(0,i.kt)("li",{parentName:"ol"},"取频率排前 k 的元素;")),(0,i.kt)("p",null,"这样的时间复杂度为 O(nlog n) 级别。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} k\n * @return {number[]}\n */\nvar topKFrequent = function(nums, k) {\n  const obj = {}\n  for (let i = 0; i < nums.length; i++) {\n    if (!obj[nums[i]]) {\n      obj[nums[i]] = 1\n    } else {\n      obj[nums[i]] = obj[nums[i]] + 1\n    }\n  }\n\n  const list = []\n\n  const keysArr = Object.keys(obj)\n  for (let i = 0; i < keysArr.length; i++) {\n    const key = keysArr[i]\n    const value = obj[key]\n    list.push({ key, value })\n  }\n\n  list.sort((r1, r2) => r2.value - r1.value)\n  const result = []\n  list.map((obj, index) => {\n    if (index < k) {\n      result.push(parseInt(obj.key, 10))\n    }\n  })\n  return result\n}\n")),(0,i.kt)("p",null,"该题解虽然可以 ac, 但是由于题目给出了时间复杂度需小于 ",(0,i.kt)("inlineCode",{parentName:"p"},"(n log n)")," 这一限制, 因而我们思考其它方式🤔。"),(0,i.kt)("p",null,"思路二: 桶排序分组的思想"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"首先将各个元素出现的频率统计进哈希表中;"),(0,i.kt)("li",{parentName:"ol"},"将频率减去 1 后的值作为数组 list 的下标存入;"),(0,i.kt)("li",{parentName:"ol"},"从 list 中遍历取出频率最高的 k 个元素;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} k\n * @return {number[]}\n */\nvar topKFrequent = function(nums, k) {\n  const obj = {}\n  for (let i = 0; i < nums.length; i++) {\n    if (!obj[nums[i]]) {\n      obj[nums[i]] = 1\n    } else {\n      obj[nums[i]] = obj[nums[i]] + 1\n    }\n  }\n\n  const list = []\n\n  const keysArr = Object.keys(obj)\n  for (let i = 0; i < keysArr.length; i++) {\n    const key = keysArr[i]\n    const value = obj[key]\n    if (!list[value - 1]) {\n      list[value - 1] = [parseInt(key, 10)]\n    } else {\n      list[value - 1].push(parseInt(key, 10))\n    }\n  }\n\n  const result = []\n  let count = 0\n  for (let i = list.length - 1; i >= 0; i--) {\n    const curList = list[i]\n    if (curList) {\n      for (let x = 0; x < curList.length; x++) {\n        if (count === k) return result\n        result.push(curList[x])\n        count++\n      }\n    }\n  }\n  return result\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/926ca1b564c07610790ab1e0e4cafa6f.jpg",alt:null}))))}c.isMDXComponent=!0},6316:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给定两个数组，编写一个函数来计算它们的交集。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: nums1 = [1,2,2,1], nums2 = [2,2]\n输出: [2]\n")),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: nums1 = [4,9,5], nums2 = [9,4,9,8,4]\n输出: [9,4]\n")),(0,i.kt)("p",null,"说明:"),(0,i.kt)("p",null,"输出结果中的每个元素一定是",(0,i.kt)("inlineCode",{parentName:"p"},"唯一的"),"。\n我们可以不考虑输出结果的顺序。"),(0,i.kt)("h3",null,"题解"),(0,i.kt)("p",null,"因为题目明确了输出结果中的每个元素一定是",(0,i.kt)("inlineCode",{parentName:"p"},"唯一的"),", 因而可以使用集合 Set 唯一的特性, 完成题解。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums1\n * @param {number[]} nums2\n * @return {number[]}\n */\nvar intersection = function(nums1, nums2) {\n  const resultSet = new Set()\n  const num1Set = new Set(nums1)\n  for (let i = 0; i < nums2.length; i++) {\n    if (num1Set.has(nums2[i])) {\n      resultSet.add(nums2[i])\n    }\n  }\n\n  return [...resultSet]\n}\n")),(0,i.kt)("h3",null,"进阶思考"),(0,i.kt)("p",null,"如果给定的两个数组是排好序的, 是否有其它解法呢?"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: nums1 = [1,1,2,2], nums2 = [2,2]\n输出: [2]\n")),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: nums1 = [4,5,9], nums2 = [4,4,8,9,9]\n输出: [4,9]\n")),(0,i.kt)("p",null,"大致想法: 可以使用移动指针的方式。"),(0,i.kt)("h3",null,"相关题目"),(0,i.kt)("p",null,"202、205、242、290、350、451"))}c.isMDXComponent=!0},33196:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给定一个排序数组和一个目标值, 在数组中找到目标值, 并返回其索引。如果目标值不存在于数组中, 返回它将会被按顺序插入的位置。"),(0,i.kt)("p",null,"你可以假设数组中无重复元素。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"输入: [1,3,5,6], 5\n输出: 2\n")),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"输入: [1,3,5,6], 2\n输出: 1\n")),(0,i.kt)("p",null,"示例 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"输入: [1,3,5,6], 7\n输出: 4\n")),(0,i.kt)("p",null,"示例 4:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"输入: [1,3,5,6], 0\n输出: 0\n")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"水题"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @param {number} target\n * @return {number}\n */\nvar searchInsert = function (nums, target) {\n  let i = 0\n  while (i < nums.length) {\n    if (target <= nums[i]) {\n      return i\n    }\n\n    if (target > nums[nums.length - 1]) {\n      return nums.length\n    }\n    i++\n  }\n};\n")))}c.isMDXComponent=!0},62386:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给定两个数组, 编写一个函数来计算它们的交集。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: nums1 = [1,2,2,1], nums2 = [2,2]\n输出: [2,2]\n")),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: nums1 = [4,9,5], nums2 = [9,4,9,8,4]\n输出: [4,9]\n")),(0,i.kt)("p",null,"说明:"),(0,i.kt)("p",null,"输出结果中",(0,i.kt)("inlineCode",{parentName:"p"},"每个元素出现的次数, 应与元素在两个数组中出现的次数一致"),"。\n我们",(0,i.kt)("inlineCode",{parentName:"p"},"可以不考虑输出结果的顺序"),"。"),(0,i.kt)("p",null,"进阶:"),(0,i.kt)("p",null,"如果给定的数组已经排好序呢？你将如何优化你的算法？\n如果 nums1 的大小比 nums2 小很多，哪种方法更优？\n如果 nums2 的元素存储在磁盘上，磁盘内存是有限的，并且你不能一次加载所有的元素到内存中，你该怎么办？"),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"思路: 使用字典 Map 的数据结构来统计次数。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"将 num1、nums2 各自出现的次数分别统计存进 nums1Map 与 nums2Map 中;"),(0,i.kt)("li",{parentName:"ol"},"根据题目说明中的条件",(0,i.kt)("inlineCode",{parentName:"li"},"可以不考虑输出结果的顺序"),", 因而可以以 num1、nums2 相同的 key 中较小的值为输出次数, 将其输出;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums1\n * @param {number[]} nums2\n * @return {number[]}\n */\nvar intersect = function(nums1, nums2) {\n  const nums1Map = getMap(nums1)\n  const nums2Map = getMap(nums2)\n\n  const result = []\n\n  nums1Map.forEach((nums1Value, key) => {\n    const nums2MapHasKey = nums2Map.get(key)\n    if (nums2MapHasKey) {\n      for (let i = 0; i < Math.min(nums1Value, nums2MapHasKey); i++) {\n        result.push(key)\n      }\n    }\n  })\n\n  return result\n};\n\nvar getMap = function(arr) {\n  const map = new Map()\n  for (let i = 0; i < arr.length; i++) {\n    const getValue = map.get(arr[i])\n    if (!getValue) {\n      map.set(arr[i], 1)\n    } else {\n      map.set(arr[i], getValue + 1)\n    }\n  }\n  return map\n}\n")),(0,i.kt)("h3",null,"进阶"),(0,i.kt)("p",null,"如果给定的两个数组是排好序的, 是否有其它解法呢?"),(0,i.kt)("h3",null,"相关题"),(0,i.kt)("p",null,"202、205、242、290、349、451"))}c.isMDXComponent=!0},22518:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"36.Valid_Sudoku"),(0,i.kt)("p",null,"判断一个 9 x 9 的数独是否有效。只需要根据以下规则, ",(0,i.kt)("inlineCode",{parentName:"p"},"验证已经填入的数字是否有效即可"),"。"),(0,i.kt)("p",null,"1.数字 1 - 9 在每一行只能出现一次。\n2.数字 1 - 9 在每一列只能出现一次。\n3.数字 1 - 9 在每一个以粗实线分隔的 3 x 3 宫内只能出现一次。"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode-cn.com/problems/valid-sudoku/description/"}),"题目链接")),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入:\n[\n  ["5","3",".",".","7",".",".",".","."],\n  ["6",".",".","1","9","5",".",".","."],\n  [".","9","8",".",".",".",".","6","."],\n  ["8",".",".",".","6",".",".",".","3"],\n  ["4",".",".","8",".","3",".",".","1"],\n  ["7",".",".",".","2",".",".",".","6"],\n  [".","6",".",".",".",".","2","8","."],\n  [".",".",".","4","1","9",".",".","5"],\n  [".",".",".",".","8",".",".","7","9"]\n]\n输出: true\n')),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入:\n[\n  ["8","3",".",".","7",".",".",".","."],\n  ["6",".",".","1","9","5",".",".","."],\n  [".","9","8",".",".",".",".","6","."],\n  ["8",".",".",".","6",".",".",".","3"],\n  ["4",".",".","8",".","3",".",".","1"],\n  ["7",".",".",".","2",".",".",".","6"],\n  [".","6",".",".",".",".","2","8","."],\n  [".",".",".","4","1","9",".",".","5"],\n  [".",".",".",".","8",".",".","7","9"]\n]\n输出: false\n')),(0,i.kt)("p",null,"解释: 除了第一行的第一个数字从 5 改为 8 以外, 空格内其他数字均与示例 1 相同。\n但由于位于左上角的 3 x 3 宫内有两个 8 存在, 因此这个数独是无效的。"),(0,i.kt)("p",null,"说明:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"一个有效的数独（部分已被填充）不一定是可解的"),(0,i.kt)("li",{parentName:"ul"},"只需要根据以上规则, 验证已经填入的数字是否有效即可"),(0,i.kt)("li",{parentName:"ul"},"给定数独序列只包含数字 1 - 9 和字符 '.'"),(0,i.kt)("li",{parentName:"ul"},"给定数独永远是 9 x 9 形式的")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"依次遍历二维数组, 对 3 种情况分别进行校验。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {character[][]} board\n * @return {boolean}\n */\nvar isValidSudoku = function (board) {\n  const set = new Set()\n  for (let x = 0; x < 9; x++) {\n    for (let y = 0; y < 9; y++) {\n      const num = board[x][y]\n      if (num !== '.') {\n        if (set.has(`row ${x} ${num}`)\n          || set.has(`col ${y} ${num}`)\n          || set.has(`block ${Math.floor(x / 3)} ${Math.floor(y / 3)} ${num}`)\n        ) {\n          return false\n        } else {\n          set.add(`row ${x} ${num}`)\n          set.add(`col ${y} ${num}`)\n          set.add(`block ${Math.floor(x / 3)} ${Math.floor(y / 3)} ${num}`)\n        }\n      }\n    }\n  }\n  return true\n};\n")))}c.isMDXComponent=!0},86053:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"37. Sudoku Solver"),(0,i.kt)("p",null,"Write a program to solve a Sudoku puzzle by filling the empty cells."),(0,i.kt)("p",null,"A sudoku solution must satisfy all of the following rules:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Each of the digits 1-9 must occur exactly once in each row."),(0,i.kt)("li",{parentName:"ol"},"Each of the digits 1-9 must occur exactly once in each column."),(0,i.kt)("li",{parentName:"ol"},"Each of the digits 1-9 must occur exactly once in each of the 9 ",(0,i.kt)("inlineCode",{parentName:"li"},"3 x 3")," sub-boxes of the grid.")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"The '.' character indicates empty cells.")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Sudoku-by-L2G-20050714.svg/250px-Sudoku-by-L2G-20050714.svg.png",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input:\nboard =\n[\n  ["5","3",".",".","7",".",".",".","."],\n  ["6",".",".","1","9","5",".",".","."],\n  [".","9","8",".",".",".",".","6","."],\n  ["8",".",".",".","6",".",".",".","3"],\n  ["4",".",".","8",".","3",".",".","1"],\n  ["7",".",".",".","2",".",".",".","6"],\n  [".","6",".",".",".",".","2","8","."],\n  [".",".",".","4","1","9",".",".","5"],\n  [".",".",".",".","8",".",".","7","9"]\n]\n\nOutput:\n[\n  ["5","3","4","6","7","8","9","1","2"],\n  ["6","7","2","1","9","5","3","4","8"],\n  ["1","9","8","3","4","2","5","6","7"],\n  ["8","5","9","7","6","1","4","2","3"],\n  ["4","2","6","8","5","3","7","9","1"],\n  ["7","1","3","9","2","4","8","5","6"],\n  ["9","6","1","5","3","7","2","8","4"],\n  ["2","8","7","4","1","9","6","3","5"],\n  ["3","4","5","2","8","6","1","7","9"]\n]\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Explanation: The input board is shown above and the only valid solution is shown below:")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Sudoku-by-L2G-20050714_solution.svg/250px-Sudoku-by-L2G-20050714_solution.svg.png",alt:null}))),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"board.length == 9"),(0,i.kt)("li",{parentName:"ul"},"board","[i]",".length == 9"),(0,i.kt)("li",{parentName:"ul"},"board","[i][j]"," is a digit or '.'.")),(0,i.kt)("p",null,"It is guaranteed that the input board has only one solution."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"该题有一个难点: 需要明确递归的队列是啥。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"在这里递归队列是数独中的 ",(0,i.kt)("inlineCode",{parentName:"li"},".")," 的下标。"),(0,i.kt)("li",{parentName:"ol"},"接着根据该队列进行递归操作, 对横向、竖向、3 x 3 内的位置信息作记录。")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"若横向、纵向、3 x 3 的位置没有使用过, 则将相应位置标记为已使用(true)"),(0,i.kt)("li",{parentName:"ul"},"若横向、纵向、3 x 3 的位置已经使用过, 则进入下一个递归")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {character[][]} board\n * @return {void} Do not return anything, modify board in-place instead.\n */\nvar solveSudoku = function(board) {\n  const obj = {}\n  const used = []\n  for (let x = 0; x < 9; x++) {\n    for (let y = 0; y < 9; y++) {\n      if (!obj[`rows ${x}`]) obj[`rows ${x}`] = {}\n      if (!obj[`columns ${y}`]) obj[`columns ${y}`] = {}\n      const blockX = Math.floor(x / 3)\n      const blockY = Math.floor(y / 3)\n      if (!obj[`block ${blockX}${blockY}`]) obj[`block ${blockX}${blockY}`] = {}\n      if (board[x][y] !== '.') {\n        obj[`rows ${x}`][board[x][y]] = true\n        obj[`columns ${y}`][board[x][y]] = true\n        obj[`block ${blockX}${blockY}`][board[x][y]] = true\n      } else {\n        used.push({\n          x,\n          y\n        })\n      }\n    }\n  }\n\n  dfs(board, 0, obj, used)\n\n  return board\n};\n\nvar dfs = function(board, pos, obj, used) {\n  if (pos === used.length) {\n    for (let m = 0; m < 9; m++) {\n      for (let n = 1; n <= 9; n++) {\n        if (typeof obj[`rows ${m}`][n] === 'number') {\n          board[m][obj[`rows ${m}`][n]] = String(n)\n        }\n      }\n    }\n    return\n  }\n  const { x, y } = used[pos]\n  // data source\n  for (let i = 1; i <= 9; i++) {\n    const blockX = Math.floor(x / 3)\n    const blockY = Math.floor(y / 3)\n    if (\n      (obj[`rows ${x}`][String(i)] === undefined || obj[`rows ${x}`][String(i)] === false)\n      && !obj[`columns ${y}`][String(i)]\n      && !obj[`block ${blockX}${blockY}`][String(i)]\n    ) {\n      obj[`rows ${x}`][String(i)] = y\n      obj[`columns ${y}`][String(i)] = true\n      obj[`block ${blockX}${blockY}`][String(i)] = true\n      dfs(board, pos + 1, obj, used)\n      obj[`rows ${x}`][String(i)] = false\n      obj[`columns ${y}`][String(i)] = false\n      obj[`block ${blockX}${blockY}`][String(i)] = false\n    }\n  }\n}\n")))}c.isMDXComponent=!0},39130:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"报数序列是指一个整数序列, 按照其中的整数的顺序进行报数, 得到下一个数。其前五项如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"1.     1\n2.     11\n3.     21\n4.     1211\n5.     111221\n")),(0,i.kt)("p",null,'1 被读作  "one 1"  ("一个一") , 即 11。\n11 被读作 "two 1s" ("两个一"）, 即 21。\n21 被读作 "one 2",  "one 1" （"一个二" ,  "一个一") , 即 1211。'),(0,i.kt)("p",null,"给定一个正整数 n , 输出报数序列的第 n 项。"),(0,i.kt)("p",null,"注意: 整数顺序将表示为一个字符串。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'输入: 1\n输出: "1"\n')),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'输入: 4\n输出: "1211"\n')),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"题目被吐槽啊, 看 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.geeksforgeeks.org/look-and-say-sequence/"}),"Look-and-Say Sequence")," 比较容易理解题意。用递归的思路解题。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const cacheObj = {1: '1'}\n/**\n * @param {number} n\n * @return {string}\n */\nvar countAndSay = function (n) { // 5\n  if (cacheObj[n]) {\n    return cacheObj[n]\n  } else {\n    const findValue = countAndSay(n - 1) // 1211\n    let str = ''\n    let tmp = 0 // 截断不同数字的下标\n    for (let i = 0; i < findValue.length; i++) {\n      if (findValue[i] !== findValue[i + 1]) {\n        str += i - tmp + 1\n        str += findValue[i]\n        tmp = i + 1\n      }\n    }\n    cacheObj[n] = str\n    return str\n  }\n};\n")))}c.isMDXComponent=!0},69875:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"39. Combination Sum"),(0,i.kt)("p",null,"Given an array of distinct integers candidates and a target integer target, ",(0,i.kt)("inlineCode",{parentName:"p"},"return a list of all unique combinations of candidates")," where the chosen numbers sum to target. You may return the combinations in any order."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"The same number may be chosen from candidates an unlimited number of times"),". Two combinations are unique if the frequency of at least one of the chosen numbers is different."),(0,i.kt)("p",null,"It is guaranteed that the number of unique combinations that sum up to target is less than 150 combinations for the given input."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: candidates = [2,3,6,7], target = 7\nOutput: [[2,2,3],[7]]\n")),(0,i.kt)("p",null,"Explanation:\n2 and 3 are candidates, and 2 + 2 + 3 = 7. Note that 2 can be used multiple times.\n7 is a candidate, and 7 = 7.\nThese are the only two combinations."),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: candidates = [2,3,5], target = 8\nOutput: [[2,2,2,2],[2,3,3],[3,5]]\n")),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: candidates = [2], target = 1\nOutput: []\n")),(0,i.kt)("p",null,"Example 4:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: candidates = [1], target = 1\nOutput: [[1]]\n")),(0,i.kt)("p",null,"Example 5:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: candidates = [1], target = 2\nOutput: [[1,1]]\n")),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1 <= candidates.length <= 30"),(0,i.kt)("li",{parentName:"ul"},"1 <= candidates","[i]"," <= 200"),(0,i.kt)("li",{parentName:"ul"},"All elements of candidates are distinct."),(0,i.kt)("li",{parentName:"ul"},"1 <= target <= 500")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"根据题目 ",(0,i.kt)("inlineCode",{parentName:"p"},"return a list of all unique combinations of candidates")," 可以看出此题属于",(0,i.kt)("inlineCode",{parentName:"p"},"组合类型"),"问题。"),(0,i.kt)("p",null,"target = 7"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"2",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2 当前及后续值减支"))),(0,i.kt)("li",{parentName:"ul"},"3 √"),(0,i.kt)("li",{parentName:"ul"},"6 当前及后续值减支"),(0,i.kt)("li",{parentName:"ul"},"7"))),(0,i.kt)("li",{parentName:"ul"},"3",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"3"),(0,i.kt)("li",{parentName:"ul"},"6"),(0,i.kt)("li",{parentName:"ul"},"7"))),(0,i.kt)("li",{parentName:"ul"},"6"),(0,i.kt)("li",{parentName:"ul"},"7"))),(0,i.kt)("li",{parentName:"ul"},"3",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"3",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"3"))),(0,i.kt)("li",{parentName:"ul"},"6"),(0,i.kt)("li",{parentName:"ul"},"7"))),(0,i.kt)("li",{parentName:"ul"},"6",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"6"))),(0,i.kt)("li",{parentName:"ul"},"7 √")),(0,i.kt)("p",null,"下面给出两个 ac 了的写法, 思路大体相同, 个人推荐拆成两个函数的第二种写法:"),(0,i.kt)("p",null,"写法一:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} candidates\n * @param {number} target\n * @return {number[][]}\n */\nvar combinationSum = function (candidates, target) {\n  const result = []\n\n  const DFS = function (sum, arr, start) {\n    if (sum === target) {\n      result.push(arr.slice())\n      return\n    }\n    if (sum > target) {\n      return\n    }\n\n    for (let i = start; i < candidates.length; i++) {\n      sum += candidates[i]\n      arr.push(candidates[i])\n      DFS(sum, arr, i)\n      arr.pop(candidates[i])\n      sum -= candidates[i]\n    }\n  }\n\n  DFS(0, [], 0, candidates)\n\n  return result\n};\n")),(0,i.kt)("p",null,"写法二:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} candidates\n * @param {number} target\n * @return {number[][]}\n */\nvar combinationSum = function (candidates, target) {\n  const result = []\n  recurcive(candidates, target, 0, [], result)\n  return result\n};\n\nvar recurcive = function (candidates, target, start, temp, result) {\n  if (target < 0) {\n    return\n  }\n\n  if (target === 0) {\n    result.push([...temp])\n    return\n  }\n\n  for (let i = start; i < candidates.length; i++) {\n    temp.push(candidates[i])\n    target = target - candidates[i]\n    recurcive(candidates, target, i, temp, result)\n    target = target + candidates[i]\n    temp.pop(candidates[i])\n  }\n}\n")))}c.isMDXComponent=!0},37134:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给定两个大小为 m 和 n 的有序数组 nums1 和 nums2 。"),(0,i.kt)("p",null,"请找出这两个有序数组的中位数。要求算法的时间复杂度为 O(log (m+n)) 。"),(0,i.kt)("p",null,"你可以假设 nums1 和 nums2 均不为空。"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums1\n * @param {number[]} nums2\n * @return {number}\n */\nvar findMedianSortedArrays = function (nums1, nums2) {\n  let arr = nums1.concat(nums2).sort((r1, r2) => r1 - r2)\n  const length = arr.length\n  if (length % 2 === 0) {\n    return (arr[length / 2 - 1] + arr[length / 2]) / 2\n  } else {\n    return arr[(length + 1) / 2 - 1]\n  }\n}\n")))}c.isMDXComponent=!0},57219:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"40. Combination Sum II"),(0,i.kt)("p",null,"Given a collection of candidate numbers (candidates) and a target number (target), find all unique combinations in candidates where the candidate numbers sum to target."),(0,i.kt)("p",null,"Each number in candidates may ",(0,i.kt)("inlineCode",{parentName:"p"},"only be used once")," in the combination."),(0,i.kt)("p",null,"Note: The solution set must ",(0,i.kt)("inlineCode",{parentName:"p"},"not contain duplicate combinations"),"."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: candidates = [10,1,2,7,6,1,5], target = 8\nOutput:\n[\n  [1,1,6],\n  [1,2,5],\n  [1,7],\n  [2,6]\n]\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: candidates = [2,5,2,1,2], target = 5\nOutput:\n[\n  [1,2,2],\n  [5]\n]\n")),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1 <= candidates.length <= 100"),(0,i.kt)("li",{parentName:"ul"},"1 <= candidates","[i]"," <= 50"),(0,i.kt)("li",{parentName:"ul"},"1 <= target <= 30")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"是",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/39.%E7%BB%84%E5%90%88%E6%80%BB%E5%92%8C/index.js"}),"题目 39")," 的改版, 在 DFS 的基础上, 对于题目要求",(0,i.kt)("inlineCode",{parentName:"p"},"解集不能包含重复的组合"),"要稍加处理。"),(0,i.kt)("p",null,"思路: 递归解组合问题。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"对 candidates 排序。"),(0,i.kt)("li",{parentName:"ol"},"对这种情况要过滤: ",(0,i.kt)("inlineCode",{parentName:"li"},"i !== start && candidates[i] === candidates[i - 1]"),", 可以以 (","[1, 1, 2]",", 3) 这个例子进行思考不产生两个 ","[1, 2]","。")),(0,i.kt)("p",null,"解法一:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} candidates\n * @param {number} target\n * @return {number[][]}\n */\nvar combinationSum2 = function (candidates, target) {\n  const result = []\n\n  const sortCandidates = candidates.sort((r1, r2) => r1 - r2)\n  const DFS = function (sum, arr, start) {\n    if (sum === target) {\n      result.push(arr.slice())\n      return\n    }\n    if (sum > target) {\n      return\n    }\n\n    for (let i = start; i < sortCandidates.length; i++) {\n      if (i !== start && sortCandidates[i] === sortCandidates[i - 1]) { // [1,1,2], 3。避免产生两个 [1, 2]\n        continue\n      }\n\n      sum += sortCandidates[i]\n      arr.push(sortCandidates[i])\n      DFS(sum, arr, i + 1)\n      arr.pop(sortCandidates[i])\n      sum -= sortCandidates[i]\n    }\n  }\n\n  DFS(0, [], 0)\n\n  return result\n};\n")),(0,i.kt)("p",null,"解法二:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} candidates\n * @param {number} target\n * @return {number[][]}\n */\nvar combinationSum2 = function (candidates, target) {\n  const result = []\n  const sorted = candidates.sort((r1, r2) => r1 - r2)\n  recurcive(sorted, target, 0, [], result)\n  return result\n};\n\nvar recurcive = function (candidates, target, start, temp, result) {\n  if (target < 0) {\n    return\n  }\n\n  if (target === 0) {\n    result.push([...temp])\n    return\n  }\n\n  for (let i = start; i < candidates.length; i++) {\n    if (candidates[i] === candidates[i - 1] && i !== start) {\n      continue\n    }\n    temp.push(candidates[i])\n    target = target - candidates[i]\n    recurcive(candidates, target, i + 1, temp, result)\n    target = target + candidates[i]\n    temp.pop(candidates[i])\n  }\n}\n")))}c.isMDXComponent=!0},5641:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"401.Binary Watch"),(0,i.kt)("p",null,"A binary watch has 4 LEDs on the top which represent the hours ",(0,i.kt)("inlineCode",{parentName:"p"},"(0-11)"),", and the 6 LEDs on the bottom represent the minutes ",(0,i.kt)("inlineCode",{parentName:"p"},"(0-59)"),"."),(0,i.kt)("p",null,"Each LED represents a zero or one, with the least significant bit on the right."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://upload.wikimedia.org/wikipedia/commons/8/8b/Binary_clock_samui_moon.jpg",alt:null}))),(0,i.kt)("p",null,'For example, the above binary watch reads "3:25".'),(0,i.kt)("p",null,"Given a non-negative integer n which ",(0,i.kt)("inlineCode",{parentName:"p"},"represents the number of LEDs that are currently on"),", return all possible times the watch could represent."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: n = 1\nReturn: ["1:00", "2:00", "4:00", "8:00", "0:01", "0:02", "0:04", "0:08", "0:16", "0:32"]\n')),(0,i.kt)("p",null,"Note:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The order of output does not matter."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"The hour must not contain a leading zero"),', for example "01:00" is not valid, it should be "1:00".'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"The minute must be consist of two digits and may contain a leading zero"),', for example "10:2" is not valid, it should be "10:02".')),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"题目可以转化为在 ",(0,i.kt)("inlineCode",{parentName:"p"},"[1, 2, 4, 8, 1, 2, 4, 8, 16, 32]")," 中任意取 n 个数值, 有几种组合? 组合问题可以使用",(0,i.kt)("inlineCode",{parentName:"p"},"回溯法"),"求解得到。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'前置条件: 确认如果一个 led 灯都没亮着是否为 "0:00"。'),(0,i.kt)("li",{parentName:"ul"},"小时位数范围为 ","[0, 11]",", 分钟范围为 ","[0, 59]","。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} num\n * @return {string[]}\n */\nvar readBinaryWatch = function(num) {\n  const arr = [1, 2, 4, 8, 1, 2, 4, 8, 16, 32]\n  const result = []\n  backTrace(arr, num, 0, [0, 0], result)\n  return result\n};\n\nvar backTrace = function(arr, num, start, temp, result) {\n  if (temp[0] >= 12 || temp[1] >= 60) return\n  if (num === 0) {\n    result.push(`${temp[0]}:${padding(temp[1])}`)\n    return\n  }\n\n  for (let i = start; i < arr.length; i++) {\n    if (i <= 3) {\n      temp[0] = temp[0] + arr[i]\n    } else {\n      temp[1] = temp[1] + arr[i]\n    }\n    num = num - 1\n    backTrace(arr, num, i + 1, temp, result)\n    if (i <= 3) {\n      temp[0] = temp[0] - arr[i]\n    } else {\n      temp[1] = temp[1] - arr[i]\n    }\n    num = num + 1\n  }\n}\n\nvar padding = function(num) {\n  return num < 10 ? `0${num}` : num\n}\n")))}c.isMDXComponent=!0},51143:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"404. Sum of Left Leaves"),(0,i.kt)("p",null,"Find the sum of all left leaves in a given binary tree."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    3\n   / \\\n  9  20\n    /  \\\n   15   7\n")),(0,i.kt)("p",null,"There are two left leaves in the binary tree, with values 9 and 15 respectively. Return 24."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"递归思路解题"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number}\n */\nvar sumOfLeftLeaves = function(root) {\n  if (!root) return 0\n  if (root.left) {\n    if (!root.left.left && !root.left.right) {\n      return root.left.val + sumOfLeftLeaves(root.right)\n    } else {\n      return sumOfLeftLeaves(root.left) + sumOfLeftLeaves(root.right)\n    }\n  } else {\n    return sumOfLeftLeaves(root.right)\n  }\n};\n")))}c.isMDXComponent=!0},16908:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"417. Pacific Atlantic Water Flow"),(0,i.kt)("p",null,"Given an ",(0,i.kt)("inlineCode",{parentName:"p"},"m x n")," matrix of non-negative integers representing the height of each unit cell in a continent, ",(0,i.kt)("inlineCode",{parentName:"p"},'the "Pacific ocean" touches the left and top edges of the matrix')," and ",(0,i.kt)("inlineCode",{parentName:"p"},'the "Atlantic ocean" touches the right and bottom edges'),"."),(0,i.kt)("p",null,"Water can only flow in four directions (up, down, left, or right) ",(0,i.kt)("inlineCode",{parentName:"p"},"from a cell to another one with height equal or lower"),"."),(0,i.kt)("p",null,"Find the list of grid coordinates ",(0,i.kt)("inlineCode",{parentName:"p"},"where water can flow to both the Pacific and Atlantic ocean"),"."),(0,i.kt)("p",null,"Note:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The order of returned grid coordinates does not matter."),(0,i.kt)("li",{parentName:"ul"},"Both m and n are less than 150.")),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Given the following 5 x 5 matrix:\n\nvar test = [[1, 2, 2, 3, 5], [3, 2, 3, 4, 4], [2, 4, 5, 3, 1], [6, 7, 1, 4, 5], [5, 1, 1, 2, 4]]\n\n  Pacific ~   ~   ~   ~   ~\n       ~  1   2   2   3  (5) *\n       ~  3   2   3  (4) (4) *\n       ~  2   4  (5)  3   1  *\n       ~ (6) (7)  1   4   5  *\n       ~ (5)  1   1   2   4  *\n          *   *   *   *   * Atlantic\n\nReturn:\n\n[[0, 4], [1, 3], [1, 4], [2, 2], [3, 0], [3, 1], [4, 0]] (positions with parentheses in above matrix).\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var test = [[3, 3, 3], [3, 1, 3], [0, 2, 4]]\n\n  Pacific ~   ~   ~\n       ~  3   3   3  *\n       ~  3   1   3  *\n       ~  0   2   4  *\n          *   *   *  Atlantic\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"有效出发点:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"存在到 Pacific 的路径;"),(0,i.kt)("li",{parentName:"ul"},"存在到 Atlantic 的路径;"))),(0,i.kt)("li",{parentName:"ul"},"使用「染色算法」在比当前值小的方向递归找寻")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} matrix\n * @return {number[][]}\n */\nvar pacificAtlantic = function(matrix) {\n  const result = []\n  for (let m = 0; m < matrix.length; m++) {\n    for (let n = 0; n < matrix[m].length; n++) {\n      const usedPacific = []\n      const usedAtlantic = []\n      if (iterator(matrix, m, n, usedPacific, 'pacific')\n        && iterator(matrix, m, n, usedAtlantic, 'atlantic')) {\n        result.push([m, n])\n      }\n    }\n  }\n  return result\n};\n\nvar directions = [[1, 0], [0, 1], [-1, 0], [0, -1]] // bottom、right、top、left\n\nvar iterator = function(matrix, m, n, used, tag) {\n  used.push(`${m},${n}`)\n\n  // achieve the board of matrix\n  if (tag === 'pacific' ? ifReachPacific(m, n) : ifReachAtlantic(matrix, m, n)) {\n    return true\n  }\n\n  for (let i = 0; i < directions.length; i++) {\n    if (!isValid(matrix, m + directions[i][0], n + directions[i][1], used)) continue\n    const newPoint = matrix[m + directions[i][0]][n + directions[i][1]]\n    if (newPoint > matrix[m][n]) {\n      continue\n    }\n    const nextIsValid = iterator(matrix, m + directions[i][0], n + directions[i][1], used, tag)\n    if (nextIsValid) {\n      return true\n    }\n  }\n  return false\n}\n\n// judge if is valid\nvar isValid = (matrix, m, n, used) => {\n  if (used.indexOf(`${m},${n}`) > -1 || !(matrix[m] && typeof matrix[m][n] === 'number')) return false\n  return true\n}\n\nvar ifReachPacific = function(m, n) {\n  return m === 0 || n === 0\n}\n\nvar ifReachAtlantic = function(matrix, m, n) {\n  return m === matrix.length - 1 || n === matrix[0].length - 1\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"130"))}c.isMDXComponent=!0},21014:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"437. Path Sum III"),(0,i.kt)("p",null,"You are given a binary tree in which each node contains an integer value."),(0,i.kt)("p",null,"Find the number of paths that sum to a given value."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"The path does not need to start or end at the root or a leaf"),", but it must go downwards (traveling only from parent nodes to child nodes)."),(0,i.kt)("p",null,"The tree has no more than 1,000 nodes and the values are in the range -1,000,000 to 1,000,000."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"root = [10,5,-3,3,2,null,11,3,-2,null,1], sum = 8\n\n      10\n     /  \\\n    5   -3\n   / \\    \\\n  3   2   11\n / \\   \\\n3  -2   1\n\nReturn 3. The paths that sum to 8 are:\n\n1.  5 -> 3\n2.  5 -> 2 -> 1\n3. -3 -> 11\n")),(0,i.kt)("h3",null,"题解"),(0,i.kt)("p",null,"此题的难点需想清每个节点都要当作",(0,i.kt)("inlineCode",{parentName:"p"},"根节点"),"来对待, 因此题解为如下三部分之和:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"当前节点作为根节点"),"时相加为 sum 的路径之和。"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"当前节点左子树作为根节点"),"时相加为 sum 的路径之和。"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"当前节点右子树作为根节点"),"时相加为 sum 的路径之和。")),(0,i.kt)("p",null,"同时递归可以分为两个部分: ",(0,i.kt)("inlineCode",{parentName:"p"},"根节点的递归")," 与 ",(0,i.kt)("inlineCode",{parentName:"p"},"分析总和的递归"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {TreeNode} root\n * @param {number} sum\n * @return {number}\n */\nvar pathSum = function(root, sum) {\n  if (!root) return 0\n  // total means result value\n  // initialSum means init sum value\n  let result = { total: 0, initialSum: sum }\n  analyzeSum(root, result, sum)\n  return result.total\n};\n\nvar analyzeSum = function(node, result, sum) {\n  if (!node) return\n  const extraSum = sum - node.val\n  if (extraSum === 0) {\n    result.total = result.total + 1\n  }\n\n  analyzeSum(node.left, result, extraSum)\n  analyzeSum(node.right, result, extraSum)\n  // handle it as root node.\n  analyzeSum(node.left, result, result.initialSum)\n  analyzeSum(node.right, result, result.initialSum)\n}\n")),(0,i.kt)("p",null,"submit 后, 卡在了如下测试用例中:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入:\n[1,null,2,null,3] // 该测试用例有点怪, 应该为 [1, null, 2, null, null, null, 3]\n3\n\n       1\n     /   \\\n  null    2\n        /   \\\n      null    3\n\n输出:\n3\n预期:\n2\n")),(0,i.kt)("p",null,"经过排查, ",(0,i.kt)("inlineCode",{parentName:"p"},"analyzeSum")," 函数存在冗余的调用, 并未将",(0,i.kt)("inlineCode",{parentName:"p"},"根节点的递归"),"与",(0,i.kt)("inlineCode",{parentName:"p"},"分析总和的递归"),"给解耦。调整如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {TreeNode} root\n * @param {number} sum\n * @return {number}\n */\n// recursive root node\nvar pathSum = function(root, sum) {\n  if (!root) return 0\n  const curTotal = analyzeSum(root, sum)\n  const leftChildTotal = pathSum(root.left, sum)\n  const rightChildTotal = pathSum(root.right, sum)\n  return curTotal + leftChildTotal + rightChildTotal\n};\n\n// recursive anlyze total value\nvar analyzeSum = function(node, expectSum) {\n  if (!node) return 0\n  const extraSum = expectSum - node.val\n  if (extraSum === 0) {\n    return 1 + analyzeSum(node.left, extraSum) + analyzeSum(node.right, extraSum)\n  } else {\n    return analyzeSum(node.left, extraSum) + analyzeSum(node.right, extraSum)\n  }\n}\n")))}c.isMDXComponent=!0},88687:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给定一个字符串 s 和一个非空字符串 p，找到 s 中所有是 p 的字母异位词的子串，返回这些子串的起始索引。"),(0,i.kt)("p",null,"字符串只包含小写英文字母，并且字符串 s 和 p 的长度都不超过 20100。"),(0,i.kt)("p",null,"说明："),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"字母异位词指字母相同，但排列不同的字符串"),"。\n不考虑答案输出的顺序。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入:\ns: "cbaebabacd" p: "abc"\n\n输出:\n[0, 6]\n')),(0,i.kt)("p",null,'解释:\n起始索引等于 0 的子串是 "cba", 它是 "abc" 的字母异位词。\n起始索引等于 6 的子串是 "bac", 它是 "abc" 的字母异位词。'),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入:\ns: "abab" p: "ab"\n\n输出:\n[0, 1, 2]\n')),(0,i.kt)("p",null,"示例 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入:\ns: "baa" p: "aa"\n\n输出:\n[1]\n')),(0,i.kt)("p",null,'解释:\n起始索引等于 0 的子串是 "ab", 它是 "ab" 的字母异位词。\n起始索引等于 1 的子串是 "ba", 它是 "ab" 的字母异位词。\n起始索引等于 2 的子串是 "ab", 它是 "ab" 的字母异位词。'),(0,i.kt)("h3",null,"题解"),(0,i.kt)("p",null,"花了半天, 用类似滑动窗口的思想地解决了该题。思路如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"首先将 p 字符串中各字母出现的频率统计在 ",(0,i.kt)("inlineCode",{parentName:"li"},"targetObj"),";"),(0,i.kt)("li",{parentName:"ol"},"针对 s 字符创声明双指针 left、right",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"如若当前 right 的位置在 targetObj ",(0,i.kt)("inlineCode",{parentName:"li"},"有对应字段且其不大于")," targetObj 对应字段的值, 则向右偏移 right 指针的位置;"),(0,i.kt)("li",{parentName:"ol"},"如若当前 right 指针的位置在 targetObj ",(0,i.kt)("inlineCode",{parentName:"li"},"无对应字段"),", 则将 left 的位置移到 right 字段的位置;"),(0,i.kt)("li",{parentName:"ol"},"如若当前 right 指针的位置在 targetObj ",(0,i.kt)("inlineCode",{parentName:"li"},"有对应字段且大于")," targetObj 对应字段的值, 则向右偏移 left 指针的位置;")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"需要考虑的点, ",(0,i.kt)("inlineCode",{parentName:"p"},"字符串是否会重复"),"。比如 s 为 'baa', p 为 'aa'。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @param {string} p\n * @return {number[]}\n */\nvar findAnagrams = function(s, p) {\n  const pLength = p.length\n  const initHashObj = {} // 初始化 hash 对象\n  let hashObj = {}\n  const targetObj = {}\n  for (let i = 0; i < p.length; i++) {\n    targetObj[p[i]] = typeof(targetObj[p[i]]) === 'number' ? targetObj[p[i]] + 1 : 0\n    initHashObj[p[i]] = 0\n    hashObj[p[i]] = 0\n  }\n\n  const result = [] // 存储结果\n\n  let left = 0, right = 0\n\n  while (left < s.length && right < s.length) {\n    if (typeof(hashObj[s[right]]) === 'number' && hashObj[s[right]] <= targetObj[s[right]]) {\n      hashObj[s[right]] = hashObj[s[right]] + 1\n      if (right - left + 1 === pLength) result.push(left)\n      right++\n    } else if (typeof(hashObj[s[right]]) !== 'number') {\n      right++\n      left = right\n      hashObj = JSON.parse(JSON.stringify(initHashObj))\n    } else {\n      hashObj[s[left]] !== initHashObj[s[left]] && (hashObj[s[left]] = hashObj[s[left]] - 1)\n      left++\n    }\n  }\n\n  return result\n};\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"76"))}c.isMDXComponent=!0},12201:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Add Two Numbers II"),(0,i.kt)("p",null,"You are given two non-empty linked lists representing two non-negative integers. ",(0,i.kt)("inlineCode",{parentName:"p"},"The most significant digit comes first")," and each of their nodes contain a single digit. Add the two numbers and return it as a linked list."),(0,i.kt)("p",null,"You may assume the two numbers do not contain any leading zero, except the number 0 itself."),(0,i.kt)("p",null,"Follow up:"),(0,i.kt)("p",null,"What if you cannot modify the input lists? In other words, reversing the lists is not allowed."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: (7 -> 2 -> 4 -> 3) + (5 -> 6 -> 4)\nOutput: 7 -> 8 -> 0 -> 7\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思考: 相对题 2 的逆序相加, 该题顺序相加作如下思考:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"第一步: 首先补齐位数, 让其一一对应;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"7  ->  2  ->  4  ->  3\n0  ->  5  ->  6  ->  4\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"第二步: 递归计算两个链表同位之和, 同时使用 digitCarry 表示进位的情况;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} l1\n * @param {ListNode} l2\n * @return {ListNode}\n */\nvar addTwoNumbers = function(l1, l2) {\n  let countl1 = 0, countl2 = 0\n  let l1List = l1\n  let l2List = l2\n  while(l1List) {\n    countl1++\n    l1List = l1List.next\n  }\n\n  while(l2List) {\n    countl2++\n    l2List = l2List.next\n  }\n\n  // creat the frontest List\n  let tmpList = new ListNode(0)\n  let cur = tmpList\n  let diff = Math.abs(countl2 - countl1)\n  while (diff--) {\n    cur.next = new ListNode(0)\n    cur = cur.next\n  }\n\n  if (countl1 < countl2) {\n    cur.next = l1\n    l1 = tmpList.next\n  } else if (countl2 < countl1) {\n    cur.next = l2\n    l2 = tmpList.next\n  }\n\n\n  // flag: 1 shows digit carry, 0 not;\n  let digitCarry = 0\n\n  /**\n   * calculate the sum of l1 and l2\n   */\n  function listNodeAdd(l1, l2) {\n    if (l1 === null) return\n\n    listNodeAdd(l1.next, l2.next)\n\n    let sum = l1.val + l2.val + digitCarry\n    if (sum >= 10) {\n      l1.val = sum % 10\n      digitCarry = 1\n    } else {\n      l1.val = sum\n      digitCarry = 0\n    }\n  }\n\n  listNodeAdd(l1, l2)\n\n  let result = l1\n  if (digitCarry === 1) {\n    result = new ListNode(1)\n    result.next = l1\n  }\n\n  return result\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c2559f9251487e23530e6932cc46516b.jpg-400",alt:null}))),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"2"))}c.isMDXComponent=!0},3547:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,'Given n points in the plane that are all pairwise distinct, a "boomerang" is a tuple of points (i, j, k) such that the distance between i and j equals the distance between i and k (the order of the tuple matters).'),(0,i.kt)("p",null,"Find the number of boomerangs. You may assume that n will be at most 500 and coordinates of points are all in the range ","[-10000, 10000]"," (inclusive)."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"Input: [","[0,0]",",","[1,0]",",","[2,0]","]\nOutput: 2"),(0,i.kt)("p",null,"Explanation:\nThe two boomerangs are [","[1,0]",",","[0,0]",",","[2,0]","] and [","[1,0]",",","[2,0]",",","[0,0]","]"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思路:"),(0,i.kt)("p",null,"首先弄清题意, 输入的数组 points 中能产生中多少种 ","[i, j, k]"," 的数组, 使 i 到 j 的距离与 i 到 k 的距离相等。"),(0,i.kt)("p",null,"因此可以将 i 的位置固定, 使用",(0,i.kt)("inlineCode",{parentName:"p"},"查找表"),"将到 i 的距离作为 key, 将该距离出现的次数作为 value, 若该次数大于 1 则说明能构成回旋镖。(比如出现 4 次, 在剩下的 j, k 两个位置中能构成 4 * 3 个回旋镖)"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/6b5d105a884526e2e19dbbaea330fd8f.jpg-400",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} points\n * @return {number}\n */\nvar numberOfBoomerangs = function (points) {\n  // avoid losing the precision\n  const getDistancePow = (x, y) => {\n    return Math.pow((y[0] - x[0]), 2) + Math.pow((y[1] - x[1]), 2)\n  }\n\n  let result = 0\n\n  for (let p = 0; p < points.length; p++) {\n    const tmpMap = new Map()\n    for (let n = 0; n < points.length; n++) {\n      if (p === n) continue\n      const distancePow = getDistancePow(points[p], points[n])\n      const hasDistancePow = tmpMap.has(`${distancePow}`)\n      if (hasDistancePow) {\n        tmpMap.set(`${distancePow}`, tmpMap.get(`${distancePow}`) + 1)\n      } else {\n        tmpMap.set(`${distancePow}`, 1)\n      }\n    }\n    tmpMap.forEach((value, key) => {\n      if (value > 1) {\n        const sum = value * (value - 1)\n        result += sum\n      }\n    })\n  }\n\n  return result\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c6128ef88123f9b3a1b135d0c8850271.jpg",alt:null}))),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"149"))}c.isMDXComponent=!0},93778:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"450.Delete Node in a BST"),(0,i.kt)("p",null,"Given a root node reference of a BST and a key, delete the node with the given key in the BST. Return the root node reference (possibly updated) of the BST."),(0,i.kt)("p",null,"Basically, the deletion can be divided into two stages:"),(0,i.kt)("p",null,"Search for a node to remove.\nIf the node is found, delete the node.\nFollow up: Can you solve it with time complexity O(height of tree)?"),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"         5                             5\n       /   \\                         /   \\\n      3     6        ---\x3e           4     6\n     /  \\     \\                    /       \\\n    2    4     7                  2         7\n\nInput: root = [5,3,6,2,4,null,7], key = 3\nOutput: [5,4,6,2,null,null,7]\n")),(0,i.kt)("p",null,"Explanation: Given key to delete is 3. So we find the node with value 3 and delete it.\nOne valid answer is ","[5,4,6,2,null,null,7]",", shown in the above BST.\nPlease notice that another valid answer is ","[5,2,6,null,4,null,7]"," and it's also accepted."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"      5\n    /   \\\n   2     6\n    \\     \\\n     4     7\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("p",null,"Input: root = ","[5,3,6,2,4,null,7]",", key = 0\nOutput: ","[5,3,6,2,4,null,7]","\nExplanation: The tree does not contain a node with value = 0."),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("p",null,"Input: root = [], key = 0\nOutput: []"),(0,i.kt)("p",null," \nConstraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The number of nodes in the tree is in the range ","[0, 104]","."),(0,i.kt)("li",{parentName:"ul"},"-105 <= Node.val <= 105"),(0,i.kt)("li",{parentName:"ul"},"Each node has ",(0,i.kt)("inlineCode",{parentName:"li"},"a unique value"),"."),(0,i.kt)("li",{parentName:"ul"},"root is a valid binary search tree."),(0,i.kt)("li",{parentName:"ul"},"-105 <= key <= 105")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"      5\n    /   \\\n   3     6\n /  \\     \\\n2    4     7\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"      3\n    /   \\\n   2     4\n          \\\n           6\n            \\\n             7\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"此时删除元素为 5, 此时含有左节点, 可以通过如下方法达到目的:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"将",(0,i.kt)("inlineCode",{parentName:"li"},"删除元素的左下方元素 3")," 替代",(0,i.kt)("inlineCode",{parentName:"li"},"删除元素 5"),";"),(0,i.kt)("li",{parentName:"ul"},"将",(0,i.kt)("inlineCode",{parentName:"li"},"左下方元素的右侧最下方子元素 4")," 衔接",(0,i.kt)("inlineCode",{parentName:"li"},"删除元素的右下方子元素 6"),";")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {TreeNode} root\n * @param {number} key\n * @return {TreeNode}\n */\nvar deleteNode = function(root, key) {\n  if (!root) return null\n  // if key > root.val, delete node in root.right. Otherwise delete node in root.left.\n  if (key > root.val) {\n    const rightNode = deleteNode(root.right, key)\n    root.right = rightNode\n    return root\n  } else if (key < root.val) {\n    const leftNode = deleteNode(root.left, key)\n    root.left = leftNode\n    return root\n  } else {\n    // now root.val === key\n    if (!root.left) {\n      return root.right\n    }\n    if (!root.right) {\n      return root.left\n    }\n    // 将删除元素的左下方元素替代删除元素;\n    // 将左下方元素的右侧最下方子元素衔接删除元素的右下方子元素;\n    const rightChild = root.right\n    let newRightChild = root.left\n    while (newRightChild.right) {\n      newRightChild = newRightChild.right\n    }\n    newRightChild.right = rightChild\n    return root.left\n  }\n};\n")))}c.isMDXComponent=!0},92605:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给定一个字符串, 请将字符串里的字符按照出现的频率",(0,i.kt)("inlineCode",{parentName:"p"},"降序排列"),"。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入:\n"tree"\n\n输出:\n"eert"\n')),(0,i.kt)("p",null,"解释: 'e'出现两次，'r'和't'都只出现一次。\n因此'e'必须出现在'r'和't'之前。此外，\"eetr\"也是一个有效的答案。"),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入:\n"cccaaa"\n\n输出:\n"cccaaa"\n')),(0,i.kt)("p",null,"解释: 'c'和'a'都出现三次。此外，\"aaaccc\"也是有效的答案。\n注意\"cacaca\"是不正确的，因为相同的字母必须放在一起。"),(0,i.kt)("p",null,"示例 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入:\n"Aabb"\n\n输出:\n"bbAa"\n')),(0,i.kt)("p",null,"解释: 此外，\"bbaA\"也是一个有效的答案，但\"Aabb\"是不正确的。\n注意'A'和'a'被认为是两种不同的字符。"),(0,i.kt)("h3",null,"题解"),(0,i.kt)("p",null,"思路: 根据题意, 本题用 Map 来存储字符出现的频率, 难点在如何处理 Map 中对象出现的频率? 以下解法使用 arr 将 map 里的值存储转化为 ",(0,i.kt)("inlineCode",{parentName:"p"},"[{ key, value }]")," 的形式, 最后使用 JS 的 sort 方法来完成题解。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {string}\n */\nvar frequencySort = function(s) {\n  const map = new Map()\n  for (let i = 0; i < s.length; i++) {\n    const getMap = map.get(s[i])\n    if (!getMap) {\n      map.set(s[i], 1)\n    } else {\n      map.set(s[i], getMap + 1)\n    }\n  }\n\n  const arr = []\n  for (let key of map.keys()) {\n    arr.push({\n      key,\n      value: map.get(key)\n    })\n  }\n\n  // todo 后续实现下以下排序\n  arr.sort((a, b) => b.value - a.value)\n\n  const result = arr.map(r => {\n    let str = ''\n    for (let i = 0; i < r.value; i++) {\n      str = str + r.key\n    }\n    return str\n  }).join('')\n\n  return result\n};\n")),(0,i.kt)("h3",null,"归类"),(0,i.kt)("p",null,"map"))}c.isMDXComponent=!0},69723:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"4Sum II"),(0,i.kt)("p",null,"Given four lists A, B, C, D of integer values, compute how many tuples (i, j, k, l) there are such that A","[i]"," + B","[j]"," + C","[k]"," + D","[l]"," is zero."),(0,i.kt)("p",null,"To make problem a bit easier, all A, B, C, D have same length of N where 0 ≤ N ≤ 500. All integers are in the range of -2^28 to 2^28 - 1 and the result is guaranteed to be at most 2^31 - 1."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input:\nA = [ 1, 2]\nB = [-2,-1]\nC = [-1, 2]\nD = [ 0, 2]\n\nOutput:\n2\n\nExplanation:\nThe two tuples are:\n1. (0, 0, 0, 1) -> A[0] + B[0] + C[0] + D[1] = 1 + (-2) + (-1) + 2 = 0\n2. (1, 1, 0, 0) -> A[1] + B[1] + C[0] + D[0] = 2 + (-1) + (-1) + 0 = 0\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"解题思路: 如果正常暴力解法为 n^4, n^3 在 0 <= N <= 500 的数量级下已经达到 ",(0,i.kt)("inlineCode",{parentName:"p"},"125000000"),", 根据",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/%E7%AE%97%E6%B3%95%E5%A4%8D%E6%9D%82%E5%BA%A6.md"}),"算法复杂度")," 里对数量与时间的统计, 算法的数据复杂度理应不超过 n^2。"),(0,i.kt)("p",null,"因此我们将 C 与 D 和出现的次数存进查找表中, 从而优化算法复杂度(查找表的关键是确认存进查找表的 key 和 value 是多少)。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} A\n * @param {number[]} B\n * @param {number[]} C\n * @param {number[]} D\n * @return {number}\n */\nvar fourSumCount = function(A, B, C, D) {\n  const tmpMap = new Map()\n  for (let ic = 0; ic < C.length; ic++) {\n    for (let id = 0; id < D.length; id++) {\n      const sumC_D = C[ic] + D[id]\n      const hasSumC_D = tmpMap.has(sumC_D)\n      if (hasSumC_D) {\n        tmpMap.set(sumC_D, tmpMap.get(sumC_D) + 1)\n      } else {\n        tmpMap.set(sumC_D, 1)\n      }\n    }\n  }\n\n  let count = 0\n\n  for (let ia = 0; ia < A.length; ia++) {\n    for (let ib = 0; ib < B.length; ib++) {\n      const sumA_B = A[ia] + B[ib]\n      tmpMap.has(-sumA_B) && (count = count + tmpMap.get(-sumA_B))\n    }\n  }\n\n  return count\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/a10b03c6f22d312f32b4f0a7f2795f4f.jpg",alt:null}))),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"18(题目相似, 但是因为传入参数不同导致解法不同)"))}c.isMDXComponent=!0},79062:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"46.Permutations"),(0,i.kt)("p",null,"Given an array nums of distinct integers, return all the possible permutations. You can return the answer in any order."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1,2,3]\nOutput: [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [0,1]\nOutput: [[0,1],[1,0]]\n")),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1]\nOutput: [[1]]\n")),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1 <= nums.length <= 6"),(0,i.kt)("li",{parentName:"ul"},"-10 <= nums","[i]"," <= 10"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"All the integers of nums are unique"))),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"该问题可以看成为一道排列问题, 排列问题的一种常见解法是回溯法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"* 1\n  * 2\n    * 3\n  * 3\n    * 2\n* 2\n  * 1\n    * 3\n  * 3\n    * 1\n* 3\n  * 1\n    * 2\n  * 2\n    * 1\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number[][]}\n */\nvar permute = function (nums) {\n  const res = []\n  backtracking(nums, [], res)\n  return res\n};\n\nvar backtracking = function(nums, temp, res) {\n  if (temp.length === nums.length) {\n    res.push([...temp])\n    return\n  }\n\n  for (let i = 0; i < nums.length; i++) {\n    if (!temp.includes(nums[i])) {\n      temp.push(nums[i])\n      backtracking(nums, temp, res)\n      temp.pop(nums[i])\n    } else {\n      continue\n    }\n  }\n}\n")))}c.isMDXComponent=!0},43156:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"47.Permutations_II"),(0,i.kt)("p",null,"Given a collection of numbers, nums, that might contain duplicates, return all possible unique permutations in any order."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1,1,2]\nOutput:\n[[1,1,2],\n [1,2,1],\n [2,1,1]]\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1,2,3]\nOutput: [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]\n")),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1 <= nums.length <= 8"),(0,i.kt)("li",{parentName:"ul"},"-10 <= nums","[i]"," <= 10")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"[1 1 2]"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"1",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2"))),(0,i.kt)("li",{parentName:"ul"},"2",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"1"))))),(0,i.kt)("li",{parentName:"ul"},"1 (jump, 该位置上 1 已经在之前被使用过了, 因此需跳过)"),(0,i.kt)("li",{parentName:"ul"},"2",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"1",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"1"))),(0,i.kt)("li",{parentName:"ul"},"1 (jump)")))),(0,i.kt)("p",null,"思路: 回溯法解排列问题。"),(0,i.kt)("p",null,"需要注意此题允许 nums 里面存有相同的数字。在此引入 ",(0,i.kt)("inlineCode",{parentName:"p"},"used")," 数组来存储回溯过程中已使用的值。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number[][]}\n */\nvar permuteUnique = function (nums) {\n  const res = []\n  backtracking(nums, [], [], res)\n  return res\n};\n\nvar backtracking = function(nums, used, temp, res) {\n  if (temp.length === nums.length) {\n    for (let i = 0; i < res.length; i++) {\n      // a digit appears only once.\n      if (res[i].toString() === temp.toString()) return\n    }\n    res.push([...temp])\n    return\n  }\n\n  for (let i = 0; i < nums.length; i++) {\n    // jump same used index.\n    if (used.indexOf(i) > -1) continue\n    temp.push(nums[i])\n    used.push(i)\n    backtracking(nums, used, temp, res)\n    temp.pop(nums[i])\n    used.pop(i)\n  }\n}\n")),(0,i.kt)("p",null,"上述解法在去重的步骤上比较耗时, 提交的时候报超时错误, 进行如下优化:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number[][]}\n */\nvar permuteUnique = function (nums) {\n  const res = []\n  const sortNums = nums.sort((r1, r2) => r1 - r2)\n  backtracking(sortNums, [], [], res)\n  return res\n};\n\nvar backtracking = function(nums, used, temp, res) {\n  if (temp.length === nums.length) {\n    res.push([...temp])\n    return\n  }\n\n  for (let i = 0; i < nums.length; i++) {\n    // 如果当前下标被使用过或者当前下标对应的值已经在之前被使用过了, 则跳过。\n    if (used.indexOf(i) > -1 || (nums[i] === nums[i - 1] && used.indexOf(i - 1) === -1)) continue\n    temp.push(nums[i])\n    used.push(i)\n    backtracking(nums, used, temp, res)\n    temp.pop(nums[i])\n    used.pop(i)\n  }\n}\n")))}c.isMDXComponent=!0},46986:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给定一个 n × n 的二维矩阵表示一个图像。"),(0,i.kt)("p",null,"将图像顺时针旋转 90 度。"),(0,i.kt)("p",null,"说明:"),(0,i.kt)("p",null,"你必须在原地旋转图像, 这意味着你需要直接修改输入的二维矩阵。请不要使用另一个矩阵来旋转图像。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"给定 matrix =\n[\n  [1,2,3],\n  [4,5,6],\n  [7,8,9]\n],\n\n原地旋转输入矩阵, 使其变为:\n[\n  [7,4,1],\n  [8,5,2],\n  [9,6,3]\n]\n")),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"给定 matrix =\n[\n  [ 5, 1, 9,11],\n  [ 2, 4, 8,10],\n  [13, 3, 6, 7],\n  [15,14,12,16]\n],\n\n原地旋转输入矩阵, 使其变为:\n[\n  [15,13, 2, 5],\n  [14, 3, 4, 1],\n  [12, 6, 8, 9],\n  [16, 7,10,11]\n]\n")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"这类题目可以采用如下思路:"),(0,i.kt)("p",null,"1.matrix.reverse(), 得"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"[\n  [15,13, 2, 5],\n  [14, 3, 4, 1],\n  [12, 6, 8, 9],\n  [16, 7,10,11]\n]\n")),(0,i.kt)("p",null,"2.然后以左上角到右下角的线作为翻转线进行翻转, 这里找规律"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"1 2 3\n4 5 6  只需对  4   进行处理\n7 8 9         7 8\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} matrix\n * @return {void} Do not return anything, modify matrix in-place instead.\n */\nvar rotate = function (matrix) {\n  matrix.reverse()\n\n  let tmp\n  for (let x = 0; x < matrix.length; x++) {\n    for (let y = 0; y < x; y++) {\n      tmp = matrix[x][y]\n      matrix[x][y] = matrix[y][x]\n      matrix[y][x] = tmp\n    }\n  }\n\n  console.log(matrix)\n};\n")))}c.isMDXComponent=!0},18380:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"Given an array of strings, group anagrams together."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: ["eat", "tea", "tan", "ate", "nat", "bat"],\nOutput:\n[\n  ["ate","eat","tea"],\n  ["nat","tan"],\n  ["bat"]\n]\n')),(0,i.kt)("p",null,"Note:"),(0,i.kt)("p",null,"All inputs will be in lowercase.\nThe order of your output does not matter."),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string[]} strs\n * @return {string[][]}\n */\nvar groupAnagrams = function (strs) {\n  const tmpObj = {}\n\n  for (let i = 0; i < strs.length; i++) {\n    const sortStr = strs[i].split('').sort().join('')\n    if (tmpObj[sortStr]) {\n      tmpObj[sortStr].push(strs[i])\n    } else {\n      tmpObj[sortStr] = [strs[i]]\n    }\n  }\n\n  const result = []\n\n  const keyArr = Object.keys(tmpObj)\n  for (let i = 0; i < keyArr.length; i++) {\n    result.push(tmpObj[keyArr[i]])\n  }\n\n  return result\n}\n")))}c.isMDXComponent=!0},3177:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给定一个字符串 s, 找到 s 中最长的回文子串。你可以假设 s 的最大长度为 1000。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("p",null,'输入: "babad"\n输出: "bab"\n注意: "aba"也是一个有效答案。'),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("p",null,'输入: "cbbd"\n输出: "bb"'),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"目前的解法判断字符串 s 和它的倒序 s' 是否拥有公有字符串, 且它们的公有字符串应该符合倒序。目前用暴力法实现~~"),(0,i.kt)("p",null,"题目可以转换为求 s 和它的倒序 s' 的最长公有字符串。以后再看。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {string}\n */\n\n// 暴力法 有几个用例超时\nvar longestPalindrome = function (s) {\n  const reverseS = s.split('').reverse().join('')\n  let result = '', len = 0\n  for (let i = 0; i < s.length; i++) {\n    for (let j = i; j < s.length; j++) {\n      const sliceS = s.slice(i, j + 1)\n      if (sliceS.length > len) {\n        if (reverseS.indexOf(sliceS) >= 0 && sliceS === sliceS.split('').reverse().join('')) {\n          len = sliceS.length\n          result = sliceS\n        }\n      }\n    }\n  }\n  return result\n};\n")))}c.isMDXComponent=!0},54333:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"实现 pow(x, n) , 即计算 x 的 n 次幂函数。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"输入: 2.00000, 10\n输出: 1024.00000\n")),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"输入: 2.10000, 3\n输出: 9.26100\n")),(0,i.kt)("p",null,"示例 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"输入: 2.00000, -2\n输出: 0.25000\n解释: 2-2 = 1/22 = 1/4 = 0.25\n")),(0,i.kt)("p",null,"说明:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"-100.0 < x < 100.0"),(0,i.kt)("li",{parentName:"ul"},"n 是 32 位有符号整数, 其数值范围是 ","[−231, 231 − 1]")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} x\n * @param {number} n\n * @return {number}\n */\nvar myPow = function (x, n) {\n  return Math.pow(x, n)\n}\n")))}c.isMDXComponent=!0},33330:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"51. N-Queens"),(0,i.kt)("p",null,"The n-queens puzzle is the problem of placing ",(0,i.kt)("inlineCode",{parentName:"p"},"n")," queens on an ",(0,i.kt)("inlineCode",{parentName:"p"},"n x n")," chessboard such that no two queens attack each other."),(0,i.kt)("p",null,"Given ",(0,i.kt)("inlineCode",{parentName:"p"},"an integer n"),", return all distinct solutions to the n-queens puzzle."),(0,i.kt)("p",null,"Each solution contains a distinct board configuration of the n-queens' placement, where 'Q' and '.' both indicate a queen and an empty space, respectively."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: n = 4\nOutput: [[".Q..","...Q","Q...","..Q."],["..Q.","Q...","...Q",".Q.."]]\n\n. Q . .            . . Q .\n. . . Q     or     Q . . .\nQ . . .            . . . Q\n. . Q .            . Q . .\n')),(0,i.kt)("p",null,"Explanation: There exist two distinct solutions to the 4-queens puzzle as shown above."),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: n = 1\nOutput: [["Q"]]\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Constraints:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"1 <= n <= 9")))),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    0   1   2   3\n0   .   Q   .   .\n\n1   .   .   .   Q\n\n2   Q   .   .   .\n\n3   .   .   Q   .\n")),(0,i.kt)("p",null,"关于斜对角线上的限制可以得出以下两条规律。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"罗列从",(0,i.kt)("inlineCode",{parentName:"li"},"右上到左下"),"斜线点发现规律: ",(0,i.kt)("inlineCode",{parentName:"li"},"横坐标与纵坐标之和为定值"),"。")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 0)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 1)、(1, 0)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 2)、(1, 1)、(2, 0)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 3)、(1, 2)、(2, 1)、(3, 0)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(1, 3)、(2, 2)、(3, 1)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(2, 3)、(3, 2)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(3, 3)"))),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"罗列从",(0,i.kt)("inlineCode",{parentName:"li"},"左上到右下"),"斜线点发现规律: ",(0,i.kt)("inlineCode",{parentName:"li"},"横坐标与纵坐标之差为定值"),"。")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(3, 0)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(2, 0)、(3, 1)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(1, 0)、(2, 1)、(3, 2)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 0)、(1, 1)、(2, 2)、(3, 3)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 1)、(1, 2)、(2, 3)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 2)、(1, 3)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 3)"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'/**\n * @param {number} n\n * @return {string[][]}\n */\nvar solveNQueens = function(n) {\n  const result = []\n  const limit = {\n    used: [],\n    x: [],\n    y: [],\n    sum: [],\n    diff: []\n  }\n  handleNQueens(n, 0, limit, result)\n  return result\n};\n\n// eg: when n is 4, arr is [["0,1", "1,3", "2,0", "3,2"], ["0,2", "1,0", "2,3", "3,1"]]\nvar generate = (arr) => {\n  const xArr = []\n  for (let x = 0; x < arr.length; x++) {\n    const [queueX, queueY] = arr[x].split(\',\')\n    let yStr = \'\'\n    for (let y = 0; y < arr.length; y++) {\n      if (x === Number(queueX) && y === Number(queueY)) {\n        yStr = yStr + \'Q\'\n      } else {\n        yStr = yStr + \'.\'\n      }\n    }\n    xArr.push(yStr)\n  }\n  return xArr\n}\n\n// handle the position with the index row from n Queue.\nvar handleNQueens = (n, index, limit, result) => {\n  if (limit.x.length === n) {\n    result.push(generate([...limit.used]))\n    return\n  }\n\n  // 第 index 行安置在第几列中\n  for (let y = 0; y < n; y++) {\n    const sum = index + y\n    const diff = index - y\n    if (\n      limit.used.indexOf(`${index},${y}`) > -1\n      || limit.x.indexOf(index) > -1\n      || limit.y.indexOf(y) > -1\n      || limit.sum.indexOf(sum) > -1\n      || limit.diff.indexOf(diff) > -1\n    ) {\n      continue\n    }\n    limit.used.push(`${index},${y}`)\n    limit.x.push(index)\n    limit.y.push(y)\n    limit.sum.push(sum)\n    limit.diff.push(diff)\n\n    handleNQueens(n, index + 1, limit, result)\n    limit.used.pop()\n    limit.x.pop()\n    limit.y.pop()\n    limit.sum.pop()\n    limit.diff.pop()\n  }\n}\n')))}c.isMDXComponent=!0},67562:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"51. N-Queens"),(0,i.kt)("p",null,"The n-queens puzzle is the problem of placing n queens on an n x n chessboard such that no two queens attack each other."),(0,i.kt)("p",null,"Given an integer n, return the number of distinct solutions to the n-queens puzzle."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: n = 4\nOutput: 2\nExplanation: There are two distinct solutions to the 4-queens puzzle as shown.\n\n. Q . .            . . Q .\n. . . Q     or     Q . . .\nQ . . .            . . . Q\n. . Q .            . Q . .\n")),(0,i.kt)("p",null,"Explanation: There exist two distinct solutions to the 4-queens puzzle as shown above."),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: n = 1\nOutput: 1\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Constraints:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"1 <= n <= 9")))),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    0   1   2   3\n0   .   Q   .   .\n\n1   .   .   .   Q\n\n2   Q   .   .   .\n\n3   .   .   Q   .\n")),(0,i.kt)("p",null,"关于斜对角线上的限制可以得出以下两条规律。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"罗列从",(0,i.kt)("inlineCode",{parentName:"li"},"右上到左下"),"斜线点发现规律: ",(0,i.kt)("inlineCode",{parentName:"li"},"横坐标与纵坐标之和为定值"),"。")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 0)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 1)、(1, 0)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 2)、(1, 1)、(2, 0)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 3)、(1, 2)、(2, 1)、(3, 0)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(1, 3)、(2, 2)、(3, 1)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(2, 3)、(3, 2)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(3, 3)"))),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"罗列从",(0,i.kt)("inlineCode",{parentName:"li"},"左上到右下"),"斜线点发现规律: ",(0,i.kt)("inlineCode",{parentName:"li"},"横坐标与纵坐标之差为定值"),"。")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(3, 0)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(2, 0)、(3, 1)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(1, 0)、(2, 1)、(3, 2)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 0)、(1, 1)、(2, 2)、(3, 3)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 1)、(1, 2)、(2, 3)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 2)、(1, 3)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(0, 3)"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'/**\n * @param {number} n\n * @return {number}\n */\nvar totalNQueens = function(n) {\n  const result = []\n  const limit = {\n    used: [],\n    x: [],\n    y: [],\n    sum: [],\n    diff: []\n  }\n  handleNQueens(n, 0, limit, result)\n  return result.length\n};\n\n// eg: when n is 4, arr is [["0,1", "1,3", "2,0", "3,2"], ["0,2", "1,0", "2,3", "3,1"]]\nvar generate = (arr) => {\n  const xArr = []\n  for (let x = 0; x < arr.length; x++) {\n    const [queueX, queueY] = arr[x].split(\',\')\n    let yStr = \'\'\n    for (let y = 0; y < arr.length; y++) {\n      if (x === Number(queueX) && y === Number(queueY)) {\n        yStr = yStr + \'Q\'\n      } else {\n        yStr = yStr + \'.\'\n      }\n    }\n    xArr.push(yStr)\n  }\n  return xArr\n}\n\n// handle the position with the index row from n Queue.\nvar handleNQueens = (n, index, limit, result) => {\n  if (limit.x.length === n) {\n    result.push(generate([...limit.used]))\n    return\n  }\n\n  // 第 index 行安置在第几列中\n  for (let y = 0; y < n; y++) {\n    const sum = index + y\n    const diff = index - y\n    if (\n      limit.used.indexOf(`${index},${y}`) > -1\n      || limit.x.indexOf(index) > -1\n      || limit.y.indexOf(y) > -1\n      || limit.sum.indexOf(sum) > -1\n      || limit.diff.indexOf(diff) > -1\n    ) {\n      continue\n    }\n    limit.used.push(`${index},${y}`)\n    limit.x.push(index)\n    limit.y.push(y)\n    limit.sum.push(sum)\n    limit.diff.push(diff)\n\n    handleNQueens(n, index + 1, limit, result)\n    limit.used.pop()\n    limit.x.pop()\n    limit.y.pop()\n    limit.sum.pop()\n    limit.diff.pop()\n  }\n}\n')))}c.isMDXComponent=!0},92569:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode-cn.com/explore/interview/card/bytedance/242/string/1016/"}),"题目")),(0,i.kt)("p",null,"题目演变:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"s1 的排列方式有几种?"),(0,i.kt)("li",{parentName:"ul"},"将 s1 的所有排列打印出来?")),(0,i.kt)("p",null,"顺着这个思路, 想到了递归。"),(0,i.kt)("p",null,"上面这种思路也是可以的, 但是最终用判断字符中各字母出现的数字来实现。"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/** 18.12.08 */\n/**\n * @param {string} s1\n * @param {string} s2\n * @return {boolean}\n */\nvar checkInclusion = function (s1, s2) {\n  const s1Obj = {}\n  const s1Length = s1.length\n  for (let i = 0; i < s1Length; i++) {\n    if (s1Obj[s1[i]]) {\n      s1Obj[s1[i]] = ++s1Obj[s1[i]]\n    } else {\n      s1Obj[s1[i]] = 1\n    }\n  }\n\n  const s2Length = s2.length\n\n  if (s1Length > s2Length) {\n    return false\n  }\n\n  const count = s2Length - s1Length\n  let str = ''\n\n  for (let i = 0; i <= count; i++) {\n    str = s2.slice(i, s1Length + i)\n    const s2Obj = {}\n    for (let z = 0; z < str.length; z++) {\n      if (!s1Obj[str[z]]) {\n        i = i + z\n        break\n      }\n      if (s2Obj[str[z]]) {\n        s2Obj[str[z]] = s2Obj[str[z]] + 1\n      } else {\n        s2Obj[str[z]] = 1\n      }\n    }\n\n    let bool = true\n    for (let y = 0; y < Object.keys(s1Obj).length; y++) {\n      if (s2Obj[Object.keys(s1Obj)[y]] !== s1Obj[Object.keys(s1Obj)[y]]) {\n        bool = false\n        break\n      }\n    }\n\n    if (bool === true) {\n      return true\n    }\n  }\n\n  return false\n};\n")))}c.isMDXComponent=!0},98694:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,'将字符串 "PAYPALISHIRING" 以 Z 字形排列成给定的行数:'),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"P   A   H   N\nA P L S I I G\nY   I   R\n")),(0,i.kt)("p",null,'之后从左往右, 逐行读取字符: "PAHNAPLSIIGYIR"'),(0,i.kt)("p",null,"实现一个将字符串进行指定行数变换的函数:"),(0,i.kt)("p",null,"string convert(string s, int numRows);"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'输入: s = "PAYPALISHIRING", numRows = 3\n输出: "PAHNAPLSIIGYIR"\n')),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'输入: s = "PAYPALISHIRING", numRows = 4\n输出: "PINALSIGYAHRPI"\n解释:\n\nP     I    N\nA   L S  I G\nY A   H R\nP     I\n')),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"很受伤, 暴力解题后超出内存限制, 日后再看。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @param {number} numRows\n * @return {string}\n */\nvar convert = function (s, numRows) {\n  const perGroupNum = numRows + numRows - 2 // 每组个数\n  const GroupNum = Math.ceil(s.length / perGroupNum) // 有几组\n\n  const arr = []\n  for (let i = 0; i < GroupNum; i++) {\n    let linkStr = ''\n    let position = i * perGroupNum\n    linkStr += s.slice(0 + position, numRows + position)\n    linkStr += s.slice(numRows + position, numRows + position + perGroupNum - numRows).split('').reverse().join('')\n    arr.push(linkStr)\n  }\n\n  let str = ''\n\n  let num = 0 // 第几行\n  while (num < numRows) {\n    for (let i = 0; i < GroupNum; i++) {\n      arr[i][num] ? str += arr[i][num] : ''\n      if (num > 0 && num < numRows - 1 && arr[i][num + numRows - 1]) {\n        str += arr[i][num + numRows - 1]\n      }\n    }\n    num++\n  }\n\n  return str\n};\n")))}c.isMDXComponent=!0},84863:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"61.Rotate List"),(0,i.kt)("p",null,"Given a linked list, rotate the list to the right by k places, where ",(0,i.kt)("inlineCode",{parentName:"p"},"k is non-negative"),"."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->2->3->4->5->NULL, k = 2\nOutput: 4->5->1->2->3->NULL\n\nExplanation:\nrotate 1 steps to the right: 5->1->2->3->4->NULL\nrotate 2 steps to the right: 4->5->1->2->3->NULL\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 0->1->2->NULL, k = 4\nOutput: 2->0->1->NULL\nExplanation:\nrotate 1 steps to the right: 2->0->1->NULL\nrotate 2 steps to the right: 1->2->0->NULL\nrotate 3 steps to the right: 0->1->2->NULL\nrotate 4 steps to the right: 2->0->1->NULL\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"分析: 该题可以转化为从尾部向前数到第 k 个元素, 将该元素作为头节点, 同时将初始尾节点的下一个节点指向初始头节点。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"第一步: 遍历一遍链表得到初始尾结点 last;"),(0,i.kt)("li",{parentName:"ol"},"第二步: l 与 r 距离保持为 modK + 1;"),(0,i.kt)("li",{parentName:"ol"},"第三步: l 与 r 同时向右移动, 直到 r 为 null, 则 l 为要分割的元素;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"此外如果链表长度为 0 或者链表长度与 k 相等时, 则链表实际上没有旋转交换位置。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"  l                r\ndummy -> 1 -> 2 -> 3 -> 4 -> 5 -> NULL\n                   .\n                   .\n                   l               r\ndummy -> 1 -> 2 -> 3 -> 4 -> 5 -> NULL\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @param {number} k\n * @return {ListNode}\n */\nvar rotateRight = function(head, k) {\n  const dummy = new ListNode(0)\n  dummy.next = head\n  let count = 0\n  let last = dummy\n  while (last.next) {\n    last = last.next\n    count++\n  }\n\n  if (count === 0 || count === k) return dummy.next\n  const modK = k % count\n  let diff = modK + 1\n\n  let l = dummy\n  let r = dummy\n  while (diff--) {\n    r = r.next\n  }\n\n  while (r) {\n    r = r.next\n    l = l.next\n  }\n\n  last.next = dummy.next\n  dummy.next = l.next\n  l.next = null\n\n  return dummy.next\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"19"))}c.isMDXComponent=!0},63933:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"62. Unique Paths"),(0,i.kt)("p",null,"A robot is located at the top-left corner of a m x n grid (marked 'Start' in the diagram below)."),(0,i.kt)("p",null,"The robot can only move either ",(0,i.kt)("inlineCode",{parentName:"p"},"down or right")," at any point in time. The robot is trying to reach the bottom-right corner of the grid (marked 'Finish' in the diagram below)."),(0,i.kt)("p",null,"How many possible unique paths are there?"),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://assets.leetcode.com/uploads/2018/10/22/robot_maze.png",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: m = 3, n = 7\nOutput: 28\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: m = 3, n = 2\nOutput: 3\n")),(0,i.kt)("p",null,"Explanation:\nFrom the top-left corner, there are a total of 3 ways to reach the bottom-right corner:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Right -> Down -> Down"),(0,i.kt)("li",{parentName:"ol"},"Down -> Down -> Right"),(0,i.kt)("li",{parentName:"ol"},"Down -> Right -> Down")),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: m = 7, n = 3\nOutput: 28\n")),(0,i.kt)("p",null,"Example 4:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: m = 3, n = 3\nOutput: 6\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Constraints:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"1 <= m, n <= 100"),(0,i.kt)("li",{parentName:"ul"},"It's guaranteed that the answer will be less than or equal to 2 * 109.")))),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"记忆递归法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const cache = {}\n/**\n * @param {number} m\n * @param {number} n\n * @return {number}\n */\nvar uniquePaths = function (m, n) {\n  if (m === 1 || n === 1) {\n    return 1\n  }\n\n  if (cache[`${m}~${n}`]) {\n    return cache[`${m}~${n}`]\n  } else {\n    const nums = uniquePaths(m - 1, n) + uniquePaths(m, n - 1)\n    cache[`${m}~${n}`] = nums\n\n    return nums\n  }\n}\n")),(0,i.kt)("p",null,"动态规划法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} m\n * @param {number} n\n * @return {number}\n */\nvar uniquePaths = function(m, n) {\n  const cache = {\n    [`${m - 1}_${n - 1}`]: 1\n  }\n  for (let x = m - 1; x >= 0; x--) {\n    for (let y = n - 1; y >= 0; y--) {\n      if (x === m - 1 && y === n - 1) {\n        continue\n      }\n      if (y + 1 === n) {\n        cache[`${x}_${y}`] = cache[`${x + 1}_${y}`]\n      } else if (x + 1 === m) {\n        cache[`${x}_${y}`] = cache[`${x}_${y + 1}`]\n      } else {\n        cache[`${x}_${y}`] = cache[`${x}_${y + 1}`] + cache[`${x + 1}_${y}`]\n      }\n    }\n  }\n  return cache['0_0']\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"63"))}c.isMDXComponent=!0},77505:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"63. Unique Paths II"),(0,i.kt)("p",null,"A robot is located at the top-left corner of a m x n grid (marked 'Start' in the diagram below)."),(0,i.kt)("p",null,"The robot can only move either ",(0,i.kt)("inlineCode",{parentName:"p"},"down or right")," at any point in time. The robot is trying to reach the bottom-right corner of the grid (marked 'Finish' in the diagram below)."),(0,i.kt)("p",null,"Now consider if some obstacles are added to the grids. How many unique paths would there be?"),(0,i.kt)("p",null,"An obstacle and space is marked as 1 and 0 respectively in the grid."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://assets.leetcode.com/uploads/2020/11/04/robot1.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: obstacleGrid = [[0,0,0],[0,1,0],[0,0,0]]\nOutput: 2\n")),(0,i.kt)("p",null,"Explanation: There is one obstacle in the middle of the 3x3 grid above.\nThere are two ways to reach the bottom-right corner:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Right -> Right -> Down -> Down"),(0,i.kt)("li",{parentName:"ol"},"Down -> Down -> Right -> Right")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://assets.leetcode.com/uploads/2020/11/04/robot2.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: obstacleGrid = [[0,1],[0,0]]\nOutput: 1\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Constraints:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"m == obstacleGrid.length"),(0,i.kt)("li",{parentName:"ul"},"n == obstacleGrid","[i]",".length"),(0,i.kt)("li",{parentName:"ul"},"1 <= m, n <= 100"),(0,i.kt)("li",{parentName:"ul"},"obstacleGrid","[i][j]"," is 0 or 1.")))),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} obstacleGrid\n * @return {number}\n */\nvar uniquePathsWithObstacles = function(obstacleGrid) {\n  const m = obstacleGrid.length\n  const n = obstacleGrid[0].length\n\n  if (obstacleGrid[m - 1][n - 1] === 1) return 0\n  const cache = {\n    [`${m - 1}_${n - 1}`]: 1\n  }\n\n  for (let i = m - 1; i >= 0; i--) {\n    for (let j = n - 1; j >= 0; j--) {\n      if (obstacleGrid[i][j] === 1) {\n        continue\n      }\n      if (i === m - 1 && j === n - 1) {\n        continue\n      } else if (i === m - 1) {\n        if (!cache[`${i}_${j + 1}`]) continue\n        cache[`${i}_${j}`] = cache[`${i}_${j + 1}`]\n      } else if (j === n - 1) {\n        if (!cache[`${i + 1}_${j}`]) continue\n        cache[`${i}_${j}`] = cache[`${i + 1}_${j}`]\n      } else {\n        cache[`${i}_${j}`] = (cache[`${i + 1}_${j}`] || 0) + (cache[`${i}_${j + 1}`] || 0)\n      }\n    }\n  }\n\n  return cache[`0_0`] || 0\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"62"))}c.isMDXComponent=!0},54626:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"64. Minimum Path Sum"),(0,i.kt)("p",null,"Given a m x n grid filled with ",(0,i.kt)("inlineCode",{parentName:"p"},"non-negative numbers"),", find a path from top left to bottom right, which minimizes the sum of all numbers along its path."),(0,i.kt)("p",null,"Note: You can only ",(0,i.kt)("inlineCode",{parentName:"p"},"move either down or right")," at any point in time."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"1 3 1\n1 5 1\n4 2 1\n\nInput: grid = [[1,3,1],[1,5,1],[4,2,1]]\nOutput: 7\nExplanation: Because the path 1 → 3 → 1 → 1 → 1 minimizes the sum.\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"1 2 3\n4 5 6\n\nInput: grid = [[1,2,3],[4,5,6]]\nOutput: 12\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"m == grid.length"),(0,i.kt)("li",{parentName:"ul"},"n == grid","[i]",".length"),(0,i.kt)("li",{parentName:"ul"},"1 <= m, n <= 200"),(0,i.kt)("li",{parentName:"ul"},"0 <= grid","[i][j]"," <= 100")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"动态规划一:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} grid\n * @return {number}\n */\nvar minPathSum = function (grid) {\n  const m = grid.length\n  const n = grid[0].length\n  const cache = {}\n  return findMinCount(m - 1, n - 1, grid, cache)\n}\n\nfunction findMinCount(x, y, grid, cache) {\n  if (cache[`${x}~${y}`]) {\n    return cache[`${x}~${y}`]\n  }\n\n  let count = 0\n\n  if (x === 0 && y === 0) {\n    count = grid[0][0]\n  } else if (x === 0) {\n    count = findMinCount(0, y - 1, grid, cache) + grid[0][y]\n  } else if (y === 0) {\n    count = findMinCount(x - 1, y, grid, cache) + grid[x][0]\n  }\n\n  if (x > 0 && y > 0) {\n    count = Math.min(findMinCount(x - 1, y, grid, cache), findMinCount(x, y - 1, grid, cache)) + grid[x][y]\n  }\n\n  cache[`${x}~${y}`] = count\n\n  return count\n}\n")),(0,i.kt)("p",null,"动态规划二:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[][]} grid\n * @return {number}\n */\nvar minPathSum = function (grid) {\n  const mLength = grid.length\n  const nLength = grid[0].length\n  const cache = []\n  for (let m = mLength - 1; m >= 0; m--) {\n    for (let n = nLength - 1; n >= 0; n--) {\n      if (!cache[m]) cache[m] = []\n      if (m + 1 >= mLength && n + 1 >= nLength) {\n        cache[m][n] = grid[m][n]\n      } else if (m + 1 >= mLength) {\n        cache[m][n] = cache[m][n + 1] + grid[m][n]\n      } else if (n + 1 >= nLength) {\n        cache[m][n] = cache[m + 1][n] + grid[m][n]\n      } else {\n        cache[m][n] = Math.min(cache[m + 1][n], cache[m][n + 1]) + grid[m][n]\n      }\n    }\n  }\n  return cache[0][0]\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"120"))}c.isMDXComponent=!0},75895:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"/**"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"@param {number[]} digits"),(0,i.kt)("li",{parentName:"ul"},"@return {number[]}\n*/\nvar plusOne = function (digits) {\nlet length = digits.length\nlet tag = 0\nwhile (length) {\nif (length === digits.length) {\nif (digits","[length - 1]"," + 1 + tag >= 10) {\ndigits","[length - 1]"," = 0\ntag = 1\n} else {\ndigits","[length - 1]"," = digits","[length - 1]"," + 1\ntag = 0\nbreak\n}\n} else {\nif (digits","[length - 1]"," + tag >= 10) {\ndigits","[length - 1]"," = 0\ntag = 1\n} else {\ndigits","[length - 1]"," = digits","[length - 1]"," + 1\ntag = 0\nbreak\n}\n}\nlength--\n}\nif (tag === 1) {\ndigits.unshift(1)\n}\nreturn digits\n};")))}c.isMDXComponent=!0},96972:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"tip"),(0,i.kt)("p",null,"注意 ",(0,i.kt)("inlineCode",{parentName:"p"},"x + y + tag")," 的判断"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} a\n * @param {string} b\n * @return {string}\n */\nvar addBinary = function (a, b) {\n  const al = a.length, bl = b.length\n  const length = Math.max(al, bl)\n  let tag = 0\n  let str = ''\n\n  for (let i = 0; i < length; i++) {\n    const x = i < al ? +a[al - i - 1] : 0\n    const y = i < bl ? +b[bl - i - 1] : 0\n\n    const addValue = ((x + y + tag === 1) || (x + y + tag === 3)) ? '1' : '0'\n    str += addValue\n\n    if (x + y + tag > 1) {\n      tag = 1\n    } else {\n      tag = 0\n    }\n  }\n\n  if (tag === 1) {\n    str += '1'\n  }\n\n  return str.split('').reverse().join('')\n};\n")))}c.isMDXComponent=!0},73645:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} x\n * @return {number}\n */\nvar mySqrt = function (x) {\n  return +Math.sqrt(x).toString().split('.')[0]\n};\n")))}c.isMDXComponent=!0},46424:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"70.Climbing Stairs"),(0,i.kt)("p",null,"You are climbing a staircase. It takes n steps to reach the top."),(0,i.kt)("p",null,"Each time you can either climb 1 or 2 steps. In how many distinct ways can you climb to the top?"),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: n = 2\nOutput: 2\nExplanation: There are two ways to climb to the top.\n1. 1 step + 1 step\n2. 2 steps\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: n = 3\nOutput: 3\nExplanation: There are three ways to climb to the top.\n1. 1 step + 1 step + 1 step\n2. 1 step + 2 steps\n3. 2 steps + 1 step\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"到达当前的台阶的方法有两种:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"一种方法是从",(0,i.kt)("inlineCode",{parentName:"li"},"上一级台阶加一"),";"),(0,i.kt)("li",{parentName:"ul"},"另一种方法是从",(0,i.kt)("inlineCode",{parentName:"li"},"上上一级台阶加二"),";")))),(0,i.kt)("p",null,"所以到达当前台阶的方法之和可以用以下式子表示: ",(0,i.kt)("inlineCode",{parentName:"p"},"f(n) = f(n - 1) + f(n - 2)"),"。"),(0,i.kt)("p",null,"因此该问题与解斐波那契数列是相同的场景。以下提供",(0,i.kt)("inlineCode",{parentName:"p"},"记忆化递归"),"与",(0,i.kt)("inlineCode",{parentName:"p"},"动态规划"),"两种解法:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"记忆化递归方法:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const arr = [1, 2]\n\n/**\n * @param {number} n\n * @return {number}\n */\nvar climbStairs = function (n) {\n  if (n === 1) return arr[0]\n  if (n === 2) return arr[1]\n\n  if (arr[n]) return arr[n]\n  arr[n] = climbStairs(n - 1) + climbStairs(n - 2)\n  return arr[n]\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/dynamic_programming.md"}),"动态规划"),"方法:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @return {number}\n */\nvar climbStairs = function (n) {\n  const arr = [1, 2]\n  for (let i = 2; i < n; i++) {\n    arr[i] = arr[i - 1] + arr[i - 2]\n  }\n\n  return arr[n - 1]\n}\n")))}c.isMDXComponent=!0},35310:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"71.Simplify_Path"),(0,i.kt)("p",null,"Given an absolute path for a file (Unix-style), simplify it. Or in other words, convert it to the canonical path."),(0,i.kt)("p",null,"In a UNIX-style file system, a period . refers to the current directory. Furthermore, a double period .. moves the directory up a level. For more information, see: Absolute path vs relative path in Linux/Unix"),(0,i.kt)("p",null,"Note that the returned canonical path must always ",(0,i.kt)("inlineCode",{parentName:"p"},"begin with a slash /"),", and there must be ",(0,i.kt)("inlineCode",{parentName:"p"},"only a single slash / between two directory names"),". The last directory name (if it exists) must ",(0,i.kt)("inlineCode",{parentName:"p"},"not end with a trailing /"),". Also, the canonical path must be the shortest string representing the absolute path."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("p",null,"Explanation: Note that there is no trailing slash after the last directory name."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "/home/"\nOutput: "/home"\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("p",null,"Explanation: Going one level up from the root directory is a no-op, as the root level is the highest level you can go."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "/../"\nOutput: "/"\n')),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("p",null,"Explanation: In the canonical path, multiple consecutive slashes are replaced by a single one."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "/home//foo/"\nOutput: "/home/foo"\n')),(0,i.kt)("p",null,"Example 4:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "/a/./b/../../c/"\nOutput: "/c"\n')),(0,i.kt)("p",null,"Example 5:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "/a/../../b/../c//.//"\nOutput: "/c"\n')),(0,i.kt)("p",null,"Example 6:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: "/a//b////c/d//././/.."\nOutput: "/a/b/c"\n')),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"可以用栈的思想来完成解题;"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"使用 '/' 分割 path 为得到数组;"),(0,i.kt)("li",{parentName:"ol"},"对以下几种情况分别处理:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"如果遇见 '.' 或者 '', 则忽略;"),(0,i.kt)("li",{parentName:"ol"},"如果遇见字母, 则将其推入栈的末尾;"),(0,i.kt)("li",{parentName:"ol"},"如果遇见 '..', 则从栈末尾移除一个元素;")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} path\n * @return {string}\n */\nvar simplifyPath = function(path) {\n  const pathArr = path.split('/')\n  const stack = []\n  for (let i = 0; i < pathArr.length; i++) {\n    if (pathArr[i] === '..') {\n      stack.pop()\n    } else if (pathArr[i] === '.' || pathArr[i] === '') {\n      continue\n    } else {\n      stack.push(pathArr[i])\n    }\n  }\n\n  return `/${stack.join('/')}`\n}\n")),(0,i.kt)("h3",null,"Similar Title"),(0,i.kt)("p",null,"20、150"))}c.isMDXComponent=!0},96782:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"题目"),(0,i.kt)("p",null,"给定一个包含红色、白色和蓝色，一共 n 个元素的数组，原地对它们进行排序，使得相同颜色的元素相邻，并按照红色、白色、蓝色顺序排列。"),(0,i.kt)("p",null,"此题中，我们使用整数 0、 1 和 2 分别表示红色、白色和蓝色。"),(0,i.kt)("p",null,"注意:"),(0,i.kt)("p",null,"不能使用代码库中的排序函数来解决这道题。"),(0,i.kt)("p",null,"示例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入: [2,0,2,1,1,0]\n输出: [0,0,1,1,2,2]\n")),(0,i.kt)("p",null,"进阶:"),(0,i.kt)("p",null,"一个直观的解决方案是使用计数排序的两趟扫描算法。\n首先，迭代计算出 0、1 和 2 元素的个数，然后按照 0、1、2 的排序，重写当前数组。\n你能想出一个仅使用常数空间的一趟扫描算法吗？"),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"解法一: 计数排序, 在该题目中分别统计出 0、1、2 出现的个数, 并将相应个数的 0、1、2 放回数组。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"计数排序适用于数组元素非常有限的场景。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入\n[2,0,2,1,1,0]\n输出\n[0,1,2,1,1,0]\n预期结果\n[0,0,1,1,2,2]\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {void} Do not return anything, modify nums in-place instead.\n */\nvar sortColors = function (nums) {\n  let countObj = {}\n  for (let i = 0; i < nums.length; i++) {\n    const key = nums[i]\n    if (typeof(countObj[`${key}`]) === 'number') {\n      countObj[`${key}`] = countObj[`${key}`] + 1\n    } else {\n      countObj[`${key}`] = 1\n    }\n  }\n\n  const count0 = countObj[0] || 0\n  const count1 = countObj[1] || 0\n  const count2 = countObj[2] || 0\n  for (let i = 0; i < count0 + count1 + count2; i++) {\n    if (i < count0) {\n      nums[i] = 0\n    } else if (i >=count0 && i < count0 + count1) {\n      nums[i] = 1\n    } else if (i >= count1 && i < count0 + count1 + count2) {\n      nums[i] = 2\n    }\n  }\n}\n")),(0,i.kt)("p",null,"解法二: 三路快排"),(0,i.kt)("p",null,"思路: 三路快排的思想是同时排序小于选定值，等于选定值和大于选定值三种情况。在这里我们随机选取一个值 v 作为分界点, 分别排序小于 v，等于 v 和大于 v 的。该题中 v 为 1。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/9617f034f2e7d0535ac73d51612d2f07.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {void} Do not return anything, modify nums in-place instead.\n */\nvar sortColors = function (nums) {\n  /**\n   * nums[0, zero] = 0\n   * nums[two, nums.length - 1] = 2\n   */\n  let [zero, two] = [0, nums.length - 1]\n  for (let i = 0; i <= two; i++) {\n    if (nums[i] === 0) {\n      [nums[i], nums[zero]] = [nums[zero], nums[i]]\n      zero++\n    }\n\n    if (nums[i] === 2) {\n      [nums[i], nums[two]] = [nums[two], nums[i]]\n      i--\n      two--\n    }\n  }\n}\n")),(0,i.kt)("p",null,"该算法的时间复杂度为 O(n), 空间复杂度为 O(1)。"),(0,i.kt)("h3",null,"镜像题目"),(0,i.kt)("p",null,"88、215"))}c.isMDXComponent=!0},55105:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"给你一个字符串 S、一个字符串 T，请在字符串 S 里面找出: 包含 T 所有字母的最小子串。"),(0,i.kt)("p",null,"示例："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'输入: S = "ADOBECODEBANC", T = "ABC"\n输出: "BANC"\n说明：\n')),(0,i.kt)("p",null,'如果 S 中不存这样的子串，则返回空字符串 ""。\n如果 S 中存在这样的子串，我们保证它是唯一的答案。'),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"解法: 滑动窗口, 先略过(凉凉)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @param {string} t\n * @return {string}\n */\nvar minWindow = function(s, t) {\n\n};\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"3、209、438"))}c.isMDXComponent=!0},86737:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"77.Combinations"),(0,i.kt)("p",null,"Given two integers n and k, return all possible combinations of k numbers out of 1 ... n.\nYou may return the answer in any order."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: n = 4, k = 2\nOutput:\n[\n  [2,4],\n  [3,4],\n  [2,3],\n  [1,2],\n  [1,3],\n  [1,4],\n]\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: n = 1, k = 1\nOutput: [[1]]\n")),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1 <= n <= 20"),(0,i.kt)("li",{parentName:"ul"},"1 <= k <= n")),(0,i.kt)("h3",null,"analyze"),(0,i.kt)("p",null,"n: 1, 2, 3, 4\nk: 2"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2"),(0,i.kt)("li",{parentName:"ul"},"3"),(0,i.kt)("li",{parentName:"ul"},"4"))),(0,i.kt)("li",{parentName:"ul"},"2",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"3"),(0,i.kt)("li",{parentName:"ul"},"4"))),(0,i.kt)("li",{parentName:"ul"},"3",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"4")))),(0,i.kt)("p",null,"组合问题中, 不同顺序的解为同一个。比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"[1, 2], [2, 1]")," 为相同解。"),(0,i.kt)("p",null,"此外可以发现规律, 保留所有",(0,i.kt)("inlineCode",{parentName:"p"},"增序排列的解"),"即为组合的解。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @param {number} k\n * @return {number[][]}\n */\nvar combine = function(n, k) {\n  const result = []\n  backTrace(n, k, 1, [], result)\n  return result\n};\n\nvar backTrace = function(n, k, index, temp, result) {\n  if (temp.length === k) {\n    if (ifIncrease(temp)) {\n      result.push([...temp])\n    }\n    return\n  }\n\n  for (let i = index; i <= n; i++) {\n    temp.push(i)\n    backTrace(n, k, index + 1, temp, result)\n    temp.pop()\n  }\n}\n\nvar ifIncrease = function(arr) {\n  for (let i = 0; i < arr.length - 1; i++) {\n    if (arr[i] >= arr[i + 1]) return false\n  }\n  return true\n}\n")),(0,i.kt)("p",null,"提交, 此时报超时的错误。经排查发现, 截支的地方存在问题, 当前在 temp 中的值被重复使用了。修改如下"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-diff"}),"- backTrace(n, k, index + 1, temp, result)\n+ backTrace(n, k, i + 1, temp, result)\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @param {number} k\n * @return {number[][]}\n */\nvar combine = function(n, k) {\n  const result = []\n  backTrace(n, k, 1, [], result)\n  return result\n};\n\nvar backTrace = function(n, k, index, temp, result) {\n  if (temp.length === k) {\n    result.push([...temp])\n    return\n  }\n\n  for (let i = index; i <= n; i++) {\n    temp.push(i)\n    backTrace(n, k, i + 1, temp, result)\n    temp.pop()\n  }\n}\n")),(0,i.kt)("h3",null,"回溯法剪支"),(0,i.kt)("p",null,"还是以 ",(0,i.kt)("inlineCode",{parentName:"p"},"n = 5, k = 3")," 为例, 上述代码中, 实际遍历的顺序如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"* 1\n  * 2\n    * 3\n    * 4\n    * 5\n  * 3\n    * 4\n    * 5\n  * 4\n    * 5\n  * 5 // 减支\n* 2\n  * 3\n    * 4\n    * 5\n  * 4\n    * 5\n  * 5 // 减支\n* 3\n  * 4\n    * 5\n  * 5 // 减支\n* 4 // 减支\n")),(0,i.kt)("p",null,"此时, 当第一列的值到达 3 时, 达到",(0,i.kt)("inlineCode",{parentName:"p"},"搜索上界"),", ","[3, 4, 5]"," 是其中一个解。如果再往后遍历, 4 作为解的开头, 则位数达不到 3 位, 不满足要求了。同理第二列的搜索上界为 4。第三列的搜索上界为 5。接着结合代码进行优化:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @param {number} k\n * @return {number[][]}\n */\nvar combine = function(n, k) {\n  const result = []\n  backTrace(n, k, 1, [], result)\n  return result\n};\n\nvar backTrace = function(n, k, index, temp, result) {\n  if (temp.length === k) {\n    result.push([...temp])\n    return\n  }\n\n  // 题目可以转化为从搜索上界到 n 中要取的数字长度为 (k - temp.length)。\n  // 可以得出搜索上界为: n - (k - temp.length) + 1\n  for (let i = index; i <= n - (k - temp.length) + 1; i++) {\n    temp.push(i)\n    backTrace(n, k, i + 1, temp, result)\n    temp.pop()\n  }\n}\n")))}c.isMDXComponent=!0},29218:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"78.Subsets"),(0,i.kt)("p",null,"Given an integer array nums, return all possible subsets (the power set).\n",(0,i.kt)("inlineCode",{parentName:"p"},"The solution set must not contain duplicate subsets"),"."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [1,2,3]\nOutput: [[],[1],[2],[1,2],[3],[1,3],[2,3],[1,2,3]]\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: nums = [0]\nOutput: [[],[0]]\n")),(0,i.kt)("p",null," \nConstraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1 <= nums.length <= 10"),(0,i.kt)("li",{parentName:"ul"},"-10 <= nums","[i]"," <= 10")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"由题意可知该题是组合问题, 可以使用回溯法解决。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number[][]}\n */\nvar subsets = function (nums) {\n  const list = []\n  const tmpList = []\n\n  backTrack(list, tmpList, nums, 0)\n\n  return list\n};\n\nfunction backTrack(list, tmpList, nums, start) {\n  list.push(tmpList.slice())\n\n  for (let i = start; i < nums.length; i++) {\n    tmpList.push(nums[i])\n    backTrack(list, tmpList, nums, i + 1)\n    tmpList.splice(tmpList.length - 1, 1)\n  }\n}\n")))}c.isMDXComponent=!0},86390:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"79.Word Search"),(0,i.kt)("p",null,"Given an ",(0,i.kt)("inlineCode",{parentName:"p"},"m x n")," board and a word, find if the word exists in the grid."),(0,i.kt)("p",null,'The word can be constructed from letters of sequentially adjacent cells, where "adjacent" cells are horizontally or vertically neighboring. The ',(0,i.kt)("inlineCode",{parentName:"p"},"same letter cell may not be used more than once"),"."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://assets.leetcode.com/uploads/2020/11/04/word2.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: board = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "ABCCED"\nOutput: true\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://assets.leetcode.com/uploads/2020/11/04/word-1.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: board = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "SEE"\nOutput: true\n')),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://assets.leetcode.com/uploads/2020/10/15/word3.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: board = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "ABCB"\nOutput: false\n')),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"m === board.length"),(0,i.kt)("li",{parentName:"ul"},"n === board","[i]",".length"),(0,i.kt)("li",{parentName:"ul"},"1 <= m, n <= 200"),(0,i.kt)("li",{parentName:"ul"},"1 <= word.length <= 103"),(0,i.kt)("li",{parentName:"ul"},"board and word consists only of lowercase and uppercase English letters.")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"     y列\nx行   C  A  A\n      A  A  A\n      B  C  D\n")),(0,i.kt)("p",null,"AAB -> true"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"     y列\nx行   a  a  a  a\n      a  a  a  a\n      a  a  a  a\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"     y列\nx行   A  B  C  E   word: ABCB\n      S  F  C  S\n      A  D  E  E\n")),(0,i.kt)("p",null,"二维数组找路径适合用回溯法。每个节点根据",(0,i.kt)("inlineCode",{parentName:"p"},"下、右、上、左"),"四个方向回溯查找元素。"),(0,i.kt)("p",null,"拿 ",(0,i.kt)("inlineCode",{parentName:"p"},"ABCCED")," 作为例子, 括号中为淘汰的值。"),(0,i.kt)("p",null,"A(S) -> B(F) -> C -> C -> E(空、E、C) -> D"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {character[][]} board\n * @param {string} word\n * @return {boolean}\n */\nvar exist = function(board, word) {\n  for (let x = 0; x < board.length; x++) {\n    for (let y = 0; y < board[x].length; y++) {\n      if (word.length === 1 && word[0] === board[x][y]) {\n        return true\n      }\n      if (word[0] === board[x][y]) {\n        const ifValid = backTrace(board, word, 1, x, y, [])\n        if (ifValid) return ifValid\n      }\n    }\n  }\n  return false\n};\n\n/**\n * start: means start of word\n * x: row\n * y: column\n* */\nvar backTrace = (board, word, start, x, y, used) => {\n  used.push(`${x},${y}`)\n  const useBottom = used.indexOf(`${x + 1},${y}`) === -1 && word[start] === (board[x + 1] && board[x + 1][y])\n  const useRight = used.indexOf(`${x},${y + 1}`) === -1 && word[start] === (board[x] && board[x][y + 1])\n  const useTop = used.indexOf(`${x - 1},${y}`) === -1 && word[start] === (board[x - 1] && board[x - 1][y])\n  const useLeft = used.indexOf(`${x},${y - 1}`) === -1 && word[start] === (board[x] && board[x][y - 1])\n  if (start === word.length - 1 && (useRight || useBottom || useLeft || useTop)) {\n    return true\n  }\n\n  if (useBottom) {\n    const tag = backTrace(board, word, start + 1, x + 1, y, used)\n    used.pop()\n    if (tag) return tag\n  }\n  if (useRight) {\n    const tag = backTrace(board, word, start + 1, x, y + 1, used)\n    used.pop()\n    if (tag) return tag\n  }\n  if (useTop) {\n    const tag = backTrace(board, word, start + 1, x - 1, y, used)\n    used.pop()\n    if (tag) return tag\n  }\n  if (useLeft) {\n    const tag = backTrace(board, word, start + 1, x, y - 1, used)\n    used.pop()\n    if (tag) return tag\n  }\n  return false\n}\n")),(0,i.kt)("p",null,"思考: 这道题的解法可以用来解决生活中部分「迷宫类」的问题。"),(0,i.kt)("h3",null,"优化"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"几个关键点",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"终止条件优化"),(0,i.kt)("li",{parentName:"ul"},"使用 for 循环优化 4 个方向")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {character[][]} board\n * @param {string} word\n * @return {boolean}\n */\nvar exist = function(board, word) {\n  for (let x = 0; x < board.length; x++) {\n    for (let y = 0; y < board[x].length; y++) {\n      const ifValid = backTrace(board, word, 0, x, y, [])\n      if (ifValid) return true\n    }\n  }\n  return false\n};\n\nvar directions = [[1, 0], [0, 1], [-1, 0], [0, -1]] // 下、右、上、左\n\n/**\n * start: means start of word\n * x: row\n * y: column\n* */\nvar backTrace = (board, word, start, x, y, used) => {\n  const key = `${x},${y}`\n  if (start === word.length - 1 && used.indexOf(key) === -1 && word[start] === (board[x] && board[x][y])) {\n    return true\n  }\n\n  for (let i = 0; i < directions.length; i++) {\n    if (word[start] === (board[x] && board[x][y]) && used.indexOf(key) === -1) {\n      used.push(key)\n      const tag = backTrace(board, word, start + 1, x + directions[i][0], y + directions[i][1], used)\n      used.pop()\n      if (tag) return true\n    }\n  }\n\n  return false\n}\n")),(0,i.kt)("p",null,"优化后代码量减少 32%。"),(0,i.kt)("h3",null,"sister title"),(0,i.kt)("p",null,"130、200"))}c.isMDXComponent=!0},14437:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"题目"),(0,i.kt)("p",null,"给定一个排序数组，你需要在原地删除重复出现的元素，使得每个元素最多出现两次，返回移除后数组的新长度。"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"不要使用额外的数组空间"),"，你必须在原地修改输入数组并在使用 O(1) 额外空间的条件下完成。"),(0,i.kt)("p",null,"示例 1:"),(0,i.kt)("p",null,"给定 ",(0,i.kt)("inlineCode",{parentName:"p"},"nums = [1,1,1,2,2,3]"),","),(0,i.kt)("p",null,"函数应返回新长度 length = 5, 并且原数组的前五个元素被修改为 1, 1, 2, 2, 3 。"),(0,i.kt)("p",null,"你",(0,i.kt)("inlineCode",{parentName:"p"},"不需要考虑数组中超出新长度后面的元素"),"。"),(0,i.kt)("p",null,"示例 2:"),(0,i.kt)("p",null,"给定 ",(0,i.kt)("inlineCode",{parentName:"p"},"nums = [0,0,1,1,1,1,2,3,3]"),","),(0,i.kt)("p",null,"函数应返回新长度 length = 7, 并且原数组的前五个元素被修改为 0, 0, 1, 1, 2, 3, 3 。"),(0,i.kt)("p",null,"你不需要考虑数组中超出新长度后面的元素。"),(0,i.kt)("p",null,"说明:"),(0,i.kt)("p",null,"为什么返回数值是整数，但输出的答案是数组呢?"),(0,i.kt)("p",null,"请注意，输入数组是以“引用”方式传递的，这意味着在函数里修改输入数组对于调用者是可见的。"),(0,i.kt)("p",null,"你可以想象内部操作如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// nums 是以“引用”方式传递的。也就是说，不对实参做任何拷贝\nint len = removeDuplicates(nums);\n\n// 在函数里修改输入数组对于调用者是可见的。\n// 根据你的函数返回的长度, 它会打印出数组中该长度范围内的所有元素。\nfor (int i = 0; i < len; i++) {\n    print(nums[i]);\n}\n")),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/e1ebb0d0612908377d6aca476611f03d.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number}\n */\nvar removeDuplicates = function(nums) {\n  if (nums.length <= 2) return nums.length\n  let cur = 1 // 新数组的下标位数\n  for (let i = 2; i < nums.length; i++) {\n    // 对题目中每个元素最多出现两次的条件作限制\n    if (nums[i] !== nums[cur - 1]) {\n      nums[cur + 1] = nums[i]\n      cur++\n    }\n  }\n  return cur + 1\n}\n")),(0,i.kt)("h3",null,"同类题目"),(0,i.kt)("p",null,"关键词: 双指针。"),(0,i.kt)("p",null,"26、27、283。"))}c.isMDXComponent=!0},14905:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Remove Duplicates from Sorted List II"),(0,i.kt)("p",null,"Given a ",(0,i.kt)("inlineCode",{parentName:"p"},"sorted linked list"),", delete all nodes that have duplicate numbers, leaving only distinct numbers from the original list."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->2->3->3->4->4->5\nOutput: 1->2->5\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->1->1->2->3\nOutput: 2->3\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思路: ",(0,i.kt)("inlineCode",{parentName:"p"},"快慢指针"),", 用快指针跳过有重复值的链表, 慢指针负责和快指针拼接! 思路比较精妙, 后面值得二刷。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"s cur/q                     // s: slow; q: quick\n    1 -> 1 -> 1 -> 2 -> 3\n              .\n              .\ns->cur        q\n    1 -> 1 -> 1 -> 2 -> 3\n              .\n              .\n        next\ns ---------------\x3ecur/q\n    1 -> 1 -> 1 -> 2 -> 3\n              .\n              .\n                   s   cur/q\n    1 -> 1 -> 1 -> 2 -> 3\n              .\n              .\n                        s\n    1 -> 1 -> 1 -> 2 -> 3\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar deleteDuplicates = function(head) {\n  const dummyHead = new ListNode(0)\n  dummyHead.next = head\n\n  let slowPoint = dummyHead\n\n  while(slowPoint.next) {\n    let cur = slowPoint.next\n    let quickPoint = cur\n    while(quickPoint.next && quickPoint.next.val === cur.val) {\n      quickPoint = quickPoint.next\n    }\n\n    if (cur === quickPoint) {\n      slowPoint = slowPoint.next\n    } else {\n      slowPoint.next = quickPoint.next\n    }\n  }\n\n  return dummyHead.next\n}\n")))}c.isMDXComponent=!0},59523:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Title"),(0,i.kt)("p",null,"Given a sorted linked list, delete all duplicates such that each element appear only once."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->1->2\nOutput: 1->2\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->1->2->3->3\nOutput: 1->2->3\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"该题思路比较直接, 使用 cur, next 两个指针表示当前值和下一值, 若 cur 指针的值与 next 指针的值相等, 则将 next 指针往后移动一位即可。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"cur   next\n 1  ->  1  ->  2  ->  3  ->  3\n\ncur          next\n 1  ->  1  ->  2  ->  3  ->  3\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar deleteDuplicates = function(head) {\n  const listNode = new ListNode(0)\n  listNode.next = head\n  let cur = listNode.next\n  while (cur) {\n    let next = cur.next\n    while (next && next.val === cur.val) {\n      next = next.next\n    }\n    cur.next = next\n    cur = cur.next\n  }\n  return listNode.next\n}\n")),(0,i.kt)("h3",null,"Same Type Question"),(0,i.kt)("p",null,"2、86、328、445"))}c.isMDXComponent=!0},46562:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"Given a linked list and a value x, partition it such that all nodes less than x come before nodes greater than or equal to x."),(0,i.kt)("p",null,"You should preserve the original relative order of the nodes in each of the two partitions."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: head = 1->4->3->2->5->2, x = 3\nOutput: 1->2->2->4->3->5\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"思路: 遍历访问链表 head, 将链表中小于 x 与大于等于 x 的值作拆分成两个链表, 最后再将它们给链接起来。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"易漏点: 大于等于 x 的链表的末尾的 next 应该指向 null。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *     this.val = val;\n *     this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @param {number} x\n * @return {ListNode}\n */\nvar partition = function(head, x) {\n  const listNode = new ListNode(0)\n  listNode.next = head\n\n  const smallerThanX = new ListNode(0)\n  const biggerThanX = new ListNode(0)\n\n  let cur = listNode.next\n  let smallPoint = smallerThanX\n  let bigPoint = biggerThanX\n  while (cur) {\n    if (cur.val < x) {\n      smallPoint.next = cur\n      smallPoint = smallPoint.next\n    } else {\n      bigPoint.next = cur\n      bigPoint = bigPoint.next\n    }\n\n    cur = cur.next\n  }\n\n  bigPoint.next = null\n  smallPoint.next = biggerThanX.next\n\n  return smallerThanX.next\n}\n")))}c.isMDXComponent=!0},15936:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"题目"),(0,i.kt)("p",null,"给定两个有序整数数组 nums1 和 nums2，将 nums2 合并到 nums1 中，使得 num1 成为一个有序数组。"),(0,i.kt)("p",null,"说明:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"初始化 nums1 和 nums2 的元素数量分别为 m 和 n。"),(0,i.kt)("li",{parentName:"ul"},"你可以假设 nums1 有足够的空间（空间大小大于或等于 m + n）来保存 nums2 中的元素。")),(0,i.kt)("p",null,"示例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"输入:\nnums1 = [1,2,3,0,0,0], m = 3\nnums2 = [2,5,6],       n = 3\n\n输出: [1,2,2,3,5,6]\n")),(0,i.kt)("h3",null,"解题"),(0,i.kt)("p",null,"解法一: 运用 JavaScript 提供的 sort 函数来排序函数。时间复杂度 O(nLogn)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums1\n * @param {number} m\n * @param {number[]} nums2\n * @param {number} n\n * @return {void} Do not return anything, modify nums1 in-place instead.\n */\nvar merge = function (nums1, m, nums2, n) {\n  const length = nums1.length\n  for (let i = 0; i < length - m; i++) {\n    nums1.pop()\n  }\n  for (let i = 0; i < n; i++) {\n    nums1.push(nums2[i])\n    nums1.sort((a, b) => a - b)\n  }\n}\n")),(0,i.kt)("p",null,"解法二: 题目的本质是归并排序的合部分。所以使用归并排序的思想即可解决。事件复杂度 O(n)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums1\n * @param {number} m\n * @param {number[]} nums2\n * @param {number} n\n * @return {void} Do not return anything, modify nums1 in-place instead.\n */\nvar merge = function(nums1, m, nums2, n) {\n  let l = 0 // 第一个数组下标\n  let r = 0 // 第二个数组下标\n  const arr = []\n\n  while (l < m && r < n) {\n    if (nums1[l] <= nums2[r]) {\n      arr.push(nums1[l])\n      l++\n    } else if (nums1[l] > nums2[r]) {\n      arr.push(nums2[r])\n      r++\n    }\n  }\n\n  while (l < m) {\n    arr.push(nums1[l])\n    l++\n  }\n\n  while (r < n) {\n    arr.push(nums2[r])\n    r++\n  }\n\n  for (let i = 0; i < m + n; i++) {\n    nums1[i] = arr[i]\n  }\n}\n")),(0,i.kt)("h3",null,"todo"),(0,i.kt)("p",null,"因为解法二多用了一个数组空间, 后续看看怎么优化。"))}c.isMDXComponent=!0},67551:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"什么是格雷编码"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/e4701735e8d53cdc38f92b050bd31f93.jpg",alt:null}))),(0,i.kt)("p",null,"规律: 虚线的上下除去首位是映射关系"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://zh.wikipedia.org/wiki/%E6%A0%BC%E9%9B%B7%E7%A0%81"}),"参考链接")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} n\n * @return {number[]}\n */\n// 00 // 01 => // 10 // 11\nvar grayCode = function (n) {\n  const arr = new Array()\n  arr[0] = [0]\n  for (let i = 1; i <= n; i++) {\n    const newArr = arr[i - 1].slice().reverse().map(r => r + Math.pow(2, i - 1))\n    arr[i] = [...arr[i - 1], ...newArr]\n  }\n  return arr[n]\n}\n")))}c.isMDXComponent=!0},58605:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"Determine whether an integer is a palindrome. An integer is a palindrome when it reads the same backward as forward."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("p",null,"Input: 121\nOutput: true\nExample 2:"),(0,i.kt)("p",null,"Input: -121\nOutput: false\nExplanation: From left to right, it reads -121. From right to left, it becomes 121-. Therefore it is not a palindrome.\nExample 3:"),(0,i.kt)("p",null,"Input: 10\nOutput: false\nExplanation: Reads 01 from right to left. Therefore it is not a palindrome."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number} x\n * @return {boolean}\n */\nvar isPalindrome = function (x) {\n  const convert = x.toString().split('').reverse().join('')\n  if (x === Number(convert)) {\n    return true\n  } else {\n    return false\n  }\n};\n")))}c.isMDXComponent=!0},60814:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"90.Subsets II"),(0,i.kt)("p",null,"Given a collection of integers that ",(0,i.kt)("inlineCode",{parentName:"p"},"might contain duplicates nums"),", return all possible subsets (the power set)."),(0,i.kt)("p",null,"Note: The solution set must not contain duplicate subsets."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("p",null,"Input: ","[1,2,2]","\nOutput:\n[\n","[2]",",\n","[1]",",\n","[1,2,2]",",\n","[2,2]",",\n","[1,2]",",\n[]\n]"),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"回溯法解",(0,i.kt)("inlineCode",{parentName:"p"},"组合问题"),"。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1"),(0,i.kt)("li",{parentName:"ul"},"1",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2"))),(0,i.kt)("li",{parentName:"ul"},"1",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2"))))),(0,i.kt)("li",{parentName:"ul"},"2"),(0,i.kt)("li",{parentName:"ul"},"2",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {number[]} nums\n * @return {number[][]}\n */\nvar subsetsWithDup = function(nums) {\n  const result = []\n  const sortedNums = nums.sort((r1, r2) => r1 - r2)\n  iterator(sortedNums, 0, [], result)\n  return result\n};\n\nvar iterator = function(nums, start, temp, result) {\n  result.push([...temp])\n\n  for (let i = start; i < nums.length; i++) {\n    if (nums[i] === nums[i - 1] && i !== start) { continue }\n    temp.push(nums[i])\n    iterator(nums, i + 1, temp, result)\n    temp.pop(nums[i])\n  }\n}\n")))}c.isMDXComponent=!0},65638:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"90.Decode Ways"),(0,i.kt)("p",null,"A message containing letters from A-Z can be encoded into numbers using the following mapping:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"'A' -> \"1\"\n'B' -> \"2\"\n...\n'Z' -> \"26\"\n")),(0,i.kt)("p",null,'To decode an encoded message, all the digits must be grouped then mapped back into letters using the reverse of the mapping above (there may be multiple ways). For example, "11106" can be mapped into:'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'"AAJF" with the grouping (1 1 10 6)'),(0,i.kt)("li",{parentName:"ul"},'"KJF" with the grouping (11 10 6)')),(0,i.kt)("p",null,"Note that the grouping (1 11 06) is invalid because ",(0,i.kt)("inlineCode",{parentName:"p"},'"06" cannot be mapped into \'F\' since "6" is different from "06"'),"."),(0,i.kt)("p",null,"Given a string s containing only digits, return the number of ways to decode it."),(0,i.kt)("p",null,"The answer is guaranteed to fit in a 32-bit integer."),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "12"\nOutput: 2\nExplanation: "12" could be decoded as "AB" (1 2) or "L" (12).\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "226"\nOutput: 3\nExplanation: "226" could be decoded as "BZ" (2 26), "VF" (22 6), or "BBF" (2 2 6).\n')),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "0"\nOutput: 0\nExplanation: There is no character that is mapped to a number starting with 0.\nThe only valid mappings with 0 are \'J\' -> "10" and \'T\' -> "20", neither of which start with 0.\nHence, there are no valid ways to decode this since all digits need to be mapped.\n')),(0,i.kt)("p",null,"Example 4:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "06"\nOutput: 0\nExplanation: "06" cannot be mapped to "F" because of the leading zero ("6" is different from "06").\n')),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"1 <= s.length <= 100"),(0,i.kt)("li",{parentName:"ul"},"s contains only digits and may contain leading zero(s).")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"该题拆分子问题较为不易, 题目思路可以转化为:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"下标为 start 的拆解之和等于",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"下标为 start + 1 的拆解之和"),(0,i.kt)("li",{parentName:"ul"},"下标为 start + 2 的拆解之和(前提: [start, start + 2) 值合理)")))),(0,i.kt)("p",null,"解法一: 记忆化递归(可二刷)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {number}\n */\nvar numDecodings = function(s) {\n  const cache = {}\n  return judge(s, 0, cache)\n}\n\nvar judge = function(s, start, cache) {\n  const length = s.length\n  if (s[start] === '0') return 0\n  if (start === s.length) {\n    return 1\n  }\n  if (cache[start]) return cache[start]\n\n  let res = judge(s, start + 1, cache)\n  if (isValidValue(s.slice(start, start + 2))) {\n    res += judge(s, start + 2, cache)\n  }\n  return cache[start] = res\n}\n\nvar isValidValue = function(value) {\n  if (!value || value.length < 2) return false\n  const valueToNum = Number(value)\n  return valueToNum <= 26\n}\n")),(0,i.kt)("p",null,"解法二: 动态规划"),(0,i.kt)("p",null,"cache","[i]"," 表示第 i 位上有几种拆解方法。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {number}\n */\nvar numDecodings = function(s) {\n  if (s[0] === '0') {\n    return 0\n  }\n\n  const cache = {\n    [`${s.length}`]: 1\n  }\n\n  for (let i = s.length - 1; i >= 0; i--) {\n    if (s.slice(i, i + 1) === '0') {\n      cache[i] = 0\n    } else {\n      cache[i] = cache[i + 1]\n\n      if (isValidValue(s.slice(i, i + 2))) {\n        cache[i] = cache[i] + cache[i + 2]\n      }\n    }\n  }\n\n  return cache['0']\n}\n\nvar isValidValue = function(value) {\n  if (!value || value.length < 2) return false\n  const valueToNum = Number(value)\n  return valueToNum <= 26\n}\n")))}c.isMDXComponent=!0},73169:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"title"),(0,i.kt)("p",null,"Reverse a linked list from position m to n. Do it in one-pass."),(0,i.kt)("p",null,"Note: 1 ≤ m ≤ n ≤ length of list."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: 1->2->3->4->5->NULL, m = 2, n = 4\nOutput: 1->4->3->2->5->NULL\n")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"1 -> 2 -> 3 -> 4 -> 5\n    (4 -> 3 -> 2)\n")),(0,i.kt)("p",null,"该题是",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/LeetCode/206.Reverse_Linked_List/README.md"}),"206.Reverse",(0,i.kt)("em",{parentName:"a"},"Linked")," List")," 的扩展, ","[m, n]"," 区间内指针翻转的思路同 206 题, 剩下的就是将 m 的 next 指向 n 指针的 next, 同时将排在 m 前面一位的指针的 next 指向 n。"),(0,i.kt)("p",null,"会存在以下卡题的点:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"最终返回的值怎么定;"),(0,i.kt)("li",{parentName:"ul"},"如何借助中间变量;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for singly-linked list.\n * function ListNode(val) {\n *   this.val = val;\n *   this.next = null;\n * }\n */\n/**\n * @param {ListNode} head\n * @param {number} m\n * @param {number} n\n * @return {ListNode}\n */\nvar reverseBetween = function(head, m, n) {\n  const originList = new ListNode(0)\n  originList.next = head\n\n  let listNode = originList\n\n  for (let i = 0; i < m - 1; i++) {\n    listNode = listNode.next\n  }\n\n  let prev = null\n  let cur = listNode.next\n\n  for (let i = 0; i < n - m + 1; i++) {\n    let next = cur.next\n    cur.next = prev\n    prev = cur\n    cur = next\n  }\n\n  // 将 m 的 next 指向 n 指针的 next, 同时将排在 m 前面一位的指针的 next 指向 n\n  listNode.next.next = cur\n  listNode.next = prev\n  return originList.next\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"206"))}c.isMDXComponent=!0},18817:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"93.Restore IP Addresses"),(0,i.kt)("p",null,"Given a string s containing only digits, return all possible valid IP addresses that can be obtained from s. You can return them in any order."),(0,i.kt)("p",null,"A valid IP address consists of exactly ",(0,i.kt)("inlineCode",{parentName:"p"},"four integers"),", each integer is between 0 and 255, separated by single dots and ",(0,i.kt)("inlineCode",{parentName:"p"},"cannot have leading zeros"),'. For example, "0.1.2.201" and "192.168.1.1" are valid IP addresses and "0.011.255.245", "192.168.1.312" and "',(0,i.kt)("a",u({parentName:"p"},{href:"mailto:192.168@1.1"}),"192.168@1.1"),'" are invalid IP addresses.'),(0,i.kt)("p",null,"Example 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "25525511135"\nOutput: ["255.255.11.135","255.255.111.35"]\n')),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "0000"\nOutput: ["0.0.0.0"]\n')),(0,i.kt)("p",null,"Example 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "1111"\nOutput: ["1.1.1.1"]\n')),(0,i.kt)("p",null,"Example 4:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "010010"\nOutput: ["0.10.0.10","0.100.1.0"]\n')),(0,i.kt)("p",null,"Example 5:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'Input: s = "101023"\nOutput: ["1.0.10.23","1.0.102.3","10.1.0.23","10.10.2.3","101.0.2.3"]\n')),(0,i.kt)("p",null,"Constraints:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"0 <= s.length <= 3000"),(0,i.kt)("li",{parentName:"ul"},"s consists of digits only.")),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"方法一: 遍历穷举法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {string[]}\n */\nvar restoreIpAddresses = function (s) {\n  const arr = []\n  for (let i = 1; i < 4; i++) {\n    for (let j = i + 1; j < i + 5; j++) {\n      for (let z = j + 1; z < j + 5; z++) {\n        const a = s.slice(0, i)\n        const b = s.slice(i, j)\n        const c = s.slice(j, z)\n        const d = s.slice(z, s.length)\n        if (validate(a) && validate(b) && validate(c) && validate(d)) {\n          arr.push(`${a}.${b}.${c}.${d}`)\n        }\n      }\n    }\n  }\n  return arr\n};\n\nvar validate = function (value) {\n  if (value.length > 3 || value.length === 0 || +value > 255 || (value[0] === '0' && value.length > 1)) {\n    return false\n  }\n  return true\n}\n")),(0,i.kt)("p",null,"方法二: 回溯法"),(0,i.kt)("p",null,"回溯是一种思想。DFS 也是回溯思想的一种实践案例。回溯法本质是一种穷举的递归算法, 既然是递归, 它就需要有终止条件。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @param {string} s\n * @return {string[]}\n */\nvar restoreIpAddresses = function(s) {\n  const res = []\n  backtracking(s, 0, '', res)\n  return res\n};\n\nvar backtracking = function(s, start, ipValue, res) {\n  const splitIpNode = ipValue.split('.')\n  const ipNode = splitIpNode.length\n  // end condition\n  for (let i = 0; i < ipNode; i++) {\n    if (!isValid(splitIpNode[i])) return\n  }\n  if (ipValue.length === s.length + 3 && !ipValue.endsWith('.')) {\n    // 比如 010010 存在两种相等的 case, 0100 + 1 + 0, 0100 + 10, 因此需要去重\n    if (res.indexOf(ipValue) === -1) res.push(ipValue)\n    return\n  } else if (ipValue.length === s.length + 3 && ipValue.endsWith('.')) {\n    return\n  }\n\n  for (let i = start + 1; i < start + 4; i++) {\n    if (i >= s.length + 1) return\n    const str = s.slice(start, i)\n    const ipValueNew = ipNode <= 3 ? ipValue + str + '.' : ipValue + str\n    backtracking(s, i, ipValueNew, res)\n  }\n}\n\n// judge if the str value is valid for ip.\nvar isValid = function (value) {\n  if (value.length > 3 || +value > 255 || (value[0] === '0' && value.length > 1)) {\n    return false\n  }\n  return true\n}\n")),(0,i.kt)("p",null,"针对此题, 方法一相对方法二较为容易。"))}c.isMDXComponent=!0},97148:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"94.Binary Tree Inorder Traversal"),(0,i.kt)("p",null,"Given a binary tree, return the inorder traversal of its nodes' values."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Input: [1,null,2,3]\n    1\n  /   \\\nnull   2\n      /\n    3\n\nOutput: [1,3,2]\n")),(0,i.kt)("p",null,"Follow up: Recursive solution is trivial, could you do it iteratively?"),(0,i.kt)("h3",null,"递归法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[]}\n */\nvar inorderTraversal = function(root) {\n  if (root) {\n    return [...inorderTraversal(root.left), root.val, ...inorderTraversal(root.right)]\n  } else {\n    return []\n  }\n}\n")),(0,i.kt)("h3",null,"颜色标记法(迭代法, 模拟系统栈)"),(0,i.kt)("p",null,"使用",(0,i.kt)("inlineCode",{parentName:"p"},"颜色标记法"),"剖析树在中序遍历下的递归操作, 思路如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"将访问过的元素标记为灰色, 未访问过的元素标记为白色;"),(0,i.kt)("li",{parentName:"ol"},"从栈顶取出访问元素:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"若为灰色元素, 则打印之;"),(0,i.kt)("li",{parentName:"ol"},"若为白色元素, 按照",(0,i.kt)("inlineCode",{parentName:"li"},"右 -> 中 -> 左"),"的顺序推入栈, 同时将白色元素标记为灰色元素;")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"     4\n    / \\\n   2   5\n  / \\\n 1   3\n")),(0,i.kt)("p",null,"在如上所示树中, 模拟系统栈图解其执行过程如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"white 2\ngray  4\nwhite 5\n\nwhite 1\ngray  2\nwhite 3\ngray  4\nwhite 5\n\ngray  1\ngray  2\nwhite 3\ngray  4\nwhite 5\n\nwhite 3\ngray  4\nwhite 5\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[]}\n */\nvar inorderTraversal = function(root) {\n  const printArr = []\n  if (!root) return printArr\n  const stack = []\n  stack.push({\n    color: 'white',\n    node: root\n  })\n\n  while (stack.length > 0) {\n    const pickValue = stack.pop()\n    const { color, node } = pickValue\n    if (color === 'gray') {\n      printArr.push(node.val)\n    } else {\n      node.right && stack.push({ color: 'white', node: node.right })\n      stack.push({ color: 'gray', node })\n      node.left && stack.push({ color: 'white', node: node.left })\n    }\n  }\n\n  return printArr\n}\n")),(0,i.kt)("h3",null,"Sister Title"),(0,i.kt)("p",null,"144、94、145"))}c.isMDXComponent=!0},18219:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"98.Validate Binary Search Tree"),(0,i.kt)("p",null,"Given a binary tree, determine if it is a valid binary search tree (BST)."),(0,i.kt)("p",null,"Assume a BST is defined as follows:"),(0,i.kt)("p",null,"The left subtree of a node contains only nodes with keys less than the node's key.\nThe right subtree of a node contains only nodes with keys greater than the node's key.\nBoth the left and right subtrees must also be binary search trees."),(0,i.kt)("p",null," \nExample 1:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    2\n   / \\\n  1   3\n\nInput: [2,1,3]\nOutput: true\n")),(0,i.kt)("p",null,"Example 2:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    5\n   / \\\n  1   4\n     / \\\n    3   6\n\nInput: [5,1,4,null,null,3,6]\nOutput: false\n")),(0,i.kt)("p",null,"Explanation: The root node's value is 5 but its right child's value is 4."),(0,i.kt)("h3",null,"Analyze"),(0,i.kt)("p",null,"一开始的想法是用后续遍历判断子节点是否为二分搜索树, 实现如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {boolean}\n */\nvar isValidBST = function(root) {\n  return isValidBSTChild(root)\n};\n\nvar isValidBSTChild = function(node) {\n  if (!node || (!node.left && !node.right)) return true\n\n  const isLeftChildValidBST = isValidBSTChild(node.left)\n  const isRightChildValidBST = isValidBSTChild(node.right)\n  if (!isLeftChildValidBST || !isRightChildValidBST) return false\n\n  // defination for BST tree\n  if (node.right && node.left && node.right.val > node.val && node.val > node.left.val) return true\n  if (node.right && !node.left && node.right.val > node.val) return true\n  if (node.left && !node.right && node.left.val < node.val) return true\n  return false\n};\n")),(0,i.kt)("p",null,"结果卡在了如下测试用例中:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"    10\n   /  \\\n  5   15\n     /  \\\n    6   20\n\nInput: [10,5,15,null,null,6,20]\nExpect Output: false\n")),(0,i.kt)("p",null,"参考评论区的点拨, 题目等价为经过",(0,i.kt)("inlineCode",{parentName:"p"},"中序遍历"),"输出后的节点是否为升序排列。再次实现:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * Definition for a binary tree node.\n * function TreeNode(val) {\n *     this.val = val;\n *     this.left = this.right = null;\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {boolean}\n */\nvar isValidBST = function(root) {\n  const analyze = []\n  inOrderTraverse(root, analyze)\n  for (let i = 0; i < analyze.length; i++) {\n    if (analyze[i] >= analyze[i + 1]) return false\n  }\n  return true\n};\n\nvar inOrderTraverse = function(node, analyzeArr) {\n  if (!node) return\n  inOrderTraverse(node.left, analyzeArr)\n  analyzeArr.push(node.val)\n  inOrderTraverse(node.right, analyzeArr)\n}\n")))}c.isMDXComponent=!0},75823:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The markdown table is generated by ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/create-react-doc/tree/master/packages/leetcode-cli"}),"crd-leetcode-cli"),"\n| # | Title | Explanation | Difficulty | Type |\n|:---:|:---:|:---:|:---:|:---:|\n| 1 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/two-sum/"}),"Two Sum")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/1.Two_Sum.md"}),"Analyze")," | Easy | Array, Hash Table |\n| 2 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/add-two-numbers/"}),"Add Two Numbers")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/2.Add_Two_Numbers.md"}),"Analyze")," | Medium | Recursion, Linked List, Math |\n| 3 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/longest-substring-without-repeating-characters/"}),"Longest Substring Without Repeating Characters")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/3.Longest_Substring_Without_Repeating_Characters.md"}),"Analyze")," | Medium | Hash Table, Two Pointers, String, Sliding Window |\n| 4 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/median-of-two-sorted-arrays/"}),"Median of Two Sorted Arrays")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/4.Median_of_Two_Sorted_Arrays.md"}),"Analyze")," | Hard | Array, Binary Search, Divide and Conquer |\n| 7 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/reverse-integer/"}),"Reverse Integer")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/7.Reverse_Integer.md"}),"Analyze")," | Easy | Math |\n| 9 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/palindrome-number/"}),"Palindrome Number")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/9.Palindrome_Number.md"}),"Analyze")," | Easy | Math |\n| 11 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/container-with-most-water/"}),"Container With Most Water")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/11.Container_With_Most_Water.md"}),"Analyze")," | Medium | Array, Two Pointers |\n| 13 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/roman-to-integer/"}),"Roman to Integer")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/13.Roman_to_Integer.md"}),"Analyze")," | Easy | Math, String |\n| 14 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/longest-common-prefix/"}),"Longest Common Prefix")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/14.Longest_Common_Prefix.md"}),"Analyze")," | Easy | String |\n| 15 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/3sum/"}),"3Sum")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/15.3Sum.md"}),"Analyze")," | Medium | Array, Two Pointers |\n| 16 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/3sum-closest/"}),"3Sum Closest")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/16.3Sum_Closest.md"}),"Analyze")," | Medium | Array, Two Pointers |\n| 17 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/letter-combinations-of-a-phone-number/"}),"Letter Combinations of a Phone Number")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/17.Letter_Combinations_of_a_Phone_Number.md"}),"Analyze")," | Medium | Depth-first Search, Recursion, String, Backtracking |\n| 18 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/4sum/"}),"4Sum")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/18.4Sum.md"}),"Analyze")," | Medium | Array, Hash Table, Two Pointers |\n| 19 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/remove-nth-node-from-end-of-list/"}),"Remove Nth Node From End of List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/19.Remove_Nth_Node_From_End_of_List.md"}),"Analyze")," | Medium | Linked List, Two Pointers |\n| 20 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/valid-parentheses/"}),"Valid Parentheses")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/20.Valid_Parentheses.md"}),"Analyze")," | Easy | Stack, String |\n| 21 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/merge-two-sorted-lists/"}),"Merge Two Sorted Lists")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/21.Merge_Two_Sorted_Lists.md"}),"Analyze")," | Easy | Recursion, Linked List |\n| 22 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/generate-parentheses/"}),"Generate Parentheses")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/22.Generate_Parentheses.md"}),"Analyze")," | Medium | String, Backtracking |\n| 23 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/merge-k-sorted-lists/"}),"Merge k Sorted Lists")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/23.Merge_k_Sorted_Lists.md"}),"Analyze")," | Hard | Heap, Linked List, Divide and Conquer |\n| 24 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/swap-nodes-in-pairs/"}),"Swap Nodes in Pairs")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/24.Swap_Nodes_in_Pairs.md"}),"Analyze")," | Medium | Recursion, Linked List |\n| 25 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/reverse-nodes-in-k-group/"}),"Reverse Nodes in k-Group")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/25.Reverse_Nodes_in_k-Group.md"}),"Analyze")," | Hard | Linked List |\n| 26 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/remove-duplicates-from-sorted-array/"}),"Remove Duplicates from Sorted Array")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/26.Remove_Duplicates_from_Sorted_Array.md"}),"Analyze")," | Easy | Array, Two Pointers |\n| 27 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/remove-element/"}),"Remove Element")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/27.Remove_Element.md"}),"Analyze")," | Easy | Array, Two Pointers |\n| 28 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/implement-strstr/"}),"Implement strStr()")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/28.Implement_strStr().md"}),"Analyze")," | Easy | Two Pointers, String |\n| 33 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/search-in-rotated-sorted-array/"}),"Search in Rotated Sorted Array")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/33.Search_in_Rotated_Sorted_Array.md"}),"Analyze")," | Medium | Array, Binary Search |\n| 35 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/search-insert-position/"}),"Search Insert Position")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/35.Search_Insert_Position.md"}),"Analyze")," | Easy | Array, Binary Search |\n| 36 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/valid-sudoku/"}),"Valid Sudoku")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/36.Valid_Sudoku.md"}),"Analyze")," | Medium | Hash Table |\n| 37 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/sudoku-solver/"}),"Sudoku Solver")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/37.Sudoku_Solver.md"}),"Analyze")," | Hard | Hash Table, Backtracking |\n| 38 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/count-and-say/"}),"Count and Say")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/38.Count_and_Say.md"}),"Analyze")," | Easy | String |\n| 39 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/combination-sum/"}),"Combination Sum")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/39.Combination_Sum.md"}),"Analyze")," | Medium | Array, Backtracking |\n| 40 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/combination-sum-ii/"}),"Combination Sum II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/40.Combination_Sum_II.md"}),"Analyze")," | Medium | Array, Backtracking |\n| 46 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/permutations/"}),"Permutations")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/46.Permutations.md"}),"Analyze")," | Medium | Backtracking |\n| 47 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/permutations-ii/"}),"Permutations II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/47.Permutations_II.md"}),"Analyze")," | Medium | Backtracking |\n| 48 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/rotate-image/"}),"Rotate Image")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/48.Rotate_Image.md"}),"Analyze")," | Medium | Array |\n| 49 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/group-anagrams/"}),"Group Anagrams")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/49.Group_Anagrams.md"}),"Analyze")," | Medium | Hash Table, String |\n| 50 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/powx-n/"}),"Pow(x, n)")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/50.Pow(x,_n).md"}),"Analyze")," | Medium | Math, Binary Search |\n| 51 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/n-queens/"}),"N-Queens")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/51.N-Queens.md"}),"Analyze")," | Hard | Backtracking |\n| 52 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/n-queens-ii/"}),"N-Queens II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/52.N-Queens_II.md"}),"Analyze")," | Hard | Backtracking |\n| 61 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/rotate-list/"}),"Rotate List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/61.Rotate_List.md"}),"Analyze")," | Medium | Linked List, Two Pointers |\n| 62 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/unique-paths/"}),"Unique Paths")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/62.Unique_Paths.md"}),"Analyze")," | Medium | Array, Dynamic Programming |\n| 64 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/minimum-path-sum/"}),"Minimum Path Sum")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/64.Minimum_Path_Sum.md"}),"Analyze")," | Medium | Array, Dynamic Programming |\n| 66 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/plus-one/"}),"Plus One")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/66.Plus_One.md"}),"Analyze")," | Easy | Array |\n| 67 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/add-binary/"}),"Add Binary")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/67.Add_Binary.md"}),"Analyze")," | Easy | Math, String |\n| 69 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/sqrtx/"}),"Sqrt(x)")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/69.Sqrt(x).md"}),"Analyze")," | Easy | Math, Binary Search |\n| 70 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/climbing-stairs/"}),"Climbing Stairs")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/70.Climbing_Stairs.md"}),"Analyze")," | Easy | Dynamic Programming |\n| 71 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/simplify-path/"}),"Simplify Path")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/71.Simplify_Path.md"}),"Analyze")," | Medium | Stack, String |\n| 75 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/sort-colors/"}),"Sort Colors")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/75.Sort_Colors.md"}),"Analyze")," | Medium | Sort, Array, Two Pointers |\n| 77 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/combinations/"}),"Combinations")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/77.Combinations.md"}),"Analyze")," | Medium | Backtracking |\n| 78 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/subsets/"}),"Subsets")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/78.Subsets.md"}),"Analyze")," | Medium | Bit Manipulation, Array, Backtracking |\n| 79 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/word-search/"}),"Word Search")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/79.Word_Search.md"}),"Analyze")," | Medium | Array, Backtracking |\n| 80 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/remove-duplicates-from-sorted-array-ii/"}),"Remove Duplicates from Sorted Array II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/80.Remove_Duplicates_from_Sorted_Array_II.md"}),"Analyze")," | Medium | Array, Two Pointers |\n| 82 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/remove-duplicates-from-sorted-list-ii/"}),"Remove Duplicates from Sorted List II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/82.Remove_Duplicates_from_Sorted_List_II.md"}),"Analyze")," | Medium | Linked List |\n| 83 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/remove-duplicates-from-sorted-list/"}),"Remove Duplicates from Sorted List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/83.Remove_Duplicates_from_Sorted_List.md"}),"Analyze")," | Easy | Linked List |\n| 86 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/partition-list/"}),"Partition List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/86.Partition_List.md"}),"Analyze")," | Medium | Linked List, Two Pointers |\n| 88 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/merge-sorted-array/"}),"Merge Sorted Array")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/88.Merge_Sorted_Array.md"}),"Analyze")," | Easy | Array, Two Pointers |\n| 89 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/gray-code/"}),"Gray Code")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/89.Gray_Code.md"}),"Analyze")," | Medium | Backtracking |\n| 90 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/subsets-ii/"}),"Subsets II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/90.Subsets_II.md"}),"Analyze")," | Medium | Array, Backtracking |\n| 92 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/reverse-linked-list-ii/"}),"Reverse Linked List II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/92.Reverse_Linked_List_II.md"}),"Analyze")," | Medium | Linked List |\n| 93 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/restore-ip-addresses/"}),"Restore IP Addresses")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/93.Restore_IP_Addresses.md"}),"Analyze")," | Medium | String, Backtracking |\n| 94 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/binary-tree-inorder-traversal/"}),"Binary Tree Inorder Traversal")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/94.Binary_Tree_Inorder_Traversal.md"}),"Analyze")," | Medium | Stack, Tree, Hash Table |\n| 98 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/validate-binary-search-tree/"}),"Validate Binary Search Tree")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/98.Validate_Binary_Search_Tree.md"}),"Analyze")," | Medium | Tree, Depth-first Search, Recursion |\n| 100 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/same-tree/"}),"Same Tree")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/100.Same_Tree.md"}),"Analyze")," | Easy | Tree, Depth-first Search |\n| 101 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/symmetric-tree/"}),"Symmetric Tree")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/101.Symmetric_Tree.md"}),"Analyze")," | Easy | Tree, Depth-first Search, Breadth-first Search |\n| 102 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/binary-tree-level-order-traversal/"}),"Binary Tree Level Order Traversal")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/102.Binary_Tree_Level_Order_Traversal.md"}),"Analyze")," | Medium | Tree, Breadth-first Search |\n| 103 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/binary-tree-zigzag-level-order-traversal/"}),"Binary Tree Zigzag Level Order Traversal")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/103.Binary_Tree_Zigzag_Level_Order_Traversal.md"}),"Analyze")," | Medium | Stack, Tree, Breadth-first Search |\n| 104 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/maximum-depth-of-binary-tree/"}),"Maximum Depth of Binary Tree")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/104.Maximum_Depth_of_Binary_Tree.md"}),"Analyze")," | Easy | Tree, Depth-first Search, Recursion |\n| 107 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/binary-tree-level-order-traversal-ii/"}),"Binary Tree Level Order Traversal II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/107.Binary_Tree_Level_Order_Traversal_II.md"}),"Analyze")," | Medium | Tree, Breadth-first Search |\n| 108 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/convert-sorted-array-to-binary-search-tree/"}),"Convert Sorted Array to Binary Search Tree")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/108.Convert_Sorted_Array_to_Binary_Search_Tree.md"}),"Analyze")," | Easy | Tree, Depth-first Search |\n| 110 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/balanced-binary-tree/"}),"Balanced Binary Tree")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/110.Balanced_Binary_Tree.md"}),"Analyze")," | Easy | Tree, Depth-first Search, Recursion |\n| 111 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/minimum-depth-of-binary-tree/"}),"Minimum Depth of Binary Tree")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/111.Minimum_Depth_of_Binary_Tree.md"}),"Analyze")," | Easy | Tree, Depth-first Search, Breadth-first Search |\n| 112 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/path-sum/"}),"Path Sum")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/112.Path_Sum.md"}),"Analyze")," | Easy | Tree, Depth-first Search |\n| 113 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/path-sum-ii/"}),"Path Sum II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/113.Path_Sum_II.md"}),"Analyze")," | Medium | Tree, Depth-first Search |\n| 120 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/triangle/"}),"Triangle")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/120.Triangle.md"}),"Analyze")," | Medium | Array, Dynamic Programming |\n| 121 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/best-time-to-buy-and-sell-stock/"}),"Best Time to Buy and Sell Stock")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/121.Best_Time_to_Buy_and_Sell_Stock.md"}),"Analyze")," | Easy | Array, Dynamic Programming |\n| 125 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/valid-palindrome/"}),"Valid Palindrome")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/125.Valid_Palindrome.md"}),"Analyze")," | Easy | Two Pointers, String |\n| 127 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/word-ladder/"}),"Word Ladder")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/127.Word_Ladder.md"}),"Analyze")," | Hard | Breadth-first Search |\n| 129 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/sum-root-to-leaf-numbers/"}),"Sum Root to Leaf Numbers")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/129.Sum_Root_to_Leaf_Numbers.md"}),"Analyze")," | Medium | Tree, Depth-first Search |\n| 130 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/surrounded-regions/"}),"Surrounded Regions")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/130.Surrounded_Regions.md"}),"Analyze")," | Medium | Depth-first Search, Breadth-first Search, Union Find |\n| 131 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/palindrome-partitioning/"}),"Palindrome Partitioning")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/131.Palindrome_Partitioning.md"}),"Analyze")," | Medium | Depth-first Search, Dynamic Programming, Backtracking |\n| 143 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/reorder-list/"}),"Reorder List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/143.Reorder_List.md"}),"Analyze")," | Medium | Linked List |\n| 144 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/binary-tree-preorder-traversal/"}),"Binary Tree Preorder Traversal")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/144.Binary_Tree_Preorder_Traversal.md"}),"Analyze")," | Medium | Stack, Tree |\n| 145 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/binary-tree-postorder-traversal/"}),"Binary Tree Postorder Traversal")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/145.Binary_Tree_Postorder_Traversal.md"}),"Analyze")," | Medium | Stack, Tree |\n| 147 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/insertion-sort-list/"}),"Insertion Sort List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/147.Insertion_Sort_List.md"}),"Analyze")," | Medium | Sort, Linked List |\n| 148 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/sort-list/"}),"Sort List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/148.Sort_List.md"}),"Analyze")," | Medium | Sort, Linked List |\n| 149 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/max-points-on-a-line/"}),"Max Points on a Line")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/149.Max_Points_on_a_Line.md"}),"Analyze")," | Hard | Hash Table, Math |\n| 150 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/evaluate-reverse-polish-notation/"}),"Evaluate Reverse Polish Notation")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/150.Evaluate_Reverse_Polish_Notation.md"}),"Analyze")," | Medium | Stack |\n| 151 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/reverse-words-in-a-string/"}),"Reverse Words in a String")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/151.Reverse_Words_in_a_String.md"}),"Analyze")," | Medium | String |\n| 167 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/two-sum-ii-input-array-is-sorted/"}),"Two Sum II - Input array is sorted")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/167.Two_Sum_II_-_Input_array_is_sorted.md"}),"Analyze")," | Easy | Array, Two Pointers, Binary Search |\n| 199 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/binary-tree-right-side-view/"}),"Binary Tree Right Side View")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/199.Binary_Tree_Right_Side_View.md"}),"Analyze")," | Medium | Tree, Depth-first Search, Breadth-first Search, Recursion, Queue |\n| 200 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/number-of-islands/"}),"Number of Islands")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/200.Number_of_Islands.md"}),"Analyze")," | Medium | Depth-first Search, Breadth-first Search, Union Find |\n| 202 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/happy-number/"}),"Happy Number")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/202.Happy_Number.md"}),"Analyze")," | Easy | Hash Table, Math |\n| 203 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/remove-linked-list-elements/"}),"Remove Linked List Elements")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/203.Remove_Linked_List_Elements.md"}),"Analyze")," | Easy | Linked List |\n| 205 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/isomorphic-strings/"}),"Isomorphic Strings")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/205.Isomorphic_Strings.md"}),"Analyze")," | Easy | Hash Table |\n| 206 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/reverse-linked-list/"}),"Reverse Linked List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/206.Reverse_Linked_List.md"}),"Analyze")," | Easy | Linked List |\n| 209 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/minimum-size-subarray-sum/"}),"Minimum Size Subarray Sum")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/209.Minimum_Size_Subarray_Sum.md"}),"Analyze")," | Medium | Array, Two Pointers, Binary Search |\n| 215 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/kth-largest-element-in-an-array/"}),"Kth Largest Element in an Array")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/215.Kth_Largest_Element_in_an_Array.md"}),"Analyze")," | Medium | Heap, Divide and Conquer |\n| 216 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/combination-sum-iii/"}),"Combination Sum III")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/216.Combination_Sum_III.md"}),"Analyze")," | Medium | Array, Backtracking |\n| 217 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/contains-duplicate/"}),"Contains Duplicate")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/217.Contains_Duplicate.md"}),"Analyze")," | Easy | Array, Hash Table |\n| 219 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/contains-duplicate-ii/"}),"Contains Duplicate II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/219.Contains_Duplicate_II.md"}),"Analyze")," | Easy | Array, Hash Table |\n| 220 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/contains-duplicate-iii/"}),"Contains Duplicate III")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/220.Contains_Duplicate_III.md"}),"Analyze")," | Medium | Sort, Ordered Map |\n| 222 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/count-complete-tree-nodes/"}),"Count Complete Tree Nodes")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/222.Count_Complete_Tree_Nodes.md"}),"Analyze")," | Medium | Tree, Binary Search |\n| 226 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/invert-binary-tree/"}),"Invert Binary Tree")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/226.Invert_Binary_Tree.md"}),"Analyze")," | Easy | Tree |\n| 230 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/kth-smallest-element-in-a-bst/"}),"Kth Smallest Element in a BST")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/230.Kth_Smallest_Element_in_a_BST.md"}),"Analyze")," | Medium | Tree, Binary Search |\n| 234 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/palindrome-linked-list/"}),"Palindrome Linked List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/234.Palindrome_Linked_List.md"}),"Analyze")," | Easy | Linked List, Two Pointers |\n| 235 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree/"}),"Lowest Common Ancestor of a Binary Search Tree")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/235.Lowest_Common_Ancestor_of_a_Binary_Search_Tree.md"}),"Analyze")," | Easy | Tree |\n| 236 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/"}),"Lowest Common Ancestor of a Binary Tree")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/236.Lowest_Common_Ancestor_of_a_Binary_Tree.md"}),"Analyze")," | Medium | Tree |\n| 237 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/delete-node-in-a-linked-list/"}),"Delete Node in a Linked List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/237.Delete_Node_in_a_Linked_List.md"}),"Analyze")," | Easy | Linked List |\n| 242 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/valid-anagram/"}),"Valid Anagram")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/242.Valid_Anagram.md"}),"Analyze")," | Easy | Sort, Hash Table |\n| 257 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/binary-tree-paths/"}),"Binary Tree Paths")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/257.Binary_Tree_Paths.md"}),"Analyze")," | Easy | Tree, Depth-first Search |\n| 279 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/perfect-squares/"}),"Perfect Squares")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/279.Perfect_Squares.md"}),"Analyze")," | Medium | Breadth-first Search, Math, Dynamic Programming |\n| 283 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/move-zeroes/"}),"Move Zeroes")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/283.Move_Zeroes.md"}),"Analyze")," | Easy | Array, Two Pointers |\n| 290 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/word-pattern/"}),"Word Pattern")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/290.Word_Pattern.md"}),"Analyze")," | Easy | Hash Table |\n| 328 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/odd-even-linked-list/"}),"Odd Even Linked List")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/328.Odd_Even_Linked_List.md"}),"Analyze")," | Medium | Linked List |\n| 341 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/flatten-nested-list-iterator/"}),"Flatten Nested List Iterator")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/341.Flatten_Nested_List_Iterator.md"}),"Analyze")," | Medium | Stack, Design |\n| 343 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/integer-break/"}),"Integer Break")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/343.Integer_Break.md"}),"Analyze")," | Medium | Math, Dynamic Programming |\n| 344 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/reverse-string/"}),"Reverse String")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/344.Reverse_String.md"}),"Analyze")," | Easy | Two Pointers, String |\n| 347 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/top-k-frequent-elements/"}),"Top K Frequent Elements")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/347.Top_K_Frequent_Elements.md"}),"Analyze")," | Medium | Heap, Hash Table |\n| 349 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/intersection-of-two-arrays/"}),"Intersection of Two Arrays")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/349.Intersection_of_Two_Arrays.md"}),"Analyze")," | Easy | Sort, Hash Table, Two Pointers, Binary Search |\n| 350 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/intersection-of-two-arrays-ii/"}),"Intersection of Two Arrays II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/350.Intersection_of_Two_Arrays_II.md"}),"Analyze")," | Easy | Sort, Hash Table, Two Pointers, Binary Search |\n| 401 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/binary-watch/"}),"Binary Watch")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/401.Binary_Watch.md"}),"Analyze")," | Easy | Bit Manipulation, Backtracking |\n| 404 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/sum-of-left-leaves/"}),"Sum of Left Leaves")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/404.Sum_of_Left_Leaves.md"}),"Analyze")," | Easy | Tree |\n| 417 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/pacific-atlantic-water-flow/"}),"Pacific Atlantic Water Flow")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/417.Pacific_Atlantic_Water_Flow.md"}),"Analyze")," | Medium | Depth-first Search, Breadth-first Search |\n| 437 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/path-sum-iii/"}),"Path Sum III")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/437.Path_Sum_III.md"}),"Analyze")," | Medium | Tree |\n| 438 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/find-all-anagrams-in-a-string/"}),"Find All Anagrams in a String")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/438.Find_All_Anagrams_in_a_String.md"}),"Analyze")," | Medium | Hash Table |\n| 445 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/add-two-numbers-ii/"}),"Add Two Numbers II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/445.Add_Two_Numbers_II.md"}),"Analyze")," | Medium | Linked List |\n| 447 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/number-of-boomerangs/"}),"Number of Boomerangs")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/447.Number_of_Boomerangs.md"}),"Analyze")," | Medium | Hash Table, Math |\n| 450 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/delete-node-in-a-bst/"}),"Delete Node in a BST")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/450.Delete_Node_in_a_BST.md"}),"Analyze")," | Medium | Tree |\n| 451 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/sort-characters-by-frequency/"}),"Sort Characters By Frequency")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/451.Sort_Characters_By_Frequency.md"}),"Analyze")," | Medium | Heap, Hash Table |\n| 454 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/4sum-ii/"}),"4Sum II")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/454.4Sum_II.md"}),"Analyze")," | Medium | Hash Table, Binary Search |\n| 567 | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://leetcode.com/problems/permutation-in-string/"}),"Permutation in String")," | ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/LeetCode/567.Permutation_in_String.md"}),"Analyze")," | Medium | Two Pointers, Sliding Window |"))}c.isMDXComponent=!0},98303:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// ---- some useful fn to do with linked_list ----\n\nfunction ListNode(val) {\n  this.val = val;\n  this.next = null;\n}\n\n/**\n * create init linked list for leetcode.\n */\nvar list = (function createLinkedList(...args) {\n  const reverseArgs = args.reverse()\n  const tmplistNode = new ListNode(0)\n  let length = reverseArgs.length\n  let cur = new ListNode(reverseArgs[length - 1])\n  tmplistNode.next = cur\n  while (length-- && length >= 1) {\n    let next = new ListNode(reverseArgs[length - 1])\n    cur.next = next\n    cur = next\n  }\n\n  return tmplistNode.next\n})(1, 2, 3, 4, 5)\n\n/**\n * print the linked list\n */\nvar printList = function (list) {\n  let cur = list\n  let str = ''\n  while (cur) {\n    str += `${cur.val} -> `;\n    cur = cur.next\n    cur === null && (str += 'null')\n  }\n  console.log(str)\n}\n")))}c.isMDXComponent=!0},99406:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/** remind to clock */\n(function remindClock (arr) {\n  let print = ''\n  for (let i = 1; i < 21; i++) {\n    if (arr.indexOf(i) === -1) {\n      print += `@${i} `\n    }\n  }\n\n  if (print === '') return '齐了'\n  return `${print}记得打卡`\n})([])\n")))}c.isMDXComponent=!0},62750:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// ---- some useful fn to do with linked_list ----\n\n/**\n * create tree node through tree array\n * this way supports three level tree temperaryly\n * becalse most test case in leetcode is less than 3 level.\n * input: [3, 9, 20, 6, null, 15, 7]\n * output:\n         3\n        / \\\n       9  20\n     /   /  \\\n    6   15   7\n */\nfunction createTree(treeArr) {\n  function TreeNode(val) {\n    this.val = val\n    this.left = this.right = null\n  }\n  const cacheObj = {}\n  for (let i = 0; i < treeArr.length; i++) {\n    cacheObj[`tree${i}`] = typeof treeArr[i] === 'number' && new TreeNode(treeArr[i])\n  }\n\n  for (let i = 0; i < treeArr.length; i++) {\n    cacheObj[`tree${2 * i + 1}`] && (cacheObj[`tree${i}`].left = cacheObj[`tree${2 * i + 1}`])\n    cacheObj[`tree${2 * i + 2}`] && (cacheObj[`tree${i}`].right = cacheObj[`tree${2 * i + 2}`])\n  }\n\n  return cacheObj['tree0']\n}\n")))}c.isMDXComponent=!0},84944:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"商家端模块职责"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"创建店铺: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.pinduoduo.com/"}),"官网")," -> 商家入驻",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"目前 BApp + 微信的入驻率不容小觑。"))),(0,i.kt)("li",{parentName:"ul"},"模块职责",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"发货管理"),": 处理日常发货、退换货等服务。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"订单查询"),(0,i.kt)("li",{parentName:"ul"},"发货中心",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"急速发货"))),(0,i.kt)("li",{parentName:"ul"},"物流工具"),(0,i.kt)("li",{parentName:"ul"},"物流概况"),(0,i.kt)("li",{parentName:"ul"},"包裹中心"),(0,i.kt)("li",{parentName:"ul"},"电子面单"),(0,i.kt)("li",{parentName:"ul"},"打单工具"),(0,i.kt)("li",{parentName:"ul"},"订单开票",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"正品心智",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"与商家评分打通"))))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"售后管理"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"售后工作台"),(0,i.kt)("li",{parentName:"ul"},"工单管理"),(0,i.kt)("li",{parentName:"ul"},"商家举证"),(0,i.kt)("li",{parentName:"ul"},"小额打款"),(0,i.kt)("li",{parentName:"ul"},"退货包运费"),(0,i.kt)("li",{parentName:"ul"},"急速退款"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"商品管理"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"发布新商品",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"店铺装修"))),(0,i.kt)("li",{parentName:"ul"},"商品列表"),(0,i.kt)("li",{parentName:"ul"},"商品体验"),(0,i.kt)("li",{parentName:"ul"},"商品素材"),(0,i.kt)("li",{parentName:"ul"},"评价管理"),(0,i.kt)("li",{parentName:"ul"},"商品工具"),(0,i.kt)("li",{parentName:"ul"},"供货管理",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"批发供货",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"分销"))),(0,i.kt)("li",{parentName:"ul"},"快团团供货"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"采购管理"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"批发采购"),(0,i.kt)("li",{parentName:"ul"},"采购订单"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"店铺营销"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"营销活动"),(0,i.kt)("li",{parentName:"ul"},"竞价活动",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'取倒数第二位价格: 平台与商家的博弈, 商家提前知道竞价规则。这时商家会产生错觉, "我的价格是最低的, 我能盈利比我竞价的价格多一些的利润", 所以在竞价的时候会更接近成本的竞价。case: 多多果园。'))),(0,i.kt)("li",{parentName:"ul"},"平台招标"),(0,i.kt)("li",{parentName:"ul"},"营销工具",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"转化提升",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"优惠券"),(0,i.kt)("li",{parentName:"ul"},"限时限量"),(0,i.kt)("li",{parentName:"ul"},"秒杀"))),(0,i.kt)("li",{parentName:"ul"},"收藏、满返(部分代替购物车)"),(0,i.kt)("li",{parentName:"ul"},"粉丝运营",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"关注(直播等)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"3 ~ 5 块一个粉丝"))),(0,i.kt)("li",{parentName:"ul"},"群聊(红包群)"),(0,i.kt)("li",{parentName:"ul"},"店铺设砍价"))))),(0,i.kt)("li",{parentName:"ul"},"短信营销"),(0,i.kt)("li",{parentName:"ul"},"店铺装修"),(0,i.kt)("li",{parentName:"ul"},"店铺页设计"),(0,i.kt)("li",{parentName:"ul"},"多多直播"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"数据中心")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"账户资金")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"多多客服")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"多多进宝")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"推广中心")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"店铺管理")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"商家服务市场")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"多多国际"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"消费者不匹配 —> 海淘价廉物品"),(0,i.kt)("li",{parentName:"ul"},"不敢买 —> 溯源系统、代报关"),(0,i.kt)("li",{parentName:"ul"},"不了解品牌 —> 种草"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"装修"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"店铺装修"),(0,i.kt)("li",{parentName:"ul"},"商详装修"),(0,i.kt)("li",{parentName:"ul"},"品牌装修"),(0,i.kt)("li",{parentName:"ul"},"小程序装修")))))),(0,i.kt)("h3",null,"运营引流"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"运营",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"视觉运营",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"店铺视觉",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"品牌型"),(0,i.kt)("li",{parentName:"ul"},"价格型"))),(0,i.kt)("li",{parentName:"ul"},"店铺指标",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"店铺转换率"),(0,i.kt)("li",{parentName:"ul"},"热销产品排行"))),(0,i.kt)("li",{parentName:"ul"},"首页关注指标",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"访问量、访客量"),(0,i.kt)("li",{parentName:"ul"},"跳失率、出店率"),(0,i.kt)("li",{parentName:"ul"},"首页到商品详情页、分类页点击率"))))),(0,i.kt)("li",{parentName:"ul"},"口碑运营"),(0,i.kt)("li",{parentName:"ul"},"客服运营"))),(0,i.kt)("li",{parentName:"ul"},"引流推广",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"拼多多",(0,i.kt)("inlineCode",{parentName:"li"},"流量来源"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"社交裂变",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"拼单卡、砍价免费拿、多多果园等引流渠道"))),(0,i.kt)("li",{parentName:"ul"},"广告",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"CPT(Cost Per Time, 按时长付费)、CPM(Cost Per Mile, 每千人成本)、CPC(Cost Per Click, 按单次点击扣费)、明星店铺推广、数据银行推广、品类关键词库、短信营销等引流渠道"))),(0,i.kt)("li",{parentName:"ul"},"App 展示",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"首页开屏、首页 Banner、类目类 Banner、个人中心 Banner、新人专区、App 推送消息等引流渠道"))),(0,i.kt)("li",{parentName:"ul"},"搜索"),(0,i.kt)("li",{parentName:"ul"},"活动",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"限时秒杀、品牌清仓、名片折扣、爱逛街、食品超市、时尚穿搭、新品推荐、微信公众号推文、微信公众消息和领券中心等引流渠道"))),(0,i.kt)("li",{parentName:"ul"},"其它渠道",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"多多进宝、微信群等"))))),(0,i.kt)("li",{parentName:"ul"},"站内免费引流",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"运用标签精准引流",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"千人前面推荐算法 => ",(0,i.kt)("inlineCode",{parentName:"li"},"人群标签匹配商品标签"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"人群标签",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"用户行为"),(0,i.kt)("li",{parentName:"ul"},"个人属性"),(0,i.kt)("li",{parentName:"ul"},"用户喜好"))),(0,i.kt)("li",{parentName:"ul"},"商品标签",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"类目标签"),(0,i.kt)("li",{parentName:"ul"},"价格标签"),(0,i.kt)("li",{parentName:"ul"},"属性标签"))))))))),(0,i.kt)("li",{parentName:"ul"},"站外免费引流"),(0,i.kt)("li",{parentName:"ul"},"付费引流",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/77b7424d86a601b6c2cdbe02884be330.jpg",alt:null}))),(0,i.kt)("li",{parentName:"ul"},"搜索推广"),(0,i.kt)("li",{parentName:"ul"},"场景展示推广",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"排名公式: 综合排名 = 商品质量分 * 广告单击出价"))),(0,i.kt)("li",{parentName:"ul"},"其他推广工具"))),(0,i.kt)("li",{parentName:"ul"},"活动引流",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"活动报名"),(0,i.kt)("li",{parentName:"ul"},"营销活动",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"品牌特卖、电器城、爱逛街、9 块 9 特卖、限时秒杀"))),(0,i.kt)("li",{parentName:"ul"},"店铺活动",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"限量促销、拼单返现、限时免单"))),(0,i.kt)("li",{parentName:"ul"},"竞价活动",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"竞价活动"),(0,i.kt)("li",{parentName:"ul"},"品质招标"))),(0,i.kt)("li",{parentName:"ul"},"社交活动",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"助力享免单"),(0,i.kt)("li",{parentName:"ul"},"多多果园"))))),(0,i.kt)("li",{parentName:"ul"},"推手引流",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"多多进宝",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"综合流量 GMV = 多多进宝 + 自然搜索 + 场景推广")))))))))}c.isMDXComponent=!0},20089:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"方法论"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"short name"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"full name"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"mean"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"OKR"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Objectives and Key Results"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"目标和关键结果")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"KPI"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Key Performance Indication"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"关键业绩指标")))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"OKR: 方法论")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"KPI: ### 产品方法论")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"职能范围"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"终端: BAPP、Windows 客户端、MMS 工作台、Mac 客户端、商家版小程序、多多公众号、商家服务号"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"目标"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"DAU"),(0,i.kt)("li",{parentName:"ul"},"动销商家数",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"动销率: 店铺有销售的商品的数量 / 全店铺的商品数量比。"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"主线"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"以小程序为基石的私域流量",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"提升 DAU"))),(0,i.kt)("li",{parentName:"ul"},"商家成长",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"通过商家成长, 中小商家成长为大商家"))),(0,i.kt)("li",{parentName:"ul"},"供应链",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"武汉、南昌")))))))}c.isMDXComponent=!0},68032:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"short name"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"short name"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"full name"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"mean"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"note"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"SKU"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Stock Keeping Unit"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"库存单位"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"SKU 是用来定价和管理库存的, 7Plus 有很多颜色, 很多配置, 每个颜色和配置的组合都会形成新的产品")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"SPU"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Standard Product Unit"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"标准化产品单元"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"属性值、特性相同的商品就可以成为一个 SPU")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"GMV"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Gross Merchandise Volume"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"商品交易总额"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"DAU"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Daily Active User"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"日活跃用户"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"MAU"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Month Active User"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"月活跃用户"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"ROI"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Return On Investment"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"投资回报率"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"DSR"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Details Seller Rating"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"卖家服务评级系统"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}))))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"GMV"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"概念: 作为电商平台, GMV (成交总额)是衡量平台竞争力(市场占有率)的核心指标。"),(0,i.kt)("li",{parentName:"ul"},"公式: GMV 为",(0,i.kt)("inlineCode",{parentName:"li"},"已付款订单"),"和",(0,i.kt)("inlineCode",{parentName:"li"},"未付款订单"),"两者之和。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"GMV = 有消费的顾客总数 * 平均客单价"),(0,i.kt)("li",{parentName:"ul"},"有消费的顾客总数 = 点击 UV * 访购率"),(0,i.kt)("li",{parentName:"ul"},"GMV = 点击 UV ",(0,i.kt)("em",{parentName:"li"}," 访购率 ")," 平均客单价"))),(0,i.kt)("li",{parentName:"ul"},"指标: ",(0,i.kt)("inlineCode",{parentName:"li"},"流量指标"),"(用户数等)、",(0,i.kt)("inlineCode",{parentName:"li"},"转化指标"),"(首单率、复购率等)。"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何提升 DAU"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"用户群细分"),(0,i.kt)("li",{parentName:"ul"},"描绘对应用户群的行为图谱"),(0,i.kt)("li",{parentName:"ul"},"在合适行为路径中进行引导"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"客单价"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"客单价（per customer transaction）是指商场（超市）每一个顾客平均购买商品的金额, 也即是平均交易金额客单价的计算。"),(0,i.kt)("li",{parentName:"ul"},"公式：",(0,i.kt)("inlineCode",{parentName:"li"},"客单价 = 销售额 / 成交顾客数"))))),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"http://www.woshipm.com/pd/766707.html"}),"电商平台如何提升 GMV：产品篇")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"http://www.woshipm.com/operate/4000572.html"}),"从 GMV 出发，看目标拆分与公式拆解")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"http://www.woshipm.com/operate/2951693.html"}),"拆解拼多多裂变活动：7 天新增 1700 万 DAU")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"http://www.woshipm.com/operate/2739697.html"}),"提升 DAU 的不同思路和策略")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"http://www.woshipm.com/operate/4091166.html"}),"LTV 及 DAU 的计算、预估方法"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"开店管理")),(0,i.kt)("h3",null,"title"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"short name"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"full name"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"mean"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"BD"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Business Development"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"商务扩展")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"BI"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"Business Intelligence"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"数据分析")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"PR"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"public relationship"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"公关关系")))),(0,i.kt)("h3",null,"商家端"),(0,i.kt)("p",null,"MMS: Merchant Management System"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"ToB",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"提升 B 端商家在平台中经营 (BDAU), 让卖家赚钱 (BGMV)"))),(0,i.kt)("li",{parentName:"ul"},"ToC",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"提升 C 端 (CDAU)、(CGMV)"))),(0,i.kt)("li",{parentName:"ul"},"ToP",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"平台调性/平台粘性/平台竞争力(进攻、防守)")))),(0,i.kt)("p",null,"思考题: 提升商品种类的 KPI 背后价值是什么?"))}c.isMDXComponent=!0},36179:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{align:"center"},(0,i.kt)("a",{href:"http://muyunyun.cn/blog"},(0,i.kt)("img",{src:"http://with.muyunyun.cn/ec330b8ac2175c828be41f446f9f9619.jpg"}))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://raw.githubusercontent.com/MuYunyun/blog/traffic/traffic-blog/views.svg",alt:"views"})),"\n",(0,i.kt)("img",u({parentName:"p"},{src:"https://raw.githubusercontent.com/MuYunyun/blog/traffic/traffic-blog/views_per_week.svg",alt:"views"})),"\n",(0,i.kt)("img",u({parentName:"p"},{src:"https://raw.githubusercontent.com/MuYunyun/blog/traffic/traffic-blog/clones.svg",alt:"clones"})),"\n",(0,i.kt)("img",u({parentName:"p"},{src:"https://raw.githubusercontent.com/MuYunyun/blog/traffic/traffic-blog/clones_per_week.svg",alt:"clones"}))),(0,i.kt)("p",null,"This is my persinal blog created with ",(0,i.kt)("a",{href:"https://github.com/MuYunyun/create-react-doc",target:"_blank"},"create-react-doc")," where to write and record some thought daily. If you like it, welcome watch or star✨."),(0,i.kt)("p",null,"It's very thankful to point any wrong place from these articles ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/issues/new"}),"there")," as well. The Articles licensed under ",(0,i.kt)("a",u({parentName:"p"},{href:"https://creativecommons.org/licenses/by/4.0/deed.en"}),"Creative Commons Attribution 4.0 International License")," Agreement."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#data-structure"}),"Data Structure")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#design-pattern"}),"Design Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#react-series"}),"React Series"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#deep-into-react"}),"Deep Into React")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#component-design"}),"Component Design")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#react-stack"}),"React Stack")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#build-react-from-scratch"}),"Build React from scratch")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#modern-testing"}),"Modern Testing")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#typescript"}),"TypeScript")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#fe-cloud"}),"FE Cloud"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#javascript"}),"JavaScript")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#css"}),"CSS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#nodejs"}),"Node.js")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#fe-cloud-1"}),"FE CLOUD")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#project-framework"}),"Project Framework")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#raspberrypi"}),"RaspberryPi"))),(0,i.kt)("h3",null,"Data Structure"),(0,i.kt)("p",null,"This section we will start tralvel in the world of data strcture together! There is no doubt the travel is so interestring that you'll enjoy it too! Before your travel of data structure, I want to tell two points it's valueble:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Interest and Insist."),(0,i.kt)("li",{parentName:"ol"},"Thought is more important than action.")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/main/LeetCode/README.md"}),"Travel Of LeetCode"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/stack.md"}),"Stack")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/queue.md"}),"Queue")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/list.md"}),"List")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/set.md"}),"Set")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/.md"}),"Dictionary")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/hash_table.md"}),"Hash Table")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/binary_tree.md"}),"Binary Tree")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/graph.md"}),"Graph"))),(0,i.kt)("details",null,(0,i.kt)("summary",null,"algorithm"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/complexy.md"}),"Algorithm And Complexy")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/recursive.md"}),"Recursive")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/binary_search.md"}),"Binary Search")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/greedy.md"}),"Greedy Algorithm")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/dynamic_programming.md"}),"Dynamic Programming"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Sort Algorithm")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/sort/selection_sort.md"}),"Selection Sort")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/sort/quick_sort.md"}),"Quick Sort")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/sort/merge_sort.md"}),"Merge Sort")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/sort/heap_sort.md"}),"Heap Sort"))),(0,i.kt)("p",null,"算法是一种思想! 以排序算法为例, 最常见的是在数组中使用排序算法, 但是相同的思想也能用于数组对象, 甚至链表中, 比如链表中实现排序的两道题。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/LeetCode/147.Insertion_Sort_List/README.md"}),"147.Insertion Sort List"),": insert sort in list;"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/LeetCode/148.Sort_List/README.md"}),"148.Sort List"),": merge sort in list;"))),(0,i.kt)("h3",null,"Design Pattern"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.md"}),"Singleton Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.md"}),"Stralegy Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.md"}),"Proxy Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F.md"}),"Iterator Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F.md"}),"Publish/Subscribe Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F.md"}),"Command Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F.md"}),"Composite Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F.md"}),"Template Method Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F.md"}),"Flyweight Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F.md"}),"Chain of Responsibility Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F.md"}),"Mediator Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F.md"}),"Decorator Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F.md"}),"State Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E8%80%85%E6%A8%A1%E5%BC%8F.md"}),"Adapter Pattern")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.md"}),"Observer Pattern"))),(0,i.kt)("h3",null,"React Series"),(0,i.kt)("p",null,"This section will introduce the world of React progressively. It'll tell the principle of React, how to design React Component gracefully and how to build a simple React from scratch."),(0,i.kt)("h4",null,"Deep Into React"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/React16.x%E7%89%B9%E6%80%A7%E5%89%AA%E8%BE%91.md"}),"React16.x 特性剪辑")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Fiber%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.md"}),"Fiber 数据结构")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E6%B7%B1%E5%85%A5Fiber%E6%9E%B6%E6%9E%84.md"}),"深入 Fiber 架构")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E6%B5%81%E7%95%85%E6%80%A7.md"}),"流畅性")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/schedule.md"}),"Schedule")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84requestIdleCallback.md"}),"你不知道的 requestIdleCallback")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/suspense%E8%A7%A3%E5%86%B3%E4%BA%86%E4%BB%80%E4%B9%88.md"}),"React Suspense 解决了什么")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/React_Hooks%E6%B7%B1%E5%85%A5%E7%B3%BB%E5%88%97.md"}),"React Hooks 深入系列")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/React_Hooks%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.md"}),"React Hooks 设计模式")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/React%E6%9A%97%E5%99%A8%E7%99%BE%E8%A7%A3.md"}),"React 暗器百解"))),(0,i.kt)("h4",null,"Component Design"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86%E5%8F%97%E6%8E%A7%E4%B8%8E%E9%9D%9E%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6.md"}),"重新认识受控与非受控组件"))),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/build_mobile_first_animation.md"}),"Build Mobile First Animation In React"))),(0,i.kt)("details",null,(0,i.kt)("summary",null,"More"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Button.md"}),"Button")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Icon.md"}),"Icon")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Menu.md"}),"Menu")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Keyboard.md"}),"Keyboard")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/swipe.md"}),"Carousel")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Tabs.md"}),"Tabs")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Affix.md"}),"Affix")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/AddressPicker.md"}),"AddressPicker")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/CheckBox.md"}),"CheckBox")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Form.md"}),"Form"),", ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/oneForm/issues/1"}),"oneForm")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/SearchBar.md"}),"SearchBar")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/modal.md"}),"Modal")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/TextArea.md"}),"TextArea")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/%E4%B8%BB%E9%A2%98%E8%89%B2%E6%9B%BF%E6%8D%A2%E6%96%B9%E6%A1%88.md"}),"主题色替换方案")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%BB%84%E4%BB%B6%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8C%97.md"}),"移动端测试指北"))),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/Component_Design/%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5.md"}),"组件设计实践")))),(0,i.kt)("h4",null,"React Stack"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF%E6%A0%88/Redux%E4%B8%8EMobx%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF.md"}),"Redux 与 Mobx 适用场景")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/FeCloud/issues/11"}),"MVVM 框架解析之双向绑定")," ",(0,i.kt)("a",{href:"https://github.com/MuYunyun/mvvm",target:"_blank"},(0,i.kt)("sub",null,"(相关项目)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/issues/14"}),"探索从 MVC 到 MVVM + Flux 架构模式的转变")," ",(0,i.kt)("a",{href:"https://github.com/MuYunyun/stateManage",target:"_blank"},(0,i.kt)("sub",null,"(相关项目)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/issues/15"}),"redux middleware 源码分析")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E5%9C%A8react%E4%BD%BF%E7%94%A8immutable%E6%95%B0%E6%8D%AE%E7%9A%84%E4%BC%98%E5%8A%BF.md"}),"在 React 使用 immutable 数据的优势")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/router%E7%9A%84%E7%AE%80%E6%98%93%E5%AE%9E%E7%8E%B0.md"}),"路由的简易实现")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/issues/4"}),"React 在服务端渲染的实现")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E5%AE%9A%E5%88%B6%E8%87%AA%E5%B7%B1%E7%9A%84react-script.md"}),"定制自己的 react-script")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/issues/3"}),"使用 React 全家桶搭建一个后台管理系统"),(0,i.kt)("a",{href:"https://github.com/MuYunyun/reactSPA",target:"_blank"},(0,i.kt)("sub",null,"(相关项目)")))),(0,i.kt)("h4",null,"Build React from scratch"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/0.%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87.md"}),"前置准备")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/1.JSX%E5%92%8C%E8%99%9A%E6%8B%9FDOM.md"}),"JSX 和 Virtual DOM")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/2.2.%E7%BB%84%E4%BB%B6%E5%92%8Cstate%E4%B8%8Eprops.md"}),"组件 和 state|props")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/3.%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.md"}),"生命周期")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/4.diff%E7%AE%97%E6%B3%95.md"}),"diff 算法")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/5.setState.md"}),"setState 优化")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/6.ref.md"}),"ref 的实现")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/7.PureComponent.md"}),"PureComponent 的实现")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/8.HOC%E6%8E%A2%E7%B4%A2.md"}),"HOC 探索")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/9.onChange%E4%BA%8B%E4%BB%B6%E4%BB%A5%E5%8F%8A%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6.md"}),"onChange 事件以及受控组件"))),(0,i.kt)("h4",null,"Modern Testing"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E6%B5%8B%E8%AF%95/React%E7%8E%B0%E4%BB%A3%E5%8C%96%E6%B5%8B%E8%AF%95.md"}),"React 现代化测试")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/React/%E6%B5%8B%E8%AF%95/Jest%E4%B8%8EReactTestingLibrary.md"}),"Jest 与 react-testing-Library"))),(0,i.kt)("h3",null,"TypeScript"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/TypeScript/README.md"}),"TypeScript 基础篇")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/TypeScript/Types.md"}),"TypeScript 中的类型")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/TypeScript/More_On_Functions.md"}),"TypeScript 中的函数使用")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/TypeScript/Utility_Types.md"}),"TypeScript 中的工具类型")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/TypeScript/Types_vs_Interfaces.md"}),"Types vs Interfaces")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/TypeScript/extends.md"}),"TypeScript extends 精读与实践"))),(0,i.kt)("h3",null,"FE Cloud"),(0,i.kt)("p",null,"This section will talk about colorful frontend world."),(0,i.kt)("h4",null,"JavaScript"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/issues/2"}),"你不知道的 JavaScript")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/basis/%E4%BA%8C%E5%88%B7%E9%AB%98%E7%A8%8B.md"}),"红皮书里的细节")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/basis/%E6%8E%A2%E5%AF%BBJavaScript%E7%B2%BE%E5%BA%A6%E9%97%AE%E9%A2%98.md"}),"探寻 JavaScript 精度问题")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8.md"}),"函数式编程入门")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/%E8%A3%85%E9%A5%B0%E5%99%A8.md"}),"Decorator")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/Promise.md"}),"Promise"),(0,i.kt)("a",{href:"https://github.com/MuYunyun/repromise",target:"_blank"},(0,i.kt)("sub",null,"(相关项目)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/Generator.md"}),"Generator")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/Async.md"}),"Async")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/%E6%A8%A1%E5%9D%97.md"}),"CommonJS 模块与 ES6 模块间的差异")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/%E7%BB%A7%E6%89%BF.md"}),"ES6 继承与 ES5 继承的差异")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6.md"}),"扩展运算符")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0.md"}),"箭头函数")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/Reflect.md"}),"Reflect"))),(0,i.kt)("h4",null,"CSS"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/css/INHERITED_AND_NON-INHERITED.md"}),"INHERITED AND NON-INHERITED"))),(0,i.kt)("details",null,(0,i.kt)("summary",null,"more"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/basis/%E6%B0%B4%E5%B9%B3%E5%B8%83%E5%B1%80%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.md"}),"水平布局解决方案")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/css/%E8%81%8A%E8%81%8ABFC.md"}),"聊聊 BFC")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/css/css%E5%B0%8F%E4%B9%A6/%E8%BF%87%E6%B8%A1%E4%B8%8E%E5%8A%A8%E7%94%BB.md"}),"过渡与动画")))),(0,i.kt)("h4",null,"Node.js"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/blog/BasicSkill/node/implement_express.js"}),"简版 express.js 的实现")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://muyunyun.cn/blog/#/BasicSkill/node/implement_koa.js"}),"简版 koa.js 的实现")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/issues/7"}),"Node.js 异步异闻录"),(0,i.kt)("a",{href:"https://github.com/MuYunyun/demos-of-node.js",target:"_blank"},(0,i.kt)("sub",null,"(相关项目)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/issues/6"}),"用 Node.js 把玩一番 Alfred Workflow")," ",(0,i.kt)("a",{href:"https://github.com/MuYunyun/commonSearch",target:"_blank"},(0,i.kt)("sub",null,"(相关项目)")))),(0,i.kt)("h4",null,"FE CLOUD"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/FeCloud/seo_in_spa_site.md"}),"SEO 在 SPA 站点中的实践")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/FeCloud/tc39.md"}),"Talk about TC39")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/http/cross-domain.md"}),"跨域二三事")," ",(0,i.kt)("a",{href:"https://github.com/MuYunyun/cross-domain",target:"_blank"},(0,i.kt)("sub",null,"(相关项目)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/http/http.md"}),"HTTP 小册")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/basis/HTML5.md"}),"HTML5")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/FeCloud/%E6%8E%A2%E5%AF%BBwebpack%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6.md"}),"探寻 webpack 插件机制")," ",(0,i.kt)("a",{href:"https://github.com/MuYunyun/analyze-webpack-plugin",target:"_blank"},(0,i.kt)("sub",null,"(相关项目)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/FeCloud/babel%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6.md"}),"Babel 执行机制")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/tree/main/FeCloud/yarn"}),"npm 与 yarn")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/basis/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%9C%BA%E6%99%AF%E7%9F%A5%E8%AF%86.md"}),"移动端场景知识")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/FeCloud/issues/12"}),"原生 JS 实现一个瀑布流插件")," ",(0,i.kt)("a",{href:"https://github.com/MuYunyun/waterfall",target:"_blank"},(0,i.kt)("sub",null,"(相关项目)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/issues/9"}),"实现一个自定义工具类库")," ",(0,i.kt)("a",{href:"https://github.com/MuYunyun/diana",target:"_blank"},(0,i.kt)("sub",null,"(相关项目)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/issues/8"}),"走近 Python"))),(0,i.kt)("h4",null,"Project Framework"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/project_framework/CAS%E7%99%BB%E5%85%A5%E6%B5%81%E7%A8%8B.md"}),"CAS 登入流程")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/project_framework/RPC%E5%9C%A8%E7%82%B9%E6%88%91%E8%BE%BE%E7%BD%91%E5%85%B3%E7%9A%84%E5%AE%9E%E8%B7%B5%E4%B8%80.md"}),"RPC 在网关项目中的实践")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/BasicSkill/project_framework/%E8%A7%A3%E8%AF%BBIoC%E6%A1%86%E6%9E%B6InversifyJS.md"}),"解读 IoC 框架 —— InversifyJS"))),(0,i.kt)("h3",null,"RaspberryPi"),(0,i.kt)("p",null,"Just do it for fun! You will unlock server, linux, nginx skills from this Raspberry Pi travel."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Thanks for the ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/zhaoolee/pi"}),"pi")," project specially.")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://muyunyun.cn/blog/rahvuwkb"}),"树莓派简介&烧录系统")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://muyunyun.cn/blog/fes9wogn"}),"内网穿透")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://muyunyun.cn/blog/r4zxdn6n"}),"基于树莓派搭建家庭服务器")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://muyunyun.cn/blog/2a97pq3a"}),"给树莓派安装 Docker 环境")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://muyunyun.cn/blog/wns8hpzc"}),"给树莓派部署 RSSHub")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://muyunyun.cn/blog/mx5pvgl1"}),"HTTPS 协议配置")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://muyunyun.cn/blog/n45adwng"}),"树莓派部署 code-server"))))}c.isMDXComponent=!0},31589:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0bb19aa47dec25151a4c7a56524e5d82.jpg-400",alt:null}))),(0,i.kt)("h3",null,"树莓派可以做什么"),(0,i.kt)("p",null,"对于开源极客爱好者，可以把树莓派改造成，家庭影院、服务器、无线路由器、BT 下载服务器、FTP 服务器、智能小车、AI 人工智能、智能家居、3D 打印等等。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/166019428"}),"树莓派到底可以用来做什么"),(0,i.kt)("ul",u({parentName:"li"},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.v2fy.com/p/2021-07-04-openwrt-4b-1625383754000/"}),"树莓派软路由")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.lxx1.com/4139"}),"科技爱好者博客"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"(Todo)",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.lxx1.com/3220"}),"树莓派+Homebriage+米家智能产品搭建Siri智能家居")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.lxx1.com/3294"}),"树莓派安装 OpenWrt 打造超级路由器")),(0,i.kt)("li",{parentName:"ul"},"魔镜"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.lxx1.com/4181"}),"树莓派挂载 U 盘或者移动硬盘")))),(0,i.kt)("li",{parentName:"ul"},"社区",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://www.shumeipaiba.com/"}),"树莓派吧")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://shumeipai.nxez.com/"}),"树莓派实验室"))))),(0,i.kt)("h3",null,"树莓派操作系统"),(0,i.kt)("p",null,"树莓派主板是没有自带系统的，就相当于一个 PC 电脑主板，系统需要自己安装在内存卡里，插上卡才能启动系统。"),(0,i.kt)("p",null,"树莓派官方有自己系统提供: Raspbian 基于 Debian 生态环境优化的，更适合在树莓派上。更多的系统支持的有:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Kali Linux"),(0,i.kt)("li",{parentName:"ul"},"Ubuntu mate"),(0,i.kt)("li",{parentName:"ul"},"Volumio"),(0,i.kt)("li",{parentName:"ul"},"Retropie"),(0,i.kt)("li",{parentName:"ul"},"Lakka"),(0,i.kt)("li",{parentName:"ul"},"recalbox"),(0,i.kt)("li",{parentName:"ul"},"Win 10LOT"),(0,i.kt)("li",{parentName:"ul"},"...")),(0,i.kt)("h3",null,"前置准备"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"SD 卡格式化，",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.sdcard.org/downloads/formatter/"}),"SD Card Formatter"),"。"),(0,i.kt)("li",{parentName:"ol"},"下载",(0,i.kt)("a",u({parentName:"li"},{href:"(https://ubuntu.com/download/raspberry-pi/thank-you?version=20.04.3&architecture=server-arm64+raspi)"}),"镜像"),"。"),(0,i.kt)("li",{parentName:"ol"},"使用 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.balena.io/etcher/"}),"balenaEtcher")," 将镜像烧录到 SD 卡。")),(0,i.kt)("h3",null,"如何查找 IP 地址"),(0,i.kt)("p",null,"笔者最后实验成功且较为方便的方式如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"步骤一: 通过网线链接树莓派与路由器。"),(0,i.kt)("li",{parentName:"ul"},"步骤二: 登录路由器后台，查看安装了 ubuntu 的树莓派被分配的 ip。")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/f32ea27b99f27a350916fb14c3d1bace.jpg",alt:null}))),(0,i.kt)("h3",null,"使用 SSH 登录树莓派"),(0,i.kt)("p",null,"在查找到路由器分配给树莓派的 IP 地址后，我们可以在 Mac 上使用 SSH 命令登入树莓派服务器:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"ssh ubuntu@192.168.1.3\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"SSH 与 VNC 的区别是?",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"SSH(Secure Shell): 安全外壳协议，是一种加密的网络传输协议。"),(0,i.kt)("li",{parentName:"ul"},"VNC: 虚拟网络计算。是一种图形桌面「共享」应用程序，它使用远程帧缓冲协议来远程控制另一台计算机。")))),(0,i.kt)("h3",null,"树莓派 ubuntu 系统"),(0,i.kt)("p",null,"首次登入树莓派 ubuntu 系统需要修改密码，其初始账号与密码都为 ubuntu。"))}c.isMDXComponent=!0},7234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E5%8E%9F%E7%90%86%E6%9E%B6%E6%9E%84"}),"内网穿透原理架构")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BA%91%E4%B8%BB%E6%9C%BA-nginx-%E6%B7%BB%E5%8A%A0-http-%E6%9C%8D%E5%8A%A1"}),"服务端(云主机) nginx 添加 Http 服务")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#frp"}),"frp"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BA%91%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE"}),"服务端(云主机)配置")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%9C%B0%E4%BD%BF%E7%94%A8-pm2-%E8%BF%90%E8%A1%8C-frps"}),"进一步地使用 pm2 运行 frps")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A0%91%E8%8E%93%E6%B4%BE%E9%85%8D%E7%BD%AE"}),"客户端(树莓派)配置")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E6%B7%BB%E5%8A%A0-ssh-%E6%9C%8D%E5%8A%A1"}),"添加 SSH 服务"))),(0,i.kt)("h3",null,"内网穿透原理架构"),(0,i.kt)("p",null,"本文中，我们使用了",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/fatedier/frp"}),"frp"),"，frp 是一个专注于内网穿透的高性能的反向代理应用。"),(0,i.kt)("p",null,"todo: 补充流程图。"),(0,i.kt)("h3",null,"服务端(云主机) nginx 添加 Http 服务"),(0,i.kt)("p",null,"首先将域名控制台(本文中使用 frp.muyunyun.cn 域名作为演示)解析到服务器 ip。"),(0,i.kt)("p",null,"为了方面后续的调试运行，需放开以下几个服务器端口。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"80 端口:（Nginx 接收 http 请求用）"),(0,i.kt)("li",{parentName:"ul"},"6000 端口:（转发映射 SSH 服务用）"),(0,i.kt)("li",{parentName:"ul"},"8080 端口:（转发映射 http 服务用）"),(0,i.kt)("li",{parentName:"ul"},"7000 端口:（服务器端 frps 运行端口）")),(0,i.kt)("p",null,"以配置域名 frp.muyunyun.cn 为例，，转发对 ",(0,i.kt)("inlineCode",{parentName:"p"},"frp.muyunyun.cn")," 域名请求到 ",(0,i.kt)("inlineCode",{parentName:"p"},"8080 端口"),"。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://muyunyun.cn/blog/yq9jpwrw"}),"nginx 常用命令"),"安装 Nginx。")),(0,i.kt)("p",null,"新建配置文件:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"touch /etc/nginx/conf.d/frp.muyunyun.cn.conf\n")),(0,i.kt)("p",null,"在配置文件中添加 http 服务相关内容:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'server {\n    server_name      frp.muyunyun.cn;\n    listen           80;\n    listen           [::]:80;\n    root             /usr/share/nginx/html/frp.muyunyun.cn;\n\n    location / {\n        # 这里先预留 8080 端口，在后文章节[基于树莓派搭建家庭服务器](https://muyunyun.cn/blog/r4zxdn6n) 中会在 8080 端口上启动 Web 服务。\n        proxy_pass http://127.0.0.1:8080;\n        proxy_set_header Host $host:80;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    error_page 404 /404.html;\n        location = /40x.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n        location = /50x.html {\n    }\n}\n\n# 以下配置用于 Https, 若读者后续有配置 Https 的需求时可再折回参考如下配置，参考 [HTTPS 协议配置](https://muyunyun.cn/blog/mx5pvgl1)。\nserver {\n    listen       443 ssl http2;\n    listen       [::]:443 ssl http2;\n    server_name  frp.muyunyun.cn;\n    root         /usr/share/nginx/html/frp.muyunyun.cn;\n\n    location / {\n        proxy_pass http://127.0.0.1:8080;\n        proxy_set_header Host $host:443;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    ssl_certificate "/etc/nginx/ssl/frp.muyunyun.cn/fullchain.cer";\n    ssl_certificate_key "/etc/nginx/ssl/frp.muyunyun.cn/frp.muyunyun.cn.key";\n    ssl_session_cache shared:SSL:1m;\n    ssl_session_timeout  10m;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers on;\n\n    # Load configuration files for the default server block.\n    include /etc/nginx/default.d/*.conf;\n\n    error_page 404 /404.html;\n        location = /40x.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n        location = /50x.html {\n    }\n}\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"端口使用 80 页面会提示",(0,i.kt)("inlineCode",{parentName:"p"},"网站暂时无法访问，该网站未根据工信部相关法律规则进行备案"),"(与二级域名无关，比如使用 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://www.muyunyun.cn"}),"www.muyunyun.cn")," 或者 frp.muyunyun.cn 都行)，",(0,i.kt)("a",u({parentName:"p"},{href:"https://icp-faq.dnspod.cn/why"}),"了解更多备案相关内容"),"。如果未备案，可以将它修改 80 端口为其它端口，比如 90 端口。如果后续要使用 acme.sh 申请 https 服务，还是需要用 80 端口。")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/04afbf893d08548ebd06a85488389298.jpg-400",alt:null}))),(0,i.kt)("p",null,"新建 ",(0,i.kt)("inlineCode",{parentName:"p"},"frp.muyunyun.cn")," 对应的网站文件夹与文件"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"mkdir -p /usr/share/nginx/html/frp.muyunyun.cn\ntouch /usr/share/nginx/html/frp.muyunyun.cn/index.html\n")),(0,i.kt)("p",null,"在 ",(0,i.kt)("inlineCode",{parentName:"p"},"/usr/share/nginx/html/fpr.muyunyun.cn/index.html")," 中输入"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>云随风</title>\n</head>\n<body>Test</body>\n</html>\n')),(0,i.kt)("p",null,"控制台输入 ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo systemctl restart nginx"),"。"),(0,i.kt)("p",null,"此时在浏览器访问 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://frp.muyunyun.cn"}),"http://frp.muyunyun.cn")," 可以看到目标内容:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/4373b2aaca032ed2a78fac53279532d2.jpg",alt:null}))),(0,i.kt)("h3",null,"frp"),(0,i.kt)("h4",null,"服务端(云主机)配置"),(0,i.kt)("p",null,"在云主机端执行如下命令:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/\nsudo wget https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_linux_386.tar.gz\nsudo tar zxvf frp_0.37.0_linux_386.tar.gz\n")),(0,i.kt)("p",null,"进入 ",(0,i.kt)("inlineCode",{parentName:"p"},"/opt/frp_0.37.0_linux_arm64")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/32f4ce6995482f6e086b85d2bdd06a01.jpg",alt:null}))),(0,i.kt)("p",null,"备份服务端 frps 的配置文件 frps.ini"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo cp frps.ini frps.ini_backup\n")),(0,i.kt)("p",null,"修改服务端配置文件 frps.ini，增加一行 ",(0,i.kt)("inlineCode",{parentName:"p"},"vhost_http_port = 8080"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-diff"}),"[common]\nbind_port = 7000\n+ vhost_http_port = 8080\n")),(0,i.kt)("p",null,"以上配置含义为: 服务端 frps 程序运行在 7000 端口，并将指向 8080 端口的请求转发到客户端。"),(0,i.kt)("p",null,"运行如下命令，开启 frp 的服务端程序"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"./frps -c frps.ini\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/eb0a4e394f5b656b3e67c13c6ab1eb82.jpg",alt:null}))),(0,i.kt)("h4",null,"进一步地使用 pm2 运行 frps"),(0,i.kt)("p",null,"安装 node 环境"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://cloud.tencent.com/document/product/213/38237#.E6.AD.A5.E9.AA.A43.EF.BC.9A.E5.AE.89.E8.A3.85-node.js-.E5.A4.9A.E7.89.88.E6.9C.AC.EF.BC.88.E5.8F.AF.E9.80.89.EF.BC.89"}),"安装 Node.js 多版本"))),(0,i.kt)("p",null,"全局安装 pm2"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"npm i pm2 -g\n")),(0,i.kt)("p",null,"使用 pm2 守护运行 frps 服务"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'sudo echo "/opt/frp_0.37.0_linux_386/frps -c /opt/frp_0.37.0_linux_386/frps.ini" > /opt/frp_0.37.0_linux_386/start_frpc.sh\npm2 start /opt/frp_0.37.0_linux_386/start_frps.sh\npm2 save\n')),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/e52ef19b14366896e5de3c6bf7bce609.jpg",alt:null}))),(0,i.kt)("h4",null,"客户端(树莓派)配置"),(0,i.kt)("p",null,"在树莓派内执行以下命令，下载 frp，并解压。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/\nsudo wget https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_linux_arm64.tar.gz\nsudo tar zxvf frp_0.37.0_linux_arm64.tar.gz\n")),(0,i.kt)("p",null,"进入 ",(0,i.kt)("inlineCode",{parentName:"p"},"/opt/frp_0.37.0_linux_arm64")),(0,i.kt)("p",null,"备份客户端 frpc 的配置文件 frpc.ini"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo cp frpc.ini frpc.ini_backup\n")),(0,i.kt)("p",null,"frpc.ini 文件备份如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"[common]\nserver_addr = 127.0.0.1\nserver_port = 7000\n\n[ssh]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremiote_port = 6000\n")),(0,i.kt)("p",null,"编辑 frpc.ini:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo vim frpc.ini\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"[common]\nserver_addr = 81.69.252.246\nserver_port = 7000\n\n[web]\ntype = http\nlocal_port = 8080\ncustom_domains = frp.muyunyun.cn\n")),(0,i.kt)("p",null,"启动客户端"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"./frpc -c frpc.ini\n")),(0,i.kt)("p",null,"接着从公网访问 frp.muyunyun.cn，验证内网穿透是否成功。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c61981adbdaba27efbc45b26c1921891.jpg-400",alt:null}))),(0,i.kt)("p",null,"可以看到来自公网的请求在树莓派的 frp 客户端已经有了反应，接着我们在树莓派搭建一个简单服务。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"进一步地，可以参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://muyunyun.cn/blog/r4zxdn6n"}),"基于树莓派搭建家庭服务器"),"。")),(0,i.kt)("h3",null,"添加 SSH 服务"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"[ssh]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremote_port = 6000\n")),(0,i.kt)("p",null,"如上配置是指将树莓派的默认 ssh 的 22 号端口映射到 frp.muyunyun.cn 的 6000 端口。"),(0,i.kt)("p",null,"重启 frpc 服务:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/frp_0.37.0_linux_arm64\npm2 restart start_frpc.sh\n")),(0,i.kt)("p",null,"通过公网 frp.muyunyun.cn 的 6000 端口进行 ssh 登录。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"ssh ubuntu@frp.muyunyun.cn -p 6000\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/43431e73e8a218fb9e0a494f61f8f0df.jpg",alt:null}))),(0,i.kt)("p",null,"至此实现了在公网使用 SSH 操作访问树莓派的需求。"))}c.isMDXComponent=!0},41371:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"安装 Node.js"),(0,i.kt)("p",null,"使用 ARMv8 版本的稳定版 Node.js。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/\nsudo wget https://nodejs.org/dist/v14.18.0/node-v14.18.0-linux-arm64.tar.xz\nsudo tar xvf node-v14.18.0-linux-arm64.tar.xz\n")),(0,i.kt)("p",null,"将 Node.js 添加到系统变量"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'sudo echo "export NODE_HOME=/opt/node-v14.18.0-linux-arm64" >> ~/.bashrc\nsudo echo "export PATH=\\$NODE_HOME/bin:\\$PATH" >> ~/.bashrc\nsource ~/.bashrc\n')),(0,i.kt)("p",null,"此时在树莓派中输入 node -v，可以看到对应版本如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"ubuntu@ubuntu:~$ node -v\nv14.18.0\nubuntu@ubuntu:~$ npm -v\n6.14.15\n")),(0,i.kt)("p",null,"接着安装 http-server 服务"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"npm install http-server -g\n")),(0,i.kt)("p",null,"在 /opt 文件夹 新建 frp.muyunyun.cn 文件夹, 并创建 hello.txt 文件。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'sudo mkdir /opt/frp.muyunyun.cn\nsudo chmod 777 -R /opt/frp.muyunyun.cn\nsudo touch /opt/frp.muyunyun.cn/hello.txt\nsudo chmod 777 -R /opt/frp.muyunyun.cn/hello.txt\nsudo echo "Hello World!" > /opt/frp.muyunyun.cn/hello.txt\n')),(0,i.kt)("p",null,"安装 pm2"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"npm install pm2 -g\n")),(0,i.kt)("p",null,"使用 pm2 守护运行 http-server 服务"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'cd /opt/frp_0.37.0_linux_arm64\nsudo touch start_http_server.sh\nsudo chmod 777 start_http_server.sh\nsudo echo "http-server /opt/frp.muyunyun.cn -p 8080" > start_http_server.sh\npm2 start /opt/frp_0.37.0_linux_arm64/start_http_server.sh\npm2 save\n')),(0,i.kt)("p",null,"使用 pm2 守护运行 frpc 服务"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'sudo touch /opt/frp_0.37.0_linux_arm64/start_frpc.sh\nsudo chmod 777 /opt/frp_0.37.0_linux_arm64/start_frpc.sh\nsudo echo "/opt/frp_0.37.0_linux_arm64/frpc -c /opt/frp_0.37.0_linux_arm64/frpc.ini" > /opt/frp_0.37.0_linux_arm64/start_frpc.sh\ncd /opt/frp_0.37.0_linux_arm64/\npm2 start /opt/frp_0.37.0_linux_arm64/start_frpc.sh\npm2 save\n')),(0,i.kt)("p",null,"可以使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"pm2 list")," 查看当前树莓派中的服务列表。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/442c4a0b41ad3bc6fcbb09f6d162bd06.jpg",alt:null}))),(0,i.kt)("p",null,"在公网访问 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://frp.muyunyun.cn%E3%80%82%F0%9F%92%90%F0%9F%92%90%F0%9F%92%90%E8%87%B3%E6%AD%A4%E6%9C%89%E4%BA%86%E5%A4%96%E7%BD%91%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E7%9A%84%E5%AE%B6%E5%BA%AD%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%82"}),"http://frp.muyunyun.cn。💐💐💐至此有了外网可以访问的家庭服务器。")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/fac7d7c9a8098d72f98cd6f4485347cd.jpg",alt:null}))))}c.isMDXComponent=!0},7230:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"安装 Docker"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'sudo apt update\n\nsudo apt install \\\n  apt-transport-https \\\n  ca-certificates \\\n  curl \\\n  gnupg \\\n  lsb-release -y\n\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\necho \\\n  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n\nsudo apt update\n\nsudo apt install docker-ce=5:20.10.8~3-0~ubuntu-focal docker-ce-cli=5:20.10.9~3-0~ubuntu-focal containerd.io=1.4.11-1 -y\n')),(0,i.kt)("h3",null,"安装 Docker Compose"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 在本机的 host 文件中添加 github 相关 ip 地址，遇到 `curl: (7) Failed to connect to raw.githubusercontent.com port 443` 问题，参考 https://github.com/hawtim/blog/issues/10\nsudo vim /etc/hosts\n\n# 使 dns 改动生效\nsudo systemctl restart systemd-resolved\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo curl -L --fail https://raw.githubusercontent.com/linuxserver/docker-docker-compose/master/run.sh -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\nsudo docker-compose --version\n")))}c.isMDXComponent=!0},421:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"在给",(0,i.kt)("a",u({parentName:"p"},{href:"https://muyunyun.cn/blog/2a97pq3a"}),"树莓派创建好 Docker 环境"),"后，本文记录给树莓派部署 RSSHub 的过程。"),(0,i.kt)("p",null,"RSShub 本质是一个为各类网页生成 RSS 信息的爬虫集合，我们通过阅读 RSSHub 的文档，可以获得各类知名网站的 RSS 信息。"),(0,i.kt)("h3",null,"获取 docker-compose.yml"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/\nsudo mkdir rsshub\nsudo chmod 777 -R rsshub\ncd /opt/rsshub\nwget https://raw.githubusercontent.com/DIYgod/RSSHub/master/docker-compose.yml\n")),(0,i.kt)("p",null,"docker-compose.yml 内的内容为:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"version: '3'\n\nservices:\n    rsshub:\n        image: diygod/rsshub\n        restart: always\n        ports:\n            - '1200:1200'\n        environment:\n            NODE_ENV: production\n            CACHE_TYPE: redis\n            REDIS_URL: 'redis://redis:6379/'\n            PUPPETEER_WS_ENDPOINT: 'ws://browserless:3000'\n        depends_on:\n            - redis\n            - browserless\n\n    browserless:\n        # See issue 6680\n        image: browserless/chrome:1.43-chrome-stable\n        restart: always\n        ulimits:\n            core:\n                hard: 0\n                soft: 0\n\n    redis:\n        image: redis:alpine\n        restart: always\n        volumes:\n            - redis-data:/data\n\nvolumes:\n    redis-data:\n")),(0,i.kt)("p",null,"从配置信息中我们可以看出，服务端口为 1200。"),(0,i.kt)("h3",null,"创建 volume 持久化 Redis 缓存"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo docker volume create redis-data\n")),(0,i.kt)("h3",null,"启动 RSShub"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/rsshub\nsudo docker-compose up -d\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/ca92893197e45c4753eab1f72bfc9abb.jpg",alt:null}))),(0,i.kt)("p",null,"访问本地树莓派 ip 的 1200 端口，可以看到 RSS 已经启动在 1200 端口上了。"),(0,i.kt)("p",null,"进入 ",(0,i.kt)("inlineCode",{parentName:"p"},"/opt/frp_0.37.0_linux_arm64"),"，在 frpc.ini 中添加以下配置:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/frp_0.37.0_linux_arm64\nsudo vim frpc.ini\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"[rsshub-frp-muyunyun-cn-1200]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 1200\nremote_port = 1200\n")),(0,i.kt)("p",null,"重启 frpc，此时可以在公网中访问到新部署的 RSSHub 服务。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/frp_0.37.0_linux_arm64\npm2 restart start_frpc.sh\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/99cc2f01fb172287d2a758e88c3fd9f2.jpg",alt:null}))))}c.isMDXComponent=!0},84866:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Https 协议配置"),(0,i.kt)("p",null,"免费的 Https 证书，最多只有一年的期限，而且每个二级子域名要单独申请，很浪费时间。使用本文提供的方法，可以只配置一次，实现证书永久自动续期。"),(0,i.kt)("h3",null,"acme.sh 安装实践"),(0,i.kt)("p",null,"笔者一开始将 acme.sh 安装在树莓派中，绕了弯。",(0,i.kt)("strong",{parentName:"p"},"应将 acme.sh 安装在云服务器端"),"。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"步骤一: 安装 acme.sh。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/acmesh-official/acme.sh/wiki/sudo"}),"https://github.com/acmesh-official/acme.sh/wiki/sudo"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# unstall for current user\nacme.sh --uninstall\n\n# change to root(需要执行)\nsudo su\n\n# install again for root user\ncurl https://get.acme.sh | sh -s email=328375795@qq.com\nsource ~/.bashrc\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"步骤二: 获取 https 证书。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"说明: 本文以 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://www.muyunyun.cn"}),"www.muyunyun.cn")," 作为案例演示，",(0,i.kt)("a",u({parentName:"p"},{href:"https://muyunyun.cn/blog/r4zxdn6n"}),"基于树莓派搭建家庭服务器")," 中的 frp.muyunyun.cn 如果要配置为 HTTPS，操作同理。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"acme.sh --set-default-ca --server letsencrypt\nacme.sh --issue -d www.muyunyun.cn --nginx\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/3e990527ed80cb020704ab30aa502856.jpg-400",alt:null}))),(0,i.kt)("p",null,"在这一步中 acme.sh 读取了 nginx 配置(路径: ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/nginx/conf.d/www.muyunyun.cn.conf"),")，并自动生成了证书。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"调试方法: acme.sh --issue -d ",(0,i.kt)("a",u({parentName:"p"},{href:"http://www.muyunyun.cn"}),"www.muyunyun.cn")," --nginx --debug 2")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"步骤三: 将证书拷贝到 ",(0,i.kt)("inlineCode",{parentName:"li"},"/etc/nginx/ssl")," 文件夹。")),(0,i.kt)("p",null,"创建文件夹"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"mkdir -p /etc/nginx/ssl/www.muyunyun.cn\n")),(0,i.kt)("p",null,"拷贝证书:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'acme.sh --install-cert -d www.muyunyun.cn \\\n--key-file       /etc/nginx/ssl/www.muyunyun.cn/www.muyunyun.cn.key  \\\n--fullchain-file  /etc/nginx/ssl/www.muyunyun.cn/fullchain.cer \\\n--reloadcmd     "service nginx force-reload"\n')),(0,i.kt)("p",null,"请一定使用以上语法 acme.sh --install-cer 进行拷贝，这样证书才能保证在新的位置也能自动更新。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/922adc77ccacd8bb3c52dd9ceb8e080e.jpg",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"步骤四: 将 ",(0,i.kt)("inlineCode",{parentName:"li"},"/etc/nginx/ssl/www.muyunyun.cn/")," 中的证书手动配置到 nginx, 并重启 nginx 使之生效。")),(0,i.kt)("p",null,"将 ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/nginx/conf.d/www.muyunyun.cn.conf")," 中的内容替换为:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'server {\n    listen       80;\n    listen       [::]:80;\n    server_name  www.muyunyun.cn;\n    root         /usr/share/nginx/html/www.muyunyun.cn;\n\n    error_page 404 /404.html;\n    location = /404.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n    }\n}\n\nserver {\n    listen       443 ssl http2;\n    listen       [::]:443 ssl http2;\n    server_name  www.muyunyun.cn;\n    root         /usr/share/nginx/html/www.muyunyun.cn;\n\n    ssl_certificate "/etc/nginx/ssl/www.muyunyun.cn/fullchain.cer";\n    ssl_certificate_key "/etc/nginx/ssl/www.muyunyun.cn/www.muyunyun.cn.key";\n    ssl_session_cache shared:SSL:1m;\n    ssl_session_timeout  10m;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers on;\n\n    # Load configuration files for the default server block.\n    include /etc/nginx/default.d/*.conf;\n\n    error_page 404 /404.html;\n        location = /40x.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n        location = /50x.html {\n    }\n}\n')),(0,i.kt)("p",null,"重启 nginx:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"systemctl restart nginx\n")),(0,i.kt)("p",null,"打开 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.muyunyun.cn%EF%BC%8C%E8%AF%81%E4%B9%A6%E5%B7%B2%E7%94%9F%E6%95%88%E3%80%82"}),"https://www.muyunyun.cn，证书已生效。")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/a397cb63269be96f1102a117bbe3fb49.jpg-400",alt:null}))),(0,i.kt)("p",null,"由于我们全程使用 acme.sh 进行安装，acme.sh 会自动为你创建一个定时任务, 每天 0:00 点自动检测所有的证书, 如果快过期了, 需要更新, 则会自动更新证书。"),(0,i.kt)("p",null,"运行 ",(0,i.kt)("inlineCode",{parentName:"p"},"ps aux | grep acme")," 可以看到 acme 一直在后台运行。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"root@VM-16-17-ubuntu:/etc/nginx/ssl/www.muyunyun.cn# ps aux | grep acme\nroot     1561193  0.0  0.0   7348   748 pts/0    S+   03:57   0:00 grep --color=auto acme\n")),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E"}),"acme.sh 使用说明"))))}c.isMDXComponent=!0},81105:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/cdr/code-server"}),"code-server")," 是 vscode 的服务端程序，通过部署 code-server 在服务器，可以实现 web 端访问 vscode。进而可以达到以下能力:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"【直接】支持跨设备(Mac/iPad/iPhone 等等)编程，同时保证多端编程环境统一。"),(0,i.kt)("li",{parentName:"ul"},"【直接】支持在 web 端提交 git 代码。"),(0,i.kt)("li",{parentName:"ul"},"【间接】解放背包重量😁。")),(0,i.kt)("p",null,"至于将 code-server 部署在树莓派上相比云端服务器好处是综合成本低，后续若要更换云服务器，只需更改内网映射端口即可，迁移会十分便捷。"),(0,i.kt)("h3",null,"树莓派上部署 code-server"),(0,i.kt)("p",null,"参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://coder.com/docs/code-server/latest/install#raspberry-pi"}),"code-server 官网"),"，在树莓派上其推荐使用 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://coder.com/docs/code-server/latest/install#yarn-npm"}),"yarn 的方式"),"来进行安装 code-server。"),(0,i.kt)("p",null,"此外",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/cdr/code-server/blob/main/docs/npm.md"}),"前置安装"),"提到 ",(0,i.kt)("inlineCode",{parentName:"p"},"node.js 版本需要与所下载的 VSCode's Electron 所依赖的版本一致"),"。笔者下载的 code-server 版本为 code-server_3.12.0_arm64.deb，其需要 node.js 14.x 版本。执行如下命令进行前置安装:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo apt-get install -y \\\n  build-essential \\\n  pkg-config \\\n  python3\nnpm config set python python3\n")),(0,i.kt)("p",null,"按照 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://yarn.bootcss.com/docs/install/#debian-stable"}),"yarn 官网")," 所述，在 Debian / Ubuntu 系统中安装 yarn:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -\necho "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list\nsudo apt update && sudo apt install yarn\n\nyarn --version // 1.22.15\n')),(0,i.kt)("p",null,"执行 ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo vim .bashrc"),"，将 yarn 全局安装命令的执行路径写入 .bashrc 文件。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'export PATH="$PATH:`yarn global bin`"\nsource ~/.bashrc # 使之生效\n')),(0,i.kt)("p",null,"参照 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://coder.com/docs/code-server/latest/npm#installing"}),"code-server 官网安装教程"),"，执行以下命令安装 code-server:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"yarn global add code-server\ncode-server --version # 3.12.0\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"笔者使用 npm install -g code-server 无法成功安装，最终使用 yarn global add code-server 安装成功。")),(0,i.kt)("p",null,"编辑 ",(0,i.kt)("inlineCode",{parentName:"p"},".config/code-server/config.yaml")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo vim .config/code-server/config.yaml\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"bind-addr: 127.0.0.1:5555\nauth: password\npassword: xxxxxxxxx\ncert: false\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 启动 code-server\ncode-server\n")),(0,i.kt)("p",null,"在 ",(0,i.kt)("inlineCode",{parentName:"p"},"frpc.ini")," 中添加以下配置:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"frpc.ini 与 pm2 的完整配置说明可以参考",(0,i.kt)("a",u({parentName:"p"},{href:"https://muyunyun.cn/blog/fes9wogn"}),"内网穿透"),"章节。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"[vscode-server-frp-muyunyun-cn-5555]\ntype = tcp\nlocal_ip = 127.0.0.1\n# code-server 服务运行在树莓派本地的 5555 端口上\nlocal_port = 5555\n# 对外运行在服务器端云主机 5555 端口上\nremote_port = 5555\n")),(0,i.kt)("p",null,"使用 pm2 重启 frpc 服务:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cd /opt/frp_0.37.0_linux_arm64\npm2 restart start_frpc.sh\n")),(0,i.kt)("p",null,"此时在 frps 服务器端(云主机)中通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"lsof -i:5555")," 可以看到服务端端口 5555 已经被 frps 服务占据。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c4987da142cbc4b261b6b333df5d490b.jpg",alt:null}))),(0,i.kt)("p",null,"同时在公网中可以看到 code-server 服务已成功运行"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/9f5f9fa5cd5c1510695ca492e939c255.jpg",alt:null}))),(0,i.kt)("p",null,"使用 pm2 守护运行 code-server 以让相关服务遇到意外(比如断电后)能自动重启:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'cd /opt/frp_0.37.0_linux_arm64\nsudo touch start_code_server.sh\nsudo chmod 777 start_code_server.sh\nsudo echo "code-server" > start_code_server.sh\npm2 start /opt/frp_0.37.0_linux_arm64/start_code_server.sh\npm2 save\n')),(0,i.kt)("p",null,"笔者在域名解析处新增 code 主机记录以语义化访问 code-server 服务，此时访问 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://code.muyunyun.cn:5555"}),"http://code.muyunyun.cn:5555")," 与访问 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://frp.muyunyun.cn:5555"}),"http://frp.muyunyun.cn:5555")," 效果是相同的。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/b0afbe6f729762ce8e50a00624c3e11a.jpg-400",alt:null}))),(0,i.kt)("h3",null,"支持 HTTPS 协议访问"),(0,i.kt)("p",null,"访问 HTTP 下的 code-server 服务，发现不能完整使用插件、剪切板等功能模块。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/580bab3470fb6535fae23530db223a94.jpg-400",alt:null}))),(0,i.kt)("p",null,"根据控制台报错信息，推测这些模块依赖了 service work，查阅 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers#setting_up_to_play_with_service_workers"}),"Setting up to play with service workers")," 得知, service work 确实必须在 Https 协议中使用。"),(0,i.kt)("p",null,"因此若要完整地使用 code-server 服务，需要配置 HTTPS 协议，配置过程记录在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://muyunyun.cn/blog/mx5pvgl1"}),"HTTPS 域名配置")," 章节中，其介绍了给域名获取免费的 Https 证书并让 Https 生效的过程。"),(0,i.kt)("h3",null,"支持在 HTTPS 协议中访问 WebSocket"),(0,i.kt)("p",null,"在配置完 HTTPS 服务后，访问 HTTPS 链接发现还是无法在 web 端正常使用 vscode，排查发现 code-server 使用 WebSocket 以保持长连接，因此需要在 nginx 配置文件中增加对 ",(0,i.kt)("a",u({parentName:"p"},{href:"http://nginx.org/en/docs/http/websocket.html"}),"WebSocket 配置"),"。"),(0,i.kt)("p",null,"执行 ",(0,i.kt)("inlineCode",{parentName:"p"},"vim /etc/nginx/conf.d/www.muyunyun.cn.conf")," 进行编辑，完整的 nginx 配置如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'map $http_upgrade $connection_upgrade {\n        default upgrade;\n        \'\' close;\n}\n\nupstream code_muyunyun_cn {\n  server 127.0.0.1:5555;\n}\n\nserver {\n    server_name      code.muyunyun.cn;\n    listen           80;\n    listen           [::]:80;\n    rewrite ^(.*)$ https://$host$1 permanent;\n\n    error_page 404 /404.html;\n        location = /40x.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n        location = /50x.html {\n    }\n}\n\nserver {\n    listen       443 ssl http2;\n    listen       [::]:443 ssl http2;\n    server_name  code.muyunyun.cn;\n    root         /usr/share/nginx/html/code.muyunyun.cn;\n\n    location / {\n        proxy_pass http://code_muyunyun_cn;\n        proxy_set_header Host $host:443;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        # support websocket\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n    }\n\n    ssl_certificate "/etc/nginx/ssl/code.muyunyun.cn/fullchain.cer";\n    ssl_certificate_key "/etc/nginx/ssl/code.muyunyun.cn/code.muyunyun.cn.key";\n    ssl_session_cache shared:SSL:1m;\n    ssl_session_timeout  10m;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers on;\n\n    # Load configuration files for the default server block.\n    include /etc/nginx/default.d/*.conf;\n\n    error_page 404 /404.html;\n        location = /40x.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n        location = /50x.html {\n    }\n}\n')),(0,i.kt)("p",null,"重新加载 nginx 配置后，此时已经可以在 web 端使用上 code-server 的能力。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/c8b78a74fccd162ef97ecd2b53da09f4.jpg-400",alt:null}))),(0,i.kt)("h3",null,"在 web 端中提交 git 代码"),(0,i.kt)("p",null,"登入树莓派端，执行如下命令生成 ssh 密钥:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'# 以 github 为例\nssh-keygen -t rsa -C "youremail@example.com" -f ~/.ssh/github\n')),(0,i.kt)("p",null,"然后将 ~/.ssh/github.pub 公钥中的内容复制到剪贴板，拷贝到 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/settings/keys"}),"GitHub ssh")," 的 Key 文本框中。"),(0,i.kt)("p",null,"经验证，至此已经可以在 web 中提交代码到 github。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/924eb6f01775b8a455b6bb5107bd202c.jpg-400",alt:null}))))}c.isMDXComponent=!0},15408:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"已部署站点地址收录"))}c.isMDXComponent=!0},88541:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"}),"文件操作"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#head"}),"head")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#tail"}),"tail")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#ls"}),"ls")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#pwd"}),"pwd")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#wc"}),"wc")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#find"}),"find")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#mkdir"}),"mkdir")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#more"}),"more")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#paste"}),"paste")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#stat"}),"stat")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#grep"}),"grep")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#touch"}),"touch")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#sed"}),"sed"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#sed-%E7%94%A8%E6%B3%95%E5%AE%9E%E4%BE%8B"}),"sed 用法实例")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#cd"}),"cd")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#rm"}),"rm")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#cp"}),"cp")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#cat"}),"cat")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#mv"}),"mv")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#open"}),"open")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#source"}),"source")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#tree"}),"tree")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#ln"}),"ln")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#file"}),"file")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#tar"}),"tar")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86"}),"系统管理"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#ping"}),"ping")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#which"}),"which")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#shutdown"}),"shutdown")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#uptime"}),"uptime")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#uname"}),"uname")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#ifconfig"}),"ifconfig")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#chmod"}),"chmod")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#lsof"}),"lsof")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#alias"}),"alias")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B"}),"系统进程"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#ps"}),"ps")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"}),"用户管理"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#chsh"}),"chsh")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#users"}),"users")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#last"}),"last")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#su"}),"su")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#whoami"}),"whoami")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E7%BD%91%E7%BB%9C"}),"网络"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#curl"}),"curl")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E5%8C%85%E7%AE%A1%E7%90%86"}),"包管理"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#apt-get"}),"apt-get")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E5%85%B6%E5%AE%83"}),"其它"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#clear"}),"clear")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#link"}),"link"))))),(0,i.kt)("h2",null,"文件操作"),(0,i.kt)("h3",null,"head"),(0,i.kt)("p",null,"显示文件的头部内容，如果不指定参数默认显示 10 行"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 显示前 10 行内容\nhead README.md\n\n# 或者显示多个文件\nhead README.md package.json\n\n# -n 指定显示行数\nhead -n 100 README.md\n")),(0,i.kt)("h3",null,"tail"),(0,i.kt)("p",null,"显示文件的末尾部分"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 默认显示末尾10行\ntail README.md\n\n# -n 指定显示末尾20行\ntail -n 20 README.md\n")),(0,i.kt)("h3",null,"ls"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 显示当前目录列表\nls\n\n# 显示目录列表的详细信息\nls -l\n\n# 显示指定目录\nls ./src\n\n# 可读性地显示目录列表详细信息, h means human-readable\nls -lh\n\n# 列出所有文件包括隐藏文件\nls -a\n\n# -F 可以显示类型，用以区分是文件还是目录\nls -F # 后缀为 ”/“ 代表是目录，”*“ 为可执行文件，没有则为文件\n\n# -i 查看 inode 编号, 每一个文件或目录都有一个唯一的编号，这个数字由内核分配给文件系统中的每一个对象\nls -i\n\n# 过滤文件列表, * 代表 0 个或多个字符, ? 代表一个字符\nls READ*\n")),(0,i.kt)("h3",null,"pwd"),(0,i.kt)("p",null,"显示当前路径"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# pwd means pathname of the current working directory\npwd\n")),(0,i.kt)("h3",null,"wc"),(0,i.kt)("p",null,"统计文件的行数、字数、字节数, 常见用于",(0,i.kt)("inlineCode",{parentName:"p"},"统计代码行数")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 统计行数\nwc -l README.md\n\n# 统计字数\nwc -w README.md\n\n# 统计字符数, 中文占两个字符, 英文占一个字符\nwc -m README.md\n")),(0,i.kt)("h3",null,"find"),(0,i.kt)("p",null,"指定某个目录下查找文件"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'# 在当前目录递归搜索文件名为 README.md 文件\nfind . -name README.md\n\n# 通过通配符进行查找, 必须用引号括着, 这里查找所有后缀为 .md 文件\nfind . -name "*.md"\nfind . -iname "*.md"  # 忽略文件大小写\n\n# 排除文件，只要加 ! , 排除掉所有 .md 后缀的文件\nfind . ! -name "*.md"\n\n# 根据类型进行过滤搜索\n# f 普通文件 d 目录\nfind . -type f\n\n# 限定目录递归深度\nfind . -maxdepth 3  # 最大为3个目录\nfind . -mindepth 3  # 最小为3个目录\n\n# 查找文件大小大于 25k 文件\nfind . -size +25k\n\n# 查找 10 天前文件 -mtime 修改时间、 -ctime 创建时间、 -atime 访问时间\nfind . -mtime +10\n')),(0,i.kt)("h3",null,"mkdir"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 在当前目录下创建 temp 目录\nmkdir temp\n\n# 创建多层目录, p means parent\nmkdir -p temp/temp2/temp3\n\n# 基于权限创建, m means mode\nmkdir -m 777 temp\n")),(0,i.kt)("h3",null,"more"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"空格 - 查看下一屏内容"),(0,i.kt)("li",{parentName:"ul"},"B - 查看上一屏内容"),(0,i.kt)("li",{parentName:"ul"},"回车 - 查看下一行内容"),(0,i.kt)("li",{parentName:"ul"},"Q - 退出")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"more README.md\n\n# 从第 10 行开始显示\nmore +10 README.md\n")),(0,i.kt)("h3",null,"paste"),(0,i.kt)("p",null,"合并 N 个文件的",(0,i.kt)("inlineCode",{parentName:"p"},"列"),"。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"并不是纵向合并, 而是横向合并。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 1.txt 和 2.txt 合并输出\npaste 1.txt 2.txt\n\n# 1.txt 2.txt 合并后保存为 3.txt\npaste 1.txt 2.txt > 3.txt\n")),(0,i.kt)("h3",null,"stat"),(0,i.kt)("p",null,"用于显示文件或目录的状态信息"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'16777220 8702541224 -rw-r--r-- 1 mac staff 0 15857 "Nov  1 13:02:02 2020" "Nov  1 13:02:02 2020" "Nov  1 13:02:02 2020" "Oct 25 18:48:15 2020" 4096 32 0 README.md\n')),(0,i.kt)("h3",null,"grep"),(0,i.kt)("p",null,"强大的文本搜索工具, 被称为 Linux 命令三剑客。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'# 从 README.md 文件中搜索 linux 关键字\ngrep "linux" README.md\ngrep "linux" README.md README2.md # 多个文件搜索\n\n# 输出时高亮显示\ngrep "linux" README.md --color\n\n# -o 只输出匹配部分\ngrep -o "linux" README.md --color\n\n# -n 输出到匹配的行数\ngrep -n "linux" README.md\n\n# -c 输出到匹配次数\ngrep -c "linux" README.md\n\n# -r 递归目录文件搜索\ngrep -r "linux" ./src\n\n# 使用 glob 风格表达式搜索\negrep "[0-9]" # 等价于 grep -E "[0-9]" README.md\n')),(0,i.kt)("h3",null,"touch"),(0,i.kt)("p",null,"创建一个空文件, 如果文件存在只会修改文件的创建时间"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"touch README.md\n")),(0,i.kt)("h3",null,"sed"),(0,i.kt)("p",null,"sed 是一种功能强大的流式文本编辑器，它是文本处理中非常重要的工具，能够完美的配合正则表达式使用，功能不同凡响。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用 sed 命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用重定向存储输出。sed 主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。"),(0,i.kt)("h4",null,"sed 用法实例"),(0,i.kt)("p",null,"替换操作: s 命令"),(0,i.kt)("p",null,"替换文本中的字符串："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"sed 's/book/books/' file\n")),(0,i.kt)("h3",null,"cd"),(0,i.kt)("p",null,"进入指定目录"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 进入当前 src 目录\ncd src\n\n# 回到上一次目录\ncd -\n\n# 返回上一级目录\ncd ..\ncd ../../..   # 返回多级\n\n# 进入 /root 目录\ncd ~\ncd # 或者不带任何参数\n\n# 将上一个命令的参数作为cd参数使用\ncd !$\n\n# 模糊匹配目录，有时目录名很长一个一个敲效率就很低\n# * 代表0个或多个字符， ? 代表一个字符\ncd READ*\n")),(0,i.kt)("h3",null,"rm"),(0,i.kt)("p",null,"删除指定目录或文件"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"使用此命令需要非常小心, 一但删除无法恢复")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 删除当前 1.txt 文件\nrm 1.txt\n\n# -i 删除前询问是否真的要删除，因为一旦删除无法恢复\nrm -i README.md\n\n# 这条命令比较常用, 强制删除目录或文件\n# -r 如果是目录递归删除, -f 强制删除 不发出任何警告\nrm -rf ./src\n")),(0,i.kt)("h3",null,"cp"),(0,i.kt)("p",null,"拷贝文件或目录"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 将当前 README.md 文件拷贝到上一层\ncp ./README.md ../README.md\n\n# -a 将原文件属性一同拷贝, 修改时间、创建时间等\ncp -a ./README.md ../README.md\n\n# -r 用于递归拷贝目录\ncp -r home ../home\n\n# -i 如果目标文件存在会询问用户是否需要覆盖\ncp -i README.md README.md\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/xjh22222228/linux-manual#cat"}),"to read"))),(0,i.kt)("h3",null,"cat"),(0,i.kt)("p",null,"查看指定整个文件内容"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 查看 README.md 文件所有内容\ncat README.md\ncat README.md README2.md  # 或者一次性显示多个文件\n\n# -n 每一行显示行号\ncat -n README.md\n\n# -b 只给有内容的行显示行号\ncat -b README.md\n")),(0,i.kt)("h3",null,"mv"),(0,i.kt)("p",null,"mv 有 2 个用途："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"将文件或目录移动到另一个位置"),(0,i.kt)("li",{parentName:"ul"},"将文件或目录重命名")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 将 README.md 重命名为 README-2.md, 如果 README-2.md 存在会直接覆盖。\nmv README.md README-2.md\n\n# 将 README.md 移动到上一层目录\nmv README.md ../README.md\n\n# -i 交互式操作，如果目标文件存在则进行询问是否覆盖\nmv -i README.md ../README.md\n\n# -f 如果出现同名直接覆盖\n$ mv -f 1.txt 2.txt\n")),(0,i.kt)("h3",null,"open"),(0,i.kt)("p",null,"open 命令可在 linux / mac 具有可视化界面下进行文本编辑、打开应用程序等功能。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 在mac下用Finder打开当前目录\nopen .\n\n# 用默认应用程序打开文件\nopen README.md\n\n# 用默认编辑器打开文件\nopen -e README.md\n\n# 如果是一个URL用默认浏览器打开页面\nopen https://github.com/MuYunyun/blog.git\n\n# 指定某个应用程序打开某个文件, 如果不指定文件默认直接打开程序\nopen -a /Applications/Google\\ Chrome.app README.md\n")),(0,i.kt)("h3",null,"source"),(0,i.kt)("p",null,"在当前 Shell 环境中从指定文件读取和执行命令， 通常用于重新执行环境。"),(0,i.kt)("p",null,"它有个别名 . 点操作符号。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 等价 . ~/.bash_profile\nsource ~/.bash_profile\n")),(0,i.kt)("p",null,"可以把它理解为",(0,i.kt)("inlineCode",{parentName:"p"},"编程语言中的 import"),", java/python/js 都有这个，就是用来导入文件。"),(0,i.kt)("p",null,"下面演示 source 用于 shell 脚本中"),(0,i.kt)("p",null,"util.sh"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'#!/bin/bash\ngetName() {\n  echo "Linux"\n}\n')),(0,i.kt)("p",null,"main.sh"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"#!/bin/bash\n# 加载文件\nsource ./util.sh\n\n# 这样就可以调用 util 文件中的函数了\necho $(getName)\n")),(0,i.kt)("h3",null,"tree"),(0,i.kt)("p",null,"生成目录树结构, 通常用于描述项目结构。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'# 递归当前目录下所有文件并生成目录树\ntree\n\n# -I 忽略某些目录\ntree -I "node_modules"\n\n# 只显示目录\ntree -d\n\n# 指定要递归的目录层级\ntree -L 3\n')),(0,i.kt)("h3",null,"ln"),(0,i.kt)("p",null,"将某一个文件在另外一个位置建立并产生同步的链接。当不同的 2 个目录需要同时引用某一个文件时此命令就派上用场了。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"这个命令的应用场景: 比如 yarn link")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"软链接也可以叫符号链接：",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"软链接，以路径的形式存在。类似于 Windows 操作系统中的快捷方式;"),(0,i.kt)("li",{parentName:"ul"},"软链接可以 跨文件系统, 硬链接不可以;"),(0,i.kt)("li",{parentName:"ul"},"软链接可以对一个不存在的文件名进行链接;"),(0,i.kt)("li",{parentName:"ul"},"软链接可以对目录进行链接;"))),(0,i.kt)("li",{parentName:"ul"},"硬链接:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"硬链接，以文件副本的形式存在。但不占用实际空间, 从根本上而言就是同一个文件;"),(0,i.kt)("li",{parentName:"ul"},"不允许给目录创建硬链接;"),(0,i.kt)("li",{parentName:"ul"},"硬链接只有在同一个文件系统中才能创建;")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"理解: 文件系统博主理解: 比如在 mac 系统中装了个虚拟机, 虚拟机里面跑了另外一个 window 系统, 那此时 mac 和虚拟机里面的系统就是两个不同的文件系统。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 默认创建硬链接，修改 README.md 内容， a.md 也会同步修改, 修改 a.md, README.md 也会同步修改\nln README.md a.md\n\n# -s 创建软链接\nln -s README.md a.md # 如果删除了 README.md  a.md 将失效\n\n# -f 强制执行\nln -f README.md ./src/a.md\n")),(0,i.kt)("h3",null,"file"),(0,i.kt)("p",null,"查看文件类型, 比如文件、目录、二进制、符号链接等。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"file README.md\nREADME.md: HTML document text, UTF-8 Unicode text\n")),(0,i.kt)("h3",null,"tar"),(0,i.kt)("p",null,"全称: ",(0,i.kt)("inlineCode",{parentName:"p"},"tape archive")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"tar ","[-j|-z][cv]"," ","[-f 建立的档案名]"," filename... 打包与压缩"),(0,i.kt)("li",{parentName:"ul"},"tar ","[-j|-z][tv]"," ","[-f 建立的档案名]","             查看档案"),(0,i.kt)("li",{parentName:"ul"},"tar ","[-j|-z][xv]"," ","[-f 建立的档案名][-C 目录]","    解压缩")),(0,i.kt)("p",null,"选项与参数："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"-c: 建立打包档案，可搭配 -v 来观察过程中被打包的档案名 (filename)"),(0,i.kt)("li",{parentName:"ul"},"-t: 查看打包档案的内容含有那些档案"),(0,i.kt)("li",{parentName:"ul"},"-x: 解压缩的功能，可以搭配 -C 在特定的目录解开; -c、-t、-x 不能同时出现在一串指令列中。"),(0,i.kt)("li",{parentName:"ul"},"-j: 透过 bzip2 的支持进行压缩/解压缩: 此时档案名最好为 *.tar.bz2"),(0,i.kt)("li",{parentName:"ul"},"-z: 透过 gzip 的支持进行压缩/解压缩: 此时档案名最好为 *.tar.gz"),(0,i.kt)("li",{parentName:"ul"},"-v: 在压缩/解压缩的过程中, 将正在处理文件名显示出来"),(0,i.kt)("li",{parentName:"ul"},"-f filename: -f 后面要立刻接被处理的档案名! 建议 -f 单独写一个选项"),(0,i.kt)("li",{parentName:"ul"},"-C 目录: 指定特定目录")),(0,i.kt)("h2",null,"系统管理"),(0,i.kt)("h3",null,"ping"),(0,i.kt)("p",null,"测试目标地址是否可连接、延迟度"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 测试 github.com 连通性, 按 ctrl + C 停止\nping github.com\n\n# ping 5 次后断开\nping -c 5 github.com\n\n# 每 5 秒 ping 一次\nping -i 5 github.com\n")),(0,i.kt)("h3",null,"which"),(0,i.kt)("p",null,"查找某个命令存储在哪个位置, 输出绝对路径, which 会在环境变量 $PATH 设置的目录里去查找。"),(0,i.kt)("p",null,"注: 可以通过 echo $PATH 查看设置的目录."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"which top  # /usr/bin/top\n\n# 打印多个命令\nwhich ping top\n")),(0,i.kt)("h3",null,"shutdown"),(0,i.kt)("p",null,"将系统关机或重启操作。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'# 什么参数都不加，默认会在 1 分钟后关机\n$ shutdown\n\n# 在将系统的服务停掉之后就重新开机\n$ shutdown -r now\n\n# 关闭系统并切断电源\n$ shutdown -h now # 立即关机, 实际上调用 init 0\n\n# 把前一个关机或重启取消掉\n$ shutdown -c\n\n# 设定一个时间关机，"&" 符号表示后台模式，让出 CLI\n$ shutdown -h 05:33 &\n$ shutdown +5 "5分钟后关机" # 5 分钟后关机，同时送出警告信息给登入用户：\n')),(0,i.kt)("h3",null,"uptime"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 当前系统运行的天数，小时，分钟 (从上次开机起计算), 当前系统登录用户数。一分钟、5分钟、15分钟平均负载, 这 3 个值不能大于 CPU 个数，如果大于了说明系统负载高，性能低。\nuptime # 13:25  up 2 days, 18:57, 7 users, load averages: 2.06 2.06 2.15\n")),(0,i.kt)("h3",null,"uname"),(0,i.kt)("p",null,"打印系统信息"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 不带任何参数打印当前操作系统内核名称\nuname # Darwin , 等价于 uname -s\n\n# 打印系统所有信息, cloud-2.local: 网络节点主机名称, x86_64: 主机的硬件架构名称\nuname -a # Darwin cloud-2.local 19.4.0 Darwin Kernel Version 19.4.0: Wed Mar  4 22:28:40 PST 2020; root:xnu-6153.101.6~15/RELEASE_X86_64 x86_64\n\n# 打印主机的硬件架构名称\nuname -m # x86_64\n")),(0,i.kt)("h3",null,"ifconfig"),(0,i.kt)("p",null,"配置或显示系统网卡的网络参数。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 显示所有网络参数信息\nifconfig\n")),(0,i.kt)("h3",null,"chmod"),(0,i.kt)("p",null,"修改文件或目录权限。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"see ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/xjh22222228/linux-manual#chmod"}),"https://github.com/xjh22222228/linux-manual#chmod"),".")),(0,i.kt)("h3",null,"lsof"),(0,i.kt)("p",null,"列出当前系统打开文件的工具"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"## 打印所有打开文件的的列表\nlsof\n\n# 查看指定端口被占用情况，(i means IP)\nlsof -i:8080\n")),(0,i.kt)("h3",null,"alias"),(0,i.kt)("p",null,"设置命令别名，用于简化较长的命令。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 列出所有已设置的别名\nalias\n\n# 删除所有别名\nunalias -a\n\n# 设置别名\nalias ll='ls -l'\n")),(0,i.kt)("h2",null,"系统进程"),(0,i.kt)("h3",null,"ps"),(0,i.kt)("p",null,"ps 命令涵盖命令参数三大风格"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Unix 风格, ",(0,i.kt)("inlineCode",{parentName:"li"},"前面加单破折线")),(0,i.kt)("li",{parentName:"ul"},"BSD 风格, 全称伯克利软件发行版(Berkeley software distribution), ",(0,i.kt)("inlineCode",{parentName:"li"},"前面不加破折线")),(0,i.kt)("li",{parentName:"ul"},'GNU 风格, 全称 "Gnu\'s Not Unix", ',(0,i.kt)("inlineCode",{parentName:"li"},"前面加双破折线"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 配合 grep 查询指定进程, -a means: all, -f means full\nps -af | grep nginx\n")),(0,i.kt)("h2",null,"用户管理"),(0,i.kt)("h3",null,"chsh"),(0,i.kt)("p",null,"chsh 命令用于修改默认用户登录 shell。"),(0,i.kt)("p",null,"修改后重新启动 Shell 即可生效（exit/logout）。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 必须使用完整路径，不能使用shell名\nchsh -s /bin/zsh\n")),(0,i.kt)("p",null,"查看当前 Shell"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"echo $SHELL # /bin/zsh\n")),(0,i.kt)("p",null,"列出当前所有已安装的Shell"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cat /etc/shells\n\n# /bin/bash\n# /bin/csh\n# /bin/dash\n# /bin/ksh\n# /bin/sh\n# /bin/tcsh\n# /bin/zsh\n")),(0,i.kt)("h3",null,"users"),(0,i.kt)("p",null,"显示当前登录系统的所有用户的用户列表。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"ubuntu@ubuntu:~$ users\nubuntu\n")),(0,i.kt)("h3",null,"last"),(0,i.kt)("p",null,"显示用户最近登录信息。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"last\n\n# 指定显示条目数\nlast -n 1\n")),(0,i.kt)("h3",null,"su"),(0,i.kt)("p",null,"切换到其他用户。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 切换到 root 身份\nsudo su\n")),(0,i.kt)("h3",null,"whoami"),(0,i.kt)("p",null,"显示自身的用户名称"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"ubuntu@ubuntu:~$ whoami\nubuntu\n\nroot@ubuntu:/home/ubuntu# whoami\nroot\n")),(0,i.kt)("h2",null,"网络"),(0,i.kt)("h3",null,"curl"),(0,i.kt)("p",null,"curl 是一个非常强大的网络传输工具，利用 URL 规则在命令行下工作。"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"参数"),(0,i.kt)("th",u({parentName:"tr"},{align:"center"}),"描述"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"-H"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"设置请求头")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"-X"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"设置 HTTP 请求方法")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"--cookie"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"指定发送 cookie")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"--retry"),(0,i.kt)("td",u({parentName:"tr"},{align:"center"}),"请求重试")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"curl --help 查询 curl 后可跟随的参数信息。")),(0,i.kt)("h2",null,"包管理"),(0,i.kt)("h3",null,"apt-get"),(0,i.kt)("p",null,"apt-get 命令是 Debian Linux 发行版中的 APT 软件包管理工具。所有基于 Debian 的发行都使用这个包管理系统。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 安装一个docker软件\n$ apt-get install docker\n\n# 卸载软件，保留配置文件\n$ apt-get remove docker\n\n# 卸载软件并删除配置文件\n$ apt-get –purge remove docker\n\n# 更新所有已安装的软件包\n$ apt-get upgrade\n\n# 删除软件备份，主要用来释放空间\n$ apt-get clean\n")),(0,i.kt)("h2",null,"其它"),(0,i.kt)("h3",null,"clear"),(0,i.kt)("p",null,"用于清除当前终端所有信息，本质上只是向后翻了一页，往上滚动还能看到之前的操作信息"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"注：效果等用于 ",(0,i.kt)("inlineCode",{parentName:"p"},"command + K")," 可以完全清除终端所有操作信息。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"clear\n")),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"thanks for ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/xjh22222228/linux-manual"}),"Read Linux"),".")))}c.isMDXComponent=!0},61218:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E7%B3%BB%E7%BB%9F%E7%9B%AE%E5%BD%95%E7%AE%80%E4%BB%8B"}),"系统目录简介"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E5%BF%85%E9%A1%BB"}),"系统启动必须")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E6%8C%87%E4%BB%A4%E9%9B%86%E5%90%88"}),"指令集合")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E5%A4%96%E9%83%A8%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"}),"外部文件管理")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6"}),"临时文件")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E8%B4%A6%E6%88%B7"}),"账户")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B%E4%B8%AD%E4%BD%BF%E7%94%A8"}),"运行过程中使用")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"#%E6%89%A9%E5%B1%95%E4%BD%BF%E7%94%A8"}),"扩展使用"))))),(0,i.kt)("h3",null,"系统目录简介"),(0,i.kt)("h4",null,"系统启动必须"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/boot"),"：存放的启动 Linux 时使用的内核文件，包括连接文件以及镜像文件。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/etc"),"：存放所有的系统需要的配置文件和子目录列表，更改目录下的文件可能会导致系统不能启动。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/lib"),"：存放基本代码库（比如 c++ 库），其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/sys"),"： 这是 linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 。sysfs 文件系统集成了下面 3 种文件系统的信息：针对进程信息的proc文件系统、针对设备的devfs文件系统以及针对伪终端的devpts文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中。")),(0,i.kt)("h4",null,"指令集合"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/bin"),"：bin 是 Binaries (二进制文件) 的缩写, 存放着最常用的程序和指令。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/sbin"),"：s 是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，只有系统管理员能使用的程序和指令。")),(0,i.kt)("h4",null,"外部文件管理"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/dev")," ：Device(设备)的缩写, 存放的是 Linux 的外部设备。注意：在 Linux 中访问设备和访问文件的方式是相同的。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/media"),"：类 windows 的其他设备，例如 U 盘、光驱等等，识别后 linux 会把设备放到这个目录下。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/mnt"),"：临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了。")),(0,i.kt)("h4",null,"临时文件"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/run"),"：是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/lost+found"),"：一般情况下为空的，系统非法关机后，这里就存放一些文件。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/tmp"),"：是 temporary(临时) 的缩写，这个目录是用来存放一些临时文件的。")),(0,i.kt)("h4",null,"账户"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/root"),"：系统管理员的用户主目录。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/home"),"：用户的主目录，以用户的账号命名的。一般 github clone 的文件放这里。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/usr"),"： usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/usr/bin"),"：系统用户使用的应用程序与指令。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/usr/sbin"),"：超级用户使用的比较高级的管理程序和系统守护程序。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/usr/src"),"：内核源代码默认的放置目录。")),(0,i.kt)("h4",null,"运行过程中使用"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/var"),"：是 variable(变量) 的缩写，存放经常修改的数据，比如程序运行的日志文件（/var/log 目录下）。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/proc"),"：proc 是 Processes(进程) 的缩写，/proc 是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。这个目录的内容不在硬盘上而是在内存里。")),(0,i.kt)("h4",null,"扩展使用"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/opt"),"：opt 是 optional(可选) 的缩写，这是给主机额外安装软件所摆放的目录。比如你安装一个 ORACLE 数据库则就可以放到这个目录下。默认是空的。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/srv"),"：存放服务启动后需要提取的数据（不用服务器就是空）")))}c.isMDXComponent=!0},35040:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"nginx"),(0,i.kt)("p",null,"node 与 nginx 搭配使用, 是因为 nginx 具有更加强大的静态文件处理能力, 以及反向代理负载均衡(Load Balance)。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"正向代理"),": 代理客户端(如 vpn)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"反向代理"),": 代理服务器(使用 Nginx 实现负载均衡)")),(0,i.kt)("p",null,"其它用途: 跨域"),(0,i.kt)("h3",null,"目录"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"配置文件目录 /usr/local/etc/nginx/nginx.conf"),(0,i.kt)("li",{parentName:"ul"},"默认配置文件目录 /usr/local/etc/nginx/nginx.conf.default"),(0,i.kt)("li",{parentName:"ul"},"根目录 /usr/local/var/www")),(0,i.kt)("h3",null,"FAQ"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Q: ",(0,i.kt)("inlineCode",{parentName:"li"},"[::]:443")," 中的 ",(0,i.kt)("inlineCode",{parentName:"li"},"[::]:")," 的含义是什么?",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"A: 用于 IPv6，参考",(0,i.kt)("a",u({parentName:"li"},{href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#listen"}),"官网"),"。")))),(0,i.kt)("h3",null,"相关文章"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://nginx.org/en/docs/"}),"Nginx 英文文档")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.nginx.cn/doc/index.html"}),"Nginx 中文文档"))))}c.isMDXComponent=!0},3526:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"nginx 常用命令(ubuntu)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"sudo apt update\n\n# 安装 Nginx\nsudo apt install nginx\n\n# 设置开机启动\nsudo systemctl enable nginx\n\n# 开启 nginx\nsudo systemctl start nginx\n\n# 重启 nginx\nsudo systemctl restart nginx\n\n# nginx 重新加载配置文件\nsudo systemctl reload nginx\n\n# 停止 nginx\nsudo systemctl stop nginx\nsudo service nginx stop\n\n# 强制杀死 nginx\nsudo pkill -9 nginx\n\n# Ubuntu 上卸载 nginx\n# 删除除了配置文件以外的所有文件。\nsudo apt-get remove nginx nginx-common\n# 删除所有与nginx有关的东西，包括配置文件。\nsudo apt-get purge nginx nginx-common\n# 在上面命令结束后执行，主要是删除与Nginx有关的且不再被使用的依赖包。\nsudo apt-get autoremove\n# 删除两个主要的包。\nsudo apt-get remove nginx-full nginx-common\n\n# 查看版本\nnginx -v\n# 检查配置文件是否正确\nsudo nginx -t\n# 查询 nginx 是否启动\nps -ef | grep nginx\n")),(0,i.kt)("p",null,"安装好以后, 执行 ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo systemctl status nginx"),", 可以看到"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"nginx.service - A high performance web server and a reverse proxy server\n...\n")),(0,i.kt)("h3",null,"常用命令(Mac)"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"sudo brew services start nginx // 启动 nginx(8080 端口)\nsudo brew services stop nginx  // 关闭 nginx\nbrew services restart nginx    // 重启 nginx\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"mac 重启后需要重新跑一遍 sudo brew services stop nginx、sudo brew services start nginx")),(0,i.kt)("h3",null,"nginx 配置文件初始化备份"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"nginx 主配置文件路径"),": /etc/nginx/nginx.conf。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'user www-data;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n    worker_connections 768;\n    # multi_accept on;\n}\n\nhttp {\n    ##\n    # Basic Settings\n    ##\n\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 65;\n    types_hash_max_size 2048;\n    # server_tokens off;\n\n    # server_names_hash_bucket_size 64;\n    # server_name_in_redirect off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    ##\n    # SSL Settings\n    ##\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE\n    ssl_prefer_server_ciphers on;\n\n    ##\n    # Logging Settings\n    ##\n\n    access_log /var/log/nginx/access.log;\n    error_log /var/log/nginx/error.log;\n\n    ##\n    # Gzip Settings\n    ##\n\n    gzip on;\n\n    # gzip_vary on;\n    # gzip_proxied any;\n    # gzip_comp_level 6;\n    # gzip_buffers 16 8k;\n    # gzip_http_version 1.1;\n    # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n\n    ##\n    # Virtual Host Configs\n    ##\n\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\n\n#mail {\n#       # See sample authentication script at:\n#       # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript\n#\n#       # auth_http localhost/auth.php;\n#       # pop3_capabilities "TOP" "USER";\n#       # imap_capabilities "IMAP4rev1" "UIDPLUS";\n#\n#       server {\n#               listen     localhost:110;\n#               protocol   pop3;\n#               proxy      on;\n#       }\n#\n#       server {\n#               listen     localhost:143;\n#               protocol   imap;\n#               proxy      on;\n#       }\n#}\n')))}c.isMDXComponent=!0},30141:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"SSH"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# 登入腾讯云服务器。[服务器地址](https://console.cloud.tencent.com/lighthouse/instance/index)\nssh ubuntu@81.69.252.246\n\n# 登入树莓派\nssh ubuntu@frp.muyunyun.cn -p 6000\n\n# 退出 ssh\nexit + enter\n")),(0,i.kt)("h3",null,"快捷命令"),(0,i.kt)("p",null,"locate nginx.conf: 快捷查找文件位置"))}c.isMDXComponent=!0},96630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"查询温度"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"cat /sys/class/thermal/thermal_zone0/temp # 43816\n")),(0,i.kt)("p",null,"笔者发现 ubuntu 系统登入页面时，自动会显示温度信息:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-1045-raspi aarch64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Wed Nov 24 10:39:02 UTC 2021\n\n  System load:                      0.42\n  Usage of /:                       36.9% of 28.96GB\n  Memory usage:                     14%\n  Swap usage:                       0%\n  Temperature:                      43.8 C              <----------------- Here\n  Processes:                        178\n  Users logged in:                  0\n  IPv4 address for br-b23c54f46da5: 172.18.0.1\n  IPv4 address for docker0:         172.17.0.1\n  IPv4 address for eth0:            192.168.1.3\n")),(0,i.kt)("h3",null,"树莓派连接显示器不亮屏的解决方案"),(0,i.kt)("p",null,"笔者参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.cnblogs.com/wirehome/p/10298395.html"}),"树莓派连接显示器不亮屏的解决方案"),"，最后屏幕得以在 7 寸(1024*600) 屏幕显示成功。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/2d694194975c595f2da927a677bfd572.jpg",alt:null}))),(0,i.kt)("p",null,"方法是需要在烧录的镜像系统中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"config.txt")," 补充以下内容:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"hdmi_force_hotplug=1\nconfig_hdmi_boost=4\nhdmi_group=2\nhdmi_mode=9\nhdmi_drive=2\nhdmi_ignore_edid=0xa5000080\ndisable_overscan=1\n")),(0,i.kt)("h3",null,"暂未成功的方案"),(0,i.kt)("h4",null,"树莓派连接手机热点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://blog.csdn.net/weixin_44415549/article/details/105415371"}),"树莓派连接手机热点"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://www.geek-share.com/detail/2809069950.html"}),"树莓派没有路由器,连接手机热点使用"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"步骤一: boot 盘新建一个 ssh 空文件。")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"步骤二: boot 盘新建一个 wpa_supplicant.conf，里面代码为"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-bash"}),'country=GB\nctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\nupdate_config=1\nnetwork={\n  ssid=""\n  psk=""\n  priority=99\n}\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"ssid 写热点名称，psk 写热点密码。")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"步骤三: 手机下载远程服务软件 ",(0,i.kt)("inlineCode",{parentName:"li"},"Termius"),"。")),(0,i.kt)("h4",null,"树莓派无线连接 wifi"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://blog.csdn.net/wei_love_2017/article/details/108877102"}),"树莓派 ubuntu20.04 链接 wifi"))))}c.isMDXComponent=!0},65458:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"AddressPicker"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"AddressPicker")," 是基于 ",(0,i.kt)("inlineCode",{parentName:"p"},"Tabs")," 组件封装的地址选择组件, 具体效果可以见拼多多用户 APP 里的地址选择栏。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"支持",(0,i.kt)("inlineCode",{parentName:"li"},"层级"),";"),(0,i.kt)("li",{parentName:"ul"},"支持",(0,i.kt)("inlineCode",{parentName:"li"},"别名函数"),";")))}c.isMDXComponent=!0},13277:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Affix 固钉组件"),(0,i.kt)("p",null,"固钉组件实现的效果其实是 CSS 中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"position: sticky")," 属性, ",(0,i.kt)("inlineCode",{parentName:"p"},"position: sticky")," 本质是 ",(0,i.kt)("inlineCode",{parentName:"p"},"position: relative")," 与 ",(0,i.kt)("inlineCode",{parentName:"p"},"position: absolute")," 的结合体。"),(0,i.kt)("p",null,"开发坑点: 相对定位切换到绝对定位以后 ",(0,i.kt)("inlineCode",{parentName:"p"},"getBoundingClientRect().top")," 获取的 top 是定值, 其值始终与 ",(0,i.kt)("inlineCode",{parentName:"p"},"offsetTop")," 的值相等，这样无法从绝对定位切换到相对定位了。"),(0,i.kt)("p",null,"解决手段: 提供一个占位父节点, 父节点使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"getBoundingClientRect"),", 子节点上绝对定位。",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/ming-cult/snake-design/blob/master/components/Affix/index.tsx#L83-L87"}),"demo")),(0,i.kt)("h3",null,"small tip"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"window.addEventListener('scroll', fn)\n")),(0,i.kt)("p",null,"页面在顶部, 此时刷新浏览器不会执行 fn 函数, 但是页面发生滚动后, 此时刷新浏览器会执行 fn 函数。因此根据浏览器的这个原生特性, 初始化设置「是否吸顶」的逻辑直接写在 fn 中就行，当页面发生滚动或者页面初始化都会调用。"))}c.isMDXComponent=!0},68636:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Button 组件"),(0,i.kt)("h4",null,"样式自定义覆盖"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"getClassName = () => {\n  const { className, type } = this.props\n  const classStr = ClassNames('mobile-btn', className, {\n    ['mobile-btn-primary']: type === 'primary',\n  })\n  return classStr\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-scss"}),".mobile-btn {\n  ...\n  &-primary {\n    background: $btn-background;\n  }\n}\n")),(0,i.kt)("p",null,"这里有个样式优先级的知识点, 如果想让传进来的自定义样式 ",(0,i.kt)("inlineCode",{parentName:"p"},"className")," 中的 background 覆盖掉 ",(0,i.kt)("inlineCode",{parentName:"p"},"mobile-btn-promary")," 的 ",(0,i.kt)("inlineCode",{parentName:"p"},"background"),", 需做如下改动:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-scss"}),".mobile-btn {\n  ...\n}\n\n&.mobile-btn-primary {\n  background: $btn-background;\n}\n")),(0,i.kt)("h3",null,"难点"),(0,i.kt)("p",null,"在移动端中, 手指移到 button 按钮上时如何模拟 pc 端的 hover 状态?"))}c.isMDXComponent=!0},47746:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Carousel(走马灯) 组件"),(0,i.kt)("p",null,"事件是交给原生事件还是交由 React 的合成事件呢? 在最初的实现中参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/voronianski/react-swipe/blob/gh-pages/src/index.js"}),"react-swipe")," 相当于是自己封装原生事件。"),(0,i.kt)("p",null,"但是在 React 的生态下，还是尽量用 ",(0,i.kt)("inlineCode",{parentName:"p"},"React")," 封装的合成事件更为妥当。举几个原因:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"兼容性方面的东西不用自己维护了;"),(0,i.kt)("li",{parentName:"ol"},"测试用例用 ",(0,i.kt)("inlineCode",{parentName:"li"},".simulate")," 的时候能统一;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"原生事件和 React 合成事件类似鱼和熊掌不可兼得。")),(0,i.kt)("h3",null,"前置知识"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"touchStart"),(0,i.kt)("li",{parentName:"ul"},"touchMove"),(0,i.kt)("li",{parentName:"ul"},"touchEnd"),(0,i.kt)("li",{parentName:"ul"},"transitionend")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"e.touches","[0]",".pageX, cdn 讲了其包含水平滚动的位置")),(0,i.kt)("h3",null,"核心思路"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/8151b27a39eb385305185d0a67736011.jpg-400",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"比如当前位于第 3 张图片位于中央的时候, 第 1、2 张图片位于左侧的 ",(0,i.kt)("inlineCode",{parentName:"li"},"rest"),", 第 4、5 张图片位于右侧的 ",(0,i.kt)("inlineCode",{parentName:"li"},"rest"),";")),(0,i.kt)("p",null,"初始化阶段对任何窗口执行以下算法:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"向左平移当前窗口数 * width")),(0,i.kt)("li",{parentName:"ol"},"给除了当前展示页加上/减去 ",(0,i.kt)("inlineCode",{parentName:"li"},"width"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"每次只操作当前的 ",(0,i.kt)("inlineCode",{parentName:"li"},"index"),", 和其左右的元素 ",(0,i.kt)("inlineCode",{parentName:"li"},"index - 1"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"index + 1"),";"),(0,i.kt)("li",{parentName:"ul"},"自动滑动用的是 css 中的 ",(0,i.kt)("inlineCode",{parentName:"li"},"transitionDuration")," 属性以及 ",(0,i.kt)("inlineCode",{parentName:"li"},"transform")," 属性来完成")),(0,i.kt)("h3",null,"理解易错点"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"delta = {\n  x: touches.pageX - start.x,\n  y: touches.pageY - start.y\n};\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"手势从左往右滑动是向左滑动 ",(0,i.kt)("inlineCode",{parentName:"li"},"delta.x > 0"),", 手势从右往左滑动是向右滑动 ",(0,i.kt)("inlineCode",{parentName:"li"},"delta.x < 0"))),(0,i.kt)("h3",null,"坑点"),(0,i.kt)("h4",null,"不必要的 id 传入"),(0,i.kt)("p",null,"为了解决在一个页面中使用多处 ",(0,i.kt)("inlineCode",{parentName:"p"},"Swipe")," 组件，首先提供了一个 id 参数来进行区分多个 Swipe 组件, 思路是在封装的组件内部通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"document.getElementById(id)")," 获取到这个 dom 节点，然后进行位置的初始化。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'<Swipe\n  id="demo"\n>\n</Swipe>\n')),(0,i.kt)("p",null,"传入额外的 id 这对使用者是一个不必要的负担, 可以在组件内使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"ref")," 获取到对应的 ",(0,i.kt)("inlineCode",{parentName:"p"},"dom"),"。"),(0,i.kt)("h4",null,"如何改造成受控组件"),(0,i.kt)("p",null,"目前的实现为非受控组件, 若要将其改为受控组件, 改的地方比较多, 必须使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," 来替换全局参数。另外位置的信息在 ",(0,i.kt)("inlineCode",{parentName:"p"},"React.cloneElement()")," 中进行处理。"),(0,i.kt)("h4",null,"测试用例之坑"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"jest")," 跑如下测试用例, 当跑到 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidMount")," 里的 ",(0,i.kt)("inlineCode",{parentName:"p"},"document.getElementById('demo')")," 并不拿到相应元素。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'mount(<Swipe>\n  <div key="1">PANE 1</div>\n  <div key="2">PANE 2</div>\n  <div key="3">PANE 3</div>\n  <div key="4">PANE 4</div>\n</Swipe>)\n')),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"componentDidMount() {\n  document.getElementById('demo')\n}\n\nrender() {\n  return (\n    <div id=\"demo\">...</div>\n  )\n}\n")),(0,i.kt)("p",null,"原因是因为 ",(0,i.kt)("inlineCode",{parentName:"p"},"mount")," 渲染组件是挂载到 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/jsdom/jsdom"}),"jsdom")," 上而非真实 ",(0,i.kt)("inlineCode",{parentName:"p"},"dom")," 上, 当时的解决思路如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'mount(<Swipe>\n  <div key="1">PANE 1</div>\n  <div key="2">PANE 2</div>\n  <div key="3">PANE 3</div>\n  <div key="4">PANE 4</div>\n</Swipe>, { attatch: document.body })\n')),(0,i.kt)("p",null,"经过上述去除步骤去掉 ",(0,i.kt)("inlineCode",{parentName:"p"},"document.getElementById")," 使用 ref 后, ",(0,i.kt)("inlineCode",{parentName:"p"},"{ attatch: document.body }")," 也便去掉了。"),(0,i.kt)("h3",null,"CSS 方案?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"scroll-snap-type",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"mandatory: the visual viewport of this scroll container will ",(0,i.kt)("inlineCode",{parentName:"li"},"rest on a snap point")," if it isn't currently scrolled."),(0,i.kt)("li",{parentName:"ul"},"proximity: The visual viewport of this scroll container may come to ",(0,i.kt)("inlineCode",{parentName:"li"},"rest on a snap point")," if it isn't currently scrolled considering the user agent's scroll parameters.")))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/56583153afaa5ae1edad7bea4b728234.jpg-400",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"scroll-snap-align: start;"),(0,i.kt)("li",{parentName:"ul"},"scroll-snap-stop(experiment)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'always: defining whether the scroll container is allowed to "pass over" possible snap positions(Used with scroll-snap-align can).')))),(0,i.kt)("p",null,"阅读文档后, 该 api 浏览器兼容情况不是特别好(ios 要 11 以上), 此外, 比如循环轮播是无法实现的。"))}c.isMDXComponent=!0},15547:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"CheckBox 组件"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"勾的定制化: 首先使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"appearance: none")," 去掉原生自带的勾。接着创建一个矩形, 保留 ",(0,i.kt)("inlineCode",{parentName:"li"},"border-left")," 与 ",(0,i.kt)("inlineCode",{parentName:"li"},"border-bottom")," 的边, 进行旋转得到勾。")),(0,i.kt)("h3",null,"能用 css 解决的场景尽量用 css 解决"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/6a44d5cba2693eea4e162f8514aa72ba.jpg",alt:null}))),(0,i.kt)("p",null,"场景: 蓝色区域为可以更改 ",(0,i.kt)("inlineCode",{parentName:"p"},"checked")," 的地方, 最开始使用 JS 计算出区域 1 与区域 2 的宽度, 使之相加得到蓝色区域的宽度。其实使用 css 中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"display: inline-block")," 可以自动获取子节点的宽度。"),(0,i.kt)("h3",null,"css 的常量属性(比如 color、size)不要设置默认属性值(defaultProps)"),(0,i.kt)("p",null,"使用了默认属性值则会配合 JS 动态插入到 ",(0,i.kt)("inlineCode",{parentName:"p"},"style")," 属性, 这样子有个缺陷: 用户传入自定义的 ",(0,i.kt)("inlineCode",{parentName:"p"},"class 属性")," 不会生效。(因为 style 的优先级大于 class 传入的优先级)"))}c.isMDXComponent=!0},85677:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"环形进度条组件"),(0,i.kt)("p",null,"环形进度条组件当下采用 svg 进行开发。"))}c.isMDXComponent=!0},30932:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"裁图组件"),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://segmentfault.com/a/1190000004268074"}),"裁图组件"))))}c.isMDXComponent=!0},17779:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"DatePicker 日期选择组件"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"区分好受控和非受控区域"),"。DatePicker 组件中, 日期滑动区域对用户来说是希望是非受控的。但是点击确定按钮回显到界面上是受控逻辑。")),(0,i.kt)("h3",null,"核心逻辑复用"),(0,i.kt)("p",null,"同 Picker 组件"))}c.isMDXComponent=!0},25084:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Drawer 组件"),(0,i.kt)("h3",null,"两种模式"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"挂载到全局"),(0,i.kt)("li",{parentName:"ul"},"挂载到具体节点")))}c.isMDXComponent=!0},75821:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"在中台中 React 组件库的核心是表单组件, 由此衍生出其它和表单相关的组件。"),(0,i.kt)("h3",null,"表单相关"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"触发焦点事件 ",(0,i.kt)("inlineCode",{parentName:"li"},"focusin"),", 离开焦点事件 ",(0,i.kt)("inlineCode",{parentName:"li"},"focusout"),";"),(0,i.kt)("li",{parentName:"ul"},"修改表单的 ",(0,i.kt)("inlineCode",{parentName:"li"},"value")," 值, 直接更改元素的 ",(0,i.kt)("inlineCode",{parentName:"li"},"value")," 值, 不要使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"setAttribute('value', xxx)")," 这种形式, 后者在某些情况并不会生效;")),(0,i.kt)("h3",null,"社区 form 方案调研"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/final-form/react-final-form"}),"react-final-form")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/erikras/redux-form"}),"redux-form")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/alibaba/noform"}),"noform")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/joepuzzo/informed"}),"Informed"),": render props"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/jaredpalmer/formik"}),"formik"))),(0,i.kt)("h3",null,"应用"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/oneForm/issues/1"}),"oneForm")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://uni-blog.netlify.com/posts/2019-08-19/form/"}),"beast-form"),": 拼多多表单库")))}c.isMDXComponent=!0},42637:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Icon 组件"),(0,i.kt)("h3",null,"Icon Fonts 的用法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),"@font-face {\n  font-family: 'demoFont';\n  src: ...\n}\n\n.demo {\n  font-family: 'demoFont';\n  ...\n}\n")),(0,i.kt)("h3",null,"Icon 组件的两种实现方式"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"@font-face"),(0,i.kt)("li",{parentName:"ol"},"svg")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"SVG")," 相较于优于 ",(0,i.kt)("inlineCode",{parentName:"p"},"Icon Fonts")," 的点。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"在低分辨率下更加清晰;"),(0,i.kt)("li",{parentName:"ul"},"维护更容易;"),(0,i.kt)("li",{parentName:"ul"},"css 控制更加全面(比如允许渐变色)"),(0,i.kt)("li",{parentName:"ul"},"避免 @font-face 受到较多外界 css 属性的干扰(如 line-height、padding 等);")),(0,i.kt)("h3",null,"links"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://css-tricks.com/icon-fonts-vs-svg/"}),"https://css-tricks.com/icon-fonts-vs-svg/"))))}c.isMDXComponent=!0},17722:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Input 组件"),(0,i.kt)("h3",null,"input type 为 bankCard 或 phone 时, 光标错位问题"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5d99b6bb211806c1e3a19361125e06e8.jpg",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"遇到问题: 在光标位置输入 5, 光标位置出现错误")),(0,i.kt)("p",null,"在光标位置输入 5, 光标此时的 selectionStart/selectionEnd 变为 5, 可推测规律当判断 4 的位置为 ' ' 时, 应该让 selectionStart = selectionEnd = 光标位置 + 1"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/55efc4cc4dd46ffdd1fc34c7e16152e0.jpg",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"遇到问题: 在此位置按删除, 光标此时的 selectionStart/selectionEnd 变为 5, 可推测规律当判断 4 的位置为 ' ' 时, 应该让 selectionStart = selectionEnd = 光标位置 - 1")))}c.isMDXComponent=!0},22457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Keyboard 数字键盘组件"),(0,i.kt)("p",null,"为达到",(0,i.kt)("inlineCode",{parentName:"p"},"聚焦"),"同时",(0,i.kt)("inlineCode",{parentName:"p"},"原生键盘不弹出"),"的目的, 实现虚拟键盘和相应 Input 组件。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"支持与浮窗一起使用;"),(0,i.kt)("li",{parentName:"ul"},"支持单独使用;")))}c.isMDXComponent=!0},88623:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Menu 组件"),(0,i.kt)("h4",null,"难点"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"垂直模式下如何做到当悬浮到子节点(或者选中子节点), 父节点和祖父节点也是高亮的呢?"),(0,i.kt)("li",{parentName:"ol"},"当光标从父节点移向子节点, 中间有段空隙, 慢速滑动时如何避免弹框的的关闭?"),(0,i.kt)("li",{parentName:"ol"},"子 menu 展开收缩的动画如何实现? (需借助 JavaScript 动画)")),(0,i.kt)("h3",null,"JavaScript 动画与 CSS 动画"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * @todo JavaScript/CSS animation\n * @body to write this in the future.\n */\n")),(0,i.kt)("h3",null,"细节"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"背景: 在 Menu.Item 中通常会写 Link 标签或者 a 标签进行路由跳转, 但由于 a 标签是行内样式, 点击区域过小导致跳转失效。参考了 ant-design 的",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ant-design/ant-design/issues/21649"}),"解决方案"),", 给 ",(0,i.kt)("inlineCode",{parentName:"li"},"<a />")," 标签添加相关样式;")))}c.isMDXComponent=!0},19619:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Modal"),(0,i.kt)("p",null,"值得学习的是在 Modal 系列组件中 Alert/Promt 组件采用函数式进行弹框的调用。"),(0,i.kt)("h3",null,"蒙层"),(0,i.kt)("p",null,"场景: 点击蒙层区, 内容弹框关闭蒙层消失; 点击内容弹框区, 内容弹框不关闭蒙层不消失;"),(0,i.kt)("p",null,"有什么方法实现这个效果呢?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方案一: target 与 currentTarget 的使用")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),"<div>蒙层区</div> \x3c!-- ① 只修饰样式 --\x3e\n<div>             \x3c!-- 和 ① 相同的点击区域 --\x3e\n  <div>内容区</div>\n</div>\n")),(0,i.kt)("p",null,"伪代码逻辑: 在 JavaScript 中通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"target")," 与 ",(0,i.kt)("inlineCode",{parentName:"p"},"currentTarget")," 区分"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"if (target === currentTarget) { // 点击蒙层\n  // 关闭弹框\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方案二: z-index 的运用")),(0,i.kt)("h3",null,"滑动穿透解决方案"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5ad52dbc5716fb92b823898557cc94fa.gif",alt:null}))),(0,i.kt)("p",null,"下面为解决移动端滑动穿透的解决方案:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"首先先将 document 上的 touchmove 事件禁用掉。(防止遮罩层滚动)"),(0,i.kt)("li",{parentName:"ol"},"然后再阻止浮层内容冒泡, 这样子浮层内容就能 touchmove 了。(使浮层中需滚动的元素可滚动)"),(0,i.kt)("li",{parentName:"ol"},"最后对浮层的边界值做处理, 在浮层内容拉到最顶部(scrollTop 为 0) 还上滑动或者浮层内容拉到最底部(scrollTop + clientHeight >= scrollHeight) 还下滑动时\n防止其滑动穿透, 所以需要对其进行 event.preventDefault()")),(0,i.kt)("p",null,"具体代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import { isNotReachIOS } from './mobileDetect'\n\n/* 该方法解决 ios 滑动穿透问题, 经测试安卓 8.0 版本也适用 */\nlet lockedNum = 0\nlet initialClientY = 0\nlet documentListenerAdded = false\n\nconst lockedElements: HTMLElement[] = []\n\nconst preventDefault = (event: Event) => {\n  if (!event.cancelable) return\n  event.preventDefault()\n}\n\n// 如果位于滚动元素的\nconst handleScroll = (event: TouchEvent, targetElement: HTMLElement) => {\n  const clientY = event.targetTouches[0].clientY - initialClientY\n\n  if (targetElement) {\n    const { scrollTop, scrollHeight, clientHeight } = targetElement\n    const isOnTop = clientY > 0 && scrollTop === 0\n    const isOnBottom = clientY < 0 && scrollTop + clientHeight >= scrollHeight\n\n    if (isOnTop || isOnBottom) {\n      return preventDefault(event)\n    }\n  }\n\n  event.stopPropagation()\n  return false\n}\n\n/* 逻辑: 首先先将 document 上的 touchmove 事件禁用掉。(防止遮罩层滚动)\n然后再将需要进行滚动的元素阻止其冒泡, 这样子滚动的元素就能 touchmove 了。(使弹框层中需滚动的元素可滚动)\n最后对弹框层的边界值做处理, 在浮层内容拉到最顶部(scrollTop 为 0) 还上滑动或者浮层内容拉到最底部(scrollTop + clientHeight >= scrollHeight) 还下滑动时\n要防止其滑动穿透, 所以需要对其进行 event.prevent */\nconst lock = (targetElement: HTMLElement) => {\n  if (!documentListenerAdded) {\n    // 针对 ios9 以下的机型需要单独处理\n    isNotReachIOS(10)\n      ? document.addEventListener('touchmove', preventDefault)\n      : document.addEventListener('touchmove', preventDefault, { passive: false })\n    documentListenerAdded = true\n  }\n\n  if (targetElement && lockedElements.indexOf(targetElement) === -1) {\n    targetElement.ontouchstart = (event: TouchEvent) => {\n      initialClientY = event.targetTouches[0].clientY\n    }\n\n    targetElement.ontouchmove = (event: TouchEvent) => {\n      if (event.targetTouches.length !== 1) return\n      handleScroll(event, targetElement)\n    }\n\n    lockedElements.push(targetElement)\n    lockedNum += 1\n  }\n}\n\nconst unlock = (targetElement: HTMLElement) => {\n  const index = lockedElements.indexOf(targetElement)\n  if (index !== -1) {\n    lockedNum -= 1\n    targetElement.ontouchmove = null\n    targetElement.ontouchstart = null\n    lockedElements.splice(index, 1)\n  }\n\n  if (lockedNum === 0 && documentListenerAdded) {\n    isNotReachIOS(10)\n      ? (document as any).removeEventListener('touchmove', preventDefault)\n      : (document as any).removeEventListener('touchmove', preventDefault, { passive: false })\n    documentListenerAdded = false\n  }\n}\n\nexport { lock, unlock }\n")),(0,i.kt)("p",null,"使用了上述方法后效果如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0a5886e43e522b183415c62d29890ebc.gif",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://juejin.im/post/5ca4816e5188250b251e34e9"}),"滑动穿透(锁 body)终极探索"))),(0,i.kt)("h3",null,"微信 ios 下 input 唤醒键盘视图错误兼容问题"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0547f0a98df8c2d3df62c87569d07502.gif",alt:null}))),(0,i.kt)("p",null,"该问题其实和 modal 没关系, 但是在这个场景中被遇到了, 在动图中可以看到 input 唤醒键盘后然后待键盘消失后, 键盘占用的那部分位置并没有被重新填充上, 使用了 ",(0,i.kt)("inlineCode",{parentName:"p"},"scrollIntoView")," 也没有效果。"),(0,i.kt)("p",null,"解决方案如下:"),(0,i.kt)("p",null,"使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"focusin")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"focusout")," 能分别监听键盘的弹起与关闭, 在 focusout 事件中使用 window.scrollTo() 将 body 视图移动回原来位置。"),(0,i.kt)("p",null,"实现代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 微信 ios 下 input 唤醒键盘视图错误兼容问题\nfunction HackWxIos() {\n  ;(function() {\n    let myFunction: any\n    let isWXAndIos = isWeiXinAndIos()\n    if (isWXAndIos) {\n      // 保存当前视图的滚动位置, 供键盘关闭时使用;\n      const originScrollY = window.scrollY\n      // 既是微信浏览器 又是ios============（因为查到只有在微信环境下，ios手机上才会出现input失去焦点的时候页面被顶起）\n      document.body.addEventListener('focusin', () => {\n        // 软键盘弹起事件\n        clearTimeout(myFunction)\n      })\n      document.body.addEventListener('focusout', () => {\n        // 软键盘关闭事件\n        clearTimeout(myFunction)\n        myFunction = setTimeout(function() {\n          window.scrollTo({ top: originScrollY, left: 0, behavior: 'smooth' }) // 重点  =======当键盘收起的时候让页面回到原始位置\n        }, 200)\n      })\n    }\n  })()\n\n  function isWeiXinAndIos() {\n    // window.navigator.userAgent属性包含了浏览器类型、版本、操作系统类型、浏览器引擎类型等信息，这个属性可以用来判断浏览器类型\n    let ua = '' + window.navigator.userAgent.toLowerCase()\n    // 通过正则表达式匹配ua中是否含有MicroMessenger字符串且是IOS系统\n    let isWeixin = /MicroMessenger/i.test(ua) // 是在微信浏览器\n    let isIos = /\\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(ua) // 是IOS系统\n    return isWeixin && isIos\n  }\n}\n\nexport default HackWxIos\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://www.zhihu.com/question/357548379/answer/919983914"}),"知乎 —— Modal 为什么设计成组件的形式，为啥不全设计成函数 api 直接调用？"))))}c.isMDXComponent=!0},22666:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Picker 组件"),(0,i.kt)("h4",null,"视觉兜底"),(0,i.kt)("p",null,"在 Picker 组件中, 来聊聊组件视觉层面的兜底。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<Picker\n  title=\"选择时间\"\n  data={[\n    [\n      { label: '2014', value: '2014' },\n      { label: '2015', value: '2015' },\n      { label: '2016', value: '2016' },\n      { label: '2017', value: '2017' },\n      { label: '2018', value: '2018' },\n      { label: '2019', value: '2019' }\n    ]\n  ]}\n  value={['2013']}\n>\n  <ListItem placeholder=\"请选择\" extraAlign=\"right\" arrow=\"horizontal\">\n    选择时间\n  </ListItem>\n</Picker>\n")),(0,i.kt)("p",null,"此时 value 的值并不在 data 数据源内, 此时页面的呈现状况如下"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/cb71389f4a26685a686329d69290d15b.jpg",alt:null}))),(0,i.kt)("p",null,"讨论话题: 这样子的兜底对用户是否友好。"),(0,i.kt)("p",null,"兜底后如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/20f9bda8d2be14ad4eabc3226d6f6264.jpg",alt:null}))),(0,i.kt)("h4",null,"一个典型的闭包陷阱"),(0,i.kt)("p",null,"如下代码的逻辑是点击关闭按钮, 让值恢复到之前的值。以下代码有没有问题呢?"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"close = () => {\n  const { value, defaultPicker } = this.props\n  setTimeout(() => {\n    this.onChangePickerValue(value || defaultPicker || [])\n  }, 1000)\n}\n")),(0,i.kt)("h3",null,"流畅的滑动效果"),(0,i.kt)("p",null,"结合物理公式 todo"))}c.isMDXComponent=!0},21003:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"iphone X/XS/XR 适配方案"),(0,i.kt)("p",null,"Popup/ActionSheet 组件在 iphone x/xr/xs 底部存在小黑条会把显示在内容区上面, 适配方案如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"html 上新增 ",(0,i.kt)("inlineCode",{parentName:"li"},"viewport-fit=cover")," 属性，使得页面内容完全覆盖整个窗口(了解设置了这个属性, 才能在后面使用 env 属性):")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<meta name="viewport" content="width=device-width, viewport-fit=cover">\n')),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"在 fix 元素上面设置:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),"{\n  margin-bottom: calc(5px + constant(safe-area-inset-bottom));\n  margin-bottom: calc(5px + env(safe-area-inset-bottom));\n}\n")),(0,i.kt)("ol",u({},{start:3}),(0,i.kt)("li",{parentName:"ol"},"空的颜色块进行补位:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),"{\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  height: constant(5px +  safe-area-inset-bottom);\n  height: env(5px + safe-area-inset-bottom);\n  background-color: #fff;\n}\n")),(0,i.kt)("p",null,"个人觉得这是比较自由的方式。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://aotu.io/notes/2017/11/27/iphonex/index.html"}),"参考链接"))))}c.isMDXComponent=!0},29069:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"PullToRefresh"),(0,i.kt)("h3",null,"与位置相关的 api"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'<div id="position">\n  <div>这是可滚动元素</div>\n</div>\n')),(0,i.kt)("p",null," 以下都在 id 为 position 上取值:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"scrollTop: 滚动距离"),(0,i.kt)("li",{parentName:"ul"},"scrollHeight: 滚动元素的高度"),(0,i.kt)("li",{parentName:"ul"},"clientHeight: 视图高度")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/b1d611e0509807308f79f5e50fb32de6.jpg",alt:null}))),(0,i.kt)("h3",null,"踩坑记录: 需要在 window 上挂载相关事件不适合使用 hooks, 否则需要花很多精力去额外处理。"),(0,i.kt)("p",null,"期间将 PullToRefresh 组件进行重构为 hooks, 伪代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function PullToRefresh(props: PullToRefreshProps) {\n  ...\n  useEffect(() => {\n    addEventListener()\n    return () => {\n      removeEventListener()\n    }\n  }, [useBodyScroll])\n\n  const addEventListener = () => {\n    if (useBodyScroll) {\n      window.addEventListener('scroll', scroll)\n    } else {\n      scrollViewRef.current?.addEventListener('scroll', scroll)\n    }\n  }\n\n  const removeEventListener = () => {\n    if (useBodyScroll) {\n      window.removeEventListener('scroll', scroll)\n    } else {\n      scrollViewRef.current?.removeEventListener('scroll', scroll)\n    }\n  }\n\n  ...\n  return (\n    <div className={classStr} ref={scrollViewRef} style={containStyle} id={id}>\n      {useBodyScroll ? (\n        children\n      ) : (\n        <div className={`${prefixCls}-content`} style={{ minWidth: '100%', ...contentStyle }}>\n          {children}\n        </div>\n      )}\n      {refreshing ? <div className={`${prefixCls}-loading`}>{loadingInfo}</div> : null}\n    </div>\n  )\n}\n\nexport default PullToRefresh\n")),(0,i.kt)("p",null,"踩的坑点是, 当使用方进行如下使用时, setList(newArr) 没有生效。目前归因是由于 hooks 的闭包原因, 在 window 上订阅的事件中使用的值每次执行没法获取最新的值。目前推荐还是使用 class 来构造此类组件。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"export default function PullToRefreshDemo() {\n  const getMockData = () => {\n    let mockList: React.ReactNode[] = []\n    for (let i = 0; i < 40; i++) {\n      mockList.push(<p key={i}>这是标签这是标签</p>)\n    }\n    return mockList\n  }\n  const [list, setList] = useState(getMockData())\n  const [refreshing, setRefreshing] = useState(true)\n  const [checked, setChecked] = useState(false)\n\n  useEffect(() => {\n    setRefreshing(false)\n  }, [])\n\n  useEffect(() => {\n    setList(getMockData())\n  }, [checked])\n\n  const onLoad = (_direction: string, done: () => void) => {\n    console.log('请求接口')\n    setRefreshing(true)\n    const newArr = list.slice()\n    setTimeout(() => {\n      for (let i = 0; i < 5; i++) {\n        newArr.push(\n          <p key={Math.floor(100000000 * Math.random())} style={{ color: 'red' }}>\n            这是新的标签\n          </p>\n        )\n      }\n      setList(newArr)\n      setRefreshing(false)\n      done()\n    }, 1000)\n  }\n\n  const partlyScrollStyle: React.CSSProperties = {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n    overflow: 'auto'\n  }\n\n  return (\n    <div style={checked ? {} : partlyScrollStyle}>\n      <div>\n        <label>是否开启全局滚动</label>: <Switch checked={checked} onChange={() => setChecked(!checked)} />\n      </div>\n      <Head title={checked ? '全局滚动' : '局部滚动'} />\n      <PullToRefresh onLoad={onLoad} refreshing={refreshing} useBodyScroll={checked}>\n        {list}\n      </PullToRefresh>\n    </div>\n  )\n}\n")),(0,i.kt)("h3",null,"组件测试"),(0,i.kt)("p",null,"见 JEST 测试一节。"),(0,i.kt)("h3",null,"上拉刷新结合虚拟列表"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"到临界点",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"等数据加载")))))}c.isMDXComponent=!0},90806:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"评分组件"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"能否纯用 css 实现评分组件, 思路是怎么样的?")),(0,i.kt)("p",null,"借助 input 和相应的 input:checked 可以实现。(思考这种方式实现的评分组件有什么缺陷?)"),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"如何实现半星的效果?")))}c.isMDXComponent=!0},21825:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"SearchBar"),(0,i.kt)("p",null,"在使用 css 的动画属性 ",(0,i.kt)("inlineCode",{parentName:"p"},"transition")," 时, 如果变化前后以下属性改变会使动画失效。",(0,i.kt)("inlineCode",{parentName:"p"},"display/text-align"),"; 所以要维持动画的生效, 保留了 ",(0,i.kt)("inlineCode",{parentName:"p"},"text-align: center")," 属性, 让搜索字样居中。如下图是动画前后的效果。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/cb02d781a8437bb43eea1581d41e6c87.jpg",alt:null}))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/004c6594536786fb1bb57e3df5524831.jpg",alt:null}))),(0,i.kt)("p",null,"受 ",(0,i.kt)("inlineCode",{parentName:"p"},"text-align: center")," 影响, 为了不让 🔍 icon 居中, 这个时候使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"visibility: hidden")," 来占位;"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/9366ca8f6e6f6d7c85d34ca893af131a.jpg",alt:null}))),(0,i.kt)("h3",null,"几个事件钩子的调用先后顺序"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"onBlur"),": 失焦"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"onClear"),": 点击清除图标触发清除"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"onFocus"),": 聚焦")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/d188c846ffbd8c79646a940c352686d5.jpg",alt:null}))),(0,i.kt)("p",null,"点击叉号的时候, 因为叉号不在 ",(0,i.kt)("inlineCode",{parentName:"p"},"input")," 输入框内, 所以首先执行的是 ",(0,i.kt)("inlineCode",{parentName:"p"},"onBlur"),", 此时失去焦点, 后续执行不了叉号上的 ",(0,i.kt)("inlineCode",{parentName:"p"},"handleClear")," 逻辑。解决方法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n  const { onBlur } = this.props\n  onBlur(e)\n\n  setTimeout(() => {\n    // 如果点击叉号, 执行到这里时候 document.activeElement === this.inputRef\n    if (document.activeElement !== this.inputRef) {\n      this.setState({ focus: false })\n    }\n  }, 20)\n}\n\n/* 清空输入并重新聚焦 */\nhandleClear = () => {\n  const { onClear, onChange } = this.props\n  onChange && onChange('')\n  onClear('')\n  this.focus()\n}\n\nfocus = () => {\n  if (this.inputRef) {\n    this.inputRef.focus()\n  }\n}\n")),(0,i.kt)("h3",null,"解决点击 🔍 不 blur 仍然保持聚焦的效果"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/afa95e394ae7ff8b1b180b0407acf424.jpg",alt:null}))),(0,i.kt)("p",null,"当点击搜索 ",(0,i.kt)("inlineCode",{parentName:"p"},"icon")," 的时候, 为了仍保留 ",(0,i.kt)("inlineCode",{parentName:"p"},"input")," 的聚焦的效果, 使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"z-index")," 对 ",(0,i.kt)("inlineCode",{parentName:"p"},"input")," 元素做如下操作。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".demo {\n  position: absolute;\n  z-index: 2;\n  background-color: transparent;\n}\n")))}c.isMDXComponent=!0},30075:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"SegmentedControl"),(0,i.kt)("h3",null,"场景"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/36cd6b4794192301b469ed18e2325911.jpg",alt:null}))),(0,i.kt)("p",null,"当前使用伪元素达到的效果存在缺陷, 在当前 3 个列表项中始终显示两条竖线不符合预期。"),(0,i.kt)("p",null,"期待的是: 如果选中标题一, 则左侧的竖线不应该显示, 只显示右侧的竖线; 如果选中标题二, 则左侧竖线和右侧竖线都不显示。有什么好的解决方法呢?"))}c.isMDXComponent=!0},13807:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"边框的选择"),(0,i.kt)("p",null,"border、box-shadow、伪元素都可以实现表格边框, 该如何选择?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"角度一: 因为 border 属性天然可以拆分为 border-top、border-left、border-bottom、border-right。它们之间灵活组合性较高, 不会出现使用 box-shadow、伪元素带来相互影响的问题。")))}c.isMDXComponent=!0},31398:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Tabs 组件"),(0,i.kt)("p",null,"Tabs 组件在 Swipe 的组件上开发。"),(0,i.kt)("h3",null,"心得"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"在开发基础组件时(涉及到滚动、动画), ",(0,i.kt)("inlineCode",{parentName:"p"},"ref")," 这个钩子还是会被大量用到的。在 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidMount/componentDidUpdate")," 中使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"ref")," 能勾静默刷新(即不再次走生命周期) dom 元素。")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"为了实现下划线平缓滑动的效果, 将其设计为单独一个 div。这里踩了个坑: 最开始是计算下划线的长度以及距离左侧的位置时在父节点使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"getBoundingClientRect"),", 此时为了得到子节点的宽度以及子节点间相关距离必须要减去相应的 ",(0,i.kt)("inlineCode",{parentName:"p"},"margin、padding")," 属性的值。后来修正为在子节点上使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"getBoundingClientRect")," 减少了大量的代码。"))),(0,i.kt)("h3",null,"Tab 的平滑滚动"),(0,i.kt)("p",null,"场景: 当 tabs 的数量大于 4 时可以滑动, 点击对应的 tab 项时将相应的 tab 移动到屏幕中间。"),(0,i.kt)("p",null,"首先使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"scrollTo")," 这个 api, 并使用了 ",(0,i.kt)("inlineCode",{parentName:"p"},"behavior: 'smooth'")," 来完成平滑过渡效果。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"if (tabs.length > 4) {\n  (this as any)[`tabScroll`].scrollTo({\n    left: this.tabMiddleDistance(),\n    top: 0,\n    behavior: 'smooth'\n  })\n}\n")),(0,i.kt)("p",null,"但是 ",(0,i.kt)("inlineCode",{parentName:"p"},"behavior: 'smooth'")," 在 ios 机子上是没有效果的, 所以结合 ",(0,i.kt)("inlineCode",{parentName:"p"},"requestAnimationFrame")," 产生相应的兜底方案。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/* 平滑滚动处理代码, 兼容 IOS */\n// elm: 移动元素\n// distance: 移动距离\n// direction: 移动方向 horizontal: 水平 vertical: 竖直\n// const scrollHorizontalTo = (elm: any, distance: number, direction = 'horizontal') => {\nconst scrollTo = (elm: any, distance: number, direction = 'horizontal') => {\n  let position: number = 0\n\n  if (direction === 'horizontal') {\n    position = elm.scrollLeft\n  } else if (direction === 'vertical') {\n    position = elm.scrollTop\n  }\n  const diff = distance - position\n\n  const callback = () => {\n    position = position + diff / 20\n    if (direction === 'horizontal') {\n      elm.scrollTo(position, 0)\n    } else {\n      elm.scrollTo(0, position)\n    }\n\n    // 若距离目标距离小于 5, 则直接跳到目标位置。\n    if (Math.abs(distance - position) < 5) {\n      if (direction === 'horizontal') {\n        elm.scrollTo(distance, 0)\n      } else if (direction === 'vertical') {\n        elm.scrollTo(0, distance)\n      }\n    } else {\n      requestAnimationFrame(callback)\n    }\n  }\n\n  requestAnimationFrame(callback)\n}\n")),(0,i.kt)("p",null,"这写法有如下坑"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"scrollTo 也是异步行为, 因此 requestAnimationFrame 动画是失效的;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"基于距离"),"判断精度不是很准确")),(0,i.kt)("p",null,"因此改用为 scrollLeft, 以及基于时间来调整"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function scrollToX(value: number, node: HTMLElement) {\n  const scrollLeft = node.scrollLeft\n  const startTime = Date.now()\n  const frameFunc = () => {\n    const timestamp = Date.now()\n    const time = timestamp - startTime\n    node.scrollLeft = easeInOutCubic(time, scrollLeft, value, 450)\n    if (time < 450) {\n      requestAnimationFrame(frameFunc)\n    } else {\n      setScrollTop(value, node)\n    }\n  }\n  requestAnimationFrame(frameFunc)\n}\n")),(0,i.kt)("h4",null,"缓动动画"),(0,i.kt)("p",null,"缓动动画公式参数:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"time: 当前已运动的时间;"),(0,i.kt)("li",{parentName:"ul"},"begin: 距离的初始值;"),(0,i.kt)("li",{parentName:"ul"},"change: 目标值和初始值差值;"),(0,i.kt)("li",{parentName:"ul"},"duration: 运动总时间;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function linear(time, begin, change, duration) {\n  return change * (time / duration) + begin\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Linear"),": 线性匀速运动效果;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Quadratic"),": 二次方的缓动（t^2）;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Cubic"),": 三次方的缓动（t^3）;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Quartic"),": 四次方的缓动（t^4）;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Quintic"),": 五次方的缓动（t^5）;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Sinusoidal"),": 正弦曲线的缓动（sin(t)）;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Exponential"),": 指数曲线的缓动（2^t）;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Circular"),": 圆形曲线的缓动（sqrt(1-t^2)）;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Elastic"),": 指数衰减的正弦曲线缓动;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Back"),": 超过范围的三次方缓动（(s+1)",(0,i.kt)("em",{parentName:"li"},"t^3 – s"),"t^2）;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Bounce"),": 指数衰减的反弹缓动;")),(0,i.kt)("p",null,"除了 Linear 外, 其余每个效果都分三个缓动方式, 分别是:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"easeIn"),": 从 0 开始加速的缓动, 也就是先慢后快;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"easeOut"),": 减速到 0 的缓动, 也就是先快后慢;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"easeInOut"),": 前半段从 0 开始加速, 后半段减速到 0 的缓动;")),(0,i.kt)("p",null,"以 ",(0,i.kt)("inlineCode",{parentName:"p"},"Quadratic")," 为例, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/tweenjs/tween.js/blob/master/src/Tween.js#L534-L558"}),"源码"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/* k 取值范围为 [0, 1] */\nTWEEN.Easing = {\n    Quadratic: {\n        In: function (k) {\n            return k * k;\n        },\n        Out: function (k) {\n            return k * (2 - k);\n    },\n    // k 为 [0, 0.5) 时, 使用 In 公式;\n    // k 为 [0.5, 1] 时, 使用 out 公式;\n        InOut: function (k) {\n            if ((k *= 2) < 1) {\n                return 0.5 * k * k;\n            }\n            return - 0.5 * (--k * (k - 2) - 1);\n        }\n    },\n}\n")),(0,i.kt)("p",null,"in:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/ac0ce9fe36c1169eec182b16aa9307b0.jpg",alt:null}))),(0,i.kt)("p",null,"out:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/281a10bf309065e0d879ee087be5ce10.jpg",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const easeInOutCubic = (time: number, begin: number, change: number, d: number) => {\n  const cc = change - begin\n  time /= d / 2\n  if (time < 1) {\n    return (cc / 2) * time * time * time + begin\n  } else {\n    return (cc / 2) * ((time -= 2) * time * time + 2) + begin\n  }\n}\n")),(0,i.kt)("h3",null,"贝塞尔曲线和缓动动画的关系?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.im/post/5b854e1451882542fe28a53d"}),"贝塞尔曲线的推导"))),(0,i.kt)("p",null,"目前的理解: 贝塞尔的方程式和缓动动画的公式是两条并列的主线, 使用它们中的任意一个都可以完成 JavaScript 的动画效果。"),(0,i.kt)("h3",null,"When click tab, how to move it center?"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/71c277598fff27600479ba12c8cd04aa.jpg",alt:null}))),(0,i.kt)("h3",null,"开发坑点"),(0,i.kt)("p",null,"背景: ",(0,i.kt)("inlineCode",{parentName:"p"},"Tab")," 下划线随着内容栏的滑动而动态滑动。"),(0,i.kt)("p",null,"难点: 如何达到原生的顺滑效果。目前的方案是减少 ",(0,i.kt)("inlineCode",{parentName:"p"},"getBoundingClientRect")," 的调用次数, 将需多次获取的值进行缓存。"),(0,i.kt)("h3",null,"开发坑点(五星)"),(0,i.kt)("p",null,"背景坑点: ",(0,i.kt)("inlineCode",{parentName:"p"},"tab")," 栏是可以滑动的, 在使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"this.contentRectLeft = elm.getBoundingClientRect().left")," 进行缓存时, 在 ",(0,i.kt)("inlineCode",{parentName:"p"},"tab")," 滑动后期待取得的是 ",(0,i.kt)("inlineCode",{parentName:"p"},"tab")," 距离",(0,i.kt)("inlineCode",{parentName:"p"},"当前视口"),"左侧的值, 但是实际获取到的是当前 ",(0,i.kt)("inlineCode",{parentName:"p"},"tab")," 距离滚动条最左侧的值。相关代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"afterChangeTab = (index: number) => {\n  const { tabDirection } = this.props\n  if (tabDirection === 'horizontal') {\n    ...\n    this.tabMove(this.tabMiddleDistance) // ①\n    this.contentRectLeft = (this as any)[`tab${index}`].getBoundingClientRect().left // ②\n    console.log(this.contentRectLeft) // 这个地方打印的是当前 `tab` 距离滚动条最左侧的值\n  }\n}\n\ntabMove = (distance: number) => {\n  const { tabs, tabDirection } = this.props\n  // 如果是水平滑动时且 tab 栏的数量大于 4, tab 栏可滑动\n  if (tabDirection === 'horizontal' && tabs.length > 4) {\n    scrollTo((this as any)[`tabScroll`], distance, 'horizontal')\n  }\n  ...\n}\n")),(0,i.kt)("p",null,"造成的原因是调用 ",(0,i.kt)("inlineCode",{parentName:"p"},"this.tabMove")," 中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"scrollTo")," 方法里调用了 ",(0,i.kt)("inlineCode",{parentName:"p"},"requestAnimationFrame"),", 其也是一个异步的钩子。所以 ② 的代码执行是由于 ",(0,i.kt)("inlineCode",{parentName:"p"},"requestAnimationFrame")," 的执行的！目前的解决方法只能取消 ",(0,i.kt)("inlineCode",{parentName:"p"},"scrollTo")," 方法的调用尽管 tab 的滚动比较僵硬, 但是确保了 ",(0,i.kt)("inlineCode",{parentName:"p"},"this.contentRectLeft")," 缓存的值的准确性。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"tabMove = (distance: number) => {\n  const { tabs, tabDirection } = this.props\n  // 如果是水平滑动时且 tab 栏的数量大于 4, tab 栏可滑动\n  if (tabDirection === 'horizontal' && tabs.length > 4) {\n    // scrollTo 里面有了 requestAnimationFrame 方法, 以及 scrollTo 都是一个异步的钩子, 会造成缓存\n    // scrollTo((this as any)[`tabScroll`], distance, 'horizontal')\n    // ;(this as any)[`tabScroll`].scrollTo({\n    //   left: distance,\n    //   top: 0,\n    //   behavior: 'smooth',\n    // })\n    ;(this as any)[`tabScroll`].scrollLeft = distance\n  }\n  ...\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"多使用小黄鸭笔记法, 就能理出眉目, 理逻辑的时候可能觉得浪费时间, 但是这往往是解决问题最高效的方法。")),(0,i.kt)("h3",null,"关于设计模式"),(0,i.kt)("p",null,"在开发组件 Tabs\\Checkbox\\Radio... 有以下两种模式可以选择"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"配置模式，标签的标题和内容放在 options/children")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<Tabs options={[{\n  content: [],\n  disabled: true,\n}]} />\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"children 模式：")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<Tab>\n  <Tab.item>标签一</Tab.item>\n  <Tab.item>标签二</Tab.item>\n</Tab>\n")),(0,i.kt)("p",null,"相对配置模式, children 模式更加贴近 React 的组件化编程。但是使用者可能对以下写法不生效会产生困惑。因为大多数组件库只会支持 Tab.Item 在 Tab 后面的情况。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"renderChildren = () => {\n  return <>\n    <Tab.item>标签一</Tab.item>\n    <Tab.item>标签二</Tab.item>\n  </>\n}\n\nrender() {\n  return (\n    <Tab>\n      {this.renderChildren}\n    </Tab>\n  )\n}\n")),(0,i.kt)("h3",null,"Tabs 支持传入自定义组件"),(0,i.kt)("p",null,"使用 React.cloneElement 对传入的子组件进行处理是会有问题的, 因为此时只能接受 HTML 节点, 而不接受自定义组件的传入;"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"return React.cloneElement(reactElement, {\n  className: cx(),\n  style: {}\n})\n")),(0,i.kt)("p",null,"只要做如下改造便可以完成接受自定义组件的传入"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"return (\n  <div className={cx()} style={}>\n    { React.cloneElement(reactElement }\n  </div>\n)\n")),(0,i.kt)("h3",null,"一列长度特别长, 一列特别短的特殊处理"),(0,i.kt)("h3",null,"性能优化"),(0,i.kt)("p",null,"默认情况下, 当进一个页面的时候就将 tabs 每一块内容区数据都请求了一遍, 如果每个 tab 页面接口数非常多的时候, 可能会有卡顿问题, 提供两种模式来进行优化:"),(0,i.kt)("p",null,"方式一: 在 Tabs 组件切换 tab 时, 在触发的 onChange 中获取相应数据传入对应组件。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<Tabs\n  tabs={tabs}\n  activeTab={page}\n  onChange={(index, _e) => {\n    if (index === 0) {\n      /* 伪代码: 获取数据 A */\n    } else if (index === 1) {\n      /* 伪代码: 获取数据 B */\n    } else if (index === 2) {\n      /* 伪代码: 获取数据 C */\n    }\n    setPage(index)\n  }}\n>\n  <A data={dataA} />\n  <B data={dataB} />\n  <C data={dataC} />\n</Tabs>\n")),(0,i.kt)("p",null,"方式二: 维护逻辑变量, 这里以 ifRead 是否已读(多多圈为例), 控制 A、B、C 组件的显示。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<Tabs\n  tabs={tabs}\n  activeTab={page}\n  onChange={(index, _e) => setPage(index)}\n>\n  <div>{ifRead0 || page === 0 ? <A /> : null}</div>\n  <div>{ifRead1 || page === 1 ? <B /> : null}</div>\n  <div>{ifRead2 || page === 2 ? <C /> : null}</div>\n</Tabs>\n")),(0,i.kt)("p",null,"相比较一的方式, 方式二的优势是将请求数据的逻辑被拆分到 A、B、C 各个子组件中, 劣势是需要维护逻辑变量。"),(0,i.kt)("h3",null,"Hooks 的闭包问题"),(0,i.kt)("p",null,"2020-03-24 记录: 今天遇到了一个 bug, 花的事件比较久, 值得记录下修复心得:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0b1ee2a477d39ec2550a1ef88c63987a.jpg",alt:null}))),(0,i.kt)("p",null,"川穹说只有安卓机有问题, ios 没问题! 很是奇怪, 就围绕聚焦和安卓机查资料得到 ",(0,i.kt)("inlineCode",{parentName:"p"},"在安卓机下聚焦会触发 resize 事件, ios 则不会触发 resize 的结论"),", 因此定位到罪魁祸首"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"window.addEventListener('resize', () => {})\n")),(0,i.kt)("p",null,"又由于在 hooks 中进行使用, 犯下了闭包陷阱; 最终使用 useRef 解决了问题;"))}c.isMDXComponent=!0},12442:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"如何实现无限制增加行数逻辑?"),(0,i.kt)("p",null,"伪代码: 换行的时候重新给 ",(0,i.kt)("inlineCode",{parentName:"p"},"textArea")," 赋值 ",(0,i.kt)("inlineCode",{parentName:"p"},"scrollHeight"),"。"),(0,i.kt)("h3",null,"注意点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"用户输入的汉字和英文是否要区分对待? 汉字作为 2 个字符还是 1 个字符?")),(0,i.kt)("p",null,"命中汉字作为两个字符的逻辑:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"if (/[^\\x00-\\xff]/gi.test(a)) {\n  ...\n}\n")),(0,i.kt)("h3",null,"用户角度: Textarea 组件的 maxLength 问题"),(0,i.kt)("p",null,"关于 Textarea 组件的超出 maxLength 是否被截断的问题, 思考以下几组情形。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},'粘贴过来直接截断, 提交后可能出问题，想象: "我是你爸爸的朋友", 粘贴后自动截断为"我是你爸爸"还没报错, 也没阻塞提交;'),(0,i.kt)("li",{parentName:"ol"},"我们不少商家可能在多个销售平台售卖, 存在一个平台输入完, 其他平台直接粘贴的需求(所以粘贴的 case 可能比我们以为的多);"),(0,i.kt)("li",{parentName:"ol"},'针对直接输入的情况, 如果总共允许 10 个字, 在当前为 5 个字的情况下, 我在中文输入法的情况下, 连输词组"下午来我家喝下午茶", 按空格建后, 内容截断为"下午来我家", 而且没飘红报错提示, 对商家来说, 可能不知道你做了截断的行为。')))}c.isMDXComponent=!0},4329:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}))}c.isMDXComponent=!0},99941:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"虚拟列表"),(0,i.kt)("h3",null,"IntersectionObserver"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"threshold 属性: 决定了什么时候触发回调函数。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"new IntersectionObserver(\n  entries => {/* ... */},\n  {\n    threshold: [0, 0.25, 0.5, 0.75, 1]\n  }\n)\n")),(0,i.kt)("p",null,"表示当目标元素 0%、25%、50%、75%、100% 可见时, 会触发回调函数。"),(0,i.kt)("h3",null,"应用场景"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"资源懒加载"),(0,i.kt)("li",{parentName:"ul"})),(0,i.kt)("h3",null,"link"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://www.ruanyifeng.com/blog/2016/11/intersectionobserver_api.html"}),"intersectionobserver_api")))}c.isMDXComponent=!0},95198:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"在 React 中构建移动端优先的 web 动画"),(0,i.kt)("p",null,"移动端优先动画是指在移动设备上开发的, 旨在在移动浏览器而非桌面浏览器的上下文中工作的动画。它有着类似原生 App 的交互体验, 尤其是体贴的手势交互, 同时即使在中低档设备上其也具有不错的流畅体验。"),(0,i.kt)("h3",null,"Types of gestures"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Navigational gestures",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Tap"),(0,i.kt)("li",{parentName:"ul"},"Scroll and pan"),(0,i.kt)("li",{parentName:"ul"},"Drag"),(0,i.kt)("li",{parentName:"ul"},"Swipe"),(0,i.kt)("li",{parentName:"ul"},"Pinch"))),(0,i.kt)("li",{parentName:"ul"},"Action gestures",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Tap"),(0,i.kt)("li",{parentName:"ul"},"Long press"),(0,i.kt)("li",{parentName:"ul"},"Swipe"))),(0,i.kt)("li",{parentName:"ul"},"Transform gestures",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Double tap"),(0,i.kt)("li",{parentName:"ul"},"Pinch"),(0,i.kt)("li",{parentName:"ul"},"Compound gestures")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://material.io/design/interaction/gestures.html#types-of-gestures"}),"Types of gestures"))),(0,i.kt)("h3",null,"难点罗列"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"scroll、swipe-to-refresh 会受到浏览器默认行为干扰;"),(0,i.kt)("li",{parentName:"ul"},"触摸反应迟钝, 没有直接操作的感觉;"),(0,i.kt)("li",{parentName:"ul"},"反物理直觉;"),(0,i.kt)("li",{parentName:"ul"},"兼容中、低设备;")),(0,i.kt)("h3",null,"框架方案"),(0,i.kt)("p",null,"The way to take is usually ",(0,i.kt)("inlineCode",{parentName:"p"},"an animation library")," with ",(0,i.kt)("inlineCode",{parentName:"p"},"a gesture hooks"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/koenbok/Framer"}),"Framer")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/react-spring/react-spring"}),"react spring")," + ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/react-spring/react-use-gesture"}),"react-use-gesture")),(0,i.kt)("li",{parentName:"ul"},"animation library(",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/juliangarnier/anime"}),"anime"),") + ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/dogfessional/react-swipeable"}),"react-swipeable")),(0,i.kt)("li",{parentName:"ul"},"animation library(",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/greensock/GSAP"}),"GSAP"),") + ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/hammerjs/hammer.js/"}),"Hammer.js"))),(0,i.kt)("h3",null,"Some Principles"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Immediate Response"),": If not response immediately, it feels super disconnected. ",(0,i.kt)("a",u({parentName:"li"},{href:"https://mobile-first-animation.netlify.com/21"}),"demo"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Carousel 组件, 目前 Tab 的滑动存在缺陷;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Scroll Decay"),": The concepts of scroll decay can help us decide how our UIs should respect to users interaction. ",(0,i.kt)("a",u({parentName:"li"},{href:"https://mobile-first-animation.netlify.com/23"}),"demo"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-webkit-overflow-scrolling: touch"),";(only used in ios > 5, but not success)"),(0,i.kt)("li",{parentName:"ul"},"Picker/DatePicker 组件;"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Rubberbanding"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"PopOver 组件;")))),(0,i.kt)("h3",null,"Touch cancellation"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use the ",(0,i.kt)("inlineCode",{parentName:"li"},"touch-action")," CSS property to disable default browser behaviors with precision.")),(0,i.kt)("p",null,"use touch-action before:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/2f284758868304dabad94d2a25500562.gif",alt:null}))),(0,i.kt)("p",null,"use touch-action after:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/a458a78d287e08627f4dd6b1502fc33e.gif",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.chenhuijing.com/touch-action/"}),"Interactive touch-action demo")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action"}),"Mozilla introduction to touch-action"))),(0,i.kt)("h3",null,"Passive event listeners"),(0,i.kt)("p",null,"If you decide not to cancel the scroll, you can set the ",(0,i.kt)("strong",{parentName:"p"},"passive")," in the addEventListener. If that, it can enable the browsers to scroll the page immediately."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://developers.google.com/web/updates/2016/06/passive-event-listeners"}),"passive-event-listeners"))),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md"}),"Passive events listener explainer"))),(0,i.kt)("h3",null,"Scroll"),(0,i.kt)("p",null,"Problem 1: scroll chaining"),(0,i.kt)("p",null,"When the user reachs a 'scroll boundary', the content behind the drawer or modal starts scrolling!"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://developers.google.com/web/updates/images/2017/11/overscroll-behavior/drawer-scroll.mp4?hl=zh_cn",alt:null}))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5ad52dbc5716fb92b823898557cc94fa.gif",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://drafts.csswg.org/css-overscroll/"}),"overscroll-behavior"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"auto: default;"),(0,i.kt)("li",{parentName:"ul"},"contain: prevent scroll chaining, keep the overflow effects within the node self;"),(0,i.kt)("li",{parentName:"ul"},"none: prevent scroll chaining, prevent overflow effects within the node self.")))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/130f116b88477fba5725033e4245927a.jpg",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/web/updates/2017/11/overscroll-behavior"}),"Overscroll behavior"),": read Introducing overscroll-behavior")),(0,i.kt)("h3",null,"resource links"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.apple.com/videos/play/wwdc2018/803/"}),'Apple\'s "Designing Fluid Interfaces" talk')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/@nathangitter/building-fluid-interfaces-ios-swift-9732bb934bf5"}),"Implementation of iOS animation principles")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.youtube.com/watch?v=laPsceJ4tTY&list=PLPxbbTqCLbGHPxZpw4xj_Wwg8-fdNxJRh&index=21"}),"Progressive Web Animations | Alexandra Holachek"))),(0,i.kt)("h3",null,"Spring Animations"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/jenox/UIKit-Playground/tree/master/01-Demystifying-UIKit-Spring-Animations"}),"springs in animations"))),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/21585e988e682457131948346fc8949d.jpg",alt:null}))),(0,i.kt)("h4",null,"Springs & Gestures"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/ios-os-x-development/gestures-in-fluid-interfaces-on-intent-and-projection-36d158db7395"}),"In-depth look at projection"),": 以借助这里的 Projection 公式来优化改进"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://ariya.io/2013/08/javascript-kinetic-scrolling-part-1"}),"In-depth exploration of momentum scrolling"))),(0,i.kt)("h4",null,"Touch on the web"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://developers.google.com/web/fundamentals/design-and-ux/input/touch"}),"Google introduction to touch on the web")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events"}),"Mozilla introduction to pointer events"))))}c.isMDXComponent=!0},80544:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"点击按钮实现复制文字"),(0,i.kt)("p",null,"本质是 ",(0,i.kt)("inlineCode",{parentName:"p"},"document.execCommand()")," api 的使用, 见如下 demo:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function copy(str: string) {\n  return new Promise(function(resolve, reject) {\n    let success = false\n    function listener(e: any) {\n      e.clipboardData.setData('text/plain', str)\n      e.preventDefault()\n      success = true\n    }\n    document.addEventListener('copy', listener)\n    document.execCommand('copy')\n    document.removeEventListener('copy', listener)\n    success ? resolve() : reject()\n  })\n}\n\nusage:\ncopy(...).then(() => {})\n")))}c.isMDXComponent=!0},40268:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"方案调研"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://blog.csdn.net/m0_37792354/article/details/82012278"}),"https://blog.csdn.net/m0_37792354/article/details/82012278"),": 这个方案可以实现, 利用动态切换样式表, 每种主题需要一份样式, 可以实现但后期维护成本高(不考虑);"),(0,i.kt)("li",{parentName:"ol"},"CSS Variables 的方案, 基于项目本身是 scss 不考虑此种方案, 但是其浏览器支持度还是可以的;")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/fe11d88b92efa1249d58fe13d5c737dd.jpg",alt:null}))),(0,i.kt)("ol",u({},{start:3}),(0,i.kt)("li",{parentName:"ol"},"入口文件引入自定义变量(参照 antd/饿了么/taro 的方案); 因为组内组件使用了 css module, 所以该方案不能适用我们的业务场景;"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ElemeFE/element/issues/3054#issuecomment-282527907"}),"浏览器端涂色板换色方案"),";")),(0,i.kt)("p",null,"所以最终方案分为两步:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"编译阶段在 sass-loader 中注入颜色生成算法;"),(0,i.kt)("li",{parentName:"ul"},"浏览器调色板可以使用 element、taro 的正则替换思路;")),(0,i.kt)("h3",null,"antd"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"整理组件将和颜色相关的属性进行整理梳理出一份 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ant-design/ant-design/blob/c6f991d5af/components/style/themes/default.less"}),"default.less"),";"),(0,i.kt)("li",{parentName:"ol"},"整理一份 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ant-design/ant-design/blob/c6f991d5af/components/style/color/colors.less"}),"color.less")," 文件, 颜色由 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ant-design/ant-design/blob/c6f991d5af/components/style/color/colorPalette.less"}),"colorPalette.less")," 动态生成;")),(0,i.kt)("p",null,"用户使用方式:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"选择一个颜色(切换主题色)"),(0,i.kt)("li",{parentName:"ol"},"下载"),(0,i.kt)("li",{parentName:"ol"},"引用")),(0,i.kt)("h3",null,"相关项目"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"%E5%AE%9E%E6%97%B6%E6%8D%A2%E8%89%B2%E6%96%B9%E6%A1%88"}),"theme-preview"),":",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"先把默认主题文件中涉及到颜色的 CSS 值替换成关键词：",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ElementUI/theme-preview/blob/master/src/app.vue#L250-L274"}),"https://github.com/ElementUI/theme-preview/blob/master/src/app.vue#L250-L274"),";"),(0,i.kt)("li",{parentName:"ol"},"根据用户选择的主题色生成一系列对应的颜色值：",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ElementUI/theme-preview/blob/master/src/utils/formula.json"}),"https://github.com/ElementUI/theme-preview/blob/master/src/utils/formula.json"),";"),(0,i.kt)("li",{parentName:"ol"},"把关键词再换回刚刚生成的相应的颜色值：",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ElementUI/theme-preview/blob/master/src/utils/color.js"}),"https://github.com/ElementUI/theme-preview/blob/master/src/utils/color.js"),";"),(0,i.kt)("li",{parentName:"ol"},"直接在页面上加 style 标签，把生成的样式填进去：",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ElementUI/theme-preview/blob/master/src/app.vue#L198-L211"}),"https://github.com/ElementUI/theme-preview/blob/master/src/app.vue#L198-L211"),";"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ElementUI/theme-chalk"}),"theme-chalk"),";")),(0,i.kt)("h3",null,"scss 中使用 antd 来自定义主题"),(0,i.kt)("p",null,"如果业务方使用 less/css: 基于 css modules 的 hash 不能覆盖的点，",(0,i.kt)("del",{parentName:"p"},"一个方案是本地打好包给业务方使用方案了(兜底方案)，但是比较笨重(相当于是要打包出多份不同的 css 样式文件在项目中了, 然后业务方每要一种主题就要新增维护一份打包文件)")),(0,i.kt)("p",null,"如果业务方使用 scss: 如果 css modules hash 不能去掉, 有一个 scss + css variable 的方案可以代替 sass-loader 方案(成本是要写相应的插件); 如果 css modules hash 能去掉, 可以使用之前提到的 taro 上的第一种方案, 在 app 进入的地方引入主题色进行覆盖 scss Variable;"),(0,i.kt)("h3",null,"自适应颜色"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"colorPalette")," 函数。"),(0,i.kt)("p",null,"RGB 可以方便的进行计算机存储和读取, 但对人进行颜色判断十分不友好, 因此有了 HSB/HSV。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"RGB: 面向硬件"),(0,i.kt)("li",{parentName:"ul"},"HSB: 面向用户")),(0,i.kt)("p",null,"HSB(Hue, Saturation, Brightness) 分别表示色调(色相), 饱和度, 亮度。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://baike.baidu.com/item/HSB%E6%A8%A1%E5%9E%8B"}),"HSB 模型")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://baike.baidu.com/item/HSV/547122"}),"HSV 模型"),": 有关 H、S 的解释这个更清晰"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://ant.design/docs/spec/colors-cn"}),"antd 色彩"))),(0,i.kt)("h3",null,"Version One"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"version one"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-scss"}),"$theme-color: #1199ee !default;\n\n/* mix white */\n@function tint($theme-color, $percent) {\n  @return mix(#fff, $theme-color, $percent);\n}\n\n/* mix black */\n@function shade($theme-color, $percentage) {\n  @return mix(black, $theme-color, $percentage);\n}\n\n/* There are ten color in on theme, from left to right, they are\n*  tint($theme-color, 50%), tint($theme-color, 40%), tint($theme-color, 30%), tint($theme-color, 20%), tint($theme-color, 10%),\n*  $theme-color, shade($theme-color, 10%), shade($theme-color, 20%), shade($theme-color, 30%), shade($theme-color, 40%)\n,*/\n@function colorPallete1($theme-color) {\n  @return tint($theme-color, 50%);\n}\n\n@function colorPallete2($theme-color) {\n  @return tint($theme-color, 40%);\n}\n\n@function colorPallete3($theme-color) {\n  @return tint($theme-color, 30%);\n}\n\n/* 悬停态 */\n@function colorPallete4($theme-color) {\n  @return tint($theme-color, 20%);\n}\n\n@function colorPallete5($theme-color) {\n  @return tint($theme-color, 10%);\n}\n\n/* 主色 */\n@function colorPallete6($theme-color) {\n  @return $theme-color;\n}\n\n@function colorPallete7($theme-color) {\n  @return shade($theme-color, 10%);\n}\n\n/* 点击态 */\n@function colorPallete8($theme-color) {\n  @return shade($theme-color, 20%);\n}\n\n@function colorPallete9($theme-color) {\n  @return shade($theme-color, 30%);\n}\n\n@function colorPallete10($theme-color) {\n  @return shade($theme-color, 40%);\n}\n"))),(0,i.kt)("h3",null,"Sass 踩坑"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"sass-loader")," 的 options 配置要参阅 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://sass-lang.com/documentation/js-api"}),"sass 文档")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"I think itl's necessary to prompt what features can be used in the options.😄 And the usage of the custom function is found in ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/webpack-contrib/sass-loader/issues/210"}),"this issue")," instead of doc.")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://sass-lang.com/documentation/js-api#new-types-color-red-green-blue-alpha-1"}),"sass 中使用 JavaScript 的口子")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/bgrins/TinyColor"}),"tinyColor"))),(0,i.kt)("h3",null,"设计师的角度"),(0,i.kt)("h4",null,"关于悬浮态"),(0,i.kt)("p",null,"悬浮态颜色变浅: hover 相当于按钮被鼠标吸起来了，所以上升后离光源更近，所以变白了。（类似前面某位同学提到的：距离越近越亮"),(0,i.kt)("p",null,"悬浮态颜色变深: 商家/客服显示器很差，Hover 上去底色变亮了字是白的，有些情况影响识别度"),(0,i.kt)("h3",null,"参阅资料"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.im/post/5ca41617f265da3092006155"}),"聊一聊前端换肤")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/32422584"}),"Ant Design 色板生成算法演进之路"))),(0,i.kt)("h3",null,"CSS Variable"),(0,i.kt)("p",null,"TODO:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"全局/局部变量",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"或逻辑: var(--a, var(--b))")))))}c.isMDXComponent=!0},68137:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.cn/post/6844904168591736846"}),"解读新一代 Web 性能体验和质量指标"))))}c.isMDXComponent=!0},69021:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"循环引用的坑点"),(0,i.kt)("p",null,"在组件开发中引用方式写法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-tsx"}),"import Popup from '../Popup'\nimport List from '../List'\n\nconsole.log(Popup, List) // f Popup f List\n")),(0,i.kt)("p",null,"而不要使用如下写法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-tsx"}),"import { Popup, List } from '../index' // 这样子引用会带进当前开发的组件本省\nconsole.log(Popup, List) // undefined undefined\n")),(0,i.kt)("p",null,"原因是因为下面这种写法会带进当前开发的组件本身从而导致循环引用。循环引用会导致在编译态输出的结果为 undefined。"),(0,i.kt)("h3",null,"为什么要受控模式"),(0,i.kt)("p",null,"尽管受控模式相对非受控模式会多传入 ",(0,i.kt)("inlineCode",{parentName:"p"},"value"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"onChange")," 属性, 但它能有效避免组件库中碰到的一些反模式的坑。"),(0,i.kt)("p",null,"在 Dan 的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://overreacted.io/writing-resilient-components/"}),"编写具有弹性的组件"),"一文中写到如下几个原则:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"不要将 ",(0,i.kt)("inlineCode",{parentName:"li"},"props")," 赋给 ",(0,i.kt)("inlineCode",{parentName:"li"},"state"))),(0,i.kt)("p",null,"理由: 如果不结合 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidUpdate")," 使用会无法读取到更新的数据; 结合了 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidUpdate")," 在其进行 ",(0,i.kt)("inlineCode",{parentName:"p"},"setState")," 又会进行多一次的 render。"),(0,i.kt)("p",null,"解决方案"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"直接在 render 中获取父组件传下来的数据; 结合 useMemo 进行优化;"),(0,i.kt)("li",{parentName:"ul"},"只使用受控组件或者只使用非受控组件;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"针对一些复杂数据使用 useMemo 以及 memorize-one 进行处理。或者 ",(0,i.kt)("inlineCode",{parentName:"p"},"hooks")," 中在 render 内使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"useMemo"),"; ",(0,i.kt)("inlineCode",{parentName:"p"},"class")," 中在 render 内使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"memorize-one"))),(0,i.kt)("h3",null,"关于 Typescript 与 DefaultProps 的冲突"),(0,i.kt)("h4",null,"class"),(0,i.kt)("p",null,"针对 ",(0,i.kt)("inlineCode",{parentName:"p"},"TypeScript")," 中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"interface")," 中必填可填(是否带 ? 可选)与 React 中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"defaultProps")," 是不兼容的。造成的影响是 ",(0,i.kt)("inlineCode",{parentName:"p"},"defaultProps")," 里若是不填写完整 ",(0,i.kt)("inlineCode",{parentName:"p"},"TypeScript")," 中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"interface")," 属性则会标红。为了解决这个现象解决方案如下："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"interface {\n  mustFillIn: number,\n  mayFillWithDefaultValue: number, // 可选的带默认值的不用带上问号\n  mayFillWithoutDefaultValue?: number // 可选的不带默认值的带上问号\n}\n")),(0,i.kt)("p",null,"在 ",(0,i.kt)("inlineCode",{parentName:"p"},"TypeScript")," 中书写 ",(0,i.kt)("inlineCode",{parentName:"p"},"React")," 时可以这样:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"class Divider extends React.Component<DividerProps, any> {\n\n  static defaultProps: Pick<DividerProps, 'mayFillWithDefaultValue' | 'mayFillWithoutDefaultValue'> = {\n    mayFillWithDefaultValue: 12345\n  }\n\n  render() {\n    return (\n      <div>demo</div>\n    )\n  }\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Pick 针对有必传值的场景做区分"),(0,i.kt)("li",{parentName:"ul"},"interface 中的 ? 针对有默认值和无默认值做区分")),(0,i.kt)("h4",null,"hooks"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/764623d18eeb45724da661a0b6fbb679.jpg",alt:null}))),(0,i.kt)("h3",null,"组件异步的设计"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方式一: 使用方通过返回 Promise 来告知组件已完成异步操作;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const demo = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      console.log('模拟异步接口')\n      resolve()\n    }, 2000)\n  })\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方式二: 使用方通过调用 ",(0,i.kt)("inlineCode",{parentName:"li"},"done()")," 来告知组件已完成异步操作;(组件内完成对 Promise 的封装)")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const demo = (done) => {\n  setTimeout(() => {\n    console.log('模拟异步接口')\n    done()\n  }, 2000)\n}\n")),(0,i.kt)("p",null,"从组件设计的角度来说, 方式一对组件内部的维护更加友好; 从使用者的角度来说, 方式二的使用更为便捷, 但是重构的成本会变大。"),(0,i.kt)("p",null,"如下是针对方式二的组件的封装方式。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 此处 fn 为外面传入的 demo 函数\nif (fn.length === 1) {\n  new Promise((resolve: any) => {\n    fn(resolve)\n  }).then(() => {\n    ...\n  })\n}\n")),(0,i.kt)("h3",null,"组件样式覆盖的问题"),(0,i.kt)("p",null,"背景: 业务 a 使用了组件包 b 以及工具包 c, 其中 c 也依赖了旧版本的 b。此时业务 a 中会有两个组件包 b 的样式, 此时会碰到修改了组件包 b 的样式, 而样式被老版本的 b 覆盖的情况。这个时候有什么解决方法呢?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方案一: 打包给样式带上版本号;"),(0,i.kt)("li",{parentName:"ul"},"方案二: 让工具包 c 把组件包 b 放在 ",(0,i.kt)("inlineCode",{parentName:"li"},"pureDependencies")," 中, 业务方的 ",(0,i.kt)("inlineCode",{parentName:"li"},"dependency")," 统一维护组件包 b;")),(0,i.kt)("h3",null,"业务中同时使用 Button 组件(包含 Icon 组件) 与 Icon 组件如何避免 Icon 组件的样式打入两份?"),(0,i.kt)("p",null,"方法: src 目录下的组件中的 style 文件中建立 index.tsx 文件"),(0,i.kt)("h3",null,"开源计划"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"完善 mobile 组件在 pc 端站点的浏览效果;"),(0,i.kt)("li",{parentName:"ul"},"beast-mobile 语言包支持、为后续站点切换双语环境做准备;"),(0,i.kt)("li",{parentName:"ul"},"beast-mobile 中、英文文章简版输出, 调研专栏环境社区的创建(Medium、Twitter、知乎、Github、StackOverflow、SegmentFault);")),(0,i.kt)("h3",null,"组件通用 API 设计"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"onDisabled: (record: T) => boolean",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"ListView、Checkbox 组件公用;"),(0,i.kt)("li",{parentName:"ul"},"场景: 提供给业务更加充分的控制权")))),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://dev.to/selbekk/the-10-component-commandments-2a7f"}),"The 10 Component Commandments"),": 组件开发方法总结, 读下来感觉不错;")),(0,i.kt)("h3",null,"组件"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"scss"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"语义化样式模板"),(0,i.kt)("li",{parentName:"ul"},"关联计算逻辑"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"post-install")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"e2e 测试")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"random notes"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"沉淀一些常⻅的测试模式, 并形成易用的 utils (mock & helper) 一些参考关键词 : date, timer, async & promise, random, user-agent, browser feature detect, console, process.env, jsdom layout"),(0,i.kt)("li",{parentName:"ul"},"科学使用 snapshot"),(0,i.kt)("li",{parentName:"ul"},"jest 的 test.todo 挺不错"),(0,i.kt)("li",{parentName:"ul"},"通过写测试的过程, 反过来思考组件发现遗漏 Edge cases, 实现 是否合理\n可能 react-testing-library 会更好 (enzyme 可直接访问 state, 容易写出一些没意义的测试)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"sass 技巧"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"沉淀 function utils, 并统一维护\n• 善用 list & map 维护枚举型配置\n• 善用 ",(0,i.kt)("inlineCode",{parentName:"li"},"interpolation"),", 让同质化分支模版化\n• 逻辑关系组织 : 如 “颜色管理方案”"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/plopjs/plop"}),"plop")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"将重复性繁琐工作打包"),(0,i.kt)("li",{parentName:"ul"},"善用内容型模板",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"创建一个 组件子包\n• 创建一个 React 组件 (class or functional)\n• 创建一个完整的 demo ⻚面\n• 创建一个单独的 demo case\n• 将组件追加到某个合包里"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"如何统计组件使用量"),(0,i.kt)("p",{parentName:"li"},"DRY 原则: Don't Repeat Youself"))),(0,i.kt)("p",null,"Some of these CSS properties have shorthand versions that use the namespace as the property name. For these, you can write both the shorthand value and the more explicit nested versions."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-scss"}),".info-page {\n  margin: auto {\n    bottom: 10px;\n    top: 2px;\n  }\n}\n")),(0,i.kt)("h3",null,"组件属性间尽量减少耦合关系"),(0,i.kt)("p",null,"比如添加了 A 属性 B 属性在某些情况会失效。又或者 C 属性必须在 D 属性存在的时候才生效。"),(0,i.kt)("p",null,"比如以 Upload 组件为例: 背景逻辑是: 最大上传图片数量是 2, 当上传了 2 张图片以后就不显示继续上传了。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"showAdd = () => {\n  const { selectable, maxLength, files } = this.props\n  if (maxLength !== undefined) {\n    if (files.length >= maxLength) {\n      return false\n    }\n    return true\n  }\n  return selectable\n}\n")),(0,i.kt)("p",null,"业务方举了反例: 例如有些商品图片是标品，图片是平台自己控制的，也许不满足最大数，但是不允许商家去修改的。\n配置了 maxLength={10}, 图片数量只有 3 张时, 不显示增加按钮的需求当前就不能实现。"))}c.isMDXComponent=!0},14073:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"组件设计 —— 重新认识受控与非受控组件"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/21ec115261725fc7a37543143c1e89ed.jpg-400",alt:null}))),(0,i.kt)("h3",null,"重新定义受控与非受控组件的边界"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/3e1327ce86f89d2763d8fed9c169887d.jpg-400",alt:null}))),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/uncontrolled-components.html"}),"React 官网中"),"对非受控组件与受控组件作了如图中下划线的边界定义。一经推敲, 该定义是缺乏了些",(0,i.kt)("inlineCode",{parentName:"p"},"完整性"),"和",(0,i.kt)("inlineCode",{parentName:"p"},"严谨性"),"的, 比如针对非表单组件(弹框、轮播图)如何划分受控与非受控的边界? 又比如非受控组件是否真的如文案上所说的数据的展示与变更都由 dom 自身接管呢?"),(0,i.kt)("p",null,"在非受控组件中, 通常业务调用方只需传入一个",(0,i.kt)("inlineCode",{parentName:"p"},"初始默认值"),"便可使用该组件。以 Input 组件为例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 组件提供方\nfunction Input({ defaultValue }) {\n  return <input defaultValue={defaultValue} />\n}\n\n// 调用方\nfunction Demo() {\n  return <Input defaultValue={1} />\n}\n")),(0,i.kt)("p",null,"在受控组件中, 数值的",(0,i.kt)("inlineCode",{parentName:"p"},"展示与变更"),"则分别由组件的 ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," 与 ",(0,i.kt)("inlineCode",{parentName:"p"},"setState")," 接管。同样以 Input 组件为例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 组件提供方\nfunction Input() {\n  const [value, setValue] = React.useState(1)\n  return <input value={value} onChange={e => setValue(e.target.value)} />\n}\n\n// 调用方\nfunction Demo() {\n  return <Input />\n}\n")),(0,i.kt)("p",null,"有意思的一个问题来了, ",(0,i.kt)("inlineCode",{parentName:"p"},"Input")," 组件到底是受控的还是非受控的? 我们甚至还可以对代码稍加改动成 ",(0,i.kt)("inlineCode",{parentName:"p"},"<Input defaultValue={1} />")," 的最初调用方式:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 组件提供方\nfunction Input({ defaultValue }) {\n  const [value, setValue] = React.useState(defaultValue)\n  return <input value={value} onChange={e => setValue(e.target.value)} />\n}\n\n// 调用方\nfunction Demo() {\n  return <Input defaultValue={1} />\n}\n")),(0,i.kt)("p",null,"尽管此时 Input 组件本身是一个受控组件, 但与之相对的调用方失去了更改 Input 组件值的",(0,i.kt)("inlineCode",{parentName:"p"},"控制权"),", 所以对调用方而言, Input 组件是一个非受控组件。值得一提的是, ",(0,i.kt)("inlineCode",{parentName:"p"},"以非受控组件的使用方式去调用受控组件"),"是一种反模式, 在下文中会分析其中的弊端。"),(0,i.kt)("p",null,"如何做到不管对于组件提供方还是调用方 Input 组件都为受控组件呢? 提供方让出控制权即可, 调整代码如下"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://codesandbox.io/s/clever-montalcini-kysbg"}),"codesandbox")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 组件提供方\nfunction Input({ value, onChange }) {\n  return <input value={value} onChange={onChange} />\n}\n\n// 调用方\nfunction Demo() {\n  const [value, setValue] = React.useState(1)\n  return <Input value={value} onChange={e => setValue(e.target.value)} />\n}\n")),(0,i.kt)("p",null,"经过上述代码的推演后, 概括如下: 受控以及非受控组件的边界划分取决于",(0,i.kt)("inlineCode",{parentName:"p"},"当前组件对于子组件值的变更是否拥有控制权"),"。如若有则该子组件是当前组件的受控组件; 如若没有则该子组件是当前组件的非受控组件。"),(0,i.kt)("h3",null,"职能范围"),(0,i.kt)("p",null,"基于调用方对于受控组件拥有控制权这一认知, 因此受控组件相较非受控组件能赋予调用方更多的定制化职能。这一思路与软件开发中的",(0,i.kt)("a",u({parentName:"p"},{href:"https://baike.baidu.com/item/%E5%BC%80%E6%94%BE%E5%B0%81%E9%97%AD%E5%8E%9F%E5%88%99"}),"开放/封闭原则"),"有异曲同工之妙, 同时让笔者受益匪浅的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://kentcdodds.com/blog/inversion-of-control"}),"Inversion of Control")," 也是类似的思想。"),(0,i.kt)("p",null,"借助受控组件的赋能, 以 Input 组件为例, 比如调用方可以更为自由地对值进行校验限制, 又比如在值发生变更时执行一些额外逻辑。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 组件提供方\nfunction Input({ value, onChange }) {\n  return <input value={value} onChange={onChange} />\n}\n\n// 调用方\nfunction Demo() {\n  const [value, setValue] = React.useState(1)\n  return <Input value={value} onChange={e =>\n    // 只支持数值的变更\n    if (/\\D/.test(e.target.value)) return\n    setValue(e.target.value)}\n  />\n}\n")),(0,i.kt)("p",null,"因此综合基础组件",(0,i.kt)("inlineCode",{parentName:"p"},"扩展性"),"与",(0,i.kt)("inlineCode",{parentName:"p"},"通用性"),"的考虑, 受控组件的职能相较非受控组件更加宽泛, 建议",(0,i.kt)("inlineCode",{parentName:"p"},"优先使用受控组件"),"来构建基础组件。"),(0,i.kt)("h3",null,"反模式 —— 以非受控组件的使用方式调用受控组件"),(0,i.kt)("p",null,"首先何谓反模式(可以看文末的案例)? 笔者将其总结为",(0,i.kt)("inlineCode",{parentName:"p"},"增大隐性 bug 出现概率的模式"),", 该模式是",(0,i.kt)("inlineCode",{parentName:"p"},"最佳实践的对立经验"),"。如若使用了反模式就不得不花更多的精力去避免潜在 bug。官网对反模式也有很好的",(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#common-bugs-when-using-derived-state"}),"概括总结"),"。"),(0,i.kt)("p",null,"缘何上文提到以非受控组件的使用方式去调用受控组件是一种反模式? 观察 Input 组件的第一行代码, 其将 defaultValue 赋值给 value, 这种",(0,i.kt)("inlineCode",{parentName:"p"},"将 props 赋值给 state")," 的赋值行为在一定程度上会增加某些隐性 bug 的出现概率。"),(0,i.kt)("p",null,"比如在切换导航栏的场景中, 恰巧两个导航中传进组件的 defaultValue 是相同的值, 在导航切换的过程中便会将导航一中的 Input 的状态值带到导航二中, 这显然会让使用方感到困惑。",(0,i.kt)("a",u({parentName:"p"},{href:"https://codesandbox.io/s/controllerinput-bobkp"}),"codesandbox")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 组件提供方\nfunction Input({ defaultValue }) {\n  // 反模式\n  const [value, setValue] = React.useState(defaultValue)\n  React.useEffect(() => {\n    setValue(defaultValue)\n  }, [defaultValue])\n  return <input value={value} onChange={e => setValue(e.target.value)} />\n}\n\n// 调用方\nfunction Demo({ defaultValue }) {\n  return <Input defaultValue={defaultValue} />\n}\n\nfunction App() {\n  const [tab, setTab] = React.useState(1)\n  return (\n    <>\n      {tab === 1 ? <Demo defaultValue={1} /> : <Demo defaultValue={1} />}\n      <button onClick={() => (tab === 1 ? setTab(2) : setTab(1))}>\n        切换 Tab\n      </button>\n    </>\n  )\n}\n")),(0,i.kt)("p",null,"如何避免使用该反模式同时有效解决问题呢? 官方提供了两种较为优质的解法, 笔者将其留给大家思考。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"方法一: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-controlled-component"}),"使用完全受控组件"),"(更为推荐)"),(0,i.kt)("li",{parentName:"ol"},"方法二: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-uncontrolled-component-with-a-key"}),"使用完全非受控组件 + key"))),(0,i.kt)("h3",null,"反模式案例"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用过 ",(0,i.kt)("inlineCode",{parentName:"li"},"getDerivedStateFromProps")," 么? 了解它的反模式么? 如何避免?")),(0,i.kt)("p",null,"来看下使用 Derived 会导致的常见 bug:"),(0,i.kt)("h4",null,"反模式一: 无条件复制 props 到 state"),(0,i.kt)("p",null,"案例: 在开发 ",(0,i.kt)("inlineCode",{parentName:"p"},"Picker 组件"),"的时候, 如下图浮层内的数据源有外部传进的 props 属性以及浮层内进行滑动的 state。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/7614ba8c5be96ee769b8a68112848700.jpg",alt:null}))),(0,i.kt)("p",null,"如果这样子写大家看看是否有问题"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Picker extends Component {\n  state = {\n    data: this.props.data\n  }\n\n  getDerivedStateFromProps(props, state) {\n    if (JSON.stringify(props.data) !== JSON.stringify(state.data)) {\n      return {\n        data: props.data\n      }\n    }\n    return null\n  }\n  ...\n}\n")),(0,i.kt)("p",null,"这样子写代码当在浮层上进行滑动时, state 的变化并不会生效, 这是为什么呢, 官网上截图如下"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/1d13387bf1d927c36cf3d1a0feaf3134.jpg",alt:null}))),(0,i.kt)("p",null,"此时的 state 变化使 Picker 父组件重新 render 后会造成 ",(0,i.kt)("inlineCode",{parentName:"p"},"getDerivedStateFromProps")," 的调用, 导致 JSON.stringify(props.data)、JSON.stringify(state.data) 间一直会不相等, 所以返回的一直是 props。"),(0,i.kt)("h4",null,"反模式二: 当 props 改变的时候执行重置 state"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Picker extends Component {\n  state = {\n    data: this.props.data\n  }\n\n  getDerivedStateFromProps(props, state) {\n    if (JSON.stringify(props.data) !== JSON.stringify(this.props.data)) {\n      return {\n        data: props.data\n      }\n    }\n    return null\n  }\n  ...\n}\n")),(0,i.kt)("p",null,"这样子比第一种情况好, 大多数情况是没问题的。但是有时候会出现 ",(0,i.kt)("inlineCode",{parentName:"p"},"JSON.stringify(props.data)"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"JSON.stringify(this.props.data)")," 相等的情况, 这种情况下这样使用就会失效了。"))}c.isMDXComponent=!0},64047:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Fiber 的数据结构"),(0,i.kt)("p",null,"此小节会通过两个 ",(0,i.kt)("inlineCode",{parentName:"p"},"demo")," 来展示 ",(0,i.kt)("inlineCode",{parentName:"p"},"Stack Reconciler")," 以及 ",(0,i.kt)("inlineCode",{parentName:"p"},"Fiber Reconciler")," 的数据结构。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/7621091ae74df1bbd8b00586128a7d44.jpg-300v",alt:null}))),(0,i.kt)("p",null,"首先用代码表示上图节点间的关系。比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"a1 节点"),"下有 ",(0,i.kt)("inlineCode",{parentName:"p"},"b1、b2、b3 节点"),", 就可以把它们间的关系写成 ",(0,i.kt)("inlineCode",{parentName:"p"},"a1.render = () => [b1, b2, b3]"),";"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var a1 = { name: 'a1', render = () => [b1, b2, b3] }\nvar b1 = { name: 'b1', render = () => [c1] }\nvar b2 = { name: 'b2', render = () => [c2] }\nvar b3 = { name: 'b3', render = () => [] }\nvar c1 = { name: 'c1', render = () => [d1] }\nvar c2 = { name: 'c2', render = () => [] }\nvar d1 = { name: 'd1', render = () => [d2] }\nvar d2 = { name: 'd2', render = () => [] }\n")),(0,i.kt)("h4",null,"Stack Reconciler"),(0,i.kt)("p",null,"在 ",(0,i.kt)("inlineCode",{parentName:"p"},"React 16")," 之前，节点之间的关系可以用数据结构中",(0,i.kt)("inlineCode",{parentName:"p"},"树的深度遍历"),"来表示。"),(0,i.kt)("p",null,"如下实现 ",(0,i.kt)("inlineCode",{parentName:"p"},"walk")," 函数, 将深度遍历的节点打印出来。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"walk(a1)\n\nfunction walk(instance) {\n  if (!instance) return\n  console.log(instance.name)\n  instance.render().map(walk)\n}\n")),(0,i.kt)("p",null,"输出结果为: ",(0,i.kt)("inlineCode",{parentName:"p"},"a1 b1 c1 d1 d2 b2 c2 b3")),(0,i.kt)("h4",null,"Fiber Reconciler"),(0,i.kt)("p",null,"在 ",(0,i.kt)("inlineCode",{parentName:"p"},"React 16")," 中，节点之间的关系可以用数据结构中的",(0,i.kt)("inlineCode",{parentName:"p"},"链表"),"来表示。"),(0,i.kt)("p",null,"节点之间的链表有三种情形, 用图表示如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/d7378495a2f16e9058c80326705465f4.jpg-300v",alt:null}))),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"父节点到子节点(红色虚线)"),(0,i.kt)("li",{parentName:"ol"},"同层节点(黄色虚线)"),(0,i.kt)("li",{parentName:"ol"},"子节点到父节点(蓝色虚线)")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"父节点指向第一个子节点, 每个子节点都指向父节点，同层节点间是单向链表。")),(0,i.kt)("p",null,"首先, 构建节点的数据结构, 如下所示:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var FiberNode = function(instance) {\n  this.instance = instance\n  this.parent = null\n  this.sibling = null\n  this.child = null\n}\n")),(0,i.kt)("p",null,"然后创建一个将节点串联起来的 ",(0,i.kt)("inlineCode",{parentName:"p"},"connect")," 函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var connect = function(parent, childList) {\n  parent.child = childList.reduceRight((prev, current) => {\n    const fiberNode = new FiberNode(current)\n    fiberNode.parent = parent\n    fiberNode.sibling = prev\n    return fiberNode\n  }, null)\n\n  return parent.child\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在 JavaScript 中实现链表的数据结构可以巧用 reduceRight")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"connect")," 函数中实现了上述链表关系。可以像这样使用它:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var parent = new FiberNode(a1)\nvar childFirst = connect(parent, a1.render())\n")),(0,i.kt)("p",null,"这样子便完成了 ",(0,i.kt)("inlineCode",{parentName:"p"},"a1 节点"),"指向 ",(0,i.kt)("inlineCode",{parentName:"p"},"b1 节点"),"的链表、",(0,i.kt)("inlineCode",{parentName:"p"},"b1、b2、b3 节点间"),"的单向链表以及 ",(0,i.kt)("inlineCode",{parentName:"p"},"b1、b2、b3 节点"),"指向 ",(0,i.kt)("inlineCode",{parentName:"p"},"a1 节点"),"的链表。"),(0,i.kt)("p",null,"最后剩下 ",(0,i.kt)("inlineCode",{parentName:"p"},"goWalk")," 函数将全部节点给遍历完。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 打印日志以及添加列表\nvar walk = function(node) {\n  console.log(node.instance.name)\n  const childLists = node.instance.render()\n  let child = null\n  if (childLists.length > 0) {\n    child = connect(node, childLists)\n  }\n  return child\n}\n\nvar goWalk = function(root) {\n  let currentNode = root\n\n  while (true) {\n    const child = walk(currentNode)\n    // 如果有子节点\n    if (child) {\n      currentNode = child\n      continue\n    }\n\n    // 如果没有相邻节点, 则返回到父节点\n    while (!currentNode.sibling) {\n      currentNode = currentNode.parent\n      if (currentNode === root) {\n        return\n      }\n    }\n\n    // 相邻节点\n    currentNode = currentNode.sibling\n  }\n}\n\n// 调用\ngoWalk(new FiberNode(a1))\n")),(0,i.kt)("p",null,"打印结果为 ",(0,i.kt)("inlineCode",{parentName:"p"},"a1 b1 c1 d1 d2 b2 c2 b3")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Fiber")," 在一个节点上的执行流程总结如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"在当前节点下寻找是否有子节点",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"若有, 则进入子节点"),(0,i.kt)("li",{parentName:"ul"},"若没有, 则在当前节点下寻找是否有下一个相邻节点",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"若有, 则进入下一个相邻节点"),(0,i.kt)("li",{parentName:"ul"},"若没有, 则返回它的父节点")))))),(0,i.kt)("h3",null,"Fiber Reconciler 的优势"),(0,i.kt)("p",null,"通过分析上述两种数据结构实现的代码，可以得出下面结论:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"基于树的深度遍历实现的 Reconciler: 一旦进入调用栈便无法暂停;"),(0,i.kt)("li",{parentName:"ul"},"基于链表实现的 Reconciler: 在 ",(0,i.kt)("inlineCode",{parentName:"li"},"while(true) {}")," 的循环中, 可以通过 ",(0,i.kt)("inlineCode",{parentName:"li"},"currentNode")," 的赋值重新得到需要操作的节点，而在赋值之前便可以'暂停'来执行其它逻辑, 这也是 ",(0,i.kt)("inlineCode",{parentName:"li"},"requestIdleCallback")," 能得以在 ",(0,i.kt)("inlineCode",{parentName:"li"},"Fiber Reconciler")," 的原因。")),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/react-in-depth/the-how-and-why-on-reacts-usage-of-linked-list-in-fiber-67f1014d0eb7"}),"The how and why on React’s usage of linked list in Fiber to walk the component’s tree")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/issues/7942"}),"Fiber Principles: Contributing To Fiber"),": Fiber 设计思想相关 issue, 推荐。")))}c.isMDXComponent=!0},82068:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"what's means for 0.6ms of 2.6ms"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/78812d5ed8f8bc0860f13d644f03cadb.jpg",alt:null}))),(0,i.kt)("p",null,"The first number (0.6ms) is the self duration and the second number (2.6ms) is the actual duration. Mostly the self duration is the actual duration minus the time spent on the children."))}c.isMDXComponent=!0},2604:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"React DevTools"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/blob/master/packages/react-devtools/CHANGELOG.md#400-august-15-2019"}),"React-DevTools 4.0 Changelog"),";"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://react-devtools-tutorial.now.sh"}),"react-devtools-tutorial"),": 配合上面 Changelog 使用;")))}c.isMDXComponent=!0},60794:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"React 特性剪辑(版本 16.0 ~ 16.9)"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Before you're going to hate it, then you're going to love it.")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/18be54d827e9dde7d9e29d029e329334.jpg-400",alt:null}))),(0,i.kt)("h3",null,"Concurrent Render(贯穿 16)"),(0,i.kt)("p",null,"在 18 年的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.youtube.com/watch?v=v6iR3Zk4oDY"}),"JSConf Iceland")," 上, Dan 神提到 Concurrent Render 涉及到 CPU 以及 IO 这两方面。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/1daa3d783a4a7ed7f742882a08a3aa09.jpg-400",alt:null}))),(0,i.kt)("p",null,"Time Slicing 对应解决左侧的问题, Suspense 对应解决了右侧的问题。它们共同要解决的是的提升用户体验, 在更多的场景下都可以做到",(0,i.kt)("inlineCode",{parentName:"p"},"可交互"),"。而 Fiber 架构是上述两者的基石。"),(0,i.kt)("h4",null,"Time Slicing"),(0,i.kt)("p",null,"在 16 之前的版本的渲染过程可以想象成一次性潜水 30 米, 在这期间做不了其它事情(Stack Reconciler);"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/39db8e34ec1ce048695c3bde132a739e.jpg-200",alt:null}))),(0,i.kt)("p",null,"痛点概括:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"一次性渲染到底"),(0,i.kt)("li",{parentName:"ul"},"中途遇到优先级更高的事件无法调整相应的顺序")),(0,i.kt)("p",null,"接着拿上面的潜水例子为例, 现在变为可以每次潜 10 米, 分 3 个 chunk 进行; chunk 和 chunk 之间通过链表连接; chunk 间插入优先级更高的任务, 先前的任务被抛弃。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/02a6b5ac36b12b3c676157ef3985fe4a.jpg-200",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"开启 Fiber 后, 获取异步数据的方法应放到 render 后面的生命周期钩子里(phase 2 阶段)进行, 因为 render 前面的生命周期钩子(phase 1 阶段)会被执行多次")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"注意: 并没有缩短原先组件的渲染时间(甚至还加长了), 但用户却能感觉操作变流畅了。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/web/updates/2015/08/using-requestidlecallback"}),"requestIdleCallback()"),": 借力此 api, 浏览器能在空闲的时间处理低优先级的事。")),(0,i.kt)("h4",null,"Suspense(16.6, 16.8, 16.9)"),(0,i.kt)("p",null,"Suspense 意思是能暂停当前组件的渲染, 当完成某件事以后再继续渲染。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"code splitting"),"(16.6, 已上线): 文件懒加载。在此之前的实现方式是 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/jamiebuilds/react-loadable"}),"react-loadable"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Concurrent mode"),"(2019 年 Q1 季度): 并发模式;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"data fetching"),"(2019 年中): 可以控制等所有数据都加载完再呈现出数据; ",(0,i.kt)("inlineCode",{parentName:"li"},"Suspense")," 提供一个时间参数, 若小于这个值则不进行 ",(0,i.kt)("inlineCode",{parentName:"li"},"loading")," 加载, 若超过这个值则进行 ",(0,i.kt)("inlineCode",{parentName:"li"},"loading")," 加载;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import React, { lazy, Suspense } from 'react'\nconst OtherComponent = lazy(() => import('./OtherComponent'))\n\nfunction MyComponent() {\n  return (\n    <Suspense fallback={<div>loading...</div>}>\n      <OtherComponent />\n    </Suspense>\n  )\n}\n")),(0,i.kt)("p",null,"一种简单的预加载思路, 可参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://medium.com/@pomber/lazy-loading-and-preloading-components-in-react-16-6-804de091c82d"}),"preload")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const OtherComponentPromise = import('./OtherComponent');\nconst OtherComponent = React.lazy(() => OtherComponentPromise);\n")),(0,i.kt)("h3",null,"render 新增的返回类型"),(0,i.kt)("p",null,"在 React16 版本中 render() 增加了一些返回类型, 到目前为止支持的返回类型如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"React elements."),(0,i.kt)("li",{parentName:"ul"},"Arrays and fragments."),(0,i.kt)("li",{parentName:"ul"},"Portals."),(0,i.kt)("li",{parentName:"ul"},"String and numbers."),(0,i.kt)("li",{parentName:"ul"},"Booleans or null.")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/react-component.html#render"}),"render"))),(0,i.kt)("p",null,"其中 render() 支持返回 Arrays 能让我们少写一个父节点, 如下所示:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'const renderArray = () => [\n  <div key="A">A</div>\n  <div key="B">B</div>\n]\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"render() 支持返回数组的特性类似 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/fragments.html"}),"Fragments"),"(16.2), 使用 Fragments 可以不用写 key。")),(0,i.kt)("h3",null,"Portals(传送门)"),(0,i.kt)("p",null,"将 React 子节点渲染到指定的节点上"),(0,i.kt)("p",null,"案例: 实现一个 Modal 组件, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://codepen.io/gaearon/pen/yzMaBd"}),"demo")),(0,i.kt)("p",null,"另外关于 Portals 做到冒泡到父节点的兄弟节点这个现象, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://codepen.io/gaearon/pen/jGBWpE"}),"demo"),", 我想可以这样子实现: 如果组件返回是 Portal 对象, 则将该组件的父组件的上的事件 copy 到该组件上。其实并不是真的冒泡到了父节点的兄弟节点上。"),(0,i.kt)("h3",null,"Error Boundaries"),(0,i.kt)("p",null,"React 16 提供了一个新的错误捕获钩子 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidCatch(error, errorInfo)"),", 它能将子组件生命周期里所抛出的错误捕获, 防止页面全局崩溃。",(0,i.kt)("a",u({parentName:"p"},{href:"https://codepen.io/gaearon/pen/wqvxGa?editors=0010"}),"demo")),(0,i.kt)("p",null,"componentDidCatch 并不会捕获以下几种错误"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"事件机制抛出的错误(事件里的错误并不会影响渲染)"),(0,i.kt)("li",{parentName:"ul"},"Error Boundaries 自身抛出的错误"),(0,i.kt)("li",{parentName:"ul"},"异步产生的错误"),(0,i.kt)("li",{parentName:"ul"},"服务端渲染")),(0,i.kt)("h3",null,"服务端渲染"),(0,i.kt)("p",null,"服务端渲染一般是作为最后的优化手段, 这里浅显(缺乏经验)谈下 React 16 在其上的优化。"),(0,i.kt)("p",null,"在 React 16 版本中引入了 ",(0,i.kt)("inlineCode",{parentName:"p"},"React.hydrate()"),", 它的作用主要是将相关的事件",(0,i.kt)("inlineCode",{parentName:"p"},"注水"),"进 ",(0,i.kt)("inlineCode",{parentName:"p"},"html")," 页面中, 同时会比较前端生成的 ",(0,i.kt)("inlineCode",{parentName:"p"},"html")," 和服务端传到前端的 ",(0,i.kt)("inlineCode",{parentName:"p"},"html")," 的文本内容的差异, 如果两者不一致将前端产生的文本内容替换服务端生成的(忽略属性)。"),(0,i.kt)("h3",null,"支持自定义属性"),(0,i.kt)("p",null,"在 React 16 版本中, 支持自定义属性(推荐 ",(0,i.kt)("inlineCode",{parentName:"p"},"data-xxx"),"), 因而 React 可以少维护一份 attribute 白名单, 这也是 React 16 体积减少的一个重要因素。"),(0,i.kt)("h3",null,"Context(16.3、16.6)"),(0,i.kt)("p",null,"Context 相当于是用组件化的方式使用 global, 使用其可以共享认证的用户、首选语言(国际化)等一些全局的信息, 而不必通过组件一层层传递。"),(0,i.kt)("p",null,"以下是比较冗余的传递:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<Page riderId={riderId} />\n// ... which renders ...\n<RiderDetail riderId={riderId} />\n// ... which renders ...\n<RiderLevel riderId={riderId} />\n// ... which renders ...\n<Avatar riderId={riderId} />\n")),(0,i.kt)("p",null,"在 ",(0,i.kt)("inlineCode",{parentName:"p"},"Context")," 之前可以传递 ",(0,i.kt)("inlineCode",{parentName:"p"},"<Avatar>")," 本身(Component Composition 的思想), 写法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Page(props) {\n  const avatar = <Avatar riderId={props.riderId} />\n  return <RiderDetail avatar={avatar} />\n}\n\n<Page riderId={riderId} />\n// ... which renders ...\n<RiderDetail avatar={avatar} />\n// ... which renders ...\n<RiderLevel avatar={avatar} />\n// ... which renders ...\n{ props.avatar }\n")),(0,i.kt)("p",null,"接着是使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"Context")," 书写的例子, 写法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const RiderContext = React.createContext(1) // 这里为默认值\n\nfunction Page(props) {\n  const riderId = props.riderId\n  return (\n    <RiderContext.Provider value={riderId}>\n      <RiderDetail />\n    </RiderContext.Provider>\n  )\n}\n\nfunction RiderDetail() {\n  return <RiderLevel />\n}\n\nclass RiderLevel extends React.Component {\n  static contextType = RiderContext\n  render() {\n    return <Avatar avatar={this.context} />;\n  }\n}\n")),(0,i.kt)("h3",null,"新的生命周期(16.3)"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://user-images.githubusercontent.com/12389235/41266906-b6a6e75a-6e2b-11e8-8266-9597b2d57f11.png",alt:null}))),(0,i.kt)("p",null,"在未来 17 的版本中, 将移除的生命周期钩子如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"componentWillMount()"),": 移除这个 api 基于以下两点考虑:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"服务端渲染: 在服务端渲染的情景下, componentWillMount 执行完立马执行 render 会导致 componentWillMount 里面执行的方法(获取数据, 订阅事件) 并不一定执行完;"),(0,i.kt)("li",{parentName:"ul"},"Concurrent Render: 在 fiber 架构下, render 前的钩子会被多次调用, 在 componentWillMount 里执行订阅事件就会产生内存泄漏;")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"迁移思路, 将以前写在 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentWillMount")," 的获取数据、时间订阅的方法写进 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidMount")," 中;")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"componentWillReceiveProps(nextProps)"),": 移除这个 api 基于如下考虑:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"语义不太契合逻辑"),(0,i.kt)("li",{parentName:"ul"},"phase1 阶段会多次调用")))),(0,i.kt)("p",null,"新的钩子 ",(0,i.kt)("inlineCode",{parentName:"p"},"getDerivedStateFromProps()")," 更加纯粹, 它做的事情是将新传进来的属性和当前的状态值进行对比, 若不一致则更新当前的状态。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"getDerivedStateFromProps(nextProps, prevState) {\n  if (nextProps.riderId !== prevState.riderId) {\n    return {\n      riderId: nextProps.riderId\n    }\n  }\n  // 返回 null 则表示 state 不用作更新\n  return null\n}\n")),(0,i.kt)("p",null,"另外关于 componentWillReceiveProps() 在 15 里大量使用的一个场景: 比如切换 tab 时都要重新获取当前页面的数据, 之前通常会这么做:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"componentWillReceiveProps(nextProps) {\n  if (nextProps.riderId !== this.props.riderId) {\n    fetchData(nextProps.riderId)\n  }\n}\n")),(0,i.kt)("p",null,"在 16 中可以使用 memoize 来代替, 写法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'import memoize from "memoize-one"\n\nclass Demo extends React.Component {\n  fetchDataDemo = memoize((riderId) => fetchData(riderId))\n\n  componentDidUpdate() {\n    fetchDataDemo(this.props.riderId)\n  }\n}\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"componentWillUpdate()"),": 目前将其理解为和 ",(0,i.kt)("inlineCode",{parentName:"li"},"componentWillMount")," 一样的情况")),(0,i.kt)("p",null,"在 React 16.3 的版本中, 新加入了两个生命周期:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"getDerivedStateFromProps(nextProps, prevState)"),": 更加语义化, 用来替代 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentWillMount()")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentWillReceiveProps(nextProps)"),";")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"getSnapshotBeforeUpdate(prevProps, prevState)"),": 可以将该钩子返回的结果传入 componentDidUpdate 的第三个参数中, 从而达到 dom 数据统一。用来替代 componentWillUpdate();"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"具体 demo 可见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://react.docschina.org/blog/2018/03/27/update-on-async-rendering.html#initializing-state"}),"Update on Async Rendering"))),(0,i.kt)("h3",null,"React.memo(16.6)"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"React.memo")," 是一个高阶组件, 它使无状态组件拥有有状态组价中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"shouldComponentUpdate()")," 以及 ",(0,i.kt)("inlineCode",{parentName:"p"},"PureComponent")," 的能力。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const MyComponent = React.memo(function MyComponent(props) {\n  ...\n})\n")),(0,i.kt)("h3",null,"Hooks(16.7)"),(0,i.kt)("p",null,"在 React 16.7 之前, React 有两种形式的组件, 有状态组件(类)和无状态组件(函数)。Hooks 的意义就是赋能先前的无状态组件, 让之变为有状态。这样一来更加契合了 React 所推崇的函数式编程。"),(0,i.kt)("p",null,"接下来梳理 Hooks 中最核心的 2 个 api, ",(0,i.kt)("inlineCode",{parentName:"p"},"useState")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect")),(0,i.kt)("h4",null,"useState"),(0,i.kt)("p",null,"useState 返回状态和一个更新状态的函数"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const [count, setCount] = useState(initialState)\n")),(0,i.kt)("p",null,"使用 Hooks 相比之前用 class 的写法最直观的感受是更为简洁"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function App() {\n  const [count, setCount] = useState(0)\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>\n        Click me\n      </button>\n    </div>\n  )\n}\n")),(0,i.kt)("h4",null,"useEffect(fn)"),(0,i.kt)("p",null,"在每次 render 后都会执行这个钩子。可以将它当成是 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidMount"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidUpdate"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"componentWillUnmount")," 的合集。因此使用 useEffect 比之前优越的地方在于:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"可以避免在 ",(0,i.kt)("inlineCode",{parentName:"li"},"componentDidMount、componentDidUpdate")," 书写重复的代码;"),(0,i.kt)("li",{parentName:"ol"},"可以将关联逻辑写进一个 ",(0,i.kt)("inlineCode",{parentName:"li"},"useEffect"),"(在以前得写进不同生命周期里);")),(0,i.kt)("h3",null,"React 的未来"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/fd1dd7ca2ba34bebef2d489c63befa25.jpg-200",alt:null}))),(0,i.kt)("p",null,"今年的 React Conf 的一张图, 可以看到 React 从出来到现在势头呈稳健上升趋势, 并在 2018 年这个节点上把 Jquery 拉下了王座。但可以看见 React 未来还有一段很长的路要走。"),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://reactjs.org/blog/all.html"}),"reactjs.org"))))}c.isMDXComponent=!0},79015:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"React 17"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("img",u({parentName:"li"},{src:"http://with.muyunyun.cn/1b3163fff33edde81761d580e40f0725.jpg",alt:null})),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"17 版本之后支持多版本共存。mark, 后续跟进。"))),(0,i.kt)("li",{parentName:"ul"},"冒泡机制更改: 向原生靠拢;"),(0,i.kt)("li",{parentName:"ul"},"降低开发心智;")),(0,i.kt)("h3",null,"React 18"),(0,i.kt)("h4",null,"automatic batching setState"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"React 18 默认支持在 setTimeout、fetch 中, automatic batching setState。",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/reactwg/react-18/discussions/21"}),"discussion"))),(0,i.kt)("h4",null,"startTransition"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/reactwg/react-18/discussions/41"}),"startTransition"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"In a typical React app, most updates are conceptually transition updates. But for backwards compatibility reasons, transitions are opt-in. By default, React 18 still handles updates as urgent, and you can mark an update as a transition by wrapping it into startTransition.")),(0,i.kt)("h4",null,"New Suspense SSR Architecture in React 18"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/reactwg/react-18/discussions/37"}),"New Suspense SSR Architecture in React 18"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"React 18: Streaming HTML and Selective Hydration")))),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://tech.ebayinc.com/engineering/async-fragments-rediscovering-progressive-html-rendering-with-marko/"}),"marko"))),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://reactjs.org/blog/2020/08/10/react-v17-rc.html"}),"react-v17"))))}c.isMDXComponent=!0},78507:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"React Hooks 深入系列"),(0,i.kt)("p",null,"在 class 已经融入 React 生态的节点下, React 推出的 Hooks 具有如下优势:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"更简洁的书写;"),(0,i.kt)("li",{parentName:"ul"},"相对类中的 ",(0,i.kt)("inlineCode",{parentName:"li"},"HOC")," 与 ",(0,i.kt)("inlineCode",{parentName:"li"},"render Props"),", Hooks 拥有更加自由地组合抽象的能力;")),(0,i.kt)("h3",null,"使用 Hooks 的注意项"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"在 ",(0,i.kt)("inlineCode",{parentName:"p"},"hooks")," 中每一次 ",(0,i.kt)("inlineCode",{parentName:"p"},"render")," 都有自己的 ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"props"),", 这与 ",(0,i.kt)("inlineCode",{parentName:"p"},"class")," 中存在差异, 见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://overreacted.io/a-complete-guide-to-useeffect/#each-render-has-its-own-everything"}),"Hooks 每次渲染都是闭包")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"class")," 中可以用闭包模拟 ",(0,i.kt)("inlineCode",{parentName:"li"},"hooks")," 的表现, ",(0,i.kt)("a",u({parentName:"li"},{href:"https://codesandbox.io/s/w7vjo07055"}),"链接"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"hooks")," 中可以使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"ref")," 模拟 ",(0,i.kt)("inlineCode",{parentName:"li"},"class")," 的表现, ",(0,i.kt)("a",u({parentName:"li"},{href:"https://codesandbox.io/s/rm7z22qnlp"}),"链接"),";"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"写出 useEffect 的所用到的依赖"))),(0,i.kt)("p",null,"在以下 demo 中, ",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect")," 的第二个参数传入 ",(0,i.kt)("inlineCode",{parentName:"p"},"[]"),", 希望的是 ",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect")," 里的函数只执行一次(类似在 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidMount")," 中执行一次, 但是注意这里仅仅是",(0,i.kt)("inlineCode",{parentName:"p"},"类似"),", 详细原因见上一条注意项), 页面上每隔 1s 递增 1。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Demo() {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      setCount(count + 1);\n    }, 1000);\n    return () => {\n      clearInterval(id);\n    };\n  }, []);\n\n  return count;\n}\n")),(0,i.kt)("p",null,"但这样达到我们预期的效果了么? ",(0,i.kt)("a",u({parentName:"p"},{href:"https://codesandbox.io/s/n3o2m1wpj4"}),"demo"),", 可以看到界面上只增加到 1 就停止了。原因就是传入的第二个参数 ",(0,i.kt)("inlineCode",{parentName:"p"},"[]")," 搞的鬼, ",(0,i.kt)("inlineCode",{parentName:"p"},"[]")," 表示没有外界状态对 ",(0,i.kt)("inlineCode",{parentName:"p"},"effect")," 产生干扰。流程大致如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"第一次调用 ",(0,i.kt)("inlineCode",{parentName:"li"},"useEffect")," 传入的 ",(0,i.kt)("inlineCode",{parentName:"li"},"count")," 为 0, 于是 ",(0,i.kt)("inlineCode",{parentName:"li"},"setCount(0 + 1)"),";"),(0,i.kt)("li",{parentName:"ol"},"受 ",(0,i.kt)("inlineCode",{parentName:"li"},"useEffect")," 第二个参数 ",(0,i.kt)("inlineCode",{parentName:"li"},"[]")," 的影响，",(0,i.kt)("inlineCode",{parentName:"li"},"count")," 仍然为 0, 所以相当于还是 ",(0,i.kt)("inlineCode",{parentName:"li"},"setCount(0 + 1)"),";")),(0,i.kt)("p",null,"那如何修正上述问题呢? 方法有两个(方法一为主, 方法二为辅):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方法一: 将 ",(0,i.kt)("inlineCode",{parentName:"li"},"[]")," 改为 ",(0,i.kt)("inlineCode",{parentName:"li"},"[count]")),(0,i.kt)("li",{parentName:"ul"},"方法二: 将 ",(0,i.kt)("inlineCode",{parentName:"li"},"setCount(count + 1)")," 改为 ",(0,i.kt)("inlineCode",{parentName:"li"},"setCount(count => count + 1)"),"。这种方法的思想是修正状态的值而不依赖外面传进的状态。")),(0,i.kt)("p",null,"不过遇到 ",(0,i.kt)("inlineCode",{parentName:"p"},"setCount(count => count + 1)")," 的情况就可以考虑使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"useReducer")," 了。"),(0,i.kt)("h4",null,"何时使用 useReducer"),(0,i.kt)("p",null,"使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"useState")," 的地方都能用 ",(0,i.kt)("inlineCode",{parentName:"p"},"useReducer")," 进行替代。相较 ",(0,i.kt)("inlineCode",{parentName:"p"},"useState"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"useReducer")," 有如下优势:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"useReducer")," 将 ",(0,i.kt)("inlineCode",{parentName:"li"},"how"),"(reducer) 和 ",(0,i.kt)("inlineCode",{parentName:"li"},"what"),"(dispatch(action)) 进行抽离; 使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"reducer")," 逻辑状态进行集中化维护;"),(0,i.kt)("li",{parentName:"ul"},"相比 useState, useReducer 没有",(0,i.kt)("a",u({parentName:"li"},{href:"https://overreacted.io/a-complete-guide-to-useeffect/#each-render-has-its-own-everything"}),"闭包问题"),";"),(0,i.kt)("li",{parentName:"ul"},"当状态的一个 state 依赖状态中的另一个 state 时, 这种情况最好使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"useReducer"),"; 可以参考 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://overreacted.io/a-complete-guide-to-useeffect/#decoupling-updates-from-actions"}),"decoupling-updates-from-actions")," 中 Dan 列举的 demo。")),(0,i.kt)("h4",null,"处理 useEffect 中的公用函数"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Demo() {\n  const [count, setCount] = useState(0);\n\n  function getFetchUrl(query) {\n    return `http://demo${query}`\n  }\n\n  useEffect(() => {\n    const url = getFetchUrl('react')\n  }, [getFetchUrl]);\n\n  useEffect(() => {\n    const url = getFetchUrl('redux')\n  }, [getFetchUrl]);\n\n  return count;\n}\n")),(0,i.kt)("p",null,"此时 ",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect")," 中传入的第二个参数 ",(0,i.kt)("inlineCode",{parentName:"p"},"getFetchUrl")," 相当于每次都是新的, 所以每次都会请求数据, 那除了 ",(0,i.kt)("inlineCode",{parentName:"p"},"[getFetchUrl]")," 将改为 ",(0,i.kt)("inlineCode",{parentName:"p"},"[]")," 这种不推荐的写法外，有两种解决方法:"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},". 方法一: 提升 ",(0,i.kt)("inlineCode",{parentName:"em"},"getFetchUrl")," 的作用域;\n"),". 方法二: 使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"useCallback")," 或者 ",(0,i.kt)("inlineCode",{parentName:"p"},"useMemo")," 来包裹 getFetchUrl;"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"React.memo")," 修饰一个函数组件, ",(0,i.kt)("inlineCode",{parentName:"p"},"useMemo")," 修饰一个函数。它们本质都是运用缓存。")),(0,i.kt)("h3",null,"React Hooks 内部是怎么工作的"),(0,i.kt)("p",null,"为了理解 React Hooks 内部实现原理, 对 ",(0,i.kt)("inlineCode",{parentName:"p"},"useState"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect")," 进行了简单的实现。"),(0,i.kt)("h4",null,"useState 的简单实现"),(0,i.kt)("p",null,"使用闭包来实现 ",(0,i.kt)("inlineCode",{parentName:"p"},"useState")," 的简单逻辑:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 这里使用闭包\nconst React = (function() {\n  let _val\n\n  return {\n    useState(initialValue) {\n      _val = _val || initialValue\n\n      function setVal(value) {\n        _val = value\n      }\n\n      return [_val, setVal]\n    }\n  }\n})()\n")),(0,i.kt)("p",null,"测试如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Counter() {\n  const [count, setCount] = React.useState(0)\n\n  return {\n    render: () => console.log(count),\n    click: () => setCount(count + 1)\n  }\n}\n\nCounter().render() // 0\nCounter().click()  // 模拟点击\nCounter().render() // 1\n")),(0,i.kt)("h4",null,"useEffect 的简单实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var React = (function() {\n  let _val, _deps\n\n  return {\n    useState(initialValue) {\n      _val = _val || initialValue\n\n      function setVal(value) {\n        _val = value\n      }\n\n      return [_val, setVal]\n    },\n    useEffect(callback, deps) {\n      const ifUpdate = !deps\n\n      // 判断 Deps 中的依赖是否改变\n      const ifDepsChange = _deps ? !_deps.every((r, index) => r === deps[index]) : true\n\n      if (ifUpdate || ifDepsChange) {\n        callback()\n\n        _deps = deps || []\n      }\n    }\n  }\n})()\n")),(0,i.kt)("p",null,"测试代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var {useState, useEffect} = React\n\nfunction Counter() {\n  const [count, setCount] = useState(0)\n\n  useEffect(() => {\n    console.log('useEffect', count)\n  }, [count])\n\n  return {\n    render: () => console.log('render', count),\n    click: () => setCount(count + 1),\n    noop: () => setCount(count), // 保持不变, 观察 useEffect 是否被调用\n  }\n}\n\nCounter().render() // 'useEffect' 0, 'render', 0\nCounter().noop()\nCounter().render() // 'render', 0\nCounter().click()\nCounter().render() // 'useEffect' 1, 'render', 1\n")),(0,i.kt)("h4",null,"处理多次调用的情形"),(0,i.kt)("p",null,"为了在 ",(0,i.kt)("inlineCode",{parentName:"p"},"hooks")," 中能使用多次 ",(0,i.kt)("inlineCode",{parentName:"p"},"useState"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect"),", 将各个 ",(0,i.kt)("inlineCode",{parentName:"p"},"useState"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect")," 的调用存进一个数组中, 在上面基础上进行如下改造:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const React = (function() {\n  const hooks = []\n  let currentHook = 0\n\n  return {\n    render(Component) {\n      const component = Component()\n      component.render()\n      currentHook = 0 // 重置, 这里很关键, 将 hooks 的执行放到 hooks 队列中, 确保每次执行的顺序保持一致。\n      return component\n    },\n    useState(initialValue) {\n      hooks[currentHook] = hooks[currentHook] || initialValue\n\n      function setVal(value) {\n        hooks[currentHook] = value\n      }\n\n      return [hooks[currentHook++], setVal]\n    },\n    useEffect(callback, deps) {\n      const ifUpdate = !deps\n\n      // 判断 Deps 中的依赖是否改变\n      const ifDepsChange = hooks[currentHook] ? !hooks[currentHook].every((r, index) => r === deps[index]) : true\n\n      if (ifUpdate || ifDepsChange) {\n        callback()\n\n        hooks[currentHook++] = deps || []\n      }\n    }\n  }\n})()\n")),(0,i.kt)("p",null,"测试代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var {useState, useEffect} = React\n\nfunction Counter() {\n  const [count, setCount] = useState(0)\n  const [type, setType] = useState('hi')\n\n  useEffect(() => {\n    console.log('useEffect', count)\n    console.log('type', type)\n  }, [count, type])\n\n  return {\n    render: () => console.log('render', count),\n    click: () => setCount(count + 1),\n    noop: () => setCount(count), // 保持不变, 观察 useEffect 是否被调用\n  }\n}\n\n/* 如下 mock 执行了 useEffect、render; 这里使用 React.render 的原因是为了重置 currentHook 的值 */\nlet comp = React.render(Counter) // useEffect 0 type hi render 0\n\n/* 如下 mock 只执行了 render */\ncomp.noop()\ncomp = React.render(Counter) // render 0\n\n/* 如下 mock 重新执行了 useEffect、render */\ncomp.click()\nReact.render(Counter) // useEffect 1, render 1\n")),(0,i.kt)("h3",null,"相关资源"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/rehooks/awesome-react-hooks"}),"awesome-react-hooks")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/gragland/usehooks"}),"usehooks")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.netlify.com/blog/2019/03/11/deep-dive-how-do-react-hooks-really-work/"}),"deep-dive-how-do-react-hooks-really-work")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://overreacted.io/a-complete-guide-to-useeffect/"}),"a-complete-guide-to-useeffect"),": 推荐 Dan 的这篇文章"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://adamrackis.dev/state-and-use-reducer/"}),"Hooks, State, Closures, and useReducer"),": 作为 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://overreacted.io/a-complete-guide-to-useeffect/#decoupling-updates-from-actions"}),"decoupling-updates-from-actions")," 的补充"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://kentcdodds.com/blog/should-i-usestate-or-usereducer/"}),"Should I useState or useReducer"),":")))}c.isMDXComponent=!0},79521:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"React Logo 与 Hooks"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/ddbdcec2fc39ba350fc74647f4fad6f5.jpg-300",alt:null}))),(0,i.kt)("p",null,"React 的 logo 是一个原子图案, 原子组成了物质的表现。类似的, React 就像原子般构成了页面的表现; 而 Hooks 就如夸克, 其更接近 React 本质的样子, 但是直到 4 年后的今天才被真正设计出来。 —— Dan in React Conf(2018)"),(0,i.kt)("h3",null,"WHY HOOKS?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"多个组件间逻辑复用"),": 在 Class 中使用 React 不能将带有 state 的逻辑给单独抽离成 function, 其只能通过嵌套组件的方式来解决多个组件间逻辑复用的问题, 基于嵌套组件的思想存在 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/master/React/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/8.HOC%E6%8E%A2%E7%B4%A2.md"}),"HOC")," 与 ",(0,i.kt)("inlineCode",{parentName:"li"},"render props")," 两种设计模式。但是这两种设计模式是否存在缺陷呢?",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"嵌套地狱, 当嵌套层级过多后, 数据源的追溯会变得十分困难, 导致定位 bug 不容易; (hoc、render props)"),(0,i.kt)("li",{parentName:"ul"},"性能, 额外的组件实例需要存在额外的开销; (Hoc、Render props)"),(0,i.kt)("li",{parentName:"ul"},"命名重复性, 在一个组件中同时使用多个 hoc, 不排除这些 hoc 里的方法存在命名冲突的问题; (hoc)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"单个组件中的逻辑复用"),": Class 中的生命周期 ",(0,i.kt)("inlineCode",{parentName:"li"},"componentDidMount"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"componentDidUpdate")," 甚至 ",(0,i.kt)("inlineCode",{parentName:"li"},"componentWillUnMount")," 中的大多数逻辑基本是类似的, 必须拆散在不同生命周期中维护相同的逻辑对使用者是不友好的, 这样也造成了冗余的组件代码量。"),(0,i.kt)("li",{parentName:"ul"},"Class 的其它一些问题: 书写 Class 组件时需要大量样板代码, 用户通常会对 Class 中 Constructor 的 bind 以及 this 的使用感到困惑(Todo: 举例); 当 Class 与 TypeScript 结合一起使用时, 需要对 defaultValue 做额外声明处理; 此外 React Team 表示 Class 在机器编译优化方面也不是很理想。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/vuejs/rfcs/pull/17#issuecomment-494242121"}),"Vue: Update: the Class API proposal is being dropped."))))),(0,i.kt)("p",null,"------- 2020.07.19 -------"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"组件重构")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"React Hooks 的常见陷阱"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"闭包陷阱, (useInterval, useFetch)"),(0,i.kt)("li",{parentName:"ul"},"Hooks 规则陷阱(见花媛最新聊天记录), eslint-hooks 插件"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Hooks 不能做到?"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Matrix 组件"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://zhuanlan.zhihu.com/p/103150605]",", 分享一篇流畅风趣的 hooks 文章, 文风风趣不错, 可以借鉴。"))),(0,i.kt)("p",null,"---------- more ---------"),(0,i.kt)("h3",null,"useState 返回的值为什么是数组而非对象?"),(0,i.kt)("p",null,"原因是数组的解构比对象更加方便, 可以观察以下两种数据结构解构的差异。"),(0,i.kt)("p",null,"返回数组时, 可以直接解构成任意名字。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"[name, setName] = useState('路飞')\n[age, setAge] = useState(12)\n")),(0,i.kt)("p",null,"返回对象时, 却需要多一层的命名。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"{value: name, setValue: setName} = useState('路飞')\n{value: name, setValue: setName} = useState(12)\n")),(0,i.kt)("h3",null,"Hooks 传递的设计"),(0,i.kt)("p",null,"Hooks 是否可以设计成在组件中通过函数传参来使用? 比如进行如下调用?"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const SomeContext = require('./SomeContext)\n\nfunction Example({ someProp }, hooks) {\n  const contextValue = hooks.useContext(SomeContext)\n  return <div>{someProp}{contextValue}</div>\n}\n")),(0,i.kt)("p",null,"使用传递的劣势是会出现冗余的传递。(可以联想 Context 解决了什么)"),(0,i.kt)("h3",null,"Hooks 与 Class 中调用 setState 有不同的表现差异么?"),(0,i.kt)("p",null,"Hooks 中的 setState 与 Class 中最大区别在于 Hooks 不会对多次 setState 进行合并操作。如果要执行合并操作, 可执行如下操作:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"setState(prevState => {\n  return { ...prevState, ...updateValues }\n})\n")),(0,i.kt)("p",null,"此外可以对 class 与 Hooks 之间 ",(0,i.kt)("inlineCode",{parentName:"p"},"setState")," 是异步还是同步的表现进行对比, 可以先对以下 4 种情形 render 输出的个数进行观察分析:"),(0,i.kt)("p",null,"class 中的 setState:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"export default class App extends React.Component {\n  state = {\n    name: '路飞',\n    old: 12,\n    gender: 'boy'\n  }\n\n  // 情形 ①: class 中异步调用 setState\n  componentDidMount() {\n    this.setState({\n      name: '娜美'\n    })\n    this.setState({\n      old: 13\n    })\n    this.setState({\n      gender: 'girl'\n    })\n  }\n\n  // 情形 ②: class 中同步调用 setState\n  componentDidMount() {\n    setTimeout(() => {\n      this.setState({\n        name: '娜美'\n      })\n      this.setState({\n        old: 13\n      })\n      this.setState({\n        gender: 'girl'\n      })\n    })\n  }\n\n  render() {\n    console.log('render')\n    const { name, old, gender } = this.state\n    return (\n      <>{name}{old}{gender}</>\n    )\n  }\n}\n")),(0,i.kt)("p",null,"Hooks 中的 setState"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"export default function() {\n  const [name, setName] = useState('路飞')\n  const [old, setOld] = useState('12')\n  const [gender, setGender] = useState('boy')\n\n  // 情形③: Hooks 中异步调用 setState\n  useEffect(() => {\n    setName('娜美')\n    setOld('13')\n    setGender('girl')\n  }, [])\n\n  // 情形④: Hooks 中同步调用 setState\n  useEffect(() => {\n    setTimeout(() => {\n      setName('娜美')\n      setOld('13')\n      setGender('girl')\n    }, 0)\n  }, [])\n\n  console.log('render')\n  return (\n    <>{name}{old}{gender}</>\n  )\n}\n")),(0,i.kt)("p",null,"情形①、情形②、情形③、情形④ 中 render 输出的次数分别是 2, 4, 2, 4。可以看出在 React 中使用 class 写法和 hooks 写法是一一对应的。此外 ",(0,i.kt)("inlineCode",{parentName:"p"},"setState 的执行是异步还是同步取决于其执行环境"),"。"),(0,i.kt)("h3",null,"如何在 Hooks 中模拟 setState 的第二个参数"),(0,i.kt)("p",null,"场景: 在使用类模式的 React 中有时会使用 setState 的第二个参数来完成某些异步回调操作(比如接口请求), 在 Hooks 中如何对齐类模式中的这种用法呢?"),(0,i.kt)("p",null,"使用 useRef 来控制一个标志符;"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"具体见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/react/issues/14174#issuecomment-437551476"}),"issue"))),(0,i.kt)("h3",null,"Hooks 中 useEffect 的执行时间是否与 componentDidMount/componentDidUpdate 相同"),(0,i.kt)("p",null,"在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/hooks-reference.html#timing-of-effects"}),"timing-of-effects")," 中有提到 ",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect")," 的执行时机是在浏览器下一次 layout 与 paint 之后, 与之相对的 ",(0,i.kt)("inlineCode",{parentName:"p"},"useLayoutEffect")," 的执行时机是在浏览器下一次 layout 与 paint 之前(同 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidMount"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidUpdate"),")。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"useLayoutEffect 适用的场景为在 class 模式下在 componentDidMount/componentDidUpdate 中对样式进行调整的场景;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://medium.com/@dan_abramov/this-benchmark-is-indeed-flawed-c3d6b5b6f97f"}),"this-benchmark-is-indeed-flawed"),": 此文用数据比较了 useEffect 与 componentDidMount/componentDidUpdate 的执行时机。")),(0,i.kt)("h3",null,"Hooks 中模拟仅调用 componentDidUpdate 而不调用 componentDidMount"),(0,i.kt)("p",null,"思路: 借助 ",(0,i.kt)("inlineCode",{parentName:"p"},"useRef")," 跳过头一次的执行。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Demo() {\n  const mounted = React.useRef(false)\n\n  React.useEffect(() => {\n    if (!mounted.current) {\n      mounted.current = true\n    } else {\n      // do something mock componentDidUpdate\n    }\n  })\n}\n")),(0,i.kt)("h3",null,"Hooks 中如何获取先前的 props 以及 state"),(0,i.kt)("p",null,"React 官方在未来很可能会提供一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"usePrevious")," 的 hooks 来获取之前的 props 以及 state。"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"usePrevious")," 的核心思想是用 ref 来存储先前的值。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function usePrevous(value) {\n  const ref = useRef()\n  useEffect(() => {\n    ref.current = value\n  })\n  return ref.current\n}\n")),(0,i.kt)("h3",null,"Hooks 中如何调用实例上的方法"),(0,i.kt)("p",null,"在 Hooks 中使用 useRef() 等价于在 Class 中使用 this.something。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/* in a function */\nconst X = useRef()\nX.current // can read or write\n\n/* in a Class */\nthis.X    // can read or write\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables"}),"Is there something like instance variables"))),(0,i.kt)("h3",null,"Hooks 中 getDerivedStateFromProps 的替代方案"),(0,i.kt)("p",null,"在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/React/React%E6%9A%97%E5%99%A8%E7%99%BE%E8%A7%A3.md"}),"React 暗器百解")," 中提到了 ",(0,i.kt)("inlineCode",{parentName:"p"},"getDerivedStateFromProps")," 是一种反模式, 但是极少数情况还是用得到该钩子, Hooks 没有该 api, 那其如何达到 getDerivedStateFromProps 的效果呢?"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function ScrollView({row}) {\n  const [isScrollingDown, setISScrollingDown] = setState(false)\n  const [prevRow, setPrevRow] = setState(null)\n\n  // 核心是创建一个 prevRow state 与函数调用方传进来的 row 进行比较\n  if (row !== prevRow) {\n    setISScrollingDown(prevRow !== null && row > prevRow)\n    setPrevRow(row)\n  }\n\n  return `Scrolling down ${isScrollingDown}`\n}\n")),(0,i.kt)("h3",null,"Hooks 中 forceUpdate 的替代方案"),(0,i.kt)("p",null,"可以使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"useReducer")," 来 hack ",(0,i.kt)("inlineCode",{parentName:"p"},"forceUpdate"),", 但是尽量避免 forceUpdate 的使用。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const useForceUpdate = () => {\n  return useReducer(x => x + 1, 0)[1]\n}\n\nfunction handleClick() {\n  const forceUpdate = useForceUpdate()\n  forceUpdate()\n}\n")),(0,i.kt)("h3",null,"Hooks 中 shouldComponentUpdate 的替代方案"),(0,i.kt)("p",null,"在 Hooks 中可以使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"useMemo")," 来作为 ",(0,i.kt)("inlineCode",{parentName:"p"},"shouldComponentUpdate")," 的替代方案, 但 ",(0,i.kt)("inlineCode",{parentName:"p"},"useMemo")," 只对 props 进行浅比较。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"React.useMemo((props) => {\n  // your component\n})\n")),(0,i.kt)("h4",null,"useMemo 与 useCallback 的区别"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"useMemo(() => <component />) 等价于 useCallback(<component />)\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"useCallback",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"缓存函数")))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const fn = React.useCallback(() => {\n  setOut(true)\n}, [])\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"useMemo",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"一般用于缓存组件"),(0,i.kt)("li",{parentName:"ul"},"缓存值: ",(0,i.kt)("inlineCode",{parentName:"li"},"const demo = React.useMemo(() => [...], [])"))))),(0,i.kt)("h3",null,"是否能使用 React Hooks 替代 Redux"),(0,i.kt)("p",null,"在 React 16.8 版本之后, 针对",(0,i.kt)("inlineCode",{parentName:"p"},"不是特别复杂"),"的业务场景, 可以使用 React 提供的 ",(0,i.kt)("inlineCode",{parentName:"p"},"useContext"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"useReducer")," 实现自定义简化版的 redux, 可见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/todoList"}),"todoList")," 中的运用。核心代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'import React, { createContext, useContext, useReducer } from "react"\n\n// 创建 StoreContext\nconst StoreContext = createContext()\n\n// 构建 Provider 容器层\nexport const StoreProvider = ({reducer, initialState, children}) => {\n  return (\n    <StoreContext.Provider value={useReducer(reducer, initialState)}>\n      {children}\n    </StoreContext.Provider>\n  )\n}\n\n// 在子组件中调用 useStoreContext, 从而取得 Provider 中的 value\nexport const useStoreContext = () => useContext(StoreContext)\n')),(0,i.kt)("p",null,"但是针对特别复杂的场景目前不建议使用此模式, 因为 context 的机制会有性能问题。具体原因可见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/reduxjs/react-redux/issues/1177"}),"react-redux v7 回退到订阅的原因")),(0,i.kt)("h4",null,"依赖列表中移除函数是否是安全的?"),(0,i.kt)("p",null,"通常来说依赖列表中移除函数是不安全的。观察如下 demo"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const { useState, useEffect } = React\n\nfunction Example({ someProp }) {\n  function doSomething() {\n    console.log(someProp) // 这里只输出 1, 点击按钮的 2 并没有输出。\n  }\n\n  useEffect(\n    () => {\n      doSomething()\n    },\n    [] // 🔴 这是不安全的, 因为在 doSomething 函数中使用了 someProps 属性\n  )\n\n  return <div>example</div>\n}\n\nexport default function() {\n  const [value, setValue] = useState(1)\n  return (\n    <>\n      <Example someProp={value} />\n      <Button onClick={() => setValue(2)}>button</Button>\n    </>\n  )\n}\n")),(0,i.kt)("p",null,"在该 demo 中, 点击 button 按钮, 并没有打印出 2。解决上述问题有两种方法。"),(0,i.kt)("p",null,"方法一: 将函数放入 ",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect")," 中, 同时将相关属性放入依赖项中。因为在依赖中改变的相关属性一目了然, 所以这也是首推的做法。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Example({ someProp }) {\n  useEffect(\n    () => {\n      function doSomething() {\n        console.log(someProp)\n      }\n      doSomething()\n    },\n    [someProps] // 相关属性改变一目了然\n  )\n\n  return <div>example</div>\n}\n")),(0,i.kt)("p",null,"方法二: 把函数加入依赖列表中"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Example({ someProp }) {\n  function doSomething() {\n    console.log(someProp)\n  }\n\n  useEffect(\n    () => {\n      doSomething()\n    },\n    [doSomething]\n  )\n\n  return <div>example</div>\n}\n")),(0,i.kt)("p",null,"方案二基本上不会单独使用, 它一般结合 ",(0,i.kt)("inlineCode",{parentName:"p"},"useCallback")," 一起使用来处理某些函数计算量较大的函数。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Example({ someProp }) {\n  const doSomething = useCallback(() => {\n    console.log(someProp)\n  }, [someProp])\n\n  useEffect(\n    doSomething(),\n    [doSomething]\n  )\n\n  return <div>example</div>\n}\n")),(0,i.kt)("h4",null,"如何避免重复创建昂贵的对象"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方法一: 使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"useState")," 的懒初始化, 用法如下")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const [value, setValue] = useState(() => createExpensiveObj)\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/hooks-reference.html#lazy-initial-state"}),"lazy-initial-state"),";")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方法二: 使用自定义 useRef 函数")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Image(props) {\n  const ref = useRef(null)\n\n  function getExpensiveObj() {\n    if (ref.current === null) {\n      ref.current = ExpensiveObj\n    }\n\n    return ref.current\n  }\n\n  // if need ExpensiveObj, call getExpensiveObj()\n}\n")),(0,i.kt)("h3",null,"竞态"),(0,i.kt)("p",null,"关于竞态(race condition) 的解决方法:"),(0,i.kt)("p",null,"方案一: 提供一个标志符, 在 ",(0,i.kt)("inlineCode",{parentName:"p"},"clean effect")," 阶段中将其置空。代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Article({ id }) {\n  const [article, setArticle] = useState(null);\n\n  useEffect(() => {\n    let didCancel = false;\n\n    async function fetchData() {\n      const article = await API.fetchArticle(id);\n      if (!didCancel) {\n        setArticle(article);\n      }\n    }\n\n    fetchData();\n\n    return () => {\n      didCancel = true;\n    };\n  }, [id]);\n\n  // ...\n}\n")),(0,i.kt)("p",null,"方案二: 使用 Suspense: Suspense 的机制能做到 ",(0,i.kt)("inlineCode",{parentName:"p"},"render as fetch"),"。见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/concurrent-mode-suspense.html#solving-race-conditions-with-suspense"}),"solving-race-conditions-with-suspense")),(0,i.kt)("h3",null,"相关资料"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/reactjs/rfcs/pull/68#issuecomment-439314884"}),"Hooks RFCS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://reactjs.org/docs/hooks-faq.html"}),"Hooks FAQ")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889"}),"Making Sense of React Hooks")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/68477600"}),"Vue Function-based API RFC"))))}c.isMDXComponent=!0},43378:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"React 的组件名为什么要大写？")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"在 `render` 中, 小写会被认为是 `html` 元素\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"你会把向 API 的数据请求放在哪里执行")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"视情况考虑:\n\n* componentDidMount, 可能会导致白屏\n* constructor, 针对数据不变的情况\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"虚拟 dom 中有个 ",(0,i.kt)("inlineCode",{parentName:"li"},"$$typeof")," 字段，有了解过它的作用么？")),(0,i.kt)("p",null,"运用 ",(0,i.kt)("inlineCode",{parentName:"p"},"JSON")," 里会无视 ",(0,i.kt)("inlineCode",{parentName:"p"},"Symbol")," 的知识点来完成安全性校验。可以参阅 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://overreacted.io/why-do-react-elements-have-typeof-property/"}),"Why Do React Elements Have a $$typeof Property?")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"如何理解 ",(0,i.kt)("inlineCode",{parentName:"li"},"useEffect")," 中的副作用")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"操作 dom, 获取数据，会影响其它组件或者在渲染时没有办法做其它操作, 这是目前所理解的副作用。\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"组件为什么写成 ",(0,i.kt)("inlineCode",{parentName:"li"},"<Form />")," 而不是 ",(0,i.kt)("inlineCode",{parentName:"li"},"Form()"))),(0,i.kt)("p",null,"结合编译时能做更多事情"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"React.memo()")," 和 ",(0,i.kt)("inlineCode",{parentName:"li"},"useMemo()")," 的区别")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"useMemo()")," 的粒度比 ",(0,i.kt)("inlineCode",{parentName:"p"},"React.memo()")," 更细"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"什么时候使用 setState((state, props) => stateChange) 而不用 setState({})")),(0,i.kt)("p",null,"点击一个按钮, 连续使用 setState 进行三次的增加, 如果使用 setState({}) 会造成 state 的合并, 使用 setState((state, props) => stateChange) 没有这个问题。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://overreacted.io/react-as-a-ui-runtime/"}),"react-as-a-ui-runtime"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"How to judge if the react element is Fragment?")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * judege if is React Fragment.\n */\nfunction isReactFragment(variableToInspect) {\n  if (variableToInspect.type) {\n    return variableToInspect.type === React.Fragment;\n  }\n  return variableToInspect === React.Fragment;\n}\n")))}c.isMDXComponent=!0},30962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"复合组件(Compound Component)"),(0,i.kt)("h4",null,"使用 static 来复合组件"),(0,i.kt)("p",null,"优点如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"结构更加清晰")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"class Toggle extends React.Component {\n  static On = ({on, children}) => on ? children : null\n  static Off = ({on, children}) => on ? null : children\n  static Button = ({on, toggle}) => <Switch on={on} onClick={toggle} />\n\n  state = {on: false}\n  toggle = () =>\n    this.setState(\n      ({on}) => ({on: !on}),\n      () => this.props.onToggle(this.state.on),\n    )\n  render() {\n    return React.Children.map(this.props.children, reactElement => {\n      return React.cloneElement(reactElement, {\n        on: this.state.on,\n        toggle: this.toggle,\n      })\n    })\n  }\n}\n\n// 使用这种设计模式来复合组件, 可以看到组件的使用十分清晰\n<Toggle onToggle={() => console.log('onToggle')}>\n  <Toggle.On>The button is on</Toggle.On>\n  <Toggle.Off>The button is off</Toggle.Off>\n  <Toggle.Button />\n</Toggle>\n")),(0,i.kt)("h3",null,"资料"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/demos-platform/advanced-react-patterns-v2/blob/master/src/exercises/02.js"}),"advanced-react-patterns-v2"))))}c.isMDXComponent=!0},9266:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"setState 回调替代方案"),(0,i.kt)("p",null,"在脚手架中发现 setState 禁用了回调的使用。因为目前发现使用 setState 第二个参数的场景是想用 setState 更新状态后的值。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'class App extenes React.Component {\n  countName = () => {\n    if (this.state.name === "xxx") {\n      this.setState({\n        count: this.state.count + 1\n      })\n    }\n  }\n\n  handle = name => {\n    this.setState(\n      {\n        name\n      },\n      this.countName\n    )\n  }\n}\n')),(0,i.kt)("p",null,"回调的方式会造成多余一次渲染, 可改为",(0,i.kt)("inlineCode",{parentName:"p"},"传参"),"的方式代替回调的方式。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'class App extenes React.Component {\n  countName = (name) => {\n    if (name === "xxx") {\n      this.setState({ // 2\n        count: this.state.count + 1\n      })\n    }\n  }\n\n  handle = name => {\n    this.countName(name)\n    this.setState({\n      name\n    })\n  }\n}\n')))}c.isMDXComponent=!0},26452:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://www.ayqy.net/blog/react-ssr-under-the-hood/"}),"React SSR 之原理篇"))),(0,i.kt)("p",null,"客户端兜底接口是否合理"))}c.isMDXComponent=!0},48194:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Server Components"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Good user experience: 用户体验",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"stable loading"))),(0,i.kt)("li",{parentName:"ul"},"Cheap maintenance: 可维护性",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"write fetch in one place"))),(0,i.kt)("li",{parentName:"ul"},"Fast performance: 性能",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"promise.all")))),(0,i.kt)("h3",null,"link"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/blog/2020/12/21/data-fetching-with-react-server-components.html"}),"https://reactjs.org/blog/2020/12/21/data-fetching-with-react-server-components.html")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.zhihu.com/question/435921124/answer/1641702920"}),"如何看待 React Server Components？"))))}c.isMDXComponent=!0},26367:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"移动端组件库"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://nutui.jd.com/#/intro"}),"NutUI"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"公司: 京东"),(0,i.kt)("li",{parentName:"ul"},"技术栈: vue")))))}c.isMDXComponent=!0},33354:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Note"),(0,i.kt)("h3",null,"Server Components"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/reactwg/server-components"}),"server-components"))),(0,i.kt)("h3",null,"Topic"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=2935"}),"React 18 for App Developers")," 48:55",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"introduce how to modify React from 16 to 18."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=4084"}),"Streaming Server Rendering with Suspense")," by Shaundai Person(Netflix) 1:08:04"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=5203"}),"The First React Working Group")," 1:26:43",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"UseSyncExternalStore"),(0,i.kt)("li",{parentName:"ul"},"UseId: 后续待探究，是否使用该 hooks 可以避免组件多一次 render 的问题。"),(0,i.kt)("li",{parentName:"ul"},"UseInsertionEffect: for helping CSS-IN-JS libraries."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=6086"}),"React Developer Tooling")," 1:41:26"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=6855"}),"React Without Memo")," 1:54:15",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"React Forget"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=8116"}),"React Docs Keynote")," 2:15:16"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=8722"}),"Things I Learnt from the New React Docs")," 2.25:22"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=9281"}),"Learning in the Browser——zero to React in One Window")," 2:34:41"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=9925"}),"The ROI OF Designing With React")," 2:45:25"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=10592"}),"Interactive Playgrounds with React")," 2:56:32"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=11722"}),"Re-introducing Relay")," 3:15:22"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=12892"}),"React Native Desktop")," 3:34:52"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=13825"}),"On-device Machine Learning for React Native")," 3:50:25"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://youtu.be/8dUpL8SCO1w?t=15323"}),"React 18 for External Store Libraries")," 4:15:23")),(0,i.kt)("p",null,"watch to 4:19:38"),(0,i.kt)("h3",null,"Link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.youtube.com/watch?v=8dUpL8SCO1w"}),"React Conf 2021"))))}c.isMDXComponent=!0},372:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Code Spliting"),(0,i.kt)("p",null,"在 16.6 版本之前，",(0,i.kt)("inlineCode",{parentName:"p"},"code-spliting")," 通常是由第三方库来完成的，比如 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/jamiebuilds/react-loadable"}),"react-loadble"),"(核心思路为: 高阶组件 + webpack dynamic import), 在 16.6 版本中提供了 ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"lazy")," 这两个钩子, 因此在之后的版本中便可以使用其来实现 ",(0,i.kt)("inlineCode",{parentName:"p"},"Code Spliting"),"。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"目前阶段, 服务端渲染中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"code-spliting")," 还是得使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"react-loadable"),", 可查阅 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/code-splitting.html#reactlazy"}),"React.lazy"),", 暂时先不探讨原因。")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Code Spliting")," 在 ",(0,i.kt)("inlineCode",{parentName:"p"},"React")," 中的使用方法是在 ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense")," 组件中使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"<LazyComponent>")," 组件:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'import { Suspense, lazy } from \'react\'\n\nconst DemoA = lazy(() => import(\'./demo/a\'))\nconst DemoB = lazy(() => import(\'./demo/b\'))\n\n<Suspense>\n  <NavLink to="/demoA">DemoA</NavLink>\n  <NavLink to="/demoB">DemoB</NavLink>\n\n  <Router>\n    <DemoA path="/demoA" />\n    <DemoB path="/demoB" />\n  </Router>\n</Suspense>\n')),(0,i.kt)("p",null,"源码中 ",(0,i.kt)("inlineCode",{parentName:"p"},"lazy")," 将传入的参数封装成一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"LazyComponent")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function lazy(ctor) {\n  return {\n    $$typeof: REACT_LAZY_TYPE, // 相关类型\n    _ctor: ctor,\n    _status: -1,   // dynamic import 的状态\n    _result: null, // 存放加载文件的资源\n  };\n}\n")),(0,i.kt)("p",null,"观察 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/react/blob/29b7b775f2ecf878eaf605be959d959030598b07/packages/react-reconciler/src/ReactFiberLazyComponent.js#L30-L87"}),"readLazyComponentType")," 后可以发现 ",(0,i.kt)("inlineCode",{parentName:"p"},"dynamic import")," 本身类似 ",(0,i.kt)("inlineCode",{parentName:"p"},"Promise")," 的执行机制, 也具有 ",(0,i.kt)("inlineCode",{parentName:"p"},"Pending"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"Resolved"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"Rejected")," 三种状态, 这就比较好理解为什么 ",(0,i.kt)("inlineCode",{parentName:"p"},"LazyComponent")," 组件需要放在 ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense")," 中执行了(",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense")," 中提供了相关的捕获机制, 下文会进行模拟实现`), 相关源码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function readLazyComponentType(lazyComponent) {\n  const status = lazyComponent._status;\n  const result = lazyComponent._result;\n  switch (status) {\n    case Resolved: { // Resolve 时，呈现相应资源\n      const Component = result;\n      return Component;\n    }\n    case Rejected: { // Rejected 时，throw 相应 error\n      const error = result;\n      throw error;\n    }\n    case Pending: {  // Pending 时, throw 相应 thenable\n      const thenable = result;\n      throw thenable;\n    }\n    default: { // 第一次执行走这里\n      lazyComponent._status = Pending;\n      const ctor = lazyComponent._ctor;\n      const thenable = ctor(); // 可以看到和 Promise 类似的机制\n      thenable.then(\n        moduleObject => {\n          if (lazyComponent._status === Pending) {\n            const defaultExport = moduleObject.default;\n            lazyComponent._status = Resolved;\n            lazyComponent._result = defaultExport;\n          }\n        },\n        error => {\n          if (lazyComponent._status === Pending) {\n            lazyComponent._status = Rejected;\n            lazyComponent._result = error;\n          }\n        },\n      );\n      // Handle synchronous thenables.\n      switch (lazyComponent._status) {\n        case Resolved:\n          return lazyComponent._result;\n        case Rejected:\n          throw lazyComponent._result;\n      }\n      lazyComponent._result = thenable;\n      throw thenable;\n    }\n  }\n}\n")),(0,i.kt)("h3",null,"Async Data Fetching"),(0,i.kt)("p",null,"为了解决获取的数据在不同时刻进行展现的问题(在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/demos-platform/suspenseDemo"}),"suspenseDemo")," 中有相应演示), ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense")," 给出了解决方案。"),(0,i.kt)("p",null,"下面放两段代码，可以从中直观地感受在 ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense")," 中使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"Async Data Fetching")," 带来的便利。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"一般进行数据获取的代码如下:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"export default class Demo extends Component {\n  state = {\n    data: null,\n  };\n\n  componentDidMount() {\n    fetchAPI(`/api/demo/${this.props.id}`).then((data) => {\n      this.setState({ data });\n    });\n  }\n\n  render() {\n    const { data } = this.state;\n\n    if (data == null) {\n      return <Spinner />;\n    }\n\n    const { name } = data;\n\n    return (\n      <div>{name}</div>\n    );\n  }\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"在 ",(0,i.kt)("inlineCode",{parentName:"li"},"Suspense")," 中进行数据获取的代码如下:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const resource = unstable_createResource((id) => {\n  return fetchAPI(`/api/demo`)\n})\n\nfunction Demo {\n  const data = resource.read(this.props.id)\n\n  const { name } = data;\n\n  return (\n    <div>{name}</div>\n  );\n}\n")),(0,i.kt)("p",null,"可以看到在 ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense")," 中进行数据获取的代码量相比正常的进行数据获取的代码少了将近一半！少了哪些地方呢?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"减少了 ",(0,i.kt)("inlineCode",{parentName:"li"},"loading")," 状态的维护(在最外层的 Suspense 中统一维护子组件的 loading)"),(0,i.kt)("li",{parentName:"ul"},"减少了不必要的生命周期的书写")),(0,i.kt)("h3",null,"总结: 如何在 Suspense 中使用 Data Fetching"),(0,i.kt)("p",null,"当前 ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense")," 的使用分为三个部分:"),(0,i.kt)("p",null,"第一步: 用 ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspens")," 组件包裹子组件"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import { Suspense } from 'react'\n\n<Suspense fallback={<Loading />}>\n  <ChildComponent>\n</Suspense>\n")),(0,i.kt)("p",null,"第二步: 在子组件中使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"unstable_createResource"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import { unstable_createResource } from 'react-cache'\n\nconst resource = unstable_createResource((id) => {\n  return fetch(`/demo/${id}`)\n})\n")),(0,i.kt)("p",null,"第三步: 在 ",(0,i.kt)("inlineCode",{parentName:"p"},"Component")," 中使用第一步创建的 ",(0,i.kt)("inlineCode",{parentName:"p"},"resource"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const data = resource.read('demo')\n")),(0,i.kt)("h3",null,"相关思路解读"),(0,i.kt)("p",null,"来看下源码中 ",(0,i.kt)("inlineCode",{parentName:"p"},"unstable_createResource")," 的部分会比较清晰:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"export function unstable_createResource(fetch, maybeHashInput) {\n  const resource = {\n    read(input) {\n      ...\n      const result = accessResult(resource, fetch, input, key);\n      switch (result.status) {\n        case Pending: {\n          const suspender = result.value;\n          throw suspender;\n        }\n        case Resolved: {\n          const value = result.value;\n          return value;\n        }\n        case Rejected: {\n          const error = result.value;\n          throw error;\n        }\n        default:\n          // Should be unreachable\n          return (undefined: any);\n      }\n    },\n  };\n  return resource;\n}\n")),(0,i.kt)("p",null,"结合该部分源码, 进行如下推测:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"第一次请求没有缓存, 子组件 ",(0,i.kt)("inlineCode",{parentName:"li"},"throw")," 一个 ",(0,i.kt)("inlineCode",{parentName:"li"},"thenable")," 对象, ",(0,i.kt)("inlineCode",{parentName:"li"},"Suspense")," 组件内的 ",(0,i.kt)("inlineCode",{parentName:"li"},"componentDidCatch")," 捕获之, 此时展示 ",(0,i.kt)("inlineCode",{parentName:"li"},"Loading")," 组件;"),(0,i.kt)("li",{parentName:"ol"},"当 ",(0,i.kt)("inlineCode",{parentName:"li"},"Promise")," 态的对象变为完成态后, 页面刷新此时 ",(0,i.kt)("inlineCode",{parentName:"li"},"resource.read()")," 获取到相应完成态的值;"),(0,i.kt)("li",{parentName:"ol"},"之后如果相同参数的请求, 则走 ",(0,i.kt)("inlineCode",{parentName:"li"},"LRU")," 缓存算法, 跳过 ",(0,i.kt)("inlineCode",{parentName:"li"},"Loading")," 组件返回结果(缓存算法见后记);")),(0,i.kt)("p",null,"官方作者是说法如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/22849313e0b8b19e833df9a9a59a8546.jpg-400",alt:null}))),(0,i.kt)("p",null,"所以说法大致相同, 下面实现一个简单版的 ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"class Suspense extends React.Component {\n  state = {\n    promise: null\n  }\n\n  componentDidCatch(e) {\n    if (e instanceof Promise) {\n      this.setState({\n        promise: e\n      }, () => {\n        e.then(() => {\n          this.setState({\n            promise: null\n          })\n        })\n      })\n    }\n  }\n\n  render() {\n    const { fallback, children } = this.props\n    const { promise } = this.state\n    return <>\n      { promise ? fallback : children }\n    </>\n  }\n}\n")),(0,i.kt)("p",null,"进行如下调用"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),'<Suspense fallback={<div>loading...</div>}>\n  <PromiseThrower />\n</Suspense>\n\nlet cache = "";\nlet returnData = cache;\nconst fetch = () =>\n  new Promise(resolve => {\n    setTimeout(() => {\n      resolve("数据加载完毕");\n    }, 2000);\n  });\n\nclass PromiseThrower extends React.Component {\n  getData = () => {\n    const getData = fetch();\n\n    getData.then(data => {\n      returnData = data;\n    });\n    if (returnData === cache) {\n      throw getData;\n    }\n    return returnData;\n  };\n\n  render() {\n    return <>{this.getData()}</>;\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/90586c1edf33c7d143f2a3ec59667ab4.gif",alt:null}))),(0,i.kt)("p",null,"效果调试可以点击",(0,i.kt)("a",u({parentName:"p"},{href:"https://codesandbox.io/s/1zy82mm0j4"}),"这里"),", 在 ",(0,i.kt)("inlineCode",{parentName:"p"},"16.6")," 版本之后, ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidCatch")," 只能捕获 ",(0,i.kt)("inlineCode",{parentName:"p"},"commit phase")," 的异常。所以在 ",(0,i.kt)("inlineCode",{parentName:"p"},"16.6")," 版本之后实现的 ",(0,i.kt)("inlineCode",{parentName:"p"},"<PromiseThrower>")," 又有一些差异(即将 ",(0,i.kt)("inlineCode",{parentName:"p"},"throw thenable")," 移到 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidMount")," 中进行)。"),(0,i.kt)("h3",null,"ConcurrentMode + Suspense"),(0,i.kt)("p",null,"当网速足够快, 数据立马就获取到了，此时页面存在的 ",(0,i.kt)("inlineCode",{parentName:"p"},"Loading")," 按钮就显得有些多余了。(在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/demos-platform/suspenseDemo"}),"suspenseDemo")," 中有相应演示), ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense")," 在 ",(0,i.kt)("inlineCode",{parentName:"p"},"Concurrent Mode")," 下给出了相应的解决方案, 其提供了 ",(0,i.kt)("inlineCode",{parentName:"p"},"maxDuration")," 参数。用法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<Suspense maxDuration={500} fallback={<Loading />}>\n  ...\n</Suspense>\n")),(0,i.kt)("p",null,"该 Demo 的效果为当获取数据的时间大于(是否包含等于还没确认) 500 毫秒, 显示自定义的 ",(0,i.kt)("inlineCode",{parentName:"p"},"<Loading />")," 组件, 当获取数据的时间小于 500 毫秒, 略过 ",(0,i.kt)("inlineCode",{parentName:"p"},"<Loading>")," 组件直接展示用户的数据。",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/react/blob/29b7b775f2ecf878eaf605be959d959030598b07/packages/react-reconciler/src/ReactFiberUnwindWork.js#L232-L242"}),"相关源码"),"。"),(0,i.kt)("p",null,"需要注意的是 ",(0,i.kt)("inlineCode",{parentName:"p"},"maxDuration")," 属性只有在 ",(0,i.kt)("inlineCode",{parentName:"p"},"Concurrent Mode")," 下才生效, 可参考",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/react/blob/29b7b775f2ecf878eaf605be959d959030598b07/packages/react-reconciler/src/ReactFiberUnwindWork.js#L270-L277"}),"源码中的注释"),"。在 Sync 模式下, ",(0,i.kt)("inlineCode",{parentName:"p"},"maxDuration")," 始终为 0。"),(0,i.kt)("h3",null,"后记: 缓存算法"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"LRU")," 算法: ",(0,i.kt)("inlineCode",{parentName:"li"},"Least Recently Used")," 最近最少使用算法(根据时间);"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"LFU")," 算法: ",(0,i.kt)("inlineCode",{parentName:"li"},"Least Frequently Used")," 最近最少使用算法(根据次数);")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://juejin.im/post/5c0392656fb9a049fb4366fa"}),"漫画：什么是 LRU 算法"))),(0,i.kt)("p",null,"若数据的长度限定是 ",(0,i.kt)("inlineCode",{parentName:"p"},"3"),", 访问顺序为 ",(0,i.kt)("inlineCode",{parentName:"p"},"set(2,2),set(1,1),get(2),get(1),get(2),set(3,3),set(4,4)"),", 则根据 ",(0,i.kt)("inlineCode",{parentName:"p"},"LRU")," 算法删除的是 ",(0,i.kt)("inlineCode",{parentName:"p"},"(1, 1)"),", 根据 ",(0,i.kt)("inlineCode",{parentName:"p"},"LFU")," 算法删除的是 ",(0,i.kt)("inlineCode",{parentName:"p"},"(3, 3)"),"。"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"react-cache")," 采用的是 ",(0,i.kt)("inlineCode",{parentName:"p"},"LRU")," 算法。"),(0,i.kt)("h3",null,"相关资料"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/demos-platform/suspenseDemo"}),"suspenseDemo"),": 文字相关案例都集成在该 demo 中"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/issues/13206"}),"Releasing Suspense"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"Suspense")," 开发进度"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/@ryanflorence/the-suspense-is-killing-redux-e888f9692430"}),"the suspense is killing redux"))))}c.isMDXComponent=!0},30880:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Schedule"),(0,i.kt)("p",null,"解决",(0,i.kt)("inlineCode",{parentName:"p"},"目标对象更快完成渲染"),"与",(0,i.kt)("inlineCode",{parentName:"p"},"及时响应优先级更高任务"),"之间的矛盾。"),(0,i.kt)("h3",null,"Perceived Performance"),(0,i.kt)("p",null,"Perceived performance 可感知到的性能"),(0,i.kt)("p",null,"在流畅性的章节中提到将主线程的一个长任务进行",(0,i.kt)("inlineCode",{parentName:"p"},"时间分片"),"可以拆分为多个帧任务, 但如果同时存在多个任务则必然会存在一种竞争机制, 于是需要一种 ",(0,i.kt)("inlineCode",{parentName:"p"},"Schedule")," 机制, 在时间分片中加入",(0,i.kt)("inlineCode",{parentName:"p"},"动态优先级"),"的概念来真正避免卡顿现象。"),(0,i.kt)("h3",null,"Schedule"),(0,i.kt)("p",null,"调度算法思想:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"任务执行时间得足够短, 能在一帧时间内执行完(时间分片);"),(0,i.kt)("li",{parentName:"ul"},"不同任务存在不同的优先级;")),(0,i.kt)("h3",null,"任务的种类"),(0,i.kt)("p",null,"在一帧中执行的任务种类有以下几种类别:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"user-blocking tasks"),": 基于用户的交互的任务(可见), 需在当前帧处理; -> ",(0,i.kt)("inlineCode",{parentName:"li"},"input"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"rAF"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"microtask"),"(顺畅的交互应小于 10 ms, 下同)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"default tasks"),": 基于用户获取数据渲染到界面上的任务(可见), 在当前的帧以及下一帧里处理; -> ",(0,i.kt)("inlineCode",{parentName:"li"},"macrotask"),"(小于 100 ms)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"idle tasks"),": 和分析、缓存、排序相关的任务(不可见); -> ",(0,i.kt)("inlineCode",{parentName:"li"},"requestIdleCallback"),"(小于 10 ms)")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"不能拆分的任务(执行时间较长的 chunk)怎么办？")),(0,i.kt)("p",null,"借助 ",(0,i.kt)("inlineCode",{parentName:"p"},"web Worker")),(0,i.kt)("h3",null,"任务的排序机制"),(0,i.kt)("p",null,"任务的排序机制是由 ",(0,i.kt)("inlineCode",{parentName:"p"},"expiration time")," 这个字段决定的，其值为 ",(0,i.kt)("inlineCode",{parentName:"p"},"callback 的注册时间"),"与",(0,i.kt)("inlineCode",{parentName:"p"},"当前任务优先级的值"),"之和, 表示过期时间(值越小, 越早执行)。"),(0,i.kt)("p",null,"优先级的值分为以下几种类别:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Immediate"),": (0ms timeout)需要实时交互的任务;              (Do it now)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"User Block"),": (250ms timeout)对页面交互有副作用的任务;      (Do it now)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Normal"),": (5s timeout)不影响交互的任务;                    (Do it soon)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Low"),": (10s timeout)可以延迟执行，但最终需要执行的任务;      (Do it eventually)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Idle"),": (no timeout)执行与否不影响应用的任务;               (Do it if you can)")),(0,i.kt)("p",null,"在了解了 ",(0,i.kt)("inlineCode",{parentName:"p"},"expiration time")," 之后, 对 ",(0,i.kt)("inlineCode",{parentName:"p"},"Schedule")," 的流程进行如下概述:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"所有回调根据 ",(0,i.kt)("inlineCode",{parentName:"li"},"expiration time")," 排好序放入一个队列中;"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"Schedule")," 自己注册一个回调 callback 调用该队列，并下一个帧中执行它;"),(0,i.kt)("li",{parentName:"ol"},"在下一帧中尽可能多地执行队形里的回调;")),(0,i.kt)("h3",null,"Schedule 源码分析"),(0,i.kt)("p",null,"Schedule 中 4 个比较重要的方法的作用罗列如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"requestHostCallback: 提供调用下一帧的能力"),(0,i.kt)("li",{parentName:"ul"},"cancelHostCallback: 提供取消当前任务的能力"),(0,i.kt)("li",{parentName:"ul"},"shouldYieldToHost: 提供暂停当前任务的能力"),(0,i.kt)("li",{parentName:"ul"},"getCurrentTime: 根据该函数获取的值从而判断具体的优先级")),(0,i.kt)("h3",null,"JND"),(0,i.kt)("p",null,"JND(Just Noticeable Difference), ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/react/blob/0f1e97e7cb67b7e403af5f78f38294dfd33e081e/packages/react-reconciler/src/ReactFiberWorkLoop.js#L2144-L2167"}),"JND")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// Computes the next Just Noticeable Difference (JND) boundary.\n// The theory is that a person can't tell the difference between small differences in time.\n// Therefore, if we wait a bit longer than necessary that won't translate to a noticeable\n// difference in the experience. However, waiting for longer might mean that we can avoid\n// showing an intermediate loading state. The longer we have already waited, the harder it\n// is to tell small differences in time. Therefore, the longer we've already waited,\n// the longer we can wait additionally. At some point we have to give up though.\n// We pick a train model where the next boundary commits at a consistent schedule.\n// These particular numbers are vague estimates. We expect to adjust them based on research.\nfunction jnd(timeElapsed: number) {\n  return timeElapsed < 120\n    ? 120\n    : timeElapsed < 480\n      ? 480\n      : timeElapsed < 1080\n        ? 1080\n        : timeElapsed < 1920\n          ? 1920\n          : timeElapsed < 3000\n            ? 3000\n            : timeElapsed < 4320\n              ? 4320\n              : ceil(timeElapsed / 1960) * 1960;\n}\n")),(0,i.kt)("h3",null,"Connection between Time Slicing and Suspense"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Time Slicing")," is the premise of ",(0,i.kt)("inlineCode",{parentName:"p"},"Suspense"),". Because in each time slicing it can compare the task priority, and then determine whether to show the loading."),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/6999fa9b5759613e1dde3b2dfec7076d.jpg",alt:null}))),(0,i.kt)("h3",null,"is-input-pending"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"相比 ",(0,i.kt)("inlineCode",{parentName:"li"},"requestIdleCallback"),", 其有更简洁的 api;"),(0,i.kt)("li",{parentName:"ul"},"另外其不会受到优先级的限制;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/WICG/is-input-pending"}),"is-input-pending"))),(0,i.kt)("h3",null,"相关文章"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://developer.chrome.com/devsummit/schedule/scheduling-on-off-main-thread"}),"scheduling-on-off-main-thread"),": 讲解了如何在帧里拆分任务以及使用 worker 的一些限制"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://philippspiess.com/scheduling-in-react/#fn-1"}),"Scheduling in React"),": 任务的排序机制"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/WICG/main-thread-scheduling"}),"main-thread-scheduling"),": schedule API in future. 核心是从最高优先级的任务中挑选时间过去最久的任务。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.youtube.com/watch?reload=9&v=Iyrf52cwxQI&feature=youtu.be&utm_source=tinyreact&utm_medium=email"}),"Scheduling is the Future"),": @ReactEurope 2019 speaker: @aweary")))}c.isMDXComponent=!0},64001:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"style-components"),(0,i.kt)("h4",null,"用法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const Title = styled.h1`\n  font-size: 1.5em;\n  text-align: center;\n  color: palevioletred;\n`;\n")),(0,i.kt)("p",null,"简版 style-components 的实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// When I call this function…\nfunction h1(styles) {\n  // …it generates a brand-new React component…\n  return function NewComponent(props) {\n    // …which will render the associated HTML element:\n    return <h1 {...props} />\n  }\n}\n")),(0,i.kt)("h4",null,"优点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Lazy CSS Injection",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"实现: 利用闭包")))),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.joshwcomeau.com/react/demystifying-styled-components/"}),"https://www.joshwcomeau.com/react/demystifying-styled-components/"),": 实现一个简版的 style-component")))}c.isMDXComponent=!0},82981:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Suspense 设计模式"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"fetch on render"),": 目前一般数据获取写在 componentDidMount 阶段, 其获取数据的过程中, 执行顺序如下所示:")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"start fetchA"),(0,i.kt)("li",{parentName:"ol"},"...",(0,i.kt)("inlineCode",{parentName:"li"},"wait Time1"),"..."),(0,i.kt)("li",{parentName:"ol"},"finish fetchA"),(0,i.kt)("li",{parentName:"ol"},"start fetchB"),(0,i.kt)("li",{parentName:"ol"},"...",(0,i.kt)("inlineCode",{parentName:"li"},"wait Time2"),"..."),(0,i.kt)("li",{parentName:"ol"},"finish fetchB")),(0,i.kt)("p",null,"这么做存在的问题: 在 B 组件中开始请求数据时至少要等上 ",(0,i.kt)("inlineCode",{parentName:"p"},"Time1")," 时间, 是一种 ",(0,i.kt)("inlineCode",{parentName:"p"},"network waterfall")," 而非",(0,i.kt)("inlineCode",{parentName:"p"},"并发请求"),";"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"fetch then render"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"调用 setState 之前先获取数据"),", 比如在 A 组件的 componentDidMount 中使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"Promise.all()")," 同时执行 ",(0,i.kt)("inlineCode",{parentName:"li"},"fetchA, fetchB"))),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"start fetchA"),(0,i.kt)("li",{parentName:"ol"},"start fetchB"),(0,i.kt)("li",{parentName:"ol"},"finish fetchA"),(0,i.kt)("li",{parentName:"ol"},"finish fetchB"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"render"))),(0,i.kt)("p",null,"这么做存在的问题: A 组件和 B 组件上的数据显示时间取决于请求时间更长的接口, 所以",(0,i.kt)("inlineCode",{parentName:"p"},"页面上渲染数据必然会存在延时"),";"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"render as fetch"),": 使用 Suspense 后的效果呢?")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"start fetchA"),(0,i.kt)("li",{parentName:"ol"},"start fetchB"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"render")),(0,i.kt)("li",{parentName:"ol"},"finish fetchA"),(0,i.kt)("li",{parentName:"ol"},"finish fetchB")),(0,i.kt)("p",null,"它很好地规避了上述遇到的两个问题:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"解决接口根据 render 走导致",(0,i.kt)("inlineCode",{parentName:"li"},"不能并发请求接口"),"的痛点;"),(0,i.kt)("li",{parentName:"ol"},"解决使用 Promise.all 带来的",(0,i.kt)("inlineCode",{parentName:"li"},"页面数据内容存在延时"),"的问题;")),(0,i.kt)("h3",null,"Concurrent UI patterns"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Default Mode"),": Receded → Skeleton → Complete"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Preferred Mode"),": Pending → Skeleton → Complete")),(0,i.kt)("p",null,"总结:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Receded 不好的原因是因为其把页面现有的内容给弄丢了。"),(0,i.kt)("li",{parentName:"ul"},"可以使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"useTransition")," 进入 Pending 状态 —— 位于当前页的同时, 加载下一页(想象多元宇宙)"),(0,i.kt)("li",{parentName:"ul"},"如果不想下一个页面的非核心组件延长 Pending 的时间, 用 Suspense 包裹它;")),(0,i.kt)("h3",null,"useDeferredValue"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"useDeferredValue")," 的作用: 能让组件中的部分内容",(0,i.kt)("inlineCode",{parentName:"p"},"延迟加载"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const deferredText = useDeferredValue(text, {\n  timeoutMs: 5000\n})\n")),(0,i.kt)("p",null,"这里第二个参数表示, 能确保 5s 之内输入框内的输入是顺滑的。"),(0,i.kt)("h3",null,"SuspenseList"),(0,i.kt)("p",null,"SuspenseList 中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"revealOrder")," 字段能控制其里面 Suspense 节点的输出顺序, ",(0,i.kt)("inlineCode",{parentName:"p"},"tail")," 字段控制当前加载的节点数。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'function ProfilePage({ resource }) {\n  return (\n    <SuspenseList revealOrder="forwards" tail="collapsed">\n      <ProfileDetails resource={resource} />\n      <Suspense fallback={<h2>Loading posts...</h2>}>\n        <ProfileTimeline resource={resource} />\n      </Suspense>\n      <Suspense fallback={<h2>Loading fun facts...</h2>}>\n        <ProfileTrivia resource={resource} />\n      </Suspense>\n    </SuspenseList>\n  );\n}\n')))}c.isMDXComponent=!0},73160:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"前置准备"),(0,i.kt)("p",null,"本系列文章在实现 cpreact 的同时理顺 React 框架的核心内容(JSX/虚拟 DOM/组件/生命周期/diff 算法/setState/PureComponent/HOC/onChange 事件) ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/cpreact"}),"项目地址")),(0,i.kt)("h3",null,"环境准备"),(0,i.kt)("p",null,"首先安装以下 babel 模块, 其具体作用会在后文 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/1.JSX%E5%92%8C%E8%99%9A%E6%8B%9FDOM.md"}),"JSX 和 虚拟 DOM")," 中提及。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"扩展延伸: ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E7%95%AA%E5%A4%96%E7%AF%87/babel%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6.md"}),"babel 执行机制"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'"@babel/core": "^7.0.0",\n"@babel/preset-env": "^7.0.0",\n"@babel/preset-react": "^7.0.0",\n"babel-loader": "v8.0.0-beta.0",\n')),(0,i.kt)("p",null,"同时 ",(0,i.kt)("inlineCode",{parentName:"p"},".babelrc")," 配置如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'{\n  "presets": [\n    [\n      "@babel/preset-env",\n      {\n        "targets": "> 0.25%, not dead",\n        "useBuiltIns": "entry"\n      }\n    ],\n    [\n      "@babel/preset-react", {\n        "pragma": "cpreact.createElement" // 该参数传向 transform-react-jsx 插件, 是前置的一个核心, 后文有解释为什么使用 cpreact.createElement\n      }\n    ]\n  ]\n}\n')),(0,i.kt)("p",null,"配置好 babel 后, 接着提供两套打包工具的配置方案, 读者可以自行选择。"),(0,i.kt)("h4",null,"方案 1: 使用 webpack"),(0,i.kt)("p",null,"webpack 拥有一个活跃的社区, 提供了更为丰富的打包能力。"),(0,i.kt)("p",null,"首先安装以下模块:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'"webpack": "^4.17.2",\n"webpack-cli": "^3.1.0",\n"webpack-dev-server": "^3.1.8"\n')),(0,i.kt)("p",null,"在根目录的 ",(0,i.kt)("inlineCode",{parentName:"p"},"webpack.config.js")," 配置如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const webpack = require('webpack')\nconst path = require('path')\nconst rootPath = path.resolve(__dirname)\n\nmodule.exports = {\n  entry: path.resolve(rootPath, 'test', 'index.js'),\n  mode: 'development',\n  devtool: 'inline-source-map',\n  devServer: {\n    contentBase: './dist'\n  },\n  output: {\n    filename: 'cpreact.js',\n    path: path.resolve(rootPath, 'dist'),\n    libraryTarget: 'umd'\n  },\n  module: {\n    rules: [{\n      test: /\\.js$/,\n      loader: \"babel-loader\",\n    }]\n  },\n}\n")),(0,i.kt)("p",null,"然后在 ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," 里加上如下配置:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'"scripts": {\n  "start": "webpack-dev-server --open",\n},\n')),(0,i.kt)("p",null,"具体可以参照 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/cpreact/blob/master/webpack.config.js"}),"0.4.3 版本")),(0,i.kt)("h4",null,"方案 2: 使用 parcel"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://parceljs.org/getting_started.html"}),"parcel")," 是一款上手极快的打包工具, 使用其可以快速地进入项目开发的状态。在 ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," 加上如下配置, 具体可以参照 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/cpreact/blob/0.1/package.json"}),"0.1 版本")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'"scripts": {\n  "start": "parcel ./index.html --open -p 8080 --no-cache"\n},\n')))}c.isMDXComponent=!0},17583:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"JSX 和 虚拟 DOM"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'const element = (\n  <div className="title">\n    hello<span className="content">world!</span>\n  </div>\n)\n')),(0,i.kt)("p",null,"JSX 是一种语法糖, 经过 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://babeljs.io/en/repl"}),"babel")," 转换结果如下, 可以发现实际上转化成 ",(0,i.kt)("inlineCode",{parentName:"p"},"React.createElement()")," 的形式:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"扩展: ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E7%95%AA%E5%A4%96%E7%AF%87/babel%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6.md"}),"babel 执行机制"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'var element = React.createElement(\n  "div",\n  { className: "title" },\n  "hello",\n  React.createElement(\n    "span",\n    { className: "content" },\n    "world!"\n  )\n);\n')),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://preactjs.com/repl"}),"打印")," element, 结果如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'{\n  attributes: {className: "title"}\n  children: ["hello", t] // t 和外层对象相同\n  key: undefined\n  nodeName: "div"\n}\n')),(0,i.kt)("p",null,"因此, 我们得出结论: JSX 语法糖经过 Babel 编译后转换成一种对象, 该对象即所谓的",(0,i.kt)("inlineCode",{parentName:"p"},"虚拟 DOM"),", 使用虚拟 DOM 能让页面进行更为高效的渲染。"),(0,i.kt)("p",null,"我们按照这种思路进行函数的构造:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'const React = {\n  createElement\n}\n\nfunction createElement(tag, attr, ...child) {\n  return {\n    attributes: attr,\n    children: child,\n    key: undefined,\n    nodeName: tag,\n  }\n}\n\n// 测试\nconst element = (\n  <div className="title">\n    hello<span className="content">world!</span>\n  </div>\n)\n\nconsole.log(element) // 打印结果符合预期\n// {\n//   attributes: {className: "title"}\n//   children: ["hello", t] // t 和外层对象相同\n//   key: undefined\n//   nodeName: "div"\n// }\n')),(0,i.kt)("h3",null,"虚拟 DOM 转化为真实 DOM"),(0,i.kt)("p",null,"上个小节介绍了 JSX 转化为虚拟 DOM 的过程, 这个小节接着来实现将虚拟 DOM 转化为真实 DOM (页面上渲染的是真实 DOM)。"),(0,i.kt)("p",null,"我们知道在 React 中, 将虚拟 DOM 转化为真实 DOM 是使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactDOM.render")," 实现的, 使用如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import ReactDOM from 'react-dom'\n\nReactDOM.render(\n  element, // 上文的 element, 即虚拟 dom\n  document.getElementById('root')\n)\n")),(0,i.kt)("p",null,"接着来实现 ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactDOM.render")," 的逻辑:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const ReactDOM = {\n  render\n}\n\n/**\n * 将虚拟 DOM 转化为真实 DOM\n * @param {*} vdom      虚拟 DOM\n * @param {*} container 需要插入的位置\n */\nfunction render(vdom, container) {\n  if (_.isString(vdom) || _.isNumber(vdom)) {\n    container.innerText = container.innerText + vdom // fix <div>I'm {this.props.name}</div>\n    return\n  }\n  const dom = document.createElement(vdom.nodeName)\n  for (let attr in vdom.attributes) {\n    setAttribute(dom, attr, vdom.attributes[attr])\n  }\n  vdom.children.forEach(vdomChild => render(vdomChild, dom))\n  container.appendChild(dom)\n}\n\n/**\n * 给节点设置属性\n * @param {*} dom   操作元素\n * @param {*} attr  操作元素属性\n * @param {*} value 操作元素值\n */\nfunction setAttribute(dom, attr, value) {\n  if (attr === 'className') {\n    attr = 'class'\n  }\n  if (attr.match(/on\\w+/)) {   // 处理事件的属性:\n    const eventName = attr.toLowerCase().substr(2)\n    dom.addEventListener(eventName, value)\n  } else if (attr === 'style') { // 处理样式的属性:\n    let styleStr = ''\n    let standardCss\n    for (let klass in value) {\n      standardCss = humpToStandard(klass) // 处理驼峰样式为标准样式\n      value[klass] = _.isNumber(+value[klass]) ? value[klass] + 'px' : value[klass] // style={{ className: '20' || '20px' }}>\n      styleStr += `${standardCss}: ${value[klass]};`\n    }\n    dom.setAttribute(attr, styleStr)\n  } else {                       // 其它属性\n    dom.setAttribute(attr, value)\n  }\n}\n")),(0,i.kt)("p",null,"至此, 我们成功将虚拟 DOM 复原为真实 DOM, 展示如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/a898514bd3d08df4366e5ceb7843cddf.jpg-400",alt:null}))),(0,i.kt)("p",null,"另外配合热更新, 在热更新的时候清空之前的 dom 元素, 改动如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const ReactDOM = {\n  render(vdom, container) {\n    container.innerHTML = null\n    render(vdom, container)\n  }\n}\n")),(0,i.kt)("h3",null,"小结"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"JSX")," 经过 babel 编译为 React.createElement() 的形式, 其返回结果就是 ",(0,i.kt)("inlineCode",{parentName:"p"},"Virtual DOM"),", 最后通过 ReactDOM.render() 将 Virtual DOM 转化为真实的 DOM 展现在界面上。流程图如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/5e451855ccc9017708b57164f9e221c6.jpg-400",alt:null}))),(0,i.kt)("h3",null,"思考题"),(0,i.kt)("p",null,"如下是一个 react/preact 的常用组件的写法, 那么为什么要 import 一个 React 或者 h 呢？"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"import React, { Component } from 'react' // react\n// import { h, Component } from 'preact' // preact\n\nclass A extends Component {\n  render() {\n    return <div>I'm componentA</div>\n  }\n}\n\nrender(<A />, document.body) // 组件的挂载\n")))}c.isMDXComponent=!0},84149:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"函数子组件"),(0,i.kt)("p",null,"使用方式如下, 页面渲染出 hello, cpreact, 至于是否实现先观望一段时间"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 父组件\nfunction App() {\n  return (\n    <Child>\n      {() => 'hello, cpreact.'}\n    </Child>\n  )\n}\n\n// 子组件\nconst Child = ({ children }) => children()\n")))}c.isMDXComponent=!0},24620:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Render Props"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"概要: 属性中传入函数, 函数返回组件"),(0,i.kt)("li",{parentName:"ul"},"目的: 封装行为")),(0,i.kt)("h3",null,"demo"),(0,i.kt)("p",null,"在如下例子中, 组件 ",(0,i.kt)("inlineCode",{parentName:"p"},"PassState")," 即为承载公用逻辑的载体。组件 ",(0,i.kt)("inlineCode",{parentName:"p"},"App")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"UseState")," 为使用方。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class PassState extends Component {\n  constructor() {\n    super()\n    this.state = { name: 'muyy' }\n  }\n\n  render() {\n    return (\n      <>{this.props.render(this.state)}</>\n    )\n  }\n}\n\nclass UseState extends Component {\n  render() {\n    const { state } = this.props\n    return <>{state.name}</>\n  }\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <PassState\n        render={(state) => (\n          <UseState state={state} />\n        )}\n      />\n    )\n  }\n}\n")),(0,i.kt)("p",null,"这是官方摘取的 render Props 例子, 只要将 render 进行替换成 children, 可以发现日常使用它的情形就很寻常了。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class PassState extends Component {\n  constructor() {\n    super()\n    this.state = { name: 'muyy' }\n  }\n\n  render() {\n    return (\n      <>{this.props.children(this.state)}</>\n    )\n  }\n}\n\nclass UseState extends Component {\n  render() {\n    const { state } = this.props\n    return <>{state.name}</>\n  }\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <PassState>\n        {(state) => (\n          <UseState state={state} />\n        )}\n      </PassState>\n    )\n  }\n}\n")),(0,i.kt)("p",null,"比如 beast-mobile 中 Matrix 组件就是这种形式。"),(0,i.kt)("h3",null,"render props 是否都适合转化为 Hooks"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"<Matrix dataSources={dataSources}>\n  {({ src, index }) => {\n    return (\n      <div\n        style={{\n          padding: 10,\n          background: '#ebebeb',\n          borderRadius: 4,\n          fontSize: '12px',\n          color: '#666'\n        }}\n      >\n        <div style={{ fontSize: '12px' }}> name: {src.name}</div>\n        <div style={{ fontSize: '12px' }}> age: {src.age}</div>\n        <div style={{ fontSize: '12px' }}> address: {src.address}</div>\n        <div style={{ fontSize: '12px' }}> index: {index}</div>\n      </div>\n    )\n  }}\n</Matrix>\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/e99997d480a89b1c5f244d19bd67404a.jpg-400",alt:null}))),(0,i.kt)("p",null,"Matrix 组件用于在项目中自动调整行内布局, 该组件中 render props 的参数是和当前排列数有关, 与",(0,i.kt)("inlineCode",{parentName:"p"},"排列数相关"),"的 render props 没有很好的办法转化为 Hooks, 因此 Render Props 还是有用武之地的。"))}c.isMDXComponent=!0},88035:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"问题"),(0,i.kt)("p",null,"在传统的大型前端项目开发中遇到的 CSS 问题有以下几点:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"CSS 全局命名空间"),(0,i.kt)("li",{parentName:"ul"},"删除不必要的代码不容易"),(0,i.kt)("li",{parentName:"ul"},"不支持动态计算"),(0,i.kt)("li",{parentName:"ul"},"压缩")))}c.isMDXComponent=!0},71419:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"React 服务端渲染实践"),(0,i.kt)("p",null,"优点:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"SEO"),(0,i.kt)("li",{parentName:"ul"},"首屏渲染体验"),(0,i.kt)("li",{parentName:"ul"},"前后端知识共享")))}c.isMDXComponent=!0},31429:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"组件即函数"),(0,i.kt)("p",null,"在上一篇 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/issues/24"}),"JSX 和 Virtual DOM")," 中, 解释了 JSX 渲染到界面的过程并实现了相应代码, 代码调用如下所示:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import React from 'react'\nimport ReactDOM from 'react-dom'\n\nconst element = (\n  <div className=\"title\">\n    hello<span className=\"content\">world!</span>\n  </div>\n)\n\nReactDOM.render(\n  element,\n  document.getElementById('root')\n)\n")),(0,i.kt)("p",null,"本小节, 我们接着探究组件渲染到界面的过程。在此我们引入组件的概念, ",(0,i.kt)("inlineCode",{parentName:"p"},"组件本质上就是一个函数"),", 如下就是一段标准组件代码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"import React from 'react'\n\n// 写法 1:\nclass A {\n  render() {\n    return <div>I'm componentA</div>\n  }\n}\n\n// 写法 2: 无状态组件\nconst A = () => <div>I'm componentA</div>\n\nReactDOM.render(<A />, document.body)\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},'<A name="componentA" />')," 是 JSX 的写法, 和",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/issues/24"}),"上一篇"),"同理, babel 将其转化为 React.createElement() 的形式, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://babeljs.io/en/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=MYGwhgzhAECC0FMAeAXBA7AJjAwgewFsAHPdDFaAbwCgBIAJw0wXoAoBKKuhhFAV3rpoAHkwBLAG4A-AJIByAlRQALMRAB0ReniIb0YAggC-wgPTjpAbjpHqt6sPj7DAXgBEwQiTLoUsN9CmUtRAA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&sourceType=module&lineWrap=true&presets=react&prettier=false&targets=&version=6.26.0&envVersion="}),"转化结果"),"如下所示:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"React.createElement(A, null)\n")),(0,i.kt)("p",null,"可以看到当 JSX 中是自定义组件的时候, createElement 后接的第一个参数变为了函数, 在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://preactjs.com/repl"}),"repl")," 打印 ",(0,i.kt)("inlineCode",{parentName:"p"},'<A name="componentA" />'),", 结果如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"{\n  attributes: undefined,\n  children: [],\n  key: undefined,\n  nodeName: ƒ A()\n}\n")),(0,i.kt)("p",null,"注意这时返回的 Virtual DOM 中的 nodeName 也变为了函数。根据这些线索, 我们对之前的 ",(0,i.kt)("inlineCode",{parentName:"p"},"render")," 函数进行改造。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function render(vdom, container) {\n  if (_.isFunction(vdom.nodeName)) { // 如果 JSX 中是自定义组件\n    let component, returnVdom\n    if (vdom.nodeName.prototype.render) {\n      component = new vdom.nodeName()\n      returnVdom = component.render()\n    } else {\n      returnVdom = vdom.nodeName() // 针对无状态组件: const A = () => <div>I'm componentsA</div>\n    }\n    render(returnVdom, container)\n    return\n  }\n}\n")),(0,i.kt)("p",null,"至此, 我们完成了对组件的处理逻辑。"),(0,i.kt)("h3",null,"props 和 state 的实现"),(0,i.kt)("p",null,"在上个小节组件 A 中, 是没有引入任何属性和状态的, 我们希望组件间能进行属性的传递(props)以及组件内能进行状态的记录(state)。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"import React, { Component } from 'react'\n\nclass A extends Component {\n  render() {\n    return <div>I'm {this.props.name}</div>\n  }\n}\n\nReactDOM.render(<A name=\"componentA\" />, document.body)\n")),(0,i.kt)("p",null,"在上面这段代码中, 看到 A 函数继承自 Component。我们来构造这个父类 Component, 并在其添加 state、props、setState 等属性方法, 从而让子类继承到它们。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Component(props) {\n  this.props = props\n  this.state = this.state || {}\n}\n")),(0,i.kt)("p",null,"首先, 我们将组件外的 props 传进组件内, 修改 render 函数中以下代码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function render(vdom, container) {\n  if (_.isFunction(vdom.nodeName)) {\n    let component, returnVdom\n    if (vdom.nodeName.prototype.render) {\n      component = new vdom.nodeName(vdom.attributes) // 将组件外的 props 传进组件内\n      returnVdom = component.render()\n    } else {\n      returnVdom = vdom.nodeName(vdom.attributes)   // 处理无状态组件: const A = (props) => <div>I'm {props.name}</div>\n    }\n    ...\n  }\n  ...\n}\n")),(0,i.kt)("p",null,"实现完组件间 props 的传递后, 再来聊聊 state, 在 react 中是通过 setState 来完成组件状态的改变的, 在后面的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/5.setState.md"}),"setState 优化")," 中会实现 setState 的异步逻辑, 此处简单实现如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Component(props) {\n  this.props = props\n  this.state = this.state || {}\n}\n\nComponent.prototype.setState = function() {\n  this.state = Object.assign({}, this.state, updateObj) // 这里简单实现, 后续篇章会深入探究\n  const returnVdom = this.render() // 重新渲染\n  document.getElementById('root').innerHTML = null\n  render(returnVdom, document.getElementById('root'))\n}\n")),(0,i.kt)("p",null,"此时虽然已经实现了 setState 的功能, 但是 ",(0,i.kt)("inlineCode",{parentName:"p"},"document.getElementById('root')")," 节点写死在 setState 中显然不是我们希望的, 我们将 dom 节点相关转移到 _render 函数中:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"Component.prototype.setState = function(updateObj) {\n  this.state = Object.assign({}, this.state, updateObj)\n  _render(this) // 重新渲染\n}\n")),(0,i.kt)("p",null,"自然地, 重构与之相关的 render 函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function render(vdom, container) {\n  let component\n  if (_.isFunction(vdom.nodeName)) {\n    if (vdom.nodeName.prototype.render) {\n      component = new vdom.nodeName(vdom.attributes)\n    } else {\n      component = vdom.nodeName(vdom.attributes) // 处理无状态组件: const A = (props) => <div>I'm {props.name}</div>\n    }\n  }\n  component ? _render(component, container) : _render(vdom, container)\n}\n")),(0,i.kt)("p",null,"在 render 函数中分离出 _render 函数的目的是为了让 setState 函数中也能调用 _render 逻辑。完整 _render 函数如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function _render(component, container) {\n  const vdom = component.render ? component.render() : component\n  if (_.isString(vdom) || _.isNumber(vdom)) {\n    container.innerText = container.innerText + vdom\n    return\n  }\n  const dom = document.createElement(vdom.nodeName)\n  for (let attr in vdom.attributes) {\n    setAttribute(dom, attr, vdom.attributes[attr])\n  }\n  vdom.children.forEach(vdomChild => render(vdomChild, dom))\n  if (component.container) {  // 注意: 调用 setState 方法时是进入这段逻辑, 从而实现我们将 dom 的逻辑与 setState 函数分离的目标；知识点: new 出来的同一个实例\n    component.container.innerHTML = null\n    component.container.appendChild(dom)\n    return\n  }\n  component.container = container\n  container.appendChild(dom)\n}\n")),(0,i.kt)("p",null,"让我们用下面这个用例跑下写好的 react 吧！"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class A extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      count: 1\n    }\n  }\n\n  click() {\n    this.setState({\n      count: ++this.state.count\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <button onClick={this.click.bind(this)}>Click Me!</button>\n        <div>{this.props.name}:{this.state.count}</div>\n      </div>\n    )\n  }\n}\n\nReactDOM.render(\n  <A name=\"count\" />,\n  document.getElementById('root')\n)\n")),(0,i.kt)("p",null,"效果图如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/reactsetstate.gif",alt:null}))),(0,i.kt)("p",null,"至此, 我们实现了 props 和 state 部分的逻辑。"),(0,i.kt)("h3",null,"forceUpdate 的实现"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"声明: 这部分为补充章节, 可以选择性阅读。涉及到后文",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/3.%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.md"}),"生命周期"),"、",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/5.setState.md"}),"setState")," 章节的知识点。")),(0,i.kt)("p",null,"当没有使用 setState 更新 state 状态时, 通常要结合 forceUpdate 一起使用, 例子如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class B extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      count: {\n        value: 1\n      }\n    }\n  }\n\n  shouldComponentUpdate() { // 当使用 forceUpdate() 时, shouldComponentUpdate() 会失效\n    return false\n  }\n\n  click() {\n    this.state.count.value = ++this.state.count.value // 没有使用 setState 更新 state 状态时, 通常要结合 forceUpdate 一起使用\n    this.forceUpdate()\n  }\n\n  render() {\n    return (\n      <div>\n        <button onClick={this.click.bind(this)}>Click Me!</button>\n        <div>{this.state.count.value}</div>\n      </div>\n    )\n  }\n}\n")),(0,i.kt)("p",null,"这里要注意一个点",(0,i.kt)("inlineCode",{parentName:"p"},"当使用 forceUpdate() 时, shouldComponentUpdate() 会失效"),", 下面我们来补充 forceUpdate() 的代码逻辑:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// force to update\nComponent.prototype.forceUpdate = function(cb) {\n  this.allowShouldComponentUpdate = false // 不允许 allowShouldComponentUpdate 执行\n  asyncRender({}, this, cb)\n}\n")),(0,i.kt)("p",null,"相应的在 render.js 中加上 allowShouldComponentUpdate 的判断条件:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function renderComponent(component) {\n  if (component.base && component.shouldComponentUpdate && component.allowShouldComponentUpdate !== false) { // 加上 allowShouldComponentUpdate 的判断条件\n    const bool = component.shouldComponentUpdate(component.props, component.state)\n    if (!bool && bool !== undefined) {\n      return false // shouldComponentUpdate() 返回 false, 则生命周期终止\n    }\n  }\n  ...\n}\n")),(0,i.kt)("h3",null,"小结"),(0,i.kt)("p",null,"组件即函数；当 JSX 中是自定义组件时, 经过 babel 转化后的 React.createElement(fn, ..) 后中的第一个参数变为了函数, 除此之外其它逻辑与 JSX 中为 html 元素的时候相同；"),(0,i.kt)("p",null,"此外我们将 state/props/setState 等 api 封装进了父类 React.Component 中, 从而在子类中能调用这些属性和方法。"),(0,i.kt)("p",null,"在下篇, 我们会继续实现生命周期机制, 如有疏漏, 欢迎斧正。"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/cpreact"}),"项目地址")))}c.isMDXComponent=!0},82285:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"生命周期"),(0,i.kt)("p",null,"先来回顾 React 的生命周期, 用流程图表示如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/77e8b5ceaa1d697f280053be91a87bb3.jpg",alt:null}))),(0,i.kt)("p",null,"该流程图比较清晰地呈现了 react 的生命周期。其分为 3 个阶段 —— 生成期, 存在期, 销毁期。"),(0,i.kt)("p",null,"因为生命周期钩子函数存在于自定义组件中, 将之前 _render 函数作些调整如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 原来的 _render 函数, 为了将职责拆分得更细, 将 virtual dom 转为 real dom 的函数单独抽离出来\nfunction vdomToDom(vdom) {\n  if (_.isFunction(vdom.nodeName)) {        // 为了更加方便地书写生命周期逻辑, 将解析自定义组件逻辑和一般 html 标签的逻辑分离开\n    const component = createComponent(vdom) // 构造组件\n    setProps(component)                     // 更改组件 props\n    renderComponent(component)              // 渲染组件, 将 dom 节点赋值到 component\n    return component.base                   // 返回真实 dom\n  }\n  ...\n}\n")),(0,i.kt)("p",null,"我们可以在 setProps 函数内（渲染前）加入 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentWillMount"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"componentWillReceiveProps")," 方法, setProps 函数如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function setProps(component) {\n  if (component && component.componentWillMount) {\n    component.componentWillMount()\n  } else if (component.base && component.componentWillReceiveProps) {\n    component.componentWillReceiveProps(component.props) // 后面待实现\n  }\n}\n")),(0,i.kt)("p",null,"而后我们在 renderComponent 函数内加入 ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidMount"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"shouldComponentUpdate"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"componentWillUpdate"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidUpdate")," 方法"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function renderComponent(component) {\n  if (component.base && component.shouldComponentUpdate) {\n    const bool = component.shouldComponentUpdate(component.props, component.state)\n    if (!bool && bool !== undefined) {\n      return false // shouldComponentUpdate() 返回 false, 则生命周期终止\n    }\n  }\n  if (component.base && component.componentWillUpdate) {\n    component.componentWillUpdate()\n  }\n\n  const rendered = component.render()\n  const base = vdomToDom(rendered)\n\n  if (component.base && component.componentDidUpdate) {\n    component.componentDidUpdate()\n  } else if (component && component.componentDidMount) {\n    component.componentDidMount()\n  }\n\n  if (component.base && component.base.parentNode) { // setState 进入此逻辑\n    component.base.parentNode.replaceChild(base, component.base)\n  }\n\n  component.base = base  // 标志符\n}\n")),(0,i.kt)("h3",null,"测试生命周期"),(0,i.kt)("p",null,"测试如下用例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"class A extends Component {\n  componentWillReceiveProps(props) {\n    console.log('componentWillReceiveProps')\n  }\n\n  render() {\n    return (\n      <div>{this.props.count}</div>\n    )\n  }\n}\n\nclass B extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      count: 1\n    }\n  }\n\n  componentWillMount() {\n    console.log('componentWillMount')\n  }\n\n  componentDidMount() {\n    console.log('componentDidMount')\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    console.log('shouldComponentUpdate', nextProps, nextState)\n    return true\n  }\n\n  componentWillUpdate() {\n    console.log('componentWillUpdate')\n  }\n\n  componentDidUpdate() {\n    console.log('componentDidUpdate')\n  }\n\n  click() {\n    this.setState({\n      count: ++this.state.count\n    })\n  }\n\n  render() {\n    console.log('render')\n    return (\n      <div>\n        <button onClick={this.click.bind(this)}>Click Me!</button>\n        <A count={this.state.count} />\n      </div>\n    )\n  }\n}\n\nReactDOM.render(\n  <B />,\n  document.getElementById('root')\n)\n")),(0,i.kt)("p",null,"页面加载时输出结果如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"componentWillMount\nrender\ncomponentDidMount\n")),(0,i.kt)("p",null,"点击按钮时输出结果如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"shouldComponentUpdate\ncomponentWillUpdate\nrender\ncomponentDidUpdate\n")),(0,i.kt)("h3",null,"React 16.3 生命周期调研"),(0,i.kt)("p",null,"在这个版本中, 新加入了两个生命周期:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"getDerivedStateFromProps(nextProps, prevState): 更加语义化, 可以代替 componentWillMount、componentWillReceiveProps(nextProps);\n\ngetSnapshotBeforeUpdate(prevProps, prevState): 可以将结果传入 componentDidUpdate 里, 从而达到 dom 数据统一, 可以替代 componentWillUpdate()（缺点就是前面讲的 react 开启异步渲染, componentWillUpdate() 与 componentDidUpdate() 间获取的 dom 会不统一）。\n")),(0,i.kt)("p",null,"后文考虑实现上述 api。"),(0,i.kt)("p",null,"React 16.3 生命周期相关文献"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/36062486"}),"React v16.3 版本新生命周期函数浅析及升级方案")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://react.docschina.org/docs/react-component.html"}),"中文官方文档"))))}c.isMDXComponent=!0},19941:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"diff 的实现"),(0,i.kt)("p",null,"在 react 中, diff 实现的思路是将新老 virtual dom 进行比较, 将比较后的 patch（补丁）渲染到页面上, 从而实现局部刷新；本文借鉴了 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/developit/preact"}),"preact")," 和 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/hujiulong/simple-react"}),"simple-react")," 中的 diff 实现, 总体思路是将旧的 dom 节点和新的 virtual dom 节点进行了比较, 根据不同的比较类型（文本节点、非文本节点、自定义组件）调用相应的逻辑, 从而实现页面的局部渲染。代码总体结构如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * 比较旧的 dom 节点和新的 virtual dom 节点:\n * @param {*} oldDom  旧的 dom 节点\n * @param {*} newVdom 新的 virtual dom 节点\n */\nfunction diff(oldDom, newVdom) {\n  ...\n  if (_.isString(newVdom)) {\n    return diffTextDom(oldDom, newVdom)   // 对比文本 dom 节点\n  }\n\n  if (oldDom.nodeName.toLowerCase() !== newVdom.nodeName) {\n    diffNotTextDom(oldDom, newVdom)       // 对比非文本 dom 节点\n  }\n\n  if (_.isFunction(newVdom.nodeName)) {\n    return diffComponent(oldDom, newVdom) // 对比自定义组件\n  }\n\n  diffAttribute(oldDom, newVdom)          // 对比属性\n\n  if (newVdom.children.length > 0) {\n    diffChild(oldDom, newVdom)            // 遍历对比子节点\n  }\n\n  return oldDom\n}\n")),(0,i.kt)("p",null,"下面列出不同比较类型对应的逻辑实现。"),(0,i.kt)("h4",null,"对比文本节点"),(0,i.kt)("p",null,"首先进行较为简单的文本节点的比较, 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 对比文本节点\nfunction diffTextDom(oldDom, newVdom) {\n  let dom = oldDom\n  if (oldDom && oldDom.nodeType === 3) {  // 如果老节点是文本节点\n    if (oldDom.textContent !== newVdom) { // 这里一个细节: textContent/innerHTML/innerText 的区别\n      oldDom.textContent = newVdom\n    }\n  } else {                                // 如果旧 dom 元素不为文本节点\n    dom = document.createTextNode(newVdom)\n    if (oldDom && oldDom.parentNode) {\n      oldDom.parentNode.replaceChild(dom, oldDom)\n    }\n  }\n  return dom\n}\n")),(0,i.kt)("h4",null,"对比非文本节点"),(0,i.kt)("p",null,"对比非文本节点, 其思路为将同层级的旧节点替换为新节点, 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 对比非文本节点\nfunction diffNotTextDom(oldDom, newVdom) {\n  const newDom = document.createElement(newVdom.nodeName);\n  [...oldDom.childNodes].map(newDom.appendChild) // 将旧节点下的元素添加到新节点下\n  if (oldDom && oldDom.parentNode) {\n    oldDom.parentNode.replaceChild(oldDom, newDom)\n  }\n}\n")),(0,i.kt)("h4",null,"对比自定义组件"),(0,i.kt)("p",null,"对比自定义组件的思路为: 如果新老组件不同, 则直接将新组件替换老组件；如果新老组件相同, 则将新组件的 props 赋到老组件上, 然后再对获得新 props 前后的老组件做 diff 比较。代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 对比自定义组件\nfunction diffComponent(oldDom, newVdom) {\n  if (oldDom._component && (oldDom._component.constructor !== newVdom.nodeName)) { // 如果新老组件不同, 则直接将新组件替换老组件\n    const newDom = vdomToDom(newVdom)\n    oldDom._component.parentNode.insertBefore(newDom, oldDom._component)\n    oldDom._component.parentNode.removeChild(oldDom._component)\n  } else {\n    setProps(oldDom._component, newVdom.attributes) // 如果新老组件相同, 则将新组件的 props 赋到老组件上\n    renderComponent(oldDom._component)              // 对获得新 props 前后的老组件做 diff 比较（renderComponent 中调用了 diff）\n  }\n}\n")),(0,i.kt)("h4",null,"遍历对比子节点"),(0,i.kt)("p",null,"遍历对比子节点的策略如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"比较新旧 dom 元素相同层级相同位置的节点类型, 若节点类型不相等, 则直接将新节点替换掉旧节点；"),(0,i.kt)("li",{parentName:"ol"},"给节点加上 key 属性；")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在 cpreact 的代码实现中, 1 的目的降低了空间复杂度(避免了更深层次的遍历)；2 的目的目前看来是少了一次新老类型的判断消耗。")),(0,i.kt)("p",null,"代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 对比子节点\nfunction diffChild(oldDom, newVdom) {\n  const keyed = {}\n  const children = []\n  const oldChildNodes = oldDom.childNodes\n  for (let i = 0; i < oldChildNodes.length; i++) {\n    if (oldChildNodes[i].key) {\n      keyed[oldChildNodes[i].key] = oldChildNodes[i]\n    } else { // 如果不存在 key, 则优先找到节点类型相同的元素\n      children.push(oldChildNodes[i])\n    }\n  }\n\n  let newChildNodes = newVdom.children\n  if (isArray(newVdom.children[0])) { // https://github.com/MuYunyun/cpreact/issues/9\n    newChildNodes = newVdom.children[0]\n  }\n\n  for (let i = 0; i < newChildNodes.length; i++) {\n    let child = null\n    if (keyed[newChildNodes[i].key]) {\n      child = keyed[newChildNodes[i].key]\n      keyed[newChildNodes[i].key] = undefined\n    } else { // 对应上面不存在 key 的情形\n      // 在新老节点相同位置上寻找相同类型的节点进行比较；如果不满足上述条件则直接将新节点插入；\n      if (children[i] && isSameNodeType(children[i], newChildNodes[i])) {\n        child = children[i]\n        children[i] = undefined\n      } else if (children[i] && !isSameNodeType(children[i], newChildNodes[i])) { // 不是相同类型, 直接替代掉\n        children[i].replaceWith(newChildNodes[i])\n        continue\n      }\n    }\n\n    const result = diff(child, newChildNodes[i])\n    // 如果 child 为 null\n    if (result === newChildNodes[i]) {\n      oldDom.appendChild(vdomToDom(result))\n    }\n  }\n}\n")),(0,i.kt)("h4",null,"测试"),(0,i.kt)("p",null,"在生命周期的小节中, componentWillReceiveProps 方法还未跑通, 稍加修改 setProps 函数即可:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"/**\n * 更改属性, componentWillMount 和 componentWillReceiveProps 方法\n */\nfunction setProps(component, attributes) {\n  if (attributes) {\n    component.props = attributes // 这段逻辑对应上文自定义组件比较中新老组件相同时 setProps 的逻辑\n  }\n\n  if (component && component.base && component.componentWillReceiveProps) {\n    component.componentWillReceiveProps(component.props)\n  } else if (component && component.componentWillMount) {\n    component.componentWillMount()\n  }\n}\n")),(0,i.kt)("p",null,"来测试下生命周期小节中最后的测试用例:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"生命周期测试")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B5%8B%E8%AF%951.gif",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"diff 测试")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9Fdiff%E6%B5%8B%E8%AF%951.gif",alt:null}))))}c.isMDXComponent=!0},40449:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"同步 setState 的问题"),(0,i.kt)("p",null,"而在现有 setState 逻辑实现中, 每调用一次 setState 就会执行 render 一次。因此在如下代码中, 每次点击增加按钮, 因为 click 方法里调用了 10 次 setState 函数, 页面也会被渲染 10 次。而我们希望的是每点击一次增加按钮只执行 render 函数一次。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"export default class B extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      count: 0\n    }\n    this.click = this.click.bind(this)\n  }\n\n  click() {\n    for (let i = 0; i < 10; i++) {\n      this.setState({ // 在先前的逻辑中, 没调用一次 setState 就会 render 一次\n        count: ++this.state.count\n      })\n    }\n  }\n\n  render() {\n    console.log(this.state.count)\n    return (\n      <div>\n        <button onClick={this.click}>增加</button>\n        <div>{this.state.count}</div>\n      </div>\n    )\n  }\n}\n")),(0,i.kt)("h3",null,"异步调用 setState"),(0,i.kt)("p",null,"查阅 setState 的 api, 其形式如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"setState(updater, [callback])\n")),(0,i.kt)("p",null,"它能接收两个参数, 其中第一个参数 updater 可以为对象或者为函数 (",(0,i.kt)("inlineCode",{parentName:"p"},"(prevState, props) => stateChange"),"), 第二个参数为回调函数；"),(0,i.kt)("p",null,"确定优化思路为: 将多次 setState 后跟着的值进行浅合并, 并借助事件循环等所有值合并好之后再进行渲染界面。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let componentArr = []\n\n// 异步渲染\nfunction asyncRender(updater, component, cb) {\n  if (componentArr.length === 0) {\n    defer(() => render())       // 利用事件循环, 延迟渲染函数的调用\n  }\n\n  if (cb) defer(cb)             // 调用回调函数\n  if (_.isFunction(updater)) {  // 处理 setState 后跟函数的情况\n    updater = updater(component.state, component.props)\n  }\n  // 浅合并逻辑\n  component.state = Object.assign({}, component.state, updater)\n  if (componentArr.includes(component)) {\n    component.state = Object.assign({}, component.state, updater)\n  } else {\n    componentArr.push(component)\n  }\n}\n\nfunction render() {\n  let component\n  while (component = componentArr.shift()) {\n    renderComponent(component) // rerender\n  }\n}\n\n// 事件循环, 关于 promise 的事件循环和 setTimeout 的事件循环后续会单独写篇文章。\nconst defer = function(fn) {\n  return Promise.resolve().then(() => fn())\n}\n")),(0,i.kt)("p",null,"此时, 每点击一次增加按钮 render 函数只执行一次了。"))}c.isMDXComponent=!0},95045:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"ref"),(0,i.kt)("p",null,"在 react 中并不建议使用 ref 属性, 而应该尽量使用",(0,i.kt)("a",u({parentName:"p"},{href:"https://doc.react-china.org/docs/lifting-state-up.html"}),"状态提升"),", 但是 react 还是提供了 ref 属性赋予了开发者操作 dom 的能力, react 的 ref 有 ",(0,i.kt)("inlineCode",{parentName:"p"},"string"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"callback"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"createRef")," 三种形式, 分别如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'// string 这种写法未来会被抛弃\nclass MyComponent extends Component {\n  componentDidMount() {\n    this.refs.myRef.focus()\n  }\n  render() {\n    return <input ref="myRef" />\n  }\n}\n\n// callback(比较通用)\nclass MyComponent extends Component {\n  componentDidMount() {\n    this.myRef.focus()\n  }\n  render() {\n    return <input ref={(ele) => {\n      this.myRef = ele\n    }} />\n  }\n}\n\n// react 16.3 增加, 其它 react-like 框架还没有同步\nclass MyComponent extends Component {\n  constructor(props) {\n    super(props)\n    this.myRef = React.createRef()\n  }\n  componentDidMount() {\n    this.myRef.current.focus()\n  }\n  render() {\n    return <input ref={this.myRef} />\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://zhuanlan.zhihu.com/p/40462264"}),"React ref 的前世今生")," 罗列了三种写法的差异, 下面对上述例子中的第二种写法(比较通用)进行实现。"),(0,i.kt)("p",null,"首先在 setAttribute 方法内补充上对 ref 的属性进行特殊处理,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function setAttribute(dom, attr, value) {\n  ...\n  else if (attr === 'ref') {          // 处理 ref 属性\n    if (_.isFunction(value)) {\n      value(dom)\n    }\n  }\n  ...\n}\n")),(0,i.kt)("p",null,"针对这个例子中 ",(0,i.kt)("inlineCode",{parentName:"p"},"this.myRef.focus()")," 的 focus 属性需要异步处理, 因为调用 componentDidMount 的时候, 界面上还未添加 dom 元素。处理 renderComponent 函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function renderComponent(component) {\n  ...\n  else if (component && component.componentDidMount) {\n    defer(component.componentDidMount.bind(component))\n  }\n  ...\n}\n")),(0,i.kt)("p",null,"刷新页面, 可以发现 input 框已为选中状态。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/d35589fbbff45a2437c6c13e24ba8058.jpg-200",alt:null}))),(0,i.kt)("p",null,"处理完普通元素的 ref 后, 再来处理下自定义组件的 ref 的情况。之前默认自定义组件上是没属性的, 现在只要针对自定义组件的 ref 属性做相应处理即可。稍微修改 vdomToDom 函数如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function vdomToDom(vdom) {\n  if (_.isFunction(vdom.nodeName)) { // 此时是自定义组件\n    ...\n    for (const attr in vdom.attributes) { // 处理自定义组件的 ref 属性\n      if (attr === 'ref' && _.isFunction(vdom.attributes[attr])) {\n        vdom.attributes[attr](component)\n      }\n    }\n    ...\n  }\n  ...\n}\n")),(0,i.kt)("p",null,"跑如下测试用例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class A extends Component {\n  constructor() {\n    super()\n    this.state = {\n      count: 0\n    }\n    this.click = this.click.bind(this)\n  }\n\n  click() {\n    this.setState({\n      count: ++this.state.count\n    })\n  }\n\n  render() {\n    return <div>{this.state.count}</div>\n  }\n}\n\nclass B extends Component {\n  constructor() {\n    super()\n    this.click = this.click.bind(this)\n  }\n\n  click() {\n    this.A.click()\n  }\n\n  render() {\n    return (\n      <div>\n        <button onClick={this.click}>加1</button>\n        <A ref={(e) => { this.A = e }} />\n      </div>\n    )\n  }\n}\n")),(0,i.kt)("p",null,"效果如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/reactref%E6%B5%8B%E8%AF%951",alt:null}))),(0,i.kt)("h3",null,"React.forwardRef 使用场景"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"React.forwardRef")," 后面跟一个 ",(0,i.kt)("inlineCode",{parentName:"p"},"render")," 函数。用法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function HOCComponent(WrapComponent) {\n  return class extends React.Component {\n    render() {\n      const { ref, ...rest } = this.props\n      return <WrapComponent ref={ref} { ...rest } />\n    }\n  }\n}\n\n// 此时的 ref 指向的是, 高阶组件里包裹的 WrapComponent 组件。\nconst Demo = React.forwardRef((props, ref) => {\n  return <HOCComponent { ...props } ref={ref} />\n})\n")),(0,i.kt)("p",null,"使用场景: 需要引用高阶组件里的子组件节点的时候可以使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"React.forwordRef")))}c.isMDXComponent=!0},90225:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"PureComponent 精髓"),(0,i.kt)("p",null,"使用 PureComponent 是优化 React 性能的一种常用手段, 相较于 Component, PureComponent 会在 render 之前自动执行一次 shouldComponentUpdate() 函数, 根据返回的 bool 值判断是否进行 render。其中有个重点是 PureComponent 在 shouldComponentUpdate() 的时候会进行 shallowEqual(浅比较)。"),(0,i.kt)("p",null,"PureComponent 的浅比较策略如下:"),(0,i.kt)("p",null,"对 prevState/nextState 以及 prevProps/nextProps 这两组数据进行浅比较:"),(0,i.kt)("p",null,"1.对象第一层数据未发生改变, render 方法不会触发；\n2.对象第一层数据发生改变(包括第一层数据引用的改变), render 方法会触发;"),(0,i.kt)("h4",null,"PureComponent 的实现"),(0,i.kt)("p",null,"照着上述思路我们来实现 PureComponent 的逻辑"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function PureComponent(props) {\n  this.props = props || {}\n  this.state = {}\n\n  isShouldComponentUpdate.call(this) // 为每个 PureComponent 绑定 shouldComponentUpdate 方法\n}\n\nPureComponent.prototype.setState = function(updater, cb) {\n  isShouldComponentUpdate.call(this) // 调用 setState 时, 让 this 指向子类的实例, 目的取到子类的 this.state\n  asyncRender(updater, this, cb)\n}\n\nfunction isShouldComponentUpdate() {\n  const cpState = this.state\n  const cpProps = this.props\n  this.shouldComponentUpdate = function (nextProps, nextState) {\n    if (!shallowEqual(cpState, nextState) || !shallowEqual(cpProps, nextProps)) {\n      return true  // 只要 state 或 props 浅比较不等的话, 就进行渲染\n    } else {\n      return false // 浅比较相等的话, 不渲染\n    }\n  }\n}\n\n// 浅比较逻辑\nconst shallowEqual = function(oldState, nextState) {\n  const oldKeys = Object.keys(oldState)\n  const newKeys = Object.keys(nextState)\n\n  if (oldKeys.length !== newKeys.length) {\n    return false\n  }\n\n  let flag = true\n  for (let i = 0; i < oldKeys.length; i++) {\n    if (!nextState.hasOwnProperty(oldKeys[i])) {\n      flag = false\n      break\n    }\n\n    if (nextState[oldKeys[i]] !== oldState[oldKeys[i]]) {\n      flag = false\n      break\n    }\n  }\n\n  return flag\n}\n")),(0,i.kt)("h4",null,"测试用例"),(0,i.kt)("p",null,"测试用例用 在 React 上提的一个 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/react/issues/13438#issuecomment-414128918"}),"issue")," 中的案例, 我们期望点击增加按钮后, 页面上显示的值能够加 1。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class B extends PureComponent {\n  constructor(props) {\n    super(props)\n    this.state = {\n      count: 0\n    }\n    this.click = this.click.bind(this)\n  }\n\n  click() {\n    this.setState({\n      count: ++this.state.count,\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <button onClick={this.click}>增加</button>\n        <div>{this.state.count}</div>\n      </div>\n    )\n  }\n}\n")),(0,i.kt)("p",null,"然而, 我们点击上述代码, 页面上显示的 0 分毫不动！！！"),(0,i.kt)("p",null,"揭秘如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"click() {\n  const t = ++this.state.count\n  console.log(t === this.state.count) // true\n  this.setState({\n    count: t,\n  })\n}\n")),(0,i.kt)("p",null,"当点击增加按钮, 控制台显示 ",(0,i.kt)("inlineCode",{parentName:"p"},"t === this.state.count")," 为 true, 也就说明了 setState 前后的状态是统一的, 所以 shallowEqual(浅比较) 返回的是 true, 致使 shouldComponentUpdate 返回了 false, 页面因此没有渲染。"),(0,i.kt)("p",null,"类似的, 如下写法也是达不到目标的, 留给读者思考了。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"click() {\n  this.setState({\n    count: this.state.count++,\n  })\n}\n")),(0,i.kt)("p",null,"那么如何达到我们期望的目标呢。揭秘如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"click() {\n  this.setState({\n    count: this.state.count + 1\n  })\n}\n")),(0,i.kt)("p",null,"感悟: 小小的一行代码里蕴藏着无数的 bug。"),(0,i.kt)("h4",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/issues/13438"}),"A doubt behaviour using the PureComponent")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.im/post/59cdaaccf265da066f6ac83b"}),"React 的性能优化（一）当 PureComponent 遇上 ImmutableJS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.im/post/5b1caceb5188257d63226743"}),"React 性能优化方案之 PureComponent"))))}c.isMDXComponent=!0},72864:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"HOC 实践"),(0,i.kt)("p",null,"高阶组件(Higher Order Component) 不属于 React API 范畴, 但是它在 React 中也是一种实用的技术, ",(0,i.kt)("inlineCode",{parentName:"p"},"它可以将常见任务抽象成一个可重用的部分"),"。这个小节算是番外篇, 会结合 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/cpreact"}),"cpreact"),"(前文实现的类 react 轮子) 与 HOC 进行相关的实践。"),(0,i.kt)("p",null,"它可以用如下公式表示:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"y = f(x),\n\n// x: 原有组件\n// y: 高阶组件\n// f():\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"f()")," 的实现有两种方法, 下面进行实践。"),(0,i.kt)("h4",null,"属性代理(Props Proxy)"),(0,i.kt)("p",null,"属性代理是装饰器模式的一种运用, 通过装饰器函数给原来函数赋能。下面例子在装饰器函数中给被装饰的组件传递了额外的属性 ",(0,i.kt)("inlineCode",{parentName:"p"},"{ a: 1, b: 2 }"),"。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"声明: 下文所展示的 demo 均已在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/cpreact"}),"cpreact")," 测试通过")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function ppHOC(WrappedComponent) {\n  return class extends Component {\n    render() {\n      const obj = { a: 1, b: 2 }\n      return (\n        <WrappedComponent { ...this.props } { ...obj } />\n      )\n    }\n  }\n}\n\n@ppHOC\nclass B extends Component {\n  render() {\n    return (\n      <div>\n        { this.props.a + this.props.b } { /* 输出 3 */ }\n      </div>\n    )\n  }\n}\n")),(0,i.kt)("p",null,"要是将 { a: 1, b: 2 } 替换成全局共享对象, 那么不就是 react-redux 中的 Connect 了么?"),(0,i.kt)("p",null,"改进上述 demo, 我们就可以实现可插拔的",(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/forms.html#controlled-components"}),"受控组件"),", 代码示意如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function ppDecorate(WrappedComponent) {\n  return class extends Component {\n    constructor() {\n      super()\n      this.state = {\n        value: ''\n      }\n      this.onChange = this.onChange.bind(this)\n    }\n\n    onChange(e) {\n      this.setState({\n        value: e.target.value\n      })\n    }\n\n    render() {\n      const obj = {\n        onChange: this.onChange,\n        value: this.state.value,\n      }\n\n      return (\n        <WrappedComponent { ...this.props } { ...obj } />\n      )\n    }\n  }\n}\n\n@ppDecorate\nclass B extends Component {\n  render() {\n    return (\n      <div>\n        <input { ...this.props } />\n        <div>{ this.props.value }</div>\n      </div>\n    )\n  }\n}\n")),(0,i.kt)("p",null,"效果如下图:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/hoc%E6%8E%A2%E7%B4%A2%E4%B9%8B%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6.gif",alt:null}))),(0,i.kt)("p",null,"这里有个坑点, 当我们在输入框输入字符的时候, 并不会立马触发 onChange 事件(我们想要让事件立即触发, 然而现在要按下回车键或者点下鼠标才触发), 在 react 中有个",(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/events.html"}),"合成事件")," 的知识点, 下篇文章 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/9.onChange%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%82%A3%E7%82%B9%E4%BA%8B.md"}),"onChange 事件")," 对 react 中的 onChange 事件为何和原生 DOM 事件中的 onchange 表现不一致进行揭秘。"),(0,i.kt)("p",null,"顺带一提在这个 demo 中似乎看到了双向绑定的效果, 但是实际中 React 并没有双向绑定的概念, 但是我们可以运用 HOC 的知识点结合 setState 在 React 表单中实现伪双向绑定的效果。"),(0,i.kt)("h4",null,"继承反转(Inheritance Inversion)"),(0,i.kt)("p",null,"继承反转的核心是: 传入 HOC 的组件会作为返回类的父类来使用。然后在 render 中调用 ",(0,i.kt)("inlineCode",{parentName:"p"},"super.render()")," 来调用父类的 render 方法。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/readES6/%E7%BB%A7%E6%89%BF.md#%E4%BD%9C%E4%B8%BA%E5%AF%B9%E8%B1%A1%E8%B0%83%E7%94%A8%E7%9A%84-super"}),"ES6 继承与 ES5 继承的差异"),"中提到了作为对象使用的 super 指向父类的实例。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function iiHOC(WrappedComponent) {\n  return class extends WrappedComponent {\n    render() {\n      const parentRender = super.render()\n      if (parentRender.nodeName === 'span') {\n        return (\n          <span>继承反转</span>\n        )\n      }\n    }\n  }\n}\n\n@iiHOC\nclass B extends Component {\n  render() {\n    return (\n      <span>Inheritance Inversion</span>\n    )\n  }\n}\n")),(0,i.kt)("p",null,"在这个 demo 中, 在 HOC 内实现了渲染劫持, 页面上最终显示如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/e7dbedcefd9a61dcd12fbcff89dc19ef.jpg-200",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"可能会有疑惑, 使用",(0,i.kt)("inlineCode",{parentName:"p"},"属性代理"),"的方式貌似也能实现渲染劫持呀, 但是那样做没有",(0,i.kt)("inlineCode",{parentName:"p"},"继承反转"),"这种方式纯粹。")),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.im/post/59818a485188255694568ff2"}),"带着三个问题深入浅出 React 高阶组件")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/24776678?refer=FrontendMagazine"}),"深入理解 React 高阶组件"))))}c.isMDXComponent=!0},24461:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"从一个疑问点开始"),(0,i.kt)("p",null,"接上一章 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/%E4%BB%8E0%E5%88%B01%E5%AE%9E%E7%8E%B0React/8.HOC%E6%8E%A2%E7%B4%A2.md#%E5%B1%9E%E6%80%A7%E4%BB%A3%E7%90%86props-proxy"}),"HOC 探索")," 抛出的问题 ———— react 中的 onChange 事件和原生 DOM 事件中的 onchange 表现不一致, 举例说明如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// React 中的 onChange 事件\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.onChange = this.onChange.bind(this)\n  }\n\n  onChange(e) {\n    console.log('键盘松开立刻执行')\n  }\n\n  render() {\n    return (\n      <input onChange={this.onChange} />\n    )\n  }\n}\n\n/*--------------分割线---------------*/\n\n// 原生 DOM 事件中的 onchange 事件: <input id='test'>\ndocument.getElementById('test').addEventListener('change', (e) => {\n  console.log('键盘松开以后还需按下回车键或者点下鼠标才会触发')\n})\n")),(0,i.kt)("h3",null,"拨云见雾"),(0,i.kt)("p",null,"我们来看下 React 的一个 issue ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/react/issues/13525"}),"React Fire: Modernizing React DOM"),"。有两点信息和这篇文章的话题相关。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Drastically simplify the event system"),(0,i.kt)("li",{parentName:"ul"},"Migrate from onChange to onInput and don’t polyfill it for uncontrolled components")),(0,i.kt)("p",null,"从这两点内容我们可以得知下面的信息:"),(0,i.kt)("p",null,"React 实现了一套",(0,i.kt)("a",u({parentName:"p"},{href:"https://reactjs.org/docs/events.html#event-pooling"}),"合成事件机制"),", 也就是它的事件机制和原生事件间会有不同。比如它目前 onChange 事件其实对应着原生事件中的 input 事件。在这个 issue 中明确了未来会使用 onInput 事件替代 onChange 事件, 并且会大幅度地简化合成事件。"),(0,i.kt)("p",null,"有了以上信息后, 我们对 onChange 事件(将来的 onInput 事件)的代码作如下更改:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function setAttribute(dom, attr, value) {\n  ...\n  if (attr.match(/on\\w+/)) {        // 处理事件的属性:\n    let eventName = attr.toLowerCase().substr(2)\n    if (eventName === 'change') { eventName = 'input' } // 和现阶段的 react 统一\n    dom.addEventListener(eventName, value)\n  }\n  ...\n}\n")),(0,i.kt)("h3",null,"自由组件以及受控组件"),(0,i.kt)("p",null,"区分自由组件以及受控组件在于表单的值是否由 ",(0,i.kt)("inlineCode",{parentName:"p"},"value")," 这个属性控制, 比较如下代码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const case1 = () => <input />                    // 此时输入框内可以随意增减任意值\nconst case2 = () => <input defaultValue={123} /> // 此时输入框内显示 123, 能随意增减值\nconst case3 = () => <input value={123} />        // 此时输入框内显示 123, 并且不能随意增减值\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"case3")," 的情形即为简化版的受控组件。"),(0,i.kt)("h3",null,"受控组件的实现"),(0,i.kt)("p",null,"题目可以换个问法: 当 ",(0,i.kt)("inlineCode",{parentName:"p"},"input")," 的传入属性为 ",(0,i.kt)("inlineCode",{parentName:"p"},"value")," 时(且没有 onChange 属性), 如何禁用用户的输入事件的同时又能获取焦点?"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0fa301946b3f4bf315d742735c333562.jpg-200",alt:null}))),(0,i.kt)("p",null,"首先想到了 html 自带属性 readonly、disable, 它们都能禁止用户的输入, 但是它们不能满足获取焦点这个条件。结合前文 ",(0,i.kt)("inlineCode",{parentName:"p"},"onChange")," 的实现是监听 ",(0,i.kt)("inlineCode",{parentName:"p"},"input")," 事件, 代码分为以下两种情况:"),(0,i.kt)("p",null,"1.dom 节点包含 ",(0,i.kt)("inlineCode",{parentName:"p"},"value")," 属性、",(0,i.kt)("inlineCode",{parentName:"p"},"onChange")," 属性\n2.dom 节点包含 ",(0,i.kt)("inlineCode",{parentName:"p"},"value")," 属性, 不包含 ",(0,i.kt)("inlineCode",{parentName:"p"},"onChange")," 属性"),(0,i.kt)("p",null,"代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function vdomToDom(vdom) {\n  ...\n  if (vdom.attributes\n    && vdom.attributes.hasOwnProperty('onChange')\n    && vdom.attributes.hasOwnProperty('value')) { // 受控组件逻辑\n      ...\n      dom.addEventListener('input', (e) => {\n        changeCb.call(this, e)\n        dom.value = oldValue\n      })\n      ...\n    }\n  if (vdom.attributes\n    && !vdom.attributes.hasOwnProperty('onChange')\n    && vdom.attributes.hasOwnProperty('value')) { // 受控组件逻辑\n    ...\n    dom.addEventListener('input', (e) => {\n      dom.value = oldValue\n    })\n    ...\n  }\n  ...\n}\n")),(0,i.kt)("p",null,"可以发现它们的核心都在这段代码上:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"dom.addEventListener('input', (e) => {\n  changeCb.call(this, e)\n  dom.value = oldValue\n})\n")),(0,i.kt)("p",null,"区别是当有 ",(0,i.kt)("inlineCode",{parentName:"p"},"onChange 属性")," 时, 能提供相应的回调函数 ",(0,i.kt)("inlineCode",{parentName:"p"},"changeCb")," 通过事件循环机制改变表单的值。看如下两个例子的比较:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const App = () => <input value={123} />\n")),(0,i.kt)("p",null,"效果如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/353c8119b3c60a7f8f7696633c97ad28.jpg-200",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class App extends Component {\n  constructor() {\n    super()\n    this.state = { num: 123 }\n    this.change = this.change.bind(this)\n  }\n\n  change(e) {\n    this.setState({\n      num: e.target.value\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <input value={this.state.num} onChange={this.change} />\n      </div>\n    )\n  }\n}\n")),(0,i.kt)("p",null,"这段代码中的 ",(0,i.kt)("inlineCode",{parentName:"p"},"change")," 函数即上个段落所谓的 ",(0,i.kt)("inlineCode",{parentName:"p"},"changeCb")," 函数, 通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"setState")," 的事件循环机制改变表单的值。"),(0,i.kt)("p",null,"效果如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/aec70ef0cebf603a0871d61f21e93532.gif",alt:null}))),(0,i.kt)("p",null,"至此, 模拟了受控组件的实现。"))}c.isMDXComponent=!0},66474:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"你不知道的 requestIdleCallback"),(0,i.kt)("p",null,"本文副标题是 ",(0,i.kt)("inlineCode",{parentName:"p"},"Request Schedule 源码解析一"),"。在本章中会介绍 ",(0,i.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," 的用法以及其缺陷, 接着对 React 团队对该 api 的 hack 部分的源码进行剖析。在下一篇中会结合优先级对 React 的调度算法进行宏观的解释, 欢迎关注",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog"}),"个人博客"),"。"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"React 调度算法")," 与 ",(0,i.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," 这个 api 息息相关。",(0,i.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," 的作用是是在浏览器一帧的剩余空闲时间内执行优先度相对较低的任务, 其用法如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var tasksNum = 10000\n\nrequestIdleCallback(unImportWork)\n\nfunction unImportWork(deadline) {\n  while (deadline.timeRemaining() && tasksNum > 0) {\n    console.log(`执行了${10000 - tasksNum + 1}个任务`)\n    tasksNum--\n  }\n\n  if (tasksNum > 0) { // 在未来的帧中继续执行\n    requestIdleCallback(unImportWork)\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"deadline")," 有两个参数"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"timeRemaining()"),": 当前帧还剩下多少时间"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"didTimeout"),": 是否超时")),(0,i.kt)("p",null,"另外 ",(0,i.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," 后如果跟上第二个参数 ",(0,i.kt)("inlineCode",{parentName:"p"},"{timeout: ...}")," 则会强制浏览器在当前帧执行完后执行。"),(0,i.kt)("h3",null,"requestIdleCallback 的缺陷"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"requestIdleCallback is called only 20 times per second - Chrome on my 6x2 core Linux machine, it's not really useful for UI work。—— from ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/react/issues/13206#issuecomment-418923831"}),"Releasing Suspense"))),(0,i.kt)("p",null,(0,i.kt)("del",{parentName:"p"},"也就是说 ",(0,i.kt)("inlineCode",{parentName:"del"},"requestIdleCallback")," 的 FPS 只有 ",(0,i.kt)("inlineCode",{parentName:"del"},"20"),", 这远远低于页面流畅度的要求！(一般 FPS 为 60 时对用户来说是感觉流程的, 即一帧时间为 16.7 ms), 这也是 React 需要自己实现 ",(0,i.kt)("inlineCode",{parentName:"del"},"requestIdleCallback")," 的原因。")),(0,i.kt)("h3",null,"源码解析之 requestIdleCallback"),(0,i.kt)("h4",null,"非 DOM 环境"),(0,i.kt)("p",null,"在不能操作 DOM 的环境下, 可以借助 ",(0,i.kt)("inlineCode",{parentName:"p"},"setTimeout")," 来模拟 ",(0,i.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," 的实现。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"requestIdleCallback = (callback) => {\n  setTimeout(callback({\n    timeRemaining() {\n      return Infinity\n    }\n  }))\n}\n")),(0,i.kt)("p",null,"下面将 React 源码中关于服务端的实现也呈现出来:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let _callback = null;\nconst _flushCallback = function (didTimeout) {\n  if (_callback !== null) {\n    try {\n      _callback(didTimeout);\n    } finally {\n      _callback = null;\n    }\n  }\n};\nrequestHostCallback = function (cb) {\n  if (_callback !== null) {\n    // 如果 _callback 不为空, 则将 requestHostCallback 放到下一个事件队列中再次执行\n    setTimeout(requestHostCallback, 0, cb);\n  } else {\n    _callback = cb;\n    setTimeout(_flushCallback, 0, false);\n  }\n};\ncancelHostCallback = function () {\n  _callback = null;\n};\nshouldYieldToHost = function () {\n  return false;\n};\n")),(0,i.kt)("h4",null,"DOM 环境"),(0,i.kt)("p",null,"在浏览器端的环境下, 介绍一个与 ",(0,i.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," 功能相近的 api —— ",(0,i.kt)("inlineCode",{parentName:"p"},"requestAnimationFrame(callback)"),", 其会在下次重绘前执行指定的回调函数，因此这个 api 在动效领域得到了广泛的使用。下面通过一个简单的 demo 来认识它:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let frame\nlet n = 5\nfunction callback(timeStamp) {\n  console.log(timeStamp) // 开始执行回调的时间戳\n  // 如果想要产生循环动画的效果, 需在回调函数中再次调用 requestAnimationFrame()\n  while (n > 0) {\n    requestAnimationFrame(callback)\n    console.log('测试执行顺序')\n    n--\n  }\n}\n\nframe = requestAnimationFrame(callback) // 在下次重绘之前调用回调\n\n// 如果想要销毁该回调, 可以执行 cancelAnimationFrame(frame)\n")),(0,i.kt)("p",null,"执行上述代码, 控制台(chrome)打印如下数据:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"先输出 5 次 '测试执行顺序'\n1795953.649\n1795970.318\n1795986.987\n1796003.656\n1796020.325\n...\n")),(0,i.kt)("p",null,"可以看到在浏览器上一帧的时间大致为 ",(0,i.kt)("inlineCode",{parentName:"p"},"16ms"),"。同时可以看到 ",(0,i.kt)("inlineCode",{parentName:"p"},"requestAnimation(callback)")," 中的 callback 也是异步的(只不过它是基于帧与帧间的异步), 所以上述打印结果是先打印出 5 次 '测试执行顺序' 后再依次打印出 5 个时间戳。"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"requestHostCallback"),"(也就是 requestIdleCallback) 这部分源码的实现比较复杂, 可以将其分解为以下几个重要的步骤(有一些细节点可以看注释):"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"步骤一: 如果有优先级更高的任务, 则通过 ",(0,i.kt)("inlineCode",{parentName:"li"},"postMessage")," 触发步骤四, 否则如果 ",(0,i.kt)("inlineCode",{parentName:"li"},"requestAnimationFrame")," 在当前帧没有安排任务, 则开始一个帧的流程;"),(0,i.kt)("li",{parentName:"ol"},"步骤二: 在一个帧的流程中调用 ",(0,i.kt)("inlineCode",{parentName:"li"},"requestAnimationFrameWithTimeout")," 函数, 该函数调用了 ",(0,i.kt)("inlineCode",{parentName:"li"},"requestAnimationFrame"),", 并对执行时间超过 ",(0,i.kt)("inlineCode",{parentName:"li"},"100ms")," 的任务用 ",(0,i.kt)("inlineCode",{parentName:"li"},"setTimeout")," 放到下一个事件队列中处理;"),(0,i.kt)("li",{parentName:"ol"},"步骤三: 执行 ",(0,i.kt)("inlineCode",{parentName:"li"},"requestAnimationFrame")," 中的回调函数 ",(0,i.kt)("inlineCode",{parentName:"li"},"animationTick"),", 在该回调函数中得到当前帧的截止时间 ",(0,i.kt)("inlineCode",{parentName:"li"},"frameDeadline"),", 并通过 ",(0,i.kt)("inlineCode",{parentName:"li"},"postMessage")," 触发步骤四;"),(0,i.kt)("li",{parentName:"ol"},"步骤四: 通过 ",(0,i.kt)("inlineCode",{parentName:"li"},"onmessage")," 接受 ",(0,i.kt)("inlineCode",{parentName:"li"},"postMessage")," 指令, 触发消息事件的执行。在 ",(0,i.kt)("inlineCode",{parentName:"li"},"onmessage")," 函数中根据 ",(0,i.kt)("inlineCode",{parentName:"li"},"frameDeadline - currentTime <= 0")," 判断任务是否可以在当前帧执行，如果可以的话执行该任务, 否则进入下一帧的调用。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"export let requestHostCallback;\nexport let cancelHostCallback;\nexport let shouldYieldToHost;\nexport let getCurrentTime;\n\nconst ANIMATION_FRAME_TIMEOUT = 100;\nlet rAFID;\nlet rAFTimeoutID;\n// ② 调用 requestAnimationFrame, 并对执行时间超过 100 ms 的任务用 setTimeout 进行处理\nconst requestAnimationFrameWithTimeout = function (callback) {\n  rAFID = requestAnimationFrame(function (timestamp) {\n    clearTimeout(rAFTimeoutID);\n    callback(timestamp); // 一帧中任务调用的核心流程的实现, 接着看第 ③ 步\n  });\n  // 如果在一帧中某个任务执行时间超过 100 ms 则终止该帧的执行并将该任务放入下一个事件队列中\n  rAFTimeoutID = setTimeout(function () {\n    cancelAnimationFrame(rAFID);\n    callback(getCurrentTime());\n  }, ANIMATION_FRAME_TIMEOUT);\n};\n\ngetCurrentTime = function () {\n  return performance.now();\n};\n\nlet scheduledHostCallback = null; // 调度器回调函数\nlet isMessageEventScheduled = false; // 消息事件是否执行\nlet timeoutTime = -1;\n\nlet isAnimationFrameScheduled = false;\n\nlet isFlushingHostCallback = false;\n\nlet frameDeadline = 0; // 当前帧的截止时间\n\n// 假设最开始的 FPS(feet per seconds) 为 30, 但这个值会随着动画帧调用的频率而动态变化\nlet previousFrameTime = 33; // 一帧的时间: 1000 / 30 ≈ 33\nlet activeFrameTime = 33;\n\nshouldYieldToHost = function () {\n  return frameDeadline <= getCurrentTime();\n};\n\nconst channel = new MessageChannel();\nconst port = channel.port2;\n// ④ 接受 `postMessage` 指令, 触发消息事件的执行。在其中判断任务是否在当前帧执行，如果在的话执行该任务\nchannel.port1.onmessage = function (event) {\n  isMessageEventScheduled = false;\n\n  const prevScheduledCallback = scheduledHostCallback;\n  const prevTimeoutTime = timeoutTime;\n  scheduledHostCallback = null;\n  timeoutTime = -1;\n\n  const currentTime = getCurrentTime();\n\n  let didTimeout = false; // 是否超时\n  // 如果当前帧已经没有时间剩余, 检查是否有 timeout 参数，如果有的话是否已经超过这个时间\n  if (frameDeadline - currentTime <= 0) {\n    if (prevTimeoutTime !== -1 && prevTimeoutTime <= currentTime) {\n      // didTimeout 为 true 后, 在当前帧中执行(针对优先级较高的任务)\n      didTimeout = true;\n    } else {\n      // 在下一帧中执行\n      if (!isAnimationFrameScheduled) {\n        isAnimationFrameScheduled = true;\n        requestAnimationFrameWithTimeout(animationTick);\n      }\n      scheduledHostCallback = prevScheduledCallback;\n      timeoutTime = prevTimeoutTime;\n      return;\n    }\n  }\n\n  if (prevScheduledCallback !== null) {\n    isFlushingHostCallback = true;\n    try {\n      prevScheduledCallback(didTimeout);\n    } finally {\n      isFlushingHostCallback = false;\n    }\n  }\n};\n\n// ③ requestAnimationFrame 的回调函数。传入的 rafTime 为执行该帧的时间戳。\nconst animationTick = function (rafTime) {\n  // 如果存在调度器回调函数则在一帧的开头急切地安排下一帧的动画回调(急切是因为如果在帧的后半段安排动画回调的话, 就会增大下一帧超过 100ms 的几率, 从而会浪费一个帧的利用, 可以结合步骤②来理解这句话), 如果不存在调度器回调函数否则立马终止执行。\n  if (scheduledHostCallback !== null) {\n    requestAnimationFrameWithTimeout(animationTick);\n  } else {\n    isAnimationFrameScheduled = false;\n    return;\n  }\n\n  let nextFrameTime = rafTime - frameDeadline + activeFrameTime; // 当前帧开始调用动画的时间 - 上一帧调用动画的截止时间 + 当前帧执行的时间，这里的 nextFrameTime 仅仅是临时变量\n  // 如果连续两帧的时间都小于当前帧的时间, 则说明得调高 FPS\n  if (nextFrameTime < activeFrameTime && previousFrameTime < activeFrameTime) {\n    // 将 activeFrameTime 的值减小相当于调高 FPS。同时取 nextFrameTime 与 previousFrameTime 中较大的一个以让前后两帧都不出问题。\n    activeFrameTime =\n      nextFrameTime < previousFrameTime ? previousFrameTime : nextFrameTime;\n  } else {\n    previousFrameTime = nextFrameTime;\n  }\n  frameDeadline = rafTime + activeFrameTime; // 当前帧的截止时间(上面几行代码的目的是得到该 frameDeadline 值, 该值在 postMessage 会用来判断)\n  if (!isMessageEventScheduled) {\n    isMessageEventScheduled = true;\n    port.postMessage(undefined); // 最后进入第④步, 通过 postMessage 触发消息事件。\n  }\n};\n\n// DOM 环境下 requestIdleCallback 的实现, 这里第二个参数在最新的 requestIdleCallback 中因为对象类型\nrequestHostCallback = function (callback, absoluteTimeout) {\n  scheduledHostCallback = callback; // 这里的 callback 为调度器回调函数\n  timeoutTime = absoluteTimeout;\n  if (isFlushingHostCallback || absoluteTimeout < 0) {\n    // 针对优先级较高的任务不等下一个帧，在当前帧通过 postMessage 尽快执行\n    port.postMessage(undefined);\n  } else if (!isAnimationFrameScheduled) {\n    // ① 如果 rAF 在当前帧没有安排任务, 则开始一个帧的流程\n    isAnimationFrameScheduled = true;\n    requestAnimationFrameWithTimeout(animationTick);\n  }\n};\n\ncancelHostCallback = function () {\n  scheduledHostCallback = null;\n  isMessageEventScheduled = false;\n  timeoutTime = -1;\n};\n")),(0,i.kt)("h3",null,"相关资料"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/blob/master/packages/scheduler/src/forks/SchedulerHostConfig.default.js"}),"requestIdleCallback polyful"))))}c.isMDXComponent=!0},51650:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"流畅性"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"被动交互: animation"),(0,i.kt)("li",{parentName:"ul"},"主动交互: 鼠标、键盘")),(0,i.kt)("h3",null,"被动交互"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/23b109b73c8296e2c0d9178d214f33f0.jpg-400",alt:null}))),(0,i.kt)("p",null,"当前市面上的设备频率在 60 HZ 以上。"),(0,i.kt)("h3",null,"主动交互"),(0,i.kt)("p",null,"跑如下界面 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://code.h5jun.com/pojob"}),"https://code.h5jun.com/pojob")),(0,i.kt)("p",null,"通过观察上述 demo, 可以看到 100ms 以下的点击是顺畅的, 而超过 100ms 的点击就会有卡顿现象。"),(0,i.kt)("h4",null,"让用户感觉到流畅"),(0,i.kt)("p",null,"衡量一个网页/App 是否流畅有个比较好用的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/web/fundamentals/performance/rail"}),"Rail 模型"),", 它大概有以下几个评判标准值。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"Response —— 100ms\nAnimation —— 16.7ms\nIdle —— 50ms\nLoad —— 1000ms\n")),(0,i.kt)("h3",null,"像素管道"),(0,i.kt)("p",null,"像素管道一般由 5 个部分组成。JavaScript、样式、布局、绘制、合成。如下图所示:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/a4498ef249fafc3d47f1443df4108256.jpg",alt:null}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/web/fundamentals/performance/rendering/?hl=zh-cn"}),"渲染性能"))),(0,i.kt)("h3",null,"保证主动交互让用户感觉流畅"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function App() {\n  useEffect(() => {\n    setTimeout(() => {\n      const start = performance.now()\n      while (performance.now() - start < 1000) { }\n      console.log('done!')\n    }, 5000)\n  })\n  return (\n    <input type=\"text\" />\n  );\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/574ac0a2b41a78fdb00f2db3d250de37.jpg-400",alt:null}))),(0,i.kt)("p",null,"超过 50 ms 认为是 ",(0,i.kt)("inlineCode",{parentName:"p"},"long task(长任务)"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"long task")," 会阻塞 ",(0,i.kt)("inlineCode",{parentName:"p"},"main thread")," 的运行。"),(0,i.kt)("p",null,"在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.google.com/web/updates/2019/03/devtools#longtasks"}),"chrome 74"),", 对 long task 进行了标明:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/26e2861027babde1248178a0ad2252ed.jpg-400",alt:null}))),(0,i.kt)("p",null,"如下是两种解决方案。"),(0,i.kt)("h4",null,"Web Worker"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"app.js")," 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import React, {useEffect} from 'react'\nimport WorkerCode from './worker'\n\nfunction App() {\n  useEffect(() => {\n    const testWorker = new Worker(WorkerCode)\n    setTimeout(_ => {\n      testWorker.postMessage({})\n      testWorker.onmessage = function(ev) {\n        console.log(ev.data)\n      }\n    }, 5000)\n  })\n  return (\n    <input type=\"text\" />\n  );\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"worker.js")," 代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const workerCode = () => {\n  self.onmessage = function() {\n    const start = performance.now()\n    while (performance.now() - start < 1000) { }\n    postMessage('done!')\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/df7d2b274685c20638cdde68cb54927d.jpg",alt:null}))),(0,i.kt)("p",null,"此时在输入框输入时没有卡顿的感觉。"),(0,i.kt)("h4",null,"Time Slicing"),(0,i.kt)("p",null,"下面是另外一种使页面流畅的方法 —— ",(0,i.kt)("inlineCode",{parentName:"p"},"Time Slicing"),"(时间分片)。"),(0,i.kt)("h5",null,"Time Slicing 的意义"),(0,i.kt)("p",null,"如果某个任务超过 50ms 没有执行完, 为了避免阻塞浏览器主线程的执行, 该任务应该让出执行的控制权, 让浏览器处理完其它任务后再来执行该任务。"),(0,i.kt)("h5",null,"Time Slicing"),(0,i.kt)("p",null,"观察 Chrome 的 Performance, 火焰图如下,"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/8cbc0ea884095aa25a79bd9d474ff2e5.jpg",alt:null}))),(0,i.kt)("p",null,"从火焰图可以看出主线程被拆分为了多个时间分片, 所以不会造成卡顿。时间分片的代码片段如下所示:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function timeSlicing(gen) {\n  if (typeof gen === 'function') gen = gen()\n  if (!gen || typeof gen.next !== 'function') return\n\n  (function next() {\n    const res = gen.next() // ①\n    if (res.done) return // ⑤\n    setTimeout(next) // ③\n  })()\n}\n\n// 调用时间分片函数\ntimeSlicing(function* () {\n  const start = performance.now()\n  while (performance.now() - start < 1000) {\n    console.log('执行逻辑')\n    yield // ②\n  }\n  console.log('done') // ④\n})\n")),(0,i.kt)("p",null,"前置知识 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/readES6/Generator.md"}),"Generator")),(0,i.kt)("p",null,"下面对该函数进行分析:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"往时间分片函数 ",(0,i.kt)("inlineCode",{parentName:"li"},"timeSlicing")," 中传入 ",(0,i.kt)("inlineCode",{parentName:"li"},"generator")," 函数;"),(0,i.kt)("li",{parentName:"ol"},"函数的执行顺序 —— ①、②、③、① (此时有个竞赛的关系, 如果 ",(0,i.kt)("inlineCode",{parentName:"li"},"performance.now() - start < 1000")," 则继续 ②、③, 如果 ",(0,i.kt)("inlineCode",{parentName:"li"},"performance.now() - start >= 1000")," 则跳出循环执行 ④、⑤);")),(0,i.kt)("p",null,"如何说:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"timeSlicing 传入 generator 函数;"),(0,i.kt)("li",{parentName:"ol"},"我们知道 generator 函数提供了 yiled 这个暂停口子;"),(0,i.kt)("li",{parentName:"ol"},"通过这个口子控制权可以转交到 timeSlicing 内部;"),(0,i.kt)("li",{parentName:"ol"},"通过 setTimeout 将 long tasks 切分到多个事件队列中执行;")),(0,i.kt)("h5",null,"避免把任务分解的过于零碎"),(0,i.kt)("p",null,"使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"Time Slising")," 会让任务的完成时间变长, 但为了让用户体验流畅, 这种取舍还是有必要的。这个也是在 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/BasicSkill/React/schedule.md"}),"schedule")," 中提到的",(0,i.kt)("inlineCode",{parentName:"p"},"目标对象更快完成渲染"),"与",(0,i.kt)("inlineCode",{parentName:"p"},"及时响应优先级更高任务"),"的矛盾。"),(0,i.kt)("p",null,"假设某个任务执行时间为 ",(0,i.kt)("inlineCode",{parentName:"p"},"100ms"),", 假设被分割的任务间隔是 ",(0,i.kt)("inlineCode",{parentName:"p"},"4ms"),", 分割成 2 个 ",(0,i.kt)("inlineCode",{parentName:"p"},"50ms")," 的任务和分割成 100 个 ",(0,i.kt)("inlineCode",{parentName:"p"},"1ms")," 的任务分别耗时。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"(50 + 4) * 2 = 108ms\n\n(1 + 4) * 100 = 500ms\n")),(0,i.kt)("p",null,"针对上述函数作如下调整:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function timeSlicing(gen) {\n  if (typeof gen === 'function') gen = gen()\n  if (!gen || typeof gen.next !== 'function') return\n\n  (function next() {\n    const init = performance.now()\n    let res = gen.next()\n    while (!res.done && performance.now() - init < 25) { // 这里相当于是一个控制执行多少的阀门。\n      res = gen.next()\n    }\n    if (res.done) return\n    setTimeout(next)\n  })()\n}\n")),(0,i.kt)("h4",null,"conclusion"),(0,i.kt)("p",null,"针对 ",(0,i.kt)("inlineCode",{parentName:"p"},"long task")," 会阻塞 ",(0,i.kt)("inlineCode",{parentName:"p"},"main thread")," 的运行的情形, 给出两种解决方案:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Web Worker"),": 使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"Web Worker")," 提供的多线程环境来处理 ",(0,i.kt)("inlineCode",{parentName:"li"},"long task"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Time Slicing"),": 将主线程上的 ",(0,i.kt)("inlineCode",{parentName:"li"},"long task")," 进行时间分片;")),(0,i.kt)("h3",null,"保证被动交互让用户感觉流畅"),(0,i.kt)("p",null,"保证 ",(0,i.kt)("inlineCode",{parentName:"p"},"16.7ms")," 有新的一帧传输到界面上。除去用户的逻辑代码, 一帧内留给浏览器整合的时间大概只有 ",(0,i.kt)("inlineCode",{parentName:"p"},"6ms")," 左右, 回到像素管道上来, 我们可以从这几方面进行优化:"),(0,i.kt)("h4",null,"避免 CSS 选择器嵌套过深"),(0,i.kt)("p",null,"Style 这部分的优化在 css 样式选择器的使用, css 选择器使用的层级越多, 耗费的时间越多。以下是测试 css 选择器不同层级筛选相同元素的一次测试结果。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"div.box:not(:empty):last-of-type span         2.25ms\nindex.html:85 .box--last span                 0.28ms\nindex.html:85 .box:nth-last-child(-n+1) span  2.51ms\n")),(0,i.kt)("h4",null,"避免布局重排"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 先修改值\nel.style.witdh = '100px'\n// 后取值\nconst width = el.offsetWidth\n")),(0,i.kt)("p",null,"这段代码有什么问题呢?"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/9f446b40c45fa93b26bf91927e84c676.jpg",alt:null}))),(0,i.kt)("p",null,"可以看到它会造成布局重排。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/02a6a152cb141781df115840495ed356.jpg",alt:null}))),(0,i.kt)("p",null,"应对的策略是调整它们的执行顺序,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 先取值\nconst width = el.offsetWidth\n// 后修改值\nel.style.witdh = '100px'\n")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/b84405a014e98f0903703f7d45b9497d.jpg",alt:null}))),(0,i.kt)("p",null,"可以看到经过调换顺序后, 后执行的 el.style.width 会新开一个像素管道, 而不会在原先的像素管道进行重排。"),(0,i.kt)("p",null,"此外不要在循环中执行如下的操作,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"for (var i = 0; i < 1000; i++) {\n  const newWidth = container.offsetWidth; // ①\n  boxes[i].style.width = newWidth + 'px'; // ②\n}\n")),(0,i.kt)("p",null,"可以在火焰图中看到它发生了重绘的警告,"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/4ee7202c8d28e685a9cd347061eb39e9.jpg",alt:null}))),(0,i.kt)("p",null,"执行顺序是 ①②①②①②①..., 假若我们在第一个 ① 后面插入一条竖线后 ①|②①②①②①, 其就变成先修改值后取值的情景, 所以也就发生了重绘!"),(0,i.kt)("p",null,"正确的使用姿势应该如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const newWidth = container.offsetWidth;\nfor (var i = 0; i < 1000; i++) {\n  boxes[i].style.width = newWidth + 'px';\n}\n")),(0,i.kt)("h4",null,"避免重绘"),(0,i.kt)("p",null,"创建 Layers(图层) 可以避免重绘,"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),"{\n  transform: translateZ(0);\n}\n")),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://csstriggers.com/"}),"csstriggers")," 里添加了各个 CSS 属性对重排、重绘、组合的影响。"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/berwin/Blog/issues/38"}),"时间切片")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/37095662"}),"React Fiber 架构"),': "如何调度时间才能保证流畅"此小节可以参阅')))}c.isMDXComponent=!0},17859:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"A/B 测试"),(0,i.kt)("p",null,"AB 测试是一个反复迭代优化的过程，它的基本步骤如下图所示可以划分为"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/036ddf6dae41356524211c8bdf830744.jpg",alt:null}))),(0,i.kt)("h3",null,"周边定理"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"大数定律与中心极限定理"),(0,i.kt)("li",{parentName:"ul"},"抽样分布"),(0,i.kt)("li",{parentName:"ul"},"新属性检验"),(0,i.kt)("li",{parentName:"ul"},"T 检验例子")),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://mp.weixin.qq.com/s/43qcdwNqYP9QdgwdfR5HWA"}),"谷歌是怎么用 A/B 测试的"))),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.douban.com/note/698028685/"}),"怎样学习 A/B Testing（AB测试）？")," 后面如果有需要再看")))}c.isMDXComponent=!0},94338:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"todo: 整理 JEST 与 ReactTestingLibrary"))}c.isMDXComponent=!0},55405:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"jest 与 jest-dom(ReactTestingLibrary)"),(0,i.kt)("h3",null,"一些配置"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"jest.config.js")," 的一些常见配置属性如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"module.exports = {\n  // 可以指定测试环境\n  testEnviroment: 'jest-environment-node' | 'jest-enviroment-jsdom',\n  // 指定模块加载目录\n  moduleDirectories: ['node_modules', path.join(__dirname, 'src'), 'shared']\n  // identity-obj-proxy 支持在 jest 中引入 css, 同时支持 css 的模块化\n  moduleNameMapper: {\n    \"\\\\.(css|less|scss)$\": \"identity-obj-proxy\",\n  },\n  // before jest is loaded(不依赖 jest)\n  setupFiles: []\n  // after jest is loaded(依赖 jest)\n  setupTestFrameworkScriptFile: require.resolve('./test/setup-tests.js')\n  // 测试覆盖率收集目录\n  collectCoverageFrom: ['src/**/*.js']\n  // 指定测试覆盖率需要需要达到的阈值\n  coverageThreshold: {\n    global: {\n      statements: 80,\n      branches: 80,\n      lines: 80,\n      functions: 80,\n    }\n  }\n  // 增强 watch 模式体验: $ npm install --save-dev jest-watch-typeahead\n  watchPlugins: [\n    'jest-watch-typeahead/filename',\n    'jest-watch-typeahead/testname',\n  ]\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/emotion-js/emotion"}),"jest-emotion"),": css 中具体样式发生更改便重新生成 snapshot。")),(0,i.kt)("h3",null,"jest-dom"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"jest-dom")," 封装了测试 dom 的方法。报错的信息可以更加准确。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import 'jest-dom/extend-expect'\n")),(0,i.kt)("p",null,"此时可以使用如下方法:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"expect(input).toHavaAttribute('type', 'number') // 是否有某个属性\nexpect(..).toHaveTextContent()                  // 是否有某个内容\n")),(0,i.kt)("h3",null,"dom-test-library"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"dom-test-library")," 的优势。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"增加了更多的操作, 比如根据 label 找对应的节点;"),(0,i.kt)("li",{parentName:"ul"},"支持正则匹配;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import { queries } from 'dom-testing-library'\n")),(0,i.kt)("h3",null,"@testing-library/react 的使用"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"@testing-library/react")," 在 ",(0,i.kt)("inlineCode",{parentName:"p"},"dom-test-library")," 的基础上查找 React 组件。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import 'react-testing-library/cleanup-after-each' // 自动完成每次的回收\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"可以使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"react-testing-library")," 中的 debug 函数来对子组件进行断点调试。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"test('...', () => {\n  const { debug } = render(<Component />)\n  debug()\n  // or\n  debug(<SomeComponent />)\n})\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Test React Component Event Handlers with fireEvent from react-testing-library")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import { fireEvent } from 'react-testing-library'\n\nfireEvent.change()\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"几种断言方式")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"方式一: ",(0,i.kt)("inlineCode",{parentName:"p"},"expect(container).toHaveTextContent(/the number is invalid/i)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"方式二: ",(0,i.kt)("inlineCode",{parentName:"p"},"getByText(/the number is invalid/i)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"方式三: ",(0,i.kt)("inlineCode",{parentName:"p"},"expect(getByText(/the number is invalid/i)).toBeTruthy()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"方式四: 配合 ",(0,i.kt)("inlineCode",{parentName:"p"},"data-testid")," 属性可以使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"expect(getByTestId('...')).toHaveTextContent(/the number is invalid/i)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Test prop updates with react-testing-library"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"test('...', () => {\n  const { rerender } = render(<Component />)\n  rerender(<SomeComponent />)\n})\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"getByLabelText"),"       (form inputs)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"getByPlaceholderText")," (only if your input doesn’t have a label — less accessible!)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"getByText"),"            (buttons and headers)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"getByAltText"),"         (images)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"getByTestId"),"          (use this for things like dynamic text or otherwise odd elements you want to test)")),(0,i.kt)("p",null,"上述每一个方法都有对应的 ",(0,i.kt)("inlineCode",{parentName:"p"},"queryByFoo")," 替代方法。以 ",(0,i.kt)("inlineCode",{parentName:"p"},"query")," 开头的方法找不到的话会返回 null, 以 ",(0,i.kt)("inlineCode",{parentName:"p"},"get")," 开头的方法找不到的话会 throw。"),(0,i.kt)("p",null,"如果这些都不会让你确切地知道你在找什么, render 方法也会返回映射到 container 属性的 DOM 元素，所以也可以像 ",(0,i.kt)("inlineCode",{parentName:"p"},"container.querySelector('body #root')")," 一样使用它。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Mock HTTP Requests with jest.mock in React Component Tests")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import { render, fireEvent, wait } from 'react-testing-library'\nimport {loadGreeting as mockLoadGreeting} from '../api'\n\njest.mock('../api', () => {\n  return {\n    loadGreeting: jest.fn(subject =>\n      Promise.resolve({data: {greeting: `Hi ${subject}`}}),\n    ),\n  }\n})\n\ntest('loads greetings on click', () => {\n  const {getByLabelText, getByText, getByTestId} = render(<GreetingLoader />)\n  const nameInput = getByLabelText(/name/i)\n  const loadButton = getByText(/load/i)\n  nameInput.value = 'Mary'\n  fireEvent.click(loadButton)\n  await wait(() => expect(getByTestId('greeting')).toHaveTextContent())\n  expect(mockLoadGreeting).toHaveBeenCalledTimes(1)\n  expect(mockLoadGreeting).toHaveBeenCalledWith('Mary')\n})\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Mock react-transition-group in React Component Tests with jest.mock")),(0,i.kt)("p",null,"比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"react-transition-group")," 动画库也是存在异步库, 它会在 1s 后将 Children 隐藏, 这时候可以使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"mock")," 来处理。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"jest.mock('react-transition-group', () => {\n  return {\n    CSSTransition: props => (props.in ? props.children : null),\n  }\n})\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"将 ",(0,i.kt)("inlineCode",{parentName:"li"},"console.error()")," mock 掉")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"beforeEach(() => {\n  jest.spyOn(console, 'error').mockImplementation(() => {})\n})\n\nafterEach(() => {\n  console.error.mockRestore()\n})\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// componentDidCatch 里的两个参数\nconst error = expect.any(Error)\nconst info = {componentStack: expect.stringContaining('Bomb')}\nexpect(mockReportError).toHaveBeenCalledWith(error, info)\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/testing-library/jest-dom"}),"jest-dom"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/testing-library/jest-dom#tobevisible"}),"toBeVisible"))))),(0,i.kt)("h3",null,"mock 测试"),(0,i.kt)("h4",null,"mock 请求后端接口数据"),(0,i.kt)("p",null,"当测试需要请求后端接口数据的 UI 组件(比如图片上传组件), 为了防止接口不稳定等影响到测试用例通过, 通常需要对请求后端接口数据进行 mock。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"当需要测试接口返回的真实数据时可以对其进行集成测试。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"jest.spyOn(global, 'fetch').mockImplementation(() => {\n  Promise.resolve({\n    json: () => Promise.resolve(mockData)\n  })\n})\n")),(0,i.kt)("h4",null,"mock 浏览器节点信息"),(0,i.kt)("p",null,"在使用 JEST 测试一些需要浏览器位置信息的组件(比如 PullToRefresh、Scrollbar 组件等等)时, 需要将浏览器节点信息给 mock 掉。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"将获取位置的方法抽离到 util 包中;",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"这也是为什么尽量将",(0,i.kt)("inlineCode",{parentName:"li"},"函数力度拆细"),"的原因。"))),(0,i.kt)("li",{parentName:"ol"},"mock util 包中的该方法;")),(0,i.kt)("h4",null,"mock 模块/组件"),(0,i.kt)("p",null,"如果存在对当前组件的测试影响不大的第三方模块, 可以将相关模块/组件进行 mock, 从而可以提高测试的效率。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"jest.mock('someComponent', () => {\n  return (props) => {\n    return <span>mock Component</span>\n  }\n})\n")),(0,i.kt)("h4",null,"mock 时间类 api"),(0,i.kt)("p",null,"如果测试用例中遇到 ",(0,i.kt)("inlineCode",{parentName:"p"},"setTimeout(fn, 5000)")," 真的等上 5s 后才执行 fn 测试效率是非常低效的, 因此可以使用 jest 提供的 ",(0,i.kt)("inlineCode",{parentName:"p"},"jest.useFakeTimers()")," 来 mock 与时间有关的 api。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// mocks out setTimeout and other timer functions with mock functions.\njest.useFakeTimers()\n\n// use jest.runAllTimers() to make sure all perf of callback.\njest.runAllTimers()\n\n// move ahead in time by 100ms\nact(() => {\n  jest.advanceTimersByTime(100)\n})\n")),(0,i.kt)("h3",null,"act"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"act")," 确保其函数里跟的单元方法(比如 rendering、用户事件、数据获取)在执行步骤 ",(0,i.kt)("inlineCode",{parentName:"p"},"make assertions")," 之前已经全部执行完。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"act(() => {\n  // render components\n})\n// make assertions\n")),(0,i.kt)("h3",null,"书写一个测试函数"),(0,i.kt)("p",null,"测试函数有两种风格, BDD(行为驱动开发) 以及 TDD(测试驱动开发)。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"BDD 风格: ",(0,i.kt)("inlineCode",{parentName:"li"},"foo.should.equal('bar')")," 或者 ",(0,i.kt)("inlineCode",{parentName:"li"},"expect(foo).to.equal('bar')"),";"),(0,i.kt)("li",{parentName:"ul"},"TDD 风格: ",(0,i.kt)("inlineCode",{parentName:"li"},"assert.equal(foo, 'bar', 'foo equal bar')"),";")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://www.chaijs.com/guide/styles/"}),"几种断言类型"))),(0,i.kt)("p",null,"下面我们来书写基于 BDD 风格的 test 函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"async function test(title, callback) {\n  try {\n    await callback()\n    console.log(`✓ ${title}`)\n  } catch (error) {\n    console.error(`✕ ${title}`)\n    console.error(error)\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"expect")," 函数:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function expect(actual) {\n  return {\n    toBe(expected) {\n      if (actual !== expected) {\n        throw new Error(`${actual} is not equal to ${expected}`)\n      }\n    }\n  }\n}\n")),(0,i.kt)("p",null,"应用:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'const sum = (a, b) => a + b\n\ntest("sum adds numbers", async () => {\n  const result = await sum(3, 7)\n  const expected = 10\n  expect(result).toBe(expected)\n})\n')),(0,i.kt)("h3",null,"不得不测实例上的方法?"),(0,i.kt)("p",null,"如果在 '@testing-library/react' 中测试某些组件暴露给业务方的钩子, 记录了下可以这样子测试"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"it('test instance exist', () => {\n  let instance\n  render(\n    <Component\n      ref={node => {\n        instance = node\n      }}\n    />\n  )\n  expect(Object.prototype.toString.call(instance.A)).toBe('[object Function]')\n  expect(Object.prototype.toString.call(instance.B)).toBe('[object Function]')\n})\n")),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://blog.sapegin.me/all/react-testing-3-jest-and-react-testing-library/"}),"react-testing-3-jest-and-react-testing-library/"))))}c.isMDXComponent=!0},86600:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"测试的动机"),(0,i.kt)("p",null,"测试用例的书写是一个风险驱动的行为, 每当收到 Bug 报告时, 先写一个单元测试来暴露这个 Bug, 在日后的代码提交中, 若该测试用例是通过的, 开发者就能更为自信地确保程序不会再次出现此 bug。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"测试的动机是有效地提高开发者的自信心。")),(0,i.kt)("h3",null,"前端现代化测试模型"),(0,i.kt)("p",null,"前端测试中有两种模型, ",(0,i.kt)("inlineCode",{parentName:"p"},"金字塔模型"),"与",(0,i.kt)("inlineCode",{parentName:"p"},"奖杯模型"),"。"),(0,i.kt)("p",null,"金字塔模型摘自 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://martinfowler.com/bliki/TestPyramid.html"}),"Martin Fowler's blog"),", 模型示意图如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/d97821c98ca86b161ac650198e6b44fd.jpg-300",alt:null}))),(0,i.kt)("p",null,"金字塔模型自下而上分为单元测试、集成测试、UI 测试, 之所以是金字塔结构是因为单元测试的成本最低, 与之相对, UI 测试的成本最高。所以单元测试写的数量最多, UI 测试写的数量最少。同时需注意的是越是上层的测试, 其通过率给开发者带来的信心是越大的。"),(0,i.kt)("p",null,"奖杯模型摘自 Kent C. Dodds 提出的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://twitter.com/kentcdodds/status/960723172591992832?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E960723172591992832&ref_url=https%3A%2F%2Fkentcdodds.com%2Fblog%2Fwrite-tests"}),"The Testing Trophy"),", 该模型是笔者比较认可的前端现代化测试模型, 模型示意图如下:"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/0453d50194dfa1cbf7a4aeb70252c438.jpg-300",alt:null}))),(0,i.kt)("p",null,"奖杯模型中自下而上分为静态测试、单元测试、集成测试、e2e 测试, 它们的职责大致如下:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"静态测试"),": 在编写代码逻辑阶段时进行报错提示。(代表库: eslint、flow、TypeScript)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"单元测试"),": 在奖杯模型中, 单元测试的职责是对一些边界情况或者特定的算法进行测试。(代表库: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/jest"}),"jest"),"、",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/mochajs/mocha"}),"mocha"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"集成测试"),": 模拟用户的行为进行测试, 对网络请求、获取数据库的数据等依赖第三方环境的行为进行 mock。(代表库: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/jest"}),"jest"),"、",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/testing-library/react-testing-library"}),"react-testing-library"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"e2e 测试"),": 模拟用户在真实环境上操作行为(包括网络请求、获取数据库数据等)的测试。(代表库: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/cypress-io/cypress"}),"cypress"),")")),(0,i.kt)("p",null,"越是上层的测试给开发者带来的自信是越大的, 与此同时, 越是下层的测试测试的效率是越高的。奖杯模型综合考虑了这两点因素, 可以看到其在集成测试中的占比是最高的。"),(0,i.kt)("h3",null,"基于用户行为去测试"),(0,i.kt)("p",null,"书写测试用例是为了提高开发者对程序的自信心的, 但是很多时候书写测试用例给开发者带来了觉得在做无用功的沮丧。导致沮丧的感觉出现往往是因为开发者对组件的具体实现细节进行了测试, 如果换个角度站在用户的行为上进行测试则能极大提高测试效率。"),(0,i.kt)("p",null,"测试组件的具体细节会带来的两个问题:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"测试用例对代码",(0,i.kt)("inlineCode",{parentName:"li"},"错误否定"),";"),(0,i.kt)("li",{parentName:"ol"},"测试用例对代码",(0,i.kt)("inlineCode",{parentName:"li"},"错误肯定"),";")),(0,i.kt)("p",null,"以",(0,i.kt)("inlineCode",{parentName:"p"},"轮播图组件"),"为例, 依次来看上述问题。轮播图组件伪代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Carousel extends React.Component {\n  state = {\n    index: 0\n  }\n\n  /* 跳转到指定的页数 */\n  jump = (to: number) => {\n    this.setState({\n      index: to\n    })\n  }\n\n  render() {\n    const { index } = this.state\n    return <>\n      <Swipe currentPage={index} />\n      <button onClick={() => this.jump(index + 1)}>下一页</button>\n      <span>`当前位于第${index}页`</span>\n    </>\n  }\n}\n")),(0,i.kt)("p",null,"如下是基于 ",(0,i.kt)("inlineCode",{parentName:"p"},"enzyme")," 的 api 写的测试用例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import { mount } from 'enzyme'\n\ndescribe('Carousel Test', () => {\n  it('test jump', () => {\n    const wrapper = mount(<Carousel>\n      <div>第一页</div>\n      <div>第二页</div>\n      <div>第三页</div>\n    </Carousel>)\n\n    expect(wrapper.state('index')).toBe(0)\n    wrapper.instance().jump(2)\n    expect((wrapper.state('index')).toBe(2)\n  })\n})\n")),(0,i.kt)("p",null,"恭喜, 测试通过✅。某一天开发者觉得 ",(0,i.kt)("inlineCode",{parentName:"p"},"index")," 的命名不妥, 对其重构将 ",(0,i.kt)("inlineCode",{parentName:"p"},"index")," 更名为 ",(0,i.kt)("inlineCode",{parentName:"p"},"currentPage"),", 此时代码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Carousel extends React.Component {\n  state = {\n    currentPage: 0\n  }\n\n  /* 跳转到指定的页数 */\n  jump = (to: number) => {\n    this.setState({\n      currentPage: to\n    })\n  }\n\n  render() {\n    const { currentPage } = this.state\n    return <>\n      <Swipe currentPage={currentPage} />\n      <button onClick={() => this.jump(currentPage + 1)}>下一页</button>\n      <span>`当前位于第${currentPage}页`</span>\n    </>\n  }\n}\n")),(0,i.kt)("p",null,"再次跑测试用例, 此时在 ",(0,i.kt)("inlineCode",{parentName:"p"},"expect(wrapper.state('index')).toBe(0)")," 的地方抛出了错误❌, 这就是所谓的测试用例对代码进行了",(0,i.kt)("inlineCode",{parentName:"p"},"错误否定"),"。因为这段代码对于使用方来说是不存在问题的, 但是测试用例却抛出错误, 此时开发者不得不做'无用功'来调整测试用例适配新代码。调整后的测试用例如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-diff"}),"describe('Carousel Test', () => {\n  it('test jump', () => {\n    ...\n\n-   expect(wrapper.state('index')).toBe(0)\n+   expect(wrapper.state('currentPage')).toBe(0)\n    wrapper.instance().jump(2)\n-   expect((wrapper.state('index')).toBe(2)\n+   expect((wrapper.state('currentPage')).toBe(2)\n  })\n})\n")),(0,i.kt)("p",null,"然后在某一天粗心的小明同学对代码做了以下改动:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-diff"}),"class Carousel extends React.Component {\n  state = {\n    currentPage: 0\n  }\n\n  /* 跳转到指定的页数 */\n  jump = (to: number) => {\n    this.setState({\n      currentPage: to\n    })\n  }\n\n  render() {\n    const { currentPage } = this.state\n    return <>\n      <Swipe currentPage={currentPage} />\n-     <button onClick={() => this.jump(currentPage + 1)}>下一页</button>\n+     <button onClick={this.jump(currentPage + 1)}>下一页</button>\n      <span>`当前位于第${index}页`</span>\n    </>\n  }\n}\n")),(0,i.kt)("p",null,"小明同学跑了上述单测, 测试通过✅, 于是开心地提交了代码。结果上线后线上出现了问题! 这就是所谓测试用例对代码进行了",(0,i.kt)("inlineCode",{parentName:"p"},"错误肯定"),"。因为测试用例测试了组件内部细节(此处为 ",(0,i.kt)("inlineCode",{parentName:"p"},"jump")," 函数), 让小明误以为已经覆盖了全部场景。"),(0,i.kt)("p",null,"测试用例",(0,i.kt)("inlineCode",{parentName:"p"},"错误否定"),"以及",(0,i.kt)("inlineCode",{parentName:"p"},"错误肯定"),"都给开发者带来了挫败感与困扰, 究其原因是测试了组件内部的具体细节所至。而一个稳定可靠的测试用例应该脱离组件内部的实现细节, 越接近用户行为的测试用例能给开发者带来越充足的自信。相较于 enzyme, ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/testing-library/react-testing-library"}),"react-testing-library")," 所提供的 api 更加贴近用户的使用行为, 使用其对上述测试用例进行重构:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import { render, fireEvent } from '@testing-library/react'\n\ndescribe('Carousel Test', () => {\n  it('test jump', () => {\n    const { getByText } = render(<Carousel>\n      <div>第一页</div>\n      <div>第二页</div>\n      <div>第三页</div>\n    </Carousel>)\n\n    expect(getByText(/当前位于第一页/)).toBeInTheDocument()\n    fireEvent.click(getByText(/下一页/))\n    expect(getByText(/当前位于第一页/)).not.toBeInTheDocument()\n    expect(getByText(/当前位于第二页/)).toBeInTheDocument()\n  })\n})\n")),(0,i.kt)("p",null,"关于 ",(0,i.kt)("inlineCode",{parentName:"p"},"react-testing-Library")," 的用法总结将在下一章节 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/blob/master/React/%E6%B5%8B%E8%AF%95/Jest%E4%B8%8EReactTestingLibrary.md"}),"Jest 与 react-testing-Library")," 具体介绍。如果对 React 技术栈感兴趣, 欢迎关注",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog"}),"个人博客"),"。"),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://kentcdodds.com/blog/write-tests"}),"write-tests")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://reactjs.org/docs/testing-recipes.html"}),"Testing")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://kentcdodds.com/blog/testing-implementation-details"}),"Testing Implementation Details")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://kentcdodds.com/blog/why-i-never-use-shallow-rendering"}),"why-i-never-use-shallow-rendering")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://blog.sapegin.me/all/react-testing-1-best-practices/"}),"react-testing-1-best-practices"))))}c.isMDXComponent=!0},87455:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"移动端测试指北"),(0,i.kt)("p",null,"移动端测试分为以下几个环节"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"单元测试"),(0,i.kt)("li",{parentName:"ol"},"模拟真机/真机测试"),(0,i.kt)("li",{parentName:"ol"},"真机自动化测试")),(0,i.kt)("h2",null,"单元测试"),(0,i.kt)("p",null,"使用过 ",(0,i.kt)("inlineCode",{parentName:"p"},"jest")," + ",(0,i.kt)("inlineCode",{parentName:"p"},"ensyme"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"react-test-library"),", 推荐 ",(0,i.kt)("inlineCode",{parentName:"p"},"react-test-library"),"。"),(0,i.kt)("h2",null,"模拟真机/真机测试"),(0,i.kt)("h3",null,"IOS 机型"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方案一: 使用 Xcode 中的 Simulator 配合 Safari 进行模拟真机测试。")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/fcec13352f1a210d2f9718281ffca685.jpg",alt:null}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"方案二: 使用 IOS 真机配合 Safari 进行真机测试。")),(0,i.kt)("p",null,"步骤一: Mac 端配置。",(0,i.kt)("inlineCode",{parentName:"p"},"Safari -> Preferences -> Advanced -> Show Develop menu in menu bar")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/dc4029223c181baa0dd12643136894ac.jpg-400",alt:null}))),(0,i.kt)("p",null,"步骤二: IOS 真机配置(通过数据线连接到 Mac)。",(0,i.kt)("inlineCode",{parentName:"p"},"Settings -> Safari -> Advanced -> open JavaScript & open Web Inspector")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/26e848d6445e04f44dbb41a63e55567e.jpg-300",alt:null}))),(0,i.kt)("p",null,"步骤三: 在 Mac 端的 ",(0,i.kt)("inlineCode",{parentName:"p"},"Safari -> Developer")," 菜单中此时就能看到个人的设备。此时在 IOS 中的 Safari 中访问对应网页，即可在 Mac 中的 Safari 个人开发工具进行调试。"),(0,i.kt)("h4",null,"兼容性"),(0,i.kt)("p",null,"需注意低版本的 IOS 机型未支持 ES6，因此打包到线上环境的代码应该是编译成 ES5。"),(0,i.kt)("h4",null,"如何在 Simulator 中测试双指拖拽放大缩小"),(0,i.kt)("p",null,"按住 ",(0,i.kt)("inlineCode",{parentName:"p"},"shift + alt")," 按键可模拟双指拖拽放大、缩小的能力。"),(0,i.kt)("h3",null,"Android 机型"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"start up developer mode in android app;"),(0,i.kt)("li",{parentName:"ol"},"input ",(0,i.kt)("a",u({parentName:"li"},{href:"chrome://inspect"}),"url")," Chrome to test;")))}c.isMDXComponent=!0},77428:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"如果想让程序更加健壮, 那就必须让它经过更加系统/全面的测试。"),(0,i.kt)("h3",null,"ssr 测试"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"@testing-library 是不能用于在 server 端渲染的, 所以服务端渲染要用 enzyme 的 render 方法;"),(0,i.kt)("li",{parentName:"ol"},"ant-design 所有组件都会跑一份共同的",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/ant-design/ant-design/blob/a754d9f60a565acf73c05a2ce78ecb827f621366/tests/shared/demoTest.ts"}),"服务端测试文件"))))}c.isMDXComponent=!0},40810:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://fex.baidu.com/blog/2015/07/front-end-test/"}),"前端自动化测试探索"),": 介绍测试比较广泛。包括样式测试。")))}c.isMDXComponent=!0},69184:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"prettier 的使用"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"yarn add prettier -D\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"prettier")," 项目的全部文件"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),'"scripts": {\n  "format": "prettier --write \\"**/*.+(js|jsx|json|yml|yaml|css|less|scss|ts|tsx|md|mdx|graphql|vue)\\""\n},\n')),(0,i.kt)("p",null,"--list-diffetent: 列出需要 prettier 的列表"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'"format": "npm run prettier -- --write",\n"prettier": "prettier \\"**/*.+(js|jsx|json|yml|yaml|css|less|scss|ts|tsx|md|graphql|mdx)\\"",\n"validate": "npm run lint && npm run prettier -- --list-different"\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"hawsky"),": 内置大量可以配合 git 命令执行的钩子"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"lint-staged"),": 把范围缩小为操作更改的文件")))}c.isMDXComponent=!0},28919:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"名词解释"),(0,i.kt)("p",null,"在介绍 ",(0,i.kt)("inlineCode",{parentName:"p"},"Fiber")," 之前, 需要对官网中出现的以下名词有个深刻的认知。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Reconciliation"),": 调和算法, 得出 ",(0,i.kt)("inlineCode",{parentName:"li"},"Virtual Dom(针对 Web)")," 之间的差异;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Scheduling"),": 调度。",(0,i.kt)("inlineCode",{parentName:"li"},"Recct")," 通过内部的调度来安排不同优先级的任务在",(0,i.kt)("inlineCode",{parentName:"li"},"最佳时刻"),"执行(在 Reconciler 中调用);"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Render"),": 将 ",(0,i.kt)("inlineCode",{parentName:"li"},"Reconciliation")," 的结果刷新到界面上;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Fiber"),": 链表数据结构的 ",(0,i.kt)("inlineCode",{parentName:"li"},"React")," 实现(个人理解)。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"平常大家说的 'Fiber' 其实是由上面这些名词组成的架构, Fiber 真正意义上只是一个链表数据结构的 React 实现版本。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在 Fiber 的数据结构下有助于实现 concurrent 以及 error boundary, 你觉得如何实现？")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"并发这个考虑 ",(0,i.kt)("inlineCode",{parentName:"li"},"Promise.all"),"?"),(0,i.kt)("li",{parentName:"ul"},"可以通过链表锁定到具体的报错，让相应的 ",(0,i.kt)("inlineCode",{parentName:"li"},"error boundary")," 展现")),(0,i.kt)("h3",null,"Fiber"),(0,i.kt)("p",null,"fiber 架构是一个增量渲染。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"current tree => workInProgress tree => current tree\n")),(0,i.kt)("p",null,"workInProgress tree: fiber node + other node(由 virtual dom 创建)，"),(0,i.kt)("p",null,"fiber 里包含了创造节点后的",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/react/blob/b87aabdfe1b7461e7331abb3601d9e6bb27544bc/packages/shared/ReactSideEffectTags.js"}),"work"),", 比如对于组件的生命周期、对于 html 组件的增加、改、删除都属于副作用。"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/react/blob/0dc0ddc1ef5f90fe48b58f1a1ba753757961fc74/packages/react-reconciler/src/ReactFiberRoot.js#L31"}),"fiber 的根节点")),(0,i.kt)("h3",null,"Fiber Constructor"),(0,i.kt)("p",null,"如下是 ",(0,i.kt)("inlineCode",{parentName:"p"},"Fiber")," 的属性, Fiber 完整属性可参考",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/react/blob/6e4f7c788603dac7fccd227a4852c110b072fe16/packages/react-reconciler/src/ReactFiber.js#L78"}),"这里"),"，各个属性的作用是什么呢?"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"{\n  stateNode: new ClickCounter,\n  type: ClickCounter, // 组件的类型\n  alternate: null,\n  key: null,\n  updateQueue: null,\n  memoizedState: {count: 0},\n  pendingProps: {}, // 已经更新的 dom 但还未展示到页面上\n  memoizedProps: {}, // show last rendering\n  tag: 1, // Fiber 的类型\n  effectTag: 0,\n  nextEffect: null\n}\n")),(0,i.kt)("p",null,"下面是对 ",(0,i.kt)("inlineCode",{parentName:"p"},"fiber")," 对象中各属性的解释。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"type"),": 组件的类型"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"key"),": 根据 ",(0,i.kt)("inlineCode",{parentName:"li"},"key")," 字段判断该 ",(0,i.kt)("inlineCode",{parentName:"li"},"fiber")," 对象是否可以复用"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"child"),": 子链表的引用"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sibling"),": 相邻链表的引用"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"return"),": 父链表的引用"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"pendingProps"),": 和 ",(0,i.kt)("inlineCode",{parentName:"li"},"memoizedProps")," 一起使用, 若 ",(0,i.kt)("inlineCode",{parentName:"li"},"pendingProps")," 与 ",(0,i.kt)("inlineCode",{parentName:"li"},"memoizedProps")," 相等, 则可以复用上一个 fiber 相关的输出"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"memoizedProps")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"pendingWorkPriority"),": 代表优先级的数字。数字越大，优先级越低(例外 0 —— no work)。这个字段是否更改，待确认"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"alternate"),": 指向其对应的 ",(0,i.kt)("inlineCode",{parentName:"li"},"workInProgress fiber")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"effectTag"),": 副作用类型, 这个 effect 作用于 ",(0,i.kt)("inlineCode",{parentName:"li"},"commit")," 阶段(总共有 render、commit 阶段)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"nextEffect"),": 下一个副作用"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"output"),": 输出值")),(0,i.kt)("h3",null,"Render phase"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"HostRoot")," 上使用 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js#L1132"}),"renderRoot")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js#L1056"}),"performUnitOfWork")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/blob/cbbc2b6c4d0d8519145560bd8183ecde55168b12/packages/react-reconciler/src/ReactFiberBeginWork.js#L1489"}),"beginWork")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js#L879"}),"completeUnitOfWork")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/blob/cbbc2b6c4d0d8519145560bd8183ecde55168b12/packages/react-reconciler/src/ReactFiberCompleteWork.js#L532"}),"completeWork"))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"performUnitOfWork、completeUnitOfWork")," 完成遍历，主要工作发生在 ",(0,i.kt)("inlineCode",{parentName:"p"},"beginWork、completeWork")," 中。"),(0,i.kt)("h3",null,"Commit phase"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js#L2306"}),"completeRoot"),": 起始于这个方法"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js#L523"}),"commitRoot"),": Commit phase 阶段主要执行的方法, 更新 dom 以及调用 commit 阶段执行的生命周期方法。")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"找 finishedWork 可以这样找: fiber root -current property-> current tree -> host fiber -alternate-> workInProgress(finshedWork) tree")),(0,i.kt)("p",null,"commitRoot 的简单概要如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function commitRoot(root, finishedWork) {\n  commitBeforeMutationLifecycles() // getSnapShotBeforeUpdate\n  commitAllHostEffects();          // operate dom, componentWillUnmount\n  root.current = finishedWork;     // 将 finishedWork tree 置为 current tree\n  commitAllLifeCycles();           // remaining lifecycles\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"提问: 为什么称呼从 ",(0,i.kt)("inlineCode",{parentName:"li"},"diff")," 转为 ",(0,i.kt)("inlineCode",{parentName:"li"},"reconciliation"))),(0,i.kt)("h3",null,"Fiber 的三个阶段"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"开始阶段: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/react/blob/master/packages/react-reconciler/src/ReactFiberBeginWork.js"}),"ReactFiberBeginWork")),(0,i.kt)("li",{parentName:"ul"},"完成阶段: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/react/blob/master/packages/react-reconciler/src/ReactFiberCompleteWork.js"}),"ReactFiberCompleteWork")),(0,i.kt)("li",{parentName:"ul"},"提交阶段: ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/react/blob/master/packages/react-reconciler/src/ReactFiberCommitWork.js"}),"ReactFiberCommitWork"))),(0,i.kt)("h3",null,"资料推荐"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/react-in-depth/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react-e1c04700ef6e"}),"Inside Fiber: in-depth overview of the new reconciliation algorithm in React")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/acdlite/react-fiber-architecture"}),"react-fiber-architecture"))))}c.isMDXComponent=!0},41034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"React.Children.map"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Parent(props) {\n  // React.Children.map 会对第二个函数输出的值进行铺平操作\n  console.log(React.Children.map(props.children, r => [[r], r]));\n  return React.Children.map(props.children, r => [[r], r]);\n}\n\nfunction App() {\n  return (\n    <Parent>\n      <div>React.Children.map</div>\n    </Parent>\n  );\n}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://codesandbox.io/s/4r08jvpk9w"}),"React.Children.map"))),(0,i.kt)("h3",null,"React.Children.map 源码流程图"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"React.Children.map")," 的源码中有两个递归, 一个是针对 ",(0,i.kt)("inlineCode",{parentName:"p"},"React.Children")," 的递归, 另外个是针对 React.Children.map 传入的第二个参数, 如果其返回的是数组则会再次递归, 目的是对数组中的数据进行铺平。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://github.com/MuYunyun/blog/blob/master/React/image/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/React.Children.map.png",alt:null}))))}c.isMDXComponent=!0},84044:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"一些对阅读源码的文章"),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/@agent_hunt/hello-world-custom-react-renderer-9a95b7cd04bc"}),"how to write custom React Renderer"))))}c.isMDXComponent=!0},19109:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"计算公式"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const MAX_SIGNED_31_BIT_INT = Math.pow(2, 30) - 1\n\nexport const NoWork = 0;\nexport const Never = 1;\n\nconst UNIT_SIZE = 10;\nconst MAGIC_NUMBER_OFFSET = MAX_SIGNED_31_BIT_INT - 1;\n\n// 1 unit of expiration time represents 10ms.\nexport function msToExpirationTime(ms) {\n  // Always add an offset so that we don't clash with the magic number for NoWork.\n  return MAGIC_NUMBER_OFFSET - ((ms / UNIT_SIZE) | 0);\n}\n\nexport function expirationTimeToMs(expirationTime) {\n  return (MAGIC_NUMBER_OFFSET - expirationTime) * UNIT_SIZE;\n}\n\nfunction ceiling(num, precision) {\n  return (((num / precision) | 0) + 1) * precision;\n}\n\nfunction computeExpirationBucket(currentTime, expirationInMs, bucketSizeMs) {\n  return (\n    MAGIC_NUMBER_OFFSET -\n    ceiling(\n      MAGIC_NUMBER_OFFSET - currentTime + expirationInMs / UNIT_SIZE,\n      bucketSizeMs / UNIT_SIZE,\n    )\n  );\n}\n\nexport const LOW_PRIORITY_EXPIRATION = 5000;\nexport const LOW_PRIORITY_BATCH_SIZE = 250;\n\nexport function computeAsyncExpiration(currentTime) {\n  return computeExpirationBucket(\n    currentTime,\n    LOW_PRIORITY_EXPIRATION,\n    LOW_PRIORITY_BATCH_SIZE,\n  );\n}\n\nexport const HIGH_PRIORITY_EXPIRATION = __DEV__ ? 500 : 150;\nexport const HIGH_PRIORITY_BATCH_SIZE = 100;\n\nexport function computeInteractiveExpiration(currentTime) {\n  return computeExpirationBucket(\n    currentTime,\n    HIGH_PRIORITY_EXPIRATION,\n    HIGH_PRIORITY_BATCH_SIZE,\n  );\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"computeAsyncExpiration")," 函数化简后得到如下公式, 针对这个公式目前的心得如下:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"抹平传入的 ",(0,i.kt)("inlineCode",{parentName:"li"},"bucketSizeMs")," 精度误差, 为 batch 作准备;"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"currentTime")," 越大, 相应的 ",(0,i.kt)("inlineCode",{parentName:"li"},"expirationTime")," 的结果如下图所示;")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/16a5237163f1e4f2967711442ec03a4c.jpg-200",alt:null}))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const MAX_SIGNED_31_BIT_INT = Math.pow(2, 30) - 1\nconst MAGIC_NUMBER_OFFSET = MAX_SIGNED_31_BIT_INT - 1;\n\nfunction ceiling(num, precision) {\n  return (((num / precision) | 0) + 1) * precision;\n}\n\nfunction computeExpirationBucket(currentTime) {\n  return (\n    MAGIC_NUMBER_OFFSET -\n    ceiling(\n      MAGIC_NUMBER_OFFSET - currentTime + 500,\n      25,\n    )\n  );\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ceiling")," 函数的作用: 根据 ",(0,i.kt)("inlineCode",{parentName:"p"},"precision")," 的精度取值"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"ceiling(25, 25) // 50\nceiling(26, 25) // 50\nceiling(27, 25) // 50\n...\nceiling(49, 25) // 50\nceiling(50, 25) // 75\nceiling(51, 25) // 75\n")))}c.isMDXComponent=!0},80543:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"react-dom"),(0,i.kt)("p",null,"本章目的梳理 ",(0,i.kt)("inlineCode",{parentName:"p"},"react-dom")," 模块做了的事情。验证以下几件事。"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},". 创建 ",(0,i.kt)("inlineCode",{parentName:"em"},"React Root")),". 创建 ",(0,i.kt)("inlineCode",{parentName:"p"},"Fiber Root"),";"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"expiretime"),(0,i.kt)("li",{parentName:"ul"},"看到 scheduleWork 收尾"),(0,i.kt)("li",{parentName:"ul"},"update")),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://react.jokcy.me/"}),"React 源码解析")))}c.isMDXComponent=!0},61961:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"setState 是同步还是异步的?"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'class App extends React.Component {\n  state = {\n    num: 0\n  };\n\n  analyze = () => {\n    this.setState({\n      num: this.state.num + 1\n    });\n    console.log("num", this.state.num);\n    this.setState({\n      num: this.state.num + 1\n    });\n    console.log("num", this.state.num);\n    this.setState({\n      num: this.state.num + 1\n    });\n    console.log("num", this.state.num);\n  };\n\n  handleClick = () => {\n    this.analyze(); // ①\n    // setTimeout(() => { // ②\n    //   this.analyze();\n    // }, 0);\n  };\n\n  render() {\n    return <button onClick={this.handleClick}>click button</button>;\n  }\n}\n')),(0,i.kt)("p",null,"① 处代码打印结果: 0 0 0;\n② 处代码打印结果: 1 2 3;"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://codesandbox.io/s/6l98prq3nk"}),"demo 演示"))),(0,i.kt)("p",null,"为什么会出现这样的现象呢, 相关源码如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// 如果满足一定条件, 则对 setState 做批量更新\nfunction batchedUpdates(fn) {\n  const previousIsBatchingUpdates = isBatchingUpdates;\n  isBatchingUpdates = true;\n  try {\n    return fn(a); // 相当于所有 setState 都在这里执行, 相当于就是异步执行 setState 了。可见上述 demo\n  } finally {\n    isBatchingUpdates = previousIsBatchingUpdates;\n    if (!isBatchingUpdates && !isRendering) {\n      performSyncWork();\n    }\n  }\n}\n\n// setState 会进这个函数\nfunction requestWork(root, expirationTime) {\n  addRootToSchedule(root, expirationTime);\n  if (isRendering) {\n    return;\n  }\n\n  if (isBatchingUpdates) {\n    // Flush work at the end of the batch.\n    if (isUnbatchingUpdates) {\n      // ...unless we're inside unbatchedUpdates, in which case we should\n      // flush it now.\n      nextFlushedRoot = root;\n      nextFlushedExpirationTime = Sync;\n      performWorkOnRoot(root, Sync, false);\n    }\n    return;\n  }\n\n  // 如果 isBatchingUpdates 为 false 则执行这里, 相当于 setState 每次调用这里, 就是同步的了\n  if (expirationTime === Sync) {\n    performSyncWork();\n  } else {\n    scheduleCallbackWithExpirationTime(root, expirationTime);\n  }\n}\n")),(0,i.kt)("p",null,"依赖上下文中 ",(0,i.kt)("inlineCode",{parentName:"p"},"isBatchingUpdates")," 等相关布尔值, 如果 ",(0,i.kt)("inlineCode",{parentName:"p"},"isBatchingUpdates")," 为 ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," 则进行批量更新, 如果 ",(0,i.kt)("inlineCode",{parentName:"p"},"isBatchingUpdates")," 为 ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," 则进行同步更新"))}c.isMDXComponent=!0},54257:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"位运算符"),(0,i.kt)("p",null,"小数和 0 使用位运算符能得到对应的整数。这个知识点在计算 ",(0,i.kt)("inlineCode",{parentName:"p"},"expirationTime")," 中有用到。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"1.1 | 0 => 1\n")),(0,i.kt)("h3",null,"位运算在 React 的运用"),(0,i.kt)("p",null,"可以看到在 React 中存在大量对位运算声明的环境信息。比如下面摘自",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/react/blob/bf8c904110dfd4ba6870a952e3291d78136308cb/packages/react-reconciler/src/ReactTypeOfMode.js#L12-L15"}),"源码"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var NoContext = 0b000;\nvar ConcurrentMode = 0b001;\nvar StrictMode = 0b010;\nvar ProfileMode = 0b100;\n")),(0,i.kt)("p",null,"使用二进制的数字声明变量有什么好处呢? 答案是简单易用。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"判断是否是 ",(0,i.kt)("inlineCode",{parentName:"li"},"ConcurrentMode"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"NoContext & ConcurrentMode // 0\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"ConcurrentMode"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"NoContext | ConcurrentMode // 1\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"ConcurrentMode")," 以及 ",(0,i.kt)("inlineCode",{parentName:"li"},"StrictMode"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var context = NoContext | ConcurrentMode | StrictMode // 3\ncontext & ConcurrentMode // 1\ncontext & StrictMode // 2\n")),(0,i.kt)("h3",null,"相关链接"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.cn/post/6844903568906911752"}),"位运算符在 JS 中的妙用"))))}c.isMDXComponent=!0},23014:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"逆向工程思维"),(0,i.kt)("p",null,"阅读源码可以分三步走:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"观察"),(0,i.kt)("li",{parentName:"ol"},"假设"),(0,i.kt)("li",{parentName:"ol"},"验证")),(0,i.kt)("h4",null,"一些技巧"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用逆向工程思维阅读源码可以一边在本地看 ",(0,i.kt)("inlineCode",{parentName:"li"},"source")," 代码(结合 IDE 找代码更加快)，一边使用 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://reactjs.org/docs/add-react-to-a-website.html"}),"Add React to a Website")," 的方式调试 demo / 验证猜想;"),(0,i.kt)("li",{parentName:"ul"},"读源码的时候可以将零星的知识记录下来，最后合成一张思维导图;"),(0,i.kt)("li",{parentName:"ul"},"有些复杂的递归逻辑可以结合自己的原生知识在需要的位置上进行断点调试;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"debugger")," 在 ",(0,i.kt)("inlineCode",{parentName:"li"},"chrome")," 上运用 ",(0,i.kt)("inlineCode",{parentName:"li"},"decorator"),", 如下图;")),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"https://cdn-images-1.medium.com/max/1600/1*h9Uo6Su5-Y1LcVRfox4UqA.jpeg",alt:"debugger 在 chrome 上的方法"}))),(0,i.kt)("h3",null,"一些注意"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"pr 到 master 分支")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/react/issues?q=is:open+is:issue+label:%22good+first+issue%22"}),"good-first-issues")))),(0,i.kt)("h3",null,"代码库概览"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/reactjs/reactjs.org"}),"官网 repo"),"、",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/fbjs"}),"React 依赖的工具库"))),(0,i.kt)("h4",null,"根目录"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/packages"}),"packages"),": 核心模块"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/fixtures"}),"fixtures"),": 一些测试 App"),(0,i.kt)("li",{parentName:"ul"},"build: 开发者本地执行 yarn build 后生成")),(0,i.kt)("h4",null,"monorepo"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/packages/react"}),"packages/react"),": 包含 React.createElement()、React.component、React.children;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/packages/react-dom"}),"packages/react-dom"),": 浏览器端渲染;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/packages/events"}),"packages/events"),": 合成事件;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/packages/scheduler"}),"packages/scheduler"),": 调度事件;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/packages/react-native-renderer"}),"packages/react-native-renderer"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"React-Native")," 端渲染"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/packages/react-test-renderer"}),"packages/react-test-renderer"),": 用在 ",(0,i.kt)("inlineCode",{parentName:"li"},"jest")," 的 ",(0,i.kt)("inlineCode",{parentName:"li"},"Snapshot Test")," 中;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/packages/react-art"}),"packages/react-art"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"Canvas"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"SVG")," 等渲染;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/packages/react-reconciler"}),"packages/react-reconciler"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"Fiber Reconciler")," 的实现;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/tree/master/packages/shared"}),"packages/shared"),": 共享工具函数;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"最为重要的是前 4 块内容。")),(0,i.kt)("h3",null,"React 中的设计原则"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"组合。组件是可以互相组合的函数。"),(0,i.kt)("li",{parentName:"ul"},"抽象。",(0,i.kt)("inlineCode",{parentName:"li"},"React")," 只会抽象一些确实对使用者有帮助的特性(比如 ",(0,i.kt)("inlineCode",{parentName:"li"},"State、LifeCycle"),")，而不会抽象一些使用者自己可以实现的功能。",(0,i.kt)("inlineCode",{parentName:"li"},"React 团队")," 会在 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react/issues?q=is:open+is:issue+label:%22Type:+Big+Picture%22"}),"Big Picture")," 中和大家商榷这些抽象。")),(0,i.kt)("h3",null,"React 项目运行"),(0,i.kt)("h3",null,"React 16 之后的打包方式"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"16 之前是每个文件单独打包在 lib 文件夹下, ",(0,i.kt)("a",u({parentName:"li"},{href:"https://unpkg.com/react@15.6.2/lib/"}),"15.6.2")),(0,i.kt)("li",{parentName:"ul"},"16 版本只暴露两个包在 umd 文件夹下, ",(0,i.kt)("a",u({parentName:"li"},{href:"https://unpkg.com/react@16.0.0/umd/"}),"16.0.0"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"打包方式有这个转变的原因是因为之前打成多个包的形式对于打包器来说是低效的(会多出大量胶水代码)。")),(0,i.kt)("h3",null,"相关资源"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://blog.angularindepth.com/level-up-your-reverse-engineering-skills-8f910ae10630"}),"Level Up Your Reverse Engineering Skills"),": 这篇文章中介绍了逆向工程思维是什么 —— 去探究新知识点，并为之兴奋;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://medium.com/react-in-depth/practical-application-of-reverse-engineering-guidelines-and-principles-784c004bb657"}),"Practical application of reverse-engineering guidelines and principles"),": 结合 React 介绍逆向工程思维;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://reactjs.org/docs/how-to-contribute.html"}),"How to Contribute")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://react.docschina.org/blog/2017/12/15/improving-the-repository-infrastructure.html"}),"Repository Infrastructure"))))}c.isMDXComponent=!0},89689:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://leetcode-cn.com/articles/%E9%98%BB%E7%A2%8D%E4%BD%A0%E4%BD%BF%E7%94%A8-graphql-%E7%9A%84%E5%8D%81%E4%B8%AA%E9%97%AE%E9%A2%98/"}),"阻碍你使用 GraphQL 的十个问题"))))}c.isMDXComponent=!0},48871:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/react-dnd/react-dnd"}),"React-Dnd")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"http://www.phperz.com/article/16/0115/183290.html"}),"React-DnD 使用"))))}c.isMDXComponent=!0},29979:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"来看为什么有如下 api:"),(0,i.kt)("h3",null,"call/put"),(0,i.kt)("p",null,"本质目的是让测试用例不必再发起多一次函数调用, 取而代之转为比较对象是否相同。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"call")," 替代使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"fetch")),(0,i.kt)("li",{parentName:"ul"},"使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"put")," 替代使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"dispatch{action}"))),(0,i.kt)("h3",null,"fork"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"使用 ",(0,i.kt)("inlineCode",{parentName:"li"},"fork"),": 模拟多个线程")),(0,i.kt)("h3",null,"redux-saga 相较于 redux-thunk 的一些优点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"对测试用例较为友好(比较函数和传入参数)"),(0,i.kt)("li",{parentName:"ul"},"对异步操作流程的操作颗粒度更加细")))}c.isMDXComponent=!0},57197:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Redux 的简易实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function createStore(reducer, initialState) {\n  let state = initialState\n  const eventList = []\n\n  function getState() {\n    return state\n  }\n\n  function dispatch(action) {\n    state = reducer(state, action)\n    eventList.map(r => r(state))\n  }\n\n  function subscribe(event) {\n    eventList.push(event)\n  }\n\n  return {\n    getState,\n    subscribe,\n    dispatch,\n  }\n}\n")),(0,i.kt)("p",null,"测试用例"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"const reducer = function(state, action) {\n  switch (action.type) {\n    case 'update':\n      return action.payload\n      break\n    case 'update1':\n      return {\n        ...state,\n        a: action.payload,\n      }\n      break\n    default:\n      return state\n  }\n}\n\nconst store = createStore(reducer, {a: 1, b: 2})\n\nstore.subscribe((state) => { console.log(state) })\n\nstore.dispatch({ type: 'update', payload: { a: 1, b: 2 }}) // { a: 1, b: 2 }\nstore.dispatch({ type: 'update1', payload: 3 }) // { a: 3, b: 2 }\nconsole.log(store.getState()) // { a: 3, b: 2 }\n")),(0,i.kt)("h3",null,"Redux 与 Mobx 适用场景"),(0,i.kt)("h4",null,"redux"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"store - view - action 的闭环"),(0,i.kt)("li",{parentName:"ul"},"Redux 颗粒度更细, 相对更安全")),(0,i.kt)("h4",null,"mobx"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"store - view 的闭环"),(0,i.kt)("li",{parentName:"ul"},"使用了类双向绑定的思维")))}c.isMDXComponent=!0},81903:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"dva"),(0,i.kt)("p",null,"看看 ",(0,i.kt)("inlineCode",{parentName:"p"},"dva")," 需要实现哪些部分。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"dva-cli: 搭建项目脚手架"),(0,i.kt)("li",{parentName:"ul"},"roadhog: 就是对 ",(0,i.kt)("inlineCode",{parentName:"li"},"webpack")," 的封装"),(0,i.kt)("li",{parentName:"ul"},"dva: 对 ",(0,i.kt)("inlineCode",{parentName:"li"},"react"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"redux"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"redux-saga")," 的封装"),(0,i.kt)("li",{parentName:"ul"},"umi: 工具 + 路由, 和 ",(0,i.kt)("inlineCode",{parentName:"li"},"roadhog")," 有一定重叠, 解放 dva 让其做数据流的工作")),(0,i.kt)("h4",null,"use"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/demos-platform/dva"}),"分析 dva 的工程演进")))}c.isMDXComponent=!0},55009:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Relay"),(0,i.kt)("p",null,"It's not just a ",(0,i.kt)("inlineCode",{parentName:"p"},"GraghQL client")," but also a framework for ",(0,i.kt)("inlineCode",{parentName:"p"},"declarative data-fetching"),"."),(0,i.kt)("h3",null,"Fetching Data"),(0,i.kt)("p",null,"Using REST API:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'// Fetch the list of story IDs but not their details:\nrest.get(\'/stories\').then(stories =>\n  // This resolves to a list of items with linked resources:\n  // `[ { href: "http://.../story/1" }, ... ]`\n  Promise.all(stories.map(story =>\n    rest.get(story.href) // Follow the links\n  ))\n).then(stories => {\n  // This resolves to a list of story items:\n  // `[ { id: "...", text: "..." } ]`\n  console.log(stories);\n});\n')),(0,i.kt)("p",null,"请求接口次数为 ",(0,i.kt)("inlineCode",{parentName:"p"},"n + 1"),";"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'graphql.get(`query { stories { id, text } }`).then(\n  stories => {\n    // A list of story items:\n    // `[ { id: "...", text: "..." } ]`\n    console.log(stories);\n  }\n);\n')),(0,i.kt)("h3",null,"links"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://relay.dev/docs/en/experimental/step-by-step"}),"Relay document"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://relay.dev/docs/en/experimental/step-by-step"}),"step-by-step"),": done"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://relay.dev/docs/en/thinking-in-graphql"}),"Thinking in GraghQL"),": to read"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://relay.dev/docs/en/thinking-in-relay"}),"Thinking in Relay"),": to read"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/relayjs/relay-examples/tree/master/issue-tracker"}),"relay-examples")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/gaearon/suspense-experimental-github-demo"}),"suspense-experimental"))))}c.isMDXComponent=!0},34101:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"router 的简易实现"),(0,i.kt)("h3",null,"基于 hash 的实现"),(0,i.kt)("p",null,"以下为 ",(0,i.kt)("inlineCode",{parentName:"p"},"hashChange")," 的简版实现"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Router {\n  constructor() {\n    this.router = {}\n    window.addEventListener('hashchange', (e) => {\n      const tag = location.hash.slice(1)\n      this.router[tag] && this.router[tag]()\n    })\n  }\n\n  route(path, fn) {\n    this.router[path] = fn\n  }\n}\n\nconst router = new Router()\nconst changeColor = (color) => {\n  document.body.style.background = color\n}\nrouter.route('red', () => { changeColor('red') })\nrouter.route('yellow', () => { changeColor('yellow') })\nrouter.route('blue', () => { changeColor('blue') })\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<ul>\n  <a href="#red">red</a>\n  <a href="#yellow">yellow</a>\n  <a href="#blue">blue</a>\n</ul>\n')),(0,i.kt)("h3",null,"基于 history 的实现"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"以下代码需要运行在 http 端口。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class Router {\n  constructor() {\n    this.router = {}\n    window.addEventListener('popstate', (e) => {\n      const path = e.state.path\n      this.router[path] && this.router[path]()\n    })\n  }\n\n  route(path, fn) {\n    this.router[path] = fn\n  }\n\n  go(path) {\n    history.pushState({ path: path }, null, path) // 核心思路, pushState 进去的第一个对象会在点击回退/前进按钮时触发 popstate\n    this.router[path] && this.router[path]()\n  }\n}\n\nconst router = new Router()\nconst changeColor = (color) => {\n  document.body.style.background = color\n}\nrouter.route('red', () => { changeColor('red') })\nrouter.route('yellow', () => { changeColor('yellow') })\nrouter.route('blue', () => { changeColor('blue') })\ndocument.getElementsByTagName('ul')[0].addEventListener('click', (e) => {\n  router.go(e.target.innerText)\n})\n")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-html"}),'<ul>\n  <li href="red">red</li>\n  <li href="yellow">yellow</li>\n  <li href="blue">blue</li>\n</ul>\n')),(0,i.kt)("h3",null,"路由的监听"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"hash 路由")),(0,i.kt)("p",null,"window.addEventListener('hashchange')"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"history 路由")),(0,i.kt)("h3",null,"参考"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://juejin.im/post/5ac61da66fb9a028c71eae1b"}),"面试官: 你了解前端路由吗?")))}c.isMDXComponent=!0},80165:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"疑问"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在知乎上提了个 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.zhihu.com/question/297323663"}),"使用 immutable.js 后有什么优势？"))),(0,i.kt)("h3",null,"自答"),(0,i.kt)("p",null,"假如要更新 4, immutable.js 只在绿色这条线做了特殊处理, 其它紫色的部分保持不变。相当于是优化了深拷贝的实现, 数据结构方面可以想象成链表, 因此在深拷贝的时候没有递归那么耗费性能, 同时也更利于数据的获取。"),(0,i.kt)("p",null,"因为最顶部的对象变化了, React 就提前知道需要重新渲染了(可以弥补 PureComponent 只作浅比较的不足)。不过 Updated tree 里的每一个节点还是会重新 diff 的, 不过在数据前后比较的这个层面上讲, immutable.js 的效率确实会高一些。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/aeef08a94abebda30e9a5fa68e201fa8.jpg",alt:null}))),(0,i.kt)("p",null,"另外, 使用 immutable.js 的话需要将所有的 state,props 都转化成其定义的形式。成本还是有的。"))}c.isMDXComponent=!0},42279:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"@tarojs/components"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import { View, Text, Navigator, Image } from '@tarojs/components'\n")),(0,i.kt)("p",null,"块级元素     -> View\n行内元素     -> Text\nimg         -> Image\n跳转不同页面 -> Navigator"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"在小程序端，React/Nerv 指向 mini/index.js，Vue 无需使用此包。"),(0,i.kt)("li",{parentName:"ul"},"在 H5 端，React/Nerv 指向 h5/react/index.js，Vue 指向 h5/vue/index.js。H5 端使用 stencil 把组件编译为 Web Components 以提供跨框架调用。")),(0,i.kt)("p",null,"原则: 在满足 B 端移动视觉规范的基础上, 优先将 beast-mobile 组件迁移成小程序组件,"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"跨平台开发"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"通过内置环境变量来解决"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://taro-docs.jd.com/taro/docs/components/viewContainer/view"}),"View"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://taro-docs.jd.com/taro/docs/components/base/text"}),"Text"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html"}),"swiper"),", ",(0,i.kt)("a",u({parentName:"p"},{href:"https://taro-docs.jd.com/taro/docs/components/viewContainer/swiper"}),"swiper in taro"),": 考虑可用")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.weixin.qq.com/miniprogram/dev/component/progress.html"}),"progress"),": 考虑可用")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.weixin.qq.com/miniprogram/dev/component/button.html"}),"button"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.weixin.qq.com/miniprogram/dev/component/checkbox.html"}),"checkbox"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.weixin.qq.com/miniprogram/dev/component/input.html"}),"input"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://developers.weixin.qq.com/miniprogram/dev/component/switch.html"}),"switch")))),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://mp.weixin.qq.com/s?__biz=MzU3NDkzMTI3MA==&mid=2247483770&idx=1&sn=ba2cdea5256e1c4e7bb513aa4c837834"}),"小程序跨框架开发的探索与实践")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://taro-docs.jd.com/taro/docs/guide/"}),"入门教程"))))}c.isMDXComponent=!0},28440:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"文档"),(0,i.kt)("p",null,"比如 textArea 组件距离需要看两份文档。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"http://taro-docs.jd.com/taro/docs/components/forms/textarea.html"}),"taro textArea")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://developers.weixin.qq.com/miniprogram/dev/component/textarea.html"}),"微信小程序文档 textArea"))),(0,i.kt)("h3",null,"关于 textArea 的坑点"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"原生的组件永远的层级永远大于非原生组件的层级"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",u({parentName:"li"},{href:"https://segmentfault.com/a/1190000017086890"}),"textArea 在 iphone 手机中存在内边距"))),(0,i.kt)("p",null,"目前一种方案是对 textArea 组件进行了相应封装, 展示的时候显示为自定义组件, 输入的时候使用原生 textArea."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"basicTextArea.js")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import Taro, { Component } from '@tarojs/taro'\nimport { Textarea, View } from '@tarojs/components'\nimport cx from 'classnames'\nimport './index.scss'\n\ninterface BasicTextAreaProps {\n  onChange: (...arg) => void\n  onFocus: (...arg) => void\n  onBlur: (...arg) => void\n  placeholder?: string\n  maxlength?: number\n  value: string\n  focus: boolean\n}\n\nconst noop = () => {}\n\nexport default class BasicTextArea extends Component<BasicTextAreaProps, any> {\n  static defaultProps: BasicTextAreaProps = {\n    onChange: noop,\n    onFocus: noop,\n    onBlur: noop,\n    placeholder: '',\n    maxlength: -1,\n    value: '',\n    focus: false\n  }\n\n  handleInput = (...arg) => this.props.onChange(...arg)\n\n  handleFocus = (...arg) => this.props.onFocus(...arg)\n\n  handleBlur = (...arg) => this.props.onBlur(...arg)\n\n  render() {\n    const { platform } = Taro.getSystemInfoSync()\n    const { value, focus, placeholder, maxlength } = this.props\n    return (\n      <View\n        className={cx({\n          textarea_ios: platform === 'ios',\n          'textarea_android-placeholder': platform === 'android' && !value\n        })}\n      >\n        <Textarea\n          className={cx('textarea_text')}\n          value={value}\n          onInput={this.handleInput}\n          focus={focus}\n          onBlur={this.handleBlur}\n          placeholder={placeholder}\n          maxlength={maxlength}\n        />\n      </View>\n    )\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"textArea.ts"),", 切换相应组件的代码主要在这里进行处理。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"import Taro, { Component } from '@tarojs/taro'\nimport { View, Text, ScrollView } from '@tarojs/components'\nimport cx from 'classnames'\nimport BasicTextArea from './basicTextArea'\nimport './index.scss'\n\ninterface TextAreaProps {\n  placeholder?: string\n  maxlength?: number\n  onChange: (e: {detail: {value: string}}) => void\n  value: string\n}\n\nexport default class TextArea extends Component<TextAreaProps, any> {\n  static defaultProps: Pick<TextAreaProps, 'placeholder' | 'maxlength'> = {\n    placeholder: '',\n    maxlength: -1,\n  }\n\n  state = {\n    isFocus: false,\n  }\n\n  handleChange(e) {\n    const { onChange } = this.props\n    onChange(e)\n  }\n\n  // 处理原生 textArea 失焦/聚焦\n  bindTextareaHandle(type: string) {\n    if (type == 'blur') {\n      this.setState({\n        isFocus: false,\n      })\n    } else if (type == 'focus') {\n      this.setState({\n        isFocus: true,\n      })\n    }\n  }\n\n  render() {\n    const { isFocus } = this.state\n    const { placeholder, maxlength, value } = this.props\n    const { platform } = Taro.getSystemInfoSync()\n    return (\n      <View>\n        {this.state.isFocus ?\n          <View className='textarea_content'>\n            <BasicTextArea\n              value={value}\n              onChange={this.handleChange.bind(this)}\n              focus={isFocus}\n              onBlur={this.bindTextareaHandle.bind(this, 'blur')}\n              maxlength={maxlength}\n              placeholder={placeholder}\n            />\n          </View> :\n          <View\n            onClick={this.bindTextareaHandle.bind(this, 'focus')}\n          >\n            <ScrollView\n              scrollY={true}\n              className={'textarea_content'}\n            >\n              <Text className={cx('textarea_text', {\n                'textarea_text-placeholder': !value,\n                'textarea_text-ios': platform === 'ios',\n              })}>{value ? value : placeholder}</Text>\n            </ScrollView>\n          </View>\n        }\n      </View>\n    )\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"index.scss")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-css"}),".textarea_content {\n  width: 100%;\n  height: 192px;\n  padding-top: 24px;\n  padding-bottom: 24px;\n  font-size: 32px;\n  line-height: 48px;\n  border-radius: 16px;\n  background-color: #FFF;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  position: relative;\n}\n\n.textarea_text {\n  word-break: break-all;\n  width: 100%;\n  font-size: 32px;\n  line-height: 48px;\n  -webkit-appearance: none;\n  height: 144px;\n  overflow: scroll;\n\n  &-placeholder {\n    color: #999;\n    /* 模拟光标占位 */\n    padding-left: 2px;\n  }\n\n  &-ios {\n    /* 尽可能模拟原生 textArea 的字间距 */\n    letter-spacing: 0.1px;\n  }\n}\n\n/*微信原生 textarea placeholder 颜色, 误删 */\n.textarea-placeholder {\n  color: #999;\n  font-size: 32px;\n}\n\n/* 修复 ios 下有 padding 的问题 */\n.textarea_ios {\n  margin-top: -12px;\n  margin-left: -8px;\n}\n\n/* 安卓手机上的 placeholder 会偏上, 但是目前这解法会有一个影响用户的动画 */\n.textarea_android-placeholder {\n  margin-top: 8px;\n}\n")))}c.isMDXComponent=!0},98350:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Mini Program"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"微信开发者工具使用 ",(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/nwjs/nw.js"}),"NW.js")," 编写")),(0,i.kt)("h3",null,"跨段小程序"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/Tencent/wepy"}),"wepy")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/Meituan-Dianping/mpvue"}),"mpvue")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/NervJS/taro"}),"taro"))))}c.isMDXComponent=!0},13530:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"基于 create-react-app 的改动"),(0,i.kt)("p",null,"基于 ",(0,i.kt)("inlineCode",{parentName:"p"},"create-react-app")," fork 的脚手架有以下两点好处:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"facebook")," 团队帮忙更新迭代新技术"),(0,i.kt)("li",{parentName:"ul"},"自定义模板/脚本抽离出来后从而在其它项目能进行复用")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"fork")," 的项目需要定期和 ",(0,i.kt)("inlineCode",{parentName:"p"},"create-react-app")," 保持同步, 上次同步时间: ",(0,i.kt)("inlineCode",{parentName:"p"},"2019-02-16"))),(0,i.kt)("h3",null,"使用自定义模板/脚本创建项目"),(0,i.kt)("p",null,"只需要维护 ",(0,i.kt)("inlineCode",{parentName:"p"},"packages/scripts")," 的文件就行。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"更改 ",(0,i.kt)("inlineCode",{parentName:"li"},"packages/scripts")," 目录下的 ",(0,i.kt)("inlineCode",{parentName:"li"},"package.json")," 的各种配置信息, 比如将 ",(0,i.kt)("inlineCode",{parentName:"li"},"react-script")," 里的 ",(0,i.kt)("inlineCode",{parentName:"li"},"name")," 更名为 ",(0,i.kt)("inlineCode",{parentName:"li"},"react-siren-scripts"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"react-scripts/scripts/init.js")," 添加 ",(0,i.kt)("inlineCode",{parentName:"li"},"console.log()"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"react-scripts/template"),": 修改模板文件;")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{}),"npx create-react-app my-app --scripts-version react-siren-scripts\n")),(0,i.kt)("p",null,"目前其集成了 ",(0,i.kt)("inlineCode",{parentName:"p"},"scss")),(0,i.kt)("h3",null,"参考文章"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://auth0.com/blog/how-to-configure-create-react-app/"}),"Customizing create-react-app: How to Make Your Own Template"))))}c.isMDXComponent=!0},31689:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"富文本编辑器的层级"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"L0"),(0,i.kt)("li",{parentName:"ul"},"L1: 兼容性层面的优化, 自行实现 undo/redo 栈;"),(0,i.kt)("li",{parentName:"ul"},"L2: 移动端/国际化适配;")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"一个好的框架设计: 尽量少的提前做的假设限制!")),(0,i.kt)("h4",null,"L0"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"给元素上加上 ",(0,i.kt)("inlineCode",{parentName:"li"},"contenteditable")," 属性"),(0,i.kt)("li",{parentName:"ol"},"给选中元素执行 ",(0,i.kt)("inlineCode",{parentName:"li"},"document.execCommand()"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"另外一种方法是内嵌 iframe, 并将其 designmode 属性设置为 true。(有跨域问题, 日后填坑)")),(0,i.kt)("h3",null,"Slate 框架"),(0,i.kt)("h3",null,"调试"),(0,i.kt)("p",null,"可以使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"editor.value.toJSON()")," 打印 tree 结构, 便于调试;"),(0,i.kt)("h3",null,"slate 设计模式"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"兜底原则",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"normalizeNode"),", 除指定节点外都走该 normalize 机制;")))),(0,i.kt)("h3",null,"有序列表的设计"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"小圆点 + 数字作为一个结构;"),(0,i.kt)("li",{parentName:"ol"},"点击有序列表, 当前节点的同级兄弟节点都会变为有序列表;"),(0,i.kt)("li",{parentName:"ol"},"点击可以取消有序列表;"),(0,i.kt)("li",{parentName:"ol"},"当在有序列表的节点建立兄弟节点或子节点时, 自动设置为有序列表;"),(0,i.kt)("li",{parentName:"ol"},"子节点规则 1 —— 1.1 —— 1.1.1 —— 1.1.1.1;"),(0,i.kt)("li",{parentName:"ol"},"当把某个子节点从有序节点变为无序节点时, 该节点的兄弟节点也变为无序; 该节点的子节点从 1 开始计数;"),(0,i.kt)("li",{parentName:"ol"},"原则: 兄弟节点必须都为有序或无序, 子节点可以无序也可以有序;")),(0,i.kt)("p",null,"结论:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"因此对 selection 是不敏感的, 即操作一个都会同时对同层级所有节点生效;")),(0,i.kt)("h3",null,"slate 开发坑点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"一种方式开发完之后, 在某些情况下是不满足的, 因此需要返工。",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"example: 输入 @、# 进行筛选最初是使用 set 方式实现的, 一开始这样设计是没问题的, 但是考虑未来在多人协作过程中会造成一份数据的互相影响, 因此将其重构调整为将筛选的数据绕开 set 的方式, 取而代之的是外面传递进来。")))),(0,i.kt)("h3",null,"small tip"),(0,i.kt)("p",null,"small tip in slate editor"),(0,i.kt)("p",null,"When input b after a in page #slate #editor."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"console.log(editor.value.texts.get(0))   //  'a';\n\nrequestAnimationFrame(() => {\n  console.log(editor.value.texts.get(0)) // 'ab'\n})\n")),(0,i.kt)("h3",null,"Web Excel"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Google Sheets"),(0,i.kt)("li",{parentName:"ul"},"Office 365"),(0,i.kt)("li",{parentName:"ul"},"WPS Web"),(0,i.kt)("li",{parentName:"ul"},"钉钉表格",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"可扩展的表格",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"棋盘模型",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Range 模型"))))),(0,i.kt)("li",{parentName:"ul"},"协同的表格",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"名词",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"cp(Check Point): 全量表格数据"),(0,i.kt)("li",{parentName:"ul"},"op(Operation): 单次操作的表达"))),(0,i.kt)("li",{parentName:"ul"},"OT(Operation Transform) 是协同算法的关键。"),(0,i.kt)("li",{parentName:"ul"},"上限更高的 COT 调度算法要求 OT 同时运行在服务端与客户端"),(0,i.kt)("li",{parentName:"ul"},"Rust + WASM 实现 OT, 已验证最小闭环"))),(0,i.kt)("li",{parentName:"ul"},"高性能的表格",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"选择 canvas 渲染表格主界面, 不用 DOM 的原因是浪费在 DOM Pipeline 的开销很大"),(0,i.kt)("li",{parentName:"ul"},"分层渲染管线"),(0,i.kt)("li",{parentName:"ul"},"双缓冲画布, 支持流畅的滚动"),(0,i.kt)("li",{parentName:"ul"},"自研排版引擎")))))),(0,i.kt)("h3",null,"协同编辑"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/ether/etherpad-lite"}),"etherpad-lite")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"基于 OT 开发的从底层支持协同编辑的框架。"),(0,i.kt)("li",{parentName:"ul"},"代表: 飞书、石墨"),(0,i.kt)("li",{parentName:"ul"},"问题: 十年前代码、技术栈陈旧"),(0,i.kt)("li",{parentName:"ul"},"核心方法:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"apply"),(0,i.kt)("li",{parentName:"ul"},"compose"),(0,i.kt)("li",{parentName:"ul"},"follow: 解决两个 changeset 冲突问题"),(0,i.kt)("li",{parentName:"ul"},"inverse: 反操作, undo"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Changeset"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"代表对文档的一次修改"),(0,i.kt)("li",{parentName:"ul"},"eg: Z:4>1=1*0+1$2",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Z: 代表是一个 Changeset"),(0,i.kt)("li",{parentName:"ul"},"4>1: 源文档 4 个字符长度, 本次修改增加一个字符"),(0,i.kt)("li",{parentName:"ul"},"=1: 跳过第一个字符"),(0,i.kt)("li",{parentName:"ul"},"*0+1: 插入一个字符, 并且带上属性 0"),(0,i.kt)("li",{parentName:"ul"},"$2: 插入的具体字符"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/marcelklehr/changesets"}),"Changeset Iterator"),", 解析上述 Changeset 的库"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"渲染流程"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"内联属性"),(0,i.kt)("li",{parentName:"ul"},"行属性: 标题"),(0,i.kt)("li",{parentName:"ul"},"块属性: 图片"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"问题一: follow 为什么要对 A 与 B 都要处理, 可否只对一处进行处理?")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"问题二: etherpad-lite 服务端与客户端协同的处理? (要有一个 master)"),(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"服务端设置为 true"),(0,i.kt)("li",{parentName:"ol"},"客户端设置为 false"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"问题三:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"弱网情况下, 如何优化协同问题? (比如输入拼音, 被截断, 无法删除)")))),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/90931631"}),"编辑器初体验"))))}c.isMDXComponent=!0},96725:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://aweary.dev/fault-tolerance-react/"}),"错误处理值得阅读"))))}c.isMDXComponent=!0},10491:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"使用 declare 声明"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/advanced-typescript#%E4%BD%BF%E7%94%A8-declare-%E5%A3%B0%E6%98%8E"}),"使用 declare 声明")),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/by-example.html"}),"Declaration Reference"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"介绍了 declare 语法。"))),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/library-structures.html"}),"Library Structure")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html"}),"Do's and Don'ts"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"TypeScript 中一些写法的最佳实践。"))),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/deep-dive.html"}),"Deep Dive")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html"}),"Publishing")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/consumption.html"}),"Consumption"))))}c.isMDXComponent=!0},52257:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Merge Interface"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'interface Document {\n  createElement(tagName: any): Element;\n}\ninterface Document {\n  createElement(tagName: "div"): HTMLDivElement;\n  createElement(tagName: "span"): HTMLSpanElement;\n}\ninterface Document {\n  createElement(tagName: string): HTMLElement;\n  createElement(tagName: "canvas"): HTMLCanvasElement;\n}\n')),(0,i.kt)("p",null,"在 TypeScript 中，上述三个 Document 接口此时会发生合并，因此在实际使用中，也需要合并使用三个 Document 的参数与结果。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"var obj: Document = {\n  createElement: function (tagName: 'div' | 'span' | 'canvas') {\n    return {} as any\n  }\n}\n")),(0,i.kt)("p",null,"TypeScript 此时会根据传参自动帮助我们推导出结果的类型。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"var result1 = obj.createElement('div')  // HTMLDivElement\nvar result2 = obj.createElement('span') // HTMLSpanElement\n")),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/declaration-merging.html"}),"Declaration Merging"))))}c.isMDXComponent=!0},43148:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"TypeScript 中使用函数"),(0,i.kt)("h3",null,"Call Signatures"),(0,i.kt)("p",null,"如果我们期望根据属性类型动态选取函数调用，可以书写如下:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'type DescribableFunction = {\n  description: string;\n  (someArg: number): boolean;\n};\nfunction doSomething(fn: DescribableFunction) {\n  console.log(fn.description + " returned " + fn(6));\n}\n')),(0,i.kt)("p",null,"在这里，",(0,i.kt)("inlineCode",{parentName:"p"},"fn(6)")," 中传入了数字 6，因而其命中了对象中 ",(0,i.kt)("inlineCode",{parentName:"p"},"(someArg: number): boolean;")," 该条规则。"),(0,i.kt)("h3",null,"在函数中使用泛型应该注意的点"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"尽可能地直接使用参数类型，而不要去约束它。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"function firstElement1<Type>(arr: Type[]) {\n  return arr[0];\n}\n\nfunction firstElement2<Type extends any[]>(arr: Type) {\n  return arr[0];\n}\n\n// ✅ a: number\nconst a = firstElement1([1, 2, 3]);\n// ❎ b: any\nconst b = firstElement2([1, 2, 3]);\n")),(0,i.kt)("p",null,"粗看 firstElement1 与 firstElement2 似乎达到一样的效果，但是结果上 a 的类型是 number，b 的类型是 any。这是因为 TypeScript 必须使用约束类型解析 arr","[0]"," 表达式，而非在调用期间“等待”解析元素。"),(0,i.kt)("h3",null,"不要在 CallBacks 中使用可选参数表达式"),(0,i.kt)("p",null,"在以下代码中，在定义侧对回调函数中的参数作了可选表达式的声明，且在定义侧调用的 callback 函数未传入可选参数，因此在消费者调用可选参数值时报了错误。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"// ❎ 定义侧错误示范\nfunction myForEach(arr: any[], callback: (arg: any, index?: number) => void) {\n  for (let i = 0; i < arr.length; i++) {\n    callback(arr[i])\n  }\n}\n\n// 消费侧\nmyForEach([1, 2, 3], (a, i) => {\n  // Object is possibly 'undefined'.\n  console.log(i.toFixed())\n})\n")),(0,i.kt)("p",null,"与之对应的，若需要在回调函数中定义参数的类型，尽量不使用可选参数表达式，除非消费该函数时能保证处理好可选参数。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"// ✅ 定义侧正确示范\nfunction myForEach(arr: any[], callback: (arg: any, index: number) => void) {\n  for (let i = 0; i < arr.length; i++) {\n    callback(arr[i], i)\n  }\n}\n\n// 消费侧\nmyForEach([1, 2, 3], (a, i) => {\n  console.log(i.toFixed())\n})\n")),(0,i.kt)("h3",null,"函数重载"),(0,i.kt)("p",null,"函数实现侧必须与定义重载侧对应。"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"例子一: 参数类型不正确")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"// 定义侧\nfunction fn(x: boolean): void;\nfunction fn(x: string): void;\n\n// 实现侧\nfunction fn(x: boolean) { }          // ❎\nfunction fn(x: boolean | string) { } // ✅\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"例子二: 返回结果不正确")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"// 定义侧\nfunction fn(x: string): string;\nfunction fn(x: number): boolean;\n\n// 实现侧\n// ❎\nfunction fn(x: string | number) {\n  return \"oops\"\n}\n\n// ✅\nfunction fn(x: string | number): string | boolean {\n  if (typeof x === 'string') {\n    return 'hhh'\n  } else if (typeof x === 'number') {\n    return true\n  }\n}\n")),(0,i.kt)("h3",null,"剩余参数"),(0,i.kt)("p",null,"在 TypeScript 中，数组被认为是可变的，因而会导致一些奇怪的问题。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"const args = [8, 5]\n// ❎ A spread argument must either have a tuple type or be passed to a rest parameter.\nconst angle = Math.atan2(...args)\n")),(0,i.kt)("p",null,"此时，通常最为直接的解决方式是使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"const")," 来约束目标为不可变对象。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"Readonly")," 与 ",(0,i.kt)("inlineCode",{parentName:"p"},"Const")," 都有不可让值修改的作用。区别在于 Readonly 作用于属性, Const 作用于变量。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"const args = [8, 5] as const\nconst angle = Math.atan2(...args)\n")),(0,i.kt)("h3",null,"link"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/2/functions.html"}),"More on Functions")))}c.isMDXComponent=!0},78312:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"TypeScript 并不是一个完全新的语言, 它是 JavaScript 的超集，为 JavaScript 的生态增加了类型机制，并最终将代码编译为纯粹的 JavaScript 代码。"),(0,i.kt)("h2",null,"TypeScript 简介"),(0,i.kt)("p",null,"TypeScript 由 Microsoft(算上 Angular 2 的话加上 Google)开发和维护的一种开源编程语言。 它支持 JavaScript 的所有语法和语义，同时通过作为 ECMAScript 的超集来提供一些额外的功能，如类型检测和更丰富的语法。下图显示了 TypeScript 与 ES5，ES2015，ES2016 之间的关系。"),(0,i.kt)("p",null,(0,i.kt)("img",u({parentName:"p"},{src:"http://with.muyunyun.cn/da62039bf146c2ebd615ef1d11a1a808.jpg",alt:null}))),(0,i.kt)("h2",null,"使用 TypeScript 的原因"),(0,i.kt)("p",null,"JavaScript 是一门弱类型语言，变量的数据类型具有动态性，只有执行时才能确定变量的类型，这种后知后觉的认错方法会让开发者成为调试大师，但无益于编程能力的提升，还会降低开发效率。TypeScript 的类型机制可以有效杜绝由变量类型引起的误用问题，而且开发者可以控制对类型的监控程度，是严格限制变量类型还是宽松限制变量类型，都取决于开发者的开发需求。添加类型机制之后，副作用主要有两个：增大了开发人员的学习曲线，增加了设定类型的开发时间。总体而言，这些付出相对于代码的健壮性和可维护性，都是值得的。"),(0,i.kt)("p",null,"此外，类型注释是 TypeScript 的内置功能之一，允许文本编辑器和 IDE 可以对我们的代码执行更好的静态分析。这意味着我们可以通过自动编译工具的帮助，在编写代码时减少错误，从而提高我们的生产力。"),(0,i.kt)("p",null,"对 TypeScript 的简介到此，接下来对其特有的知识点进行简单概括总结。"),(0,i.kt)("h2",null,"数据类型"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/MuYunyun/blog/blob/main/TypeScript/Types.md"}),"数据类型"))),(0,i.kt)("h2",null,"函数"),(0,i.kt)("h3",null,"为函数定义类型"),(0,i.kt)("p",null,"我们可以给每个参数添加类型之后再为函数本身添加返回值类型。TypeScript 能够根据返回语句自动推断出返回值类型，因此我们通常省略它。下面函数 add, add2, add3 的效果是一样的，其中是 add3 函数是函数完整类型。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'function add(x: string, y: string): string{\n  return "Hello TypeScript"\n}\n\nlet add2 = function(x: string, y: string): string{\n  return "Hello TypeScript"\n}\n\nlet add3: (x: string, y: string) => string = function(x: string, y: string): string{\n  return "Hello TypeScript"\n}\n')),(0,i.kt)("h3",null,"可选参数和默认参数"),(0,i.kt)("p",null,"JavaScript 里，每个参数都是可选的，可传可不传。没传参的时候，它的值就是 undefined。 在 TypeScript 里我们可以在参数名旁使用 ? 实现可选参数的功能。 比如，我们想让 lastname 是可选的:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'function buildName(firstName: string, lastname?: string){\n  console.log(lastname ? firstName + "" + lastname : firstName)\n}\n\nlet res1 = buildName("鸣","人")        // 鸣人\nlet res2 = buildName("鸣")             // 鸣\nlet res3 = buildName("鸣", "人", "君") // Supplied parameters do not match any signature of call target.\n')),(0,i.kt)("p",null,"如果带默认值的参数出现在必须参数前面，用户必须明确的传入 undefined 值来获得默认值。 例如，我们重写上例子，让 firstName 是带默认值的参数："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'function buildName2(firstName = "鸣", lastName?: string){\n  console.log(firstName + "" + lastName)\n}\n\nlet res4 = buildName2("人")            // 人\nlet res5 = buildName2(undefined, "人") // 鸣人\n')),(0,i.kt)("h2",null,"类"),(0,i.kt)("p",null,"传统的 JavaScript 程序使用函数和基于原型的继承来创建可重用的组件，但对于熟悉使用面向对象方式的程序员来讲就有些棘手，因为他们用的是基于类的继承并且对象是由类构建出来的。 从 ECMAScript 2015，也就是 ECMAScript 6 开始，JavaScript 程序员将能够使用基于类的面向对象的方式。 使用 TypeScript，我们允许开发者现在就使用这些特性，并且编译后的 JavaScript 可以在所有主流浏览器和平台上运行，而不需要等到下个 JavaScript 版本。"),(0,i.kt)("h3",null,"类"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"class Person{\n  name:string // 这个是对后文this.name类型的定义\n  age:number\n  constructor(name:string,age:number){\n    this.name = name\n    this.age = age\n  }\n  print(){\n    return this.name + this.age\n  }\n}\n\nlet person:Person = new Person('muyy',23)\nconsole.log(person.print()) // muyy23\n")),(0,i.kt)("p",null,"我们在引用任何一个类成员的时候都用了 this。 它表示我们访问的是类的成员。其实这本质上还是 ES6 的知识，只是在 ES6 的基础上多上了对 this 字段和引用参数的类型声明。"),(0,i.kt)("h3",null,"继承"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'class Person{\n  public name:string  // public、private、static 是 typescript 中的类访问修饰符\n  age:number\n  constructor(name:string,age:number){\n    this.name = name\n    this.age = age\n  }\n  tell(){\n    console.log(this.name + this.age)\n  }\n}\n\nclass Student extends Person{\n  gender:string\n  constructor(gender:string){\n    super("muyy",23)\n    this.gender = gender\n  }\n  tell(){\n    console.log(this.name + this.age + this.gender)\n  }\n}\n\nvar student = new Student("male")\nstudent.tell()  // muyy23male\n')),(0,i.kt)("p",null,"这个例子展示了 TypeScript 中继承的一些特征，可以看到其实也是 ES6 的知识上加上类型声明。不过这里多了一个知识点 —— 公共，私有，以及受保护的修饰符。TypeScript 里，成员默认为 public ；当成员被标记成 private 时，它就不能在声明它的类的外部访问；protected 修饰符与 private 修饰符的行为很相似，但有一点不同，protected 成员在派生类中仍然可以访问。"),(0,i.kt)("h3",null,"存储器"),(0,i.kt)("p",null,"TypeScript 支持通过 getters/setters 来截取对对象成员的访问。 它能帮助你有效的控制对对象成员的访问。"),(0,i.kt)("p",null,"对于存取器有下面几点需要注意的：\n首先，存取器要求你将编译器设置为输出 ECMAScript 5 或更高。 不支持降级到 ECMAScript 3。 其次，只带有 get 不带有 set 的存取器自动被推断为 readonly。 这在从代码生成 .d.ts 文件时是有帮助的，因为利用这个属性的用户会看到不允许够改变它的值。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'class Hello{\n  private _name: string\n  private _age: number\n  get name(): string {\n    return this._name\n  }\n  set name(value: string) {\n    this._name = value\n  }\n  get age(): number{\n    return this._age\n  }\n  set age(age: number) {\n    if(age>0 && age<100){\n      console.log("年龄在0-100之间") // 年龄在0-100之间\n      return\n    }\n    this._age = age\n  }\n}\n\nlet hello = new Hello()\nhello.name = "muyy"\nhello.age = 23\nconsole.log(hello.name) // muyy\n')),(0,i.kt)("h2",null,"接口"),(0,i.kt)("h3",null,"接口"),(0,i.kt)("p",null,"TypeScript 的核心原则之一是对值所具有的结构进行类型检查。在 TypeScript 里，接口的作用就是为这些类型命名和为你的代码或第三方代码定义契约。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'interface LabelValue{\n  label: string\n}\n\nfunction printLabel(labelObj: LabelValue){\n  console.log(labelObj.label)\n}\n\nlet myObj = {\n  "label":"hello Interface"\n}\nprintLabel(myObj)\n')),(0,i.kt)("p",null,"LabelledValue 接口就好比一个名字，它代表了有一个 label 属性且类型为 string 的对象。只要传入的对象满足上述必要条件，那么它就是被允许的。"),(0,i.kt)("p",null,"另外，类型检查器不会去检查属性的顺序，只要相应的属性存在并且类型也是对的就可以。"),(0,i.kt)("h3",null,"可选属性"),(0,i.kt)("p",null,"带有可选属性的接口与普通的接口定义差不多，只是在可选属性名字定义的后面加一个 ? 符号。可选属性的好处之一是可以对可能存在的属性进行预定义，好处之二是可以捕获引用了不存在的属性时的错误。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'interface Person{\n  name?:string\n  age?:number\n}\n\nfunction printInfo(info:Person){\n  console.log(info)\n}\n\nlet info = {\n  "name":"muyy",\n  "age":23\n}\n\nprintInfo(info) // {"name": "muyy", "age": 23}\n\nlet info2 = {\n  "name":"muyy"\n}\n\nprintInfo(info2) // {"name": "muyy"}\n')),(0,i.kt)("h3",null,"函数类型"),(0,i.kt)("p",null,"接口能够描述 JavaScript 中对象拥有的各种各样的外形。除了描述带有属性的普通对象外，接口也可以描述函数类型。定义的函数类型接口就像是一个只有参数列表和返回值类型的函数定义。参数列表里的每个参数都需要名字和类型。定义后完成后，我们可以像使用其它接口一样使用这个函数类型的接口。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'interface SearchFunc{\n  (source: string, subString: string): boolean\n}\n\nlet mySearch: SearchFunc\nmySearch = function(source: string,subString: string){\n  return source.search(subString) !== -1\n}\n\nconsole.log(mySearch("鸣人","鸣")) // true\nconsole.log(mySearch("鸣人","缨")) // false\n')),(0,i.kt)("h3",null,"可索引类型"),(0,i.kt)("p",null,"与使用接口描述函数类型差不多，我们也可以描述那些能够“通过索引得到”的类型，比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"a[10]")," 或 ",(0,i.kt)("inlineCode",{parentName:"p"},'ageMap["daniel"]'),"。 可索引类型具有一个索引签名，它描述了对象索引的类型，还有相应的索引返回值类型。 让我们看如下例子："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'interface StringArray{\n  [index: number]: string\n}\n\nlet MyArray: StringArray\nMyArray = ["是","云","随","风"]\nconsole.log(MyArray[2]) // 随\n')),(0,i.kt)("h3",null,"类类型"),(0,i.kt)("p",null,"与 C# 或 Java 里接口的基本作用一样，TypeScript 也能够用它来明确的强制一个类去符合某种契约。"),(0,i.kt)("p",null,"我们可以在接口中描述一个方法，在类里实现它，如同下面的 ",(0,i.kt)("inlineCode",{parentName:"p"},"setTime")," 方法一样："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"interface ClockInterface{\n  currentTime: Date\n  setTime(d: Date)\n}\n\nclass Clock implements ClockInterface{\n  currentTime: Date\n  setTime(d: Date){\n    this.currentTime = d\n  }\n  constructor(h: number, m: number) {}\n}\n")),(0,i.kt)("h3",null,"继承接口"),(0,i.kt)("p",null,"和类一样，接口也可以相互继承。 这让我们能够从一个接口里复制成员到另一个接口里，可以更灵活地将接口分割到可重用的模块里。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'interface Shape{\n  color: string\n}\n\ninterface PenStroke{\n  penWidth: number\n}\n\ninterface Square extends Shape,PenStroke{\n  sideLength: number\n}\n\nlet s = <Square>{}\ns.color = "blue"\ns.penWidth = 100\ns.sideLength = 10\n')),(0,i.kt)("h2",null,"模块"),(0,i.kt)("p",null,"TypeScript 与 ECMAScript 2015 一样，任何包含顶级 import 或者 export 的文件都被当成一个模块。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"export interface StringValidator{\n  isAcceptable(s:string): boolean\n}\n\nvar strReg = /^[A-Za-z]+$/\nvar numReg = /^[0-9]+$/\n\nexport class letterValidator implements StringValidator{\n  isAcceptable(s:string): boolean{\n    return strReg.test(s)\n  }\n}\n\nexport class zipCode implements StringValidator{\n  isAcceptable(s: string): boolean{\n    return s.length == 5 && numReg.test(s)\n  }\n}\n")),(0,i.kt)("h2",null,"泛型"),(0,i.kt)("p",null,"软件工程中，我们不仅要创建一致的定义良好的 API，同时也要考虑可重用性。 组件不仅能够支持当前的数据类型，同时也能支持未来的数据类型，这在创建大型系统时为你提供了十分灵活的功能。\n在像 C# 和 Java 这样的语言中，可以使用泛型来创建可重用的组件，一个组件可以支持多种类型的数据。 这样用户就可以以自己的数据类型来使用组件。"),(0,i.kt)("h3",null,"初探泛型"),(0,i.kt)("p",null,"如下代码，我们给 Hello 函数添加了类型变量 T ，T 帮助我们捕获用户传入的类型（比如：string）。我们把这个版本的 Hello 函数叫做泛型，因为它可以适用于多个类型。 代码中 ",(0,i.kt)("inlineCode",{parentName:"p"},"output")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"output2")," 是效果是相同的，第二种方法更加普遍，利用了类型推论 —— 即编译器会根据传入的参数自动地帮助我们确定 T 的类型:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"function Hello<T>(arg:T):T{\n  return arg;\n}\n\nlet outPut = Hello<string>('Hello Generic');\nlet output2 = Hello('Hello Generic')\n\nconsole.log(outPut);\nconsole.log(outPut2);\n")),(0,i.kt)("h2",null,"参考资料"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/basic-types.html"}),"Basic Types")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/namespaces.html"}),"Namespaces")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/type-inference.html"}),"Type Inference")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/type-compatibility.html"}),"Type Compatibility")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/advanced-types.html"}),"Advanced Types")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html"}),"Triple-Slash Directives")),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"httpas://www.typescriptlang.org/docs/handbook/type-checking-javascript-files.html"}),"Type Checking JavaScript Files"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/type-challenges/type-challenges"}),"type-challenges"),": typescript 体操"),(0,i.kt)("li",{parentName:"ul"},"Typescript 工具库",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/millsp/ts-toolbelt"}),"ts-toolbelt")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/piotrwitek/utility-types"}),"utility-types")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/lodash"}),"DefinitelyTyped lodash types")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/hacker0limbo/ts-fp-light"}),"ts-fp-light")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/krzkaczor/ts-essentials"}),"ts-essentials")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://juejin.cn/post/6994102811218673700"}),"Ts 高手篇：22 个示例深入讲解 Ts 最晦涩难懂的高级类型工具"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"文章起笔于 2017-07-02")))}c.isMDXComponent=!0},61033:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,"Roadmap"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://github.com/Microsoft/TypeScript/wiki/Roadmap"}),"roadmap")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/release-notes/overview.html"}),"overview"))),(0,i.kt)("h3",null,"1.3"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-1-3.html#tuple-types"}),"Tuple types"))),(0,i.kt)("h3",null,"1.4"),(0,i.kt)("p",null,"enum"),(0,i.kt)("h3",null,"2.8"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-8.html#conditional-types"}),"Conditional Types"))),(0,i.kt)("h3",null,"3.2"),(0,i.kt)("p",null,"todo: ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-2.html"}),"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-2.html")),(0,i.kt)("h3",null,"3.7"),(0,i.kt)("h4",null,"Optional Chaining Operator(可选链操作符)"),(0,i.kt)("p",null,"Optional Chaining Operator can help us ",(0,i.kt)("inlineCode",{parentName:"p"},"reduce some code")," when we judge ",(0,i.kt)("inlineCode",{parentName:"p"},"foo.bar.baz")," as follow:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// Before\nif (foo && foo.bar && foo.bar.baz) {\n  // ...\n}\n\n// After\nif (foo?.bar?.baz) {\n  // ...\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"?:"),": check in ",(0,i.kt)("inlineCode",{parentName:"p"},"undefined")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"undefined ?: 1 // undefined\nnull ?: 1      // undefined\n0 ?: 1         // 1\n'' ?: 1        // 1\nNaN ?: 1       // 1\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"&&")," has different behaviour. Not only ",(0,i.kt)("inlineCode",{parentName:"p"},"undefined")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),", but ",(0,i.kt)("inlineCode",{parentName:"p"},"falsy value")," will be also checked. eg:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"undefined && 1 // undefined\nnull && 1      // null\n0 && 1         // 0\n'' && 1        // ''\nNaN && 1       // NaN\n")),(0,i.kt)("h4",null,"Nullish Coalescing Operator(空值合并操作符)"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"??")," means you can take the value that isn't ",(0,i.kt)("inlineCode",{parentName:"p"},"undefined")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"undefined ?? 1 // 1\nnull ?? 1      // 1\n0 ?? 1         // 0\n'' ?? 1        // ''\n")),(0,i.kt)("p",null,"You can use it when using ",(0,i.kt)("inlineCode",{parentName:"p"},"0")," as true such as:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"if (typeof value !== 'number') return\n// before\nlet valueStash = value === 0 || value ? value : defaultValue\n\n// after\nlet valueStash = value ?? defaultValue\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"||")," has different behaviour. Not only ",(0,i.kt)("inlineCode",{parentName:"p"},"undefined")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),", but ",(0,i.kt)("inlineCode",{parentName:"p"},"falsy value")," will be also checked. eg:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"undefined || 1 // 1\nnull || 1      // 1\n0 || 1         // 1\n'' || 1        // 1\n")))}c.isMDXComponent=!0},55522:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"TypeScript 模块篇"),(0,i.kt)("h3",null,"TypeScript 之模块导入"),(0,i.kt)("p",null,"为什么在 TypeScript 中会使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"import * as React from react"),"，而不是 ",(0,i.kt)("inlineCode",{parentName:"p"},"import React from react"),", 这个问题困惑了一些时日。"),(0,i.kt)("p",null,"观察 React 的导出代码:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"if (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n")),(0,i.kt)("p",null,"可以发现其是 ",(0,i.kt)("inlineCode",{parentName:"p"},"common.js")," 形式的导出, 而我们知道 ",(0,i.kt)("inlineCode",{parentName:"p"},"import")," 是 es6 的引入, 所以 TypeScript 中出现的 ",(0,i.kt)("inlineCode",{parentName:"p"},"import * as ___ from ___")," 提供了使用 ",(0,i.kt)("inlineCode",{parentName:"p"},"import")," 语法调用 ",(0,i.kt)("inlineCode",{parentName:"p"},"common.js")," 的口子。"),(0,i.kt)("p",null,"比如 ",(0,i.kt)("inlineCode",{parentName:"p"},"import * as React from react")," 等价于 ",(0,i.kt)("inlineCode",{parentName:"p"},"const React = require('react')"),", 它还等价于另外一种写法 ",(0,i.kt)("inlineCode",{parentName:"p"},"import React = require('react')")," (在 webpack 语境下生效)"),(0,i.kt)("p",null,"而 ",(0,i.kt)("inlineCode",{parentName:"p"},"import React from 'react'")," 在 TS 中等价于 ",(0,i.kt)("inlineCode",{parentName:"p"},"const React = require('react').default")),(0,i.kt)("p",null,"在 typescript 的配置文件中可以加上 ",(0,i.kt)("inlineCode",{parentName:"p"},"esModuleInterop")," 参数, 具体见 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/compiler-options.html"}),"官网"),", 其效果可以将 ",(0,i.kt)("inlineCode",{parentName:"p"},"import React from react")," 转为 ",(0,i.kt)("inlineCode",{parentName:"p"},"import * as React from react")),(0,i.kt)("p",null,"在使用了 esModuleInterop 参数后, 像 React、ReactDOM(对象块) 使用 import * as React from 'react' 的形式, warning、classnames(函数) 等库使用 import warning from 'warning' 形式。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"在 webpack 中的话使用 import React from 'react'  和 import * as React from 'react' 都能帮你打包, 但是其它的 Rollup 和 Parcel 没有支持")))}c.isMDXComponent=!0},39934:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"本文档为 TypeScript 的",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/2/types-from-types.html"}),"类型系统"),"阅读笔记。"),(0,i.kt)("h3",null,"Keyof"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type Arrayish = { [n: number]: unknown };\ntype A = keyof Arrayish; // number\n\ntype Mapish = { [k: string]: boolean };\ntype M = keyof Mapish; // string | number\n")),(0,i.kt)("p",null,"这里需要留意 M 的类型是 ",(0,i.kt)("inlineCode",{parentName:"p"},"string | number"),", 这是因为 JavaScript 对象中总是将 key 对待为一个 string 类型, 比如 obj","[0]"," 与 obj","['0']"," 是等价的。"),(0,i.kt)("h3",null,"Typeof"),(0,i.kt)("p",null,"需要注意「类型空间」与实际值的区别。"),(0,i.kt)("p",null,"以 ",(0,i.kt)("inlineCode",{parentName:"p"},"ReturnType<T>")," 为例:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"function f() {\n  return { x: 10, y: 3 };\n}\ntype P = ReturnType<f>;\n")),(0,i.kt)("p",null,"直接操作值, 会报错 ",(0,i.kt)("inlineCode",{parentName:"p"},"'f' refers to a value, but is being used as a type here. Did you mean 'typeof f'?"),"。因此我们得使用 typeof 来将函数转化为类型空间。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"function f() {\n  return { x: 10, y: 3 };\n}\ntype P = ReturnType<typeof f>;\n")),(0,i.kt)("h3",null,"Indexed Access"),(0,i.kt)("p",null,"可以结合使用 typeof 与 number 去获取数组元素的类型。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'const MyArray = [\n  { name: "Alice", age: 15 },\n  { name: "Bob", age: 23 },\n  { name: "Eve", age: 38 },\n]\n\n// type Person = {\n//   name: string;\n//   age: number;\n// }\ntype Person = typeof MyArray[number];\n')))}c.isMDXComponent=!0},89485:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"数据类型"),(0,i.kt)("p",null,"在 TypeScript 进行类型定义的时候尽量不使用 Object、Boolean、Array、Function 等大写开头的标识来定义类型，因为它们在 JavaScript 中都是具体的函数对象，取而代之地应该使用 object、boolean、[]、() => void。"),(0,i.kt)("h3",null,"字符串类型"),(0,i.kt)("p",null,"一个保存字符串的文本，类型声明为 string。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"let name: string = 'muyy'\n")),(0,i.kt)("h3",null,"布尔值类型"),(0,i.kt)("p",null,"boolean 是 true 或 false 的值，所以 ",(0,i.kt)("inlineCode",{parentName:"p"},"let isBool3: boolean = new Boolean(1)")," 就会编译报错，因为 new Boolean(1) 生成的是一个 Bool 对象。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"let isBool1: boolean = false\n")),(0,i.kt)("h3",null,"数字类型"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"let number: number = 10;\n")),(0,i.kt)("h3",null,"数组类型"),(0,i.kt)("p",null,"数组是 Array 类型。然而，因为数组是一个集合，我们还需要指定在数组中的元素的类型。我们通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"Array<type>")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"type[]")," 语法为数组内的元素指定类型。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'let arr: number[] = [1, 2, 3, 4, 5]\nlet arr2: Array<number> = [1, 2, 3, 4, 5]\n\nlet arr3: string[] = ["1","2"]\nlet arr4: Array<string> = ["1","2"]\n')),(0,i.kt)("h3",null,"Tuple 类型"),(0,i.kt)("p",null,"Tuple 类型相对于 Array 类型, 其允许元素的类型不一定相同。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"let x: [string, number]\nx = ['a', 1]\n")),(0,i.kt)("h3",null,"enums 类型"),(0,i.kt)("p",null,"列出所有可用值，一个枚举的默认初始值是 0。一开始的范围可以作如下调整:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"enum Role {Employee = 3, Manager, Admin}\nlet role: Role = Role.Employee\nconsole.log(role) // 3\nconsole.log(Role[4]) // Manager\n")),(0,i.kt)("h3",null,"any 类型"),(0,i.kt)("p",null,"any 是默认的类型，其类型的变量允许任何类型的值："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),'let notSure:any = 10\nlet notSure2:any[] = [1,"2",false]\n')),(0,i.kt)("h3",null,"void 类型"),(0,i.kt)("p",null,"JavaScript 没有空值 void 的概念，在 TypeScirpt 中，可以用 void 表示没有任何返回值的函数："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"function alertName(): void {\n  console.log('My name is muyy')\n}\n")),(0,i.kt)("p",null,"此外，需注意的是如果在函数声明的变量后方声明 () => void，函数中是可以返回任意值，只不过结果类型仍然为 void。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"✅\nconst f1: () => void = function() {\n  return true\n}\n\n❎\nconst f3 = function(): void {\n  return true\n}\n")),(0,i.kt)("h3",null,"unknow 类型"),(0,i.kt)("p",null,"任何使用 any 类型的地方推荐使用 unknow 类型代替它。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#new-unknown-top-type"}),"new-unknown-top-type"),", 比 any 更加安全的类型")),(0,i.kt)("p",null,"如果没有断言或缩小到更具体的类型，则不允许对 unknow 类型做任何操作。比如下方例子:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"function f(x: unknown) {\n  x == 5;\n  x !== 10;\n  x >= 0; // Error\n  x + 1; // Error\n  x * 2; // Error\n  -x; // Error\n  +x; // Error\n  x.foo; // Error\n  x[5]; // Error\n  x(); // Error\n}\n")),(0,i.kt)("h3",null,"never 类型"),(0,i.kt)("p",null,"当函数 throw 或者返回错误, 循环永远为 true 时可以声明为 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/2/narrowing.html#the-never-type"}),"never 类型"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'// Function returning never must have unreachable end point\nfunction error(message: string): never {\n  throw new Error(message)\n}\n\n// Inferred return type is never\nfunction fail() {\n  return error("Something failed")\n}\n\n// Function returning never must have unreachable end point\nfunction infiniteLoop(): never {\n  while (true) { ... }\n}\n')))}c.isMDXComponent=!0},21173:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"Types vs Interfaces"),(0,i.kt)("h3",null,"相同点"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"两者都可用来表达 ",(0,i.kt)("inlineCode",{parentName:"li"},"Objects / Functions"),", 不过它们语法不同。")),(0,i.kt)("p",null,"Interface:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"interface Point0 {\n  x: number;\n  y: number;\n}\n\ninterface SetPoint0 {\n  (x: number, y: number): void\n}\n")),(0,i.kt)("p",null,"Type:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type Point1 = {\n  x: number;\n  y: number;\n}\n\ntype SetPoint1 = (x: number, b: number) => void\n")),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"两者都可以继承自 Interface 或者 Type。")),(0,i.kt)("p",null,"继承自 Interface:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"interface PartialPointX0 { x: number }\ninterface Point extends PartialPointX0 { y: number }\n\ninterface PartialPointX3 { x: number }\ntype PointX1 = PartialPointX3 & { y: number }\n")),(0,i.kt)("p",null,"继承自 Type:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type PartialPointX1 = { x: number }\ntype PointX1 = PartialPointX1 & { y: number }\n\ntype PartialPointX2 = { x: number }\ninterface Point extends PartialPointX2 { y: number }\n")),(0,i.kt)("h3",null,"不同点"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Type 可用来定义声明 ",(0,i.kt)("inlineCode",{parentName:"li"},"primitives"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"unions")," 以及 ",(0,i.kt)("inlineCode",{parentName:"li"},"tuples")," 类型。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"// primitive\ntype Name = string;\n\n// union\ntype Point = string | number\n\n// tuple\ntype Data = [string, number]\n")),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"Interface 可声明多次, 多次声明的类型会进行合并。Type 则只能声明一次。")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"interface Point { x: number }\ninterface Point { y: number }\n\nconst point: Point = { x: 1, y: 2 }\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("a",u({parentName:"p"},{href:"https://stackoverflow.com/questions/37233735/typescript-interfaces-vs-types/52682220#52682220"}),"Types_vs_Interfaces"))))}c.isMDXComponent=!0},65395:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"Partial<T>")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Partial<T>"),": 意味 T 集合的子集;"),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"Pick<T, K>")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Pick<T, K>"),": 相对 ",(0,i.kt)("inlineCode",{parentName:"p"},"Partial<T>"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Pick<T, K>")," 限制了子集中必须含有 K 定义的类型字段。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'interface Todo {\n  title: string;\n  description: string;\n  completed: boolean;\n}\ntype TodoPreview = Pick<Todo, "title" | "completed">;\nconst todo: TodoPreview = {\n  title: "Clean room",\n  completed: false\n};\n')),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"Readonly<T>")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Readonly<T>"),": T 中类型只读;"),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"Record<K, T>")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Record<K, T>"),": 建立 K 到 T 之间的 map 映射。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'interface PageInfo {\n  title: string;\n}\ntype Page = "home" | "about" | "contact";\nconst x: Record<Page, PageInfo> = {\n  about: { title: "about" },\n  contact: { title: "contact" },\n  home: { title: "home" }\n};\n')),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"Omit<T, K>")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Omit<T, K>"),": 申明一个类型其在 T 类型中",(0,i.kt)("inlineCode",{parentName:"p"},"移除 K 中包含的属性值"),";"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'interface Todo {\n  title: string;\n  description: string;\n  completed: boolean;\n}\ntype TodoPreview = Omit<Todo, "description">;\nconst todo: TodoPreview = {\n  title: "Clean room",\n  completed: false\n};\n')),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"Exclude<T, U>")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Exclude<T, U>"),": 申明一个类型其在 T 类型中",(0,i.kt)("inlineCode",{parentName:"li"},"移除 U 中所包含的类型"),";"),(0,i.kt)("li",{parentName:"ul"},"版本: 2.8")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),'type T0 = Exclude<"a" | "b" | "c", "a">; // "b" | "c"\ntype T1 = Exclude<"a" | "b" | "c", "a" | "b">; // "c"\ntype T2 = Exclude<string | number | (() => void), Function>; // string | number\n')),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"Extract<T, U>")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Extract<T, U>")," — Extract from T those types that are assignable to U."),(0,i.kt)("li",{parentName:"ul"},"版本: 2.8")),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"NonNullable<T>")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"NonNullable<T>"),": 申明一个类型其将 T 类型中的 null 与 undefined 移除;"),(0,i.kt)("li",{parentName:"ul"},"版本: 2.8")),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"ReturnType<T>")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ReturnType<T>")," — Obtain the return type of a function type."),(0,i.kt)("li",{parentName:"ul"},"版本: 2.8")),(0,i.kt)("h3",null,(0,i.kt)("inlineCode",{parentName:"h3"},"InstanceType<T>")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"InstanceType<T>"),": 申明一个由构造函数实例类型组合而成的类型;"),(0,i.kt)("li",{parentName:"ul"},"版本: 2.8")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"class C {\n  x = 0;\n  y = 0;\n}\ntype T0 = InstanceType<typeof C>; // C\ntype T1 = InstanceType<any>; // any\ntype T2 = InstanceType<never>; // any\ntype T3 = InstanceType<string>; // Error\ntype T4 = InstanceType<Function>; // Error\n")),(0,i.kt)("h3",null,"Link"),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ",(0,i.kt)("a",u({parentName:"li"},{href:"https://www.typescriptlang.org/docs/handbook/utility-types.html"}),"Utility Types"))))}c.isMDXComponent=!0},44118:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",null,"TypeScript 条件类型精读与实践"),(0,i.kt)("p",null,"在大多数程序中，我们必须根据输入做出决策。TypeScript 也不例外，使用条件类型可以描述输入类型与输出类型之间的关系。"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"本文同步首发在",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/MuYunyun/blog/issues/140"}),"个人博客"),"中，欢迎订阅、交流。")),(0,i.kt)("h2",null,"用于条件判断时的 extends"),(0,i.kt)("p",null,"当 extends 用于表示条件判断时，可以总结出以下规律"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"若位于 extends 两侧的类型相同，则 extends 在语义上可理解为 ",(0,i.kt)("inlineCode",{parentName:"li"},"==="),"，可以参考如下例子:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type result1 = 'a' extends 'abc' ? true : false // false\ntype result2 = 123 extends 1 ? true : false     // false\n")),(0,i.kt)("ol",u({},{start:2}),(0,i.kt)("li",{parentName:"ol"},"若位于 extends 右侧的类型包含位于 extends 左侧的类型(即狭窄类型 extends 宽泛类型)时，结果为 true，反之为 false。可以参考如下例子:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type result3 = string extends string | number ? true : false // true\n")),(0,i.kt)("ol",u({},{start:3}),(0,i.kt)("li",{parentName:"ol"},"当 extends 作用于对象时，若在对象中指定的 key 越多，则其类型定义的范围越狭窄。可以参考如下例子:")),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type result4 = { a: true, b: false } extends { a: true } ? true : false // true\n")),(0,i.kt)("h2",null,"在泛型类型中使用条件类型"),(0,i.kt)("p",null,"考虑如下 Demo 类型定义:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type Demo<T, U> = T extends U ? never : T\n")),(0,i.kt)("p",null,"结合",(0,i.kt)("a",u({parentName:"p"},{href:"#%E7%94%A8%E4%BA%8E%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E6%97%B6%E7%9A%84-extends"}),"用于条件判断时的 extends"),"，可知 ",(0,i.kt)("inlineCode",{parentName:"p"},"'a' | 'b' | 'c' extends 'a'")," 是 false, 因此 ",(0,i.kt)("inlineCode",{parentName:"p"},"Demo<'a' | 'b' | 'c', 'a'>")," 结果是 ",(0,i.kt)("inlineCode",{parentName:"p"},"'a' | 'b' | 'c'")," 么?"),(0,i.kt)("p",null,"查阅",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/2/conditional-types.html"}),"官网"),"，其中有提到:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"When conditional types act on a generic type, they become distributive when given a union type.")),(0,i.kt)("p",null,"即当条件类型作用于泛型类型时，联合类型会被拆分使用。即 ",(0,i.kt)("inlineCode",{parentName:"p"},"Demo<'a' | 'b' | 'c', 'a'>")," 会被拆分为 ",(0,i.kt)("inlineCode",{parentName:"p"},"'a' extends 'a'"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"'b' extends 'a'"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"'c' extends 'a'"),"。用伪代码表示类似于:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"function Demo(T, U) {\n  return T.map(val => {\n    if (val !== U) return val\n    return 'never'\n  })\n}\n\nDemo(['a', 'b', 'c'], 'a') // ['never', 'b', 'c']\n")),(0,i.kt)("p",null,"此外根据 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/2/narrowing.html#the-never-type"}),"never 类型"),"的定义 —— never 类型可分配给每种类型，但是没有类型可以分配给 never(除了 never 本身)。即 ",(0,i.kt)("inlineCode",{parentName:"p"},"never | 'b' | 'c'")," 等价于 ",(0,i.kt)("inlineCode",{parentName:"p"},"'b' | 'c'"),"。"),(0,i.kt)("p",null,"因此 ",(0,i.kt)("inlineCode",{parentName:"p"},"Demo<'a' | 'b' | 'c', 'a'>")," 的结果并不是 ",(0,i.kt)("inlineCode",{parentName:"p"},"'a' | 'b' | 'c'")," 而是 ",(0,i.kt)("inlineCode",{parentName:"p"},"'b' | 'c'"),"。"),(0,i.kt)("h3",null,"工具类型"),(0,i.kt)("p",null,"心细的读者可能已经发现了 Demo 类型的声明过程其实就是 TypeScript 官方提供的工具类型中 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/utility-types.html#excludetype-excludedunion"}),(0,i.kt)("inlineCode",{parentName:"a"},"Exclude<Type, ExcludedUnion>"))," 的实现原理，其用于将联合类型 ExcludedUnion 排除在 Type 类型之外。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type T = Demo<'a' | 'b' | 'c', 'a'> // T: 'b' | 'c'\n")),(0,i.kt)("p",null,"基于 Demo 类型定义，进一步地还可以实现官方工具类型中的 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys"}),(0,i.kt)("inlineCode",{parentName:"a"},"Omit<Type, Keys>")),"，其用于移除对象 Type\n中满足 keys 类型的属性值。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type Omit<Type, Keys> = {\n  [P in Demo<keyof Type, Keys>]: Type<P>\n}\n\ninterface Todo {\n  title: string;\n  description: string;\n  completed: boolean;\n}\n\ntype T = Omit<Todo, 'description'> // T: { title: string; completed: boolean }\n")),(0,i.kt)("h3",null,"逃离舱"),(0,i.kt)("p",null,"如果想让 ",(0,i.kt)("inlineCode",{parentName:"p"},"Demo<'a' | 'b' | 'c', 'a'>")," 的结果为 ",(0,i.kt)("inlineCode",{parentName:"p"},"'a' | 'b' | 'c'")," 是否可以实现呢? 根据",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/2/conditional-types.html#distributive-conditional-types"}),"官网"),"描述:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Typically, distributivity is the desired behavior. To avoid that behavior, you can surround each side of the extends keyword with square brackets.")),(0,i.kt)("p",null,"如果不想遍历泛型中的每一个类型，可以用方括号将泛型给括起来以表示使用该泛型的整体部分。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type Demo<T, U> = [T] extends [U] ? never : T\n\n// result 此时类型为 'a' | 'b' | 'c'\ntype result = Demo<'a' | 'b' | 'c', 'a'>\n")),(0,i.kt)("h2",null,"在箭头函数中使用条件类型"),(0,i.kt)("p",null,"在箭头函数中使用三元表达式时，从左向右的阅读习惯导致函数内容区若不加括号则会让使用方感到困惑。比如下方代码中 x 是函数类型还是布尔类型呢？"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"// The intent is not clear.\nvar x = a => 1 ? true : false\n")),(0,i.kt)("p",null,"在 eslint 规则 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://eslint.org/docs/rules/no-confusing-arrow"}),"no-confusing-arrow")," 中，推荐如下写法："),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js"}),"var x = a => (1 ? true : false)\n")),(0,i.kt)("p",null,"在 TypeScript 的类型定义中，若在箭头函数中使用 extends 也是同理，由于从左向右的阅读习惯，也会导致阅读者对类型代码的执行顺序感到困惑。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type Curry<P extends any[], R> =\n  (arg: Head<P>) => HasTail<P> extends true ? Curry<Tail<P>, R> : R\n")),(0,i.kt)("p",null,"因此在箭头函数中使用 extends 建议加上括号，对于进行 code review 有很大的帮助。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type Curry<P extends any[], R> =\n  (arg: Head<P>) => (HasTail<P> extends true ? Curry<Tail<P>, R> : R)\n")),(0,i.kt)("h2",null,"结合类型推导使用条件类型"),(0,i.kt)("p",null,"在 TypeScript 中，一般会结合 extends 来使用类型推导 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/2/conditional-types.html#inferring-within-conditional-types"}),"infer")," 语法。使用它可以实现自动推导类型的目的。比如用其来实现工具类型 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://www.typescriptlang.org/docs/handbook/utility-types.html#returntypetype"}),(0,i.kt)("inlineCode",{parentName:"a"},"ReturnType<Type>")),"，该工具类型用于返回函数 Type 的返回类型。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type ReturnType<T extends Function> = T extends (...args: any) => infer U ? U : never\n\nMyReturnType<() => string>          // string\nMyReturnType<() => Promise<boolean> // Promise<boolean>\n")),(0,i.kt)("p",null,"结合 extends 与类型推导还可以实现与数组相关的 ",(0,i.kt)("inlineCode",{parentName:"p"},"Pop<T>"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"Shift<T>"),"、",(0,i.kt)("inlineCode",{parentName:"p"},"Reverse<T>")," 工具类型。"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"Pop<T>")),":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type Pop<T extends any[]> = T extends [...infer ExceptLast, any] ? ExceptLast : never\n\ntype T = Pop<[3, 2, 1]> // T: [3, 2]\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"Shift<T>")),":"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type Shift<T extends any[]> = T extends [infer _, ...infer O] ? O : never\n\ntype T = Shift<[3, 2, 1]> // T: [2, 1]\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"Reverse<T>"))),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type Reverse<T> = T extends [infer F, ...infer Others]\n  ? [...Reverse<Others>, F]\n  : []\n\ntype T = Reverse<['a', 'b']> // T: ['b', 'a']\n")),(0,i.kt)("h2",null,"使用条件类型来判断两个类型完全相等"),(0,i.kt)("p",null,"我们也可以使用条件类型来判断 A、B 两个类型是否完全相等。当前社区上主要有两种方案:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"方案一"),": 参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/Microsoft/TypeScript/issues/27024#issuecomment-420227672"}),"issue"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"export type Equal1<T, S> =\n  [T] extends [S] ? (\n    [S] extends [T] ? true : false\n  ) : false\n")),(0,i.kt)("p",null,"目前该方案的唯一缺点是会将 any 类型与其它任何类型判为相等。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type T = Equal1<{x:any}, {x:number}> // T: true\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"方案二"),": 参考 ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/microsoft/TypeScript/issues/27024#issuecomment-421529650"}),"issue"),"。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"export type Equal2<X, Y> =\n  (<T>() => T extends X ? 1 : 2) extends\n  (<U>() => U extends Y ? 1 : 2) ? true : false\n")),(0,i.kt)("p",null,"目前该方案的唯一缺点是在对交叉类型的处理上有一点瑕疵。"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-ts"}),"type T = Equal2<{x:1} & {y:2}, {x:1, y:2}> // false\n")),(0,i.kt)("p",null,"以上两种判断类型相等的方法见仁见智，笔者在此抛砖引玉。"))}c.isMDXComponent=!0},82024:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(59713),a=n.n(r),o=n(6479),l=n.n(o),i=(n(67294),n(3905));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={};function c(e){var t=e.components,n=l()(e,["components"]);return(0,i.kt)("wrapper",u(u(u({},p),n),{},{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Reading..."),(0,i.kt)("ul",u({},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","TypeScript 的类型是一门独立的「纯函数式编程语言」"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ","类型与值"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ","extends 与分支条件"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","变量声明"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ","函数声明与调用"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ","没有高阶函数不影响表达能力"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!0,disabled:!0}))," ","模式匹配"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","递归与尾递归",(0,i.kt)("ul",u({parentName:"li"},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","普通递归"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","尾递归 & 尾递归转循环 & 通用递归转循环"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","循环转尾递归"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","尾递归遍历树"))),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","实现 Lisp 解释器",(0,i.kt)("ul",u({parentName:"li"},{className:"contains-task-list"}),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","基本加减乘除运算"),(0,i.kt)("li",u({parentName:"ul"},{className:"task-list-item"}),(0,i.kt)("input",u({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","词法分析")))),(0,i.kt)("h3",null,"link"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",u({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/427309936"}),"TypeScript 类型体操天花板"))))}c.isMDXComponent=!0},94184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)&&n.length){var l=a.apply(null,n);l&&e.push(l)}else if("object"===o)for(var i in n)r.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},18186:(e,t,n)=>{"use strict";n.d(t,{TA:()=>a,v8:()=>o,WQ:()=>l,Pu:()=>i});var r=n(67294);const a=!1,o=!0,l=window.__PRERENDER_INJECTED&&window.__PRERENDER_INJECTED.prerender,i="undefined"!=typeof window?r.useLayoutEffect:r.useEffect},18923:e=>{e.exports=[{name:"README.md",path:"/README.md",type:"file",mdconf:{abbrlink:"z5dbvyod"},birthtime:"2022-01-16",mtime:"2022-01-16",size:17285,extension:".md",relative:"/README.md",isEmpty:!1,content:'\x3c!--abbrlink:z5dbvyod--\x3e<divalign="center"><ahref="http://muyunyun.cn/blog"><imgsrc="http://with.muyunyun.cn/ec330b8ac2175c828be41f446f9f9619.jpg"/></a></div>![views](https://raw.githubusercontent.com/MuYunyun/blog/traffic/traffic-blog/views.svg)![views](https://raw.githubusercontent.com/MuYunyun/blog/traffic/traffic-blog/views_per_week.svg)![clones](https://raw.githubusercontent.com/MuYunyun/blog/traffic/traffic-blog/clones.svg)![clones](https://raw.githubusercontent.com/MuYunyun/blog/traffic/traffic-blog/clones_per_week.svg)Thisismypersinalblogcreatedwith<ahref="https://github.com/MuYunyun/create-react-doc"target="_blank">create-react-doc</a>wheretowriteandrecordsomethoughtdaily.Ifyoulikeit,welcomewatchorstar✨.It\'sverythankfultopointanywrongplacefromthesearticles[there](https://github.com/MuYunyun/blog/issues/new)aswell.TheArticleslicensedunder[CreativeCommonsAttribution4.0InternationalLicense](https://creativecommons.org/licenses/by/4.0/deed.en)Agreement.-[DataStructure](#data-structure)-[DesignPattern](#design-pattern)-[ReactSeries](#react-series)-[DeepIntoReact](#deep-into-react)-[ComponentDesign](#component-design)-[ReactStack](#react-stack)-[BuildReactfromscratch](#build-react-from-scratch)-[ModernTesting](#modern-testing)-[TypeScript](#typescript)-[FECloud](#fe-cloud)-[JavaScript](#javascript)-[CSS](#css)-[Node.js](#nodejs)-[FECLOUD](#fe-cloud-1)-[ProjectFramework](#project-framework)-[RaspberryPi](#raspberrypi)###DataStructureThissectionwewillstarttralvelintheworldofdatastrcturetogether!Thereisnodoubtthetravelissointerestringthatyou\'llenjoyittoo!Beforeyourtravelofdatastructure,Iwanttotelltwopointsit\'svalueble:1.InterestandInsist.2.Thoughtismoreimportantthanaction.>[TravelOfLeetCode](https://github.com/MuYunyun/blog/blob/main/LeetCode/README.md)*[Stack](https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/stack.md)*[Queue](https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/queue.md)*[List](https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/list.md)*[Set](https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/set.md)*[Dictionary](https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/.md)*[HashTable](https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/hash_table.md)*[BinaryTree](https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/binary_tree.md)*[Graph](https://github.com/MuYunyun/blog/blob/main/Algorithm/data_structure/graph.md)<details><summary>algorithm</summary>*[AlgorithmAndComplexy](https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/complexy.md)*[Recursive](https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/recursive.md)*[BinarySearch](https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/binary_search.md)*[GreedyAlgorithm](https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/greedy.md)*[DynamicProgramming](https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/dynamic_programming.md)**SortAlgorithm***[SelectionSort](https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/sort/selection_sort.md)*[QuickSort](https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/sort/quick_sort.md)*[MergeSort](https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/sort/merge_sort.md)*[HeapSort](https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/sort/heap_sort.md)算法是一种思想!以排序算法为例,最常见的是在数组中使用排序算法,但是相同的思想也能用于数组对象,甚至链表中,比如链表中实现排序的两道题。1.[147.InsertionSortList](https://github.com/MuYunyun/blog/blob/main/BasicSkill/LeetCode/147.Insertion_Sort_List/README.md):insertsortinlist;2.[148.SortList](https://github.com/MuYunyun/blog/blob/main/BasicSkill/LeetCode/148.Sort_List/README.md):mergesortinlist;</details>###DesignPattern*[SingletonPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/单例模式.md)*[StralegyPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/策略模式.md)*[ProxyPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/代理模式.md)*[IteratorPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/迭代器模式.md)*[Publish/SubscribePattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/发布订阅模式.md)*[CommandPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/命令模式.md)*[CompositePattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/组合模式.md)*[TemplateMethodPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/模板方法模式.md)*[FlyweightPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/享元模式.md)*[ChainofResponsibilityPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/职责链模式.md)*[MediatorPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/中介者模式.md)*[DecoratorPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/装饰者模式.md)*[StatePattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/状态模式.md)*[AdapterPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/适配者模式.md)*[ObserverPattern](https://github.com/MuYunyun/blog/blob/main/BasicSkill/设计模式/观察者模式.md)###ReactSeriesThissectionwillintroducetheworldofReactprogressively.It\'lltelltheprincipleofReact,howtodesignReactComponentgracefullyandhowtobuildasimpleReactfromscratch.####DeepIntoReact*[React16.x特性剪辑](https://github.com/MuYunyun/blog/blob/main/React/React16.x特性剪辑.md)*[Fiber数据结构](https://github.com/MuYunyun/blog/blob/main/React/Fiber数据结构.md)*[深入Fiber架构](https://github.com/MuYunyun/blog/blob/main/React/深入Fiber架构.md)*[流畅性](https://github.com/MuYunyun/blog/blob/main/React/流畅性.md)*[Schedule](https://github.com/MuYunyun/blog/blob/main/React/schedule.md)*[你不知道的requestIdleCallback](https://github.com/MuYunyun/blog/blob/main/React/你不知道的requestIdleCallback.md)*[ReactSuspense解决了什么](https://github.com/MuYunyun/blog/blob/main/React/suspense解决了什么.md)*[ReactHooks深入系列](https://github.com/MuYunyun/blog/blob/main/React/React_Hooks深入系列.md)*[ReactHooks设计模式](https://github.com/MuYunyun/blog/blob/main/React/React_Hooks设计模式.md)*[React暗器百解](https://github.com/MuYunyun/blog/blob/main/React/React暗器百解.md)####ComponentDesign*[重新认识受控与非受控组件](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/重新认识受控与非受控组件.md)-[][BuildMobileFirstAnimationInReact](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/build_mobile_first_animation.md)<details><summary>More</summary>*[Button](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Button.md)*[Icon](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Icon.md)*[Menu](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Menu.md)*[Keyboard](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Keyboard.md)*[Carousel](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/swipe.md)*[Tabs](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Tabs.md)*[Affix](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Affix.md)*[AddressPicker](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/AddressPicker.md)*[CheckBox](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/CheckBox.md)*[Form](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/Form.md),[oneForm](https://github.com/MuYunyun/oneForm/issues/1)*[SearchBar](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/SearchBar.md)*[Modal](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/modal.md)*[TextArea](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/TextArea.md)*[主题色替换方案](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/主题色替换方案.md)*[移动端测试指北](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/移动端组件测试指北.md)-[][组件设计实践](https://github.com/MuYunyun/blog/blob/main/React/Component_Design/组件开发实践.md)</details>####ReactStack*[Redux与Mobx适用场景](https://github.com/MuYunyun/blog/blob/main/React/相关技术栈/Redux与Mobx适用场景.md)*[MVVM框架解析之双向绑定](https://github.com/MuYunyun/FeCloud/issues/11)<ahref=\'https://github.com/MuYunyun/mvvm\'target="_blank"><sub>(相关项目)</sub></a>*[探索从MVC到MVVM+Flux架构模式的转变](https://github.com/MuYunyun/blog/issues/14)<ahref=\'https://github.com/MuYunyun/stateManage\'target="_blank"><sub>(相关项目)</sub></a>*[reduxmiddleware源码分析](https://github.com/MuYunyun/blog/issues/15)*[在React使用immutable数据的优势](https://github.com/MuYunyun/blog/blob/main/React/在react使用immutable数据的优势.md)*[路由的简易实现](https://github.com/MuYunyun/blog/blob/main/React/router的简易实现.md)*[React在服务端渲染的实现](https://github.com/MuYunyun/blog/issues/4)*[定制自己的react-script](https://github.com/MuYunyun/blog/blob/main/React/定制自己的react-script.md)*[使用React全家桶搭建一个后台管理系统](https://github.com/MuYunyun/blog/issues/3)<ahref=\'https://github.com/MuYunyun/reactSPA\'target="_blank"><sub>(相关项目)</sub></a>####BuildReactfromscratch*[前置准备](https://github.com/MuYunyun/blog/blob/main/React/从0到1实现React/0.前置准备.md)*[JSX和VirtualDOM](https://github.com/MuYunyun/blog/blob/main/React/从0到1实现React/1.JSX和虚拟DOM.md)*[组件和state|props](https://github.com/MuYunyun/blog/blob/main/React/从0到1实现React/2.2.组件和state与props.md)*[生命周期](https://github.com/MuYunyun/blog/blob/main/React/从0到1实现React/3.生命周期.md)*[diff算法](https://github.com/MuYunyun/blog/blob/main/React/从0到1实现React/4.diff算法.md)*[setState优化](https://github.com/MuYunyun/blog/blob/main/React/从0到1实现React/5.setState.md)*[ref的实现](https://github.com/MuYunyun/blog/blob/main/React/从0到1实现React/6.ref.md)*[PureComponent的实现](https://github.com/MuYunyun/blog/blob/main/React/从0到1实现React/7.PureComponent.md)*[HOC探索](https://github.com/MuYunyun/blog/blob/main/React/从0到1实现React/8.HOC探索.md)*[onChange事件以及受控组件](https://github.com/MuYunyun/blog/blob/main/React/从0到1实现React/9.onChange事件以及受控组件.md)####ModernTesting*[React现代化测试](https://github.com/MuYunyun/blog/blob/main/React/测试/React现代化测试.md)*[Jest与react-testing-Library](https://github.com/MuYunyun/blog/blob/main/React/测试/Jest与ReactTestingLibrary.md)###TypeScript*[TypeScript基础篇](https://github.com/MuYunyun/blog/blob/main/TypeScript/README.md)*[TypeScript中的类型](https://github.com/MuYunyun/blog/blob/main/TypeScript/Types.md)*[TypeScript中的函数使用](https://github.com/MuYunyun/blog/blob/main/TypeScript/More_On_Functions.md)*[TypeScript中的工具类型](https://github.com/MuYunyun/blog/blob/main/TypeScript/Utility_Types.md)*[TypesvsInterfaces](https://github.com/MuYunyun/blog/blob/main/TypeScript/Types_vs_Interfaces.md)*[TypeScriptextends精读与实践](https://github.com/MuYunyun/blog/blob/main/TypeScript/extends.md)###FECloudThissectionwilltalkaboutcolorfulfrontendworld.####JavaScript*[你不知道的JavaScript](https://github.com/MuYunyun/blog/issues/2)*[红皮书里的细节](https://github.com/MuYunyun/blog/blob/main/BasicSkill/basis/二刷高程.md)*[探寻JavaScript精度问题](https://github.com/MuYunyun/blog/blob/main/BasicSkill/basis/探寻JavaScript精度问题.md)*[函数式编程入门](https://github.com/MuYunyun/blog/blob/main/BasicSkill/编程范式/函数式编程入门.md)*[Decorator](https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/装饰器.md)*[Promise](https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/Promise.md)<ahref=\'https://github.com/MuYunyun/repromise\'target="_blank"><sub>(相关项目)</sub></a>*[Generator](https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/Generator.md)*[Async](https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/Async.md)*[CommonJS模块与ES6模块间的差异](https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/模块.md)*[ES6继承与ES5继承的差异](https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/继承.md)*[扩展运算符](https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/扩展运算符.md)*[箭头函数](https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/箭头函数.md)*[Reflect](https://github.com/MuYunyun/blog/blob/main/BasicSkill/readES6/Reflect.md)####CSS*[INHERITEDANDNON-INHERITED](https://github.com/MuYunyun/blog/blob/main/BasicSkill/css/INHERITED_AND_NON-INHERITED.md)<details><summary>more</summary>*[水平布局解决方案](https://github.com/MuYunyun/blog/blob/main/BasicSkill/basis/水平布局解决方案.md)*[聊聊BFC](https://github.com/MuYunyun/blog/blob/main/BasicSkill/css/聊聊BFC.md)*[过渡与动画](https://github.com/MuYunyun/blog/blob/main/BasicSkill/css/css小书/过渡与动画.md)</details>####Node.js*[简版express.js的实现](http://muyunyun.cn/blog/BasicSkill/node/implement_express.js)*[简版koa.js的实现](http://muyunyun.cn/blog/#/BasicSkill/node/implement_koa.js)*[Node.js异步异闻录](https://github.com/MuYunyun/blog/issues/7)<ahref=\'https://github.com/MuYunyun/demos-of-node.js\'target="_blank"><sub>(相关项目)</sub></a>*[用Node.js把玩一番AlfredWorkflow](https://github.com/MuYunyun/blog/issues/6)<ahref=\'https://github.com/MuYunyun/commonSearch\'target="_blank"><sub>(相关项目)</sub></a>####FECLOUD*[SEO在SPA站点中的实践](https://github.com/MuYunyun/blog/blob/main/FeCloud/seo_in_spa_site.md)*[TalkaboutTC39](https://github.com/MuYunyun/blog/blob/main/FeCloud/tc39.md)*[跨域二三事](https://github.com/MuYunyun/blog/blob/main/BasicSkill/http/cross-domain.md)<ahref=\'https://github.com/MuYunyun/cross-domain\'target="_blank"><sub>(相关项目)</sub></a>*[HTTP小册](https://github.com/MuYunyun/blog/blob/main/BasicSkill/http/http.md)*[HTML5](https://github.com/MuYunyun/blog/blob/main/BasicSkill/basis/HTML5.md)*[探寻webpack插件机制](https://github.com/MuYunyun/blog/blob/main/FeCloud/探寻webpack插件机制.md)<ahref=\'https://github.com/MuYunyun/analyze-webpack-plugin\'target="_blank"><sub>(相关项目)</sub></a>*[Babel执行机制](https://github.com/MuYunyun/blog/blob/main/FeCloud/babel执行机制.md)*[npm与yarn](https://github.com/MuYunyun/blog/tree/main/FeCloud/yarn)*[移动端场景知识](https://github.com/MuYunyun/blog/blob/main/BasicSkill/basis/移动端场景知识.md)*[原生JS实现一个瀑布流插件](https://github.com/MuYunyun/FeCloud/issues/12)<ahref=\'https://github.com/MuYunyun/waterfall\'target="_blank"><sub>(相关项目)</sub></a>*[实现一个自定义工具类库](https://github.com/MuYunyun/blog/issues/9)<ahref=\'https://github.com/MuYunyun/diana\'target="_blank"><sub>(相关项目)</sub></a>*[走近Python](https://github.com/MuYunyun/blog/issues/8)####ProjectFramework*[CAS登入流程](https://github.com/MuYunyun/blog/blob/main/BasicSkill/project_framework/CAS登入流程.md)*[RPC在网关项目中的实践](https://github.com/MuYunyun/blog/blob/main/BasicSkill/project_framework/RPC在点我达网关的实践一.md)*[解读IoC框架——InversifyJS](https://github.com/MuYunyun/blog/blob/main/BasicSkill/project_framework/解读IoC框架InversifyJS.md)###RaspberryPiJustdoitforfun!Youwillunlockserver,linux,nginxskillsfromthisRaspberryPitravel.>Thanksforthe[pi](https://github.com/zhaoolee/pi)projectspecially.1.[树莓派简介&烧录系统](https://muyunyun.cn/blog/rahvuwkb)2.[内网穿透](https://muyunyun.cn/blog/fes9wogn)3.[基于树莓派搭建家庭服务器](https://muyunyun.cn/blog/r4zxdn6n)4.[给树莓派安装Docker环境](https://muyunyun.cn/blog/2a97pq3a)5.[给树莓派部署RSSHub](https://muyunyun.cn/blog/wns8hpzc)6.[HTTPS协议配置](https://muyunyun.cn/blog/mx5pvgl1)7.[树莓派部署code-server](https://muyunyun.cn/blog/n45adwng)'},{name:"React",path:"/React",children:[{name:"Component_Design",path:"/React/Component_Design",children:[{name:"AddressPicker.md",path:"/React/Component_Design/AddressPicker.md",type:"file",mdconf:{abbrlink:"oe699e2p"},birthtime:"2022-01-16",mtime:"2022-01-16",size:224,extension:".md",relative:"/React/Component_Design/AddressPicker.md",isEmpty:!1,content:"\x3c!--abbrlink:oe699e2p--\x3e###AddressPicker`AddressPicker`是基于`Tabs`组件封装的地址选择组件,具体效果可以见拼多多用户APP里的地址选择栏。*支持`层级`;*支持`别名函数`;"},{name:"Affix.md",path:"/React/Component_Design/Affix.md",type:"file",mdconf:{abbrlink:"fd4ap89c"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1006,extension:".md",relative:"/React/Component_Design/Affix.md",isEmpty:!1,content:"\x3c!--abbrlink:fd4ap89c--\x3e###Affix固钉组件固钉组件实现的效果其实是CSS中的`position:sticky`属性,`position:sticky`本质是`position:relative`与`position:absolute`的结合体。开发坑点:相对定位切换到绝对定位以后`getBoundingClientRect().top`获取的top是定值,其值始终与`offsetTop`的值相等，这样无法从绝对定位切换到相对定位了。解决手段:提供一个占位父节点,父节点使用`getBoundingClientRect`,子节点上绝对定位。[demo](https://github.com/ming-cult/snake-design/blob/master/components/Affix/index.tsx#L83-L87)###smalltip```jswindow.addEventListener('scroll',fn)```页面在顶部,此时刷新浏览器不会执行fn函数,但是页面发生滚动后,此时刷新浏览器会执行fn函数。因此根据浏览器的这个原生特性,初始化设置「是否吸顶」的逻辑直接写在fn中就行，当页面发生滚动或者页面初始化都会调用。"},{name:"Button.md",path:"/React/Component_Design/Button.md",type:"file",mdconf:{abbrlink:"1g88yeca"},birthtime:"2022-01-16",mtime:"2022-01-16",size:737,extension:".md",relative:"/React/Component_Design/Button.md",isEmpty:!1,content:"\x3c!--abbrlink:1g88yeca--\x3e###Button组件####样式自定义覆盖```jsgetClassName=()=>{const{className,type}=this.propsconstclassStr=ClassNames('mobile-btn',className,{['mobile-btn-primary']:type==='primary',})returnclassStr}``````scss.mobile-btn{...&-primary{background:$btn-background;}}```这里有个样式优先级的知识点,如果想让传进来的自定义样式`className`中的background覆盖掉`mobile-btn-promary`的`background`,需做如下改动:```scss.mobile-btn{...}&.mobile-btn-primary{background:$btn-background;}```###难点在移动端中,手指移到button按钮上时如何模拟pc端的hover状态?"},{name:"Carousel.md",path:"/React/Component_Design/Carousel.md",type:"file",mdconf:{abbrlink:"n2xngha2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3775,extension:".md",relative:"/React/Component_Design/Carousel.md",isEmpty:!1,content:'\x3c!--abbrlink:n2xngha2--\x3e###Carousel(走马灯)组件事件是交给原生事件还是交由React的合成事件呢?在最初的实现中参考[react-swipe](https://github.com/voronianski/react-swipe/blob/gh-pages/src/index.js)相当于是自己封装原生事件。但是在React的生态下，还是尽量用`React`封装的合成事件更为妥当。举几个原因:1.兼容性方面的东西不用自己维护了;2.测试用例用`.simulate`的时候能统一;>原生事件和React合成事件类似鱼和熊掌不可兼得。###前置知识*touchStart*touchMove*touchEnd*transitionend>e.touches[0].pageX,cdn讲了其包含水平滚动的位置###核心思路![](http://with.muyunyun.cn/8151b27a39eb385305185d0a67736011.jpg-400)*比如当前位于第3张图片位于中央的时候,第1、2张图片位于左侧的`rest`,第4、5张图片位于右侧的`rest`;初始化阶段对任何窗口执行以下算法:1.`向左平移当前窗口数*width`2.给除了当前展示页加上/减去`width`*每次只操作当前的`index`,和其左右的元素`index-1`、`index+1`;*自动滑动用的是css中的`transitionDuration`属性以及`transform`属性来完成###理解易错点```jsdelta={x:touches.pageX-start.x,y:touches.pageY-start.y};```*手势从左往右滑动是向左滑动`delta.x>0`,手势从右往左滑动是向右滑动`delta.x<0`###坑点####不必要的id传入为了解决在一个页面中使用多处`Swipe`组件，首先提供了一个id参数来进行区分多个Swipe组件,思路是在封装的组件内部通过`document.getElementById(id)`获取到这个dom节点，然后进行位置的初始化。```js<Swipeid="demo"></Swipe>```传入额外的id这对使用者是一个不必要的负担,可以在组件内使用`ref`获取到对应的`dom`。####如何改造成受控组件目前的实现为非受控组件,若要将其改为受控组件,改的地方比较多,必须使用`state`来替换全局参数。另外位置的信息在`React.cloneElement()`中进行处理。####测试用例之坑`jest`跑如下测试用例,当跑到`componentDidMount`里的`document.getElementById(\'demo\')`并不拿到相应元素。```jsmount(<Swipe><divkey="1">PANE1</div><divkey="2">PANE2</div><divkey="3">PANE3</div><divkey="4">PANE4</div></Swipe>)``````jsxcomponentDidMount(){document.getElementById(\'demo\')}render(){return(<divid="demo">...</div>)}```原因是因为`mount`渲染组件是挂载到[jsdom](https://github.com/jsdom/jsdom)上而非真实`dom`上,当时的解决思路如下:```jsmount(<Swipe><divkey="1">PANE1</div><divkey="2">PANE2</div><divkey="3">PANE3</div><divkey="4">PANE4</div></Swipe>,{attatch:document.body})```经过上述去除步骤去掉`document.getElementById`使用ref后,`{attatch:document.body}`也便去掉了。###CSS方案?*scroll-snap-type*mandatory:thevisualviewportofthisscrollcontainerwill`restonasnappoint`ifitisn\'tcurrentlyscrolled.*proximity:Thevisualviewportofthisscrollcontainermaycometo`restonasnappoint`ifitisn\'tcurrentlyscrolledconsideringtheuseragent\'sscrollparameters.![](http://with.muyunyun.cn/56583153afaa5ae1edad7bea4b728234.jpg-400)*scroll-snap-align:start;*scroll-snap-stop(experiment)*always:definingwhetherthescrollcontainerisallowedto"passover"possiblesnappositions(Usedwithscroll-snap-aligncan).阅读文档后,该api浏览器兼容情况不是特别好(ios要11以上),此外,比如循环轮播是无法实现的。'},{name:"CheckBox.md",path:"/React/Component_Design/CheckBox.md",type:"file",mdconf:{abbrlink:"91evrivd"},birthtime:"2022-01-16",mtime:"2022-01-16",size:891,extension:".md",relative:"/React/Component_Design/CheckBox.md",isEmpty:!1,content:"\x3c!--abbrlink:91evrivd--\x3e###CheckBox组件*勾的定制化:首先使用`appearance:none`去掉原生自带的勾。接着创建一个矩形,保留`border-left`与`border-bottom`的边,进行旋转得到勾。###能用css解决的场景尽量用css解决![](http://with.muyunyun.cn/6a44d5cba2693eea4e162f8514aa72ba.jpg)场景:蓝色区域为可以更改`checked`的地方,最开始使用JS计算出区域1与区域2的宽度,使之相加得到蓝色区域的宽度。其实使用css中的`display:inline-block`可以自动获取子节点的宽度。###css的常量属性(比如color、size)不要设置默认属性值(defaultProps)使用了默认属性值则会配合JS动态插入到`style`属性,这样子有个缺陷:用户传入自定义的`class属性`不会生效。(因为style的优先级大于class传入的优先级)"},{name:"Circle.md",path:"/React/Component_Design/Circle.md",type:"file",mdconf:{abbrlink:"7w8gkx51"},birthtime:"2022-01-16",mtime:"2022-01-16",size:109,extension:".md",relative:"/React/Component_Design/Circle.md",isEmpty:!1,content:"\x3c!--abbrlink:7w8gkx51--\x3e###环形进度条组件环形进度条组件当下采用svg进行开发。"},{name:"Cropper.md",path:"/React/Component_Design/Cropper.md",type:"file",mdconf:{abbrlink:"51z9lacn"},birthtime:"2022-01-16",mtime:"2022-01-16",size:118,extension:".md",relative:"/React/Component_Design/Cropper.md",isEmpty:!1,content:"\x3c!--abbrlink:51z9lacn--\x3e###裁图组件###link*[裁图组件](https://segmentfault.com/a/1190000004268074)"},{name:"DatePicker.md",path:"/React/Component_Design/DatePicker.md",type:"file",mdconf:{abbrlink:"ig3vu158"},birthtime:"2022-01-16",mtime:"2022-01-16",size:289,extension:".md",relative:"/React/Component_Design/DatePicker.md",isEmpty:!1,content:"\x3c!--abbrlink:ig3vu158--\x3e###DatePicker日期选择组件*`区分好受控和非受控区域`。DatePicker组件中,日期滑动区域对用户来说是希望是非受控的。但是点击确定按钮回显到界面上是受控逻辑。###核心逻辑复用同Picker组件"},{name:"Drawer.md",path:"/React/Component_Design/Drawer.md",type:"file",mdconf:{abbrlink:"kdw5hw4c"},birthtime:"2022-01-16",mtime:"2022-01-16",size:107,extension:".md",relative:"/React/Component_Design/Drawer.md",isEmpty:!1,content:"\x3c!--abbrlink:kdw5hw4c--\x3e###Drawer组件###两种模式*挂载到全局*挂载到具体节点"},{name:"Form.md",path:"/React/Component_Design/Form.md",type:"file",mdconf:{abbrlink:"yjp6glo1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:848,extension:".md",relative:"/React/Component_Design/Form.md",isEmpty:!1,content:"\x3c!--abbrlink:yjp6glo1--\x3e在中台中React组件库的核心是表单组件,由此衍生出其它和表单相关的组件。###表单相关*触发焦点事件`focusin`,离开焦点事件`focusout`;*修改表单的`value`值,直接更改元素的`value`值,不要使用`setAttribute('value',xxx)`这种形式,后者在某些情况并不会生效;###社区form方案调研*[react-final-form](https://github.com/final-form/react-final-form)*[redux-form](https://github.com/erikras/redux-form)*[noform](https://github.com/alibaba/noform)*[Informed](https://github.com/joepuzzo/informed):renderprops*[formik](https://github.com/jaredpalmer/formik)###应用*[oneForm](https://github.com/MuYunyun/oneForm/issues/1)*[beast-form](https://uni-blog.netlify.com/posts/2019-08-19/form/):拼多多表单库"},{name:"Icon.md",path:"/React/Component_Design/Icon.md",type:"file",mdconf:{abbrlink:"jv1qrbmc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:580,extension:".md",relative:"/React/Component_Design/Icon.md",isEmpty:!1,content:"\x3c!--abbrlink:jv1qrbmc--\x3e###Icon组件###IconFonts的用法```css@font-face{font-family:'demoFont';src:...}.demo{font-family:'demoFont';...}```###Icon组件的两种实现方式1.@font-face2.svg`SVG`相较于优于`IconFonts`的点。*在低分辨率下更加清晰;*维护更容易;*css控制更加全面(比如允许渐变色)*避免@font-face受到较多外界css属性的干扰(如line-height、padding等);###links*[https://css-tricks.com/icon-fonts-vs-svg/](https://css-tricks.com/icon-fonts-vs-svg/)"},{name:"Input.md",path:"/React/Component_Design/Input.md",type:"file",mdconf:{abbrlink:"np9vhb7s"},birthtime:"2022-01-16",mtime:"2022-01-16",size:701,extension:".md",relative:"/React/Component_Design/Input.md",isEmpty:!1,content:"\x3c!--abbrlink:np9vhb7s--\x3e###Input组件###inputtype为bankCard或phone时,光标错位问题![](http://with.muyunyun.cn/5d99b6bb211806c1e3a19361125e06e8.jpg)*遇到问题:在光标位置输入5,光标位置出现错误在光标位置输入5,光标此时的selectionStart/selectionEnd变为5,可推测规律当判断4的位置为''时,应该让selectionStart=selectionEnd=光标位置+1![](http://with.muyunyun.cn/55efc4cc4dd46ffdd1fc34c7e16152e0.jpg)*遇到问题:在此位置按删除,光标此时的selectionStart/selectionEnd变为5,可推测规律当判断4的位置为''时,应该让selectionStart=selectionEnd=光标位置-1"},{name:"Keyboard.md",path:"/React/Component_Design/Keyboard.md",type:"file",mdconf:{abbrlink:"6ibj18mp"},birthtime:"2022-01-16",mtime:"2022-01-16",size:216,extension:".md",relative:"/React/Component_Design/Keyboard.md",isEmpty:!1,content:"\x3c!--abbrlink:6ibj18mp--\x3e###Keyboard数字键盘组件为达到`聚焦`同时`原生键盘不弹出`的目的,实现虚拟键盘和相应Input组件。*支持与浮窗一起使用;*支持单独使用;"},{name:"Menu.md",path:"/React/Component_Design/Menu.md",type:"file",mdconf:{abbrlink:"5kj24dd3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:798,extension:".md",relative:"/React/Component_Design/Menu.md",isEmpty:!1,content:"\x3c!--abbrlink:5kj24dd3--\x3e###Menu组件####难点1.垂直模式下如何做到当悬浮到子节点(或者选中子节点),父节点和祖父节点也是高亮的呢?2.当光标从父节点移向子节点,中间有段空隙,慢速滑动时如何避免弹框的的关闭?3.子menu展开收缩的动画如何实现?(需借助JavaScript动画)###JavaScript动画与CSS动画```js/***@todoJavaScript/CSSanimation*@bodytowritethisinthefuture.*/```###细节1.背景:在Menu.Item中通常会写Link标签或者a标签进行路由跳转,但由于a标签是行内样式,点击区域过小导致跳转失效。参考了ant-design的[解决方案](https://github.com/ant-design/ant-design/issues/21649),给`<a/>`标签添加相关样式;"},{name:"Modal.md",path:"/React/Component_Design/Modal.md",type:"file",mdconf:{abbrlink:"r5u2z2vr"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6515,extension:".md",relative:"/React/Component_Design/Modal.md",isEmpty:!1,content:"\x3c!--abbrlink:r5u2z2vr--\x3e###Modal值得学习的是在Modal系列组件中Alert/Promt组件采用函数式进行弹框的调用。###蒙层场景:点击蒙层区,内容弹框关闭蒙层消失;点击内容弹框区,内容弹框不关闭蒙层不消失;有什么方法实现这个效果呢?*方案一:target与currentTarget的使用```html<div>蒙层区</div>\x3c!--①只修饰样式--\x3e<div>\x3c!--和①相同的点击区域--\x3e<div>内容区</div></div>```伪代码逻辑:在JavaScript中通过`target`与`currentTarget`区分```jsif(target===currentTarget){//点击蒙层//关闭弹框}```*方案二:z-index的运用###滑动穿透解决方案![](http://with.muyunyun.cn/5ad52dbc5716fb92b823898557cc94fa.gif)下面为解决移动端滑动穿透的解决方案:1.首先先将document上的touchmove事件禁用掉。(防止遮罩层滚动)2.然后再阻止浮层内容冒泡,这样子浮层内容就能touchmove了。(使浮层中需滚动的元素可滚动)3.最后对浮层的边界值做处理,在浮层内容拉到最顶部(scrollTop为0)还上滑动或者浮层内容拉到最底部(scrollTop+clientHeight>=scrollHeight)还下滑动时防止其滑动穿透,所以需要对其进行event.preventDefault()具体代码如下:```jsimport{isNotReachIOS}from'./mobileDetect'/*该方法解决ios滑动穿透问题,经测试安卓8.0版本也适用*/letlockedNum=0letinitialClientY=0letdocumentListenerAdded=falseconstlockedElements:HTMLElement[]=[]constpreventDefault=(event:Event)=>{if(!event.cancelable)returnevent.preventDefault()}//如果位于滚动元素的consthandleScroll=(event:TouchEvent,targetElement:HTMLElement)=>{constclientY=event.targetTouches[0].clientY-initialClientYif(targetElement){const{scrollTop,scrollHeight,clientHeight}=targetElementconstisOnTop=clientY>0&&scrollTop===0constisOnBottom=clientY<0&&scrollTop+clientHeight>=scrollHeightif(isOnTop||isOnBottom){returnpreventDefault(event)}}event.stopPropagation()returnfalse}/*逻辑:首先先将document上的touchmove事件禁用掉。(防止遮罩层滚动)然后再将需要进行滚动的元素阻止其冒泡,这样子滚动的元素就能touchmove了。(使弹框层中需滚动的元素可滚动)最后对弹框层的边界值做处理,在浮层内容拉到最顶部(scrollTop为0)还上滑动或者浮层内容拉到最底部(scrollTop+clientHeight>=scrollHeight)还下滑动时要防止其滑动穿透,所以需要对其进行event.prevent*/constlock=(targetElement:HTMLElement)=>{if(!documentListenerAdded){//针对ios9以下的机型需要单独处理isNotReachIOS(10)?document.addEventListener('touchmove',preventDefault):document.addEventListener('touchmove',preventDefault,{passive:false})documentListenerAdded=true}if(targetElement&&lockedElements.indexOf(targetElement)===-1){targetElement.ontouchstart=(event:TouchEvent)=>{initialClientY=event.targetTouches[0].clientY}targetElement.ontouchmove=(event:TouchEvent)=>{if(event.targetTouches.length!==1)returnhandleScroll(event,targetElement)}lockedElements.push(targetElement)lockedNum+=1}}constunlock=(targetElement:HTMLElement)=>{constindex=lockedElements.indexOf(targetElement)if(index!==-1){lockedNum-=1targetElement.ontouchmove=nulltargetElement.ontouchstart=nulllockedElements.splice(index,1)}if(lockedNum===0&&documentListenerAdded){isNotReachIOS(10)?(documentasany).removeEventListener('touchmove',preventDefault):(documentasany).removeEventListener('touchmove',preventDefault,{passive:false})documentListenerAdded=false}}export{lock,unlock}```使用了上述方法后效果如下:![](http://with.muyunyun.cn/0a5886e43e522b183415c62d29890ebc.gif)>参考[滑动穿透(锁body)终极探索](https://juejin.im/post/5ca4816e5188250b251e34e9)###微信ios下input唤醒键盘视图错误兼容问题![](http://with.muyunyun.cn/0547f0a98df8c2d3df62c87569d07502.gif)该问题其实和modal没关系,但是在这个场景中被遇到了,在动图中可以看到input唤醒键盘后然后待键盘消失后,键盘占用的那部分位置并没有被重新填充上,使用了`scrollIntoView`也没有效果。解决方案如下:使用`focusin`和`focusout`能分别监听键盘的弹起与关闭,在focusout事件中使用window.scrollTo()将body视图移动回原来位置。实现代码如下:```js//微信ios下input唤醒键盘视图错误兼容问题functionHackWxIos(){;(function(){letmyFunction:anyletisWXAndIos=isWeiXinAndIos()if(isWXAndIos){//保存当前视图的滚动位置,供键盘关闭时使用;constoriginScrollY=window.scrollY//既是微信浏览器又是ios============（因为查到只有在微信环境下，ios手机上才会出现input失去焦点的时候页面被顶起）document.body.addEventListener('focusin',()=>{//软键盘弹起事件clearTimeout(myFunction)})document.body.addEventListener('focusout',()=>{//软键盘关闭事件clearTimeout(myFunction)myFunction=setTimeout(function(){window.scrollTo({top:originScrollY,left:0,behavior:'smooth'})//重点=======当键盘收起的时候让页面回到原始位置},200)})}})()functionisWeiXinAndIos(){//window.navigator.userAgent属性包含了浏览器类型、版本、操作系统类型、浏览器引擎类型等信息，这个属性可以用来判断浏览器类型letua=''+window.navigator.userAgent.toLowerCase()//通过正则表达式匹配ua中是否含有MicroMessenger字符串且是IOS系统letisWeixin=/MicroMessenger/i.test(ua)//是在微信浏览器letisIos=/\\(i[^;]+;(U;)?CPU.+MacOSX/i.test(ua)//是IOS系统returnisWeixin&&isIos}}exportdefaultHackWxIos```>[知乎——Modal为什么设计成组件的形式，为啥不全设计成函数api直接调用？](https://www.zhihu.com/question/357548379/answer/919983914)"},{name:"Picker.md",path:"/React/Component_Design/Picker.md",type:"file",mdconf:{abbrlink:"2emgfv8w"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1226,extension:".md",relative:"/React/Component_Design/Picker.md",isEmpty:!1,content:"\x3c!--abbrlink:2emgfv8w--\x3e###Picker组件####视觉兜底在Picker组件中,来聊聊组件视觉层面的兜底。```js<Pickertitle=\"选择时间\"data={[[{label:'2014',value:'2014'},{label:'2015',value:'2015'},{label:'2016',value:'2016'},{label:'2017',value:'2017'},{label:'2018',value:'2018'},{label:'2019',value:'2019'}]]}value={['2013']}><ListItemplaceholder=\"请选择\"extraAlign=\"right\"arrow=\"horizontal\">选择时间</ListItem></Picker>```此时value的值并不在data数据源内,此时页面的呈现状况如下![](http://with.muyunyun.cn/cb71389f4a26685a686329d69290d15b.jpg)讨论话题:这样子的兜底对用户是否友好。兜底后如下:![](http://with.muyunyun.cn/20f9bda8d2be14ad4eabc3226d6f6264.jpg)####一个典型的闭包陷阱如下代码的逻辑是点击关闭按钮,让值恢复到之前的值。以下代码有没有问题呢?```jsclose=()=>{const{value,defaultPicker}=this.propssetTimeout(()=>{this.onChangePickerValue(value||defaultPicker||[])},1000)}```###流畅的滑动效果结合物理公式todo"},{name:"Popup.md",path:"/React/Component_Design/Popup.md",type:"file",mdconf:{abbrlink:"7bg23pss"},birthtime:"2022-01-16",mtime:"2022-01-16",size:920,extension:".md",relative:"/React/Component_Design/Popup.md",isEmpty:!1,content:'\x3c!--abbrlink:7bg23pss--\x3e###iphoneX/XS/XR适配方案Popup/ActionSheet组件在iphonex/xr/xs底部存在小黑条会把显示在内容区上面,适配方案如下:1.html上新增`viewport-fit=cover`属性，使得页面内容完全覆盖整个窗口(了解设置了这个属性,才能在后面使用env属性):```html<metaname="viewport"content="width=device-width,viewport-fit=cover">```2.在fix元素上面设置:```css{margin-bottom:calc(5px+constant(safe-area-inset-bottom));margin-bottom:calc(5px+env(safe-area-inset-bottom));}```3.空的颜色块进行补位:```css{position:fixed;bottom:0;width:100%;height:constant(5px+safe-area-inset-bottom);height:env(5px+safe-area-inset-bottom);background-color:#fff;}```个人觉得这是比较自由的方式。>[参考链接](https://aotu.io/notes/2017/11/27/iphonex/index.html)'},{name:"PullToRefresh.md",path:"/React/Component_Design/PullToRefresh.md",type:"file",mdconf:{abbrlink:"gd53dhmf"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3482,extension:".md",relative:"/React/Component_Design/PullToRefresh.md",isEmpty:!1,content:"\x3c!--abbrlink:gd53dhmf--\x3e##PullToRefresh###与位置相关的api```js<divid=\"position\"><div>这是可滚动元素</div></div>```以下都在id为position上取值:*scrollTop:滚动距离*scrollHeight:滚动元素的高度*clientHeight:视图高度![](http://with.muyunyun.cn/b1d611e0509807308f79f5e50fb32de6.jpg)###踩坑记录:需要在window上挂载相关事件不适合使用hooks,否则需要花很多精力去额外处理。期间将PullToRefresh组件进行重构为hooks,伪代码如下:```jsfunctionPullToRefresh(props:PullToRefreshProps){...useEffect(()=>{addEventListener()return()=>{removeEventListener()}},[useBodyScroll])constaddEventListener=()=>{if(useBodyScroll){window.addEventListener('scroll',scroll)}else{scrollViewRef.current?.addEventListener('scroll',scroll)}}constremoveEventListener=()=>{if(useBodyScroll){window.removeEventListener('scroll',scroll)}else{scrollViewRef.current?.removeEventListener('scroll',scroll)}}...return(<divclassName={classStr}ref={scrollViewRef}style={containStyle}id={id}>{useBodyScroll?(children):(<divclassName={`${prefixCls}-content`}style={{minWidth:'100%',...contentStyle}}>{children}</div>)}{refreshing?<divclassName={`${prefixCls}-loading`}>{loadingInfo}</div>:null}</div>)}exportdefaultPullToRefresh```踩的坑点是,当使用方进行如下使用时,setList(newArr)没有生效。目前归因是由于hooks的闭包原因,在window上订阅的事件中使用的值每次执行没法获取最新的值。目前推荐还是使用class来构造此类组件。```jsexportdefaultfunctionPullToRefreshDemo(){constgetMockData=()=>{letmockList:React.ReactNode[]=[]for(leti=0;i<40;i++){mockList.push(<pkey={i}>这是标签这是标签</p>)}returnmockList}const[list,setList]=useState(getMockData())const[refreshing,setRefreshing]=useState(true)const[checked,setChecked]=useState(false)useEffect(()=>{setRefreshing(false)},[])useEffect(()=>{setList(getMockData())},[checked])constonLoad=(_direction:string,done:()=>void)=>{console.log('请求接口')setRefreshing(true)constnewArr=list.slice()setTimeout(()=>{for(leti=0;i<5;i++){newArr.push(<pkey={Math.floor(100000000*Math.random())}style={{color:'red'}}>这是新的标签</p>)}setList(newArr)setRefreshing(false)done()},1000)}constpartlyScrollStyle:React.CSSProperties={display:'flex',flexDirection:'column',height:'100%',overflow:'auto'}return(<divstyle={checked?{}:partlyScrollStyle}><div><label>是否开启全局滚动</label>:<Switchchecked={checked}onChange={()=>setChecked(!checked)}/></div><Headtitle={checked?'全局滚动':'局部滚动'}/><PullToRefreshonLoad={onLoad}refreshing={refreshing}useBodyScroll={checked}>{list}</PullToRefresh></div>)}```###组件测试见JEST测试一节。###上拉刷新结合虚拟列表*到临界点*等数据加载"},{name:"Rate.md",path:"/React/Component_Design/Rate.md",type:"file",mdconf:{abbrlink:"m5ljm246"},birthtime:"2022-01-16",mtime:"2022-01-16",size:256,extension:".md",relative:"/React/Component_Design/Rate.md",isEmpty:!1,content:"\x3c!--abbrlink:m5ljm246--\x3e###评分组件1.能否纯用css实现评分组件,思路是怎么样的?借助input和相应的input:checked可以实现。(思考这种方式实现的评分组件有什么缺陷?)2.如何实现半星的效果?"},{name:"SearchBar.md",path:"/React/Component_Design/SearchBar.md",type:"file",mdconf:{abbrlink:"zennyqde"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1923,extension:".md",relative:"/React/Component_Design/SearchBar.md",isEmpty:!1,content:"\x3c!--abbrlink:zennyqde--\x3e###SearchBar在使用css的动画属性`transition`时,如果变化前后以下属性改变会使动画失效。`display/text-align`;所以要维持动画的生效,保留了`text-align:center`属性,让搜索字样居中。如下图是动画前后的效果。![](http://with.muyunyun.cn/cb02d781a8437bb43eea1581d41e6c87.jpg)![](http://with.muyunyun.cn/004c6594536786fb1bb57e3df5524831.jpg)受`text-align:center`影响,为了不让🔍icon居中,这个时候使用`visibility:hidden`来占位;![](http://with.muyunyun.cn/9366ca8f6e6f6d7c85d34ca893af131a.jpg)###几个事件钩子的调用先后顺序*`onBlur`:失焦*`onClear`:点击清除图标触发清除*`onFocus`:聚焦![](http://with.muyunyun.cn/d188c846ffbd8c79646a940c352686d5.jpg)点击叉号的时候,因为叉号不在`input`输入框内,所以首先执行的是`onBlur`,此时失去焦点,后续执行不了叉号上的`handleClear`逻辑。解决方法如下:```jshandleBlur=(e:React.FocusEvent<HTMLInputElement>)=>{const{onBlur}=this.propsonBlur(e)setTimeout(()=>{//如果点击叉号,执行到这里时候document.activeElement===this.inputRefif(document.activeElement!==this.inputRef){this.setState({focus:false})}},20)}/*清空输入并重新聚焦*/handleClear=()=>{const{onClear,onChange}=this.propsonChange&&onChange('')onClear('')this.focus()}focus=()=>{if(this.inputRef){this.inputRef.focus()}}```###解决点击🔍不blur仍然保持聚焦的效果![](http://with.muyunyun.cn/afa95e394ae7ff8b1b180b0407acf424.jpg)当点击搜索`icon`的时候,为了仍保留`input`的聚焦的效果,使用`z-index`对`input`元素做如下操作。```css.demo{position:absolute;z-index:2;background-color:transparent;}```"},{name:"SegmentedControl.md",path:"/React/Component_Design/SegmentedControl.md",type:"file",mdconf:{abbrlink:"z6j261zj"},birthtime:"2022-01-16",mtime:"2022-01-16",size:449,extension:".md",relative:"/React/Component_Design/SegmentedControl.md",isEmpty:!1,content:"\x3c!--abbrlink:z6j261zj--\x3e###SegmentedControl###场景![](http://with.muyunyun.cn/36cd6b4794192301b469ed18e2325911.jpg)当前使用伪元素达到的效果存在缺陷,在当前3个列表项中始终显示两条竖线不符合预期。期待的是:如果选中标题一,则左侧的竖线不应该显示,只显示右侧的竖线;如果选中标题二,则左侧竖线和右侧竖线都不显示。有什么好的解决方法呢?"},{name:"Table.md",path:"/React/Component_Design/Table.md",type:"file",mdconf:{abbrlink:"kvnrie57"},birthtime:"2022-01-16",mtime:"2022-01-16",size:347,extension:".md",relative:"/React/Component_Design/Table.md",isEmpty:!1,content:"\x3c!--abbrlink:kvnrie57--\x3e###边框的选择border、box-shadow、伪元素都可以实现表格边框,该如何选择?*角度一:因为border属性天然可以拆分为border-top、border-left、border-bottom、border-right。它们之间灵活组合性较高,不会出现使用box-shadow、伪元素带来相互影响的问题。"},{name:"Tabs.md",path:"/React/Component_Design/Tabs.md",type:"file",mdconf:{abbrlink:"sic5ph49"},birthtime:"2022-01-16",mtime:"2022-01-16",size:10888,extension:".md",relative:"/React/Component_Design/Tabs.md",isEmpty:!1,content:"\x3c!--abbrlink:sic5ph49--\x3e###Tabs组件Tabs组件在Swipe的组件上开发。###心得*在开发基础组件时(涉及到滚动、动画),`ref`这个钩子还是会被大量用到的。在`componentDidMount/componentDidUpdate`中使用`ref`能勾静默刷新(即不再次走生命周期)dom元素。*为了实现下划线平缓滑动的效果,将其设计为单独一个div。这里踩了个坑:最开始是计算下划线的长度以及距离左侧的位置时在父节点使用`getBoundingClientRect`,此时为了得到子节点的宽度以及子节点间相关距离必须要减去相应的`margin、padding`属性的值。后来修正为在子节点上使用`getBoundingClientRect`减少了大量的代码。###Tab的平滑滚动场景:当tabs的数量大于4时可以滑动,点击对应的tab项时将相应的tab移动到屏幕中间。首先使用`scrollTo`这个api,并使用了`behavior:'smooth'`来完成平滑过渡效果。```jsif(tabs.length>4){(thisasany)[`tabScroll`].scrollTo({left:this.tabMiddleDistance(),top:0,behavior:'smooth'})}```但是`behavior:'smooth'`在ios机子上是没有效果的,所以结合`requestAnimationFrame`产生相应的兜底方案。```js/*平滑滚动处理代码,兼容IOS*///elm:移动元素//distance:移动距离//direction:移动方向horizontal:水平vertical:竖直//constscrollHorizontalTo=(elm:any,distance:number,direction='horizontal')=>{constscrollTo=(elm:any,distance:number,direction='horizontal')=>{letposition:number=0if(direction==='horizontal'){position=elm.scrollLeft}elseif(direction==='vertical'){position=elm.scrollTop}constdiff=distance-positionconstcallback=()=>{position=position+diff/20if(direction==='horizontal'){elm.scrollTo(position,0)}else{elm.scrollTo(0,position)}//若距离目标距离小于5,则直接跳到目标位置。if(Math.abs(distance-position)<5){if(direction==='horizontal'){elm.scrollTo(distance,0)}elseif(direction==='vertical'){elm.scrollTo(0,distance)}}else{requestAnimationFrame(callback)}}requestAnimationFrame(callback)}```这写法有如下坑*scrollTo也是异步行为,因此requestAnimationFrame动画是失效的;*`基于距离`判断精度不是很准确因此改用为scrollLeft,以及基于时间来调整```jsfunctionscrollToX(value:number,node:HTMLElement){constscrollLeft=node.scrollLeftconststartTime=Date.now()constframeFunc=()=>{consttimestamp=Date.now()consttime=timestamp-startTimenode.scrollLeft=easeInOutCubic(time,scrollLeft,value,450)if(time<450){requestAnimationFrame(frameFunc)}else{setScrollTop(value,node)}}requestAnimationFrame(frameFunc)}```####缓动动画缓动动画公式参数:*time:当前已运动的时间;*begin:距离的初始值;*change:目标值和初始值差值;*duration:运动总时间;```jsfunctionlinear(time,begin,change,duration){returnchange*(time/duration)+begin}```*`Linear`:线性匀速运动效果;*`Quadratic`:二次方的缓动（t^2）;*`Cubic`:三次方的缓动（t^3）;*`Quartic`:四次方的缓动（t^4）;*`Quintic`:五次方的缓动（t^5）;*`Sinusoidal`:正弦曲线的缓动（sin(t)）;*`Exponential`:指数曲线的缓动（2^t）;*`Circular`:圆形曲线的缓动（sqrt(1-t^2)）;*`Elastic`:指数衰减的正弦曲线缓动;*`Back`:超过范围的三次方缓动（(s+1)*t^3–s*t^2）;*`Bounce`:指数衰减的反弹缓动;除了Linear外,其余每个效果都分三个缓动方式,分别是:*`easeIn`:从0开始加速的缓动,也就是先慢后快;*`easeOut`:减速到0的缓动,也就是先快后慢;*`easeInOut`:前半段从0开始加速,后半段减速到0的缓动;以`Quadratic`为例,[源码](https://github.com/tweenjs/tween.js/blob/master/src/Tween.js#L534-L558):```js/*k取值范围为[0,1]*/TWEEN.Easing={Quadratic:{In:function(k){returnk*k;},Out:function(k){returnk*(2-k);},//k为[0,0.5)时,使用In公式;//k为[0.5,1]时,使用out公式;InOut:function(k){if((k*=2)<1){return0.5*k*k;}return-0.5*(--k*(k-2)-1);}},}```in:![](http://with.muyunyun.cn/ac0ce9fe36c1169eec182b16aa9307b0.jpg)out:![](http://with.muyunyun.cn/281a10bf309065e0d879ee087be5ce10.jpg)```jsconsteaseInOutCubic=(time:number,begin:number,change:number,d:number)=>{constcc=change-begintime/=d/2if(time<1){return(cc/2)*time*time*time+begin}else{return(cc/2)*((time-=2)*time*time+2)+begin}}```###贝塞尔曲线和缓动动画的关系?*[贝塞尔曲线的推导](https://juejin.im/post/5b854e1451882542fe28a53d)目前的理解:贝塞尔的方程式和缓动动画的公式是两条并列的主线,使用它们中的任意一个都可以完成JavaScript的动画效果。###Whenclicktab,howtomoveitcenter?![](http://with.muyunyun.cn/71c277598fff27600479ba12c8cd04aa.jpg)###开发坑点背景:`Tab`下划线随着内容栏的滑动而动态滑动。难点:如何达到原生的顺滑效果。目前的方案是减少`getBoundingClientRect`的调用次数,将需多次获取的值进行缓存。###开发坑点(五星)背景坑点:`tab`栏是可以滑动的,在使用`this.contentRectLeft=elm.getBoundingClientRect().left`进行缓存时,在`tab`滑动后期待取得的是`tab`距离`当前视口`左侧的值,但是实际获取到的是当前`tab`距离滚动条最左侧的值。相关代码如下:```jsafterChangeTab=(index:number)=>{const{tabDirection}=this.propsif(tabDirection==='horizontal'){...this.tabMove(this.tabMiddleDistance)//①this.contentRectLeft=(thisasany)[`tab${index}`].getBoundingClientRect().left//②console.log(this.contentRectLeft)//这个地方打印的是当前`tab`距离滚动条最左侧的值}}tabMove=(distance:number)=>{const{tabs,tabDirection}=this.props//如果是水平滑动时且tab栏的数量大于4,tab栏可滑动if(tabDirection==='horizontal'&&tabs.length>4){scrollTo((thisasany)[`tabScroll`],distance,'horizontal')}...}```造成的原因是调用`this.tabMove`中的`scrollTo`方法里调用了`requestAnimationFrame`,其也是一个异步的钩子。所以②的代码执行是由于`requestAnimationFrame`的执行的！目前的解决方法只能取消`scrollTo`方法的调用尽管tab的滚动比较僵硬,但是确保了`this.contentRectLeft`缓存的值的准确性。```jstabMove=(distance:number)=>{const{tabs,tabDirection}=this.props//如果是水平滑动时且tab栏的数量大于4,tab栏可滑动if(tabDirection==='horizontal'&&tabs.length>4){//scrollTo里面有了requestAnimationFrame方法,以及scrollTo都是一个异步的钩子,会造成缓存//scrollTo((thisasany)[`tabScroll`],distance,'horizontal')//;(thisasany)[`tabScroll`].scrollTo({//left:distance,//top:0,//behavior:'smooth',//});(thisasany)[`tabScroll`].scrollLeft=distance}...}```>多使用小黄鸭笔记法,就能理出眉目,理逻辑的时候可能觉得浪费时间,但是这往往是解决问题最高效的方法。###关于设计模式在开发组件Tabs\\Checkbox\\Radio...有以下两种模式可以选择*配置模式，标签的标题和内容放在options/children```js<Tabsoptions={[{content:[],disabled:true,}]}/>```*children模式：```js<Tab><Tab.item>标签一</Tab.item><Tab.item>标签二</Tab.item></Tab>```相对配置模式,children模式更加贴近React的组件化编程。但是使用者可能对以下写法不生效会产生困惑。因为大多数组件库只会支持Tab.Item在Tab后面的情况。```jsrenderChildren=()=>{return<><Tab.item>标签一</Tab.item><Tab.item>标签二</Tab.item></>}render(){return(<Tab>{this.renderChildren}</Tab>)}```###Tabs支持传入自定义组件使用React.cloneElement对传入的子组件进行处理是会有问题的,因为此时只能接受HTML节点,而不接受自定义组件的传入;```jsreturnReact.cloneElement(reactElement,{className:cx(),style:{}})```只要做如下改造便可以完成接受自定义组件的传入```jsreturn(<divclassName={cx()}style={}>{React.cloneElement(reactElement}</div>)```###一列长度特别长,一列特别短的特殊处理###性能优化默认情况下,当进一个页面的时候就将tabs每一块内容区数据都请求了一遍,如果每个tab页面接口数非常多的时候,可能会有卡顿问题,提供两种模式来进行优化:方式一:在Tabs组件切换tab时,在触发的onChange中获取相应数据传入对应组件。```js<Tabstabs={tabs}activeTab={page}onChange={(index,_e)=>{if(index===0){/*伪代码:获取数据A*/}elseif(index===1){/*伪代码:获取数据B*/}elseif(index===2){/*伪代码:获取数据C*/}setPage(index)}}><Adata={dataA}/><Bdata={dataB}/><Cdata={dataC}/></Tabs>```方式二:维护逻辑变量,这里以ifRead是否已读(多多圈为例),控制A、B、C组件的显示。```js<Tabstabs={tabs}activeTab={page}onChange={(index,_e)=>setPage(index)}><div>{ifRead0||page===0?<A/>:null}</div><div>{ifRead1||page===1?<B/>:null}</div><div>{ifRead2||page===2?<C/>:null}</div></Tabs>```相比较一的方式,方式二的优势是将请求数据的逻辑被拆分到A、B、C各个子组件中,劣势是需要维护逻辑变量。###Hooks的闭包问题2020-03-24记录:今天遇到了一个bug,花的事件比较久,值得记录下修复心得:![](http://with.muyunyun.cn/0b1ee2a477d39ec2550a1ef88c63987a.jpg)川穹说只有安卓机有问题,ios没问题!很是奇怪,就围绕聚焦和安卓机查资料得到`在安卓机下聚焦会触发resize事件,ios则不会触发resize的结论`,因此定位到罪魁祸首```jswindow.addEventListener('resize',()=>{})```又由于在hooks中进行使用,犯下了闭包陷阱;最终使用useRef解决了问题;"},{name:"TextArea.md",path:"/React/Component_Design/TextArea.md",type:"file",mdconf:{abbrlink:"51ezcvd1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1159,extension:".md",relative:"/React/Component_Design/TextArea.md",isEmpty:!1,content:'\x3c!--abbrlink:51ezcvd1--\x3e###如何实现无限制增加行数逻辑?伪代码:换行的时候重新给`textArea`赋值`scrollHeight`。###注意点*用户输入的汉字和英文是否要区分对待?汉字作为2个字符还是1个字符?命中汉字作为两个字符的逻辑:```jsif(/[^\\x00-\\xff]/gi.test(a)){...}```###用户角度:Textarea组件的maxLength问题关于Textarea组件的超出maxLength是否被截断的问题,思考以下几组情形。1.粘贴过来直接截断,提交后可能出问题，想象:"我是你爸爸的朋友",粘贴后自动截断为"我是你爸爸"还没报错,也没阻塞提交;2.我们不少商家可能在多个销售平台售卖,存在一个平台输入完,其他平台直接粘贴的需求(所以粘贴的case可能比我们以为的多);3.针对直接输入的情况,如果总共允许10个字,在当前为5个字的情况下,我在中文输入法的情况下,连输词组"下午来我家喝下午茶",按空格建后,内容截断为"下午来我家",而且没飘红报错提示,对商家来说,可能不知道你做了截断的行为。'},{name:"VirtualList.md",path:"/React/Component_Design/VirtualList.md",type:"file",mdconf:{abbrlink:"lps6uv7k"},birthtime:"2022-01-16",mtime:"2022-01-16",size:478,extension:".md",relative:"/React/Component_Design/VirtualList.md",isEmpty:!1,content:"\x3c!--abbrlink:lps6uv7k--\x3e虚拟列表###IntersectionObserver*threshold属性:决定了什么时候触发回调函数。```jsnewIntersectionObserver(entries=>{/*...*/},{threshold:[0,0.25,0.5,0.75,1]})```表示当目标元素0%、25%、50%、75%、100%可见时,会触发回调函数。###应用场景*资源懒加载*###link[intersectionobserver_api](https://www.ruanyifeng.com/blog/2016/11/intersectionobserver_api.html)"},{name:"build_mobile_first_animation.md",path:"/React/Component_Design/build_mobile_first_animation.md",type:"file",mdconf:{abbrlink:"n6mg8zen"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4790,extension:".md",relative:"/React/Component_Design/build_mobile_first_animation.md",isEmpty:!1,content:"\x3c!--abbrlink:n6mg8zen--\x3e###在React中构建移动端优先的web动画移动端优先动画是指在移动设备上开发的,旨在在移动浏览器而非桌面浏览器的上下文中工作的动画。它有着类似原生App的交互体验,尤其是体贴的手势交互,同时即使在中低档设备上其也具有不错的流畅体验。###Typesofgestures*Navigationalgestures*Tap*Scrollandpan*Drag*Swipe*Pinch*Actiongestures*Tap*Longpress*Swipe*Transformgestures*Doubletap*Pinch*Compoundgestures>[Typesofgestures](https://material.io/design/interaction/gestures.html#types-of-gestures)###难点罗列*scroll、swipe-to-refresh会受到浏览器默认行为干扰;*触摸反应迟钝,没有直接操作的感觉;*反物理直觉;*兼容中、低设备;###框架方案Thewaytotakeisusually`ananimationlibrary`with`agesturehooks`.*[Framer](https://github.com/koenbok/Framer)*[reactspring](https://github.com/react-spring/react-spring)+[react-use-gesture](https://github.com/react-spring/react-use-gesture)*animationlibrary([anime](https://github.com/juliangarnier/anime))+[react-swipeable](https://github.com/dogfessional/react-swipeable)*animationlibrary([GSAP](https://github.com/greensock/GSAP))+[Hammer.js](https://github.com/hammerjs/hammer.js/)###SomePrinciples*`ImmediateResponse`:Ifnotresponseimmediately,itfeelssuperdisconnected.[demo](https://mobile-first-animation.netlify.com/21)*Carousel组件,目前Tab的滑动存在缺陷;*`ScrollDecay`:TheconceptsofscrolldecaycanhelpusdecidehowourUIsshouldrespecttousersinteraction.[demo](https://mobile-first-animation.netlify.com/23)*`-webkit-overflow-scrolling:touch`;(onlyusedinios>5,butnotsuccess)*Picker/DatePicker组件;*`Rubberbanding`*PopOver组件;###Touchcancellation*Usethe`touch-action`CSSpropertytodisabledefaultbrowserbehaviorswithprecision.usetouch-actionbefore:![](http://with.muyunyun.cn/2f284758868304dabad94d2a25500562.gif)usetouch-actionafter:![](http://with.muyunyun.cn/a458a78d287e08627f4dd6b1502fc33e.gif)*[Interactivetouch-actiondemo](https://www.chenhuijing.com/touch-action/)*[Mozillaintroductiontotouch-action](https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action)###PassiveeventlistenersIfyoudecidenottocancelthescroll,youcansetthe**passive**intheaddEventListener.Ifthat,itcanenablethebrowserstoscrollthepageimmediately.*[passive-event-listeners](https://developers.google.com/web/updates/2016/06/passive-event-listeners)-[][Passiveeventslistenerexplainer](https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md)###ScrollProblem1:scrollchainingWhentheuserreachsa'scrollboundary',thecontentbehindthedrawerormodalstartsscrolling!![](https://developers.google.com/web/updates/images/2017/11/overscroll-behavior/drawer-scroll.mp4?hl=zh_cn)![](http://with.muyunyun.cn/5ad52dbc5716fb92b823898557cc94fa.gif)*[overscroll-behavior](https://drafts.csswg.org/css-overscroll/)*auto:default;*contain:preventscrollchaining,keeptheoverfloweffectswithinthenodeself;*none:preventscrollchaining,preventoverfloweffectswithinthenodeself.![](http://with.muyunyun.cn/130f116b88477fba5725033e4245927a.jpg)>[Overscrollbehavior](https://developers.google.com/web/updates/2017/11/overscroll-behavior):readIntroducingoverscroll-behavior###resourcelinks*[Apple's\"DesigningFluidInterfaces\"talk](https://developer.apple.com/videos/play/wwdc2018/803/)*[ImplementationofiOSanimationprinciples](https://medium.com/@nathangitter/building-fluid-interfaces-ios-swift-9732bb934bf5)*[ProgressiveWebAnimations|AlexandraHolachek](https://www.youtube.com/watch?v=laPsceJ4tTY&list=PLPxbbTqCLbGHPxZpw4xj_Wwg8-fdNxJRh&index=21)###SpringAnimations*[springsinanimations](https://github.com/jenox/UIKit-Playground/tree/master/01-Demystifying-UIKit-Spring-Animations)![](http://with.muyunyun.cn/21585e988e682457131948346fc8949d.jpg)####Springs&Gestures-[][In-depthlookatprojection](https://medium.com/ios-os-x-development/gestures-in-fluid-interfaces-on-intent-and-projection-36d158db7395):以借助这里的Projection公式来优化改进-[][In-depthexplorationofmomentumscrolling](https://ariya.io/2013/08/javascript-kinetic-scrolling-part-1)####Touchontheweb-[][Googleintroductiontotouchontheweb](https://developers.google.com/web/fundamentals/design-and-ux/input/touch)-[][Mozillaintroductiontopointerevents](https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events)"},{name:"site.md",path:"/React/Component_Design/site.md",type:"file",mdconf:{abbrlink:"jp8oqdxn"},birthtime:"2022-01-16",mtime:"2022-01-16",size:583,extension:".md",relative:"/React/Component_Design/site.md",isEmpty:!1,content:"\x3c!--abbrlink:jp8oqdxn--\x3e###点击按钮实现复制文字本质是`document.execCommand()`api的使用,见如下demo:```jsfunctioncopy(str:string){returnnewPromise(function(resolve,reject){letsuccess=falsefunctionlistener(e:any){e.clipboardData.setData('text/plain',str)e.preventDefault()success=true}document.addEventListener('copy',listener)document.execCommand('copy')document.removeEventListener('copy',listener)success?resolve():reject()})}usage:copy(...).then(()=>{})```"},{name:"主题色替换方案.md",path:"/React/Component_Design/主题色替换方案.md",type:"file",mdconf:{abbrlink:"kvqod8vz"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5926,extension:".md",relative:"/React/Component_Design/主题色替换方案.md",isEmpty:!1,content:"\x3c!--abbrlink:kvqod8vz--\x3e###方案调研1.https://blog.csdn.net/m0_37792354/article/details/82012278:这个方案可以实现,利用动态切换样式表,每种主题需要一份样式,可以实现但后期维护成本高(不考虑);2.CSSVariables的方案,基于项目本身是scss不考虑此种方案,但是其浏览器支持度还是可以的;![](http://with.muyunyun.cn/fe11d88b92efa1249d58fe13d5c737dd.jpg)3.入口文件引入自定义变量(参照antd/饿了么/taro的方案);因为组内组件使用了cssmodule,所以该方案不能适用我们的业务场景;4.[浏览器端涂色板换色方案](https://github.com/ElemeFE/element/issues/3054#issuecomment-282527907);所以最终方案分为两步:*编译阶段在sass-loader中注入颜色生成算法;*浏览器调色板可以使用element、taro的正则替换思路;###antd1.整理组件将和颜色相关的属性进行整理梳理出一份[default.less](https://github.com/ant-design/ant-design/blob/c6f991d5af/components/style/themes/default.less);2.整理一份[color.less](https://github.com/ant-design/ant-design/blob/c6f991d5af/components/style/color/colors.less)文件,颜色由[colorPalette.less](https://github.com/ant-design/ant-design/blob/c6f991d5af/components/style/color/colorPalette.less)动态生成;用户使用方式:1.选择一个颜色(切换主题色)2.下载3.引用###相关项目1.[theme-preview](实时换色方案):1.先把默认主题文件中涉及到颜色的CSS值替换成关键词：https://github.com/ElementUI/theme-preview/blob/master/src/app.vue#L250-L274;2.根据用户选择的主题色生成一系列对应的颜色值：https://github.com/ElementUI/theme-preview/blob/master/src/utils/formula.json;3.把关键词再换回刚刚生成的相应的颜色值：https://github.com/ElementUI/theme-preview/blob/master/src/utils/color.js;4.直接在页面上加style标签，把生成的样式填进去：https://github.com/ElementUI/theme-preview/blob/master/src/app.vue#L198-L211;2.[theme-chalk](https://github.com/ElementUI/theme-chalk);###scss中使用antd来自定义主题如果业务方使用less/css:基于cssmodules的hash不能覆盖的点，~~一个方案是本地打好包给业务方使用方案了(兜底方案)，但是比较笨重(相当于是要打包出多份不同的css样式文件在项目中了,然后业务方每要一种主题就要新增维护一份打包文件)~~如果业务方使用scss:如果cssmoduleshash不能去掉,有一个scss+cssvariable的方案可以代替sass-loader方案(成本是要写相应的插件);如果cssmoduleshash能去掉,可以使用之前提到的taro上的第一种方案,在app进入的地方引入主题色进行覆盖scssVariable;###自适应颜色`colorPalette`函数。RGB可以方便的进行计算机存储和读取,但对人进行颜色判断十分不友好,因此有了HSB/HSV。*RGB:面向硬件*HSB:面向用户HSB(Hue,Saturation,Brightness)分别表示色调(色相),饱和度,亮度。*[HSB模型](https://baike.baidu.com/item/HSB模型)*[HSV模型](https://baike.baidu.com/item/HSV/547122):有关H、S的解释这个更清晰*[antd色彩](https://ant.design/docs/spec/colors-cn)###VersionOne<details><summary>versionone</summary>```scss$theme-color:#1199ee!default;/*mixwhite*/@functiontint($theme-color,$percent){@returnmix(#fff,$theme-color,$percent);}/*mixblack*/@functionshade($theme-color,$percentage){@returnmix(black,$theme-color,$percentage);}/*Therearetencolorinontheme,fromlefttoright,theyare*tint($theme-color,50%),tint($theme-color,40%),tint($theme-color,30%),tint($theme-color,20%),tint($theme-color,10%),*$theme-color,shade($theme-color,10%),shade($theme-color,20%),shade($theme-color,30%),shade($theme-color,40%),*/@functioncolorPallete1($theme-color){@returntint($theme-color,50%);}@functioncolorPallete2($theme-color){@returntint($theme-color,40%);}@functioncolorPallete3($theme-color){@returntint($theme-color,30%);}/*悬停态*/@functioncolorPallete4($theme-color){@returntint($theme-color,20%);}@functioncolorPallete5($theme-color){@returntint($theme-color,10%);}/*主色*/@functioncolorPallete6($theme-color){@return$theme-color;}@functioncolorPallete7($theme-color){@returnshade($theme-color,10%);}/*点击态*/@functioncolorPallete8($theme-color){@returnshade($theme-color,20%);}@functioncolorPallete9($theme-color){@returnshade($theme-color,30%);}@functioncolorPallete10($theme-color){@returnshade($theme-color,40%);}```</details>###Sass踩坑`sass-loader`的options配置要参阅[sass文档](https://sass-lang.com/documentation/js-api)>Ithinkitl'snecessarytopromptwhatfeaturescanbeusedintheoptions.😄Andtheusageofthecustomfunctionisfoundin[thisissue](https://github.com/webpack-contrib/sass-loader/issues/210)insteadofdoc.*[sass中使用JavaScript的口子](https://sass-lang.com/documentation/js-api#new-types-color-red-green-blue-alpha-1)*[tinyColor](https://github.com/bgrins/TinyColor)###设计师的角度####关于悬浮态悬浮态颜色变浅:hover相当于按钮被鼠标吸起来了，所以上升后离光源更近，所以变白了。（类似前面某位同学提到的：距离越近越亮悬浮态颜色变深:商家/客服显示器很差，Hover上去底色变亮了字是白的，有些情况影响识别度###参阅资料*[聊一聊前端换肤](https://juejin.im/post/5ca41617f265da3092006155)*[AntDesign色板生成算法演进之路](https://zhuanlan.zhihu.com/p/32422584)###CSSVariableTODO:*全局/局部变量*或逻辑:var(--a,var(--b))"},{name:"性能指标.md",path:"/React/Component_Design/性能指标.md",type:"file",mdconf:{abbrlink:"bduq3cw2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:134,extension:".md",relative:"/React/Component_Design/性能指标.md",isEmpty:!1,content:"\x3c!--abbrlink:bduq3cw2--\x3e###link*[解读新一代Web性能体验和质量指标](https://juejin.cn/post/6844904168591736846)"},{name:"组件开发实践.md",path:"/React/Component_Design/组件开发实践.md",type:"file",mdconf:{abbrlink:"l25patvw"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6933,extension:".md",relative:"/React/Component_Design/组件开发实践.md",isEmpty:!1,content:"\x3c!--abbrlink:l25patvw--\x3e###循环引用的坑点在组件开发中引用方式写法如下:```tsximportPopupfrom'../Popup'importListfrom'../List'console.log(Popup,List)//fPopupfList```而不要使用如下写法:```tsximport{Popup,List}from'../index'//这样子引用会带进当前开发的组件本省console.log(Popup,List)//undefinedundefined```原因是因为下面这种写法会带进当前开发的组件本身从而导致循环引用。循环引用会导致在编译态输出的结果为undefined。###为什么要受控模式尽管受控模式相对非受控模式会多传入`value`、`onChange`属性,但它能有效避免组件库中碰到的一些反模式的坑。在Dan的[编写具有弹性的组件](https://overreacted.io/writing-resilient-components/)一文中写到如下几个原则:*不要将`props`赋给`state`理由:如果不结合`componentDidUpdate`使用会无法读取到更新的数据;结合了`componentDidUpdate`在其进行`setState`又会进行多一次的render。解决方案*直接在render中获取父组件传下来的数据;结合useMemo进行优化;*只使用受控组件或者只使用非受控组件;>针对一些复杂数据使用useMemo以及memorize-one进行处理。或者`hooks`中在render内使用`useMemo`;`class`中在render内使用`memorize-one`###关于Typescript与DefaultProps的冲突####class针对`TypeScript`中的`interface`中必填可填(是否带?可选)与React中的`defaultProps`是不兼容的。造成的影响是`defaultProps`里若是不填写完整`TypeScript`中的`interface`属性则会标红。为了解决这个现象解决方案如下：```tsinterface{mustFillIn:number,mayFillWithDefaultValue:number,//可选的带默认值的不用带上问号mayFillWithoutDefaultValue?:number//可选的不带默认值的带上问号}```在`TypeScript`中书写`React`时可以这样:```tsclassDividerextendsReact.Component<DividerProps,any>{staticdefaultProps:Pick<DividerProps,'mayFillWithDefaultValue'|'mayFillWithoutDefaultValue'>={mayFillWithDefaultValue:12345}render(){return(<div>demo</div>)}}```*Pick针对有必传值的场景做区分*interface中的?针对有默认值和无默认值做区分####hooks![](http://with.muyunyun.cn/764623d18eeb45724da661a0b6fbb679.jpg)###组件异步的设计*方式一:使用方通过返回Promise来告知组件已完成异步操作;```jsconstdemo=()=>{returnnewPromise((resolve)=>{setTimeout(()=>{console.log('模拟异步接口')resolve()},2000)})}```*方式二:使用方通过调用`done()`来告知组件已完成异步操作;(组件内完成对Promise的封装)```jsconstdemo=(done)=>{setTimeout(()=>{console.log('模拟异步接口')done()},2000)}```从组件设计的角度来说,方式一对组件内部的维护更加友好;从使用者的角度来说,方式二的使用更为便捷,但是重构的成本会变大。如下是针对方式二的组件的封装方式。```js//此处fn为外面传入的demo函数if(fn.length===1){newPromise((resolve:any)=>{fn(resolve)}).then(()=>{...})}```###组件样式覆盖的问题背景:业务a使用了组件包b以及工具包c,其中c也依赖了旧版本的b。此时业务a中会有两个组件包b的样式,此时会碰到修改了组件包b的样式,而样式被老版本的b覆盖的情况。这个时候有什么解决方法呢?*方案一:打包给样式带上版本号;*方案二:让工具包c把组件包b放在`pureDependencies`中,业务方的`dependency`统一维护组件包b;###业务中同时使用Button组件(包含Icon组件)与Icon组件如何避免Icon组件的样式打入两份?方法:src目录下的组件中的style文件中建立index.tsx文件###开源计划*完善mobile组件在pc端站点的浏览效果;*beast-mobile语言包支持、为后续站点切换双语环境做准备;*beast-mobile中、英文文章简版输出,调研专栏环境社区的创建(Medium、Twitter、知乎、Github、StackOverflow、SegmentFault);###组件通用API设计*onDisabled:(record:T)=>boolean*ListView、Checkbox组件公用;*场景:提供给业务更加充分的控制权###link*[The10ComponentCommandments](https://dev.to/selbekk/the-10-component-commandments-2a7f):组件开发方法总结,读下来感觉不错;###组件*scss*语义化样式模板*关联计算逻辑*post-install*e2e测试*randomnotes*沉淀一些常⻅的测试模式,并形成易用的utils(mock&helper)一些参考关键词:date,timer,async&promise,random,user-agent,browserfeaturedetect,console,process.env,jsdomlayout*科学使用snapshot*jest的test.todo挺不错*通过写测试的过程,反过来思考组件发现遗漏Edgecases,实现是否合理可能react-testing-library会更好(enzyme可直接访问state,容易写出一些没意义的测试)*sass技巧*沉淀functionutils,并统一维护•善用list&map维护枚举型配置•善用`interpolation`,让同质化分支模版化•逻辑关系组织:如“颜色管理方案”*[plop](https://github.com/plopjs/plop)*将重复性繁琐工作打包*善用内容型模板*创建一个组件子包•创建一个React组件(classorfunctional)•创建一个完整的demo⻚面•创建一个单独的democase•将组件追加到某个合包里*如何统计组件使用量DRY原则:Don'tRepeatYouselfSomeoftheseCSSpropertieshaveshorthandversionsthatusethenamespaceasthepropertyname.Forthese,youcanwriteboththeshorthandvalueandthemoreexplicitnestedversions.```scss.info-page{margin:auto{bottom:10px;top:2px;}}```###组件属性间尽量减少耦合关系比如添加了A属性B属性在某些情况会失效。又或者C属性必须在D属性存在的时候才生效。比如以Upload组件为例:背景逻辑是:最大上传图片数量是2,当上传了2张图片以后就不显示继续上传了。```jsshowAdd=()=>{const{selectable,maxLength,files}=this.propsif(maxLength!==undefined){if(files.length>=maxLength){returnfalse}returntrue}returnselectable}```业务方举了反例:例如有些商品图片是标品，图片是平台自己控制的，也许不满足最大数，但是不允许商家去修改的。配置了maxLength={10},图片数量只有3张时,不显示增加按钮的需求当前就不能实现。"},{name:"重新认识受控与非受控组件.md",path:"/React/Component_Design/重新认识受控与非受控组件.md",type:"file",mdconf:{abbrlink:"56hn38ez"},birthtime:"2022-01-16",mtime:"2022-01-16",size:8012,extension:".md",relative:"/React/Component_Design/重新认识受控与非受控组件.md",isEmpty:!1,content:"\x3c!--abbrlink:56hn38ez--\x3e###组件设计——重新认识受控与非受控组件![](http://with.muyunyun.cn/21ec115261725fc7a37543143c1e89ed.jpg-400)###重新定义受控与非受控组件的边界![](http://with.muyunyun.cn/3e1327ce86f89d2763d8fed9c169887d.jpg-400)[React官网中](https://reactjs.org/docs/uncontrolled-components.html)对非受控组件与受控组件作了如图中下划线的边界定义。一经推敲,该定义是缺乏了些`完整性`和`严谨性`的,比如针对非表单组件(弹框、轮播图)如何划分受控与非受控的边界?又比如非受控组件是否真的如文案上所说的数据的展示与变更都由dom自身接管呢?在非受控组件中,通常业务调用方只需传入一个`初始默认值`便可使用该组件。以Input组件为例:```js//组件提供方functionInput({defaultValue}){return<inputdefaultValue={defaultValue}/>}//调用方functionDemo(){return<InputdefaultValue={1}/>}```在受控组件中,数值的`展示与变更`则分别由组件的`state`与`setState`接管。同样以Input组件为例:```js//组件提供方functionInput(){const[value,setValue]=React.useState(1)return<inputvalue={value}onChange={e=>setValue(e.target.value)}/>}//调用方functionDemo(){return<Input/>}```有意思的一个问题来了,`Input`组件到底是受控的还是非受控的?我们甚至还可以对代码稍加改动成`<InputdefaultValue={1}/>`的最初调用方式:```js//组件提供方functionInput({defaultValue}){const[value,setValue]=React.useState(defaultValue)return<inputvalue={value}onChange={e=>setValue(e.target.value)}/>}//调用方functionDemo(){return<InputdefaultValue={1}/>}```尽管此时Input组件本身是一个受控组件,但与之相对的调用方失去了更改Input组件值的`控制权`,所以对调用方而言,Input组件是一个非受控组件。值得一提的是,`以非受控组件的使用方式去调用受控组件`是一种反模式,在下文中会分析其中的弊端。如何做到不管对于组件提供方还是调用方Input组件都为受控组件呢?提供方让出控制权即可,调整代码如下[codesandbox](https://codesandbox.io/s/clever-montalcini-kysbg)```js//组件提供方functionInput({value,onChange}){return<inputvalue={value}onChange={onChange}/>}//调用方functionDemo(){const[value,setValue]=React.useState(1)return<Inputvalue={value}onChange={e=>setValue(e.target.value)}/>}```经过上述代码的推演后,概括如下:受控以及非受控组件的边界划分取决于`当前组件对于子组件值的变更是否拥有控制权`。如若有则该子组件是当前组件的受控组件;如若没有则该子组件是当前组件的非受控组件。###职能范围基于调用方对于受控组件拥有控制权这一认知,因此受控组件相较非受控组件能赋予调用方更多的定制化职能。这一思路与软件开发中的[开放/封闭原则](https://baike.baidu.com/item/%E5%BC%80%E6%94%BE%E5%B0%81%E9%97%AD%E5%8E%9F%E5%88%99)有异曲同工之妙,同时让笔者受益匪浅的[InversionofControl](https://kentcdodds.com/blog/inversion-of-control)也是类似的思想。借助受控组件的赋能,以Input组件为例,比如调用方可以更为自由地对值进行校验限制,又比如在值发生变更时执行一些额外逻辑。```js//组件提供方functionInput({value,onChange}){return<inputvalue={value}onChange={onChange}/>}//调用方functionDemo(){const[value,setValue]=React.useState(1)return<Inputvalue={value}onChange={e=>//只支持数值的变更if(/\\D/.test(e.target.value))returnsetValue(e.target.value)}/>}```因此综合基础组件`扩展性`与`通用性`的考虑,受控组件的职能相较非受控组件更加宽泛,建议`优先使用受控组件`来构建基础组件。###反模式——以非受控组件的使用方式调用受控组件首先何谓反模式(可以看文末的案例)?笔者将其总结为`增大隐性bug出现概率的模式`,该模式是`最佳实践的对立经验`。如若使用了反模式就不得不花更多的精力去避免潜在bug。官网对反模式也有很好的[概括总结](https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#common-bugs-when-using-derived-state)。缘何上文提到以非受控组件的使用方式去调用受控组件是一种反模式?观察Input组件的第一行代码,其将defaultValue赋值给value,这种`将props赋值给state`的赋值行为在一定程度上会增加某些隐性bug的出现概率。比如在切换导航栏的场景中,恰巧两个导航中传进组件的defaultValue是相同的值,在导航切换的过程中便会将导航一中的Input的状态值带到导航二中,这显然会让使用方感到困惑。[codesandbox](https://codesandbox.io/s/controllerinput-bobkp)```js//组件提供方functionInput({defaultValue}){//反模式const[value,setValue]=React.useState(defaultValue)React.useEffect(()=>{setValue(defaultValue)},[defaultValue])return<inputvalue={value}onChange={e=>setValue(e.target.value)}/>}//调用方functionDemo({defaultValue}){return<InputdefaultValue={defaultValue}/>}functionApp(){const[tab,setTab]=React.useState(1)return(<>{tab===1?<DemodefaultValue={1}/>:<DemodefaultValue={1}/>}<buttononClick={()=>(tab===1?setTab(2):setTab(1))}>切换Tab</button></>)}```如何避免使用该反模式同时有效解决问题呢?官方提供了两种较为优质的解法,笔者将其留给大家思考。1.方法一:[使用完全受控组件](https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-controlled-component)(更为推荐)2.方法二:[使用完全非受控组件+key](https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-uncontrolled-component-with-a-key)###反模式案例*使用过`getDerivedStateFromProps`么?了解它的反模式么?如何避免?来看下使用Derived会导致的常见bug:####反模式一:无条件复制props到state案例:在开发`Picker组件`的时候,如下图浮层内的数据源有外部传进的props属性以及浮层内进行滑动的state。![](http://with.muyunyun.cn/7614ba8c5be96ee769b8a68112848700.jpg)如果这样子写大家看看是否有问题```jsclassPickerextendsComponent{state={data:this.props.data}getDerivedStateFromProps(props,state){if(JSON.stringify(props.data)!==JSON.stringify(state.data)){return{data:props.data}}returnnull}...}```这样子写代码当在浮层上进行滑动时,state的变化并不会生效,这是为什么呢,官网上截图如下![](http://with.muyunyun.cn/1d13387bf1d927c36cf3d1a0feaf3134.jpg)此时的state变化使Picker父组件重新render后会造成`getDerivedStateFromProps`的调用,导致JSON.stringify(props.data)、JSON.stringify(state.data)间一直会不相等,所以返回的一直是props。####反模式二:当props改变的时候执行重置state```jsclassPickerextendsComponent{state={data:this.props.data}getDerivedStateFromProps(props,state){if(JSON.stringify(props.data)!==JSON.stringify(this.props.data)){return{data:props.data}}returnnull}...}```这样子比第一种情况好,大多数情况是没问题的。但是有时候会出现`JSON.stringify(props.data)`、`JSON.stringify(this.props.data)`相等的情况,这种情况下这样使用就会失效了。"}],type:"directory",size:64420},{name:"Fiber数据结构.md",path:"/React/Fiber数据结构.md",type:"file",mdconf:{abbrlink:"f3uuo1ij"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4516,extension:".md",relative:"/React/Fiber数据结构.md",isEmpty:!1,content:"\x3c!--abbrlink:f3uuo1ij--\x3e###Fiber的数据结构此小节会通过两个`demo`来展示`StackReconciler`以及`FiberReconciler`的数据结构。![](http://with.muyunyun.cn/7621091ae74df1bbd8b00586128a7d44.jpg-300v)首先用代码表示上图节点间的关系。比如`a1节点`下有`b1、b2、b3节点`,就可以把它们间的关系写成`a1.render=()=>[b1,b2,b3]`;```jsvara1={name:'a1',render=()=>[b1,b2,b3]}varb1={name:'b1',render=()=>[c1]}varb2={name:'b2',render=()=>[c2]}varb3={name:'b3',render=()=>[]}varc1={name:'c1',render=()=>[d1]}varc2={name:'c2',render=()=>[]}vard1={name:'d1',render=()=>[d2]}vard2={name:'d2',render=()=>[]}```####StackReconciler在`React16`之前，节点之间的关系可以用数据结构中`树的深度遍历`来表示。如下实现`walk`函数,将深度遍历的节点打印出来。```jswalk(a1)functionwalk(instance){if(!instance)returnconsole.log(instance.name)instance.render().map(walk)}```输出结果为:`a1b1c1d1d2b2c2b3`####FiberReconciler在`React16`中，节点之间的关系可以用数据结构中的`链表`来表示。节点之间的链表有三种情形,用图表示如下:![](http://with.muyunyun.cn/d7378495a2f16e9058c80326705465f4.jpg-300v)1.父节点到子节点(红色虚线)2.同层节点(黄色虚线)3.子节点到父节点(蓝色虚线)>父节点指向第一个子节点,每个子节点都指向父节点，同层节点间是单向链表。首先,构建节点的数据结构,如下所示:```jsvarFiberNode=function(instance){this.instance=instancethis.parent=nullthis.sibling=nullthis.child=null}```然后创建一个将节点串联起来的`connect`函数:```jsvarconnect=function(parent,childList){parent.child=childList.reduceRight((prev,current)=>{constfiberNode=newFiberNode(current)fiberNode.parent=parentfiberNode.sibling=prevreturnfiberNode},null)returnparent.child}```>在JavaScript中实现链表的数据结构可以巧用reduceRight`connect`函数中实现了上述链表关系。可以像这样使用它:```jsvarparent=newFiberNode(a1)varchildFirst=connect(parent,a1.render())```这样子便完成了`a1节点`指向`b1节点`的链表、`b1、b2、b3节点间`的单向链表以及`b1、b2、b3节点`指向`a1节点`的链表。最后剩下`goWalk`函数将全部节点给遍历完。```js//打印日志以及添加列表varwalk=function(node){console.log(node.instance.name)constchildLists=node.instance.render()letchild=nullif(childLists.length>0){child=connect(node,childLists)}returnchild}vargoWalk=function(root){letcurrentNode=rootwhile(true){constchild=walk(currentNode)//如果有子节点if(child){currentNode=childcontinue}//如果没有相邻节点,则返回到父节点while(!currentNode.sibling){currentNode=currentNode.parentif(currentNode===root){return}}//相邻节点currentNode=currentNode.sibling}}//调用goWalk(newFiberNode(a1))```打印结果为`a1b1c1d1d2b2c2b3``Fiber`在一个节点上的执行流程总结如下:*在当前节点下寻找是否有子节点*若有,则进入子节点*若没有,则在当前节点下寻找是否有下一个相邻节点*若有,则进入下一个相邻节点*若没有,则返回它的父节点###FiberReconciler的优势通过分析上述两种数据结构实现的代码，可以得出下面结论:*基于树的深度遍历实现的Reconciler:一旦进入调用栈便无法暂停;*基于链表实现的Reconciler:在`while(true){}`的循环中,可以通过`currentNode`的赋值重新得到需要操作的节点，而在赋值之前便可以'暂停'来执行其它逻辑,这也是`requestIdleCallback`能得以在`FiberReconciler`的原因。###相关链接*[ThehowandwhyonReact’susageoflinkedlistinFibertowalkthecomponent’stree](https://medium.com/react-in-depth/the-how-and-why-on-reacts-usage-of-linked-list-in-fiber-67f1014d0eb7)*[FiberPrinciples:ContributingToFiber](https://github.com/facebook/react/issues/7942):Fiber设计思想相关issue,推荐。"},{name:"Profiler.md",path:"/React/Profiler.md",type:"file",mdconf:{abbrlink:"93kcvu18"},birthtime:"2022-01-16",mtime:"2022-01-16",size:318,extension:".md",relative:"/React/Profiler.md",isEmpty:!1,content:"\x3c!--abbrlink:93kcvu18--\x3e###what'smeansfor0.6msof2.6ms![](http://with.muyunyun.cn/78812d5ed8f8bc0860f13d644f03cadb.jpg)Thefirstnumber(0.6ms)istheselfdurationandthesecondnumber(2.6ms)istheactualduration.Mostlytheselfdurationistheactualdurationminusthetimespentonthechildren."},{name:"React-DevTools.md",path:"/React/React-DevTools.md",type:"file",mdconf:{abbrlink:"9l5ruk3t"},birthtime:"2022-01-16",mtime:"2022-01-16",size:294,extension:".md",relative:"/React/React-DevTools.md",isEmpty:!1,content:"\x3c!--abbrlink:9l5ruk3t--\x3e###ReactDevTools-[x][React-DevTools4.0Changelog](https://github.com/facebook/react/blob/master/packages/react-devtools/CHANGELOG.md#400-august-15-2019);-[x][react-devtools-tutorial](https://react-devtools-tutorial.now.sh):配合上面Changelog使用;"},{name:"React16.x特性剪辑.md",path:"/React/React16.x特性剪辑.md",type:"file",mdconf:{abbrlink:"v5nv35eg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:10797,extension:".md",relative:"/React/React16.x特性剪辑.md",isEmpty:!1,content:"\x3c!--abbrlink:v5nv35eg--\x3e##React特性剪辑(版本16.0~16.9)>Beforeyou'regoingtohateit,thenyou'regoingtoloveit.![](http://with.muyunyun.cn/18be54d827e9dde7d9e29d029e329334.jpg-400)###ConcurrentRender(贯穿16)在18年的[JSConfIceland](https://www.youtube.com/watch?v=v6iR3Zk4oDY)上,Dan神提到ConcurrentRender涉及到CPU以及IO这两方面。![](http://with.muyunyun.cn/1daa3d783a4a7ed7f742882a08a3aa09.jpg-400)TimeSlicing对应解决左侧的问题,Suspense对应解决了右侧的问题。它们共同要解决的是的提升用户体验,在更多的场景下都可以做到`可交互`。而Fiber架构是上述两者的基石。####TimeSlicing在16之前的版本的渲染过程可以想象成一次性潜水30米,在这期间做不了其它事情(StackReconciler);![](http://with.muyunyun.cn/39db8e34ec1ce048695c3bde132a739e.jpg-200)痛点概括:*一次性渲染到底*中途遇到优先级更高的事件无法调整相应的顺序接着拿上面的潜水例子为例,现在变为可以每次潜10米,分3个chunk进行;chunk和chunk之间通过链表连接;chunk间插入优先级更高的任务,先前的任务被抛弃。![](http://with.muyunyun.cn/02a6b5ac36b12b3c676157ef3985fe4a.jpg-200)>开启Fiber后,获取异步数据的方法应放到render后面的生命周期钩子里(phase2阶段)进行,因为render前面的生命周期钩子(phase1阶段)会被执行多次>注意:并没有缩短原先组件的渲染时间(甚至还加长了),但用户却能感觉操作变流畅了。>[requestIdleCallback()](https://developers.google.com/web/updates/2015/08/using-requestidlecallback):借力此api,浏览器能在空闲的时间处理低优先级的事。####Suspense(16.6,16.8,16.9)Suspense意思是能暂停当前组件的渲染,当完成某件事以后再继续渲染。*`codesplitting`(16.6,已上线):文件懒加载。在此之前的实现方式是[react-loadable](https://github.com/jamiebuilds/react-loadable);*`Concurrentmode`(2019年Q1季度):并发模式;*`datafetching`(2019年中):可以控制等所有数据都加载完再呈现出数据;`Suspense`提供一个时间参数,若小于这个值则不进行`loading`加载,若超过这个值则进行`loading`加载;```jsimportReact,{lazy,Suspense}from'react'constOtherComponent=lazy(()=>import('./OtherComponent'))functionMyComponent(){return(<Suspensefallback={<div>loading...</div>}><OtherComponent/></Suspense>)}```一种简单的预加载思路,可参考[preload](https://medium.com/@pomber/lazy-loading-and-preloading-components-in-react-16-6-804de091c82d)```jsconstOtherComponentPromise=import('./OtherComponent');constOtherComponent=React.lazy(()=>OtherComponentPromise);```###render新增的返回类型在React16版本中render()增加了一些返回类型,到目前为止支持的返回类型如下:*Reactelements.*Arraysandfragments.*Portals.*Stringandnumbers.*Booleansornull.>[render](https://reactjs.org/docs/react-component.html#render)其中render()支持返回Arrays能让我们少写一个父节点,如下所示:```jsconstrenderArray=()=>[<divkey=\"A\">A</div><divkey=\"B\">B</div>]```>render()支持返回数组的特性类似[Fragments](https://reactjs.org/docs/fragments.html)(16.2),使用Fragments可以不用写key。###Portals(传送门)将React子节点渲染到指定的节点上案例:实现一个Modal组件,[demo](https://codepen.io/gaearon/pen/yzMaBd)另外关于Portals做到冒泡到父节点的兄弟节点这个现象,[demo](https://codepen.io/gaearon/pen/jGBWpE),我想可以这样子实现:如果组件返回是Portal对象,则将该组件的父组件的上的事件copy到该组件上。其实并不是真的冒泡到了父节点的兄弟节点上。###ErrorBoundariesReact16提供了一个新的错误捕获钩子`componentDidCatch(error,errorInfo)`,它能将子组件生命周期里所抛出的错误捕获,防止页面全局崩溃。[demo](https://codepen.io/gaearon/pen/wqvxGa?editors=0010)componentDidCatch并不会捕获以下几种错误*事件机制抛出的错误(事件里的错误并不会影响渲染)*ErrorBoundaries自身抛出的错误*异步产生的错误*服务端渲染###服务端渲染服务端渲染一般是作为最后的优化手段,这里浅显(缺乏经验)谈下React16在其上的优化。在React16版本中引入了`React.hydrate()`,它的作用主要是将相关的事件`注水`进`html`页面中,同时会比较前端生成的`html`和服务端传到前端的`html`的文本内容的差异,如果两者不一致将前端产生的文本内容替换服务端生成的(忽略属性)。###支持自定义属性在React16版本中,支持自定义属性(推荐`data-xxx`),因而React可以少维护一份attribute白名单,这也是React16体积减少的一个重要因素。###Context(16.3、16.6)Context相当于是用组件化的方式使用global,使用其可以共享认证的用户、首选语言(国际化)等一些全局的信息,而不必通过组件一层层传递。以下是比较冗余的传递:```js<PageriderId={riderId}/>//...whichrenders...<RiderDetailriderId={riderId}/>//...whichrenders...<RiderLevelriderId={riderId}/>//...whichrenders...<AvatarriderId={riderId}/>```在`Context`之前可以传递`<Avatar>`本身(ComponentComposition的思想),写法如下:```jsfunctionPage(props){constavatar=<AvatarriderId={props.riderId}/>return<RiderDetailavatar={avatar}/>}<PageriderId={riderId}/>//...whichrenders...<RiderDetailavatar={avatar}/>//...whichrenders...<RiderLevelavatar={avatar}/>//...whichrenders...{props.avatar}```接着是使用`Context`书写的例子,写法如下:```jsconstRiderContext=React.createContext(1)//这里为默认值functionPage(props){constriderId=props.riderIdreturn(<RiderContext.Providervalue={riderId}><RiderDetail/></RiderContext.Provider>)}functionRiderDetail(){return<RiderLevel/>}classRiderLevelextendsReact.Component{staticcontextType=RiderContextrender(){return<Avataravatar={this.context}/>;}}```###新的生命周期(16.3)![](https://user-images.githubusercontent.com/12389235/41266906-b6a6e75a-6e2b-11e8-8266-9597b2d57f11.png)在未来17的版本中,将移除的生命周期钩子如下:*`componentWillMount()`:移除这个api基于以下两点考虑:*服务端渲染:在服务端渲染的情景下,componentWillMount执行完立马执行render会导致componentWillMount里面执行的方法(获取数据,订阅事件)并不一定执行完;*ConcurrentRender:在fiber架构下,render前的钩子会被多次调用,在componentWillMount里执行订阅事件就会产生内存泄漏;>迁移思路,将以前写在`componentWillMount`的获取数据、时间订阅的方法写进`componentDidMount`中;*`componentWillReceiveProps(nextProps)`:移除这个api基于如下考虑:*语义不太契合逻辑*phase1阶段会多次调用新的钩子`getDerivedStateFromProps()`更加纯粹,它做的事情是将新传进来的属性和当前的状态值进行对比,若不一致则更新当前的状态。```jsgetDerivedStateFromProps(nextProps,prevState){if(nextProps.riderId!==prevState.riderId){return{riderId:nextProps.riderId}}//返回null则表示state不用作更新returnnull}```另外关于componentWillReceiveProps()在15里大量使用的一个场景:比如切换tab时都要重新获取当前页面的数据,之前通常会这么做:```jscomponentWillReceiveProps(nextProps){if(nextProps.riderId!==this.props.riderId){fetchData(nextProps.riderId)}}```在16中可以使用memoize来代替,写法如下:```jsimportmemoizefrom\"memoize-one\"classDemoextendsReact.Component{fetchDataDemo=memoize((riderId)=>fetchData(riderId))componentDidUpdate(){fetchDataDemo(this.props.riderId)}}```*`componentWillUpdate()`:目前将其理解为和`componentWillMount`一样的情况在React16.3的版本中,新加入了两个生命周期:*`getDerivedStateFromProps(nextProps,prevState)`:更加语义化,用来替代`componentWillMount()`和`componentWillReceiveProps(nextProps)`;*`getSnapshotBeforeUpdate(prevProps,prevState)`:可以将该钩子返回的结果传入componentDidUpdate的第三个参数中,从而达到dom数据统一。用来替代componentWillUpdate();>具体demo可见[UpdateonAsyncRendering](https://react.docschina.org/blog/2018/03/27/update-on-async-rendering.html#initializing-state)###React.memo(16.6)`React.memo`是一个高阶组件,它使无状态组件拥有有状态组价中的`shouldComponentUpdate()`以及`PureComponent`的能力。```jsconstMyComponent=React.memo(functionMyComponent(props){...})```###Hooks(16.7)在React16.7之前,React有两种形式的组件,有状态组件(类)和无状态组件(函数)。Hooks的意义就是赋能先前的无状态组件,让之变为有状态。这样一来更加契合了React所推崇的函数式编程。接下来梳理Hooks中最核心的2个api,`useState`和`useEffect`####useStateuseState返回状态和一个更新状态的函数```jsconst[count,setCount]=useState(initialState)```使用Hooks相比之前用class的写法最直观的感受是更为简洁```jsfunctionApp(){const[count,setCount]=useState(0)return(<div><p>Youclicked{count}times</p><buttononClick={()=>setCount(count+1)}>Clickme</button></div>)}```####useEffect(fn)在每次render后都会执行这个钩子。可以将它当成是`componentDidMount`、`componentDidUpdate`、`componentWillUnmount`的合集。因此使用useEffect比之前优越的地方在于:1.可以避免在`componentDidMount、componentDidUpdate`书写重复的代码;2.可以将关联逻辑写进一个`useEffect`(在以前得写进不同生命周期里);###React的未来![](http://with.muyunyun.cn/fd1dd7ca2ba34bebef2d489c63befa25.jpg-200)今年的ReactConf的一张图,可以看到React从出来到现在势头呈稳健上升趋势,并在2018年这个节点上把Jquery拉下了王座。但可以看见React未来还有一段很长的路要走。###相关链接*[reactjs.org](https://reactjs.org/blog/all.html)"},{name:"React17.md",path:"/React/React17.md",type:"file",mdconf:{abbrlink:"xvnmyonq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1204,extension:".md",relative:"/React/React17.md",isEmpty:!1,content:"\x3c!--abbrlink:xvnmyonq--\x3e###React17*![](http://with.muyunyun.cn/1b3163fff33edde81761d580e40f0725.jpg)*17版本之后支持多版本共存。mark,后续跟进。*冒泡机制更改:向原生靠拢;*降低开发心智;###React18####automaticbatchingsetState*React18默认支持在setTimeout、fetch中,automaticbatchingsetState。[discussion](https://github.com/reactwg/react-18/discussions/21)####startTransition*[startTransition](https://github.com/reactwg/react-18/discussions/41)>InatypicalReactapp,mostupdatesareconceptuallytransitionupdates.Butforbackwardscompatibilityreasons,transitionsareopt-in.Bydefault,React18stillhandlesupdatesasurgent,andyoucanmarkanupdateasatransitionbywrappingitintostartTransition.####NewSuspenseSSRArchitectureinReact18*[NewSuspenseSSRArchitectureinReact18](https://github.com/reactwg/react-18/discussions/37)*React18:StreamingHTMLandSelectiveHydration-[][marko](https://tech.ebayinc.com/engineering/async-fragments-rediscovering-progressive-html-rendering-with-marko/)###link*[react-v17](https://reactjs.org/blog/2020/08/10/react-v17-rc.html)"},{name:"React_Hooks深入系列.md",path:"/React/React_Hooks深入系列.md",type:"file",mdconf:{abbrlink:"t3in9kmo"},birthtime:"2022-01-16",mtime:"2022-01-16",size:8172,extension:".md",relative:"/React/React_Hooks深入系列.md",isEmpty:!1,content:"\x3c!--abbrlink:t3in9kmo--\x3e###ReactHooks深入系列在class已经融入React生态的节点下,React推出的Hooks具有如下优势:*更简洁的书写;*相对类中的`HOC`与`renderProps`,Hooks拥有更加自由地组合抽象的能力;###使用Hooks的注意项*在`hooks`中每一次`render`都有自己的`state`和`props`,这与`class`中存在差异,见[Hooks每次渲染都是闭包](https://overreacted.io/a-complete-guide-to-useeffect/#each-render-has-its-own-everything)*`class`中可以用闭包模拟`hooks`的表现,[链接](https://codesandbox.io/s/w7vjo07055),`hooks`中可以使用`ref`模拟`class`的表现,[链接](https://codesandbox.io/s/rm7z22qnlp);*写出useEffect的所用到的依赖在以下demo中,`useEffect`的第二个参数传入`[]`,希望的是`useEffect`里的函数只执行一次(类似在`componentDidMount`中执行一次,但是注意这里仅仅是`类似`,详细原因见上一条注意项),页面上每隔1s递增1。```jsfunctionDemo(){const[count,setCount]=useState(0);useEffect(()=>{constid=setInterval(()=>{setCount(count+1);},1000);return()=>{clearInterval(id);};},[]);returncount;}```但这样达到我们预期的效果了么?[demo](https://codesandbox.io/s/n3o2m1wpj4),可以看到界面上只增加到1就停止了。原因就是传入的第二个参数`[]`搞的鬼,`[]`表示没有外界状态对`effect`产生干扰。流程大致如下:1.第一次调用`useEffect`传入的`count`为0,于是`setCount(0+1)`;2.受`useEffect`第二个参数`[]`的影响，`count`仍然为0,所以相当于还是`setCount(0+1)`;那如何修正上述问题呢?方法有两个(方法一为主,方法二为辅):*方法一:将`[]`改为`[count]`*方法二:将`setCount(count+1)`改为`setCount(count=>count+1)`。这种方法的思想是修正状态的值而不依赖外面传进的状态。不过遇到`setCount(count=>count+1)`的情况就可以考虑使用`useReducer`了。####何时使用useReducer使用`useState`的地方都能用`useReducer`进行替代。相较`useState`,`useReducer`有如下优势:*`useReducer`将`how`(reducer)和`what`(dispatch(action))进行抽离;使用`reducer`逻辑状态进行集中化维护;*相比useState,useReducer没有[闭包问题](https://overreacted.io/a-complete-guide-to-useeffect/#each-render-has-its-own-everything);*当状态的一个state依赖状态中的另一个state时,这种情况最好使用`useReducer`;可以参考[decoupling-updates-from-actions](https://overreacted.io/a-complete-guide-to-useeffect/#decoupling-updates-from-actions)中Dan列举的demo。####处理useEffect中的公用函数```jsfunctionDemo(){const[count,setCount]=useState(0);functiongetFetchUrl(query){return`http://demo${query}`}useEffect(()=>{consturl=getFetchUrl('react')},[getFetchUrl]);useEffect(()=>{consturl=getFetchUrl('redux')},[getFetchUrl]);returncount;}```此时`useEffect`中传入的第二个参数`getFetchUrl`相当于每次都是新的,所以每次都会请求数据,那除了`[getFetchUrl]`将改为`[]`这种不推荐的写法外，有两种解决方法:*.方法一:提升`getFetchUrl`的作用域;*.方法二:使用`useCallback`或者`useMemo`来包裹getFetchUrl;>`React.memo`修饰一个函数组件,`useMemo`修饰一个函数。它们本质都是运用缓存。###ReactHooks内部是怎么工作的为了理解ReactHooks内部实现原理,对`useState`、`useEffect`进行了简单的实现。####useState的简单实现使用闭包来实现`useState`的简单逻辑:```js//这里使用闭包constReact=(function(){let_valreturn{useState(initialValue){_val=_val||initialValuefunctionsetVal(value){_val=value}return[_val,setVal]}}})()```测试如下:```jsfunctionCounter(){const[count,setCount]=React.useState(0)return{render:()=>console.log(count),click:()=>setCount(count+1)}}Counter().render()//0Counter().click()//模拟点击Counter().render()//1```####useEffect的简单实现```jsvarReact=(function(){let_val,_depsreturn{useState(initialValue){_val=_val||initialValuefunctionsetVal(value){_val=value}return[_val,setVal]},useEffect(callback,deps){constifUpdate=!deps//判断Deps中的依赖是否改变constifDepsChange=_deps?!_deps.every((r,index)=>r===deps[index]):trueif(ifUpdate||ifDepsChange){callback()_deps=deps||[]}}}})()```测试代码如下:```jsvar{useState,useEffect}=ReactfunctionCounter(){const[count,setCount]=useState(0)useEffect(()=>{console.log('useEffect',count)},[count])return{render:()=>console.log('render',count),click:()=>setCount(count+1),noop:()=>setCount(count),//保持不变,观察useEffect是否被调用}}Counter().render()//'useEffect'0,'render',0Counter().noop()Counter().render()//'render',0Counter().click()Counter().render()//'useEffect'1,'render',1```####处理多次调用的情形为了在`hooks`中能使用多次`useState`,`useEffect`,将各个`useState`,`useEffect`的调用存进一个数组中,在上面基础上进行如下改造:```jsconstReact=(function(){consthooks=[]letcurrentHook=0return{render(Component){constcomponent=Component()component.render()currentHook=0//重置,这里很关键,将hooks的执行放到hooks队列中,确保每次执行的顺序保持一致。returncomponent},useState(initialValue){hooks[currentHook]=hooks[currentHook]||initialValuefunctionsetVal(value){hooks[currentHook]=value}return[hooks[currentHook++],setVal]},useEffect(callback,deps){constifUpdate=!deps//判断Deps中的依赖是否改变constifDepsChange=hooks[currentHook]?!hooks[currentHook].every((r,index)=>r===deps[index]):trueif(ifUpdate||ifDepsChange){callback()hooks[currentHook++]=deps||[]}}}})()```测试代码如下:```jsvar{useState,useEffect}=ReactfunctionCounter(){const[count,setCount]=useState(0)const[type,setType]=useState('hi')useEffect(()=>{console.log('useEffect',count)console.log('type',type)},[count,type])return{render:()=>console.log('render',count),click:()=>setCount(count+1),noop:()=>setCount(count),//保持不变,观察useEffect是否被调用}}/*如下mock执行了useEffect、render;这里使用React.render的原因是为了重置currentHook的值*/letcomp=React.render(Counter)//useEffect0typehirender0/*如下mock只执行了render*/comp.noop()comp=React.render(Counter)//render0/*如下mock重新执行了useEffect、render*/comp.click()React.render(Counter)//useEffect1,render1```###相关资源*[awesome-react-hooks](https://github.com/rehooks/awesome-react-hooks)*[usehooks](https://github.com/gragland/usehooks)*[deep-dive-how-do-react-hooks-really-work](https://www.netlify.com/blog/2019/03/11/deep-dive-how-do-react-hooks-really-work/)*[a-complete-guide-to-useeffect](https://overreacted.io/a-complete-guide-to-useeffect/):推荐Dan的这篇文章*[Hooks,State,Closures,anduseReducer](https://adamrackis.dev/state-and-use-reducer/):作为[decoupling-updates-from-actions](https://overreacted.io/a-complete-guide-to-useeffect/#decoupling-updates-from-actions)的补充*[ShouldIuseStateoruseReducer](https://kentcdodds.com/blog/should-i-usestate-or-usereducer/):"},{name:"React_Hooks设计模式.md",path:"/React/React_Hooks设计模式.md",type:"file",mdconf:{abbrlink:"96j58x88"},birthtime:"2022-01-16",mtime:"2022-01-16",size:13656,extension:".md",relative:"/React/React_Hooks设计模式.md",isEmpty:!1,content:"\x3c!--abbrlink:96j58x88--\x3e###ReactLogo与Hooks![](http://with.muyunyun.cn/ddbdcec2fc39ba350fc74647f4fad6f5.jpg-300)React的logo是一个原子图案,原子组成了物质的表现。类似的,React就像原子般构成了页面的表现;而Hooks就如夸克,其更接近React本质的样子,但是直到4年后的今天才被真正设计出来。——DaninReactConf(2018)###WHYHOOKS?*`多个组件间逻辑复用`:在Class中使用React不能将带有state的逻辑给单独抽离成function,其只能通过嵌套组件的方式来解决多个组件间逻辑复用的问题,基于嵌套组件的思想存在[HOC](https://github.com/MuYunyun/blog/blob/master/React/从0到1实现React/8.HOC探索.md)与`renderprops`两种设计模式。但是这两种设计模式是否存在缺陷呢?*嵌套地狱,当嵌套层级过多后,数据源的追溯会变得十分困难,导致定位bug不容易;(hoc、renderprops)*性能,额外的组件实例需要存在额外的开销;(Hoc、Renderprops)*命名重复性,在一个组件中同时使用多个hoc,不排除这些hoc里的方法存在命名冲突的问题;(hoc)*`单个组件中的逻辑复用`:Class中的生命周期`componentDidMount`、`componentDidUpdate`甚至`componentWillUnMount`中的大多数逻辑基本是类似的,必须拆散在不同生命周期中维护相同的逻辑对使用者是不友好的,这样也造成了冗余的组件代码量。*Class的其它一些问题:书写Class组件时需要大量样板代码,用户通常会对Class中Constructor的bind以及this的使用感到困惑(Todo:举例);当Class与TypeScript结合一起使用时,需要对defaultValue做额外声明处理;此外ReactTeam表示Class在机器编译优化方面也不是很理想。*[Vue:Update:theClassAPIproposalisbeingdropped.](https://github.com/vuejs/rfcs/pull/17#issuecomment-494242121)-------2020.07.19-------*组件重构*ReactHooks的常见陷阱*闭包陷阱,(useInterval,useFetch)*Hooks规则陷阱(见花媛最新聊天记录),eslint-hooks插件*Hooks不能做到?*Matrix组件*[https://zhuanlan.zhihu.com/p/103150605],分享一篇流畅风趣的hooks文章,文风风趣不错,可以借鉴。----------more---------###useState返回的值为什么是数组而非对象?原因是数组的解构比对象更加方便,可以观察以下两种数据结构解构的差异。返回数组时,可以直接解构成任意名字。```js[name,setName]=useState('路飞')[age,setAge]=useState(12)```返回对象时,却需要多一层的命名。```js{value:name,setValue:setName}=useState('路飞'){value:name,setValue:setName}=useState(12)```###Hooks传递的设计Hooks是否可以设计成在组件中通过函数传参来使用?比如进行如下调用?```jsconstSomeContext=require('./SomeContext)functionExample({someProp},hooks){constcontextValue=hooks.useContext(SomeContext)return<div>{someProp}{contextValue}</div>}```使用传递的劣势是会出现冗余的传递。(可以联想Context解决了什么)###Hooks与Class中调用setState有不同的表现差异么?Hooks中的setState与Class中最大区别在于Hooks不会对多次setState进行合并操作。如果要执行合并操作,可执行如下操作:```jssetState(prevState=>{return{...prevState,...updateValues}})```此外可以对class与Hooks之间`setState`是异步还是同步的表现进行对比,可以先对以下4种情形render输出的个数进行观察分析:class中的setState:```jsexportdefaultclassAppextendsReact.Component{state={name:'路飞',old:12,gender:'boy'}//情形①:class中异步调用setStatecomponentDidMount(){this.setState({name:'娜美'})this.setState({old:13})this.setState({gender:'girl'})}//情形②:class中同步调用setStatecomponentDidMount(){setTimeout(()=>{this.setState({name:'娜美'})this.setState({old:13})this.setState({gender:'girl'})})}render(){console.log('render')const{name,old,gender}=this.statereturn(<>{name}{old}{gender}</>)}}```Hooks中的setState```jsexportdefaultfunction(){const[name,setName]=useState('路飞')const[old,setOld]=useState('12')const[gender,setGender]=useState('boy')//情形③:Hooks中异步调用setStateuseEffect(()=>{setName('娜美')setOld('13')setGender('girl')},[])//情形④:Hooks中同步调用setStateuseEffect(()=>{setTimeout(()=>{setName('娜美')setOld('13')setGender('girl')},0)},[])console.log('render')return(<>{name}{old}{gender}</>)}```情形①、情形②、情形③、情形④中render输出的次数分别是2,4,2,4。可以看出在React中使用class写法和hooks写法是一一对应的。此外`setState的执行是异步还是同步取决于其执行环境`。###如何在Hooks中模拟setState的第二个参数场景:在使用类模式的React中有时会使用setState的第二个参数来完成某些异步回调操作(比如接口请求),在Hooks中如何对齐类模式中的这种用法呢?使用useRef来控制一个标志符;>具体见[issue](https://github.com/facebook/react/issues/14174#issuecomment-437551476)###Hooks中useEffect的执行时间是否与componentDidMount/componentDidUpdate相同在[timing-of-effects](https://reactjs.org/docs/hooks-reference.html#timing-of-effects)中有提到`useEffect`的执行时机是在浏览器下一次layout与paint之后,与之相对的`useLayoutEffect`的执行时机是在浏览器下一次layout与paint之前(同`componentDidMount`/`componentDidUpdate`)。>useLayoutEffect适用的场景为在class模式下在componentDidMount/componentDidUpdate中对样式进行调整的场景;>[this-benchmark-is-indeed-flawed](https://medium.com/@dan_abramov/this-benchmark-is-indeed-flawed-c3d6b5b6f97f):此文用数据比较了useEffect与componentDidMount/componentDidUpdate的执行时机。###Hooks中模拟仅调用componentDidUpdate而不调用componentDidMount思路:借助`useRef`跳过头一次的执行。```jsfunctionDemo(){constmounted=React.useRef(false)React.useEffect(()=>{if(!mounted.current){mounted.current=true}else{//dosomethingmockcomponentDidUpdate}})}```###Hooks中如何获取先前的props以及stateReact官方在未来很可能会提供一个`usePrevious`的hooks来获取之前的props以及state。`usePrevious`的核心思想是用ref来存储先前的值。```jsfunctionusePrevous(value){constref=useRef()useEffect(()=>{ref.current=value})returnref.current}```###Hooks中如何调用实例上的方法在Hooks中使用useRef()等价于在Class中使用this.something。```js/*inafunction*/constX=useRef()X.current//canreadorwrite/*inaClass*/this.X//canreadorwrite```>[Istheresomethinglikeinstancevariables](https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables)###Hooks中getDerivedStateFromProps的替代方案在[React暗器百解](https://github.com/MuYunyun/blog/blob/master/React/React暗器百解.md)中提到了`getDerivedStateFromProps`是一种反模式,但是极少数情况还是用得到该钩子,Hooks没有该api,那其如何达到getDerivedStateFromProps的效果呢?```jsfunctionScrollView({row}){const[isScrollingDown,setISScrollingDown]=setState(false)const[prevRow,setPrevRow]=setState(null)//核心是创建一个prevRowstate与函数调用方传进来的row进行比较if(row!==prevRow){setISScrollingDown(prevRow!==null&&row>prevRow)setPrevRow(row)}return`Scrollingdown${isScrollingDown}`}```###Hooks中forceUpdate的替代方案可以使用`useReducer`来hack`forceUpdate`,但是尽量避免forceUpdate的使用。```jsconstuseForceUpdate=()=>{returnuseReducer(x=>x+1,0)[1]}functionhandleClick(){constforceUpdate=useForceUpdate()forceUpdate()}```###Hooks中shouldComponentUpdate的替代方案在Hooks中可以使用`useMemo`来作为`shouldComponentUpdate`的替代方案,但`useMemo`只对props进行浅比较。```jsReact.useMemo((props)=>{//yourcomponent})```####useMemo与useCallback的区别```jsuseMemo(()=><component/>)等价于useCallback(<component/>)```*useCallback*缓存函数```jsconstfn=React.useCallback(()=>{setOut(true)},[])```*useMemo*一般用于缓存组件*缓存值:`constdemo=React.useMemo(()=>[...],[])`###是否能使用ReactHooks替代Redux在React16.8版本之后,针对`不是特别复杂`的业务场景,可以使用React提供的`useContext`、`useReducer`实现自定义简化版的redux,可见[todoList](https://github.com/MuYunyun/todoList)中的运用。核心代码如下:```jsimportReact,{createContext,useContext,useReducer}from\"react\"//创建StoreContextconstStoreContext=createContext()//构建Provider容器层exportconstStoreProvider=({reducer,initialState,children})=>{return(<StoreContext.Providervalue={useReducer(reducer,initialState)}>{children}</StoreContext.Provider>)}//在子组件中调用useStoreContext,从而取得Provider中的valueexportconstuseStoreContext=()=>useContext(StoreContext)```但是针对特别复杂的场景目前不建议使用此模式,因为context的机制会有性能问题。具体原因可见[react-reduxv7回退到订阅的原因](https://github.com/reduxjs/react-redux/issues/1177)####依赖列表中移除函数是否是安全的?通常来说依赖列表中移除函数是不安全的。观察如下demo```jsconst{useState,useEffect}=ReactfunctionExample({someProp}){functiondoSomething(){console.log(someProp)//这里只输出1,点击按钮的2并没有输出。}useEffect(()=>{doSomething()},[]//🔴这是不安全的,因为在doSomething函数中使用了someProps属性)return<div>example</div>}exportdefaultfunction(){const[value,setValue]=useState(1)return(<><ExamplesomeProp={value}/><ButtononClick={()=>setValue(2)}>button</Button></>)}```在该demo中,点击button按钮,并没有打印出2。解决上述问题有两种方法。方法一:将函数放入`useEffect`中,同时将相关属性放入依赖项中。因为在依赖中改变的相关属性一目了然,所以这也是首推的做法。```jsfunctionExample({someProp}){useEffect(()=>{functiondoSomething(){console.log(someProp)}doSomething()},[someProps]//相关属性改变一目了然)return<div>example</div>}```方法二:把函数加入依赖列表中```jsfunctionExample({someProp}){functiondoSomething(){console.log(someProp)}useEffect(()=>{doSomething()},[doSomething])return<div>example</div>}```方案二基本上不会单独使用,它一般结合`useCallback`一起使用来处理某些函数计算量较大的函数。```jsfunctionExample({someProp}){constdoSomething=useCallback(()=>{console.log(someProp)},[someProp])useEffect(doSomething(),[doSomething])return<div>example</div>}```####如何避免重复创建昂贵的对象*方法一:使用`useState`的懒初始化,用法如下```jsconst[value,setValue]=useState(()=>createExpensiveObj)```>见[lazy-initial-state](https://reactjs.org/docs/hooks-reference.html#lazy-initial-state);*方法二:使用自定义useRef函数```jsfunctionImage(props){constref=useRef(null)functiongetExpensiveObj(){if(ref.current===null){ref.current=ExpensiveObj}returnref.current}//ifneedExpensiveObj,callgetExpensiveObj()}```###竞态关于竞态(racecondition)的解决方法:方案一:提供一个标志符,在`cleaneffect`阶段中将其置空。代码如下:```jsfunctionArticle({id}){const[article,setArticle]=useState(null);useEffect(()=>{letdidCancel=false;asyncfunctionfetchData(){constarticle=awaitAPI.fetchArticle(id);if(!didCancel){setArticle(article);}}fetchData();return()=>{didCancel=true;};},[id]);//...}```方案二:使用Suspense:Suspense的机制能做到`renderasfetch`。见[solving-race-conditions-with-suspense](https://reactjs.org/docs/concurrent-mode-suspense.html#solving-race-conditions-with-suspense)###相关资料*[HooksRFCS](https://github.com/reactjs/rfcs/pull/68#issuecomment-439314884)*[HooksFAQ](https://reactjs.org/docs/hooks-faq.html)*[MakingSenseofReactHooks](https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889)*[VueFunction-basedAPIRFC](https://zhuanlan.zhihu.com/p/68477600)"},{name:"React暗器百解.md",path:"/React/React暗器百解.md",type:"file",mdconf:{abbrlink:"v11si119"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1582,extension:".md",relative:"/React/React暗器百解.md",isEmpty:!1,content:"\x3c!--abbrlink:v11si119--\x3e*React的组件名为什么要大写？```在`render`中,小写会被认为是`html`元素```*你会把向API的数据请求放在哪里执行```视情况考虑:*componentDidMount,可能会导致白屏*constructor,针对数据不变的情况```*虚拟dom中有个`$$typeof`字段，有了解过它的作用么？运用`JSON`里会无视`Symbol`的知识点来完成安全性校验。可以参阅[WhyDoReactElementsHavea$$typeofProperty?](https://overreacted.io/why-do-react-elements-have-typeof-property/)*如何理解`useEffect`中的副作用```操作dom,获取数据，会影响其它组件或者在渲染时没有办法做其它操作,这是目前所理解的副作用。```*组件为什么写成`<Form/>`而不是`Form()`结合编译时能做更多事情*`React.memo()`和`useMemo()`的区别`useMemo()`的粒度比`React.memo()`更细*什么时候使用setState((state,props)=>stateChange)而不用setState({})点击一个按钮,连续使用setState进行三次的增加,如果使用setState({})会造成state的合并,使用setState((state,props)=>stateChange)没有这个问题。>[react-as-a-ui-runtime](https://overreacted.io/react-as-a-ui-runtime/)*HowtojudgeifthereactelementisFragment?```js/***judegeifisReactFragment.*/functionisReactFragment(variableToInspect){if(variableToInspect.type){returnvariableToInspect.type===React.Fragment;}returnvariableToInspect===React.Fragment;}```"},{name:"React设计模式",path:"/React/React设计模式",children:[{name:"Compound_Component.md",path:"/React/React设计模式/Compound_Component.md",type:"file",mdconf:{abbrlink:"29dmryva"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1114,extension:".md",relative:"/React/React设计模式/Compound_Component.md",isEmpty:!1,content:"\x3c!--abbrlink:29dmryva--\x3e###复合组件(CompoundComponent)####使用static来复合组件优点如下:*结构更加清晰```jsxclassToggleextendsReact.Component{staticOn=({on,children})=>on?children:nullstaticOff=({on,children})=>on?null:childrenstaticButton=({on,toggle})=><Switchon={on}onClick={toggle}/>state={on:false}toggle=()=>this.setState(({on})=>({on:!on}),()=>this.props.onToggle(this.state.on),)render(){returnReact.Children.map(this.props.children,reactElement=>{returnReact.cloneElement(reactElement,{on:this.state.on,toggle:this.toggle,})})}}//使用这种设计模式来复合组件,可以看到组件的使用十分清晰<ToggleonToggle={()=>console.log('onToggle')}><Toggle.On>Thebuttonison</Toggle.On><Toggle.Off>Thebuttonisoff</Toggle.Off><Toggle.Button/></Toggle>```###资料*[advanced-react-patterns-v2](https://github.com/demos-platform/advanced-react-patterns-v2/blob/master/src/exercises/02.js)"},{name:"setState回调替代方案.md",path:"/React/React设计模式/setState回调替代方案.md",type:"file",mdconf:{abbrlink:"tvglcw3s"},birthtime:"2022-01-16",mtime:"2022-01-16",size:876,extension:".md",relative:"/React/React设计模式/setState回调替代方案.md",isEmpty:!1,content:'\x3c!--abbrlink:tvglcw3s--\x3e###setState回调替代方案在脚手架中发现setState禁用了回调的使用。因为目前发现使用setState第二个参数的场景是想用setState更新状态后的值。```jsclassAppextenesReact.Component{countName=()=>{if(this.state.name==="xxx"){this.setState({count:this.state.count+1})}}handle=name=>{this.setState({name},this.countName)}}```回调的方式会造成多余一次渲染,可改为`传参`的方式代替回调的方式。```jsclassAppextenesReact.Component{countName=(name)=>{if(name==="xxx"){this.setState({//2count:this.state.count+1})}}handle=name=>{this.countName(name)this.setState({name})}}```'}],type:"directory",size:1990},{name:"SSR.md",path:"/React/SSR.md",type:"file",mdconf:{abbrlink:"5i9afp89"},birthtime:"2022-01-16",mtime:"2022-01-16",size:160,extension:".md",relative:"/React/SSR.md",isEmpty:!1,content:"\x3c!--abbrlink:5i9afp89--\x3e###相关链接*[ReactSSR之原理篇](http://www.ayqy.net/blog/react-ssr-under-the-hood/)客户端兜底接口是否合理"},{name:"Server_Component.md",path:"/React/Server_Component.md",type:"file",mdconf:{abbrlink:"zftwldv5"},birthtime:"2022-01-16",mtime:"2022-01-16",size:413,extension:".md",relative:"/React/Server_Component.md",isEmpty:!1,content:"\x3c!--abbrlink:zftwldv5--\x3e###ServerComponents*Gooduserexperience:用户体验*stableloading*Cheapmaintenance:可维护性*writefetchinoneplace*Fastperformance:性能*promise.all###linkhttps://reactjs.org/blog/2020/12/21/data-fetching-with-react-server-components.html*[如何看待ReactServerComponents？](https://www.zhihu.com/question/435921124/answer/1641702920)"},{name:"component_market.md",path:"/React/component_market.md",type:"file",mdconf:{abbrlink:"x6rniuyk"},birthtime:"2022-01-16",mtime:"2022-01-16",size:130,extension:".md",relative:"/React/component_market.md",isEmpty:!1,content:"\x3c!--abbrlink:x6rniuyk--\x3e###移动端组件库*[NutUI](https://nutui.jd.com/#/intro)*公司:京东*技术栈:vue"},{name:"conf",path:"/React/conf",children:[{name:"2021.md",path:"/React/conf/2021.md",type:"file",mdconf:{},birthtime:"2022-01-16",mtime:"2022-01-16",size:1620,extension:".md",relative:"/React/conf/2021.md",isEmpty:!0,content:"###Note###ServerComponents*[server-components](https://github.com/reactwg/server-components)###Topic*[React18forAppDevelopers](https://youtu.be/8dUpL8SCO1w?t=2935)48:55*introducehowtomodifyReactfrom16to18.*[StreamingServerRenderingwithSuspense](https://youtu.be/8dUpL8SCO1w?t=4084)byShaundaiPerson(Netflix)1:08:04*[TheFirstReactWorkingGroup](https://youtu.be/8dUpL8SCO1w?t=5203)1:26:43*UseSyncExternalStore*UseId:后续待探究，是否使用该hooks可以避免组件多一次render的问题。*UseInsertionEffect:forhelpingCSS-IN-JSlibraries.*[ReactDeveloperTooling](https://youtu.be/8dUpL8SCO1w?t=6086)1:41:26*[ReactWithoutMemo](https://youtu.be/8dUpL8SCO1w?t=6855)1:54:15*ReactForget*[ReactDocsKeynote](https://youtu.be/8dUpL8SCO1w?t=8116)2:15:16*[ThingsILearntfromtheNewReactDocs](https://youtu.be/8dUpL8SCO1w?t=8722)2.25:22*[LearningintheBrowser——zerotoReactinOneWindow](https://youtu.be/8dUpL8SCO1w?t=9281)2:34:41*[TheROIOFDesigningWithReact](https://youtu.be/8dUpL8SCO1w?t=9925)2:45:25*[InteractivePlaygroundswithReact](https://youtu.be/8dUpL8SCO1w?t=10592)2:56:32*[Re-introducingRelay](https://youtu.be/8dUpL8SCO1w?t=11722)3:15:22*[ReactNativeDesktop](https://youtu.be/8dUpL8SCO1w?t=12892)3:34:52*[On-deviceMachineLearningforReactNative](https://youtu.be/8dUpL8SCO1w?t=13825)3:50:25*[React18forExternalStoreLibraries](https://youtu.be/8dUpL8SCO1w?t=15323)4:15:23watchto4:19:38###Link*[ReactConf2021](https://www.youtube.com/watch?v=8dUpL8SCO1w)"}],type:"directory",size:1620},{name:"how_suspense_resolve.md",path:"/React/how_suspense_resolve.md",type:"file",mdconf:{abbrlink:"9ajh17y7"},birthtime:"2022-01-16",mtime:"2022-01-16",size:9966,extension:".md",relative:"/React/how_suspense_resolve.md",isEmpty:!1,content:"\x3c!--abbrlink:9ajh17y7--\x3e###CodeSpliting在16.6版本之前，`code-spliting`通常是由第三方库来完成的，比如[react-loadble](https://github.com/jamiebuilds/react-loadable)(核心思路为:高阶组件+webpackdynamicimport),在16.6版本中提供了`Suspense`和`lazy`这两个钩子,因此在之后的版本中便可以使用其来实现`CodeSpliting`。>目前阶段,服务端渲染中的`code-spliting`还是得使用`react-loadable`,可查阅[React.lazy](https://reactjs.org/docs/code-splitting.html#reactlazy),暂时先不探讨原因。`CodeSpliting`在`React`中的使用方法是在`Suspense`组件中使用`<LazyComponent>`组件:```jsimport{Suspense,lazy}from'react'constDemoA=lazy(()=>import('./demo/a'))constDemoB=lazy(()=>import('./demo/b'))<Suspense><NavLinkto=\"/demoA\">DemoA</NavLink><NavLinkto=\"/demoB\">DemoB</NavLink><Router><DemoApath=\"/demoA\"/><DemoBpath=\"/demoB\"/></Router></Suspense>```源码中`lazy`将传入的参数封装成一个`LazyComponent````jsfunctionlazy(ctor){return{$$typeof:REACT_LAZY_TYPE,//相关类型_ctor:ctor,_status:-1,//dynamicimport的状态_result:null,//存放加载文件的资源};}```观察[readLazyComponentType](https://github.com/MuYunyun/react/blob/29b7b775f2ecf878eaf605be959d959030598b07/packages/react-reconciler/src/ReactFiberLazyComponent.js#L30-L87)后可以发现`dynamicimport`本身类似`Promise`的执行机制,也具有`Pending`、`Resolved`、`Rejected`三种状态,这就比较好理解为什么`LazyComponent`组件需要放在`Suspense`中执行了(`Suspense`中提供了相关的捕获机制,下文会进行模拟实现`),相关源码如下:```jsfunctionreadLazyComponentType(lazyComponent){conststatus=lazyComponent._status;constresult=lazyComponent._result;switch(status){caseResolved:{//Resolve时，呈现相应资源constComponent=result;returnComponent;}caseRejected:{//Rejected时，throw相应errorconsterror=result;throwerror;}casePending:{//Pending时,throw相应thenableconstthenable=result;throwthenable;}default:{//第一次执行走这里lazyComponent._status=Pending;constctor=lazyComponent._ctor;constthenable=ctor();//可以看到和Promise类似的机制thenable.then(moduleObject=>{if(lazyComponent._status===Pending){constdefaultExport=moduleObject.default;lazyComponent._status=Resolved;lazyComponent._result=defaultExport;}},error=>{if(lazyComponent._status===Pending){lazyComponent._status=Rejected;lazyComponent._result=error;}},);//Handlesynchronousthenables.switch(lazyComponent._status){caseResolved:returnlazyComponent._result;caseRejected:throwlazyComponent._result;}lazyComponent._result=thenable;throwthenable;}}}```###AsyncDataFetching为了解决获取的数据在不同时刻进行展现的问题(在[suspenseDemo](https://github.com/demos-platform/suspenseDemo)中有相应演示),`Suspense`给出了解决方案。下面放两段代码，可以从中直观地感受在`Suspense`中使用`AsyncDataFetching`带来的便利。*一般进行数据获取的代码如下:```jsexportdefaultclassDemoextendsComponent{state={data:null,};componentDidMount(){fetchAPI(`/api/demo/${this.props.id}`).then((data)=>{this.setState({data});});}render(){const{data}=this.state;if(data==null){return<Spinner/>;}const{name}=data;return(<div>{name}</div>);}}```*在`Suspense`中进行数据获取的代码如下:```jsconstresource=unstable_createResource((id)=>{returnfetchAPI(`/api/demo`)})functionDemo{constdata=resource.read(this.props.id)const{name}=data;return(<div>{name}</div>);}```可以看到在`Suspense`中进行数据获取的代码量相比正常的进行数据获取的代码少了将近一半！少了哪些地方呢?*减少了`loading`状态的维护(在最外层的Suspense中统一维护子组件的loading)*减少了不必要的生命周期的书写###总结:如何在Suspense中使用DataFetching当前`Suspense`的使用分为三个部分:第一步:用`Suspens`组件包裹子组件```jsimport{Suspense}from'react'<Suspensefallback={<Loading/>}><ChildComponent></Suspense>```第二步:在子组件中使用`unstable_createResource`:```jsimport{unstable_createResource}from'react-cache'constresource=unstable_createResource((id)=>{returnfetch(`/demo/${id}`)})```第三步:在`Component`中使用第一步创建的`resource`:```jsconstdata=resource.read('demo')```###相关思路解读来看下源码中`unstable_createResource`的部分会比较清晰:```jsexportfunctionunstable_createResource(fetch,maybeHashInput){constresource={read(input){...constresult=accessResult(resource,fetch,input,key);switch(result.status){casePending:{constsuspender=result.value;throwsuspender;}caseResolved:{constvalue=result.value;returnvalue;}caseRejected:{consterror=result.value;throwerror;}default://Shouldbeunreachablereturn(undefined:any);}},};returnresource;}```结合该部分源码,进行如下推测:1.第一次请求没有缓存,子组件`throw`一个`thenable`对象,`Suspense`组件内的`componentDidCatch`捕获之,此时展示`Loading`组件;2.当`Promise`态的对象变为完成态后,页面刷新此时`resource.read()`获取到相应完成态的值;3.之后如果相同参数的请求,则走`LRU`缓存算法,跳过`Loading`组件返回结果(缓存算法见后记);官方作者是说法如下:![](http://with.muyunyun.cn/22849313e0b8b19e833df9a9a59a8546.jpg-400)所以说法大致相同,下面实现一个简单版的`Suspense`:```jsxclassSuspenseextendsReact.Component{state={promise:null}componentDidCatch(e){if(einstanceofPromise){this.setState({promise:e},()=>{e.then(()=>{this.setState({promise:null})})})}}render(){const{fallback,children}=this.propsconst{promise}=this.statereturn<>{promise?fallback:children}</>}}```进行如下调用```jsx<Suspensefallback={<div>loading...</div>}><PromiseThrower/></Suspense>letcache=\"\";letreturnData=cache;constfetch=()=>newPromise(resolve=>{setTimeout(()=>{resolve(\"数据加载完毕\");},2000);});classPromiseThrowerextendsReact.Component{getData=()=>{constgetData=fetch();getData.then(data=>{returnData=data;});if(returnData===cache){throwgetData;}returnreturnData;};render(){return<>{this.getData()}</>;}}```![](http://with.muyunyun.cn/90586c1edf33c7d143f2a3ec59667ab4.gif)效果调试可以点击[这里](https://codesandbox.io/s/1zy82mm0j4),在`16.6`版本之后,`componentDidCatch`只能捕获`commitphase`的异常。所以在`16.6`版本之后实现的`<PromiseThrower>`又有一些差异(即将`throwthenable`移到`componentDidMount`中进行)。###ConcurrentMode+Suspense当网速足够快,数据立马就获取到了，此时页面存在的`Loading`按钮就显得有些多余了。(在[suspenseDemo](https://github.com/demos-platform/suspenseDemo)中有相应演示),`Suspense`在`ConcurrentMode`下给出了相应的解决方案,其提供了`maxDuration`参数。用法如下:```js<SuspensemaxDuration={500}fallback={<Loading/>}>...</Suspense>```该Demo的效果为当获取数据的时间大于(是否包含等于还没确认)500毫秒,显示自定义的`<Loading/>`组件,当获取数据的时间小于500毫秒,略过`<Loading>`组件直接展示用户的数据。[相关源码](https://github.com/MuYunyun/react/blob/29b7b775f2ecf878eaf605be959d959030598b07/packages/react-reconciler/src/ReactFiberUnwindWork.js#L232-L242)。需要注意的是`maxDuration`属性只有在`ConcurrentMode`下才生效,可参考[源码中的注释](https://github.com/MuYunyun/react/blob/29b7b775f2ecf878eaf605be959d959030598b07/packages/react-reconciler/src/ReactFiberUnwindWork.js#L270-L277)。在Sync模式下,`maxDuration`始终为0。###后记:缓存算法*`LRU`算法:`LeastRecentlyUsed`最近最少使用算法(根据时间);*`LFU`算法:`LeastFrequentlyUsed`最近最少使用算法(根据次数);>[漫画：什么是LRU算法](https://juejin.im/post/5c0392656fb9a049fb4366fa)若数据的长度限定是`3`,访问顺序为`set(2,2),set(1,1),get(2),get(1),get(2),set(3,3),set(4,4)`,则根据`LRU`算法删除的是`(1,1)`,根据`LFU`算法删除的是`(3,3)`。`react-cache`采用的是`LRU`算法。###相关资料*[suspenseDemo](https://github.com/demos-platform/suspenseDemo):文字相关案例都集成在该demo中*[ReleasingSuspense](https://github.com/facebook/react/issues/13206):`Suspense`开发进度*[thesuspenseiskillingredux](https://medium.com/@ryanflorence/the-suspense-is-killing-redux-e888f9692430)"},{name:"schedule.md",path:"/React/schedule.md",type:"file",mdconf:{abbrlink:"v6uidkki"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5048,extension:".md",relative:"/React/schedule.md",isEmpty:!1,content:"\x3c!--abbrlink:v6uidkki--\x3e###Schedule解决`目标对象更快完成渲染`与`及时响应优先级更高任务`之间的矛盾。###PerceivedPerformancePerceivedperformance可感知到的性能在流畅性的章节中提到将主线程的一个长任务进行`时间分片`可以拆分为多个帧任务,但如果同时存在多个任务则必然会存在一种竞争机制,于是需要一种`Schedule`机制,在时间分片中加入`动态优先级`的概念来真正避免卡顿现象。###Schedule调度算法思想:*任务执行时间得足够短,能在一帧时间内执行完(时间分片);*不同任务存在不同的优先级;###任务的种类在一帧中执行的任务种类有以下几种类别:*`user-blockingtasks`:基于用户的交互的任务(可见),需在当前帧处理;->`input`、`rAF`、`microtask`(顺畅的交互应小于10ms,下同)*`defaulttasks`:基于用户获取数据渲染到界面上的任务(可见),在当前的帧以及下一帧里处理;->`macrotask`(小于100ms)*`idletasks`:和分析、缓存、排序相关的任务(不可见);->`requestIdleCallback`(小于10ms)>不能拆分的任务(执行时间较长的chunk)怎么办？借助`webWorker`###任务的排序机制任务的排序机制是由`expirationtime`这个字段决定的，其值为`callback的注册时间`与`当前任务优先级的值`之和,表示过期时间(值越小,越早执行)。优先级的值分为以下几种类别:*`Immediate`:(0mstimeout)需要实时交互的任务;(Doitnow)*`UserBlock`:(250mstimeout)对页面交互有副作用的任务;(Doitnow)*`Normal`:(5stimeout)不影响交互的任务;(Doitsoon)*`Low`:(10stimeout)可以延迟执行，但最终需要执行的任务;(Doiteventually)*`Idle`:(notimeout)执行与否不影响应用的任务;(Doitifyoucan)在了解了`expirationtime`之后,对`Schedule`的流程进行如下概述:1.所有回调根据`expirationtime`排好序放入一个队列中;2.`Schedule`自己注册一个回调callback调用该队列，并下一个帧中执行它;3.在下一帧中尽可能多地执行队形里的回调;###Schedule源码分析Schedule中4个比较重要的方法的作用罗列如下:*requestHostCallback:提供调用下一帧的能力*cancelHostCallback:提供取消当前任务的能力*shouldYieldToHost:提供暂停当前任务的能力*getCurrentTime:根据该函数获取的值从而判断具体的优先级###JNDJND(JustNoticeableDifference),[JND](https://github.com/MuYunyun/react/blob/0f1e97e7cb67b7e403af5f78f38294dfd33e081e/packages/react-reconciler/src/ReactFiberWorkLoop.js#L2144-L2167)```js//ComputesthenextJustNoticeableDifference(JND)boundary.//Thetheoryisthatapersoncan'ttellthedifferencebetweensmalldifferencesintime.//Therefore,ifwewaitabitlongerthannecessarythatwon'ttranslatetoanoticeable//differenceintheexperience.However,waitingforlongermightmeanthatwecanavoid//showinganintermediateloadingstate.Thelongerwehavealreadywaited,theharderit//istotellsmalldifferencesintime.Therefore,thelongerwe'vealreadywaited,//thelongerwecanwaitadditionally.Atsomepointwehavetogiveupthough.//Wepickatrainmodelwherethenextboundarycommitsataconsistentschedule.//Theseparticularnumbersarevagueestimates.Weexpecttoadjustthembasedonresearch.functionjnd(timeElapsed:number){returntimeElapsed<120?120:timeElapsed<480?480:timeElapsed<1080?1080:timeElapsed<1920?1920:timeElapsed<3000?3000:timeElapsed<4320?4320:ceil(timeElapsed/1960)*1960;}```###ConnectionbetweenTimeSlicingandSuspense`TimeSlicing`isthepremiseof`Suspense`.Becauseineachtimeslicingitcancomparethetaskpriority,andthendeterminewhethertoshowtheloading.![](http://with.muyunyun.cn/6999fa9b5759613e1dde3b2dfec7076d.jpg)###is-input-pending*相比`requestIdleCallback`,其有更简洁的api;*另外其不会受到优先级的限制;>[is-input-pending](https://github.com/WICG/is-input-pending)###相关文章*[scheduling-on-off-main-thread](https://developer.chrome.com/devsummit/schedule/scheduling-on-off-main-thread):讲解了如何在帧里拆分任务以及使用worker的一些限制*[SchedulinginReact](https://philippspiess.com/scheduling-in-react/#fn-1):任务的排序机制*[main-thread-scheduling](https://github.com/WICG/main-thread-scheduling):scheduleAPIinfuture.核心是从最高优先级的任务中挑选时间过去最久的任务。*[SchedulingistheFuture](https://www.youtube.com/watch?reload=9&v=Iyrf52cwxQI&feature=youtu.be&utm_source=tinyreact&utm_medium=email):@ReactEurope2019speaker:@aweary"},{name:"style",path:"/React/style",children:[{name:"CSS-in-JS.md",path:"/React/style/CSS-in-JS.md",type:"file",mdconf:{abbrlink:"nfp7pzds"},birthtime:"2022-01-16",mtime:"2022-01-16",size:699,extension:".md",relative:"/React/style/CSS-in-JS.md",isEmpty:!1,content:"\x3c!--abbrlink:nfp7pzds--\x3e###style-components####用法```jsconstTitle=styled.h1`font-size:1.5em;text-align:center;color:palevioletred;`;```简版style-components的实现```js//WhenIcallthisfunction…functionh1(styles){//…itgeneratesabrand-newReactcomponent…returnfunctionNewComponent(props){//…whichwillrendertheassociatedHTMLelement:return<h1{...props}/>}}```####优点*LazyCSSInjection*实现:利用闭包###link*[https://www.joshwcomeau.com/react/demystifying-styled-components/](https://www.joshwcomeau.com/react/demystifying-styled-components/):实现一个简版的style-component"}],type:"directory",size:699},{name:"suspense_document.md",path:"/React/suspense_document.md",type:"file",mdconf:{abbrlink:"94y7xwlv"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2484,extension:".md",relative:"/React/suspense_document.md",isEmpty:!1,content:'\x3c!--abbrlink:94y7xwlv--\x3e###Suspense设计模式*`fetchonrender`:目前一般数据获取写在componentDidMount阶段,其获取数据的过程中,执行顺序如下所示:1.startfetchA2....`waitTime1`...3.finishfetchA4.startfetchB5....`waitTime2`...6.finishfetchB这么做存在的问题:在B组件中开始请求数据时至少要等上`Time1`时间,是一种`networkwaterfall`而非`并发请求`;*`fetchthenrender`:`调用setState之前先获取数据`,比如在A组件的componentDidMount中使用`Promise.all()`同时执行`fetchA,fetchB`1.startfetchA2.startfetchB3.finishfetchA4.finishfetchB5.`render`这么做存在的问题:A组件和B组件上的数据显示时间取决于请求时间更长的接口,所以`页面上渲染数据必然会存在延时`;*`renderasfetch`:使用Suspense后的效果呢?1.startfetchA2.startfetchB3.`render`4.finishfetchA5.finishfetchB它很好地规避了上述遇到的两个问题:1.解决接口根据render走导致`不能并发请求接口`的痛点;2.解决使用Promise.all带来的`页面数据内容存在延时`的问题;###ConcurrentUIpatterns*`DefaultMode`:Receded→Skeleton→Complete*`PreferredMode`:Pending→Skeleton→Complete总结:*Receded不好的原因是因为其把页面现有的内容给弄丢了。*可以使用`useTransition`进入Pending状态——位于当前页的同时,加载下一页(想象多元宇宙)*如果不想下一个页面的非核心组件延长Pending的时间,用Suspense包裹它;###useDeferredValue`useDeferredValue`的作用:能让组件中的部分内容`延迟加载`。```jsconstdeferredText=useDeferredValue(text,{timeoutMs:5000})```这里第二个参数表示,能确保5s之内输入框内的输入是顺滑的。###SuspenseListSuspenseList中的`revealOrder`字段能控制其里面Suspense节点的输出顺序,`tail`字段控制当前加载的节点数。```jsfunctionProfilePage({resource}){return(<SuspenseListrevealOrder="forwards"tail="collapsed"><ProfileDetailsresource={resource}/><Suspensefallback={<h2>Loadingposts...</h2>}><ProfileTimelineresource={resource}/></Suspense><Suspensefallback={<h2>Loadingfunfacts...</h2>}><ProfileTriviaresource={resource}/></Suspense></SuspenseList>);}```'},{name:"从0到1实现React",path:"/React/从0到1实现React",children:[{name:"0.前置准备.md",path:"/React/从0到1实现React/0.前置准备.md",type:"file",mdconf:{abbrlink:"xn5bap3c"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2609,extension:".md",relative:"/React/从0到1实现React/0.前置准备.md",isEmpty:!1,content:'\x3c!--abbrlink:xn5bap3c--\x3e###前置准备本系列文章在实现cpreact的同时理顺React框架的核心内容(JSX/虚拟DOM/组件/生命周期/diff算法/setState/PureComponent/HOC/onChange事件)[项目地址](https://github.com/MuYunyun/cpreact)###环境准备首先安装以下babel模块,其具体作用会在后文[JSX和虚拟DOM](https://github.com/MuYunyun/blog/blob/master/从0到1实现React/1.JSX和虚拟DOM.md)中提及。>扩展延伸:[babel执行机制](https://github.com/MuYunyun/blog/blob/master/BasicSkill/番外篇/babel执行机制.md)```js"@babel/core":"^7.0.0","@babel/preset-env":"^7.0.0","@babel/preset-react":"^7.0.0","babel-loader":"v8.0.0-beta.0",```同时`.babelrc`配置如下:```js{"presets":[["@babel/preset-env",{"targets":">0.25%,notdead","useBuiltIns":"entry"}],["@babel/preset-react",{"pragma":"cpreact.createElement"//该参数传向transform-react-jsx插件,是前置的一个核心,后文有解释为什么使用cpreact.createElement}]]}```配置好babel后,接着提供两套打包工具的配置方案,读者可以自行选择。####方案1:使用webpackwebpack拥有一个活跃的社区,提供了更为丰富的打包能力。首先安装以下模块:```"webpack":"^4.17.2","webpack-cli":"^3.1.0","webpack-dev-server":"^3.1.8"```在根目录的`webpack.config.js`配置如下:```jsconstwebpack=require(\'webpack\')constpath=require(\'path\')constrootPath=path.resolve(__dirname)module.exports={entry:path.resolve(rootPath,\'test\',\'index.js\'),mode:\'development\',devtool:\'inline-source-map\',devServer:{contentBase:\'./dist\'},output:{filename:\'cpreact.js\',path:path.resolve(rootPath,\'dist\'),libraryTarget:\'umd\'},module:{rules:[{test:/\\.js$/,loader:"babel-loader",}]},}```然后在`package.json`里加上如下配置:```"scripts":{"start":"webpack-dev-server--open",},```具体可以参照[0.4.3版本](https://github.com/MuYunyun/cpreact/blob/master/webpack.config.js)####方案2:使用parcel[parcel](https://parceljs.org/getting_started.html)是一款上手极快的打包工具,使用其可以快速地进入项目开发的状态。在`package.json`加上如下配置,具体可以参照[0.1版本](https://github.com/MuYunyun/cpreact/blob/0.1/package.json)```"scripts":{"start":"parcel./index.html--open-p8080--no-cache"},```'},{name:"1.JSX和虚拟DOM.md",path:"/React/从0到1实现React/1.JSX和虚拟DOM.md",type:"file",mdconf:{abbrlink:"zv9zkp1d"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4562,extension:".md",relative:"/React/从0到1实现React/1.JSX和虚拟DOM.md",isEmpty:!1,content:'\x3c!--abbrlink:zv9zkp1d--\x3e###JSX和虚拟DOM```jsconstelement=(<divclassName="title">hello<spanclassName="content">world!</span></div>)```JSX是一种语法糖,经过[babel](https://babeljs.io/en/repl)转换结果如下,可以发现实际上转化成`React.createElement()`的形式:>扩展:[babel执行机制](https://github.com/MuYunyun/blog/blob/master/BasicSkill/番外篇/babel执行机制.md)```jsvarelement=React.createElement("div",{className:"title"},"hello",React.createElement("span",{className:"content"},"world!"));```[打印](https://preactjs.com/repl)element,结果如下:```js{attributes:{className:"title"}children:["hello",t]//t和外层对象相同key:undefinednodeName:"div"}```因此,我们得出结论:JSX语法糖经过Babel编译后转换成一种对象,该对象即所谓的`虚拟DOM`,使用虚拟DOM能让页面进行更为高效的渲染。我们按照这种思路进行函数的构造:```jsconstReact={createElement}functioncreateElement(tag,attr,...child){return{attributes:attr,children:child,key:undefined,nodeName:tag,}}//测试constelement=(<divclassName="title">hello<spanclassName="content">world!</span></div>)console.log(element)//打印结果符合预期//{//attributes:{className:"title"}//children:["hello",t]//t和外层对象相同//key:undefined//nodeName:"div"//}```###虚拟DOM转化为真实DOM上个小节介绍了JSX转化为虚拟DOM的过程,这个小节接着来实现将虚拟DOM转化为真实DOM(页面上渲染的是真实DOM)。我们知道在React中,将虚拟DOM转化为真实DOM是使用`ReactDOM.render`实现的,使用如下:```jsimportReactDOMfrom\'react-dom\'ReactDOM.render(element,//上文的element,即虚拟domdocument.getElementById(\'root\'))```接着来实现`ReactDOM.render`的逻辑:```jsconstReactDOM={render}/***将虚拟DOM转化为真实DOM*@param{*}vdom虚拟DOM*@param{*}container需要插入的位置*/functionrender(vdom,container){if(_.isString(vdom)||_.isNumber(vdom)){container.innerText=container.innerText+vdom//fix<div>I\'m{this.props.name}</div>return}constdom=document.createElement(vdom.nodeName)for(letattrinvdom.attributes){setAttribute(dom,attr,vdom.attributes[attr])}vdom.children.forEach(vdomChild=>render(vdomChild,dom))container.appendChild(dom)}/***给节点设置属性*@param{*}dom操作元素*@param{*}attr操作元素属性*@param{*}value操作元素值*/functionsetAttribute(dom,attr,value){if(attr===\'className\'){attr=\'class\'}if(attr.match(/on\\w+/)){//处理事件的属性:consteventName=attr.toLowerCase().substr(2)dom.addEventListener(eventName,value)}elseif(attr===\'style\'){//处理样式的属性:letstyleStr=\'\'letstandardCssfor(letklassinvalue){standardCss=humpToStandard(klass)//处理驼峰样式为标准样式value[klass]=_.isNumber(+value[klass])?value[klass]+\'px\':value[klass]//style={{className:\'20\'||\'20px\'}}>styleStr+=`${standardCss}:${value[klass]};`}dom.setAttribute(attr,styleStr)}else{//其它属性dom.setAttribute(attr,value)}}```至此,我们成功将虚拟DOM复原为真实DOM,展示如下:![](http://with.muyunyun.cn/a898514bd3d08df4366e5ceb7843cddf.jpg-400)另外配合热更新,在热更新的时候清空之前的dom元素,改动如下:```jsconstReactDOM={render(vdom,container){container.innerHTML=nullrender(vdom,container)}}```###小结`JSX`经过babel编译为React.createElement()的形式,其返回结果就是`VirtualDOM`,最后通过ReactDOM.render()将VirtualDOM转化为真实的DOM展现在界面上。流程图如下:![](http://with.muyunyun.cn/5e451855ccc9017708b57164f9e221c6.jpg-400)###思考题如下是一个react/preact的常用组件的写法,那么为什么要import一个React或者h呢？```jsximportReact,{Component}from\'react\'//react//import{h,Component}from\'preact\'//preactclassAextendsComponent{render(){return<div>I\'mcomponentA</div>}}render(<A/>,document.body)//组件的挂载```'},{name:"2.组件和state与props.md",path:"/React/从0到1实现React/2.组件和state与props.md",type:"file",mdconf:{abbrlink:"bfdttr5b"},birthtime:"2022-01-16",mtime:"2022-01-16",size:9256,extension:".md",relative:"/React/从0到1实现React/2.组件和state与props.md",isEmpty:!1,content:"\x3c!--abbrlink:bfdttr5b--\x3e###组件即函数在上一篇[JSX和VirtualDOM](https://github.com/MuYunyun/blog/issues/24)中,解释了JSX渲染到界面的过程并实现了相应代码,代码调用如下所示:```jsimportReactfrom'react'importReactDOMfrom'react-dom'constelement=(<divclassName=\"title\">hello<spanclassName=\"content\">world!</span></div>)ReactDOM.render(element,document.getElementById('root'))```本小节,我们接着探究组件渲染到界面的过程。在此我们引入组件的概念,`组件本质上就是一个函数`,如下就是一段标准组件代码:```jsximportReactfrom'react'//写法1:classA{render(){return<div>I'mcomponentA</div>}}//写法2:无状态组件constA=()=><div>I'mcomponentA</div>ReactDOM.render(<A/>,document.body)````<Aname=\"componentA\"/>`是JSX的写法,和[上一篇](https://github.com/MuYunyun/blog/issues/24)同理,babel将其转化为React.createElement()的形式,[转化结果](https://babeljs.io/en/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=MYGwhgzhAECC0FMAeAXBA7AJjAwgewFsAHPdDFaAbwCgBIAJw0wXoAoBKKuhhFAV3rpoAHkwBLAG4A-AJIByAlRQALMRAB0ReniIb0YAggC-wgPTjpAbjpHqt6sPj7DAXgBEwQiTLoUsN9CmUtRAA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&sourceType=module&lineWrap=true&presets=react&prettier=false&targets=&version=6.26.0&envVersion=)如下所示:```jsReact.createElement(A,null)```可以看到当JSX中是自定义组件的时候,createElement后接的第一个参数变为了函数,在[repl](https://preactjs.com/repl)打印`<Aname=\"componentA\"/>`,结果如下:```{attributes:undefined,children:[],key:undefined,nodeName:ƒA()}```注意这时返回的VirtualDOM中的nodeName也变为了函数。根据这些线索,我们对之前的`render`函数进行改造。```jsfunctionrender(vdom,container){if(_.isFunction(vdom.nodeName)){//如果JSX中是自定义组件letcomponent,returnVdomif(vdom.nodeName.prototype.render){component=newvdom.nodeName()returnVdom=component.render()}else{returnVdom=vdom.nodeName()//针对无状态组件:constA=()=><div>I'mcomponentsA</div>}render(returnVdom,container)return}}```至此,我们完成了对组件的处理逻辑。###props和state的实现在上个小节组件A中,是没有引入任何属性和状态的,我们希望组件间能进行属性的传递(props)以及组件内能进行状态的记录(state)。```jsximportReact,{Component}from'react'classAextendsComponent{render(){return<div>I'm{this.props.name}</div>}}ReactDOM.render(<Aname=\"componentA\"/>,document.body)```在上面这段代码中,看到A函数继承自Component。我们来构造这个父类Component,并在其添加state、props、setState等属性方法,从而让子类继承到它们。```jsfunctionComponent(props){this.props=propsthis.state=this.state||{}}```首先,我们将组件外的props传进组件内,修改render函数中以下代码:```jsfunctionrender(vdom,container){if(_.isFunction(vdom.nodeName)){letcomponent,returnVdomif(vdom.nodeName.prototype.render){component=newvdom.nodeName(vdom.attributes)//将组件外的props传进组件内returnVdom=component.render()}else{returnVdom=vdom.nodeName(vdom.attributes)//处理无状态组件:constA=(props)=><div>I'm{props.name}</div>}...}...}```实现完组件间props的传递后,再来聊聊state,在react中是通过setState来完成组件状态的改变的,在后面的[setState优化](https://github.com/MuYunyun/blog/blob/master/从0到1实现React/5.setState.md)中会实现setState的异步逻辑,此处简单实现如下:```jsfunctionComponent(props){this.props=propsthis.state=this.state||{}}Component.prototype.setState=function(){this.state=Object.assign({},this.state,updateObj)//这里简单实现,后续篇章会深入探究constreturnVdom=this.render()//重新渲染document.getElementById('root').innerHTML=nullrender(returnVdom,document.getElementById('root'))}```此时虽然已经实现了setState的功能,但是`document.getElementById('root')`节点写死在setState中显然不是我们希望的,我们将dom节点相关转移到_render函数中:```jsComponent.prototype.setState=function(updateObj){this.state=Object.assign({},this.state,updateObj)_render(this)//重新渲染}```自然地,重构与之相关的render函数:```jsfunctionrender(vdom,container){letcomponentif(_.isFunction(vdom.nodeName)){if(vdom.nodeName.prototype.render){component=newvdom.nodeName(vdom.attributes)}else{component=vdom.nodeName(vdom.attributes)//处理无状态组件:constA=(props)=><div>I'm{props.name}</div>}}component?_render(component,container):_render(vdom,container)}```在render函数中分离出_render函数的目的是为了让setState函数中也能调用_render逻辑。完整_render函数如下:```jsfunction_render(component,container){constvdom=component.render?component.render():componentif(_.isString(vdom)||_.isNumber(vdom)){container.innerText=container.innerText+vdomreturn}constdom=document.createElement(vdom.nodeName)for(letattrinvdom.attributes){setAttribute(dom,attr,vdom.attributes[attr])}vdom.children.forEach(vdomChild=>render(vdomChild,dom))if(component.container){//注意:调用setState方法时是进入这段逻辑,从而实现我们将dom的逻辑与setState函数分离的目标；知识点:new出来的同一个实例component.container.innerHTML=nullcomponent.container.appendChild(dom)return}component.container=containercontainer.appendChild(dom)}```让我们用下面这个用例跑下写好的react吧！```jsclassAextendsComponent{constructor(props){super(props)this.state={count:1}}click(){this.setState({count:++this.state.count})}render(){return(<div><buttononClick={this.click.bind(this)}>ClickMe!</button><div>{this.props.name}:{this.state.count}</div></div>)}}ReactDOM.render(<Aname=\"count\"/>,document.getElementById('root'))```效果图如下:![](http://with.muyunyun.cn/reactsetstate.gif)至此,我们实现了props和state部分的逻辑。###forceUpdate的实现>声明:这部分为补充章节,可以选择性阅读。涉及到后文[生命周期](https://github.com/MuYunyun/blog/blob/master/BasicSkill/从0到1实现React/3.生命周期.md)、[setState](https://github.com/MuYunyun/blog/blob/master/BasicSkill/从0到1实现React/5.setState.md)章节的知识点。当没有使用setState更新state状态时,通常要结合forceUpdate一起使用,例子如下:```jsclassBextendsComponent{constructor(props){super(props)this.state={count:{value:1}}}shouldComponentUpdate(){//当使用forceUpdate()时,shouldComponentUpdate()会失效returnfalse}click(){this.state.count.value=++this.state.count.value//没有使用setState更新state状态时,通常要结合forceUpdate一起使用this.forceUpdate()}render(){return(<div><buttononClick={this.click.bind(this)}>ClickMe!</button><div>{this.state.count.value}</div></div>)}}```这里要注意一个点`当使用forceUpdate()时,shouldComponentUpdate()会失效`,下面我们来补充forceUpdate()的代码逻辑:```js//forcetoupdateComponent.prototype.forceUpdate=function(cb){this.allowShouldComponentUpdate=false//不允许allowShouldComponentUpdate执行asyncRender({},this,cb)}```相应的在render.js中加上allowShouldComponentUpdate的判断条件:```jsfunctionrenderComponent(component){if(component.base&&component.shouldComponentUpdate&&component.allowShouldComponentUpdate!==false){//加上allowShouldComponentUpdate的判断条件constbool=component.shouldComponentUpdate(component.props,component.state)if(!bool&&bool!==undefined){returnfalse//shouldComponentUpdate()返回false,则生命周期终止}}...}```###小结组件即函数；当JSX中是自定义组件时,经过babel转化后的React.createElement(fn,..)后中的第一个参数变为了函数,除此之外其它逻辑与JSX中为html元素的时候相同；此外我们将state/props/setState等api封装进了父类React.Component中,从而在子类中能调用这些属性和方法。在下篇,我们会继续实现生命周期机制,如有疏漏,欢迎斧正。[项目地址](https://github.com/MuYunyun/cpreact)"},{name:"3.生命周期.md",path:"/React/从0到1实现React/3.生命周期.md",type:"file",mdconf:{abbrlink:"dr9fpnig"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4547,extension:".md",relative:"/React/从0到1实现React/3.生命周期.md",isEmpty:!1,content:"\x3c!--abbrlink:dr9fpnig--\x3e###生命周期先来回顾React的生命周期,用流程图表示如下:![](http://with.muyunyun.cn/77e8b5ceaa1d697f280053be91a87bb3.jpg)该流程图比较清晰地呈现了react的生命周期。其分为3个阶段——生成期,存在期,销毁期。因为生命周期钩子函数存在于自定义组件中,将之前_render函数作些调整如下:```js//原来的_render函数,为了将职责拆分得更细,将virtualdom转为realdom的函数单独抽离出来functionvdomToDom(vdom){if(_.isFunction(vdom.nodeName)){//为了更加方便地书写生命周期逻辑,将解析自定义组件逻辑和一般html标签的逻辑分离开constcomponent=createComponent(vdom)//构造组件setProps(component)//更改组件propsrenderComponent(component)//渲染组件,将dom节点赋值到componentreturncomponent.base//返回真实dom}...}```我们可以在setProps函数内（渲染前）加入`componentWillMount`,`componentWillReceiveProps`方法,setProps函数如下:```jsfunctionsetProps(component){if(component&&component.componentWillMount){component.componentWillMount()}elseif(component.base&&component.componentWillReceiveProps){component.componentWillReceiveProps(component.props)//后面待实现}}```而后我们在renderComponent函数内加入`componentDidMount`、`shouldComponentUpdate`、`componentWillUpdate`、`componentDidUpdate`方法```jsfunctionrenderComponent(component){if(component.base&&component.shouldComponentUpdate){constbool=component.shouldComponentUpdate(component.props,component.state)if(!bool&&bool!==undefined){returnfalse//shouldComponentUpdate()返回false,则生命周期终止}}if(component.base&&component.componentWillUpdate){component.componentWillUpdate()}constrendered=component.render()constbase=vdomToDom(rendered)if(component.base&&component.componentDidUpdate){component.componentDidUpdate()}elseif(component&&component.componentDidMount){component.componentDidMount()}if(component.base&&component.base.parentNode){//setState进入此逻辑component.base.parentNode.replaceChild(base,component.base)}component.base=base//标志符}```###测试生命周期测试如下用例:```jsxclassAextendsComponent{componentWillReceiveProps(props){console.log('componentWillReceiveProps')}render(){return(<div>{this.props.count}</div>)}}classBextendsComponent{constructor(props){super(props)this.state={count:1}}componentWillMount(){console.log('componentWillMount')}componentDidMount(){console.log('componentDidMount')}shouldComponentUpdate(nextProps,nextState){console.log('shouldComponentUpdate',nextProps,nextState)returntrue}componentWillUpdate(){console.log('componentWillUpdate')}componentDidUpdate(){console.log('componentDidUpdate')}click(){this.setState({count:++this.state.count})}render(){console.log('render')return(<div><buttononClick={this.click.bind(this)}>ClickMe!</button><Acount={this.state.count}/></div>)}}ReactDOM.render(<B/>,document.getElementById('root'))```页面加载时输出结果如下:```componentWillMountrendercomponentDidMount```点击按钮时输出结果如下:```shouldComponentUpdatecomponentWillUpdaterendercomponentDidUpdate```###React16.3生命周期调研在这个版本中,新加入了两个生命周期:```getDerivedStateFromProps(nextProps,prevState):更加语义化,可以代替componentWillMount、componentWillReceiveProps(nextProps);getSnapshotBeforeUpdate(prevProps,prevState):可以将结果传入componentDidUpdate里,从而达到dom数据统一,可以替代componentWillUpdate()（缺点就是前面讲的react开启异步渲染,componentWillUpdate()与componentDidUpdate()间获取的dom会不统一）。```后文考虑实现上述api。React16.3生命周期相关文献*[Reactv16.3版本新生命周期函数浅析及升级方案](https://zhuanlan.zhihu.com/p/36062486)*[中文官方文档](https://react.docschina.org/docs/react-component.html)"},{name:"4.diff算法.md",path:"/React/从0到1实现React/4.diff算法.md",type:"file",mdconf:{abbrlink:"3r7gdpzk"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6293,extension:".md",relative:"/React/从0到1实现React/4.diff算法.md",isEmpty:!1,content:"\x3c!--abbrlink:3r7gdpzk--\x3e###diff的实现在react中,diff实现的思路是将新老virtualdom进行比较,将比较后的patch（补丁）渲染到页面上,从而实现局部刷新；本文借鉴了[preact](https://github.com/developit/preact)和[simple-react](https://github.com/hujiulong/simple-react)中的diff实现,总体思路是将旧的dom节点和新的virtualdom节点进行了比较,根据不同的比较类型（文本节点、非文本节点、自定义组件）调用相应的逻辑,从而实现页面的局部渲染。代码总体结构如下:```js/***比较旧的dom节点和新的virtualdom节点:*@param{*}oldDom旧的dom节点*@param{*}newVdom新的virtualdom节点*/functiondiff(oldDom,newVdom){...if(_.isString(newVdom)){returndiffTextDom(oldDom,newVdom)//对比文本dom节点}if(oldDom.nodeName.toLowerCase()!==newVdom.nodeName){diffNotTextDom(oldDom,newVdom)//对比非文本dom节点}if(_.isFunction(newVdom.nodeName)){returndiffComponent(oldDom,newVdom)//对比自定义组件}diffAttribute(oldDom,newVdom)//对比属性if(newVdom.children.length>0){diffChild(oldDom,newVdom)//遍历对比子节点}returnoldDom}```下面列出不同比较类型对应的逻辑实现。####对比文本节点首先进行较为简单的文本节点的比较,代码如下:```js//对比文本节点functiondiffTextDom(oldDom,newVdom){letdom=oldDomif(oldDom&&oldDom.nodeType===3){//如果老节点是文本节点if(oldDom.textContent!==newVdom){//这里一个细节:textContent/innerHTML/innerText的区别oldDom.textContent=newVdom}}else{//如果旧dom元素不为文本节点dom=document.createTextNode(newVdom)if(oldDom&&oldDom.parentNode){oldDom.parentNode.replaceChild(dom,oldDom)}}returndom}```####对比非文本节点对比非文本节点,其思路为将同层级的旧节点替换为新节点,代码如下:```js//对比非文本节点functiondiffNotTextDom(oldDom,newVdom){constnewDom=document.createElement(newVdom.nodeName);[...oldDom.childNodes].map(newDom.appendChild)//将旧节点下的元素添加到新节点下if(oldDom&&oldDom.parentNode){oldDom.parentNode.replaceChild(oldDom,newDom)}}```####对比自定义组件对比自定义组件的思路为:如果新老组件不同,则直接将新组件替换老组件；如果新老组件相同,则将新组件的props赋到老组件上,然后再对获得新props前后的老组件做diff比较。代码如下:```js//对比自定义组件functiondiffComponent(oldDom,newVdom){if(oldDom._component&&(oldDom._component.constructor!==newVdom.nodeName)){//如果新老组件不同,则直接将新组件替换老组件constnewDom=vdomToDom(newVdom)oldDom._component.parentNode.insertBefore(newDom,oldDom._component)oldDom._component.parentNode.removeChild(oldDom._component)}else{setProps(oldDom._component,newVdom.attributes)//如果新老组件相同,则将新组件的props赋到老组件上renderComponent(oldDom._component)//对获得新props前后的老组件做diff比较（renderComponent中调用了diff）}}```####遍历对比子节点遍历对比子节点的策略如下:1.比较新旧dom元素相同层级相同位置的节点类型,若节点类型不相等,则直接将新节点替换掉旧节点；2.给节点加上key属性；>在cpreact的代码实现中,1的目的降低了空间复杂度(避免了更深层次的遍历)；2的目的目前看来是少了一次新老类型的判断消耗。代码如下:```js//对比子节点functiondiffChild(oldDom,newVdom){constkeyed={}constchildren=[]constoldChildNodes=oldDom.childNodesfor(leti=0;i<oldChildNodes.length;i++){if(oldChildNodes[i].key){keyed[oldChildNodes[i].key]=oldChildNodes[i]}else{//如果不存在key,则优先找到节点类型相同的元素children.push(oldChildNodes[i])}}letnewChildNodes=newVdom.childrenif(isArray(newVdom.children[0])){//https://github.com/MuYunyun/cpreact/issues/9newChildNodes=newVdom.children[0]}for(leti=0;i<newChildNodes.length;i++){letchild=nullif(keyed[newChildNodes[i].key]){child=keyed[newChildNodes[i].key]keyed[newChildNodes[i].key]=undefined}else{//对应上面不存在key的情形//在新老节点相同位置上寻找相同类型的节点进行比较；如果不满足上述条件则直接将新节点插入；if(children[i]&&isSameNodeType(children[i],newChildNodes[i])){child=children[i]children[i]=undefined}elseif(children[i]&&!isSameNodeType(children[i],newChildNodes[i])){//不是相同类型,直接替代掉children[i].replaceWith(newChildNodes[i])continue}}constresult=diff(child,newChildNodes[i])//如果child为nullif(result===newChildNodes[i]){oldDom.appendChild(vdomToDom(result))}}}```####测试在生命周期的小节中,componentWillReceiveProps方法还未跑通,稍加修改setProps函数即可:```js/***更改属性,componentWillMount和componentWillReceiveProps方法*/functionsetProps(component,attributes){if(attributes){component.props=attributes//这段逻辑对应上文自定义组件比较中新老组件相同时setProps的逻辑}if(component&&component.base&&component.componentWillReceiveProps){component.componentWillReceiveProps(component.props)}elseif(component&&component.componentWillMount){component.componentWillMount()}}```来测试下生命周期小节中最后的测试用例:*生命周期测试![](http://with.muyunyun.cn/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B5%8B%E8%AF%951.gif)*diff测试![](http://with.muyunyun.cn/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9Fdiff%E6%B5%8B%E8%AF%951.gif)"},{name:"5.setState.md",path:"/React/从0到1实现React/5.setState.md",type:"file",mdconf:{abbrlink:"um9lmlbq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2391,extension:".md",relative:"/React/从0到1实现React/5.setState.md",isEmpty:!1,content:"\x3c!--abbrlink:um9lmlbq--\x3e###同步setState的问题而在现有setState逻辑实现中,每调用一次setState就会执行render一次。因此在如下代码中,每次点击增加按钮,因为click方法里调用了10次setState函数,页面也会被渲染10次。而我们希望的是每点击一次增加按钮只执行render函数一次。```jsexportdefaultclassBextendsComponent{constructor(props){super(props)this.state={count:0}this.click=this.click.bind(this)}click(){for(leti=0;i<10;i++){this.setState({//在先前的逻辑中,没调用一次setState就会render一次count:++this.state.count})}}render(){console.log(this.state.count)return(<div><buttononClick={this.click}>增加</button><div>{this.state.count}</div></div>)}}```###异步调用setState查阅setState的api,其形式如下:```jssetState(updater,[callback])```它能接收两个参数,其中第一个参数updater可以为对象或者为函数(`(prevState,props)=>stateChange`),第二个参数为回调函数；确定优化思路为:将多次setState后跟着的值进行浅合并,并借助事件循环等所有值合并好之后再进行渲染界面。```jsletcomponentArr=[]//异步渲染functionasyncRender(updater,component,cb){if(componentArr.length===0){defer(()=>render())//利用事件循环,延迟渲染函数的调用}if(cb)defer(cb)//调用回调函数if(_.isFunction(updater)){//处理setState后跟函数的情况updater=updater(component.state,component.props)}//浅合并逻辑component.state=Object.assign({},component.state,updater)if(componentArr.includes(component)){component.state=Object.assign({},component.state,updater)}else{componentArr.push(component)}}functionrender(){letcomponentwhile(component=componentArr.shift()){renderComponent(component)//rerender}}//事件循环,关于promise的事件循环和setTimeout的事件循环后续会单独写篇文章。constdefer=function(fn){returnPromise.resolve().then(()=>fn())}```此时,每点击一次增加按钮render函数只执行一次了。"},{name:"6.ref.md",path:"/React/从0到1实现React/6.ref.md",type:"file",mdconf:{abbrlink:"jee59i99"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3814,extension:".md",relative:"/React/从0到1实现React/6.ref.md",isEmpty:!1,content:"\x3c!--abbrlink:jee59i99--\x3e###ref在react中并不建议使用ref属性,而应该尽量使用[状态提升](https://doc.react-china.org/docs/lifting-state-up.html),但是react还是提供了ref属性赋予了开发者操作dom的能力,react的ref有`string`、`callback`、`createRef`三种形式,分别如下:```js//string这种写法未来会被抛弃classMyComponentextendsComponent{componentDidMount(){this.refs.myRef.focus()}render(){return<inputref=\"myRef\"/>}}//callback(比较通用)classMyComponentextendsComponent{componentDidMount(){this.myRef.focus()}render(){return<inputref={(ele)=>{this.myRef=ele}}/>}}//react16.3增加,其它react-like框架还没有同步classMyComponentextendsComponent{constructor(props){super(props)this.myRef=React.createRef()}componentDidMount(){this.myRef.current.focus()}render(){return<inputref={this.myRef}/>}}```[Reactref的前世今生](https://zhuanlan.zhihu.com/p/40462264)罗列了三种写法的差异,下面对上述例子中的第二种写法(比较通用)进行实现。首先在setAttribute方法内补充上对ref的属性进行特殊处理,```jsfunctionsetAttribute(dom,attr,value){...elseif(attr==='ref'){//处理ref属性if(_.isFunction(value)){value(dom)}}...}```针对这个例子中`this.myRef.focus()`的focus属性需要异步处理,因为调用componentDidMount的时候,界面上还未添加dom元素。处理renderComponent函数:```jsfunctionrenderComponent(component){...elseif(component&&component.componentDidMount){defer(component.componentDidMount.bind(component))}...}```刷新页面,可以发现input框已为选中状态。![](http://with.muyunyun.cn/d35589fbbff45a2437c6c13e24ba8058.jpg-200)处理完普通元素的ref后,再来处理下自定义组件的ref的情况。之前默认自定义组件上是没属性的,现在只要针对自定义组件的ref属性做相应处理即可。稍微修改vdomToDom函数如下:```jsfunctionvdomToDom(vdom){if(_.isFunction(vdom.nodeName)){//此时是自定义组件...for(constattrinvdom.attributes){//处理自定义组件的ref属性if(attr==='ref'&&_.isFunction(vdom.attributes[attr])){vdom.attributes[attr](component)}}...}...}```跑如下测试用例:```jsclassAextendsComponent{constructor(){super()this.state={count:0}this.click=this.click.bind(this)}click(){this.setState({count:++this.state.count})}render(){return<div>{this.state.count}</div>}}classBextendsComponent{constructor(){super()this.click=this.click.bind(this)}click(){this.A.click()}render(){return(<div><buttononClick={this.click}>加1</button><Aref={(e)=>{this.A=e}}/></div>)}}```效果如下:![](http://with.muyunyun.cn/reactref%E6%B5%8B%E8%AF%951)###React.forwardRef使用场景`React.forwardRef`后面跟一个`render`函数。用法如下:```jsfunctionHOCComponent(WrapComponent){returnclassextendsReact.Component{render(){const{ref,...rest}=this.propsreturn<WrapComponentref={ref}{...rest}/>}}}//此时的ref指向的是,高阶组件里包裹的WrapComponent组件。constDemo=React.forwardRef((props,ref)=>{return<HOCComponent{...props}ref={ref}/>})```使用场景:需要引用高阶组件里的子组件节点的时候可以使用`React.forwordRef`"},{name:"7.PureComponent.md",path:"/React/从0到1实现React/7.PureComponent.md",type:"file",mdconf:{abbrlink:"x9xp4uob"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3861,extension:".md",relative:"/React/从0到1实现React/7.PureComponent.md",isEmpty:!1,content:"\x3c!--abbrlink:x9xp4uob--\x3e###PureComponent精髓使用PureComponent是优化React性能的一种常用手段,相较于Component,PureComponent会在render之前自动执行一次shouldComponentUpdate()函数,根据返回的bool值判断是否进行render。其中有个重点是PureComponent在shouldComponentUpdate()的时候会进行shallowEqual(浅比较)。PureComponent的浅比较策略如下:对prevState/nextState以及prevProps/nextProps这两组数据进行浅比较:1.对象第一层数据未发生改变,render方法不会触发；2.对象第一层数据发生改变(包括第一层数据引用的改变),render方法会触发;####PureComponent的实现照着上述思路我们来实现PureComponent的逻辑```jsfunctionPureComponent(props){this.props=props||{}this.state={}isShouldComponentUpdate.call(this)//为每个PureComponent绑定shouldComponentUpdate方法}PureComponent.prototype.setState=function(updater,cb){isShouldComponentUpdate.call(this)//调用setState时,让this指向子类的实例,目的取到子类的this.stateasyncRender(updater,this,cb)}functionisShouldComponentUpdate(){constcpState=this.stateconstcpProps=this.propsthis.shouldComponentUpdate=function(nextProps,nextState){if(!shallowEqual(cpState,nextState)||!shallowEqual(cpProps,nextProps)){returntrue//只要state或props浅比较不等的话,就进行渲染}else{returnfalse//浅比较相等的话,不渲染}}}//浅比较逻辑constshallowEqual=function(oldState,nextState){constoldKeys=Object.keys(oldState)constnewKeys=Object.keys(nextState)if(oldKeys.length!==newKeys.length){returnfalse}letflag=truefor(leti=0;i<oldKeys.length;i++){if(!nextState.hasOwnProperty(oldKeys[i])){flag=falsebreak}if(nextState[oldKeys[i]]!==oldState[oldKeys[i]]){flag=falsebreak}}returnflag}```####测试用例测试用例用在React上提的一个[issue](https://github.com/facebook/react/issues/13438#issuecomment-414128918)中的案例,我们期望点击增加按钮后,页面上显示的值能够加1。```jsclassBextendsPureComponent{constructor(props){super(props)this.state={count:0}this.click=this.click.bind(this)}click(){this.setState({count:++this.state.count,})}render(){return(<div><buttononClick={this.click}>增加</button><div>{this.state.count}</div></div>)}}```然而,我们点击上述代码,页面上显示的0分毫不动！！！揭秘如下:```jsclick(){constt=++this.state.countconsole.log(t===this.state.count)//truethis.setState({count:t,})}```当点击增加按钮,控制台显示`t===this.state.count`为true,也就说明了setState前后的状态是统一的,所以shallowEqual(浅比较)返回的是true,致使shouldComponentUpdate返回了false,页面因此没有渲染。类似的,如下写法也是达不到目标的,留给读者思考了。```jsclick(){this.setState({count:this.state.count++,})}```那么如何达到我们期望的目标呢。揭秘如下:```jsclick(){this.setState({count:this.state.count+1})}```感悟:小小的一行代码里蕴藏着无数的bug。####相关链接*[AdoubtbehaviourusingthePureComponent](https://github.com/facebook/react/issues/13438)*[React的性能优化（一）当PureComponent遇上ImmutableJS](https://juejin.im/post/59cdaaccf265da066f6ac83b)*[React性能优化方案之PureComponent](https://juejin.im/post/5b1caceb5188257d63226743)"},{name:"8.HOC探索.md",path:"/React/从0到1实现React/8.HOC探索.md",type:"file",mdconf:{abbrlink:"hyavrsmu"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4379,extension:".md",relative:"/React/从0到1实现React/8.HOC探索.md",isEmpty:!1,content:"\x3c!--abbrlink:hyavrsmu--\x3e###HOC实践高阶组件(HigherOrderComponent)不属于ReactAPI范畴,但是它在React中也是一种实用的技术,`它可以将常见任务抽象成一个可重用的部分`。这个小节算是番外篇,会结合[cpreact](https://github.com/MuYunyun/cpreact)(前文实现的类react轮子)与HOC进行相关的实践。它可以用如下公式表示:```jsy=f(x),//x:原有组件//y:高阶组件//f():````f()`的实现有两种方法,下面进行实践。####属性代理(PropsProxy)属性代理是装饰器模式的一种运用,通过装饰器函数给原来函数赋能。下面例子在装饰器函数中给被装饰的组件传递了额外的属性`{a:1,b:2}`。>声明:下文所展示的demo均已在[cpreact](https://github.com/MuYunyun/cpreact)测试通过```jsfunctionppHOC(WrappedComponent){returnclassextendsComponent{render(){constobj={a:1,b:2}return(<WrappedComponent{...this.props}{...obj}/>)}}}@ppHOCclassBextendsComponent{render(){return(<div>{this.props.a+this.props.b}{/*输出3*/}</div>)}}```要是将{a:1,b:2}替换成全局共享对象,那么不就是react-redux中的Connect了么?改进上述demo,我们就可以实现可插拔的[受控组件](https://reactjs.org/docs/forms.html#controlled-components),代码示意如下:```jsfunctionppDecorate(WrappedComponent){returnclassextendsComponent{constructor(){super()this.state={value:''}this.onChange=this.onChange.bind(this)}onChange(e){this.setState({value:e.target.value})}render(){constobj={onChange:this.onChange,value:this.state.value,}return(<WrappedComponent{...this.props}{...obj}/>)}}}@ppDecorateclassBextendsComponent{render(){return(<div><input{...this.props}/><div>{this.props.value}</div></div>)}}```效果如下图:![](http://with.muyunyun.cn/hoc%E6%8E%A2%E7%B4%A2%E4%B9%8B%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6.gif)这里有个坑点,当我们在输入框输入字符的时候,并不会立马触发onChange事件(我们想要让事件立即触发,然而现在要按下回车键或者点下鼠标才触发),在react中有个[合成事件](https://reactjs.org/docs/events.html)的知识点,下篇文章[onChange事件](https://github.com/MuYunyun/blog/blob/master/从0到1实现React/9.onChange事件的那点事.md)对react中的onChange事件为何和原生DOM事件中的onchange表现不一致进行揭秘。顺带一提在这个demo中似乎看到了双向绑定的效果,但是实际中React并没有双向绑定的概念,但是我们可以运用HOC的知识点结合setState在React表单中实现伪双向绑定的效果。####继承反转(InheritanceInversion)继承反转的核心是:传入HOC的组件会作为返回类的父类来使用。然后在render中调用`super.render()`来调用父类的render方法。>在[ES6继承与ES5继承的差异](https://github.com/MuYunyun/blog/blob/master/BasicSkill/readES6/继承.md#作为对象调用的-super)中提到了作为对象使用的super指向父类的实例。```jsfunctioniiHOC(WrappedComponent){returnclassextendsWrappedComponent{render(){constparentRender=super.render()if(parentRender.nodeName==='span'){return(<span>继承反转</span>)}}}}@iiHOCclassBextendsComponent{render(){return(<span>InheritanceInversion</span>)}}```在这个demo中,在HOC内实现了渲染劫持,页面上最终显示如下:![](http://with.muyunyun.cn/e7dbedcefd9a61dcd12fbcff89dc19ef.jpg-200)>可能会有疑惑,使用`属性代理`的方式貌似也能实现渲染劫持呀,但是那样做没有`继承反转`这种方式纯粹。###相关链接*[带着三个问题深入浅出React高阶组件](https://juejin.im/post/59818a485188255694568ff2)*[深入理解React高阶组件](https://zhuanlan.zhihu.com/p/24776678?refer=FrontendMagazine)"},{name:"9.onChange事件以及受控组件.md",path:"/React/从0到1实现React/9.onChange事件以及受控组件.md",type:"file",mdconf:{abbrlink:"v3n4ihlt"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4821,extension:".md",relative:"/React/从0到1实现React/9.onChange事件以及受控组件.md",isEmpty:!1,content:"\x3c!--abbrlink:v3n4ihlt--\x3e###从一个疑问点开始接上一章[HOC探索](https://github.com/MuYunyun/blog/blob/master/从0到1实现React/8.HOC探索.md#属性代理props-proxy)抛出的问题————react中的onChange事件和原生DOM事件中的onchange表现不一致,举例说明如下:```js//React中的onChange事件classAppextendsComponent{constructor(props){super(props)this.onChange=this.onChange.bind(this)}onChange(e){console.log('键盘松开立刻执行')}render(){return(<inputonChange={this.onChange}/>)}}/*--------------分割线---------------*///原生DOM事件中的onchange事件:<inputid='test'>document.getElementById('test').addEventListener('change',(e)=>{console.log('键盘松开以后还需按下回车键或者点下鼠标才会触发')})```###拨云见雾我们来看下React的一个issue[ReactFire:ModernizingReactDOM](https://github.com/facebook/react/issues/13525)。有两点信息和这篇文章的话题相关。*Drasticallysimplifytheeventsystem*MigratefromonChangetoonInputanddon’tpolyfillitforuncontrolledcomponents从这两点内容我们可以得知下面的信息:React实现了一套[合成事件机制](https://reactjs.org/docs/events.html#event-pooling),也就是它的事件机制和原生事件间会有不同。比如它目前onChange事件其实对应着原生事件中的input事件。在这个issue中明确了未来会使用onInput事件替代onChange事件,并且会大幅度地简化合成事件。有了以上信息后,我们对onChange事件(将来的onInput事件)的代码作如下更改:```jsfunctionsetAttribute(dom,attr,value){...if(attr.match(/on\\w+/)){//处理事件的属性:leteventName=attr.toLowerCase().substr(2)if(eventName==='change'){eventName='input'}//和现阶段的react统一dom.addEventListener(eventName,value)}...}```###自由组件以及受控组件区分自由组件以及受控组件在于表单的值是否由`value`这个属性控制,比较如下代码:```jsconstcase1=()=><input/>//此时输入框内可以随意增减任意值constcase2=()=><inputdefaultValue={123}/>//此时输入框内显示123,能随意增减值constcase3=()=><inputvalue={123}/>//此时输入框内显示123,并且不能随意增减值````case3`的情形即为简化版的受控组件。###受控组件的实现题目可以换个问法:当`input`的传入属性为`value`时(且没有onChange属性),如何禁用用户的输入事件的同时又能获取焦点?![](http://with.muyunyun.cn/0fa301946b3f4bf315d742735c333562.jpg-200)首先想到了html自带属性readonly、disable,它们都能禁止用户的输入,但是它们不能满足获取焦点这个条件。结合前文`onChange`的实现是监听`input`事件,代码分为以下两种情况:1.dom节点包含`value`属性、`onChange`属性2.dom节点包含`value`属性,不包含`onChange`属性代码如下:```jsfunctionvdomToDom(vdom){...if(vdom.attributes&&vdom.attributes.hasOwnProperty('onChange')&&vdom.attributes.hasOwnProperty('value')){//受控组件逻辑...dom.addEventListener('input',(e)=>{changeCb.call(this,e)dom.value=oldValue})...}if(vdom.attributes&&!vdom.attributes.hasOwnProperty('onChange')&&vdom.attributes.hasOwnProperty('value')){//受控组件逻辑...dom.addEventListener('input',(e)=>{dom.value=oldValue})...}...}```可以发现它们的核心都在这段代码上:```jsdom.addEventListener('input',(e)=>{changeCb.call(this,e)dom.value=oldValue})```区别是当有`onChange属性`时,能提供相应的回调函数`changeCb`通过事件循环机制改变表单的值。看如下两个例子的比较:```jsconstApp=()=><inputvalue={123}/>```效果如下:![](http://with.muyunyun.cn/353c8119b3c60a7f8f7696633c97ad28.jpg-200)```jsclassAppextendsComponent{constructor(){super()this.state={num:123}this.change=this.change.bind(this)}change(e){this.setState({num:e.target.value})}render(){return(<div><inputvalue={this.state.num}onChange={this.change}/></div>)}}```这段代码中的`change`函数即上个段落所谓的`changeCb`函数,通过`setState`的事件循环机制改变表单的值。效果如下:![](http://with.muyunyun.cn/aec70ef0cebf603a0871d61f21e93532.gif)至此,模拟了受控组件的实现。"},{name:"15.函数子组件探索.md",path:"/React/从0到1实现React/15.函数子组件探索.md",type:"file",mdconf:{abbrlink:"569yse1c"},birthtime:"2022-01-16",mtime:"2022-01-16",size:313,extension:".md",relative:"/React/从0到1实现React/15.函数子组件探索.md",isEmpty:!1,content:"\x3c!--abbrlink:569yse1c--\x3e###函数子组件使用方式如下,页面渲染出hello,cpreact,至于是否实现先观望一段时间```js//父组件functionApp(){return(<Child>{()=>'hello,cpreact.'}</Child>)}//子组件constChild=({children})=>children()```"},{name:"16.RenderProps.md",path:"/React/从0到1实现React/16.RenderProps.md",type:"file",mdconf:{abbrlink:"h5o4gcg3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2363,extension:".md",relative:"/React/从0到1实现React/16.RenderProps.md",isEmpty:!1,content:"\x3c!--abbrlink:h5o4gcg3--\x3e###RenderProps*概要:属性中传入函数,函数返回组件*目的:封装行为###demo在如下例子中,组件`PassState`即为承载公用逻辑的载体。组件`App`和`UseState`为使用方。```jsclassPassStateextendsComponent{constructor(){super()this.state={name:'muyy'}}render(){return(<>{this.props.render(this.state)}</>)}}classUseStateextendsComponent{render(){const{state}=this.propsreturn<>{state.name}</>}}classAppextendsComponent{render(){return(<PassStaterender={(state)=>(<UseStatestate={state}/>)}/>)}}```这是官方摘取的renderProps例子,只要将render进行替换成children,可以发现日常使用它的情形就很寻常了。```jsclassPassStateextendsComponent{constructor(){super()this.state={name:'muyy'}}render(){return(<>{this.props.children(this.state)}</>)}}classUseStateextendsComponent{render(){const{state}=this.propsreturn<>{state.name}</>}}classAppextendsComponent{render(){return(<PassState>{(state)=>(<UseStatestate={state}/>)}</PassState>)}}```比如beast-mobile中Matrix组件就是这种形式。###renderprops是否都适合转化为Hooks```js<MatrixdataSources={dataSources}>{({src,index})=>{return(<divstyle={{padding:10,background:'#ebebeb',borderRadius:4,fontSize:'12px',color:'#666'}}><divstyle={{fontSize:'12px'}}>name:{src.name}</div><divstyle={{fontSize:'12px'}}>age:{src.age}</div><divstyle={{fontSize:'12px'}}>address:{src.address}</div><divstyle={{fontSize:'12px'}}>index:{index}</div></div>)}}</Matrix>```![](http://with.muyunyun.cn/e99997d480a89b1c5f244d19bd67404a.jpg-400)Matrix组件用于在项目中自动调整行内布局,该组件中renderprops的参数是和当前排列数有关,与`排列数相关`的renderprops没有很好的办法转化为Hooks,因此RenderProps还是有用武之地的。"},{name:"17.CSSinJS.md",path:"/React/从0到1实现React/17.CSSinJS.md",type:"file",mdconf:{abbrlink:"mvnh5wcy"},birthtime:"2022-01-16",mtime:"2022-01-16",size:213,extension:".md",relative:"/React/从0到1实现React/17.CSSinJS.md",isEmpty:!1,content:"\x3c!--abbrlink:mvnh5wcy--\x3e###问题在传统的大型前端项目开发中遇到的CSS问题有以下几点:*CSS全局命名空间*删除不必要的代码不容易*不支持动态计算*压缩"},{name:"18.服务端渲染.md",path:"/React/从0到1实现React/18.服务端渲染.md",type:"file",mdconf:{abbrlink:"w8uuh39t"},birthtime:"2022-01-16",mtime:"2022-01-16",size:122,extension:".md",relative:"/React/从0到1实现React/18.服务端渲染.md",isEmpty:!1,content:"\x3c!--abbrlink:w8uuh39t--\x3e###React服务端渲染实践优点:*SEO*首屏渲染体验*前后端知识共享"}],type:"directory",size:49544},{name:"你不知道的requestIdleCallback.md",path:"/React/你不知道的requestIdleCallback.md",type:"file",mdconf:{abbrlink:"lmjv3sgz"},birthtime:"2022-01-16",mtime:"2022-01-16",size:10534,extension:".md",relative:"/React/你不知道的requestIdleCallback.md",isEmpty:!1,content:"\x3c!--abbrlink:lmjv3sgz--\x3e###你不知道的requestIdleCallback本文副标题是`RequestSchedule源码解析一`。在本章中会介绍`requestIdleCallback`的用法以及其缺陷,接着对React团队对该api的hack部分的源码进行剖析。在下一篇中会结合优先级对React的调度算法进行宏观的解释,欢迎关注[个人博客](https://github.com/MuYunyun/blog)。`React调度算法`与`requestIdleCallback`这个api息息相关。`requestIdleCallback`的作用是是在浏览器一帧的剩余空闲时间内执行优先度相对较低的任务,其用法如下:```jsvartasksNum=10000requestIdleCallback(unImportWork)functionunImportWork(deadline){while(deadline.timeRemaining()&&tasksNum>0){console.log(`执行了${10000-tasksNum+1}个任务`)tasksNum--}if(tasksNum>0){//在未来的帧中继续执行requestIdleCallback(unImportWork)}}````deadline`有两个参数*`timeRemaining()`:当前帧还剩下多少时间*`didTimeout`:是否超时另外`requestIdleCallback`后如果跟上第二个参数`{timeout:...}`则会强制浏览器在当前帧执行完后执行。###requestIdleCallback的缺陷>requestIdleCallbackiscalledonly20timespersecond-Chromeonmy6x2coreLinuxmachine,it'snotreallyusefulforUIwork。——from[ReleasingSuspense](https://github.com/facebook/react/issues/13206#issuecomment-418923831)~~也就是说`requestIdleCallback`的FPS只有`20`,这远远低于页面流畅度的要求！(一般FPS为60时对用户来说是感觉流程的,即一帧时间为16.7ms),这也是React需要自己实现`requestIdleCallback`的原因。~~###源码解析之requestIdleCallback####非DOM环境在不能操作DOM的环境下,可以借助`setTimeout`来模拟`requestIdleCallback`的实现。```jsrequestIdleCallback=(callback)=>{setTimeout(callback({timeRemaining(){returnInfinity}}))}```下面将React源码中关于服务端的实现也呈现出来:```jslet_callback=null;const_flushCallback=function(didTimeout){if(_callback!==null){try{_callback(didTimeout);}finally{_callback=null;}}};requestHostCallback=function(cb){if(_callback!==null){//如果_callback不为空,则将requestHostCallback放到下一个事件队列中再次执行setTimeout(requestHostCallback,0,cb);}else{_callback=cb;setTimeout(_flushCallback,0,false);}};cancelHostCallback=function(){_callback=null;};shouldYieldToHost=function(){returnfalse;};```####DOM环境在浏览器端的环境下,介绍一个与`requestIdleCallback`功能相近的api——`requestAnimationFrame(callback)`,其会在下次重绘前执行指定的回调函数，因此这个api在动效领域得到了广泛的使用。下面通过一个简单的demo来认识它:```jsletframeletn=5functioncallback(timeStamp){console.log(timeStamp)//开始执行回调的时间戳//如果想要产生循环动画的效果,需在回调函数中再次调用requestAnimationFrame()while(n>0){requestAnimationFrame(callback)console.log('测试执行顺序')n--}}frame=requestAnimationFrame(callback)//在下次重绘之前调用回调//如果想要销毁该回调,可以执行cancelAnimationFrame(frame)```执行上述代码,控制台(chrome)打印如下数据:```先输出5次'测试执行顺序'1795953.6491795970.3181795986.9871796003.6561796020.325...```可以看到在浏览器上一帧的时间大致为`16ms`。同时可以看到`requestAnimation(callback)`中的callback也是异步的(只不过它是基于帧与帧间的异步),所以上述打印结果是先打印出5次'测试执行顺序'后再依次打印出5个时间戳。`requestHostCallback`(也就是requestIdleCallback)这部分源码的实现比较复杂,可以将其分解为以下几个重要的步骤(有一些细节点可以看注释):1.步骤一:如果有优先级更高的任务,则通过`postMessage`触发步骤四,否则如果`requestAnimationFrame`在当前帧没有安排任务,则开始一个帧的流程;2.步骤二:在一个帧的流程中调用`requestAnimationFrameWithTimeout`函数,该函数调用了`requestAnimationFrame`,并对执行时间超过`100ms`的任务用`setTimeout`放到下一个事件队列中处理;3.步骤三:执行`requestAnimationFrame`中的回调函数`animationTick`,在该回调函数中得到当前帧的截止时间`frameDeadline`,并通过`postMessage`触发步骤四;4.步骤四:通过`onmessage`接受`postMessage`指令,触发消息事件的执行。在`onmessage`函数中根据`frameDeadline-currentTime<=0`判断任务是否可以在当前帧执行，如果可以的话执行该任务,否则进入下一帧的调用。```jsexportletrequestHostCallback;exportletcancelHostCallback;exportletshouldYieldToHost;exportletgetCurrentTime;constANIMATION_FRAME_TIMEOUT=100;letrAFID;letrAFTimeoutID;//②调用requestAnimationFrame,并对执行时间超过100ms的任务用setTimeout进行处理constrequestAnimationFrameWithTimeout=function(callback){rAFID=requestAnimationFrame(function(timestamp){clearTimeout(rAFTimeoutID);callback(timestamp);//一帧中任务调用的核心流程的实现,接着看第③步});//如果在一帧中某个任务执行时间超过100ms则终止该帧的执行并将该任务放入下一个事件队列中rAFTimeoutID=setTimeout(function(){cancelAnimationFrame(rAFID);callback(getCurrentTime());},ANIMATION_FRAME_TIMEOUT);};getCurrentTime=function(){returnperformance.now();};letscheduledHostCallback=null;//调度器回调函数letisMessageEventScheduled=false;//消息事件是否执行lettimeoutTime=-1;letisAnimationFrameScheduled=false;letisFlushingHostCallback=false;letframeDeadline=0;//当前帧的截止时间//假设最开始的FPS(feetperseconds)为30,但这个值会随着动画帧调用的频率而动态变化letpreviousFrameTime=33;//一帧的时间:1000/30≈33letactiveFrameTime=33;shouldYieldToHost=function(){returnframeDeadline<=getCurrentTime();};constchannel=newMessageChannel();constport=channel.port2;//④接受`postMessage`指令,触发消息事件的执行。在其中判断任务是否在当前帧执行，如果在的话执行该任务channel.port1.onmessage=function(event){isMessageEventScheduled=false;constprevScheduledCallback=scheduledHostCallback;constprevTimeoutTime=timeoutTime;scheduledHostCallback=null;timeoutTime=-1;constcurrentTime=getCurrentTime();letdidTimeout=false;//是否超时//如果当前帧已经没有时间剩余,检查是否有timeout参数，如果有的话是否已经超过这个时间if(frameDeadline-currentTime<=0){if(prevTimeoutTime!==-1&&prevTimeoutTime<=currentTime){//didTimeout为true后,在当前帧中执行(针对优先级较高的任务)didTimeout=true;}else{//在下一帧中执行if(!isAnimationFrameScheduled){isAnimationFrameScheduled=true;requestAnimationFrameWithTimeout(animationTick);}scheduledHostCallback=prevScheduledCallback;timeoutTime=prevTimeoutTime;return;}}if(prevScheduledCallback!==null){isFlushingHostCallback=true;try{prevScheduledCallback(didTimeout);}finally{isFlushingHostCallback=false;}}};//③requestAnimationFrame的回调函数。传入的rafTime为执行该帧的时间戳。constanimationTick=function(rafTime){//如果存在调度器回调函数则在一帧的开头急切地安排下一帧的动画回调(急切是因为如果在帧的后半段安排动画回调的话,就会增大下一帧超过100ms的几率,从而会浪费一个帧的利用,可以结合步骤②来理解这句话),如果不存在调度器回调函数否则立马终止执行。if(scheduledHostCallback!==null){requestAnimationFrameWithTimeout(animationTick);}else{isAnimationFrameScheduled=false;return;}letnextFrameTime=rafTime-frameDeadline+activeFrameTime;//当前帧开始调用动画的时间-上一帧调用动画的截止时间+当前帧执行的时间，这里的nextFrameTime仅仅是临时变量//如果连续两帧的时间都小于当前帧的时间,则说明得调高FPSif(nextFrameTime<activeFrameTime&&previousFrameTime<activeFrameTime){//将activeFrameTime的值减小相当于调高FPS。同时取nextFrameTime与previousFrameTime中较大的一个以让前后两帧都不出问题。activeFrameTime=nextFrameTime<previousFrameTime?previousFrameTime:nextFrameTime;}else{previousFrameTime=nextFrameTime;}frameDeadline=rafTime+activeFrameTime;//当前帧的截止时间(上面几行代码的目的是得到该frameDeadline值,该值在postMessage会用来判断)if(!isMessageEventScheduled){isMessageEventScheduled=true;port.postMessage(undefined);//最后进入第④步,通过postMessage触发消息事件。}};//DOM环境下requestIdleCallback的实现,这里第二个参数在最新的requestIdleCallback中因为对象类型requestHostCallback=function(callback,absoluteTimeout){scheduledHostCallback=callback;//这里的callback为调度器回调函数timeoutTime=absoluteTimeout;if(isFlushingHostCallback||absoluteTimeout<0){//针对优先级较高的任务不等下一个帧，在当前帧通过postMessage尽快执行port.postMessage(undefined);}elseif(!isAnimationFrameScheduled){//①如果rAF在当前帧没有安排任务,则开始一个帧的流程isAnimationFrameScheduled=true;requestAnimationFrameWithTimeout(animationTick);}};cancelHostCallback=function(){scheduledHostCallback=null;isMessageEventScheduled=false;timeoutTime=-1;};```###相关资料*[requestIdleCallbackpolyful](https://github.com/facebook/react/blob/master/packages/scheduler/src/forks/SchedulerHostConfig.default.js)"},{name:"流畅性.md",path:"/React/流畅性.md",type:"file",mdconf:{abbrlink:"13ymm2xq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:7971,extension:".md",relative:"/React/流畅性.md",isEmpty:!1,content:"\x3c!--abbrlink:13ymm2xq--\x3e###流畅性*被动交互:animation*主动交互:鼠标、键盘###被动交互![](http://with.muyunyun.cn/23b109b73c8296e2c0d9178d214f33f0.jpg-400)当前市面上的设备频率在60HZ以上。###主动交互跑如下界面https://code.h5jun.com/pojob通过观察上述demo,可以看到100ms以下的点击是顺畅的,而超过100ms的点击就会有卡顿现象。####让用户感觉到流畅衡量一个网页/App是否流畅有个比较好用的[Rail模型](https://developers.google.com/web/fundamentals/performance/rail),它大概有以下几个评判标准值。```Response——100msAnimation——16.7msIdle——50msLoad——1000ms```###像素管道像素管道一般由5个部分组成。JavaScript、样式、布局、绘制、合成。如下图所示:![](http://with.muyunyun.cn/a4498ef249fafc3d47f1443df4108256.jpg)>[渲染性能](https://developers.google.com/web/fundamentals/performance/rendering/?hl=zh-cn)###保证主动交互让用户感觉流畅```jsfunctionApp(){useEffect(()=>{setTimeout(()=>{conststart=performance.now()while(performance.now()-start<1000){}console.log('done!')},5000)})return(<inputtype=\"text\"/>);}```![](http://with.muyunyun.cn/574ac0a2b41a78fdb00f2db3d250de37.jpg-400)超过50ms认为是`longtask(长任务)`,`longtask`会阻塞`mainthread`的运行。在[chrome74](https://developers.google.com/web/updates/2019/03/devtools#longtasks),对longtask进行了标明:![](http://with.muyunyun.cn/26e2861027babde1248178a0ad2252ed.jpg-400)如下是两种解决方案。####WebWorker`app.js`代码如下:```jsimportReact,{useEffect}from'react'importWorkerCodefrom'./worker'functionApp(){useEffect(()=>{consttestWorker=newWorker(WorkerCode)setTimeout(_=>{testWorker.postMessage({})testWorker.onmessage=function(ev){console.log(ev.data)}},5000)})return(<inputtype=\"text\"/>);}````worker.js`代码如下:```jsconstworkerCode=()=>{self.onmessage=function(){conststart=performance.now()while(performance.now()-start<1000){}postMessage('done!')}}```![](http://with.muyunyun.cn/df7d2b274685c20638cdde68cb54927d.jpg)此时在输入框输入时没有卡顿的感觉。####TimeSlicing下面是另外一种使页面流畅的方法——`TimeSlicing`(时间分片)。#####TimeSlicing的意义如果某个任务超过50ms没有执行完,为了避免阻塞浏览器主线程的执行,该任务应该让出执行的控制权,让浏览器处理完其它任务后再来执行该任务。#####TimeSlicing观察Chrome的Performance,火焰图如下,![](http://with.muyunyun.cn/8cbc0ea884095aa25a79bd9d474ff2e5.jpg)从火焰图可以看出主线程被拆分为了多个时间分片,所以不会造成卡顿。时间分片的代码片段如下所示:```jsfunctiontimeSlicing(gen){if(typeofgen==='function')gen=gen()if(!gen||typeofgen.next!=='function')return(functionnext(){constres=gen.next()//①if(res.done)return//⑤setTimeout(next)//③})()}//调用时间分片函数timeSlicing(function*(){conststart=performance.now()while(performance.now()-start<1000){console.log('执行逻辑')yield//②}console.log('done')//④})```前置知识[Generator](https://github.com/MuYunyun/blog/blob/master/BasicSkill/readES6/Generator.md)下面对该函数进行分析:1.往时间分片函数`timeSlicing`中传入`generator`函数;2.函数的执行顺序——①、②、③、①(此时有个竞赛的关系,如果`performance.now()-start<1000`则继续②、③,如果`performance.now()-start>=1000`则跳出循环执行④、⑤);如何说:1.timeSlicing传入generator函数;2.我们知道generator函数提供了yiled这个暂停口子;3.通过这个口子控制权可以转交到timeSlicing内部;4.通过setTimeout将longtasks切分到多个事件队列中执行;#####避免把任务分解的过于零碎使用`TimeSlising`会让任务的完成时间变长,但为了让用户体验流畅,这种取舍还是有必要的。这个也是在[schedule](https://github.com/MuYunyun/blog/blob/master/BasicSkill/React/schedule.md)中提到的`目标对象更快完成渲染`与`及时响应优先级更高任务`的矛盾。假设某个任务执行时间为`100ms`,假设被分割的任务间隔是`4ms`,分割成2个`50ms`的任务和分割成100个`1ms`的任务分别耗时。```(50+4)*2=108ms(1+4)*100=500ms```针对上述函数作如下调整:```jsfunctiontimeSlicing(gen){if(typeofgen==='function')gen=gen()if(!gen||typeofgen.next!=='function')return(functionnext(){constinit=performance.now()letres=gen.next()while(!res.done&&performance.now()-init<25){//这里相当于是一个控制执行多少的阀门。res=gen.next()}if(res.done)returnsetTimeout(next)})()}```####conclusion针对`longtask`会阻塞`mainthread`的运行的情形,给出两种解决方案:*`WebWorker`:使用`WebWorker`提供的多线程环境来处理`longtask`;*`TimeSlicing`:将主线程上的`longtask`进行时间分片;###保证被动交互让用户感觉流畅保证`16.7ms`有新的一帧传输到界面上。除去用户的逻辑代码,一帧内留给浏览器整合的时间大概只有`6ms`左右,回到像素管道上来,我们可以从这几方面进行优化:####避免CSS选择器嵌套过深Style这部分的优化在css样式选择器的使用,css选择器使用的层级越多,耗费的时间越多。以下是测试css选择器不同层级筛选相同元素的一次测试结果。```div.box:not(:empty):last-of-typespan2.25msindex.html:85.box--lastspan0.28msindex.html:85.box:nth-last-child(-n+1)span2.51ms```####避免布局重排```js//先修改值el.style.witdh='100px'//后取值constwidth=el.offsetWidth```这段代码有什么问题呢?![](http://with.muyunyun.cn/9f446b40c45fa93b26bf91927e84c676.jpg)可以看到它会造成布局重排。![](http://with.muyunyun.cn/02a6a152cb141781df115840495ed356.jpg)应对的策略是调整它们的执行顺序,```js//先取值constwidth=el.offsetWidth//后修改值el.style.witdh='100px'```![](http://with.muyunyun.cn/b84405a014e98f0903703f7d45b9497d.jpg)可以看到经过调换顺序后,后执行的el.style.width会新开一个像素管道,而不会在原先的像素管道进行重排。此外不要在循环中执行如下的操作,```jsfor(vari=0;i<1000;i++){constnewWidth=container.offsetWidth;//①boxes[i].style.width=newWidth+'px';//②}```可以在火焰图中看到它发生了重绘的警告,![](http://with.muyunyun.cn/4ee7202c8d28e685a9cd347061eb39e9.jpg)执行顺序是①②①②①②①...,假若我们在第一个①后面插入一条竖线后①|②①②①②①,其就变成先修改值后取值的情景,所以也就发生了重绘!正确的使用姿势应该如下:```jsconstnewWidth=container.offsetWidth;for(vari=0;i<1000;i++){boxes[i].style.width=newWidth+'px';}```####避免重绘创建Layers(图层)可以避免重绘,```css{transform:translateZ(0);}```###相关链接*[csstriggers](https://csstriggers.com/)里添加了各个CSS属性对重排、重绘、组合的影响。*[时间切片](https://github.com/berwin/Blog/issues/38)*[ReactFiber架构](https://zhuanlan.zhihu.com/p/37095662):\"如何调度时间才能保证流畅\"此小节可以参阅"},{name:"测试",path:"/React/测试",children:[{name:"AB测试.md",path:"/React/测试/AB测试.md",type:"file",mdconf:{abbrlink:"fwcrvd7v"},birthtime:"2022-01-16",mtime:"2022-01-16",size:540,extension:".md",relative:"/React/测试/AB测试.md",isEmpty:!1,content:"\x3c!--abbrlink:fwcrvd7v--\x3e###A/B测试AB测试是一个反复迭代优化的过程，它的基本步骤如下图所示可以划分为![](http://with.muyunyun.cn/036ddf6dae41356524211c8bdf830744.jpg)###周边定理*大数定律与中心极限定理*抽样分布*新属性检验*T检验例子###相关链接*[谷歌是怎么用A/B测试的](https://mp.weixin.qq.com/s/43qcdwNqYP9QdgwdfR5HWA)-[][怎样学习A/BTesting（AB测试）？](https://www.douban.com/note/698028685/)后面如果有需要再看"},{name:"JEST.md",path:"/React/测试/JEST.md",type:"file",mdconf:{abbrlink:"42ftlsp4"},birthtime:"2022-01-16",mtime:"2022-01-16",size:72,extension:".md",relative:"/React/测试/JEST.md",isEmpty:!1,content:"\x3c!--abbrlink:42ftlsp4--\x3etodo:整理JEST与ReactTestingLibrary"},{name:"Jest与ReactTestingLibrary.md",path:"/React/测试/Jest与ReactTestingLibrary.md",type:"file",mdconf:{abbrlink:"cvrgghl3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:8636,extension:".md",relative:"/React/测试/Jest与ReactTestingLibrary.md",isEmpty:!1,content:"\x3c!--abbrlink:cvrgghl3--\x3e###jest与jest-dom(ReactTestingLibrary)###一些配置`jest.config.js`的一些常见配置属性如下:```jsmodule.exports={//可以指定测试环境testEnviroment:'jest-environment-node'|'jest-enviroment-jsdom',//指定模块加载目录moduleDirectories:['node_modules',path.join(__dirname,'src'),'shared']//identity-obj-proxy支持在jest中引入css,同时支持css的模块化moduleNameMapper:{\"\\\\.(css|less|scss)$\":\"identity-obj-proxy\",},//beforejestisloaded(不依赖jest)setupFiles:[]//afterjestisloaded(依赖jest)setupTestFrameworkScriptFile:require.resolve('./test/setup-tests.js')//测试覆盖率收集目录collectCoverageFrom:['src/**/*.js']//指定测试覆盖率需要需要达到的阈值coverageThreshold:{global:{statements:80,branches:80,lines:80,functions:80,}}//增强watch模式体验:$npminstall--save-devjest-watch-typeaheadwatchPlugins:['jest-watch-typeahead/filename','jest-watch-typeahead/testname',]}```>[jest-emotion](https://github.com/emotion-js/emotion):css中具体样式发生更改便重新生成snapshot。###jest-dom`jest-dom`封装了测试dom的方法。报错的信息可以更加准确。```jsimport'jest-dom/extend-expect'```此时可以使用如下方法:```jsexpect(input).toHavaAttribute('type','number')//是否有某个属性expect(..).toHaveTextContent()//是否有某个内容```###dom-test-library`dom-test-library`的优势。*增加了更多的操作,比如根据label找对应的节点;*支持正则匹配;```jsimport{queries}from'dom-testing-library'```###@testing-library/react的使用`@testing-library/react`在`dom-test-library`的基础上查找React组件。```jsimport'react-testing-library/cleanup-after-each'//自动完成每次的回收```*可以使用`react-testing-library`中的debug函数来对子组件进行断点调试。```jstest('...',()=>{const{debug}=render(<Component/>)debug()//ordebug(<SomeComponent/>)})```*TestReactComponentEventHandlerswithfireEventfromreact-testing-library```jsimport{fireEvent}from'react-testing-library'fireEvent.change()```*几种断言方式*方式一:`expect(container).toHaveTextContent(/thenumberisinvalid/i)`*方式二:`getByText(/thenumberisinvalid/i)`*方式三:`expect(getByText(/thenumberisinvalid/i)).toBeTruthy()`*方式四:配合`data-testid`属性可以使用`expect(getByTestId('...')).toHaveTextContent(/thenumberisinvalid/i)`*Testpropupdateswithreact-testing-library```jstest('...',()=>{const{rerender}=render(<Component/>)rerender(<SomeComponent/>)})```*`getByLabelText`(forminputs)*`getByPlaceholderText`(onlyifyourinputdoesn’thavealabel—lessaccessible!)*`getByText`(buttonsandheaders)*`getByAltText`(images)*`getByTestId`(usethisforthingslikedynamictextorotherwiseoddelementsyouwanttotest)上述每一个方法都有对应的`queryByFoo`替代方法。以`query`开头的方法找不到的话会返回null,以`get`开头的方法找不到的话会throw。如果这些都不会让你确切地知道你在找什么,render方法也会返回映射到container属性的DOM元素，所以也可以像`container.querySelector('body#root')`一样使用它。*MockHTTPRequestswithjest.mockinReactComponentTests```jsimport{render,fireEvent,wait}from'react-testing-library'import{loadGreetingasmockLoadGreeting}from'../api'jest.mock('../api',()=>{return{loadGreeting:jest.fn(subject=>Promise.resolve({data:{greeting:`Hi${subject}`}}),),}})test('loadsgreetingsonclick',()=>{const{getByLabelText,getByText,getByTestId}=render(<GreetingLoader/>)constnameInput=getByLabelText(/name/i)constloadButton=getByText(/load/i)nameInput.value='Mary'fireEvent.click(loadButton)awaitwait(()=>expect(getByTestId('greeting')).toHaveTextContent())expect(mockLoadGreeting).toHaveBeenCalledTimes(1)expect(mockLoadGreeting).toHaveBeenCalledWith('Mary')})```*Mockreact-transition-groupinReactComponentTestswithjest.mock比如`react-transition-group`动画库也是存在异步库,它会在1s后将Children隐藏,这时候可以使用`mock`来处理。```jsjest.mock('react-transition-group',()=>{return{CSSTransition:props=>(props.in?props.children:null),}})```*将`console.error()`mock掉```jsbeforeEach(()=>{jest.spyOn(console,'error').mockImplementation(()=>{})})afterEach(()=>{console.error.mockRestore()})``````js//componentDidCatch里的两个参数consterror=expect.any(Error)constinfo={componentStack:expect.stringContaining('Bomb')}expect(mockReportError).toHaveBeenCalledWith(error,info)```*[jest-dom](https://github.com/testing-library/jest-dom)*[toBeVisible](https://github.com/testing-library/jest-dom#tobevisible)###mock测试####mock请求后端接口数据当测试需要请求后端接口数据的UI组件(比如图片上传组件),为了防止接口不稳定等影响到测试用例通过,通常需要对请求后端接口数据进行mock。>当需要测试接口返回的真实数据时可以对其进行集成测试。```jsjest.spyOn(global,'fetch').mockImplementation(()=>{Promise.resolve({json:()=>Promise.resolve(mockData)})})```####mock浏览器节点信息在使用JEST测试一些需要浏览器位置信息的组件(比如PullToRefresh、Scrollbar组件等等)时,需要将浏览器节点信息给mock掉。1.将获取位置的方法抽离到util包中;*这也是为什么尽量将`函数力度拆细`的原因。2.mockutil包中的该方法;####mock模块/组件如果存在对当前组件的测试影响不大的第三方模块,可以将相关模块/组件进行mock,从而可以提高测试的效率。```jsjest.mock('someComponent',()=>{return(props)=>{return<span>mockComponent</span>}})```####mock时间类api如果测试用例中遇到`setTimeout(fn,5000)`真的等上5s后才执行fn测试效率是非常低效的,因此可以使用jest提供的`jest.useFakeTimers()`来mock与时间有关的api。```js//mocksoutsetTimeoutandothertimerfunctionswithmockfunctions.jest.useFakeTimers()//usejest.runAllTimers()tomakesureallperfofcallback.jest.runAllTimers()//moveaheadintimeby100msact(()=>{jest.advanceTimersByTime(100)})```###act`act`确保其函数里跟的单元方法(比如rendering、用户事件、数据获取)在执行步骤`makeassertions`之前已经全部执行完。```jsact(()=>{//rendercomponents})//makeassertions```###书写一个测试函数测试函数有两种风格,BDD(行为驱动开发)以及TDD(测试驱动开发)。*BDD风格:`foo.should.equal('bar')`或者`expect(foo).to.equal('bar')`;*TDD风格:`assert.equal(foo,'bar','fooequalbar')`;>[几种断言类型](https://www.chaijs.com/guide/styles/)下面我们来书写基于BDD风格的test函数:```jsasyncfunctiontest(title,callback){try{awaitcallback()console.log(`✓${title}`)}catch(error){console.error(`✕${title}`)console.error(error)}}````expect`函数:```jsfunctionexpect(actual){return{toBe(expected){if(actual!==expected){thrownewError(`${actual}isnotequalto${expected}`)}}}}```应用:```jsconstsum=(a,b)=>a+btest(\"sumaddsnumbers\",async()=>{constresult=awaitsum(3,7)constexpected=10expect(result).toBe(expected)})```###不得不测实例上的方法?如果在'@testing-library/react'中测试某些组件暴露给业务方的钩子,记录了下可以这样子测试```jsit('testinstanceexist',()=>{letinstancerender(<Componentref={node=>{instance=node}}/>)expect(Object.prototype.toString.call(instance.A)).toBe('[objectFunction]')expect(Object.prototype.toString.call(instance.B)).toBe('[objectFunction]')})```###link*[react-testing-3-jest-and-react-testing-library/](https://blog.sapegin.me/all/react-testing-3-jest-and-react-testing-library/)"},{name:"React现代化测试.md",path:"/React/测试/React现代化测试.md",type:"file",mdconf:{abbrlink:"xghy9857"},birthtime:"2022-01-16",mtime:"2022-01-16",size:7932,extension:".md",relative:"/React/测试/React现代化测试.md",isEmpty:!1,content:"\x3c!--abbrlink:xghy9857--\x3e###测试的动机测试用例的书写是一个风险驱动的行为,每当收到Bug报告时,先写一个单元测试来暴露这个Bug,在日后的代码提交中,若该测试用例是通过的,开发者就能更为自信地确保程序不会再次出现此bug。>测试的动机是有效地提高开发者的自信心。###前端现代化测试模型前端测试中有两种模型,`金字塔模型`与`奖杯模型`。金字塔模型摘自[MartinFowler'sblog](https://martinfowler.com/bliki/TestPyramid.html),模型示意图如下:![](http://with.muyunyun.cn/d97821c98ca86b161ac650198e6b44fd.jpg-300)金字塔模型自下而上分为单元测试、集成测试、UI测试,之所以是金字塔结构是因为单元测试的成本最低,与之相对,UI测试的成本最高。所以单元测试写的数量最多,UI测试写的数量最少。同时需注意的是越是上层的测试,其通过率给开发者带来的信心是越大的。奖杯模型摘自KentC.Dodds提出的[TheTestingTrophy](https://twitter.com/kentcdodds/status/960723172591992832?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E960723172591992832&ref_url=https%3A%2F%2Fkentcdodds.com%2Fblog%2Fwrite-tests),该模型是笔者比较认可的前端现代化测试模型,模型示意图如下:![](http://with.muyunyun.cn/0453d50194dfa1cbf7a4aeb70252c438.jpg-300)奖杯模型中自下而上分为静态测试、单元测试、集成测试、e2e测试,它们的职责大致如下:*`静态测试`:在编写代码逻辑阶段时进行报错提示。(代表库:eslint、flow、TypeScript)*`单元测试`:在奖杯模型中,单元测试的职责是对一些边界情况或者特定的算法进行测试。(代表库:[jest](https://github.com/facebook/jest)、[mocha](https://github.com/mochajs/mocha))*`集成测试`:模拟用户的行为进行测试,对网络请求、获取数据库的数据等依赖第三方环境的行为进行mock。(代表库:[jest](https://github.com/facebook/jest)、[react-testing-library](https://github.com/testing-library/react-testing-library))*`e2e测试`:模拟用户在真实环境上操作行为(包括网络请求、获取数据库数据等)的测试。(代表库:[cypress](https://github.com/cypress-io/cypress))越是上层的测试给开发者带来的自信是越大的,与此同时,越是下层的测试测试的效率是越高的。奖杯模型综合考虑了这两点因素,可以看到其在集成测试中的占比是最高的。###基于用户行为去测试书写测试用例是为了提高开发者对程序的自信心的,但是很多时候书写测试用例给开发者带来了觉得在做无用功的沮丧。导致沮丧的感觉出现往往是因为开发者对组件的具体实现细节进行了测试,如果换个角度站在用户的行为上进行测试则能极大提高测试效率。测试组件的具体细节会带来的两个问题:1.测试用例对代码`错误否定`;2.测试用例对代码`错误肯定`;以`轮播图组件`为例,依次来看上述问题。轮播图组件伪代码如下:```jsclassCarouselextendsReact.Component{state={index:0}/*跳转到指定的页数*/jump=(to:number)=>{this.setState({index:to})}render(){const{index}=this.statereturn<><SwipecurrentPage={index}/><buttononClick={()=>this.jump(index+1)}>下一页</button><span>`当前位于第${index}页`</span></>}}```如下是基于`enzyme`的api写的测试用例:```jsimport{mount}from'enzyme'describe('CarouselTest',()=>{it('testjump',()=>{constwrapper=mount(<Carousel><div>第一页</div><div>第二页</div><div>第三页</div></Carousel>)expect(wrapper.state('index')).toBe(0)wrapper.instance().jump(2)expect((wrapper.state('index')).toBe(2)})})```恭喜,测试通过✅。某一天开发者觉得`index`的命名不妥,对其重构将`index`更名为`currentPage`,此时代码如下:```jsclassCarouselextendsReact.Component{state={currentPage:0}/*跳转到指定的页数*/jump=(to:number)=>{this.setState({currentPage:to})}render(){const{currentPage}=this.statereturn<><SwipecurrentPage={currentPage}/><buttononClick={()=>this.jump(currentPage+1)}>下一页</button><span>`当前位于第${currentPage}页`</span></>}}```再次跑测试用例,此时在`expect(wrapper.state('index')).toBe(0)`的地方抛出了错误❌,这就是所谓的测试用例对代码进行了`错误否定`。因为这段代码对于使用方来说是不存在问题的,但是测试用例却抛出错误,此时开发者不得不做'无用功'来调整测试用例适配新代码。调整后的测试用例如下:```diffdescribe('CarouselTest',()=>{it('testjump',()=>{...-expect(wrapper.state('index')).toBe(0)+expect(wrapper.state('currentPage')).toBe(0)wrapper.instance().jump(2)-expect((wrapper.state('index')).toBe(2)+expect((wrapper.state('currentPage')).toBe(2)})})```然后在某一天粗心的小明同学对代码做了以下改动:```diffclassCarouselextendsReact.Component{state={currentPage:0}/*跳转到指定的页数*/jump=(to:number)=>{this.setState({currentPage:to})}render(){const{currentPage}=this.statereturn<><SwipecurrentPage={currentPage}/>-<buttononClick={()=>this.jump(currentPage+1)}>下一页</button>+<buttononClick={this.jump(currentPage+1)}>下一页</button><span>`当前位于第${index}页`</span></>}}```小明同学跑了上述单测,测试通过✅,于是开心地提交了代码。结果上线后线上出现了问题!这就是所谓测试用例对代码进行了`错误肯定`。因为测试用例测试了组件内部细节(此处为`jump`函数),让小明误以为已经覆盖了全部场景。测试用例`错误否定`以及`错误肯定`都给开发者带来了挫败感与困扰,究其原因是测试了组件内部的具体细节所至。而一个稳定可靠的测试用例应该脱离组件内部的实现细节,越接近用户行为的测试用例能给开发者带来越充足的自信。相较于enzyme,[react-testing-library](https://github.com/testing-library/react-testing-library)所提供的api更加贴近用户的使用行为,使用其对上述测试用例进行重构:```jsimport{render,fireEvent}from'@testing-library/react'describe('CarouselTest',()=>{it('testjump',()=>{const{getByText}=render(<Carousel><div>第一页</div><div>第二页</div><div>第三页</div></Carousel>)expect(getByText(/当前位于第一页/)).toBeInTheDocument()fireEvent.click(getByText(/下一页/))expect(getByText(/当前位于第一页/)).not.toBeInTheDocument()expect(getByText(/当前位于第二页/)).toBeInTheDocument()})})```关于`react-testing-Library`的用法总结将在下一章节[Jest与react-testing-Library](https://github.com/MuYunyun/blog/blob/master/React/测试/Jest与ReactTestingLibrary.md)具体介绍。如果对React技术栈感兴趣,欢迎关注[个人博客](https://github.com/MuYunyun/blog)。###相关链接*[write-tests](https://kentcdodds.com/blog/write-tests)*[Testing](https://reactjs.org/docs/testing-recipes.html)*[TestingImplementationDetails](https://kentcdodds.com/blog/testing-implementation-details)*[why-i-never-use-shallow-rendering](https://kentcdodds.com/blog/why-i-never-use-shallow-rendering)*[react-testing-1-best-practices](https://blog.sapegin.me/all/react-testing-1-best-practices/)"},{name:"mobile_test.md",path:"/React/测试/mobile_test.md",type:"file",mdconf:{abbrlink:"x2orssyg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1489,extension:".md",relative:"/React/测试/mobile_test.md",isEmpty:!1,content:"\x3c!--abbrlink:x2orssyg--\x3e##移动端测试指北移动端测试分为以下几个环节1.单元测试2.模拟真机/真机测试3.真机自动化测试##单元测试使用过`jest`+`ensyme`/`react-test-library`,推荐`react-test-library`。##模拟真机/真机测试###IOS机型*方案一:使用Xcode中的Simulator配合Safari进行模拟真机测试。![](http://with.muyunyun.cn/fcec13352f1a210d2f9718281ffca685.jpg)*方案二:使用IOS真机配合Safari进行真机测试。步骤一:Mac端配置。`Safari->Preferences->Advanced->ShowDevelopmenuinmenubar`![](http://with.muyunyun.cn/dc4029223c181baa0dd12643136894ac.jpg-400)步骤二:IOS真机配置(通过数据线连接到Mac)。`Settings->Safari->Advanced->openJavaScript&openWebInspector`![](http://with.muyunyun.cn/26e848d6445e04f44dbb41a63e55567e.jpg-300)步骤三:在Mac端的`Safari->Developer`菜单中此时就能看到个人的设备。此时在IOS中的Safari中访问对应网页，即可在Mac中的Safari个人开发工具进行调试。####兼容性需注意低版本的IOS机型未支持ES6，因此打包到线上环境的代码应该是编译成ES5。####如何在Simulator中测试双指拖拽放大缩小按住`shift+alt`按键可模拟双指拖拽放大、缩小的能力。###Android机型1.startupdevelopermodeinandroidapp;2.input[url](chrome://inspect)Chrometotest;"},{name:"测试之旅.md",path:"/React/测试/测试之旅.md",type:"file",mdconf:{abbrlink:"n6uxpy3o"},birthtime:"2022-01-16",mtime:"2022-01-16",size:435,extension:".md",relative:"/React/测试/测试之旅.md",isEmpty:!1,content:"\x3c!--abbrlink:n6uxpy3o--\x3e如果想让程序更加健壮,那就必须让它经过更加系统/全面的测试。###ssr测试1.@testing-library是不能用于在server端渲染的,所以服务端渲染要用enzyme的render方法;2.ant-design所有组件都会跑一份共同的[服务端测试文件](https://github.com/ant-design/ant-design/blob/a754d9f60a565acf73c05a2ce78ecb827f621366/tests/shared/demoTest.ts)"},{name:"自动化测试.md",path:"/React/测试/自动化测试.md",type:"file",mdconf:{abbrlink:"gudtegr3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:166,extension:".md",relative:"/React/测试/自动化测试.md",isEmpty:!1,content:"\x3c!--abbrlink:gudtegr3--\x3e-[][前端自动化测试探索](https://fex.baidu.com/blog/2015/07/front-end-test/):介绍测试比较广泛。包括样式测试。"},{name:"静态测试.md",path:"/React/测试/静态测试.md",type:"file",mdconf:{abbrlink:"753pz3s3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:628,extension:".md",relative:"/React/测试/静态测试.md",isEmpty:!1,content:'\x3c!--abbrlink:753pz3s3--\x3e###prettier的使用```yarnaddprettier-D````prettier`项目的全部文件```"scripts":{"format":"prettier--write\\"**/*.+(js|jsx|json|yml|yaml|css|less|scss|ts|tsx|md|mdx|graphql|vue)\\""},```--list-diffetent:列出需要prettier的列表```js"format":"npmrunprettier----write","prettier":"prettier\\"**/*.+(js|jsx|json|yml|yaml|css|less|scss|ts|tsx|md|graphql|mdx)\\"","validate":"npmrunlint&&npmrunprettier----list-different"```*`hawsky`:内置大量可以配合git命令执行的钩子*`lint-staged`:把范围缩小为操作更改的文件'}],type:"directory",size:19898},{name:"深入Fiber架构.md",path:"/React/深入Fiber架构.md",type:"file",mdconf:{abbrlink:"bqtcq53y"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5584,extension:".md",relative:"/React/深入Fiber架构.md",isEmpty:!1,content:"\x3c!--abbrlink:bqtcq53y--\x3e###名词解释在介绍`Fiber`之前,需要对官网中出现的以下名词有个深刻的认知。*`Reconciliation`:调和算法,得出`VirtualDom(针对Web)`之间的差异;*`Scheduling`:调度。`Recct`通过内部的调度来安排不同优先级的任务在`最佳时刻`执行(在Reconciler中调用);*`Render`:将`Reconciliation`的结果刷新到界面上;*`Fiber`:链表数据结构的`React`实现(个人理解)。>平常大家说的'Fiber'其实是由上面这些名词组成的架构,Fiber真正意义上只是一个链表数据结构的React实现版本。>在Fiber的数据结构下有助于实现concurrent以及errorboundary,你觉得如何实现？*并发这个考虑`Promise.all`?*可以通过链表锁定到具体的报错，让相应的`errorboundary`展现###Fiberfiber架构是一个增量渲染。```jscurrenttree=>workInProgresstree=>currenttree```workInProgresstree:fibernode+othernode(由virtualdom创建)，fiber里包含了创造节点后的[work](https://github.com/facebook/react/blob/b87aabdfe1b7461e7331abb3601d9e6bb27544bc/packages/shared/ReactSideEffectTags.js),比如对于组件的生命周期、对于html组件的增加、改、删除都属于副作用。[fiber的根节点](https://github.com/facebook/react/blob/0dc0ddc1ef5f90fe48b58f1a1ba753757961fc74/packages/react-reconciler/src/ReactFiberRoot.js#L31)###FiberConstructor如下是`Fiber`的属性,Fiber完整属性可参考[这里](https://github.com/facebook/react/blob/6e4f7c788603dac7fccd227a4852c110b072fe16/packages/react-reconciler/src/ReactFiber.js#L78)，各个属性的作用是什么呢?```js{stateNode:newClickCounter,type:ClickCounter,//组件的类型alternate:null,key:null,updateQueue:null,memoizedState:{count:0},pendingProps:{},//已经更新的dom但还未展示到页面上memoizedProps:{},//showlastrenderingtag:1,//Fiber的类型effectTag:0,nextEffect:null}```下面是对`fiber`对象中各属性的解释。*`type`:组件的类型*`key`:根据`key`字段判断该`fiber`对象是否可以复用*`child`:子链表的引用*`sibling`:相邻链表的引用*`return`:父链表的引用*`pendingProps`:和`memoizedProps`一起使用,若`pendingProps`与`memoizedProps`相等,则可以复用上一个fiber相关的输出*`memoizedProps`*`pendingWorkPriority`:代表优先级的数字。数字越大，优先级越低(例外0——nowork)。这个字段是否更改，待确认*`alternate`:指向其对应的`workInProgressfiber`*`effectTag`:副作用类型,这个effect作用于`commit`阶段(总共有render、commit阶段)*`nextEffect`:下一个副作用*`output`:输出值###Renderphase`HostRoot`上使用[renderRoot](https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js#L1132)*[performUnitOfWork](https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js#L1056)*[beginWork](https://github.com/facebook/react/blob/cbbc2b6c4d0d8519145560bd8183ecde55168b12/packages/react-reconciler/src/ReactFiberBeginWork.js#L1489)*[completeUnitOfWork](https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js#L879)*[completeWork](https://github.com/facebook/react/blob/cbbc2b6c4d0d8519145560bd8183ecde55168b12/packages/react-reconciler/src/ReactFiberCompleteWork.js#L532)`performUnitOfWork、completeUnitOfWork`完成遍历，主要工作发生在`beginWork、completeWork`中。###Commitphase*[completeRoot](https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js#L2306):起始于这个方法*[commitRoot](https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js#L523):Commitphase阶段主要执行的方法,更新dom以及调用commit阶段执行的生命周期方法。>找finishedWork可以这样找:fiberroot-currentproperty->currenttree->hostfiber-alternate->workInProgress(finshedWork)treecommitRoot的简单概要如下:```jsfunctioncommitRoot(root,finishedWork){commitBeforeMutationLifecycles()//getSnapShotBeforeUpdatecommitAllHostEffects();//operatedom,componentWillUnmountroot.current=finishedWork;//将finishedWorktree置为currenttreecommitAllLifeCycles();//remaininglifecycles}```*提问:为什么称呼从`diff`转为`reconciliation`###Fiber的三个阶段*开始阶段:[ReactFiberBeginWork](https://github.com/MuYunyun/react/blob/master/packages/react-reconciler/src/ReactFiberBeginWork.js)*完成阶段:[ReactFiberCompleteWork](https://github.com/MuYunyun/react/blob/master/packages/react-reconciler/src/ReactFiberCompleteWork.js)*提交阶段:[ReactFiberCommitWork](https://github.com/MuYunyun/react/blob/master/packages/react-reconciler/src/ReactFiberCommitWork.js)###资料推荐*[InsideFiber:in-depthoverviewofthenewreconciliationalgorithminReact](https://medium.com/react-in-depth/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react-e1c04700ef6e)*[react-fiber-architecture](https://github.com/acdlite/react-fiber-architecture)"},{name:"源码分析",path:"/React/源码分析",children:[{name:"React.Children.map.md",path:"/React/源码分析/React.Children.map.md",type:"file",mdconf:{abbrlink:"h62jej6e"},birthtime:"2022-01-16",mtime:"2022-01-16",size:867,extension:".md",relative:"/React/源码分析/React.Children.map.md",isEmpty:!1,content:"\x3c!--abbrlink:h62jej6e--\x3e###React.Children.map```jsfunctionParent(props){//React.Children.map会对第二个函数输出的值进行铺平操作console.log(React.Children.map(props.children,r=>[[r],r]));returnReact.Children.map(props.children,r=>[[r],r]);}functionApp(){return(<Parent><div>React.Children.map</div></Parent>);}```>[React.Children.map](https://codesandbox.io/s/4r08jvpk9w)###React.Children.map源码流程图`React.Children.map`的源码中有两个递归,一个是针对`React.Children`的递归,另外个是针对React.Children.map传入的第二个参数,如果其返回的是数组则会再次递归,目的是对数组中的数据进行铺平。![](https://github.com/MuYunyun/blog/blob/master/React/image/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/React.Children.map.png)"},{name:"React源码解读.mindnode",path:"/React/源码分析/React源码解读.mindnode",children:[{name:"QuickLook",path:"/React/源码分析/React源码解读.mindnode/QuickLook",children:[],type:"directory",size:0},{name:"style.mindnodestyle",path:"/React/源码分析/React源码解读.mindnode/style.mindnodestyle",children:[],type:"directory",size:0}],type:"directory",size:0},{name:"articles.md",path:"/React/源码分析/articles.md",type:"file",mdconf:{abbrlink:"zxuamh6y"},birthtime:"2022-01-16",mtime:"2022-01-16",size:188,extension:".md",relative:"/React/源码分析/articles.md",isEmpty:!1,content:"\x3c!--abbrlink:zxuamh6y--\x3e一些对阅读源码的文章###link*[howtowritecustomReactRenderer](https://medium.com/@agent_hunt/hello-world-custom-react-renderer-9a95b7cd04bc)"},{name:"expirationTime的计算.md",path:"/React/源码分析/expirationTime的计算.md",type:"file",mdconf:{abbrlink:"waiqiqhz"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2367,extension:".md",relative:"/React/源码分析/expirationTime的计算.md",isEmpty:!1,content:"\x3c!--abbrlink:waiqiqhz--\x3e###计算公式```jsconstMAX_SIGNED_31_BIT_INT=Math.pow(2,30)-1exportconstNoWork=0;exportconstNever=1;constUNIT_SIZE=10;constMAGIC_NUMBER_OFFSET=MAX_SIGNED_31_BIT_INT-1;//1unitofexpirationtimerepresents10ms.exportfunctionmsToExpirationTime(ms){//Alwaysaddanoffsetsothatwedon'tclashwiththemagicnumberforNoWork.returnMAGIC_NUMBER_OFFSET-((ms/UNIT_SIZE)|0);}exportfunctionexpirationTimeToMs(expirationTime){return(MAGIC_NUMBER_OFFSET-expirationTime)*UNIT_SIZE;}functionceiling(num,precision){return(((num/precision)|0)+1)*precision;}functioncomputeExpirationBucket(currentTime,expirationInMs,bucketSizeMs){return(MAGIC_NUMBER_OFFSET-ceiling(MAGIC_NUMBER_OFFSET-currentTime+expirationInMs/UNIT_SIZE,bucketSizeMs/UNIT_SIZE,));}exportconstLOW_PRIORITY_EXPIRATION=5000;exportconstLOW_PRIORITY_BATCH_SIZE=250;exportfunctioncomputeAsyncExpiration(currentTime){returncomputeExpirationBucket(currentTime,LOW_PRIORITY_EXPIRATION,LOW_PRIORITY_BATCH_SIZE,);}exportconstHIGH_PRIORITY_EXPIRATION=__DEV__?500:150;exportconstHIGH_PRIORITY_BATCH_SIZE=100;exportfunctioncomputeInteractiveExpiration(currentTime){returncomputeExpirationBucket(currentTime,HIGH_PRIORITY_EXPIRATION,HIGH_PRIORITY_BATCH_SIZE,);}````computeAsyncExpiration`函数化简后得到如下公式,针对这个公式目前的心得如下:1.抹平传入的`bucketSizeMs`精度误差,为batch作准备;2.`currentTime`越大,相应的`expirationTime`的结果如下图所示;![](http://with.muyunyun.cn/16a5237163f1e4f2967711442ec03a4c.jpg-200)```jsconstMAX_SIGNED_31_BIT_INT=Math.pow(2,30)-1constMAGIC_NUMBER_OFFSET=MAX_SIGNED_31_BIT_INT-1;functionceiling(num,precision){return(((num/precision)|0)+1)*precision;}functioncomputeExpirationBucket(currentTime){return(MAGIC_NUMBER_OFFSET-ceiling(MAGIC_NUMBER_OFFSET-currentTime+500,25,));}````ceiling`函数的作用:根据`precision`的精度取值```jsceiling(25,25)//50ceiling(26,25)//50ceiling(27,25)//50...ceiling(49,25)//50ceiling(50,25)//75ceiling(51,25)//75```"},{name:"image",path:"/React/源码分析/image",children:[],type:"directory",size:0},{name:"react-dom.md",path:"/React/源码分析/react-dom.md",type:"file",mdconf:{abbrlink:"rfxe2tr7"},birthtime:"2022-01-16",mtime:"2022-01-16",size:275,extension:".md",relative:"/React/源码分析/react-dom.md",isEmpty:!1,content:"\x3c!--abbrlink:rfxe2tr7--\x3e###react-dom本章目的梳理`react-dom`模块做了的事情。验证以下几件事。*.创建`ReactRoot`*.创建`FiberRoot`;*expiretime*看到scheduleWork收尾*update[React源码解析](https://react.jokcy.me/)"},{name:"setState.md",path:"/React/源码分析/setState.md",type:"file",mdconf:{abbrlink:"55kdze2t"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2255,extension:".md",relative:"/React/源码分析/setState.md",isEmpty:!1,content:'\x3c!--abbrlink:55kdze2t--\x3e###setState是同步还是异步的?```jsclassAppextendsReact.Component{state={num:0};analyze=()=>{this.setState({num:this.state.num+1});console.log("num",this.state.num);this.setState({num:this.state.num+1});console.log("num",this.state.num);this.setState({num:this.state.num+1});console.log("num",this.state.num);};handleClick=()=>{this.analyze();//①//setTimeout(()=>{//②//this.analyze();//},0);};render(){return<buttononClick={this.handleClick}>clickbutton</button>;}}```①处代码打印结果:000;②处代码打印结果:123;>[demo演示](https://codesandbox.io/s/6l98prq3nk)为什么会出现这样的现象呢,相关源码如下:```js//如果满足一定条件,则对setState做批量更新functionbatchedUpdates(fn){constpreviousIsBatchingUpdates=isBatchingUpdates;isBatchingUpdates=true;try{returnfn(a);//相当于所有setState都在这里执行,相当于就是异步执行setState了。可见上述demo}finally{isBatchingUpdates=previousIsBatchingUpdates;if(!isBatchingUpdates&&!isRendering){performSyncWork();}}}//setState会进这个函数functionrequestWork(root,expirationTime){addRootToSchedule(root,expirationTime);if(isRendering){return;}if(isBatchingUpdates){//Flushworkattheendofthebatch.if(isUnbatchingUpdates){//...unlesswe\'reinsideunbatchedUpdates,inwhichcaseweshould//flushitnow.nextFlushedRoot=root;nextFlushedExpirationTime=Sync;performWorkOnRoot(root,Sync,false);}return;}//如果isBatchingUpdates为false则执行这里,相当于setState每次调用这里,就是同步的了if(expirationTime===Sync){performSyncWork();}else{scheduleCallbackWithExpirationTime(root,expirationTime);}}```依赖上下文中`isBatchingUpdates`等相关布尔值,如果`isBatchingUpdates`为`true`则进行批量更新,如果`isBatchingUpdates`为`false`则进行同步更新'},{name:"位运算符.md",path:"/React/源码分析/位运算符.md",type:"file",mdconf:{abbrlink:"736q491q"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1075,extension:".md",relative:"/React/源码分析/位运算符.md",isEmpty:!1,content:"\x3c!--abbrlink:736q491q--\x3e###位运算符小数和0使用位运算符能得到对应的整数。这个知识点在计算`expirationTime`中有用到。```js1.1|0=>1```###位运算在React的运用可以看到在React中存在大量对位运算声明的环境信息。比如下面摘自[源码](https://github.com/MuYunyun/react/blob/bf8c904110dfd4ba6870a952e3291d78136308cb/packages/react-reconciler/src/ReactTypeOfMode.js#L12-L15)。```jsvarNoContext=0b000;varConcurrentMode=0b001;varStrictMode=0b010;varProfileMode=0b100;```使用二进制的数字声明变量有什么好处呢?答案是简单易用。*判断是否是`ConcurrentMode````jsNoContext&ConcurrentMode//0```*使用`ConcurrentMode````jsNoContext|ConcurrentMode//1```*使用`ConcurrentMode`以及`StrictMode````jsvarcontext=NoContext|ConcurrentMode|StrictMode//3context&ConcurrentMode//1context&StrictMode//2```###相关链接*[位运算符在JS中的妙用](https://juejin.cn/post/6844903568906911752)"}],type:"directory",size:7027},{name:"源码贡献之路.md",path:"/React/源码贡献之路.md",type:"file",mdconf:{abbrlink:"8xo3hdcb"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3927,extension:".md",relative:"/React/源码贡献之路.md",isEmpty:!1,content:"\x3c!--abbrlink:8xo3hdcb--\x3e###逆向工程思维阅读源码可以分三步走:1.观察2.假设3.验证####一些技巧*使用逆向工程思维阅读源码可以一边在本地看`source`代码(结合IDE找代码更加快)，一边使用[AddReacttoaWebsite](https://reactjs.org/docs/add-react-to-a-website.html)的方式调试demo/验证猜想;*读源码的时候可以将零星的知识记录下来，最后合成一张思维导图;*有些复杂的递归逻辑可以结合自己的原生知识在需要的位置上进行断点调试;*`debugger`在`chrome`上运用`decorator`,如下图;![debugger在chrome上的方法](https://cdn-images-1.medium.com/max/1600/1*h9Uo6Su5-Y1LcVRfox4UqA.jpeg)###一些注意*pr到master分支*[good-first-issues](https://github.com/facebook/react/issues?q=is:open+is:issue+label:%22good+first+issue%22)###代码库概览>[官网repo](https://github.com/reactjs/reactjs.org)、[React依赖的工具库](https://github.com/facebook/fbjs)####根目录*[packages](https://github.com/facebook/react/tree/master/packages):核心模块*[fixtures](https://github.com/facebook/react/tree/master/fixtures):一些测试App*build:开发者本地执行yarnbuild后生成####monorepo*[packages/react](https://github.com/facebook/react/tree/master/packages/react):包含React.createElement()、React.component、React.children;*[packages/react-dom](https://github.com/facebook/react/tree/master/packages/react-dom):浏览器端渲染;*[packages/events](https://github.com/facebook/react/tree/master/packages/events):合成事件;*[packages/scheduler](https://github.com/facebook/react/tree/master/packages/scheduler):调度事件;*[packages/react-native-renderer](https://github.com/facebook/react/tree/master/packages/react-native-renderer):`React-Native`端渲染*[packages/react-test-renderer](https://github.com/facebook/react/tree/master/packages/react-test-renderer):用在`jest`的`SnapshotTest`中;*[packages/react-art](https://github.com/facebook/react/tree/master/packages/react-art):`Canvas`,`SVG`等渲染;*[packages/react-reconciler](https://github.com/facebook/react/tree/master/packages/react-reconciler):`FiberReconciler`的实现;*[packages/shared](https://github.com/facebook/react/tree/master/packages/shared):共享工具函数;>最为重要的是前4块内容。###React中的设计原则*组合。组件是可以互相组合的函数。*抽象。`React`只会抽象一些确实对使用者有帮助的特性(比如`State、LifeCycle`)，而不会抽象一些使用者自己可以实现的功能。`React团队`会在[BigPicture](https://github.com/facebook/react/issues?q=is:open+is:issue+label:%22Type:+Big+Picture%22)中和大家商榷这些抽象。###React项目运行###React16之后的打包方式*16之前是每个文件单独打包在lib文件夹下,[15.6.2](https://unpkg.com/react@15.6.2/lib/)*16版本只暴露两个包在umd文件夹下,[16.0.0](https://unpkg.com/react@16.0.0/umd/)>打包方式有这个转变的原因是因为之前打成多个包的形式对于打包器来说是低效的(会多出大量胶水代码)。###相关资源*[LevelUpYourReverseEngineeringSkills](https://blog.angularindepth.com/level-up-your-reverse-engineering-skills-8f910ae10630):这篇文章中介绍了逆向工程思维是什么——去探究新知识点，并为之兴奋;*[Practicalapplicationofreverse-engineeringguidelinesandprinciples](https://medium.com/react-in-depth/practical-application-of-reverse-engineering-guidelines-and-principles-784c004bb657):结合React介绍逆向工程思维;*[HowtoContribute](https://reactjs.org/docs/how-to-contribute.html)*[RepositoryInfrastructure](https://react.docschina.org/blog/2017/12/15/improving-the-repository-infrastructure.html)"},{name:"相关技术栈",path:"/React/相关技术栈",children:[{name:"GraghQL.md",path:"/React/相关技术栈/GraghQL.md",type:"file",mdconf:{abbrlink:"pzfuz7mc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:217,extension:".md",relative:"/React/相关技术栈/GraghQL.md",isEmpty:!1,content:"\x3c!--abbrlink:pzfuz7mc--\x3e###link*[阻碍你使用GraphQL的十个问题](https://leetcode-cn.com/articles/%E9%98%BB%E7%A2%8D%E4%BD%A0%E4%BD%BF%E7%94%A8-graphql-%E7%9A%84%E5%8D%81%E4%B8%AA%E9%97%AE%E9%A2%98/)"},{name:"React-DnD.md",path:"/React/相关技术栈/React-DnD.md",type:"file",mdconf:{abbrlink:"oz3ab9b8"},birthtime:"2022-01-16",mtime:"2022-01-16",size:154,extension:".md",relative:"/React/相关技术栈/React-DnD.md",isEmpty:!1,content:"\x3c!--abbrlink:oz3ab9b8--\x3e*[React-Dnd](https://github.com/react-dnd/react-dnd)*[React-DnD使用](http://www.phperz.com/article/16/0115/183290.html)"},{name:"Redux-Saga实践.md",path:"/React/相关技术栈/Redux-Saga实践.md",type:"file",mdconf:{abbrlink:"iyizcnh2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:484,extension:".md",relative:"/React/相关技术栈/Redux-Saga实践.md",isEmpty:!1,content:"\x3c!--abbrlink:iyizcnh2--\x3e来看为什么有如下api:###call/put本质目的是让测试用例不必再发起多一次函数调用,取而代之转为比较对象是否相同。*使用`call`替代使用`fetch`*使用`put`替代使用`dispatch{action}`###fork*使用`fork`:模拟多个线程###redux-saga相较于redux-thunk的一些优点*对测试用例较为友好(比较函数和传入参数)*对异步操作流程的操作颗粒度更加细"},{name:"Redux与Mobx适用场景.md",path:"/React/相关技术栈/Redux与Mobx适用场景.md",type:"file",mdconf:{abbrlink:"idu7szrn"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1209,extension:".md",relative:"/React/相关技术栈/Redux与Mobx适用场景.md",isEmpty:!1,content:"\x3c!--abbrlink:idu7szrn--\x3e###Redux的简易实现```jsfunctioncreateStore(reducer,initialState){letstate=initialStateconsteventList=[]functiongetState(){returnstate}functiondispatch(action){state=reducer(state,action)eventList.map(r=>r(state))}functionsubscribe(event){eventList.push(event)}return{getState,subscribe,dispatch,}}```测试用例```jsconstreducer=function(state,action){switch(action.type){case'update':returnaction.payloadbreakcase'update1':return{...state,a:action.payload,}breakdefault:returnstate}}conststore=createStore(reducer,{a:1,b:2})store.subscribe((state)=>{console.log(state)})store.dispatch({type:'update',payload:{a:1,b:2}})//{a:1,b:2}store.dispatch({type:'update1',payload:3})//{a:3,b:2}console.log(store.getState())//{a:3,b:2}```###Redux与Mobx适用场景####redux*store-view-action的闭环*Redux颗粒度更细,相对更安全####mobx*store-view的闭环*使用了类双向绑定的思维"},{name:"dva.md",path:"/React/相关技术栈/dva.md",type:"file",mdconf:{abbrlink:"uerht7ui"},birthtime:"2022-01-16",mtime:"2022-01-16",size:381,extension:".md",relative:"/React/相关技术栈/dva.md",isEmpty:!1,content:"\x3c!--abbrlink:uerht7ui--\x3e###dva看看`dva`需要实现哪些部分。*dva-cli:搭建项目脚手架*roadhog:就是对`webpack`的封装*dva:对`react`、`redux`、`redux-saga`的封装*umi:工具+路由,和`roadhog`有一定重叠,解放dva让其做数据流的工作####use[分析dva的工程演进](https://github.com/demos-platform/dva)"},{name:"relay.md",path:"/React/相关技术栈/relay.md",type:"file",mdconf:{abbrlink:"2bcxyoc2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1299,extension:".md",relative:"/React/相关技术栈/relay.md",isEmpty:!1,content:'\x3c!--abbrlink:2bcxyoc2--\x3e###RelayIt\'snotjusta`GraghQLclient`butalsoaframeworkfor`declarativedata-fetching`.###FetchingDataUsingRESTAPI:```js//FetchthelistofstoryIDsbutnottheirdetails:rest.get(\'/stories\').then(stories=>//Thisresolvestoalistofitemswithlinkedresources://`[{href:"http://.../story/1"},...]`Promise.all(stories.map(story=>rest.get(story.href)//Followthelinks))).then(stories=>{//Thisresolvestoalistofstoryitems://`[{id:"...",text:"..."}]`console.log(stories);});```请求接口次数为`n+1`;```jsgraphql.get(`query{stories{id,text}}`).then(stories=>{//Alistofstoryitems://`[{id:"...",text:"..."}]`console.log(stories);});```###links*[Relaydocument](https://relay.dev/docs/en/experimental/step-by-step)*[step-by-step](https://relay.dev/docs/en/experimental/step-by-step):done*[ThinkinginGraghQL](https://relay.dev/docs/en/thinking-in-graphql):toread*[ThinkinginRelay](https://relay.dev/docs/en/thinking-in-relay):toread*[relay-examples](https://github.com/relayjs/relay-examples/tree/master/issue-tracker)*[suspense-experimental](https://github.com/gaearon/suspense-experimental-github-demo)'},{name:"router的简易实现.md",path:"/React/相关技术栈/router的简易实现.md",type:"file",mdconf:{abbrlink:"163w51fk"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1983,extension:".md",relative:"/React/相关技术栈/router的简易实现.md",isEmpty:!1,content:"\x3c!--abbrlink:163w51fk--\x3e###router的简易实现###基于hash的实现以下为`hashChange`的简版实现```jsclassRouter{constructor(){this.router={}window.addEventListener('hashchange',(e)=>{consttag=location.hash.slice(1)this.router[tag]&&this.router[tag]()})}route(path,fn){this.router[path]=fn}}constrouter=newRouter()constchangeColor=(color)=>{document.body.style.background=color}router.route('red',()=>{changeColor('red')})router.route('yellow',()=>{changeColor('yellow')})router.route('blue',()=>{changeColor('blue')})``````html<ul><ahref=\"#red\">red</a><ahref=\"#yellow\">yellow</a><ahref=\"#blue\">blue</a></ul>```###基于history的实现>以下代码需要运行在http端口。```jsclassRouter{constructor(){this.router={}window.addEventListener('popstate',(e)=>{constpath=e.state.paththis.router[path]&&this.router[path]()})}route(path,fn){this.router[path]=fn}go(path){history.pushState({path:path},null,path)//核心思路,pushState进去的第一个对象会在点击回退/前进按钮时触发popstatethis.router[path]&&this.router[path]()}}constrouter=newRouter()constchangeColor=(color)=>{document.body.style.background=color}router.route('red',()=>{changeColor('red')})router.route('yellow',()=>{changeColor('yellow')})router.route('blue',()=>{changeColor('blue')})document.getElementsByTagName('ul')[0].addEventListener('click',(e)=>{router.go(e.target.innerText)})``````html<ul><lihref=\"red\">red</li><lihref=\"yellow\">yellow</li><lihref=\"blue\">blue</li></ul>```###路由的监听*hash路由window.addEventListener('hashchange')*history路由###参考[面试官:你了解前端路由吗?](https://juejin.im/post/5ac61da66fb9a028c71eae1b)"},{name:"在react使用immutable数据的优势.md",path:"/React/相关技术栈/在react使用immutable数据的优势.md",type:"file",mdconf:{abbrlink:"4sdxeudx"},birthtime:"2022-01-16",mtime:"2022-01-16",size:933,extension:".md",relative:"/React/相关技术栈/在react使用immutable数据的优势.md",isEmpty:!1,content:"\x3c!--abbrlink:4sdxeudx--\x3e###疑问>在知乎上提了个[使用immutable.js后有什么优势？](https://www.zhihu.com/question/297323663)###自答假如要更新4,immutable.js只在绿色这条线做了特殊处理,其它紫色的部分保持不变。相当于是优化了深拷贝的实现,数据结构方面可以想象成链表,因此在深拷贝的时候没有递归那么耗费性能,同时也更利于数据的获取。因为最顶部的对象变化了,React就提前知道需要重新渲染了(可以弥补PureComponent只作浅比较的不足)。不过Updatedtree里的每一个节点还是会重新diff的,不过在数据前后比较的这个层面上讲,immutable.js的效率确实会高一些。![](http://with.muyunyun.cn/aeef08a94abebda30e9a5fa68e201fa8.jpg)另外,使用immutable.js的话需要将所有的state,props都转化成其定义的形式。成本还是有的。"},{name:"多端",path:"/React/相关技术栈/多端",children:[{name:"taro.md",path:"/React/相关技术栈/多端/taro.md",type:"file",mdconf:{abbrlink:"36xsjh9a"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1633,extension:".md",relative:"/React/相关技术栈/多端/taro.md",isEmpty:!1,content:"\x3c!--abbrlink:36xsjh9a--\x3e###@tarojs/components```jsimport{View,Text,Navigator,Image}from'@tarojs/components'```块级元素->View行内元素->Textimg->Image跳转不同页面->Navigator*在小程序端，React/Nerv指向mini/index.js，Vue无需使用此包。*在H5端，React/Nerv指向h5/react/index.js，Vue指向h5/vue/index.js。H5端使用stencil把组件编译为WebComponents以提供跨框架调用。原则:在满足B端移动视觉规范的基础上,优先将beast-mobile组件迁移成小程序组件,*跨平台开发*通过内置环境变量来解决*[View](https://taro-docs.jd.com/taro/docs/components/viewContainer/view)*[Text](https://taro-docs.jd.com/taro/docs/components/base/text)*[swiper](https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html),[swiperintaro](https://taro-docs.jd.com/taro/docs/components/viewContainer/swiper):考虑可用*[progress](https://developers.weixin.qq.com/miniprogram/dev/component/progress.html):考虑可用*[button](https://developers.weixin.qq.com/miniprogram/dev/component/button.html)*[checkbox](https://developers.weixin.qq.com/miniprogram/dev/component/checkbox.html)*[input](https://developers.weixin.qq.com/miniprogram/dev/component/input.html)*[switch](https://developers.weixin.qq.com/miniprogram/dev/component/switch.html)###link*[小程序跨框架开发的探索与实践](https://mp.weixin.qq.com/s?__biz=MzU3NDkzMTI3MA==&mid=2247483770&idx=1&sn=ba2cdea5256e1c4e7bb513aa4c837834)*[入门教程](https://taro-docs.jd.com/taro/docs/guide/)"},{name:"textArea.md",path:"/React/相关技术栈/多端/textArea.md",type:"file",mdconf:{abbrlink:"1g5en3hr"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5146,extension:".md",relative:"/React/相关技术栈/多端/textArea.md",isEmpty:!1,content:"\x3c!--abbrlink:1g5en3hr--\x3e###文档比如textArea组件距离需要看两份文档。1.[tarotextArea](http://taro-docs.jd.com/taro/docs/components/forms/textarea.html)2.[微信小程序文档textArea](https://developers.weixin.qq.com/miniprogram/dev/component/textarea.html)###关于textArea的坑点1.原生的组件永远的层级永远大于非原生组件的层级2.[textArea在iphone手机中存在内边距](https://segmentfault.com/a/1190000017086890)目前一种方案是对textArea组件进行了相应封装,展示的时候显示为自定义组件,输入的时候使用原生textArea.`basicTextArea.js````jsimportTaro,{Component}from'@tarojs/taro'import{Textarea,View}from'@tarojs/components'importcxfrom'classnames'import'./index.scss'interfaceBasicTextAreaProps{onChange:(...arg)=>voidonFocus:(...arg)=>voidonBlur:(...arg)=>voidplaceholder?:stringmaxlength?:numbervalue:stringfocus:boolean}constnoop=()=>{}exportdefaultclassBasicTextAreaextendsComponent<BasicTextAreaProps,any>{staticdefaultProps:BasicTextAreaProps={onChange:noop,onFocus:noop,onBlur:noop,placeholder:'',maxlength:-1,value:'',focus:false}handleInput=(...arg)=>this.props.onChange(...arg)handleFocus=(...arg)=>this.props.onFocus(...arg)handleBlur=(...arg)=>this.props.onBlur(...arg)render(){const{platform}=Taro.getSystemInfoSync()const{value,focus,placeholder,maxlength}=this.propsreturn(<ViewclassName={cx({textarea_ios:platform==='ios','textarea_android-placeholder':platform==='android'&&!value})}><TextareaclassName={cx('textarea_text')}value={value}onInput={this.handleInput}focus={focus}onBlur={this.handleBlur}placeholder={placeholder}maxlength={maxlength}/></View>)}}````textArea.ts`,切换相应组件的代码主要在这里进行处理。```jsimportTaro,{Component}from'@tarojs/taro'import{View,Text,ScrollView}from'@tarojs/components'importcxfrom'classnames'importBasicTextAreafrom'./basicTextArea'import'./index.scss'interfaceTextAreaProps{placeholder?:stringmaxlength?:numberonChange:(e:{detail:{value:string}})=>voidvalue:string}exportdefaultclassTextAreaextendsComponent<TextAreaProps,any>{staticdefaultProps:Pick<TextAreaProps,'placeholder'|'maxlength'>={placeholder:'',maxlength:-1,}state={isFocus:false,}handleChange(e){const{onChange}=this.propsonChange(e)}//处理原生textArea失焦/聚焦bindTextareaHandle(type:string){if(type=='blur'){this.setState({isFocus:false,})}elseif(type=='focus'){this.setState({isFocus:true,})}}render(){const{isFocus}=this.stateconst{placeholder,maxlength,value}=this.propsconst{platform}=Taro.getSystemInfoSync()return(<View>{this.state.isFocus?<ViewclassName='textarea_content'><BasicTextAreavalue={value}onChange={this.handleChange.bind(this)}focus={isFocus}onBlur={this.bindTextareaHandle.bind(this,'blur')}maxlength={maxlength}placeholder={placeholder}/></View>:<ViewonClick={this.bindTextareaHandle.bind(this,'focus')}><ScrollViewscrollY={true}className={'textarea_content'}><TextclassName={cx('textarea_text',{'textarea_text-placeholder':!value,'textarea_text-ios':platform==='ios',})}>{value?value:placeholder}</Text></ScrollView></View>}</View>)}}````index.scss````css.textarea_content{width:100%;height:192px;padding-top:24px;padding-bottom:24px;font-size:32px;line-height:48px;border-radius:16px;background-color:#FFF;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;}.textarea_text{word-break:break-all;width:100%;font-size:32px;line-height:48px;-webkit-appearance:none;height:144px;overflow:scroll;&-placeholder{color:#999;/*模拟光标占位*/padding-left:2px;}&-ios{/*尽可能模拟原生textArea的字间距*/letter-spacing:0.1px;}}/*微信原生textareaplaceholder颜色,误删*/.textarea-placeholder{color:#999;font-size:32px;}/*修复ios下有padding的问题*/.textarea_ios{margin-top:-12px;margin-left:-8px;}/*安卓手机上的placeholder会偏上,但是目前这解法会有一个影响用户的动画*/.textarea_android-placeholder{margin-top:8px;}```"},{name:"小程序.md",path:"/React/相关技术栈/多端/小程序.md",type:"file",mdconf:{abbrlink:"c3a5sn2w"},birthtime:"2022-01-16",mtime:"2022-01-16",size:280,extension:".md",relative:"/React/相关技术栈/多端/小程序.md",isEmpty:!1,content:"\x3c!--abbrlink:c3a5sn2w--\x3e###MiniProgram*微信开发者工具使用[NW.js](https://github.com/nwjs/nw.js)编写###跨段小程序*[wepy](https://github.com/Tencent/wepy)*[mpvue](https://github.com/Meituan-Dianping/mpvue)*[taro](https://github.com/NervJS/taro)"}],type:"directory",size:7059},{name:"定制自己的react-script.md",path:"/React/相关技术栈/定制自己的react-script.md",type:"file",mdconf:{abbrlink:"ymisqdg2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:961,extension:".md",relative:"/React/相关技术栈/定制自己的react-script.md",isEmpty:!1,content:"\x3c!--abbrlink:ymisqdg2--\x3e###基于create-react-app的改动基于`create-react-app`fork的脚手架有以下两点好处:*`facebook`团队帮忙更新迭代新技术*自定义模板/脚本抽离出来后从而在其它项目能进行复用>`fork`的项目需要定期和`create-react-app`保持同步,上次同步时间:`2019-02-16`###使用自定义模板/脚本创建项目只需要维护`packages/scripts`的文件就行。*更改`packages/scripts`目录下的`package.json`的各种配置信息,比如将`react-script`里的`name`更名为`react-siren-scripts`;*`react-scripts/scripts/init.js`添加`console.log()`;*`react-scripts/template`:修改模板文件;```npxcreate-react-appmy-app--scripts-versionreact-siren-scripts```目前其集成了`scss`###参考文章*[Customizingcreate-react-app:HowtoMakeYourOwnTemplate](https://auth0.com/blog/how-to-configure-create-react-app/)"},{name:"富文本编辑器.md",path:"/React/相关技术栈/富文本编辑器.md",type:"file",mdconf:{abbrlink:"vk4ikovw"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3882,extension:".md",relative:"/React/相关技术栈/富文本编辑器.md",isEmpty:!1,content:"\x3c!--abbrlink:vk4ikovw--\x3e###富文本编辑器的层级*L0*L1:兼容性层面的优化,自行实现undo/redo栈;*L2:移动端/国际化适配;>一个好的框架设计:尽量少的提前做的假设限制!####L01.给元素上加上`contenteditable`属性2.给选中元素执行`document.execCommand()`>另外一种方法是内嵌iframe,并将其designmode属性设置为true。(有跨域问题,日后填坑)###Slate框架###调试可以使用`editor.value.toJSON()`打印tree结构,便于调试;###slate设计模式*兜底原则*`normalizeNode`,除指定节点外都走该normalize机制;###有序列表的设计1.小圆点+数字作为一个结构;2.点击有序列表,当前节点的同级兄弟节点都会变为有序列表;3.点击可以取消有序列表;4.当在有序列表的节点建立兄弟节点或子节点时,自动设置为有序列表;5.子节点规则1——1.1——1.1.1——1.1.1.1;6.当把某个子节点从有序节点变为无序节点时,该节点的兄弟节点也变为无序;该节点的子节点从1开始计数;7.原则:兄弟节点必须都为有序或无序,子节点可以无序也可以有序;结论:1.因此对selection是不敏感的,即操作一个都会同时对同层级所有节点生效;###slate开发坑点*一种方式开发完之后,在某些情况下是不满足的,因此需要返工。*example:输入@、#进行筛选最初是使用set方式实现的,一开始这样设计是没问题的,但是考虑未来在多人协作过程中会造成一份数据的互相影响,因此将其重构调整为将筛选的数据绕开set的方式,取而代之的是外面传递进来。###smalltipsmalltipinslateeditorWheninputbafterainpage#slate#editor.```jsconsole.log(editor.value.texts.get(0))//'a';requestAnimationFrame(()=>{console.log(editor.value.texts.get(0))//'ab'})```###WebExcel*GoogleSheets*Office365*WPSWeb*钉钉表格*可扩展的表格*棋盘模型*Range模型*协同的表格*名词*cp(CheckPoint):全量表格数据*op(Operation):单次操作的表达*OT(OperationTransform)是协同算法的关键。*上限更高的COT调度算法要求OT同时运行在服务端与客户端*Rust+WASM实现OT,已验证最小闭环*高性能的表格*选择canvas渲染表格主界面,不用DOM的原因是浪费在DOMPipeline的开销很大*分层渲染管线*双缓冲画布,支持流畅的滚动*自研排版引擎###协同编辑*[etherpad-lite](https://github.com/ether/etherpad-lite)*基于OT开发的从底层支持协同编辑的框架。*代表:飞书、石墨*问题:十年前代码、技术栈陈旧*核心方法:*apply*compose*follow:解决两个changeset冲突问题*inverse:反操作,undo*Changeset*代表对文档的一次修改*eg:Z:4>1=1*0+1$2*Z:代表是一个Changeset*4>1:源文档4个字符长度,本次修改增加一个字符*=1:跳过第一个字符**0+1:插入一个字符,并且带上属性0*$2:插入的具体字符*[ChangesetIterator](https://github.com/marcelklehr/changesets),解析上述Changeset的库*渲染流程*内联属性*行属性:标题*块属性:图片*问题一:follow为什么要对A与B都要处理,可否只对一处进行处理?*问题二:etherpad-lite服务端与客户端协同的处理?(要有一个master)1.服务端设置为true2.客户端设置为false*问题三:*弱网情况下,如何优化协同问题?(比如输入拼音,被截断,无法删除)###link*[编辑器初体验](https://zhuanlan.zhihu.com/p/90931631)"}],type:"directory",size:18562},{name:"错误处理.md",path:"/React/错误处理.md",type:"file",mdconf:{abbrlink:"5ygpjsua"},birthtime:"2022-01-16",mtime:"2022-01-16",size:104,extension:".md",relative:"/React/错误处理.md",isEmpty:!1,content:"\x3c!--abbrlink:5ygpjsua--\x3e-[][错误处理值得阅读](https://aweary.dev/fault-tolerance-react/)"}],type:"directory",size:250620},{name:"BasicSkill",path:"/BasicSkill",children:[{name:"Shorcuts",path:"/BasicSkill/Shorcuts",children:[{name:"chrome.md",path:"/BasicSkill/Shorcuts/chrome.md",type:"file",mdconf:{abbrlink:"6e5ls1fr"},birthtime:"2022-01-16",mtime:"2022-01-16",size:457,extension:".md",relative:"/BasicSkill/Shorcuts/chrome.md",isEmpty:!1,content:"\x3c!--abbrlink:6e5ls1fr--\x3e###ChromeSkill###快捷键```无痕模式:cmd+shift+n```###debugger*`step`:多步执行;*`stepover`:单步执行,遇到子函数会将子函数当成是一个整体执行;*`stepinto`:单步执行,遇到子函数进入子函数;###TakeFullSizeScreenshots1.Press`Cmd+Shift+P`;2.Type`Capturefullsizescreenshot`;###切换chrome://flags/#enable-force-dark,enabled启动暗黑"},{name:"git.md",path:"/BasicSkill/Shorcuts/git.md",type:"file",mdconf:{abbrlink:"8pf6qkue"},birthtime:"2022-01-16",mtime:"2022-01-16",size:7740,extension:".md",relative:"/BasicSkill/Shorcuts/git.md",isEmpty:!1,content:'\x3c!--abbrlink:8pf6qkue--\x3e###操作远程文件```bashgitpushorigin:[branch]删除远程分支gitrm-r--cached[file]删除远程文件```###gitcommit提交规范```bashfeat:新功能fix:修复bugtest:增加/修改测试用例chore:修改工具相关docs:修改文档perf:提升性能reflactor:重构,不影响当前逻辑style:修改样式deps:升级依赖```###PR相关```bashgitremote-v列出远程仓库urlgitremoteadd[name][url]添加远程仓库urlgitfetch[name]拉取远程仓库最新代码gitmerge[name]/master合并远程分支最新代码到本地```###gitpull和gitfetch的区别`gitpull`等价于`gitfetch`和`gitcheckout-b`###gitmerge和gitrebase的区别*`gitmerge`会多产生一次merge的log记录;*`gitrebase`会将主干新增的日志记录前置到当前分支之前;>gitmerge--no-ff在每次合并都会产生一个新的合并记录;gitmerge的话只有解决冲突的时候才会产生一个新的合并记录。###gitreset和gitrevert的区别*gitrevert回退会产生一个新的commit,是向前的操作*gitreset回退不会产生一个新的commit,是向后的操作###gitreset撤销操作以下都为`commit`了的情况,下面对`--mixed`、`--hard`、`--soft`*gitreset--softHead~1:撤销到上个分支,撤销到commit之前,add之后,保留代码*gitreset--mixedHead~1:撤销到上个分支,撤销到add之前,保留代码*gitreset--hardHead~1:撤销到上个分支,不保留代码>可以看到从上往下回复程度是在加强的。###gitcherry-pick使用场景:在一个分支中拉取另外一个分支`某一个commit`或`一段区间的commit````bashgitcherry-pick<commitid>gitcherry-pick371c2…971209//(2,5]gitcherry-pick371c2^…971209//[2,5]```###gitlog美化git日志```bashgitconfig--globalalias.lg"log--color--graph--pretty=format:\'%Cred%h%Creset-%C(yellow)%d%Creset%s%Cgreen(%cr)%C(boldblue)<%an>%Creset\'--abbrev-commit"```查看文件修改内容```jsgitlg-p```###对线上代码(master分支)进行修复1.在`master`分支上使用`gitreset--hardxxxxxx`;2.使用`gitcheckout-b`创建`fix/xxx`分支,在该分支上进行bug修复;3.回到`master`分支,可以使用`gitreflog`查看之前reset过来的分支节点,再执行`gitreset--hardxxxxxx`回到那个节点。4.在master的最新节点上使用`gitmerge--no-fffix/xxx`###github使用技巧选择一句话,按r对该话进行引用回复。###关于pullrequest如果是比较复杂的Feature可以在开发过程提pr(标为WIP),这样子可以提早的指出问题代码。当有人提了`pr`,需要观察pr的代码是否存在问题。比如使用如下命令:```bashgitremoteaddlanyincaogit@github.com:snakeUni/snake-design.git```###gitrefloggitreflog可以查看所有分支的所有操作记录###一个痛点输入`gitbranch`分支情况如下:![](http://with.muyunyun.cn/c5586a56a252a983713f306ea2902255.jpg)输入`gitbranch--merged`后查看已合并的分支![](http://with.muyunyun.cn/38861f42cde27e6d1ae0ecc73a7f2357.jpg)如何一键快速删除这些已合并的分支并删除远端的分支呢参考此脚本,后续跟进。###操作tag添加tag:```bashgittagv0.1//本地推标签gitpushorginv0.1//远端推标签```删除tag:```bashgittag-dv0.1//删除本地标签gitpushorigin:refs/tags/v0.1//删除远端标签```###git项目大小写git默认初始化的项目是不区分文件名大小写的,可以执行下这行命令```jsgitconfigcore.ignorecasefalse```###查看两个分支的差异```jsgitdiffxxxxxx>my.patch```###误提交敏感信息到github怎么办thefirststep:```bashgitfilter-branch--force--index-filter\\"gitrm--cached--ignore-unmatchyarn.lock"\\--prune-empty--tag-name-filtercat----all```thesecondstep:```bashgitpushorigin--force--all```*[removing-sensitive-data-from-a-repository](https://help.github.com/en/github/authenticating-to-github/removing-sensitive-data-from-a-repository)askforContact[GitHubSupport](https://support.github.com/contact)or[GitHubPremiumSupport](https://premium.githubsupport.com/),askingthemtoremovecachedviewsandreferencestothesensitivedatainpullrequestsonGitHub.###清理gitcommit使用交互式rebase则有更多的功能，可以细致的操作每一条commit，这样我们就能合并，修改commit```gitrebase-i[start-commit][end-commit]#(start-commit,end-commit]前开后闭区间，默认end-commit为当前HEAD```forexample```gitrebase-iHEAD~4``````1pick05a703dfix:左右按键遇见label标签、加粗文字,光标位置与预期不符2sa716c1dfix:修复P0报错34#Rebased974fa9..a716c1dontod974fa9(2command(s))5#6#Commands:7#p,pick=usecommit8#r,reword=usecommit,buteditthecommitmessage9#e,edit=usecommit,butstopforamending10#s,squash=usecommit,butmeldintopreviouscommit11#f,fixup=like"squash",butdiscardthiscommit\'slogmessage12#x,exec=runcommand(therestoftheline)usingshell13#d,drop=removecommit14#15#Theselinescanbere-ordered;theyareexecutedfromtoptobottom.16#17#IfyouremovealinehereTHATCOMMITWILLBELOST.18#19#However,ifyouremoveeverything,therebasewillbeaborted.20#21#Notethatemptycommitsarecommentedout```删除不想保留的commit。###Howdoyoumakechangesonaspecificcommit```bash1.gitrebase-i<EarlierCommit>2.editthecommitinfoyouwantchangefrom`pick`to`edit`3.gitcommit--amend--author="MuYunyun<328375795@qq.com>"4.gitrebase--continue```###设置Gitusername*foreveryrepository```$gitconfig--globaluser.name"MonaLisa"$gitconfig--globaluser.name```*forasinglerepository```$gitconfiguser.name"MuYunyun"$gitconfiguser.name$gitconfiguser.email"328375795@qq.com"$gitconfiguser.email```###检测两个分支的冲突，但是不合并它们[Howtochecktheconflictoftwobranch,butnotneedtomergethem?](https://stackoverflow.com/questions/10879331/how-to-check-the-conflict-of-two-branch-but-not-need-to-merge-them)gitdocument:>--ff>Donotgenerateamergecommitifthemergeresolvedasafast-forward,onlyupdatethebranchpointer.Thisisthedefaultbehavior.>-no-ff>Generateamergecommitevenifthemergeresolvedasafast-forward.>--commit>Performthemergeandcommittheresult.Thisoptioncanbeusedtooverride--no-commit.>--no-commit>With--no-commitperformthemergebutpretendthemergefailedanddonotautocommit,togivetheuserachancetoinspectandfurthertweakthemergeresultbeforecommitting.###git设置sock5代理背景：gitpush、gitpull、lernapublish卡顿，报类似如下问题。>lernaERR!fatal:unabletoaccess\'https://github.com/MuYunyun/create-react-doc.git/\':LibreSSLSSL_connect:SSL_ERROR_SYSCALLinconnectiontogithub.com:443用git内置代理，直接走系统中运行的代理工具中转，比如SS本地端口是1080，那么可以如下方式走代理：```bashgitconfig--globalhttp.proxysocks5://127.0.0.1:1080gitconfig--globalhttps.proxysocks5://127.0.0.1:1080```停走代理：```bashgitconfig--globalhttp.proxy""gitconfig--globalhttps.proxy""```'},{name:"host_modify.md",path:"/BasicSkill/Shorcuts/host_modify.md",type:"file",mdconf:{abbrlink:"gzbn6qx6"},birthtime:"2022-01-16",mtime:"2022-01-16",size:176,extension:".md",relative:"/BasicSkill/Shorcuts/host_modify.md",isEmpty:!1,content:"\x3c!--abbrlink:gzbn6qx6--\x3e###修改host文件```sudovi/etc/hosts```>github访问慢一般可以修改该目录。[方法](https://zhuanlan.zhihu.com/p/94521827)"},{name:"iTerm2.md",path:"/BasicSkill/Shorcuts/iTerm2.md",type:"file",mdconf:{abbrlink:"iw386qpg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:159,extension:".md",relative:"/BasicSkill/Shorcuts/iTerm2.md",isEmpty:!1,content:"\x3c!--abbrlink:iw386qpg--\x3e###iTerm2快捷键```ctrl+a:到行首ctrl+e:到行尾ctrl+u:删除当前行ctrl+w:删除光标当前单词```"},{name:"vscode.md",path:"/BasicSkill/Shorcuts/vscode.md",type:"file",mdconf:{abbrlink:"ues1uzcj"},birthtime:"2022-01-16",mtime:"2022-01-16",size:999,extension:".md",relative:"/BasicSkill/Shorcuts/vscode.md",isEmpty:!1,content:"\x3c!--abbrlink:ues1uzcj--\x3e###vscode快捷键*全局替换:Command+Shift+H*当前页面全局替换:Command+option+F*格式化:shift+option+F*实时预览md文件:command+shift+V*格式化表格:alt+shift+F*向下复制当前行:shift+alt+↓###左侧栏*command+shift+E打开资源*command+shift+F打开搜索*ctrl+shift+G打开git*command+shift+D打开调试*command+shift+X打开扩展*command+shift+r打开bookmarks*command+shift+0:toggleactivitybar:[setting](https://stackoverflow.com/questions/30878856/is-there-a-shortcut-to-hide-the-side-bar-in-visual-studio-code)###推荐字体*[vscode](https://github.com/sdras/night-owl-vscode-theme)###插件开发*本地开发调试*打包：`vscepackage`*扩展视图命令下拉菜单中使用`InstallfromVSIX`命令安装###其它filestoexclude:用多个,作为分隔符隔开,每个,间可以用正则。"},{name:"图床迁移.md",path:"/BasicSkill/Shorcuts/图床迁移.md",type:"file",mdconf:{abbrlink:"pm57mnq3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:583,extension:".md",relative:"/BasicSkill/Shorcuts/图床迁移.md",isEmpty:!1,content:"\x3c!--abbrlink:pm57mnq3--\x3e###使用qshell转移bucket文件到另一bucket```1.下载qshell2.解压,将qshell-darwin-x64放到/usr/local/bin或~/bin下3.更名qshell-darwin-x64为qshell4.添加账号:qshellaccountaksk5.导出Abucket文件信息:qshelllistbucketAA.list.txt6.格式化文件信息:awk'{print$1}'A.list.txt>list.txt7.转移到Bbucket:qshellbatchcopyABlist.txt```>[相关文章](https://github.com/FaiChou/faichou.github.io/blob/master/_posts/2018-10-09-%E4%B8%83%E7%89%9B%E5%85%8D%E8%B4%B9%E4%B9%8B%E5%9D%91.md)"},{name:"易读错音的程序词汇.md",path:"/BasicSkill/Shorcuts/易读错音的程序词汇.md",type:"file",mdconf:{abbrlink:"oh2njhvb"},birthtime:"2022-01-16",mtime:"2022-01-16",size:115,extension:".md",relative:"/BasicSkill/Shorcuts/易读错音的程序词汇.md",isEmpty:!1,content:"\x3c!--abbrlink:oh2njhvb--\x3e###易读错音的前端英文词汇*cache:[美:kæʃ]*babel:[美:'beibəl]"}],type:"directory",size:10229},{name:"animation",path:"/BasicSkill/animation",children:[{name:"lottie",path:"/BasicSkill/animation/lottie",children:[{name:"lottie.md",path:"/BasicSkill/animation/lottie/lottie.md",type:"file",mdconf:{abbrlink:"hieljug1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5509,extension:".md",relative:"/BasicSkill/animation/lottie/lottie.md",isEmpty:!1,content:"\x3c!--abbrlink:hieljug1--\x3e###Lottie*针对营销动画场景,业界用的较多的是使用Lottie来开发。*优点*AE香*还原度高*缺点*不支持动态数据*沟通、适配成本*低端机性能问题*官方文档匮乏*使用css来完成营销动效的效果(比如光影、滤镜效果)不会很好。*支付宝营销动效方案:*在线制作->发布优化->播放JSON*类lottie方案,提供网页ae,https://render.alipay.com/p/s/mars-editor/,转化为WebGl*[网易云音乐年度报告从设计到代码](https://zhuanlan.zhihu.com/p/57576659)。###场景*直播:手势拜年特效*素材属性编辑*内容平台操作###实时动画*还原度*还原曲线描点等数据*不同平台的渲染差异*性能*MarsPlayer:https://render.alipay.com/p/s/mars-editor/*图层、粒子、拖尾、模型、交互*WebGl*Oasis3d(蚂蚁):https://oasis-engine.github.io/动画引擎、Hilo3d(淘宝开源)*小程序、H5、Web3D游戏*稳定性###Lottie库使用lottie-webgzip压缩后大小有40kb的大小。如果使用npm包的形式进行加载,那么vendor.js会增加40kb的大小,这样会使页面性能下降。*方案一:采用script标签的形式来加载lottie文件,并且使用defer或async属性来进行异步加载。一般情况下,我们只需要svg格式的动画,所以可以使用lottie_light版本（仅支持svg渲染）。*方案二:因为lottie目前只在商家年度之夜中使用,因此在特定路由中进行按需引入加载。####JSON文件通过bodymovin插件导出的动画JSON文件大小也可能比较大(复杂的动画达到上百kb),所以不建议将JSON数据内联到页面中,而最好是当做一个JSON文件来进行下载。####lottie-web的基本用法```jsconstanimation=bodymovin.loadAnimation({container:element,//要包含该动画的dom元素renderer:'svg',//渲染方式,svg、canvas、html（轻量版仅svg渲染）loop:true,//是否循环播放autoplay:true,//是否自动播放animationData,//动画JSON文件(优先级比path高)path:animateJsonPath,//动画JSON文件路径});```####lottie-web常用方法lottie-web提供了很多的控制动画播放的方法,下面是一些常用的方法。animation等于上面代码中的animation。```jsanimation.play();//播放该动画,从目前停止的帧开始播放animation.stop();//停止播放该动画,回到第0帧animation.pause();//暂停该动画,在当前帧停止并保持animation.goToAndStop(value,isFrame);//跳到某个时刻/帧并停止。isFrame(默认false)指示value表示帧还是时间(毫秒)animation.goToAndPlay(value,isFrame);//跳到某个时刻/帧并进行播放animation.goToAndStop(30,true);//跳转到第30帧并停止animation.goToAndPlay(300);//跳转到第300毫秒并播放animation.playSegments(arr,forceFlag);//arr可以包含两个数字或者两个数字组成的数组,forceFlag表示是否立即强制播放该片段animation.playSegments([10,20],false);//播放完之前的片段,播放10-20帧animation.playSegments([[0,5],[10,18]],true);//直接播放0-5帧和10-18帧animation.setSpeed(speed);//设置播放速度,speed为1表示正常速度animation.setDirection(direction);//设置播放方向,1表示正向播放,-1表示反向播放animation.destroy();//删除该动画,移除相应的元素标签等。在unmount的时候,需要调用该方法```####lottie-web常用的事件lottie-web中可能也需要监听一些事件,比如加载完动画JSON文件时的data_ready事件。监听方法如下:```jsanimation.addEventListener('data_ready',()=>{console.log('animationdatahasloaded');});```除了`data_ready`事件,下面还有一些其他常用的事件可以监听:*complete:播放完成（循环播放下不会触发）*loopComplete:当前循环下播放（循环播放/非循环播放）结束时触发*enterFrame:每进入一帧就会触发,播放时每一帧都会触发一次,stop方法也会触发*segmentStart:播放指定片段时触发*playSegments、resetSegments等方法刚开始播放指定片段时会发出,如果playSegments播放多个片段,多个片段最开始都会触发。*data_ready:动画JSON文件加载完毕触发*DOMLoaded:动画相关的dom已经被添加到html后触发*destroy:将在动画删除时触发####lottie-web部分高阶用法1.在制作AE动画时,将图层命名为#svgId格式,前端加载该动画后,相应的图层的id会被设置为svgId,可以通过dom方法获取该元素并做相应的操作;2.在制作AE动画时,将图层命名为.svgClass格式,前端加载该动画后,相应的图层的class会被设置为svgClass,可以通过dom方法获取这些元素并做相应的操作;###相关链接*[lottie动效社区资源](https://lottiefiles.com/featured)*[现在你可以把Lottie动画导回AE了](https://zhuanlan.zhihu.com/p/104751997)*经验证,简单的动效可以,复杂的不行。-[][剖析lottie-web动画实现原理](https://juejin.cn/post/6914835547588395022)-[][使用Lottie快速开发动画](https://jelly.jd.com/article/5fcf44b5a1c4e30142d0a472)"},{name:"practice",path:"/BasicSkill/animation/lottie/practice",children:[{name:"makeLottie.md",path:"/BasicSkill/animation/lottie/practice/makeLottie.md",type:"file",mdconf:{abbrlink:"v6ny9zc6"},birthtime:"2022-01-16",mtime:"2022-01-16",size:916,extension:".md",relative:"/BasicSkill/animation/lottie/practice/makeLottie.md",isEmpty:!1,content:"\x3c!--abbrlink:v6ny9zc6--\x3e###安装的坑*在macOSBigSur中需要使用2020版本。*安装bodyMovin###MakeALottie*打开AE,新建composition*![](http://with.muyunyun.cn/45a2f4f3dcfec5830d0aaab22e936f38.jpg-400)*![](http://with.muyunyun.cn/5fc938f542b38c956bea71f12cb9cb3a.jpg-400)*每个区域的作用分别是:*Project:管理当前项目以及一些项目参数的预览*Resource:导入到AE中的所有外部资源如图像等在这里进行统一管理*Layer:在这里为每一个图层添加/编辑关键帧和属性*Timeline:在这里可以编辑动画的关键帧和曲线*Preview:动画和编辑实时预览/编辑窗口*Toolbar:各种工具的集合,如文字工具、图形工具等*Props:在这里编辑元素的属性>小作业:[面向前端的LottieAE动画手把手入门教学](https://zhuanlan.zhihu.com/p/35540035)"}],type:"directory",size:916}],type:"directory",size:6425}],type:"directory",size:6425},{name:"basis",path:"/BasicSkill/basis",children:[{name:"DOM.md",path:"/BasicSkill/basis/DOM.md",type:"file",mdconf:{abbrlink:"nw16jj7h"},birthtime:"2022-01-16",mtime:"2022-01-16",size:993,extension:".md",relative:"/BasicSkill/basis/DOM.md",isEmpty:!1,content:'\x3c!--abbrlink:nw16jj7h--\x3e###样式相关1.elt.style*优点:能使用api或者直接改写style内的样式*缺点:只能针对内嵌样式2.window.getComputedStyle(elt[,pseudoElt])*优点:支持内联样式\\外联样式*缺点:只能进行只读操作,不支持IE3.elt.getBoundingClientRect()>在设置了width的前提下,在标准盒模型下(box-sizing:content-box)margin不算入其中,padding算入其中;*能获得位置相关信息###操作已存在的dom元素这个点藏得比较深,如果`appendChild/insertBefore`操作已经存在的dom,则原来的dom会移除。(只有一份实例)。```html<form><selectid="select1"><option>1</option></select><selectid="select2"><option>2</option></select></form><script>varselect2=document.getElementById(\'select2\')select2.appendChild(select1.options[0])<\/script>```如上demo中,`select1`的option就会被转移到`select2`下'},{name:"HTML5.md",path:"/BasicSkill/basis/HTML5.md",type:"file",mdconf:{abbrlink:"oizmpcx4"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5676,extension:".md",relative:"/BasicSkill/basis/HTML5.md",isEmpty:!1,content:"\x3c!--abbrlink:oizmpcx4--\x3e###HTML5DOM1.getElementsByClassName2.遍历相关,如下左侧属性>只涉及元素节点的操作(不涉及其它节点),建议使用左侧的属性替代右侧的属性:|属性名|被替代的属性||:-:|:-:||children|childNodes||childElementCount|childNodes.length||previousElementSibling|previousSibling||nextElementSibling|nextSibling||firstElementChild|firstChild||lastElementChild|lastChild|3.ele.scrollIntoView()调用ele.scrollIntoView(),ele元素顶端会移动到可视区域的顶端;若传入参数alignToTop:false,则ele移到屏幕底部;###HTML5事件1.contextmenu<details><summary>contextmenu使用demo</summary>```html<ulid=\"myMenu\"style=\"position:absolute;visibility:hidden;background-color:silver\"><li>111</li><li>222</li><li>333</li></ul><script>varmenu=document.getElementById('myMenu')document.addEventListener('contextmenu',(event)=>{event.preventDefault()menu.style.left=event.clientX+'px'menu.style.top=event.clientY+'px'menu.style.visibility='visible'},false)document.addEventListener('click',(event)=>{menu.style.visibility='hidden'},false)<\/script>```</details>2.DOMContentLoaded优于window.onload执行3.readystatechange可用来判断动态载入的script、link标签是否加载完成。demo如下:```jsconstscript=document.createElement('script')script.addEventListener('readystatechange',functioneventListener(event){if(event.readyState==='loaded'||event.readyState==='complete'){//hack的手段,浏览器自身的问题script.removeEventListener('readystatechange',eventListener)}})script.src='example.js'document.body.appendChild(script)```4.hashchange###HTML5表单*input/textarea里新增`autoFocus()`字段*表单校验api使用`checkValidate()`校验`required`、`pattern=\"\\d+\"`属性###HTML5脚本*跨文档消息传输(XDM),核心是`postMessage`*拖放api<details><summary>拖放api使用示例</summary>```html<head><style>#draggable{width:200px;height:20px;text-align:center;background:white;}.dropzone{width:200px;height:20px;background:blueviolet;margin-bottom:10px;padding:10px;}</style></head><body><divclass=\"dropzone\"><divid=\"draggable\"draggable=\"true\"ondragstart=\"event.dataTransfer.setData('text/plain',null)\">Thisdivisdraggable</div></div><divclass=\"dropzone\"></div><divclass=\"dropzone\"></div><divclass=\"dropzone\"></div><script>window.onload=function(){vardraggeddocument.addEventListener(\"dragstart\",function(event){dragged=event.target},false)document.addEventListener(\"dragover\",function(event){//preventdefaulttoallowdropevent.preventDefault()},false)document.addEventListener(\"drop\",function(event){//preventdefaultaction(openaslinkforsomeelements)event.preventDefault()if(event.target.className==\"dropzone\"){dragged.parentNode.removeChild(dragged)event.target.appendChild(dragged)}},false)}<\/script></body>```</details>*媒体元素`<video>`、`<audio>`*浏览器状态管理(history)###HTML5存储*`sessionStorage`:大小上限为2.5Mb(不同浏览器会有差异),页面关闭时便清空;*`localStorage`:大小上限为2.5Mb(不同浏览器会有差异),页面关闭时不会清空;它们的api也是一致的,有如下几个:*setItem(key,value)*getItem(key)*removeItem(key)*clear()>在HTML5范围之外与存储相关的技术还有cookie(存放在客户端,可以由客户端也可以由服务端生成,大小上限为4kb)、IndexedDB(大小上限为5Mb)、cacheStorage(ServiceWorker)。###HTML5JavaScriptApi*`requestAnimationFrame(callback)`:表示在下次重绘前执行指定的回调函数，下面通过一个简单的demo来认识它。```jsletframeletn=5functioncallback(timeStamp){console.log(timeStamp)//开始执行回调的时间戳//如果想要产生循环动画的效果,需在回调函数中再次调用requestAnimationFrame()while(n>0){requestAnimationFrame(callback)console.log('测试执行顺序')n--}}frame=requestAnimationFrame(callback)//在下次重绘之前调用回调//如果想要销毁该回调,可以执行cancelAnimationFrame(frame)```执行上述代码,控制台(chrome)打印如下数据:```先输出5次'测试执行顺序'1795953.6491795970.3181795986.9871796003.6561796020.325...```可以看到在浏览器上一帧的时间大致为`16ms`。同时可以看到`requestAnimation(callback)`中的callback也是异步的(只不过它是基于帧与帧间的异步),所以上述打印结果是先打印出5次'测试执行顺序'后再依次打印出5个时间戳。requestAnimation不仅可以用在动画上,更是被React团队用来hackrequestIdleCallback的实现。可以阅读[你不知道的requestIdleCallback](https://github.com/MuYunyun/blog/blob/master/React/requestIdleCallback.md)*`WebWorker`JavaScript是一门单线程的语言,借助WebWorker能在浏览器上模拟线程的概念。*`ServiceWorker`:基于WebWorker的api来处理网络请求以及缓存,可以将其理解为是`WebWorker+cachestorage`的组合。同时其也是PWA依赖的最为重要的技术。###浏览器支持HTML5情况可以在html5test.com查询浏览器支持HTML5情况。"},{name:"JavaScript在引擎方面的执行过程.md",path:"/BasicSkill/basis/JavaScript在引擎方面的执行过程.md",type:"file",mdconf:{abbrlink:"l1m72o6p"},birthtime:"2022-01-16",mtime:"2022-01-16",size:681,extension:".md",relative:"/BasicSkill/basis/JavaScript在引擎方面的执行过程.md",isEmpty:!1,content:"\x3c!--abbrlink:l1m72o6p--\x3e###引子```js(0,function(arg){...})(this)```>[commaoperator](Thecommaoperatorevaluateseachofitsoperands(fromlefttoright)andreturnsthevalueofthelastoperand.)```js(0,fn)()===fn()``````jsvarglobal='outer';(()=>{varglobal='inner';eval('console.log(\"calldirectly:\"+global)');(0,eval)('console.log(\"calldirectly:\"+global)');})()//calldirectly:inner//calldirectly:outer```###link*[1](https://stackoverflow.com/questions/40967162/what-is-the-meaning-of-this-code-0-function-in-javascript)*[2](https://stackoverflow.com/questions/9107240/1-evalthis-vs-evalthis-in-javascript)"},{name:"askself",path:"/BasicSkill/basis/askself",children:[{name:"answer.md",path:"/BasicSkill/basis/askself/answer.md",type:"file",mdconf:{abbrlink:"cbynd661"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4798,extension:".md",relative:"/BasicSkill/basis/askself/answer.md",isEmpty:!1,content:"\x3c!--abbrlink:cbynd661--\x3e这是一套基本的由浅入深考察前端知识体系的清单,自测用:###CSS*什么是CSS盒模型```包含content,margin,border,padding```*标准模型和IE模型有什么不同```是否将padding和border算进content的width中,即在IE模型下,padding和border会挤压content的空间```*CSS如何设置这两种模型```cssbox-sizing:content-box;//标准模型(默认)box-sizing:border-box;//IE模型```*JS如何设置获取盒模型对应的宽和高```jsdom.style.width//只支持内联样式dom.currentStyle.width//只有IE支持window.getComputedStyledom.getBoundingClientRect```*如何实现垂直居中见[垂直居中](https://github.com/MuYunyun/blog/blob/master/BasicSkill/css/%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD.html)*Flex布局居中```cssjustify-content:center；//水平居中align-item:center;//垂直居中```*BFC的基本概念*BFC的原理*如何创建BFC前三个问题的解答看:[聊聊BFC](https://github.com/MuYunyun/blog/blob/master/BasicSkill/css/聊聊BFC.md),对如何创建BFC这个问题答主水平有限,只实验了overflow:hidden这个属性,个人建议回答好BFC原理即可。###DOM事件类*DOM事件的级别了解吗```DOM0:dom.onClickDOM2:dom.addEventListener('click',()=>{},false)DOM3:在1的基础上加了鼠标键盘事件```>dom.addEventListener()的第二个参数能跟`{handleEvent:()=>{}}`*DOM事件模型了解吗```存在冒泡阶段和捕获阶段```*DOM事件流了解吗```事件通过捕获到目标阶段,目标阶段再进行冒泡```*描述DOM事件捕获的具体流程```事件捕获=>window=>document=>html=>body=>目标元素```*讲一下事件委托(事件代理)```将绑定在子元素的事件绑定到父元素上,然后可以通过e.target取到目标节点```*自定义事件了解吗```jsvarevent=newEvent('custom')dom.addEventListener('custom',()=>{})dom.dispatchEvent(event)```###类型转换*了解显式转换、隐式转换吗？```显示转换:隐式转换:四则运算、if语句、native调用(console.log())```*了解显式转换的过程吗###HTTP相关>见https://github.com/MuYunyun/blog/blob/master/BasicSkill/http/http.md###原型链类*创建对象有几种方法*聊聊原型、构造函数、实例、原型链*instanceof的原理了解吗*new运算符的原理了解吗```jsconstnew2=function(func){consto=Object.create(func.prototype)constresult=func.call(o)if(typeof(result)==='object'){returnresult}else{returno}}```###面向对象类*如何进行类的声明*如何生成实例*如何实现继承*各继承方式的优缺点###通信类*什么是同源策略及限制*如何创建Ajax```jsconstxhr=newHttpRequest()xhr.open('Get','/abc',false)xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status===200||xhr.status===304){console.log(xhr.responseText)}}}xhr.send(null)```甚至可以结合Promise与HttpRequest来封装fetch。```jsfunctionfetch(url){returnnewPromise((resolve,reject)=>{varxhr=newXMLHttpRequest()xhr.open('GET',url,true)xhr.onreadystatechange=function(){if(this.readyState===4&&this.status===200){resolve(this.responseText)}else{reject(newError(this.status))}}xhr.send(null)})}fetch('/post.json').then((fulfilled)=>{console.log(fulfilled)}).catch((rejected)=>{console.log(rejected)})```*跨域通信的几种方式###安全类*了解CSRF吗？如何防止CSRF*了解XSS吗？如何防止XSS*session与token有什么区别*session(会话)存放在服务端,每次打开网站就产生一个session,注销网站,session就会销毁*token(令牌)通常是由`密码`、`时间戳`混合盐算法一起生成>既然聊到了cookie的大小,另外两个相关的###渲染机制类*什么是DOCTYPE及作用*浏览器解析和渲染过程*重排Reflow```1.增减dom元素2.元素的位置发生移动3.元素尺寸(外间距、内间距、长宽)发生改变4.浏览器的窗口大小改变```*重绘Repaint```1.重排必然会导致重绘2.重绘不一定重排,比如元素的颜色发生变化,只会发生重绘```###运行机制类*如何理解JS的单线程没办法同时做两件事情*什么是EventLoop###页面性能类*提升页面性能的方法有哪些"},{name:"menuknowledge.md",path:"/BasicSkill/basis/askself/menuknowledge.md",type:"file",mdconf:{abbrlink:"290a4219"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2328,extension:".md",relative:"/BasicSkill/basis/askself/menuknowledge.md",isEmpty:!1,content:"\x3c!--abbrlink:290a4219--\x3e这是一套基本的由浅入深考察前端知识体系的清单,自测用:###CSS*什么是CSS盒模型*标准模型和IE模型有什么不同*CSS如何设置这两种模型*JS如何设置获取盒模型对应的宽和高*如何实现垂直居中*Flex布局居中*BFC的基本概念*BFC的原理*如何触发(消除)BFC###DOM事件类*DOM事件的级别了解吗*DOM事件模型了解吗*DOM事件流了解吗*描述DOM事件捕获的具体流程*讲一下事件委托(事件袋里)*自定义事件了解吗###类型转换*了解显式转换、隐式转换吗？*了解显式转换的过程吗###HTTP相关*HTTP协议主要特点*HTTP报文组成部分```请求报文:请求行请求头空行请求体响应报文:响应行响应头空行响应体```*HTTP协议类:POST和GET的区别*HTTP状态码*强缓存和协商缓存[资料](https://www.cnblogs.com/lyzg/p/5125934.html)*持久连接*管线化###原型链类*创建对象有几种方法*聊聊原型、构造函数、实例、原型链*instanceof的原理了解吗*new运算符的原理了解吗```jsconstnew2=function(func){consto=Object.create(func.prototype)constresult=func.call(o)if(typeof(result)==='object'){returnresult}else{returno}}```###面向对象类*如何进行类的声明*如何生成实例*如何实现继承*各继承方式的优缺点###通信类*什么是同源策略及限制*如何创建Ajax```jsconstxhr=newXMLHttpRequest()xhr.open('GET','/api',false)xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status===200||xhr.status===304){console.log(xhr.responseText)}}}xhr.send(null)```*跨域通信的几种方式###安全类*了解CSRF吗？如何防止CSRF*了解XSS吗？如何防止XSS*cookie与token有什么区别###渲染机制类*什么是DOCTYPE及作用*浏览器解析和渲染过程*重排Reflow*重绘Repaint###运行机制类*如何理解JS的单线程没办法同时做两件事情*什么是EventLoop###页面性能类*提升页面性能的方法有哪些"}],type:"directory",size:7776},{name:"bind函数实现.md",path:"/BasicSkill/basis/bind函数实现.md",type:"file",mdconf:{abbrlink:"9mpxxj5w"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1747,extension:".md",relative:"/BasicSkill/basis/bind函数实现.md",isEmpty:!1,content:"\x3c!--abbrlink:9mpxxj5w--\x3e##bind函数实现###第一版:借助call/apply```jsFunction.prototype.bind1=function(context){constself=thisreturnfunction(){returnself.call(context)}}//测试:constobj={value:'muyy',}functiontestBind(){console.log(this.value)}constresultBind=testBind.bind1(obj)resultBind()//muyy```###第二版:借助arguments```jsFunction.prototype.bind2=function(context){constarr=Array.prototype.slice.call(arguments,1)constself=thisreturnfunction(){constrestArr=Array.prototype.slice.call(arguments)returnself.apply(context,arr.concat(restArr))}}```>这种方式的实现其实是函数柯里化的变版比如在监听事件时可以这样子用:```jsdom.addEventListener('click',fn.bind(this))```进行如下测试:```jsconstobj2={value:'muyy',}functiontestBind2(age,gender){console.log(this.value)//muyyconsole.log(age)//23console.log(gender)//male}constresultBind2=testBind2.bind2(obj2,23)resultBind2('male')```###第三版:区分环境,是普通调用还是new调用```jsFunction.prototype.bind3=function(context){constarr=Array.prototype.slice.call(arguments,1)constself=thisreturnfunction(){constrestArr=Array.prototype.slice.call(arguments)returnself.apply(this!==windows?this:context,arr.concat(restArr))}}//测试:使用new以后this会指向newObjconstobj3={value:'muyy',}functiontestBind3(age,gender){console.log(this.value)console.log(age)console.log(gender)}constresultBind3=testBind3.bind3(obj3,23,'male')constnewObj=newresultBind3()```"},{name:"call函数实现.md",path:"/BasicSkill/basis/call函数实现.md",type:"file",mdconf:{abbrlink:"q1q3ra8u"},birthtime:"2022-01-16",mtime:"2022-01-16",size:795,extension:".md",relative:"/BasicSkill/basis/call函数实现.md",isEmpty:!1,content:"\x3c!--abbrlink:q1q3ra8u--\x3e###call函数实现*将函数引用到对象里*调用函数*删除对象里的函数```jsFunction.prototype.call1=function(context){context.fn=this//this指向实例context.fn()deletecontext.fn}//测试:constobj={value:'muyy',}functiontestCall(){console.log(this.value)}constresultCall=testCall.call1(obj)//muyy```###传入参数的实现```jsFunction.prototype.call2=function(context){constarr=Array.prototype.slice.call(arguments,1)context.fn=this//this指向实例context.fn(...arr)deletecontext.fn}//测试:constobj2={value:'muyy',}functiontestCall2(age){console.log(this.value,age)//muyy23}constresultCall=testCall2.call2(obj2,23)```"},{name:"error_handle.md",path:"/BasicSkill/basis/error_handle.md",type:"file",mdconf:{abbrlink:"4te5mocr"},birthtime:"2022-01-16",mtime:"2022-01-16",size:867,extension:".md",relative:"/BasicSkill/basis/error_handle.md",isEmpty:!1,content:"\x3c!--abbrlink:4te5mocr--\x3e##错误处理###捕获和抛出异常的时机*使用第三方库通常需要进行捕获;*写给他人使用的第三方库则通常需要抛出相应异常;###自定义错误类型下面提供`ES5`和`ES6`两种自定义错误类型的写法```js//ES6classCustomErrorextendsError{constructor(message){super(message)this.name='CustomError'}}//ES5functionCustomError(message){this.name='CustomError'this.message=messageError.captureStackTrace(this,CustomError)}CustomError.prototype=newError()CustomError.prototype.constructor=CustomError```###记录错误日志记录错误日志通常使用`<img>`标签,其可以避免跨域,用法如下:```jsfunctionlogError(msg){constimg=newImage()img.src=`/log?${encodeURIComponent(msg)}`}```"},{name:"event.md",path:"/BasicSkill/basis/event.md",type:"file",mdconf:{abbrlink:"8lf1n2j9"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1918,extension:".md",relative:"/BasicSkill/basis/event.md",isEmpty:!1,content:"\x3c!--abbrlink:8lf1n2j9--\x3e###事件类型*load:window/img/script>img标签上设置src属性,就开始请求资源;script设置完src要加载到dom上才开始请求资源。###事件委托在`document`上使用事件委托,好处如下:*添加时机不受限(在dom任何生命周期的里都可添加)*添加事件更快*内存消耗也更小*减少事件的垃圾回收(如果绑定在低层级的标签上,标签内容消失时,还需要手动执行清空事件内存)>[事件机制优化](https://github.com/MuYunyun/cpreact/issues/13)####区分target和currentTarget*`currentTarget`可以用于确定是`具体元素`上触发的事件;*`target`用于事件委托;具体差异可以看以下`demo`,当点击`你好`时,控制台输出两个`true`;当点击`muyunyun`时,控制台输出一个`true`和一个`false`。```html<body><pid=\"test\">你好,<span>muyunyun</span></p><script>constcontent=document.getElementById('test')content.addEventListener('click',function(e){console.log('currentTarget',e.currentTarget,'target',e.target)console.log(this===e.currentTarget)//trueconsole.log(this===e.target)//false})<\/script></body>```###自定义事件(笔者认为)自定义事件可以归类到发布订阅模式下。```html<inputid=\"sec\"/><script>//订阅document.getElementById('sec').addEventListener('custom',function(obj){console.log(obj.detail)//{demo:thisiaademo}})//发布varev=newCustomEvent('custom',{detail:{demo:'thisisademo'}})document.getElementById('sec').dispatchEvent(ev)<\/script>```###stopPropagationvsstopImmediatePropagation*stopPropagation:stoppropagation`fromchildelementtoparentelement`;*stopImmediatePropagation:stoppropagation`theremainingsameeventtypeinoneelement`;"},{name:"script标签.md",path:"/BasicSkill/basis/script标签.md",type:"file",mdconf:{abbrlink:"b5b2aidi"},birthtime:"2022-01-16",mtime:"2022-01-16",size:905,extension:".md",relative:"/BasicSkill/basis/script标签.md",isEmpty:!1,content:"\x3c!--abbrlink:b5b2aidi--\x3e###script```js<html><body>...<scriptsrc='a.js'><\/script><scriptsrc='b.js'><\/script></body></html>```这段代码的含义是:在文档资源执行完毕后,然后`a.js`、`b.js`并发下载(浏览器机制),顺序执行。下面这种写法与上面这种写法效果相同:```js<html><head><scriptsrc='a.js'defer><\/script><scriptsrc='b.js'defer><\/script></head><body>...</body></html>```注意到关键词`defer`,它的特点如下:*并发下载,`顺序执行`;*渲染完再执行;再来看如下写法:```js<html><head><scriptsrc='a.js'async><\/script><scriptsrc='b.js'async><\/script></head><body>...</body></html>```此时的关键词是`async`,它的特点如下:*并发下载,`异步执行`(谁先下载好先执行谁);*下载完就执行;"},{name:"xss_csrf.md",path:"/BasicSkill/basis/xss_csrf.md",type:"file",mdconf:{abbrlink:"fieex7n3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:298,extension:".md",relative:"/BasicSkill/basis/xss_csrf.md",isEmpty:!1,content:"\x3c!--abbrlink:fieex7n3--\x3e###xss(crosssitescript)*内容型xss:后端返回前端的模板内容里掺杂脚本*反射型xss:url里带有脚本*domxss:脚本通过domapi插入页面防止措施:正则过滤###csrf(crosssiterequestforgery)防止措施:校验token"},{name:"二刷高程.md",path:"/BasicSkill/basis/二刷高程.md",type:"file",mdconf:{abbrlink:"cudw5n7t"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6236,extension:".md",relative:"/BasicSkill/basis/二刷高程.md",isEmpty:!1,content:"\x3c!--abbrlink:cudw5n7t--\x3e###红皮书里的细节>理念:尽信书则不如无书###重载`Java/C++`中是有函数重载的(即相同函数名,但传的参数不同是当成不同函数的),而`JavaScript`没有函数重载,旧其本质是因为`JavaScrit`中函数是一个对象。函数名类似一个指针。###label语句的用法区分以下两段函数:```jsletnum=0for(leti=0;i<10;i++){for(letj=0;j<10;j++){if(i===5&&j===5){break}num++}}console.log(num)//95```使用label语句:```jsletnum=0outPoint:for(leti=0;i<10;i++){for(letj=0;j<10;j++){if(i===5&&j===5){breakoutPoint}num++}}console.log(num)//55```###函数声明和函数表达式*以`function`开头的是函数声明,不是以`function`开头的则是函数表达式*函数声明具有函数声明提升的概念(functiondeclerationhoisting)```js//函数声明functiontest(){}//函数表达式consttest=function(){}//函数表达式(function(){})()```函数声明提升```jsvara=function(){test()functiontest(){console.log('函数声明提升')}}a()```###属性类型大体针对`Object.defineProperty()`、`Object.defineProperties`这两个api来讲的。使用这两个api创建的对象里的数据类型和访问器类型默认为false(Configuble、Enummerable、Writable)以及undefined(Value、Set、Get)。>注意:在对象上直接定义的属性,Configurable、Enumerable、Writable默认为true####数据类型*Configurable:是否能delete*Enumerable*Writable*Value####访问器类型*Configurable*Enumerable*Writable*Get*Set###创建对象的方式这部分知识点和继承相通,可联系起来；####工厂模式```jsfunctioncreatePeople(name,age){constobj=newObject()obj.name=nameobj.age=agereturnobj}createPeople('Jack',10)```缺点:不知道创造的对象属于什么类####构造函数模式```jsfunctionPeople(name,age){this.name=namethis.age=agethis.sayHi=function(){console.log('hi')}}constpeople1=newPeople('Jack',10)constpeople2=newPeople('Lucy',8)people1.sayHi===people2.sayHi//false```优点:能将自定义参数传入构造函数缺点:没有解决公共方法的复用性(是缺点也是优点,后面有用到这个特性)####原型链模式```jsfunctionPeople(name,age){this.name=namethis.age=age}People.prototype.sayHi=function(){console.log('hi')}People.prototype.habbit=['reading']constpeople1=newPeople('Jack',10)constpeople2=newPeople('Lucy',8)```>原型模式实际上必须结合构造函数一起使用,但在这里为了说明原型模式的缺点,单独列了出来。```js//结果people1.sayHi===people2.sayHi//truepeople1.habbit.push('drawing')people2.habbit//['reading',drawing]```优点:解决公共方法的复用性(sayHi)；缺点:也正是复用性,所以在一个实例上修改prototype上的属性会对其它实例也产生相同影响(habbit)；####构造函数模式+原型链模式这个模式也是目前被大家最为认可的一种方式,对上述例子稍作修改:```jsfunctionPeople(name,age){this.name=namethis.age=agethis.habbit=['reading']}People.prototype.sayHi=function(){console.log('hi')}constpeople1=newPeople('Jack',10)constpeople2=newPeople('Lucy',8)//结果people1.sayHi===people2.sayHi//truepeople1.habbit.push('drawing')people2.habbit//[\"reading\"]```现在能直观地看到,people1和people2公用同一个sayHi方法,但是其它的属性name、age、habbit都是各自独立拥有的。>结论:所谓的构造函数模式+原型链模式即公有方法使用原型链模式,私有方法使用构造函数模式；从而发挥各自的优点。###继承>[继承优化](https://github.com/MuYunyun/blog/blob/master/BasicSkill/readES6/继承.md)###const/let出现的原因提到块级作用域可以联系到'const/let出现的原因'或者'var的缺点'```js//案例1vara=1varaa//1------------//案例2vara=1vara=2a//2```可以看到使用var并不会告知之前是否已经声明过该变量,案例1直接无视了后续的声明,案例2后续的声明覆盖了前面的声明,这样子使用起来便有些混乱了。这也是const/let出现的原因,const专注案例1的情形,let则专注案例2的情形。```js//案例1consta=1consta//UncaughtSyntaxError:Missinginitializerinconstdeclaration------------//案例2leta=1leta=2a//2```###块级作用域关键字:匿名函数```js(function(){//块级作用域})()```因为没有引用指向匿名函数,所以执行完就可以垃圾回收,不造成内存浪费。###作用域安全的构造函数```jsfunctionSafe(value){if(thisinstanceofSafe){this.name=value}else{returnnewSafe(value)}}```这种写法不管使用`newSafe()`还是`Safe()`能保证它们返回结果一致(作用域一致)。###防篡改对象*`Object.preventExtensions(obj)`:obj不能添加属性*`Object.seal(obj)`:obj不能添加/删除属性*`Object.freeze(obj)`:obj不能添加/删除/修改属性###防抖和节流函数最简版防抖:多次触发事件只执行一次(适用于断续的事件,比如`click`、`input`)```jsfunctiondebounce(fn,time){lettimeoutreturn()=>{if(timeout){clearTimeout(timeout)}timeout=setTimeout({fn},time)}}```>建议:面试的时候先写出如上形式,如果有时间再考虑实现带`immediate`形式的防抖函数。节流:在指定时间内多次触发事件只执行一次(适用于连续的事件,比如`scroll`)```jsfunctionthrottle(fn,time){letpreTime=0return()=>{constremainTime=time-(Date.now()-preTime)if(remainTime<=0){fn()preTime=Date.now()}}}```"},{name:"前端协议.md",path:"/BasicSkill/basis/前端协议.md",type:"file",mdconf:{abbrlink:"5ur6xjo3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:773,extension:".md",relative:"/BasicSkill/basis/前端协议.md",isEmpty:!1,content:"\x3c!--abbrlink:5ur6xjo3--\x3e###前端实时协议*`websocket`*`poll`(轮询)*`long-poll`(长轮询):场景:移动端扫pc端二维码,从而pc端完成登入`long-poll`的含义就是设定一定的超时时间进行挂起,在这个时间范围内如果收到服务端的返回信息则发给客户端响应报文,若超过这时间没有服务端的返回信息则再次发起`long-poll`###hybride的通信####在web中调用native1.`Native`先注册`Schema`协议的URL。在app的JS代码中请求该URL就能调用相应Schema中的原生方法2.`addJavaScriptInterface`:这个是针对android的,使用这个api添加的方法就能在app的JS代码里进行调用;####在native中调用JS1.`loadUrl`"},{name:"基本类型和引用类型.md",path:"/BasicSkill/basis/基本类型和引用类型.md",type:"file",mdconf:{abbrlink:"y1e31jpn"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1618,extension:".md",relative:"/BasicSkill/basis/基本类型和引用类型.md",isEmpty:!1,content:"\x3c!--abbrlink:y1e31jpn--\x3e###基本类型和引用类型|类型种类|访问类型|存储类型||:------:|:--------:|:------:||基本类型|按值访问|栈内存||引用类型|按引用访问|堆内存|####函数参数是'按值传递'的此处的按值传递和上面提到的按值访问是两个不一样的概念,此处指的是给函数传入参数后,我们操作的是`复制参数后的值`。①.当传入参数为基本类型时:```jsconstcount=0functionadd(num){num=++numreturnnum}constresult=add(count)console.log(count)//0可以看到传入参数仍然是0console.log(result)//1```当count作为参数传入函数add时,在栈内存中就会复制一份count的值,我们操作的其实是复制后的这个值。可用下图表示:![](http://with.muyunyun.cn/dae97b9a4ef1022ae56e9bf5b9c1c727.jpg-200)②.当传入参数为引用类型时:```jsconstreference={num:0}functionadd(obj){obj.num=1obj=newObject()//①此处函数参数的引用发生改变obj.num=2returnobj}constresult=add(reference)console.log(reference)//{num:1}console.log(result)//{num:2}```类似的,reference作为参数传入函数add时,栈内存中会多出一个指向堆内存的值(类似hash值)。可用下图表示:![](http://with.muyunyun.cn/b12b36ce345d26881486de403b79cbee.jpg)当执行`obj=newObject()`实际上是更改了hash2的指向(hash1的指向并没有发生变化),所以更改函数参数的引用是不会影响到原参数的。"},{name:"探寻JavaScript精度问题.md",path:"/BasicSkill/basis/探寻JavaScript精度问题.md",type:"file",mdconf:{abbrlink:"dzjdfedl"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6352,extension:".md",relative:"/BasicSkill/basis/探寻JavaScript精度问题.md",isEmpty:!1,content:"\x3c!--abbrlink:dzjdfedl--\x3e#探寻JavaScript精度问题阅读完本文可以了解到`0.1+0.2`为什么等于`0.30000000000000004`以及JavaScript中最大安全数是如何来的。###十进制小数转为二进制小数方法拿173.8125举例如何将之转化为二进制小数。①.针对整数部分173,采取`除2取余,逆序排列`;```js173/2=86...186/2=43...043/2=21...1↑21/2=10...1|逆序排列10/2=5...0|5/2=2...1|2/2=1...01/2=0...1```得整数部分的二进制为`10101101`。②.针对小数部分0.8125,采用`乘2取整,顺序排列`;```js0.8125*2=1.625|0.625*2=1.25|顺序排列0.25*2=0.5|0.5*2=1↓```得小数部分的二进制为`1101`。③.将前面两部的结果相加,结果为`10101101.1101`;###小心,二进制小数丢失了精度！根据上面的知识,将十进制小数`0.1`转为二进制:```js0.1*2=0.20.2*2=0.4//注意这里0.4*2=0.80.8*2=1.60.6*2=1.20.2*2=0.4//注意这里,循环开始0.4*2=0.80.8*2=1.60.6*2=1.2...```可以发现有限十进制小数`0.1`却转化成了无限二进制小数`0.00011001100...`,可以看到精度在转化过程中丢失了！能被转化为有限二进制小数的十进制小数的最后一位必然以5结尾(因为只有0.5*2才能变为整数)。所以十进制中一位小数`0.1~0.9`当中除了`0.5`之外的值在转化成二进制的过程中都丢失了精度。###推导0.1+0.2为何等于0.30000000000000004在JavaScript中所有数值都以IEEE-754标准的`64bit`双精度浮点数进行存储的。先来了解下IEEE-754标准下的[双精度浮点数](https://zh.wikipedia.org/wiki/%E9%9B%99%E7%B2%BE%E5%BA%A6%E6%B5%AE%E9%BB%9E%E6%95%B8)。![](http://with.muyunyun.cn/dda7d5b38676abfa13afb344f8a792ed.jpg-300)这幅图很关键,可以从图中看到IEEE-754标准下双精度浮点数由三部分组成,分别如下:*sign(符号):占1bit,0表示正,1表示负;*exponent(指数):占11bit,表示范围;*mantissa(尾数):占52bit,表示精度,多出的末尾如果是1需要进位;推荐阅读[JavaScript浮点数陷阱及解法](https://github.com/camsong/blog/issues/9),阅读完该文后可以了解到以下公式的由来。![](http://with.muyunyun.cn/5c268e4bd6e0bf2466598d9d5cb58a16.jpg-200)>精度位总共是53bit,因为用科学计数法表示,所以首位固定的1就没有占用空间。即公式中(M+1)里的1。另外公式里的1023是2^11的一半。小于1023的用来表示小数,大于1023的用来表示整数。>指数可以控制到2^1024-1,而精度最大只达到2^53-1,两者相比可以得出JavaScript实际可以精确表示的数字其实很少。`0.1`转化为二进制为`0.0001100110011...`,用科学计数法表示为`1.100110011...x2^(-4)`,根据上述公式,`S`为`0`(1bit),`E`为`-4+1023`,对应的二进制为`01111111011`(11bit),`M`为`1001100110011001100110011001100110011001100110011010`(52bit,另外注意末尾的进位),`0.1`的存储示意图如下:![](http://with.muyunyun.cn/5b7c0dcc0b1770b6eed238e288eb4c0e.jpg-300)同理,`0.2`转化为二进制为`0.001100110011...`,用科学计数法表示为`1.100110011...x2^(-3)`,根据上述公式,`E`为`-3+1023`,对应的二进制为`01111111100`,`M`为`1001100110011001100110011001100110011001100110011010`,`0.2`的存储示意图如下:![](http://with.muyunyun.cn/cb0ef89aa0ed6e8d32b90d1a29cfc9e1.jpg-300)`0.1+0.2`即2^(-4)x1.1001100110011001100110011001100110011001100110011010与2^(-3)x1.1001100110011001100110011001100110011001100110011010之和```js//计算过程0.000110011001100110011001100110011001100110011001100110100.0011001100110011001100110011001100110011001100110011010//相加得0.01001100110011001100110011001100110011001100110011001110````0.01001100110011001100110011001100110011001100110011001110`转化为十进制就是`0.30000000000000004`。验证完成!###JavaScript的最大安全数是如何来的根据双精度浮点数的构成,精度位数是`53bit`。安全数的意思是在`-2^53~2^53`内的整数(不包括边界)与唯一的双精度浮点数互相对应。举个例子比较好理解:```jsMath.pow(2,53)===Math.pow(2,53)+1//true````Math.pow(2,53)`竟然与`Math.pow(2,53)+1`相等！这是因为Math.pow(2,53)+1已经超过了尾数的精度限制(53bit),在这个例子中`Math.pow(2,53)`和`Math.pow(2,53)+1`对应了同一个双精度浮点数。所以`Math.pow(2,53)`就不是安全数了。>最大的安全数为`Math.pow(2,53)-1`,即`9007199254740991`。###业务中碰到的精度问题以及解决方案了解JavaScript精度问题对我们业务有什么帮助呢？举个业务场景:比如有个订单号后端Java同学定义的是long类型,但是当这个订单号转换成JavaScript的Number类型时候精度会丢失了,那没有以上知识铺垫那就理解不了精度为什么会丢失。解决方案大致有以下几种:1.针对大数的整数可以考虑使用BigInt类型(目前在~~stage3~~stage4阶段)；2.使用[bigNumber](https://github.com/MikeMcl/bignumber.js),它的思想是转化成string进行处理,这种方式对性能有一定影响;3.可以考虑使用[long.js](https://github.com/dcodeIO/long.js),它的思想是将长度为64位的long类型值转化成两个精度为32位的双精度类型的值。4.针对小数的话可以使用[number-precision](https://github.com/nefe/number-precision),该库将小数转为整数后再作处理;###相关链接*[代码之谜系列](http://justjavac.com/codepuzzle/2012/11/11/codepuzzle-float-who-stole-your-accuracy.html)*[JavaScript浮点数陷阱及解法](https://github.com/camsong/blog/issues/9):推荐阅读*[javascript里最大的安全的整数为什么是2的53次方减一](https://www.zhihu.com/question/29010688)*[IEEE-754进制转换图生成](http://www.binaryconvert.com/convert_double.html):工具*[在线进制转换工具](https://www.sojson.com/hexconvert.html):工具"},{name:"正则表达式.md",path:"/BasicSkill/basis/正则表达式.md",type:"file",mdconf:{abbrlink:"81uasrob"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3826,extension:".md",relative:"/BasicSkill/basis/正则表达式.md",isEmpty:!1,content:"\x3c!--abbrlink:81uasrob--\x3e###数量限定符|数量限定符|解释||:---------|:----------------------------------------------------------------------------------------||`x+`|1或多个||`x*`|0或多个||`x?`|0或1个||`x{n}`|n个||`x{n,}`|至少n个||`x{n,m}`|n至m个,遵循贪婪原则,会尽可能匹配多个;如果在后面加个?(如x{n,m}?),遵循非贪婪原则|>贪婪可以理解成从后往前遍历,非贪婪可以理解为从前向后遍历###字符限定符|字符限定符|解释||:---------|:------------------------------------------------||`\\d`|匹配一个数字字符,[0-9]||`\\D`|匹配一个非数字字符,[^0-9]||`\\w`|匹配单词字符(包括数字下划线在内),[0-9A-Za-z_]||`\\W`|匹配非单词字符(包括数字下划线在内),[^0-9A-Za-z_]||`\\s`|匹配空白字符(空格、回车、制表符)||`\\S`|匹配非空白字符||`.`|匹配`除换行符(\\n)以外`的任何单个字符|根据使用方法可以进行如下分类:|使用|解释||:------------|:-------||`[0-9a-zA-Z]`|范围字符||`[abcd]`|任意字符||`[^a-z]`|范围字符|###定位符|定位符|解释||:-----|:---------||`^`|开头标识||`$`|结尾标识||`\\b`|单词边界||`\\B`|非单词边界|###转义符`\\`:用于匹配某些特殊字符>/^(\\d)\\1+$/.test(333),比如这里的\\1表示第一个括号里的值,达到判断重复数字的效果###选择匹配符`|`:可以匹配多个规则###特殊用法|特殊用法|解释||:-------|:---|◊------||`?=`正向预查|匹配以指定内容结束的字符串||`?!`负向预查|匹配不是以指定内容结束的字符串||`?`|不把选择匹配符的内容放到缓冲区|###正则表达式在JavaScript下的使用方法在JavaScript下使用正则表达式,有两种方法:第一种方法:使用`RegExp`类提供的方法有:(正则表达式在前面)*`test(str)`:在字符串匹配是否有匹配模式的字符串,返回`true/false`*`exec`:如果正则表达式中有子表达式,使用`exec`方法,返回`result[0]=匹配结果,result[1]=子表达式1的匹配结果……`第二种方法是:使用`String`类提供的方法有:(正则表达式在后面)*`search`返回匹配模式的字符串出现的位置,如果没有,返回-1;*`match`返回匹配模式匹配到的字符串,如果有,返回数组,无,返回null;*`replace`将匹配模式匹配到的字符串进行替换;*`split`将字符串已匹配模式为分隔符进行字符串分隔,返回数组;###分析```js('&ab=').match(/([^&]+)=/g)//[\"ab=\"]```分析:^一般表示开头,但是注意此处中括号里的`^`表示非###i、g、m*/i:忽略大小写*/g:全局*/m:多行查找###update[?<=](https://github.com/tc39/proposal-regexp-lookbehind):nowsupportmatchfromrighttoleft."},{name:"类型.md",path:"/BasicSkill/basis/类型.md",type:"file",mdconf:{abbrlink:"co2uxga9"},birthtime:"2022-01-16",mtime:"2022-01-16",size:836,extension:".md",relative:"/BasicSkill/basis/类型.md",isEmpty:!1,content:'\x3c!--abbrlink:co2uxga9--\x3e###BooleanAquicktiptoremoveallfalsy(false,null,undefined,0,NaNoranemptystring)itemsoutofanarray:```jsvara=[1,2,"b",0,{},"",NaN,3,undefined,null,5]varb=a.filter(Boolean);//[1,2,"b",{},3,5]```SinceBooleanconstructorisalsoafunction,itreturnseithertruefor\'truthy\'argumentorfalsefor\'falsy\'argument.Forexample:```jsBoolean(0)//falseBoolean(true)//trueBoolean(1)//trueBoolean("")//falseBoolean("false")//true."false"isaregular,non-emptystring```Andwriting```jsb=a.filter(Boolean)```isactuallythesameaswriting:```jsb=a.filter(function(x){returnBoolean(x)})```###隐式转化*符号计算*表达式*console.log易错告警:`\'\'?1:0`结果是0,记住了`\'\'`隐式转化boolean为false。'},{name:"重学前端.md",path:"/BasicSkill/basis/重学前端.md",type:"file",mdconf:{abbrlink:"ni1jporq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:183,extension:".md",relative:"/BasicSkill/basis/重学前端.md",isEmpty:!1,content:"\x3c!--abbrlink:ni1jporq--\x3e此文档为`winter`老师极客时间摘要笔记###学习方法以下也是需改进的点*构建学习架构图*追本溯源(比如看mdn)"}],type:"directory",size:41480},{name:"chart",path:"/BasicSkill/chart",children:[{name:"README.md",path:"/BasicSkill/chart/README.md",type:"file",mdconf:{abbrlink:"mnc7po2e"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2126,extension:".md",relative:"/BasicSkill/chart/README.md",isEmpty:!1,content:"\x3c!--abbrlink:mnc7po2e--\x3e###link*移动端数据图表组件调研*chart.js*文档:[chartjs](https://github.com/chartjs/Chart.js)*github48000+star*类型：6种图表类型（折线图，条形图，雷达图，饼图，柱状图和极地区域区）*特性：颜色，字体，边框和它们的尺寸都可以定制，图表可以动画的形式加载，非常炫*兼容：支持canvas的所有现代浏览器和大部分手机浏览器，自动针对retina屏幕做缩放*其他：图表如果使用动画效果，在PC端流畅，但是在移动端效果产生抖动延迟现象；如果不使用动画效果在移动端则正常显示*分析：移动端表现佳，课通过自适应宽度来使得图表宽度与设备屏幕适配。适当缩小图表，合理展示数据。兼容能力强，API使用不复杂。*highcharts*文档:[hcharts](https://github.com/highcharts/highcharts)*技术:基于SVG*类型：直线图、曲线图、面积图、柱状图、饼图、散点图等多达18种不同类型的图表*其他：支持移动端，根据页面宽度定义图表宽度。需要商业授权*F2*文档:[F2](https://github.com/antvis/f2/)比较当前社区图表库下来,在移动端表现可以的有chart.js(移动端展现ok,貌似有动画的场景表现欠佳)、hightcharts(需商用授权)、F2(图形语法上手成本高),因为现在业务是基于f2(https://f2.antv.vision/zh/examples/basic)开发的,因此现在的思路是封装F2为React组件,类似社区的[bizGoblin](https://bizcharts.net/products/bizGoblin/api/chart),[https://github.com/ant-design/ant-design-mobile-chart](https://github.com/ant-design/ant-design-mobile-chart)。*[选择Canvas还是SVG](https://www.yuque.com/antv/g2-docs/tutorial-renderers)*[antv语雀](https://www.yuque.com/antv)*[antvf2](https://f2.antv.vision/zh/examples/candlestick/basic)*[antdesignpro](https://v2-pro.ant.design/components/charts-cn)*[BizCharts](https://bizcharts.net/product/bizcharts/category/7/page/12)"},{name:"canvas.md",path:"/BasicSkill/chart/canvas.md",type:"file",mdconf:{abbrlink:"fyhtxlx8"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1351,extension:".md",relative:"/BasicSkill/chart/canvas.md",isEmpty:!1,content:"\x3c!--abbrlink:fyhtxlx8--\x3e###Canvas因为Canvas相对更加底层,在处理图像交互上更具优势,也因此目前市面上看到的Web端图表库基本都是基于Canvas进行绘制的。###API*`线性渐变`*createLinearGradient(x0:number,y0:number,x1:number,y1:number)*addColorStop(offset:number,color:string):void*`径向渐变`*createRadialGradient(x0:number,y0:number,r0:number,x1:number,y1:number,r1:number)*`路径`*开始一段新路径:ctx.beginPath()*开始:ctx.moveTo(x,y)*经过:ctx.lineTo(x,y)*路径为线:ctx.stroke()*设置线的颜色:ctx.strokeStyle=gradient*`曲线`:ctx.bezierCurveTo(cplx,cp1y,cp2x,cp2y,x,y)*`圆`*ctx.arc(x,y,radius,startAngle,endAngle[,counterclockwise])*`方形`*ctx.fillRect(x,y,width,height)*`画布的变换`*注意:画布变换的操作需要前置。*`画布平移`:ctx.translate(x,y)*`画布旋转`:ctx.rotate(Math.PI/180*10):旋转10°*`画布缩放`:ctx.scale(x,y)*沿原点镜像:ctx.scale(-1,-1)*沿x轴镜像:ctx.scale(1,-1)*沿y轴镜像:ctx.scale(-1,1)*`状态`*ctx.save()*ctx.restore()*`文字`*在(x,y)位置绘制文字:ctx.fillText('文字',x,y)*测量文字:ctx.measureText('文字')"},{name:"line-chart.md",path:"/BasicSkill/chart/line-chart.md",type:"file",mdconf:{abbrlink:"9q9hazvf"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2215,extension:".md",relative:"/BasicSkill/chart/line-chart.md",isEmpty:!1,content:"\x3c!--abbrlink:9q9hazvf--\x3e###折线图绘制思路*绘制坐标轴*利用Canvas画布缩放的能力![](http://with.muyunyun.cn/3cddc860aa1d667d3e80744702fc8d1f.jpg-muyy)```jsconstcreateCoordinateSystem=()=>{context.scale(1,-1)context.translate(0,-height)context.beginPath()context.moveTo(0,0)context.lineTo(width,0)context.stroke()context.strokeStyle='#000'context.beginPath()context.moveTo(0,0)context.lineTo(0,height)context.stroke()context.strokeStyle='#000'}```*绘制平行X轴的线条![](http://with.muyunyun.cn/978bbe881bdf396138967c982cefc793.jpg-muyy)```jsfor(leti=0;i<6;i++){context.translate(0,30)createLine(0,0,width,0)}```*绘制刻度![](http://with.muyunyun.cn/24cffb873d13e569b67340ab474dc2bf.jpg-muyy)```jscontext.save()//绘制坐标轴...context.restore()for(leti=0;i<8;i++){createLine(0,0,0,-5)context.lineWidth=0.2context.translate(45,0)}```*绘制x轴下方文字![](http://with.muyunyun.cn/669b57db2cdd078a375c1ba871c35cf1.jpg-muyy)```js//绘制x轴下方文字ctx.save()ctx.scale(1,-1)for(leti=0;i<xArr.length;i++){ctx.fillStyle='#000'if(i===0){consttextWidth=ctx.measureText(xArr[i])ctx.translate(perXLength/2-textWidth.width/2,15)}else{ctx.translate(perXLength,0)}ctx.fillText(xArr[i],0,0)}ctx.restore()```*绘制折线与圆```js//绘制折线ctx.save()for(leti=0;i<xArr.length-1;i++){ctx.fillStyle='#000'constcurPointX=(1/2+i)*perXLengthconstcurPointY=valueArr[i]constnextPointX=(1/2+i+1)*perXLengthconstnextPointY=valueArr[i+1]this.drawLine({ctx:ctx,x0:curPointX,y0:curPointY,x1:nextPointX,y1:nextPointY})}ctx.restore()//绘制圆ctx.save()for(leti=0;i<xArr.length-1;i++){ctx.fillStyle='#000'constpointX=(1/2+i+1)*perXLengthconstpointY=valueArr[i+1]ctx.beginPath()ctx.arc(pointX,pointY,2,0,Math.PI*2,true)ctx.stroke()}ctx.restore()```>todo:平滑的折线图:https://juejin.cn/post/6950684708443258894#heading-23"}],type:"directory",size:5692},{name:"composition_principle",path:"/BasicSkill/composition_principle",children:[{name:"计算机组成原理.md",path:"/BasicSkill/composition_principle/计算机组成原理.md",type:"file",mdconf:{abbrlink:"tq8wd9nw"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2137,extension:".md",relative:"/BasicSkill/composition_principle/计算机组成原理.md",isEmpty:!1,content:"\x3c!--abbrlink:tq8wd9nw--\x3e#计算机组成原理##计算机的发展历史计算机发展的四个阶段![](http://with.muyunyun.cn/20f4d05194338094b21defa7977c357e.jpg)*第一阶段:电子管计算机![](http://with.muyunyun.cn/981859a7e9a5f642c802559466682ac1.jpg-300)![](http://with.muyunyun.cn/fdb522e3b98b19ec07dac13b147ad5a3.jpg-300)*第二阶段:晶体管计算机![](http://with.muyunyun.cn/3740ffbc8eedba24e33c53ce4f59b32e.jpg-400)*第三阶段:集成电路计算机![](http://with.muyunyun.cn/4afca0d86589e900ffd34193b27261de.jpg-300)*第四阶段:超大规模集成电路计算机![](http://with.muyunyun.cn/fbbcdc55d25e0266ff29a3154496c5d0.jpg)##现代计算机的结构![](http://with.muyunyun.cn/fe5d989d5af9d9fa2798ce1f78e303b7.jpg-400)##计算机的层次与编程语言*编译型语言:*常见语言:C、C++、Object-C、Golang;*经过编译器将高级语言转化生成为计算机实际执行的语言;*解释型语言:*常见语言:JavaScript、Python、Php、Perl、Lua;*经过解释器(低级语言写的程序)转换为实际执行的语言;*编译+解释型语言:*Java、C#、Kotlin;以C语言和JavaScript语言为例,C语言要编写完整,然后使用编译器编译成一个二进制文件才可以执行,在编译的过程会把整个程序进行彻底的翻译和优化,再输出平台可以直接运行的二进制文件。而JavaScript是在浏览器V8引擎解释执行的,写好直接就可以运行了,没有经过编译阶段,直接是把JavaScript代码一句一句解释执行的。##计算机的计算单位容量单位![](http://with.muyunyun.cn/5cb5ecfcdb8dc250e1c981268d0b990d.jpg)*为什么网上买的移动硬盘500G,格式化之后只有465G了?答:因为硬盘生产商一般用10^3来便于沟通交流。可以进行如下换算得出:```js500*(1024^3)/(1000^3)≈465```速度单位*为什么电信拉的100M光纤,测试峰值速度只有12M每秒。因为网络常用单位是Mbps;```100M/s===100Mbit/s===(100/8)B/s```ReadTo:3-6"}],type:"directory",size:2137},{name:"css",path:"/BasicSkill/css",children:[{name:"INHERITED_AND_NON-INHERITED.md",path:"/BasicSkill/css/INHERITED_AND_NON-INHERITED.md",type:"file",mdconf:{abbrlink:"nehdqz9q"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3526,extension:".md",relative:"/BasicSkill/css/INHERITED_AND_NON-INHERITED.md",isEmpty:!1,content:"\x3c!--abbrlink:nehdqz9q--\x3e###INHERITEDANDNON-INHERITEDINCSSWhenIlookupcsspropertiesinMDN'sspecificationssection,therearesomepropertiesinitanditseemsunfamiliartome.SoItrytofindoutsomeofthemtoday.![](http://with.muyunyun.cn/b22bcdb94d354d3f301cae7997d9cd17.jpg)Thefollowlisttrytogiveonewordtospecifythemeaningofthem.*Initialvalue:SpecifytheCSSproperty'sdefaultvalue;*Appliesto:Specifywhichelementstoapplyto;*Inherited:SpecifytheCSSpropertyisinheritedornon-inherited;*[Media](https://www.w3.org/TR/css3-mediaqueries/):Specifyhowadocumentistobepresentedondifferentmedia;*[Computedvalue](https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value):TheCSSpropertythatistransferredfromparenttochild;*[Animationtype](https://drafts.csswg.org/web-animations/#animation-type)*[Canonicalorder](https://developer.mozilla.org/en-US/docs/Glossary/Canonical_order):SomeCSSproperties(font、background...)havetheirownCSSpropertyvalueorder.Andthisarticleistodiscussthetopicabouttheknowledgeofinheritedandnon-inherited.###Initialvaluebetweeninheritedandnon-inheritedTheinitialvalueofaCSSpropertyisitsdefaultvalue.TheInitialvaluehastwodifferentbehaviorbetween`inheritedproperties`and`non-inheritedproperties`.For`inheritedproperties`,theinitialvalueis`usedontherootelementonly`.```html<spanstyle=\"color:red\">hello,<em>CSS</em></span>```Theresultisthecolorofboth`span`and`em`elementarered.Becausethecolorisaninheritedproperty,theelementwillgetthecolorpropertyfromtheparentrecursivelyuntiltodocument.For`non-inheritedproperties`,theinitialvalueis`usedoneveryelement`.Whennovalueforanon-inheritedpropertyhasbeenspecifiedonanelement,theelementgetstheinitialvaluedirectly.```html<spanstyle=\"border:1pxsolidblack\">hello,<em>CSS</em></span>```Theresultistheborderisonlyeffectedon`span`element,not`em`.Becausetheborderisanon-inheritedproperty,andthereisnoborderpropertyspecifiedontheem,sotheemgettheborder'sinitialvalue`none`.Itmentionedmuchtimesaboutinheritedvalueandnon-inheritedvalueabove,andnowwesortoutcssproperties.###InheritedTypeI'vecollectedsomeinheritedtypesincss,theyarelistedasfollow:*`FontType`:font-style、font-variant、font-weight、font-stretch、font-size、font-family、color、line-height;*`SpaceType`:letter-spacing、word-spacing、white-space;*`LetterType`:text-align、text-indent、text-shadow、text-transform;*`ListType`:list-style、list-style-type、list-style-position;*`Others`:visibility、cursor;###Non-InheritedTypeIntheoppositeofinheritedtype,thenon-inheritedtypesarelistedasfollow:*`LayoutType`:float、position、left、right、top、bottom、z-index、display*`BoxType`:width、max-width、min-width、height、max-height、min-height、margin、padding、border;*`BackgroundType`:background-size、background-image、background-clip、background-color、background-origin、background-position、background-repeat;*`Others`:overflow、text-overflow、vertical-align;###todo*inherit*initial*unset*revert###RecapThesesectionintroducestheinheritedconceptinCSS,anddistinguishsomeinheritedtypeandsomenon-inheritedtypefromcssproperties.Hopeit'shelpfulforyou."},{name:"README.md",path:"/BasicSkill/css/README.md",type:"file",mdconf:{abbrlink:"52h4xe5y"},birthtime:"2022-01-16",mtime:"2022-01-16",size:394,extension:".md",relative:"/BasicSkill/css/README.md",isEmpty:!1,content:"\x3c!--abbrlink:52h4xe5y--\x3e###针对目前阶段CSS的学习方案:使用[codepen](https://codepen.io/MuYunyun/pens/public/)进行整理相应demo。-[]整理相应的`CSS`揭秘中觉得可以用得到的组件-[]css属性顺序调研-比如`transform:translate(-50%,-50%)rotate(50deg)`与`transform:rotate(50deg)translate(-50%,-50%)`-其它属性todo"},{name:"css_knowledge.md",path:"/BasicSkill/css/css_knowledge.md",type:"file",mdconf:{abbrlink:"v9b53vi6"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1988,extension:".md",relative:"/BasicSkill/css/css_knowledge.md",isEmpty:!1,content:'\x3c!--abbrlink:v9b53vi6--\x3e###css是什么`css(cascadingstylesheet)`层叠样式表。###盒模型*标准模型(默认)*IE模型由`box-sizing`属性来控制*content-box(默认)*border-box>它们的核心区别是是否将border以及padding算入content的width中(在设置了width的前提下)。###超过行内容显示省略号```css.demo{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}```###verticle-align*verticle-align:top>[行高与基线](https://blog.csdn.net/lulujiajiawenwen/article/details/8245201)###样式表*内联样式表```css.font{color:red}<divclass="font">hello,cpreact</div>```*外联样式表```css<linkrel="stylesheet"href="">```###边框*圆角效果`border-radius````css.demo{border-radios:100px/10px(水平半径100,垂直半径10)}```*阴影`box-shadow`:X轴偏移量Y轴偏移量[阴影模糊半径][阴影扩展半径][阴影颜色][投影方式];（阴影模糊半径：只能是正值；阴影扩展半径：可以是正负值）（自带边框）>外阴影x和y(正值)出现在右下；内阴影x和y(正值)出现在左上;###input的宽度——并不是给元素设置display:block就会自动填充父元素宽度。input就是个例外，其默认宽度取决于size特性的值。![](https://user-gold-cdn.xitu.io/2019/7/29/16c3d4f6fef0a871?imageslim)###object-fitIt\'sacsspropertythatcanbeeaqualtothebackground-size,ithasfivetypes:*`fill`:default*`contain`*`cover`:usedinimagePicker*`none`*`scale-down`:iftheimage\'ssizeisimallerthanbox,it\'llkeeptheimage\'ssize,otherwiseit\'llequaltocontain.Youcanlookforit[here](https://codepen.io/chrisnager/pen/XJgJqN)###style里的样式过长该怎么办*第一步:`$0.innerText`;*第二步:点击`Showmore(221kB)`;###如何覆盖伪元素的样式(可作面试题)'},{name:"css_little_book",path:"/BasicSkill/css/css_little_book",children:[{name:"字体排印.md",path:"/BasicSkill/css/css_little_book/字体排印.md",type:"file",mdconf:{abbrlink:"r4hbi1fx"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1812,extension:".md",relative:"/BasicSkill/css/css_little_book/字体排印.md",isEmpty:!1,content:'\x3c!--abbrlink:r4hbi1fx--\x3e###font属性使用font属性时:`font-size`以及`font-family`属性在尾部必填而且必须得照这个顺序。其它可选属性还有:font-weight、font-style等。此外还能使用line-height属性,使用line-height的格式为font-size/line-height。###和字体相关的css*连字符断行:`hyphens:auto`*插入换行:替代`<br/>`可以使用如下使用:```css.demo::after{content:\'/A\';/*表示Unicode里的`0x000A`/*/white-space:pre;/*保留空格*/}```###字体单位*相对视窗*`1vw`:视窗宽度的1/100,100vw等于整个视窗宽度;*`1vh`:视窗高度的1/100,100vh等于整个视窗高度;*`1vmin`:取视窗宽度和视窗高度最小值的1/100;*`1vmax`:取视窗宽度和视窗高度最大值的1/100;*相对`font-size`*`rem`:相对`html`中的`font-size`进行转换(如果根元素的font-size小于12px则以12px来计算);*`em`:相对父元素(或者自己层级)的`font-size`进行转换;font-size:1em等价于font-size:100%;`px`与`vw`单位间的转换:```js1vw=document.documentElement.clientWidth(px)/100(100/document.documentElement.clientWidth)vw=1px```####rem的使用通常将`1rem`设置为`100px`,(经过测试10px/1px也是可以的)<details><summary>相关测试</summary>```html<!DOCTYPEhtml><htmllang="en"><head><style>html{font-size:calc(100vw/375)}</style></head><body><divclass="test"style="font-size:16rem;margin-top:16rem;padding:16rem">测试</div></body></html>```</details>```csshtml{font-size:calc(100vw/3.75)/*表示在1dpr屏上,此时1rem相当于是100px*/}```-[]阅读到文本行的斑马条纹'},{name:"文本属性.md",path:"/BasicSkill/css/css_little_book/文本属性.md",type:"file",mdconf:{abbrlink:"mbmn6zoi"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1906,extension:".md",relative:"/BasicSkill/css/css_little_book/文本属性.md",isEmpty:!1,content:"\x3c!--abbrlink:mbmn6zoi--\x3e###文本属性*`text-indent`:文本缩进。*注意只能用于块级元素;*子元素使用百分数等相关声明值的时候孙子元素继承的是具体值;*`text-align`:对齐方式。*有`left、center、right、justify`这几个属性;*justify的含义是两边缘对齐,中间用空格填补;*`line-height`:行高。*行高与`font-size`之差为行间距;*文本垂直居中可以这样写:```css.demo{font-size:13px;line-height:13px;}/*效果等于*/.demo{font-size:13px;line-height:1;}```*`vertical-align`:垂直对齐文本。*适用于`行内元素`以及表格元素;*后面跟百分数是相对使用该属性节点本身`line-height`计算的;![](http://with.muyunyun.cn/0183be5dea65edfa32a0fc5e7b0b3d12.jpg)解答:vertical-align默认属性是baseline,多出的高度是「幽灵空白节点」的line-height的占位。详细解答可见[CSS深入理解vertical-align和line-height的基友关系](https://www.zhangxinxu.com/wordpress/2015/08/css-deep-understand-vertical-align-and-line-height/)*`text-transform`:文本转换。*`uppercase`、`lowercase`、`capitalize`*`text-decration`:文本装饰。*`underline`、`outerline`、`line-through`;*该属性不会继承;*`white-space`:处理换行符。*其属性值见下列表格,不太好记忆,用得最多的是normal(默认)以及nowrap,大体知道带pre的是会保留换行符的,用到的时候查表。|值|空白符|换行符|自动换行||:-------|:-----|:-----|:-------||normal|合并|忽略|允许||nowrap|合并|忽略|不允许||pre|保留|保留|不允许||pre-line|合并|保留|允许||pre-wrap|保留|保留|允许|阅读完第6章"},{name:"用户体验.md",path:"/BasicSkill/css/css_little_book/用户体验.md",type:"file",mdconf:{abbrlink:"vir7dctj"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1095,extension:".md",relative:"/BasicSkill/css/css_little_book/用户体验.md",isEmpty:!1,content:"\x3c!--abbrlink:vir7dctj--\x3e###选用合适的鼠标光标*选用合适的鼠标光标:`cursor`的`not-allowed`和`none`使用比较常见###扩大可选区域大小*[扩大可选区域大小](https://codepen.io/MuYunyun/pen/YgNxBL):使用伪元素###自定义复选框*[自定义复选框](https://codepen.io/MuYunyun/pen/jJyYyJ):见[CheckBox组件](https://github.com/MuYunyun/blog/blob/master/React/%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91/CheckBox.md)开发###遮罩层*遮罩层以下这种方案比较稳妥。可以在遮罩层监听相应的事件。```css.overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.8);}.show{position:absolute;z-index:1;}```###通过模糊来弱化背景*[通过模糊来弱化背景](https://codepen.io/MuYunyun/pen/qvRGvJ)###通过point-events:none来禁用触发事件场景:ImagePicker组件点击图片禁止其在app中弹出底部图片;`point-events:none`类似button的disabled属性,但是其能涵盖到其它任意属性。"},{name:"结构与布局.md",path:"/BasicSkill/css/css_little_book/结构与布局.md",type:"file",mdconf:{abbrlink:"i9853vz1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2513,extension:".md",relative:"/BasicSkill/css/css_little_book/结构与布局.md",isEmpty:!1,content:'\x3c!--abbrlink:i9853vz1--\x3e###display(布局)*`block`:有宽高,不在同一行;*`inline-block`:有宽高，在同一行;(父节点上使用inline-block会`自动获取子节点的宽度`)*`inline`:无宽高,在同一行;###inline-block的问题Hereisdemo:```html<htmllang="en"><style>li{display:inline-block;background:red;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:30px}.demo{width:90px;}.clearfix{overflow:visible;}</style><body><ulclass="demo"><li>testtest</li><li>testtest</li><li>testtest</li><li>testtest</li><li>testtest</li><li>testtest</li></ul></body></html>```I\'mconfusedwhyisit,Iwanttouseoverflow:hiddenandnotexpectthestrangegap,howcanIdo?![](http://with.muyunyun.cn/79377b5f34efca7b6574fff146c37f56.jpg)原因是因为代码间的标签符号之间包含空格，浏览器也会处理这部分占位，因此解决方法如下:Thesolvewayistoadd`line-height:0`or`font-size:0`totheclassdemoandadd`line-height:12px`or`font-size:12px`tothetagli.>[there-is-an-strange-distance-when-using-overflow-hidden](https://stackoverflow.com/questions/60482616/there-is-an-strange-distance-when-using-overflow-hidden)###position(位置)*relative:元素根据正常的文档流相进行定位;*absolute:脱离当前文档流,相对其最近的`position`属性值为非`static`祖先元素进行定位,直到body;*fixed:脱离当前文档流,相对视窗定位。注意:当父元素上有这几个属性时,`transform`,`perspective`,`filter`时,fixed定位会失效;*sticky:relative与fixed的结合;使用sticky布局有一些限制:```html<div><divstyle="position:sticky;top:20px;background:pink;margin-top:50px;">Header</div><divstyle="height:1000px">Content</div>//比如这一行不可或缺</div>```###margin`margin`的百分比值是以父元素的宽度作为解析基准的。###自适应内部元素宽度*[自适应内部元素宽度](https://codepen.io/MuYunyun/pen/eXgqpa)###精确控制表格列宽```css.demo{table-layout:fixed;/*固定表格布局算法*/width:100%;}```###背景占屏幕全宽，内容的长度定宽```css.footer{padding:1emcalc(100%-450px);/*暗藏内容宽度为900px*/background:#ccc;}```'},{name:"背景与边框.md",path:"/BasicSkill/css/css_little_book/背景与边框.md",type:"file",mdconf:{abbrlink:"gk71zyg4"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1813,extension:".md",relative:"/BasicSkill/css/css_little_book/背景与边框.md",isEmpty:!1,content:'\x3c!--abbrlink:gk71zyg4--\x3e###背景与边框以下为与背景与边框相关比较有用的属性。*`background-origin`:属性值有`border-box/padding-box/content-box`。默认为`padding-box`。*`background-clip`:Thebackground-clipCSSpropertysetswhetheranelement\'sbackgroundextendsunderneathitsborderbox,paddingbox,orcontentbox.属性值有`border-box/padding-box/content-box`。默认值为`border-box`。####图片自适应```css.demo{width:200px;height:100px;background-size:cover;}```####半透明边框```html<style>body{background:black;}.translucent-border{width:100px;height:100px;border:10pxsolidrgba(255,255,255,.5);background:white;background-clip:padding-box;/*这个属性能让背景和边框分离*/}</style><body><divclass="translucent-border"></div></body>```效果图![](http://with.muyunyun.cn/8e59c47dabc2eef7eb923b25811d1e44.jpg-200)[半透明边框](https://codepen.io/MuYunyun/pen/vPyOpB)####多重边框*方案一:`box-shadow````css.demo{background:white;box-shadow:00010px#655,00015pxdeeppink;}```*方案二:`outline`>Itseemdnowaytosetradiuswithoutline.```css.demo{background:white;border:10pxsolid#655;outline:5pxsoliddeeppink;}```![](http://with.muyunyun.cn/622ab7417df7af16671522a3849690b7.jpg-200)####背景定位*偏移量与容器内边距相同[background-origin属性用法](http://play.csssecrets.io/background-origin)*使用`calc`:[calc使用](http://dabblet.com/gist/b5fcb42d055427ab6c1a)```css.demo{background-position:calc(100%-20px)calc(100%-10px)/*calc里面的-、+前后要各加个空格*/}```-[]阅读到边框内圆角'},{name:"过渡与动画.md",path:"/BasicSkill/css/css_little_book/过渡与动画.md",type:"file",mdconf:{abbrlink:"tc5w4yiz"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3034,extension:".md",relative:"/BasicSkill/css/css_little_book/过渡与动画.md",isEmpty:!1,content:"\x3c!--abbrlink:tc5w4yiz--\x3e本文介绍和动画相关的两个属性。###transition(过渡)描述一个属性由一个状态过渡到另外一个状态;```css.trantion-thing{transition:color2s100ms;}```*次数:执行一次;*粒度:可以对多个属性生效;*兼容:即时动画不生效也不影响动作的终始状态;```scss.transtion-thing{transition:$props$duration$timing-function(optional)$transition-delay(optional)}```###animation(动画)相比`transition`,animation比transition多了个执行次数的属性;```css.animated-thing{animation:black-to-white1slinear1;}@keyframesblack-to-white{0%{background:#000;}100%{background:#fff;}}```注意animation最后的一个数字1,其表示执行次数,如果不传该值,默认为1。来看下animation的几个属性```scss.animated-thing{animation:$name(相比transition独有)$duration$timing-function(optional)$animation-delay(optional)$iteration-count(optional)(相比transition独有)}```*动画`animation`*调用动画:`animation:name`要与@keyframes连用;*设置动画播放时间:`animation-duration:2s`完成从0%到100%一次动画所需时间;*设置动画播放方式:`animation-timing-function`。`step()`逐帧效果;此外还有`linear`、`ease`等线性效果,也可以使用`cubic-bezier`;(记忆方法:可将ease理解成slow,slowin就是减速,slowout就是加速;)*设置动画开始播放的时间:`animation-delay`;*设置动画播放次数:`animation-iteration-count`:infinate(无限次);*设置动画播放方向:`animation-direction`:normal(默认)、alternate(偶数次反方向播放);*设置动画的播放状态:`animation-play-state`:running(默认)、paused(暂停效果);借由该属性可以完成鼠标移动移出时的暂停、播放效果;*设置动画时间外属性:`animation-fill-mode`:none/forwards/backwords/both;[行走的猫](https://codepen.io/MuYunyun/pen/ZEzxBYb)###whentouseTransitionorAnimation现阶段理解:`Animation`的可控粒度比`Transition`更为细致,transition可以实现的效果animation都能实现。然后有以下几种动效必须使用animation。1.需重复执行的动画;2.需要改变方向的动画;3.需要暂停/继续执行的动画;###一些案例*缓动效果:[小球落地](https://codepen.io/MuYunyun/pen/EMmNZN):涉及到弹框效果的动画,可以参考此节;*打字效果:如果是`单行的打字效果`可以使用css进行实现,思路借助`animaition`的`step`以及文本的宽度;###缓动算法-[][缓动算法](https://www.zhangxinxu.com/wordpress/2017/01/share-a-animation-algorithm-js/),有时间进行read。###transition属性使用坑点在变化前后的两个位置上,改变布局相关属性会使动画失效。比如`display、text-align`。"},{name:"选择器.md",path:"/BasicSkill/css/css_little_book/选择器.md",type:"file",mdconf:{abbrlink:"6lj5kmln"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2092,extension:".md",relative:"/BasicSkill/css/css_little_book/选择器.md",isEmpty:!1,content:"\x3c!--abbrlink:6lj5kmln--\x3e###选择器####子类选择器(>)*`p>span{}`意为p元素后面直接跟着span的情形样式才生效>对比:`pspan{}`意为p元素后面跟着span的情形####相邻选择器(~)*`p~span{}`意为与p元素`同级别`且位于p元素之后`所有`的span标签会生效####相邻选择器(+)*`p+span{}`意为与p元素`同级别`且位于p元素之后`相邻`的span标签会生效>踩坑:注意与.a.b{}的区别####伪类选择器和伪元素选择器*伪类选择器:`:link`、`:visited`、`:hover`、`:active`(前面4个可以记忆成LoVe-HA)、`:nth-child`*伪元素选择器:`::before`、`::after``p:first-child{}`含义:某元素的第一个子元素为p情形时的样式。>注意:不是p的第一个子元素。结构性伪类选择器:`:not()`、`:empty`、`:first-child`、`:last-child`、`:nth-child(n)`、`:nth-last-child(n)`*`:first-of-type`、`:nth-of-type(n)`、`:last-of-type`、`:nth-last-of-type(n)`、`only-child`、`only-of-type`>括号中的n可以是`2n+1`、`-n+5`、`even`、`odd`等此外还有一些特殊的伪类选择器*`:enabled`、`:disabled`*`:checked`(选择框加点变化示例)、`::selection`(改变用鼠标选择网页文本的样式)*`:read-only`(与html中readonly='readonly'配合使用)、`:read-write`(与:read-only选择器相反,主要用来指定当元素处于非只读状态时的样式。)###选择器优先级排序```jsId选择器>类选择器|属性选择器>元素>通配选择器```>伪类选择器的优先级是否是最低的呢?在input的style设置`font-size:30px`,::placeholder{font-size:12px},最终的font-size是多少呢?当前的事实是12px,那么伪元素选择器的优先级究竟排在哪个位置呢?答案后续揭晓。###JavaScript与伪元素选择器进行通信可以使用css方法`attr()`获取节点上`data-xx`的属性信息。比如:```css.demo::after{content:attr(data-msg);...}```"}],type:"directory",size:14265},{name:"css_module.md",path:"/BasicSkill/css/css_module.md",type:"file",mdconf:{abbrlink:"a8r369v5"},birthtime:"2022-01-16",mtime:"2022-01-16",size:964,extension:".md",relative:"/BasicSkill/css/css_module.md",isEmpty:!1,content:"\x3c!--abbrlink:a8r369v5--\x3e###[css-loader](https://github.com/webpack-contrib/css-loader)来看下面这一组webpack的配置项，```js{test:/\\.less$/,use:[require.resolve('style-loader'),{loader:require.resolve('css-loader'),options:{modules:true,//开启css模块化importLoaders:2,},},{loader:require.resolve('postcss-loader'),options:{...},},{loader:require.resolve('less-loader'),options:{...},},],},```它们执行顺序是`less-loader`、`postcss-loader`、`css-loader`、`style-loader`。我们来理一下各module的作用：*`less-loader`:将less解析为css*`postcss-loader`:将css兼容各浏览器加上相应前缀*`css-loader`:将css转化为common.js模块*`style-loader`:将common.js模块注入`style`标签中>[Linkissue](https://github.com/MuYunyun/reactSPA/issues/52)"},{name:"flex_props.md",path:"/BasicSkill/css/flex_props.md",type:"file",mdconf:{abbrlink:"8mmijalz"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2453,extension:".md",relative:"/BasicSkill/css/flex_props.md",isEmpty:!1,content:"\x3c!--abbrlink:8mmijalz--\x3e###flex基本用法```css.demo{flex:11100px;}```三个值分别为:*`flex-grow`:占比,默认为0;*`flex-shrink`:缩减比例,0为不缩减,默认为1;*`flex-basis`:flex基本尺寸,默认为auto;###Howtocalculatetheflex-shrink![](http://with.muyunyun.cn/1431bcfc07c05820a123d5716955b860.jpg)Thecalculatestepisalittledifficulty,youcanseeitinthe[how-to-calculate-flex-shrink](https://stackoverflow.com/questions/36550840/how-to-calculate-flex-shrink-when-flex-items-have-a-different-flex-basis).###justify-content*space-around:Thespacingbetweeneachpairofadjacentitemsisthesame,Theemptyspacebeforethefirstandafterthelastitemequals`halfofthespace`betweeneachpairofadjacentitems.*space-evenly:Thespacingbetweeneachpairofadjacentitems,themain-startedgeandthefirstitem,andthemain-endedgeandthelastitem,`areallexactlythesam`###flex特殊用法####flex+z-index*我们知道`z-index`要与定位元素(absolute、relative、absolute、sticky)一起使用,但使用了flex布局后,尽管仍然是`position:static`,`z-index`仍然是生效的。####flex+margin`flex`和`margin`结合使用能达到垂直居中的妙用。>见[水平垂直居中]([./水平垂直居中](https://github.com/MuYunyun/blog/blob/master/BasicSkill/css/水平垂直居中.md).md)场景:右侧图标的导航栏的场景也适用此方式。![](http://with.muyunyun.cn/234bae5566a4662a6995ff01191865e3.jpg)方法:在flex布局中,使用`margin-left:auto`。####flex+height:100%在ios10以下的ios版本中,在flex布局中不推荐与`height:100%`一起连用;*原因一:父元素为flex布局,若父元素不设置`height:100%`,子元素设置`height:100%`是继承不到父元素的高度的;*原因二:父元素为flex布局,即使父元素设置了`height:100%`,子元素使用`height:100%`继承的高度也是有偏差的;一般使用`flex:1`取代`height:100%`,此外要让父元素的高度传给子元素通常需要配合`flex-direction`。使用如下:```css.parentDemo{display:flex;flex-direction:column;}```####Flex布局中省略号失效Flex布局中,省略号属性是失效的。```css.demo{display:flex;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;}```"},{name:"matrix.md",path:"/BasicSkill/css/matrix.md",type:"file",mdconf:{abbrlink:"7r8xdrqp"},birthtime:"2022-01-16",mtime:"2022-01-16",size:921,extension:".md",relative:"/BasicSkill/css/matrix.md",isEmpty:!1,content:"\x3c!--abbrlink:7r8xdrqp--\x3e###transform-functionAlineartransformationfunctionisdescribedasa`2x2`matrix,likethis:![](http://with.muyunyun.cn/32d9ec359e0199ddbb0741b0b79bc1a9.jpg)Thetransformationfunctionisapplyiedtoanelementbyusingmatrixmultiplication.Thuseachcordinatechangesisbasedonthematrixvalue.![](http://with.muyunyun.cn/74244bb9e6cb2e93a5756021b2c5895d.jpg)Ifseveraltransformationworkonthethesameelement,itcanbewriteninarow.![](http://with.muyunyun.cn/3de22426e661a9d6faefe0f608d444f2.jpg)###matrix()Theresultofmatrixisequalto`<transform-function>`.`matrix(a,b,c,d,tx,ty)`isequallikethis:-------占位--------###link*[matrix-multiplication](http://www.ruanyifeng.com/blog/2015/09/matrix-multiplication.html):byRuanYifeng*[transform-function](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function)"},{name:"scssGuidelines.md",path:"/BasicSkill/css/scssGuidelines.md",type:"file",mdconf:{abbrlink:"7cpwtx8o"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1487,extension:".md",relative:"/BasicSkill/css/scssGuidelines.md",isEmpty:!1,content:"\x3c!--abbrlink:7cpwtx8o--\x3e###核心原则以简为美，简约至上。>可以当成一门新语言来学###String*`SCSS`的属性应该使用单引号;*但有一些特殊的属性(比如`sans-serif/initial`)无须使用引号,例子如下:```SCSS$font-type:sans-serif```###Number*`0`作为长度时后面不应该带有单位;*给数字添加单位应该使用乘法,例子如下:```SCSS$value:42//yep$length:$value*1px//nope$length:$value+1px```*数字间计算需要带上括号,例子如下:```SCSS//yep.foo{width:(100%/3);}```###嵌套选择器```SCSS.foo{.bar{&:hover{color:red}}}```生成`css`为:```css.foo.bar:hover{color:red;}``````SCSS.foo{&-bar{color:red;}}```生成`css`为:```css.foo-bar{color:red;}```###混合宏在`SCSS`中提供函数的支持```SCSS@mixindummy($a,$b,$c){//...}@includedummy(true,1,'pdd')```###条件语句```scss@if($support-legacy){//..}@else{//..}```###循环一般使用`each````scss@each$key,$valuein$map{//...}```结合伪类可以使用`for````scss@for$ifrom0through10{.foo:nth-of-type(#{$i}){//...}}```###继承```scss.demo1{}.demo{@extend.demo1}```###参考文献*[sassguidelines](https://sass-guidelin.es/)*[sassguidelines中文文档](https://sass-guidelin.es/zh)"},{name:"水平垂直居中.md",path:"/BasicSkill/css/水平垂直居中.md",type:"file",mdconf:{abbrlink:"468zxcwa"},birthtime:"2022-01-16",mtime:"2022-01-16",size:966,extension:".md",relative:"/BasicSkill/css/水平垂直居中.md",isEmpty:!1,content:'\x3c!--abbrlink:468zxcwa--\x3e###flex+margin:auto父节点使用`display:flex`,子节点使用`margin:auto````html<style>.flex{display:flex;width:300px;height:300px;background:#ccc;margin-bottom:5px;}.flexp{margin:auto;}</style><divclass="flex"><p>content</p></div>```###flex结合justify-content、align-items```html<style>.flex2{display:flex;width:300px;height:300px;background:#ccc;align-items:center;justify-content:center;margin-bottom:5px;}</style><divclass="flex2"><p>content</p></div>```###绝对定位+相对定位```html<style>.position{position:relative;width:300px;height:300px;background:#ccc;}.positionp{position:absolute;top:50%;left:50%;transform:translateX(-50%)translateY(-50%);}</style><divclass="position"><p>content</p></div>```'},{name:"水平布局解决方案.md",path:"/BasicSkill/css/水平布局解决方案.md",type:"file",mdconf:{abbrlink:"mf7g91hg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4501,extension:".md",relative:"/BasicSkill/css/水平布局解决方案.md",isEmpty:!1,content:'\x3c!--abbrlink:mf7g91hg--\x3e###场景场景:假设高度已知,请写出三栏布局,其中左、右栏宽度各为300px,中间自适应。本文针对这种场景罗列出以下几种方案。###float布局```html<body><style>.left{float:left;background:red;width:300px;}.middle{background:purple;}.right{float:right;background:green;width:300px;}</style><divclass="left">floatlayout</div><divclass="right">floatlayout</div><divclass="middle">floatlayout</div></body>```>float布局要注意`class="middle"`这行书写的位置###position布局```html<body><style>.left{background:red;position:absolute;left:0;width:300px;}.middle{position:absolute;left:300px;right:300px;background:purple;}.right{background:green;position:absolute;right:0;width:300px;}</style><divclass="left">positionlayout</div><divclass="middle">positionlayout</div><divclass="right">positionlayout</div></body>```###flex布局```html<style>.flexbox{display:flex;}.left{background:red;width:300px;}.middle{flex:1;background:purple;}.right{background:green;width:300px;}</style><sectionclass="flexbox"><divclass="left">flexlayout</div><divclass="middle">flexlayout</div><divclass="right">flexlayout</div></section>```>flex布局是兼容性较好的布局###grid布局```html<body><style>.gridbox{display:grid;grid-template-columns:300pxauto300px;}.left{background:red;}.middle{background:purple;}.right{background:green;}</style><sectionclass="gridbox"><divclass="left">gridlayout</div><divclass="middle">gridlayout</div><divclass="right">gridlayout</div></section></body>```>使用grid目前记住`columns-template-rows`和`columns-template-columns`###table布局```html<body><style>.tablebox{display:table;width:100%;}.left{display:table-cell;background:red;width:300px;}.middle{display:table-cell;background:purple;}.right{display:table-cell;background:green;width:300px;}</style><sectionclass="tablebox"><divclass="left">tablelayout</div><divclass="middle">tablelayout</div><divclass="right">tablelayout</div></section></body>```>table布局也是和flex布局一样兼容性较高的方案###其它解决方案针对两边宽度固定,中间宽度自适应还有以下两种方案:####圣杯布局核心思想:将内容两边宽度提前空出来,然后将块级元素进行移动`填补`。```html<body><style>.bd{padding:0200px0200px;}.main{float:left;width:100%;height:200px;background-color:#ddd;}.left{float:left;width:200px;height:200px;background-color:#da4242;/*产生布局效果的属性*/margin-left:-100%;position:relative;left:-200px;}.right{float:left;width:200px;height:200px;background-color:#4ddef1;/*产生布局效果的属性*/margin-left:-200px;position:relative;left:200px;}</style><divclass="bd"><divclass="main">main</div><divclass="left">left</div><divclass="right">right</div></div></body>```####双飞翼布局核心思想:将内容宽度占满父容器,然后将块级元素进行移动`覆盖`。```html<body><style>.main{float:left;width:100%;height:200px;background-color:#ddd;}.left{float:left;width:200px;height:200px;background-color:#da4242;/*产生布局效果的属性*/margin-left:-100%;}.right{float:left;width:200px;height:200px;background-color:#4ddef1;/*产生布局效果的属性*/margin-left:-200px;}</style><divclass="main"></div><divclass="left">left</div><divclass="right">right</div></body>```'},{name:"竖直布局解决方案.md",path:"/BasicSkill/css/竖直布局解决方案.md",type:"file",mdconf:{abbrlink:"p67qhttd"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2343,extension:".md",relative:"/BasicSkill/css/竖直布局解决方案.md",isEmpty:!1,content:'\x3c!--abbrlink:p67qhttd--\x3e>本文是水平布局解决方案的姊妹篇###题目题目:假设宽度已知,请写出三栏布局,其中上、下栏高度各为`100`px,中间自适应。###position布局```html<body><style>html,body,.box{height:100%;}.box{position:relative;}.head{position:absolute;width:100%;top:0;height:100px;background:red;}.middle{position:absolute;width:100%;top:100px;bottom:100px;background:yellow;}.bottom{position:absolute;width:100%;bottom:0;height:100px;background:red}</style><divclass="box"><sectionclass="head"></section><sectionclass="middle"></section><sectionclass="bottom"></section></div></body>```###flex布局```html<body><style>html,body,.box{height:100%;}.box{display:flex;flex-direction:column;height:100%;}.head{height:100px;background:red;}.middle{flex:1;background:yellow;}.bottom{height:100px;background:red}</style><divclass="box"><sectionclass="head"></section><sectionclass="middle"></section><sectionclass="bottom"></section></div></body>```###grid布局```html<body><style>html,body,.box{height:100%;}.box{display:grid;grid-template-columns:100%;grid-template-rows:100pxauto100px;}.head{height:100px;background:red;}.middle{bottom:100px;background:yellow;}.bottom{height:100px;background:red}</style><divclass="box"><sectionclass="head"></section><sectionclass="middle"></section><sectionclass="bottom"></section></div></body>```###table布局```html<body><style>html,body,.box{height:100%;width:100%;}.box{display:table;}.head{display:table-row;width:100%;height:100px;background:red;}.middle{display:table-row;width:100%;background:yellow;}.bottom{display:table-row;width:100%;height:100px;background:red}</style><divclass="box"><sectionclass="head">123</section><sectionclass="middle">456</section><sectionclass="bottom">789</section></div></body>```'},{name:"聊聊BFC.md",path:"/BasicSkill/css/聊聊BFC.md",type:"file",mdconf:{abbrlink:"5wjknen4"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3191,extension:".md",relative:"/BasicSkill/css/聊聊BFC.md",isEmpty:!1,content:'\x3c!--abbrlink:5wjknen4--\x3e###BFC含义块级格式化上下文(BlockFormattingContext)###BFC特性*同一个BFC内元素外边距会发生重合(见案例一)*BFC内可以有浮动元素(见案例二)*BFC内可以分离浮动元素(见案例三)####案例一```html<style>div{width:100px;height:100px;background-color:red;margin:100px;}</style><body><div></div><div></div></body>```![](http://with.muyunyun.cn/4e86e658780009017a22bbb025043276.jpg-300)可以看到此时两个div之间的间距并不是200px,而是100px此时可以在父节点加上`overflow:hidden`使其变为BFC元素,从而避免重叠。```html<style>div{overflow:hidden;}p{width:100px;height:100px;background-color:red;margin:100px;}</style><body><div><p></p></div><div><p></p></div></body>```![](http://with.muyunyun.cn/ffa04ee49e9b4d221361929324236c05.jpg-300)此时,可以看到两个div之间的距离已变为期望的200px；####案例二```html<style>.border{border:1pxsolid#000;}.content{width:100px;height:100px;background-color:red;float:left;}</style><body><divclass="border"><pclass="content"></p></div></body>```子节点加上`float:left`后,其脱离了文档流,所以只看到一条1px的线条,如下:![](http://with.muyunyun.cn/6b657c7f8d985992c97269fb61bb8678.jpg-300)此时在父节点中加上`overflow:hidden`使其变为BFC元素从而消除浮动,代码如下:```html<style>.border{border:1pxsolid#000;overflow:hidden;//在此处加上overflow:hidden;可以消除浮动}.content{width:100px;height:100px;background-color:#ff0000;float:left;}</style><body><divclass="border"><pclass="content"></p></div></body>```![](http://with.muyunyun.cn/6bde303c9e6c57a7d1ce73543d4c8dcc.jpg-300)####案例三```html<style>.content1{width:100px;height:100px;background-color:red;float:left;}.content2{width:200px;height:200px;background-color:green;}</style><body><divclass="content1"></div><divclass="content2"></div></body>```相邻节点中的一个节点使用`float:left`,其脱离文档流,从而两个div标签发生了重叠,![](http://with.muyunyun.cn/c7ebcfce5a7c58142fc9004a7d545852.jpg-300)此时在普通流节点上使用`overflow:hidden`使其变为BFC元素从而使BFC元素和浮动元素分离:```html<style>.content1{width:100px;height:100px;background-color:red;float:left;}.content2{width:200px;height:200px;background-color:green;overflow:hidden;}</style><body><divclass="content1"></div><divclass="content2"></div></body>```![](http://with.muyunyun.cn/cb83333e3e31f59d4946e0d3cdd2a56a.jpg-300)###如何触发BFC```*overflow:不为visible;*position:不为static以及relative;*float:不为none;*display:为inline-box、table-ceil、flex;```'}],type:"directory",size:36999},{name:"db",path:"/BasicSkill/db",children:[{name:"concepts.md",path:"/BasicSkill/db/concepts.md",type:"file",mdconf:{abbrlink:"7xl39wal"},birthtime:"2022-01-16",mtime:"2022-01-16",size:888,extension:".md",relative:"/BasicSkill/db/concepts.md",isEmpty:!1,content:"\x3c!--abbrlink:7xl39wal--\x3e###DDL与DML*数据定义语言(DDL):DataDefinitionLanguage```js1.CREATE-tocreateobjectsinthedatabase2.ALTER-altersthestructureofthedatabase3.DROP-deleteobjectsfromthedatabase4.TRUNCATE-removeallrecordsfromatable,includingallspacesallocatedfortherecordsareremoved5.COMMENT-addcommentstothedatadictionary6.RENAME-renameanobject```*数据操纵语言(DML):DataManipulationLanguage```js1.SELECT-retrievedatafromtheadatabase2.INSERT-insertdataintoatableUPDATE-updatesexistingdatawithinatable3.DELETE-deletesallrecordsfromatable,thespacefortherecordsremain4.MERGE-UPSERToperation(insertorupdate)5.CALL-callaPL/SQLorJavasubprogram6.EXPLAINPLAN-explainaccesspathtodata7.LOCKTABLE-controlconcurrency```"},{name:"kibana.md",path:"/BasicSkill/db/kibana.md",type:"file",mdconf:{abbrlink:"tm5s78cm"},birthtime:"2022-01-16",mtime:"2022-01-16",size:644,extension:".md",relative:"/BasicSkill/db/kibana.md",isEmpty:!1,content:"\x3c!--abbrlink:tm5s78cm--\x3e###Kibana用户手册*`搜索数据`*直接输入文本字符串来进行简单文本搜索。`eg:safari`*根据key:value进行搜索。`eg:error_msg:200`*可以通过中括号指定范围搜索，[START_VALUETOEND_VALUE]。`error_msg:[200TO499]`*您可以通过布尔操作符AND、OR和NOT来指定更多的搜索条件。例如，搜索状态为4xx而且扩展名为php或html的条目，您可以输入`error_msg:[200TO499]AND(extension:phpORextension:html)`。*可视化*[创建可视化视图](https://www.elastic.co/guide/cn/kibana/current/createvis.html)"},{name:"mysql.md",path:"/BasicSkill/db/mysql.md",type:"file",mdconf:{abbrlink:"tc8dauos"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6307,extension:".md",relative:"/BasicSkill/db/mysql.md",isEmpty:!1,content:"\x3c!--abbrlink:tc8dauos--\x3e###关系型数据库使用多个表格管理的数据库。###创建数据库```jsCREATEDATABASE数据库名;```###删除数据库```jsDROPDATABASE数据库名;```###数据库类型数据库类型分为数字类型、时间类型、字符串类型。|类型|用途|格式||:---------:|:--------------:|:----------:||INT(INEGER)|大整数值|||FLOAT|单精度|||DATE|日期值|'YYYY-MM-DD'||TIME|时间值或持续时间|'HH:MM:SS'||YEAR|年份值|'YYYY'||DATETIME|混合日期和时间值|'YYYY-MM-DD'||VARCHAR|变长字符串||###创建数据表```jsCREATETABLEtable_name(column_namecolumn_type);```###删除数据表```jsDROPTABLEtable_name;```###插入数据```jsINSERTINTOtable_name(field1,field2,...fieldN)VALUES(value1,value2,...valueN)```###查询数据```jsSELECTfield1,field2FROMtable_name1,table_name2[WHEREcondition1[AND[OR]]condition2[GROUPBY][HAVING][ORDERBY][LIMITN][OFFSETM]```*`FROM`:可以从多个table中进行查询*`WHERE`*WHERE相当于编程语言中的if。*可以使用在SELECT、UPDATE、DELETE语句中。*可以使用AND或者OR指定一个或多个条件。*操作符有`=`、`>`、`<`、`>=`、`<=`、`!=or<>`、`ISNULL`、`ISNOTNULL`*`Like`:类似于`=`,SQL提供了四种匹配方式。*`%`:表示任意0个或多个字符。可匹配任意类型和长度的字符,有些情况下若是中文,请使用两个百分号（%%）表示。*eg:查询包含javascript字段的信息:`SELECT*FROMpositionWHEREnameLIKE'%java%';`*`_`:表示任意单个字符。匹配单个任意字符,它常用来限制表达式的字符长度语句。*[]:表示括号内所列字符中的一个（类似正则表达式）。指定一个字符、字符串或范围,要求所匹配对象为它们中的任一个。*[^]:表示不在括号所列之内的单个字符。其取值和[]相同,但它要求所匹配对象为指定字符以外的任一个字符。查询内容包含通配符时,由于通配符的缘故,导致我们查询特殊字符“%”、“_”、“[”的语句无法正常实现,而把特殊字符用“[]”括起便可正常查询。*`REGEXP`:可以使用正则进行筛选。*eg:`SELECTnameFROMperson_tblWHEREnameREGEXP'^st';`*`GROUPBY`:对SELECT查询出来的结果集按照某个字段或者表达式进行分组，获得一组组的集合。*`WITHROLLUP`:可以实现在分组统计数据基础上再进行相同的统计(SUM,AVG,COUNT等)。*![](http://with.muyunyun.cn/1d8a95a812f6ffc91d6f5a357fe9755c.jpg)*`coalesce`:针对上图null处,可以使用coalesce(a,b,c)语法,其等价于JavaScript中`a||b||c||null`*![](http://with.muyunyun.cn/8530fc78779c7024f41053a51c160196.jpg)*`HAVING`:用于对WHERE和GROUPBY查询出来的分组经行过滤，查出满足条件的分组结果。(场景使用存疑:后续有场景进行补充)*`ORDERBY`:*可设置多个字段来排序:`ORDERBYfield1[ASC[DESC][默认ASC]],[field2...][ASC[DESC][默认ASC]]`;*可设置`ASD`(ascending)或`DESD`(descending)来表示升序或降序,默认ascending。*拼音场景:如果字符集采用的是utf8(万国码)而非gbk，需要先对字段进行转为gbk码然后排序:*`ORDERBYCONVERT(titleusinggbk);`*`LIMIT`:可以设置查询返回条数*`OFFSET`:可以设置起始查询条数*`limitN,M`:相当于LIMITMOFFSETN,从第N条记录开始,返回M条记录###UPDATE```jsUPDATEtable_nameSETfield1=new-value1,field2=new-value2[WHERECLAUSE]```###DELETE```jsDELETEFROMtable_name[WHERECLAUSE]```###UNIONUNION操作符用于连接两个以上的SELECT语句的结果组合到一个结果集合中。```jsSELECTfield1,field2FROMtable_name1,table_name2[WHEREcondition1[AND[OR]]condition2UNION[ALL|DISTINCT]```*`DISTINCT`:默认值,表示多个SELECT语句会删除重复的数据。*`All`:表示多个SELECT语句不会删除重复的数据。###连接的使用真正的应用中经常需要从多个数据表中读取数据。此时可以使用JOIN在两个或多个表中读取数据。*INNERJOIN(内连接)*![](http://with.muyunyun.cn/b6fb7c5a37b37586b7c36f7b524294bd.jpg)*`SELECTfield1,field2FROMtable_name1INNERJOINtable_name2ONcondition;`*LEFTJOIN(左连接)*![](http://with.muyunyun.cn/52e7cfa17e2c2ff5983a2ba3c6f3eb8e.jpg)*`SELECTfield1,field2FROMtable_name1LEFTJOINttable_name2ONcondition;`*RIGHTJOIN(右连接)*![](http://with.muyunyun.cn/d79d96273e72c6c308ba8744b507f562.jpg)*`SELECTfield1,field2FROMtable_name1RIGHTJOINtable_name2ONcondition;`###事务事务主要用于处理操作量大，复杂度高的数据。笔者认为事务就像数据库语句中引入git操作。*MySQL中使用了Innodb引擎的数据库或表支持事务;*事务用来管理insert、update、delete语句;MYSQL事务控制语句*BEGIN:开始一个事务*ROLLBACK:事务回滚*COMMIT:事务确认###ALTER修改表名或者修改表字段就要使用ALTER命令。*删除表字段*DROP:`ALTERTABLEtestalter_tblDROPi;`*添加表字段*ADD:`ALTERTABLEtestalter_tblADDiINT;`*修改表字段类型及名称*MODIFY:`altertabletableNamemodifyname1type1first|aftername2;`*name1为想要修改的字段*type1为该字段原来类型*first与after二选一,first放在第一位,after放在name2字段后面*CHANGE:`ALTERTABLEtestalter_tblCHANGEijBIGINT;`*将i字段重命名为j字段###索引空间换时间。使用索引可以加快数据库内部找寻数据的速度。*创建索引*`CREATEINDEXindexNameONtable_name(column_name)`*删除索引*`DROPINDEX[indexName]ONmytable;`###SQL注入线上应用应该注意防范SQL注入。"}],type:"directory",size:7839},{name:"efficiency",path:"/BasicSkill/efficiency",children:[{name:"MindNode思维导图.md",path:"/BasicSkill/efficiency/MindNode思维导图.md",type:"file",mdconf:{abbrlink:"ca2yliw2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:123,extension:".md",relative:"/BasicSkill/efficiency/MindNode思维导图.md",isEmpty:!1,content:"\x3c!--abbrlink:ca2yliw2--\x3e###MindNode快捷键整理`shift`+`enter`:创建新节点`cmd+0`:移到屏幕中央"},{name:"alfred_workflow.md",path:"/BasicSkill/efficiency/alfred_workflow.md",type:"file",mdconf:{abbrlink:"5brmoiek"},birthtime:"2022-01-16",mtime:"2022-01-16",size:782,extension:".md",relative:"/BasicSkill/efficiency/alfred_workflow.md",isEmpty:!1,content:"\x3c!--abbrlink:5brmoiek--\x3e###演讲一:alfredworkflow是什么可定制化工具流,能用脚本(node.js、python、php、ruby、perl)提高我们日常效率，比如个人比较常用的有以下几种——查文档，查单词，查npm包,上传图床快捷操作等等。归纳下可以完成以下几类操作*查询信息并可以跳转到相应界面(npm、豆瓣、yd、canIUse)*监听键盘按键完成特定事件(yd)*和mac上的软件进行联动(dash、ip)*手机和mac的远端通信###演讲二:一些实用的插件演示一些常用的软件>一些有用传插件可查看[alfred-workflows](https://github.com/willfarrell/alfred-workflows)###实用快捷键`shift+cmd+c`:找寻近期复制到剪切板中的内容。"},{name:"apple",path:"/BasicSkill/efficiency/apple",children:[{name:"apple_skill.md",path:"/BasicSkill/efficiency/apple/apple_skill.md",type:"file",mdconf:{abbrlink:"1vso6n27"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2102,extension:".md",relative:"/BasicSkill/efficiency/apple/apple_skill.md",isEmpty:!1,content:'\x3c!--abbrlink:1vso6n27--\x3e###Mac####mac快捷键*`shift+cmd+5`:截屏/录屏幕*`cmd+tab`:应用切换*`ctrl+cmd+空格`:表情输入*`alt+cmd+v`:图床*`shift+cmd+c`:复制过的内容####管理iphone的图库痛点:照片越来越多,占用icloud体积1.连接iphone和Mac,在Mac上使用Photos这个软件将iphone的照片都导入Library,勾选iphone中导入的图片自动删除;2.在Mac端将喜欢的照片打星,然后右键点击favourite里的图片create到一个新文件;3.可以右键点击Share/Airdrop将最终筛选好的图片传回iphone;####邮箱加密```bashechoxxx|base64```得到bXVqdWVAcGluZHVvZHVvLmNvbQo=```bashechobXVqdWVAcGluZHVvZHVvLmNvbQo=|base64-D```####网易云音乐迁移到applemusic使用TuneMyMusic导入。1.打开https://yyrcd.com/2018/11/14/n2s-zh/,填入网易云歌单的ID。假如歌单地址是https://music.163.com/#/playlist?id=2651036663,那么便填写2651036663;2.接下来点击Search,会显示歌单列表,然后复制生成的文字版歌单。导出歌单后，打开[TuneMyMusic](https://www.tunemymusic.com/zh-cn/);3.导入来源选择从文本,目的地选择AppleMusic即可;####ForeignBooksResource首先支持正版图书,但是在预算有限的情况下安利下[LibraryGenesis](https://librarygenesis.net/),亲测能获取各类外文图书资源。####app*MarginNote3:PDFResourceReader*Eudic:dictianary;####1password快捷键*cmd+\\:网页上使用自动填充/其它地方使用直接打开网页+填充登入疑问点:转换密码项到登录项>[1PasswordforMac使用指南](https://sspai.com/post/35195)###applepencel*Markupascreenshot###ipad/iphone*shortcuts:具有创造力的一个功能点;###输出当前项目目录结构```jstree-L3-I"node_modules"```###注册美区AppleID账号名(美区):muyy95@gmail.com账户名(国区):328375795@qq.com>[注册美区AppleID](https://zhuanlan.zhihu.com/p/36574047)'},{name:"ipad.md",path:"/BasicSkill/efficiency/apple/ipad.md",type:"file",mdconf:{abbrlink:"m2y2fm2p"},birthtime:"2022-01-16",mtime:"2022-01-16",size:158,extension:".md",relative:"/BasicSkill/efficiency/apple/ipad.md",isEmpty:!1,content:"\x3c!--abbrlink:m2y2fm2p--\x3e###ipad*[为什么我推荐用iPad来记手写笔记？iPad手写笔记良心指南](https://post.smzdm.com/p/ar07q09g/);"},{name:"mac",path:"/BasicSkill/efficiency/apple/mac",children:[{name:"disassembly.md",path:"/BasicSkill/efficiency/apple/mac/disassembly.md",type:"file",mdconf:{abbrlink:"byf1gwh1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:943,extension:".md",relative:"/BasicSkill/efficiency/apple/mac/disassembly.md",isEmpty:!1,content:"\x3c!--abbrlink:byf1gwh1--\x3e###背景外接显示屏变卡,影响编程效率。###策略*查询[mac外接显示器卡成狗](https://www.v2ex.com/t/359003)*重置SMC*经验证无效果。*换HDMI线*判定不靠谱。*清灰&涂硅脂。###清灰&涂硅脂过程记录*清灰前*![](http://with.muyunyun.cn/36cde335f7451943a1f932b162338a24.jpg)*清灰中*![](http://with.muyunyun.cn/84704b6eae637593b873397c699f3dcf.jpg)*涂硅脂*![](http://with.muyunyun.cn/5a23f3695611c536e1e8550f3e80817b.jpg)*参考资料*[MacbookPro2015款15寸拆机清灰步骤，详细教程+照片](https://www.feng.com/post/11459339)*[MacbookProRetina15'A1398（2013年末，i7，GT750M）拆卸、清洁、重新组装](https://www.bilibili.com/video/BV1mt4y197L5?p=1&share_medium=iphone&share_plat=ios&share_source=WEIXIN&share_tag=s_i&timestamp=1627138586&unique_k=KsvsAH)"},{name:"env.md",path:"/BasicSkill/efficiency/apple/mac/env.md",type:"file",mdconf:{abbrlink:"mddcenfz"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1552,extension:".md",relative:"/BasicSkill/efficiency/apple/mac/env.md",isEmpty:!1,content:'\x3c!--abbrlink:mddcenfz--\x3e###执行brewinstall命令长时间卡在UpdatingHomebrew的解决方法执行brew命令安装软件的时候，跟以下3个仓库地址有关：1.brew.git```bash#替换成阿里巴巴的brew.git仓库地址:cd"$(brew--repo)"gitremoteset-urloriginhttps://mirrors.aliyun.com/homebrew/brew.git#=======================================================#还原为官方提供的brew.git仓库地址cd"$(brew--repo)"gitremoteset-urloriginhttps://github.com/Homebrew/brew.git```2.homebrew-core.git```bash#替换成阿里巴巴的homebrew-core.git仓库地址:cd"$(brew--repo)/Library/Taps/homebrew/homebrew-core"gitremoteset-urloriginhttps://mirrors.aliyun.com/homebrew/homebrew-core.git#=======================================================#还原为官方提供的homebrew-core.git仓库地址cd"$(brew--repo)/Library/Taps/homebrew/homebrew-core"gitremoteset-urloriginhttps://github.com/Homebrew/homebrew-core.git```3.homebrew-bottles```js#替换成阿里巴巴的homebrew-bottles访问地址:echo\'exportHOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles\'>>~/.zshrcsource~/.zshrc#=======================================================#还原为官方提供的homebrew-bottles访问地址vi~/.zshrc#然后，删除HOMEBREW_BOTTLE_DOMAIN这一行配置source~/.zshrc```>see[执行brewinstall命令长时间卡在UpdatingHomebrew的解决方法](https://learnku.com/articles/18908)'},{name:"migrate.md",path:"/BasicSkill/efficiency/apple/mac/migrate.md",type:"file",mdconf:{abbrlink:"be6usutl"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1025,extension:".md",relative:"/BasicSkill/efficiency/apple/mac/migrate.md",isEmpty:!1,content:"\x3c!--abbrlink:be6usutl--\x3e##Mac快速迁移方案###同步vscode配置多端设备之间同步Vscode配置。*上传端*cmd+shift+p后输入`Sync:AdvancedOptions`->opensettings*输入相关字段解释:*`GistID`:以笔者的gisturl为例，https://gist.github.com/MuYunyun/fc7a4a0269a459785782797ff83e65a1，gistid为fc7a4a0269a459785782797ff83e65a1。*`AccessToken`:位于github中，路径为Settings/Developersettings/Personalaccesstokens。*UploadKey:shift+alt+u。*使用*DownloadKey:shift+alt+d。>[VisualStudioCodeSettingsSynchronization](http://shanalikhan.github.io/2015/12/15/Visual-Studio-Code-Sync-Settings.html)，该插件与LanguageSupportforjava插件会产生冲突，使用时候先disableLanguageSupportforjava插件。###chrome插件*Infinity标签支持备份数据###TimeMachine*使用移动硬盘备份数据*[Mac分区](https://www.zhihu.com/question/37544123/answer/125566154)"}],type:"directory",size:3520},{name:"software.md",path:"/BasicSkill/efficiency/apple/software.md",type:"file",mdconf:{abbrlink:"i3ywrvsg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:349,extension:".md",relative:"/BasicSkill/efficiency/apple/software.md",isEmpty:!1,content:"\x3c!--abbrlink:i3ywrvsg--\x3e本文档收集整理苹果各设备中好用的软件。###Mac*[timetreeapp.com](https://timetreeapp.com/):多人共享日历###Iphone###Ipad*[duet](https://zh.duetdisplay.com/pro):分屏,16前mac使用SideCar功能;*[Typeeto]:useonekeyboardtooperateeverydevice(Macbook、ipad、iphone);"},{name:"watch.md",path:"/BasicSkill/efficiency/apple/watch.md",type:"file",mdconf:{abbrlink:"xvy8k5bx"},birthtime:"2022-01-16",mtime:"2022-01-16",size:195,extension:".md",relative:"/BasicSkill/efficiency/apple/watch.md",isEmpty:!1,content:"\x3c!--abbrlink:xvy8k5bx--\x3e###smallskill*将手掌覆盖在AppleWatch的屏幕上时,屏幕会被熄灭。*找手机。*遥控拍照。*开车接电话。*(todo)乘坐地铁。"}],type:"directory",size:6324},{name:"data_analyze.md",path:"/BasicSkill/efficiency/data_analyze.md",type:"file",mdconf:{abbrlink:"ziao6mzy"},birthtime:"2022-01-16",mtime:"2022-01-16",size:65,extension:".md",relative:"/BasicSkill/efficiency/data_analyze.md",isEmpty:!1,content:"\x3c!--abbrlink:ziao6mzy--\x3e*PV:PAGEVIEW*UV:UniqueVisitor"},{name:"draw.md",path:"/BasicSkill/efficiency/draw.md",type:"file",mdconf:{abbrlink:"jascm1az"},birthtime:"2022-01-16",mtime:"2022-01-16",size:177,extension:".md",relative:"/BasicSkill/efficiency/draw.md",isEmpty:!1,content:"\x3c!--abbrlink:jascm1az--\x3e###画图工具*[灵魂画图](https://excalidraw.com/)*[流程图](https://app.diagrams.net/)*[数学画图](https://www.mathway.com/Graph)"},{name:"github.md",path:"/BasicSkill/efficiency/github.md",type:"file",mdconf:{abbrlink:"zi379j1j"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1731,extension:".md",relative:"/BasicSkill/efficiency/github.md",isEmpty:!1,content:"\x3c!--abbrlink:zi379j1j--\x3e###chromeplugin*[gitzip](https://chrome.google.com/webstore/detail/gitzip-for-github/ffabmkklhbepgcgfonabamgnfafbdlkn):quickdownloadonedetailedfile###usefulwebsetsThispagewillcollectsomeusefulwebsets.*[ssfreeaccount](https://github.com/Alvin9999/new-pac/wiki/ss%E5%85%8D%E8%B4%B9%E8%B4%A6%E5%8F%B7)*[v2rayfreeaccount](https://github.com/Alvin9999/new-pac/wiki/v2ray%E5%85%8D%E8%B4%B9%E8%B4%A6%E5%8F%B7)*[awesome-github-profile-readme](https://github.com/abhisheknaiidu/awesome-github-profile-readme)###probot*[probot](https://probot.github.io/apps/)*[Auto-comment](https://probot.github.io/apps/auto-comment/)*[pull](https://probot.github.io/apps/pull/)*![](http://with.muyunyun.cn/a6745efdee034049cea71c2b2d52b998.jpg)*[delete-merged-branch](https://github.com/svanboxel/delete-merged-branch)*[stale](https://probot.github.io/apps/stale/):use###skils*[GithubHost](https://github.com/ButterAndButterfly/GithubHost)*原理:[解决Github网页上图片显示失败的问题](https://blog.csdn.net/qq_38232598/article/details/91346392)>待验证:[GitHub无法访问、443Operationtimedout的解决办法](https://juejin.cn/post/6844904193170341896)###修改host文件```sudovi/etc/hosts```>github访问慢一般可以修改该目录。[方法](https://zhuanlan.zhihu.com/p/94521827),经验证该方法同样适用于gitpush推不上的case###FAQQ:remote:SupportforpasswordauthenticationwasremovedonAugust13,2021.Pleaseuseapersonalaccesstokeninstead.A:https://stackoverflow.com/questions/68775869/support-for-password-authentication-was-removed-please-use-a-personal-access-to"},{name:"how-to-improve-english.md",path:"/BasicSkill/efficiency/how-to-improve-english.md",type:"file",mdconf:{abbrlink:"2rqkvb3y"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5073,extension:".md",relative:"/BasicSkill/efficiency/how-to-improve-english.md",isEmpty:!1,content:"\x3c!--abbrlink:2rqkvb3y--\x3e>目标:可以观看英文视频，提高阅读英文文章的效率![](http://with.muyunyun.cn/02b02b787e23b6233d63a2fbf798d1a0.jpg)*1000单词能理解75%内容。*7000单词是一个分水岭,能理解90%内容。>超量输入:通过背诵大量的单词并快速复习，遗忘率虽然相对于定量背诵高，但是可以以量取胜。比如:一天背20个词，一个月能背600个，假设形成长期记忆的占80%，那最后能记住的便是480个。但是如果我用相同时间，每天快速看100个词，一个月能看3000个。假设能记住30%，最后能记住900个，远远大于第一种方式。适用于在1000~7000词汇量这个学习阶段。*[单词篇](https://byoungd.gitbook.io/english-level-up-tips/part-i/2-vocabulary)云单词本*当前阶段,适合超量学习。*[听力篇](https://byoungd.gitbook.io/english-level-up-tips/part-i/3-listening)*多选一:确认VOA、BBC、各种Podcast*误区:很多人一开始就尝试VOA，这是不推荐的；即使是VOA慢速英语，你也会遇到生词太多导致卡住、丧失继续听下去的兴趣的情况；有些喜欢钻牛角尖的同学会问：听一遍没听懂，那我听10遍呢？事实上如果你不去通过听力材料提供的文本将生词这关先过了，听100遍也是收效甚微的。这与我们提倡的高效学习相悖。英美剧对初学者来说就更不是`友好`的学习材料，根据自己的词汇量选择合适的听力材料，一步步来，循序渐进。*精听:*《新概念英语》第三册和第四册*泛听*电视剧*老友记、摩登家庭*电影*《怦然心动》-《教父》-《机器人总动员》-《控方证人》-《桃色公寓》*Podcast和带lrc的美剧录音比纯看美剧要少很多干扰，在同时摄入的信息量上减少了视觉信息这部分，学习效果更好。*频道*[EnglishLessons4U-LearnEnglishwithRonnie![engVid]](https://www.youtube.com/c/engvidRonnie/videos):力荐学习英语的基础语法，很多小技巧都挺实用。最最重要的是，Ronnie老师实在是太幽默啦，学习的过程中你会感受到快乐！*[TopMovieClip](https://www.youtube.com/channel/UClVbhSLxwws-KSsPKz135bw)漫威超级英雄电影精彩剪辑，很养眼。*[BestClips4](https://www.youtube.com/channel/UC8BQGqcCSFq6RC9feEGUGFA)超级英雄电影相关*[DisneyUK](https://www.youtube.com/channel/UCQphRgAhj5UxktrQNP3WF5g):冰雪奇缘主题曲FROZEN的播放量高达10亿!*[SiaVEVO](https://www.youtube.com/channel/UCmKdSrwf1e8coqAzUsrVHZw):个人非常喜欢，视频质量感人，引人深思###连读技巧*[元音连读](https://mp.weixin.qq.com/s?__biz=MzI5ODE3NDQ0OQ==&mid=100000160&idx=1&sn=c7247b9fadb68c91d6338200d13c08d3&scene=19#wechat_redirect),若单词末和单词头是元音标相邻,则再其间加上`/y/`或者`/w/`(哪个顺畅读哪个)*[辅音连读]*[d-you](https://mp.weixin.qq.com/s?__biz=MzI5ODE3NDQ0OQ==&mid=100000166&idx=1&sn=69662dcba92ff228c790eea0f70c591d&scene=19#wechat_redirect):`/d/+/j/`连读为`/dʒ/`,`d-you`的连读音标为`didʒu`,Forexample:woul`dy`ou*[s-you](https://mp.weixin.qq.com/s?__biz=MzI5ODE3NDQ0OQ==&mid=100000175&idx=1&sn=ae7480dc72f5f44d60dab9d2ac73de6b&scene=19#wechat_redirect):辅音`/s/`与`/j/`连读时,被同化为`/∫/`,Forexample:mis`sy`ou、cros`sy`ourmind*[t-you](https://mp.weixin.qq.com/s?__biz=MzI5ODE3NDQ0OQ==&mid=100000252&idx=1&sn=073056ac9cf5880748031cc6b797a53d&scene=19#wechat_redirect):辅音`/t/`与`/j/`连读时，被同化为`/t∫/`,Forexample:ge`ty`ou、withou`ty`ou*[z-you](https://mp.weixin.qq.com/s?__biz=MzI5ODE3NDQ0OQ==&mid=100000271&idx=1&sn=af737ffae12ad46bc522acd38d3d258e&scene=19#wechat_redirect):辅音`/z/`与`/j/`连读时，被同化为`/ʒ/`,Forexample:A`su`sual、Iloveyoubecau`sey`ouareyou.*`wanna`*非正式情景下，wanna常用来代替wantto或wanta.*eg:Iwannahearhimsay*`gonna`*口语中,gonna常常用于代替goingto*Nothing'sgonnachangemyloveforyou.*I'mnotgonnamissyou.*`gotta`*口语中，gotto常常缩写为gotta,和have/hasto意思接近;表示不得不、必须。*`kinda`*在非正式情景中,kindof可以用`kinda`代替。*`'cause/'cos`*在口语中,because常常简略为`'cause/'cos`。*`ain’t`*口语中,是amnot/isnot/arenot/havenot/hasnot/willnot的缩写。-[][learningEnglishthroughlisteningtomusic](http://mp.weixin.qq.com/mp/homepage?__biz=MzI5ODE3NDQ0OQ==&hid=2&sn=9b6dd88b8303196473c2a6c28b995c42&scene=25#wechat_redirect):当前看到第14节###resource-[English-level-up-tips-for-Chinese](https://github.com/byoungd/English-level-up-tips-for-Chinese):github16kstar.-[gitbook](https://byoungd.gitbook.io/english-level-up-tips/)"},{name:"oh-my-zsh.md",path:"/BasicSkill/efficiency/oh-my-zsh.md",type:"file",mdconf:{abbrlink:"lsuxkvce"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1556,extension:".md",relative:"/BasicSkill/efficiency/oh-my-zsh.md",isEmpty:!1,content:"\x3c!--abbrlink:lsuxkvce--\x3e###oh-my-zsh在Unix/Linux的世界里，人机交互的工具就是shell了，由于各个发行版的系统默认shell都是bash，所以bash是最为人所知的。其实还有一款效率远远超过bash的shell，叫做zsh。其实zsh在1990年的时候就出现了，只比bash晚一年，而且zsh在bash的基础上做了很多功能上、性能上的改进。zsh有很多bash所没有的功能，但是zsh的初期配置太过繁琐，流行率一直不高，直到github上[oh-my-zsh](https://github.com/ohmyzsh/ohmyzsh)项目的出现，使大家使用zsh的便捷性大大提高，从macOSCatalina版开始默认使用zsh，使得zsh得到了更加广泛的关注。现在KailLinux也默认是使用zsh。###查看当前shell```bashecho$SHELL#返回:/bin/bash```###安装zshUbuntu:```bashsudoaptinstallzsh```###设置zsh为默认shell```bashsudosusudochsh-s/bin/zshecho$SHELL#返回:/bin/zsh```###安装oh-my-zsh```bashsh-c\"$(wget-O-https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"```###oh-my-zsh常见快捷键*take:创建一个文件夹并进入该文件夹>[oh-my-zsh常见快捷键](https://github.com/robbyrussell/oh-my-zsh/wiki/Cheatsheet)###快捷git命令查阅```bashcat~/.oh-my-zsh/plugins/git/git.plugin.zsh```一些常用命令:```bashga.&gcmsg'..'&gpgst===gitstatusgco===gitcheckoutgcb===gitcheckout-bgb===gitbranch```"},{name:"omniGraffle流程图.md",path:"/BasicSkill/efficiency/omniGraffle流程图.md",type:"file",mdconf:{abbrlink:"o3h6kdg8"},birthtime:"2022-01-16",mtime:"2022-01-16",size:147,extension:".md",relative:"/BasicSkill/efficiency/omniGraffle流程图.md",isEmpty:!1,content:"\x3c!--abbrlink:o3h6kdg8--\x3e###流程图相关操作*cmd+d:复制在图形的4个边都可进行磁性链接:Edit-magnets-position"},{name:"如何进行code-review.md",path:"/BasicSkill/efficiency/如何进行code-review.md",type:"file",mdconf:{abbrlink:"4b2hs2y1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:122,extension:".md",relative:"/BasicSkill/efficiency/如何进行code-review.md",isEmpty:!1,content:"\x3c!--abbrlink:4b2hs2y1--\x3e[如何codereview](https://dev.to/jnschrag/10-lessons-learned-conducting-code-reviews-5di6)"},{name:"沟通的智慧.md",path:"/BasicSkill/efficiency/沟通的智慧.md",type:"file",mdconf:{abbrlink:"cazfwhy6"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1668,extension:".md",relative:"/BasicSkill/efficiency/沟通的智慧.md",isEmpty:!1,content:"\x3c!--abbrlink:cazfwhy6--\x3e###场景组内有两个人,在一堆任务中部分任务是双方都想做的,部分任务是双方都不想做的。这种情况该如何处理？解决方法:一个人分任务,另一个人挑任务。###兵长语录在团队内建立「反馈」机制，通过'做事儿'的方式，逐步形成自己的方法论和节奏。要刻意锻炼划分问题、达成共识的沟通技巧。劝君：莫论阳春白雪，更喜闻下里巴人蹙蹙靡骋，字字斟酌，不若侃侃如也，融融自乐怡然佳句，返璞去饰，贵「真」矣！*盘点`价值`,探索抓手;*目标量化,快速试错;*专项投入,做深做透;*定期复盘,以终为始;####如无必要,勿增实体如何根据团队主要目标制定项目目标呢？其中一个有效方法是：多问几个`为什么`。*xxx解决了项目或团队中遇到的什么问题（`现状分析，基础质量，迭代效率`）？*如果不投入人力研发xxx，会遇到哪些问题（`场景演绎`）？*研讨会开下来，框架使用者反馈如何（`合作方反馈，满意度`）？*有多少团队/平台/业务线/项目可能使用xxx（`调用量`）？他们为什么愿意用，我们如何推广（`影响力`）？*xxx框架有哪些竞品？是否有替代品（`行业价值`）？*一期项目开发的里程碑是什么（`指标与进展`）？做到最终形态项目是怎样的（`「终局观」意识`）？###个人感悟多使用小黄鸭笔记法,就能理出眉目,理逻辑的时候可能觉得浪费时间,但是这往往是解决问题最高效的方法。"},{name:"重构改善既有代码的设计.md",path:"/BasicSkill/efficiency/重构改善既有代码的设计.md",type:"file",mdconf:{abbrlink:"wqq5fekb"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1487,extension:".md",relative:"/BasicSkill/efficiency/重构改善既有代码的设计.md",isEmpty:!1,content:"\x3c!--abbrlink:wqq5fekb--\x3e###重构改善既有代码的设计本文是重构改善既有代码的设计阅读笔记###重构与性能优化*重构:目标是更易理解;(面向人)*性能优化:目标是使程序运行更快;(面向机器)###重构的好处1.帮助快速找到bug2.提高编程速度###重构手段####提炼函数(ExtractFunction)背景:一整段函数不利于阅读;方式:按语义进行重构,将不利于阅读的函数其拆分成小份,并给它们取上恰当的名字以便于阅读;####内联函数(InlineFunction)背景:函数拆得太细,和提炼函数相反的一种重构手段;方式:可以逐行替换;####函数重命名当希望修改的函数名存在大量使用时,可以采用渐进式的做法(旧代码调用旧函数,旧函数调用新函数)对函数重命名:```jsfunctioncircum(radius){return2*Math.PI*radius}``````jsfunctioncircum(radius){returncircumference(radius)}functioncircumference(radius){return2*Math.PI*radius}```>如何给一个function起好名字:先给function写一段注释,再把该注释压缩为函数的名字。####统一访问原则```jsclassTest{a(){return'a'}getb(){return'b'}}vartest=newTest()test.a()//'a'test.b//'b'```推崇`get`的写法,用户调用该类的时候无需关系是字段还是推演计算的值。当前阅读到:拆分阶段。"}],type:"directory",size:19255},{name:"html",path:"/BasicSkill/html",children:[{name:"Know_About_HTML.md",path:"/BasicSkill/html/Know_About_HTML.md",type:"file",mdconf:{abbrlink:"u873wh2i"},birthtime:"2022-01-16",mtime:"2022-01-16",size:805,extension:".md",relative:"/BasicSkill/html/Know_About_HTML.md",isEmpty:!1,content:'\x3c!--abbrlink:u873wh2i--\x3e###ReadingtheHTMLintheMDN![](http://with.muyunyun.cn/6ffc01e7309a9456198b4c3336d23fda.jpg)*Contentcategories;*Permittedcontent;*Tagomission:ifthestartorendtagcanbeomit;*Permittedparents;*PermittedARIAroles;*DOMinterface;###Contentcategories![](http://with.muyunyun.cn/4bd17ab21f9619c48f08f3d6092d1db9.jpg-400)###Question1:Whatistheheightofspan?```html<spanstyle="font-size:16px;line-height:1">hello</span>```From[RulesBetweenBlockElementsAndInlineBlocks](https://web.stanford.edu/class/cs193x/lectures/05/block-inline#height-and-width-of-inline-elements),wecanlearnthat`youcan\'tsetanywith/height/line-heightcsspropertytoinline-element.`Sotheheightofspanisdependeonthedefaultbrowser.'}],type:"directory",size:805},{name:"http",path:"/BasicSkill/http",children:[{name:"cross-domain.md",path:"/BasicSkill/http/cross-domain.md",type:"file",mdconf:{abbrlink:"j7uygw6y"},birthtime:"2022-01-16",mtime:"2022-01-16",size:10555,extension:".md",relative:"/BasicSkill/http/cross-domain.md",isEmpty:!1,content:"\x3c!--abbrlink:j7uygw6y--\x3e###跨域二三事![](http://oqhtscus0.bkt.clouddn.com/62b89b89373dc86916a60efc28bdd15e.jpg-muyy)跨域是日常开发中经常开发中经常会接触到的一个重难点知识，何不总结实践一番，从此心中对之了无牵挂。###同源策略之所以会出现跨域解决方案，是因为同源策略的限制。同源策略规定了如果`两个url的协议、域名、端口中有任何一个不等，就认定它们跨源了`。比如下列表格列出和`http://127.0.0.1:3000`比较的同源检测的结果，>因为跨域的前置条件是两个url,所以跨域一般是针对`客户端场景`。|url|结果|原因||:-------------------------:|:---:|:------:||http://127.0.0.1:3000/index|同源|||https://127.0.0.1:3000|跨源|协议不同||https://localhost:3000|跨源|域名不同||http://127.0.0.1:3001|跨源|端口不同|那跨源有什么后果呢?归纳有三*不能获取Cookie、LocalStorage、IndexedDB;*不能获取dom节点;*不能进行一般的Ajax通信;跨域解决方案的出现就是为了解决以上痛处。###JSONP跨域提到JSONP跨域，不得不先提到`script`标签，和`img`、`iframe`标签类似，这些标签是不受同源策略限制的，JSONP的核心就是通过动态加载script标签来完成对目标url的请求。先来看一段JSONP调用的`Headers`部分，字段如下：```httpRequestURL:http://127.0.0.1:3000/?callback=handleResponseRequestMethod:GETStatusCode:200OKRemoteAddress:127.0.0.1:3000```可以很鲜明地发现在`RequestURL`中有一句`?callback=handleResponse`，这个callback后面跟着的handleResponse即回调函数名（可以任意取），服务端会接收到这个参数然后拼接成形如`handleResponse(JSON)`的形式返还给前端(这也是JSONP==JSONwithpadding的原因吧)，如下图，这时候浏览器就会自动调用我们事先定义好的handleResponse函数。![](http://oqhtscus0.bkt.clouddn.com/3a484a1ca0fbb4be46fed582828c5847.jpg-200)前端代码示例：(源为http://127.0.0.1:3001)```jsfunctionhandleResponse(res){console.log(res)//{text:\"jsonp\"}}constscript=document.createElement('script')script.src='http://127.0.0.1:3000?callback=handleResponse'document.head.appendChild(script)```服务端代码示例：(源为http://127.0.0.1:3000)```jsconstserver=http.createServer((req,res)=>{if(~req.url.indexOf('?callback')){//简单处理JSONP跨域的时候constobj={\"text\":'jsonp',}constcallback=req.url.split('callback=')[1]constjson=JSON.stringify(obj)constbuild=callback+`(${json})`res.end(build)//这里返还给前端的是拼接好的JSON对象}});```可以看出JSONP具有直接访问响应文本的优点，但是要想确认JSONP是否请求失败并不容易，因为script标签的onerror事件还未得到浏览器广泛的支持，此外它仅能支持GET方式调用。###CORS跨域CORS(Cross-OriginResourceSharing)可以理解为加强版的Ajax，也是目前主流的跨域解决方案。它的核心思想即`前端与后端进行Ajax通信时，通过自定义HTTP头部设置从而决定请求或响应是否生效`。比如前端代码(url为http://127.0.0.1:3001)写了段Ajax，代码如下：```jsconstxhr=newXMLHttpRequest()xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status>=200&&xhr.status<300||xhr.status===304){console.log('responseTesx:'+xhr.responseText)}}}xhr.open('get','http://127.0.0.1:3000',true)xhr.send()```因为端口不一致的关系这时候导致不同源了，这时候会在RequestHeaders中发现多了这么一行字段，```httpOrigin:http://127.0.0.1:3001```而且控制台中会报出如下错误:```httpFailedtoloadhttp://127.0.0.1:3000/:Responsetopreflightrequestdoesn'tpassaccesscontrolcheck:No'Access-Control-Allow-Origin'headerispresentontherequestedresource.Origin'http://127.0.0.1:3001'isthereforenotallowedaccess.```这时候就需要在服务端设置字段`Access-Control-Allow-Origin`，它的作用就是设置允许来自什么源的请求，如果值设置为`*`，表明允许来自任意源的请求。服务端代码示例如下：```jshttp.createServer((req,res)=>{res.setHeader('Access-Control-Allow-Origin','http://127.0.0.1:3001')//设置允许来自http://127.0.0.1:3001源的请求})```CORS分为简单请求以及非简单请求。可以这么区分，如果请求方法为`POST`、`GET`、`HEAD`时为简单请求，其它方法如`PUT`、`DELETE`等为非简单请求，如果是非简单请求的话，可以在chrome的Network中看到多了一次`RequestMethod`为`OPTIONS`的请求。如下图:![](http://with.muyunyun.cn/f397ac2c565828f38516c8be2ebc1b4b.jpg-400)可以把这个请求称为预请求，用白话文翻译下，浏览器询问服务器，'服务器大哥，我这次要进行PUT请求，你给我发张通行证呗'，服务器大哥见浏览器小弟这么殷勤，于是给了它发了张通行证，叫作`Access-Control-Allow-Methods:PUT`，接着浏览器就能愉快地进行PUT请求了。服务端代码示例如下：```jshttp.createServer((req,res)=>{res.setHeader('Access-Control-Allow-Origin','http://127.0.0.1:3001')res.setHeader('Access-Control-Allow-Methods','http://127.0.0.1:3001')})```聊完简单请求和非简单请求的区别后，再来看看如何利用CORS实现Cookie的跨域传送，首先在服务器随意设置个Cookie值下发到浏览器，如果非跨域的情况下，浏览器再次请求服务器时就会带上服务器给的Cookie，但是跨域的时候怎么办呢？不卖关子了，需在服务端设置`Access-Control-Allow-Credentials`字段以及在客户端设置`withCredentials`字段，两者缺一不可，代码如下：前端代码示例：(源为http://127.0.0.1:3001)```jsconstxhr=newXMLHttpRequest()...xhr.withCredentials=true//传cookie的时候前端要做的xhr.open('get','http://127.0.0.1:3000',true)xhr.send()```服务端代码示例:(源为http://127.0.0.1:3000)```jsconstserver=http.createServer((req,res)=>{res.setHeader('Access-Control-Allow-Origin','http://127.0.0.1:3001')//必填：接受域的请求res.setHeader('Set-Cookie',['type=muyy'])//下发cookieres.setHeader('Access-Control-Allow-Credentials',true)//②选填：是否允许浏览器传cookie到服务端，只能设置为trueres.end('datefromcors')})```至此介绍了几个比较关键HTTP头在CORS中的实践运用，更为详细的资料可以参阅[Cross-OriginResourceSharing](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)，最后概括下CORS的优缺点，优点是支持所有类型的HTTP方法，缺点是有些老的浏览器不支持CORS。###hash+iframe在文章最开始提到过iframe标签也是不受同源策略限制的标签之一，hash+iframe的跨域核心思想就是，在A源中通过动态改变iframe标签的src的哈希值，在B源中通过`window.onhashchange`来捕获到相应的哈希值。思路不难直接上代码：A页面代码示例(源为http://127.0.0.1:3000)```html<body><iframesrc=\"http://127.0.0.1:3001\"></iframe><script>constiframe=document.getElementsByTagName('iframe')[0]iframe.setAttribute('style','display:none')constobj={data:'hash'}iframe.src=iframe.src+'#'+JSON.stringify(obj)//①关键语句<\/script></body>```B页面代码示例(源为http://127.0.0.1:3001)```jswindow.onhashchange=function(){//①关键语句console.log('来自page2的代码'+window.location.hash)//来自page2的代码#{\"data\":\"hash\"}}```刷新A页面，可以发现在控制台打印了如下字段，至此实现了跨域。```js来自page2的代码#{\"data\":\"hash\"}```这种方式进行跨域优点是支持页面和页面间的通信，缺点也是只支持GET方法和单向的跨域通信。###postMessage为了实现跨文档传送(cross-documentmessaging)，简称XDM。HTML5给出了一个api——postMessage，postMessage()方法接收两个参数：`发送消息`以及`消息接收方所在域的字符串`。代码示例如下:A页面代码示例(源为http://127.0.0.1:3000)```html<body><iframesrc=\"http://127.0.0.1:3001\"></iframe><script>constiframe=document.getElementsByTagName('iframe')[0]iframe.setAttribute('style','display:none')iframe.onload=function(){//此处要等iframe加载完毕，后续代码才会生效iframe.contentWindow.postMessage('asecret','http://127.0.0.1:3001')}<\/script></body>```B页面代码示例(源为http://127.0.0.1:3001)```jswindow.addEventListener('message',function(event){console.log('Frompage1'+event.data)console.log('Frompage1'+event.origin)},false)```刷新A页面，可以发现在控制台打印了如下字段，至此实现了跨域。```Frompage1asecretFrompage1http://127.0.0.1:3000```这种跨域方式优点是是支持页面和页面间的双向通信，缺点也是只能支持GET方法调用。###WebSocketsWebSockets属于HTML5的协议，它的目的是在一个持久连接上建立全双工通信。由于WebSockets采用了自定义协议，所以优点是客户端和服务端发送数据量少，缺点是要额外的服务器。基础的使用方法如下：```jsconstws=newWebSocket('ws://127.0.0.1:3000')ws.onopen=function(){//连接成功建立}ws.onmessage=function(event){//处理数据}ws.onerror=function(){//发生错误时触发，连接中断}ws.onclose=function(){//连接关闭时触发}```当然一般我们会使用封装好WebSockets的第三方库[socket.io](https://github.com/socketio/socket.io)，这里具体就不展开了。###项目地址前文所述五种跨域实践的demo已上传至[cross-domain](https://github.com/MuYunyun/cross-domain)，前端环境基于create-react-app搭建，后端环境用node搭建。当然跨域方式还有一些其他方式的实现，后续酌情慢慢填坑~"},{name:"http.md",path:"/BasicSkill/http/http.md",type:"file",mdconf:{abbrlink:"mx6wr51s"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2347,extension:".md",relative:"/BasicSkill/http/http.md",isEmpty:!1,content:"\x3c!--abbrlink:mx6wr51s--\x3e###HTTP协议主要特点无状态,无连接###HTTP报文组成部分*请求报文:请求行请求头空行请求体*响应报文:响应行响应头空行响应体>请求行里包括请求方法,url,http版本;响应行里包括状态码,http版本,状态说明;###HTTP协议类:POST和GET的区别*Get有长度限制,Post没有*Get请求,倒退按钮是无害的,Post会重新发起请求*Get会主动缓存,Post不会*Get请求通过url传递,Post通过requestbody传递###HTTP状态码>1xx:*101:需要切换协议(使用Websocket开始阶段是http协议,中间切换到WebSocket协议,此时返回的状态码是101表示后续协议还需切换)>2xx:成功状态码>3xx:重定向状态码*301:永久重定向*302:临时重定向*304:notModified(永久重定向中搜索引擎不会保留原有的地址,临时重定向中搜索引擎会保留原有的地址)>4xx:客户端错误状态码*400:BadRequest(错误的请求)*401:Unauthorized(未认证)*403:ForbiddenRequest(拒绝访问)*404:NotFound(未找到)>5xx:服务端错误状态码###HTTP事物时延DNS解析、连接、传输、处理。###HTTP连接管道化连接:依赖于Http/1.1是持久连接的。###强缓存和协商缓存>强缓存是不经过服务器的,协商缓存是经过服务器的*强缓存相关字段(Expires(响应头),Cache-Control(响应头))*协商缓存相关字段(Last-Modified(响应头),If-Modified-Since(请求头),Etag(响应头),If-None-Match(请求头))如下为HTTP缓存机制流程图:![](http://with.muyunyun.cn/7aa47d51ccc2fe5a66f75c542f014f2e.jpg-400)###HTTP2.0*二进制流*多路复用*资源推送优先级###HTTPS客户端和服务端都有自己的公钥和私钥,下面来表述下HTTPS的双向加密建立。1.客户端通知服务端建立请求2.服务端发送公钥3.客户端发送'验证串+服务端公钥'&&客户端公钥4.服务端使用私钥取得验证串与客户端公钥一起发送给客户端5.客户端使用客户端私钥来获取验证串是否匹配####协议解析多了一个`upgrade-insecure-requests`的字段。该字段让页面打开后的请求自动变为`https`。"},{name:"http权威指南.md",path:"/BasicSkill/http/http权威指南.md",type:"file",mdconf:{abbrlink:"25mom817"},birthtime:"2022-01-16",mtime:"2022-01-16",size:58,extension:".md",relative:"/BasicSkill/http/http权威指南.md",isEmpty:!1,content:"\x3c!--abbrlink:25mom817--\x3eToREAD:116*Web服务器"},{name:"浏览器相关知识点.md",path:"/BasicSkill/http/浏览器相关知识点.md",type:"file",mdconf:{abbrlink:"knamutmb"},birthtime:"2022-01-16",mtime:"2022-01-16",size:438,extension:".md",relative:"/BasicSkill/http/浏览器相关知识点.md",isEmpty:!1,content:"\x3c!--abbrlink:knamutmb--\x3e>题目:浏览器从加载页面到渲染页面的过程加载阶段:*dns服务器将域名解析成ip*向这个ip发送http请求*服务器处理返回的相应的http请求*浏览器得到返回的内容渲染阶段:*将HTML渲染成DOM*将CSS渲染成CSSOM*将DOM和CSSOM合并成RenderTree*根据RenderTree开始渲染和展示*遇到script、link会阻塞"},{name:"网络协议.md",path:"/BasicSkill/http/网络协议.md",type:"file",mdconf:{abbrlink:"gmwc6tcx"},birthtime:"2022-01-16",mtime:"2022-01-16",size:639,extension:".md",relative:"/BasicSkill/http/网络协议.md",isEmpty:!1,content:"\x3c!--abbrlink:gmwc6tcx--\x3e###七层协议*应用层:http*表示层:加密*会话层:RPC*传输层:TCP、UDP-----*网络层:IP地址*数据链路层*物理层###TCP特性关于可靠,有以下两点:*按序传输*可以将数据拆分成任意大小的包进行传输###TCP和UDP的区别TCP(TransmissionControlProtocal):传输控制协议UDP(UserDataProtocal):用户数据报协议*TCP是连接的,UDP是无连接的;*TCP对系统资源消耗相对更多,UDP对资源消耗相对较少;*TCP能确保数据的正确性,UDP可能丢包而且包的顺序性也不能保证;"}],type:"directory",size:14037},{name:"life",path:"/BasicSkill/life",children:[{name:"Alexa.md",path:"/BasicSkill/life/Alexa.md",type:"file",mdconf:{abbrlink:"dlr3zqap"},birthtime:"2022-01-16",mtime:"2022-01-16",size:156,extension:".md",relative:"/BasicSkill/life/Alexa.md",isEmpty:!1,content:"\x3c!--abbrlink:dlr3zqap--\x3e###Alexa相关资源*[Alexa站点](https://pitangui.amazon.com/)*[Alexa使用](https://www.jianshu.com/p/a04fb4c4ac62)"},{name:"books",path:"/BasicSkill/life/books",children:[{name:"the_little_prince.md",path:"/BasicSkill/life/books/the_little_prince.md",type:"file",mdconf:{abbrlink:"h6tirwxs"},birthtime:"2022-01-16",mtime:"2022-01-16",size:291,extension:".md",relative:"/BasicSkill/life/books/the_little_prince.md",isEmpty:!1,content:"\x3c!--abbrlink:h6tirwxs--\x3e###TheLittlePrinceI`asktheindulgenceofthechildren`whomayreadthisbookfor`dedicatingitto`agrownup.*dedicate:GIVETIME/ENERGY###I###译文链接*[小王子](https://www.zhihu.com/pub/reader/119964114/chapter/1288857467019948032)"},{name:"the_mythical_man_month.md",path:"/BasicSkill/life/books/the_mythical_man_month.md",type:"file",mdconf:{abbrlink:"sqxxa3d7"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4520,extension:".md",relative:"/BasicSkill/life/books/the_mythical_man_month.md",isEmpty:!1,content:"\x3c!--abbrlink:sqxxa3d7--\x3e###人月神话*焦油坑*程序->编程系统产品`成本x9`*编程产品(通用化、测试、文档、维护)`成本x3`*编程系统(接口系统集成)`成本x3`*编程的乐趣*创建事物的快乐;*开发对其他人有用的东西的乐趣;*组装零部件拼凑成类似迷宫的乐趣;*面对不重复的任务,不断学习的乐趣;*工作在如此易于驾驭的介质上的乐趣——纯粹的思维活动;*固有的苦恼*由其它人设定目标;*笔者的观点:这点其实是可以转移的,增强主管能动性。*任何创造性活动都伴随着枯燥艰苦的劳动;*人们通常期望项目接近结束时,软件项目能收敛得快一些,然而,情况却是越接近完成,收敛得越慢。*产品在完成前总面临着陈旧过时的威胁。*人月神话(`人月是危险和带有欺骗性的神话,因为它暗示人员数量和时间是可以相互替换的`)*`缺乏合理的进度排期`是造成项目滞后的最主要原因。1.错误的假设「一切到将运作良好」。2.错误的假设「人和月可以互换」,即错误的认为开发人数越多,进度越快。3.未给系统测试预留时间。*1⁄3计划*1⁄6编码*1⁄4构件测试和早期系统测试*1⁄4系统测试,所有的构件已完成4.对进度缺少跟踪和监督。5.当意识到进度偏移时,下意识的反应是增加人力。*外科手术队伍*优秀的专业程序员的生产率是较差的程序员的10倍。*一位首席程序员,类似于外科手术队伍的团队架构提供了一种方法:既能获得由少数头脑产生的产品完整性,又能得到多位协助人员的总体生产率,还彻底地减少了沟通的工作量。*贵族专制、民主政治与系统设计*`概念的完整性`是系统设计中最重要的考虑因数。其设计必须由一个人或具有共识的小型团队完成。*功能与理解上的复杂程度的比值(`易用性`)才是系统设计的最终测试标准。*纪律、规则对行业是有益的。外部的体系结构规定实际上是增强,而不是限制实现小组的创造性。*体系结构(architecture)、设计实现(implementation)、物理实现(realization)的许多工作可以并行。*画蛇添足*`尽早交流`与`持续沟通`使结构师有较好的成本意识,同时使开发人员获得对设计的信心。*自律——尤其是在设计第二个系统时。*往往设计第一个系统时会比较谨慎,其中碰见的一些装饰、润色功能往往会被安排至第二个系统中,此时要格外谨慎。*贯彻执行*`形式化地设计定义`保证精确性;`记叙性定义`来加深理解。*周会、年会*为什么巴比伦塔会失败*巴比伦塔项目的失败是因为缺乏交流以及交流的结果——组织。*增加沟通、`交流`频次*非正式地进行`简要技术陈述的常规项目会议`*共享的`正式项目工作手册`*电话、email*组织架构*团队组织的目标是为了减少必要的交流和协作量。*为了减少交流,组织结构包括了`人力划分`和`限定指责范围`。*组织中的交流是网状而不是树状,以克服树状组织结构中交流缺乏的困难。*个人理解:扁平化管理*每个子项目具有两个领导角色——产品负责人、技术主管。(产品负责人和技术主管可以是同个人,但这两个角色的职能有很大的区别)*胸有成竹*程序开发的复杂度随程序规模的而指数增长。*未雨绸缪*系统的丢弃和重新设计可以一步完成,也可以一块块地实现,但这是`必须完成`的步骤。*为舍弃而计划。*干将莫邪*目标机器的使用需求量刚开始非常低,突然出现爆发性的增长,接着趋于平缓。*整体部分*剔除bug的设计*测试规格说明(文档)*`自上而下`的设计(精化步骤)*没有银弹*现代软件系统中无法规避的内在特性*复杂度*保持一致性(导致复杂度)*可变性*不可见性*应对措施*借力(开源、第三方专业产品)*需求精练、`快速原型化`来验证*`增量`开发*识别、培养顶级设计人员"},{name:"关键沟通.md",path:"/BasicSkill/life/books/关键沟通.md",type:"file",mdconf:{abbrlink:"76mqkl2b"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1424,extension:".md",relative:"/BasicSkill/life/books/关键沟通.md",isEmpty:!1,content:"\x3c!--abbrlink:76mqkl2b--\x3e###关键沟通>拷问现实,真诚地表达自我,给与他人纯粹的关注,带着勇气与同理心对峙问题、听从直觉。*原则一:拿出勇气,`拷问现实`*官方真相&战场真相,要分析`战场真相`。*成功的另一种定义:我是什么样的人与我过着什么样的生活相一致的程度。*原则二:`走出自我`,投入对话,让对话变得真实。*生活中的问题很少与别人有关,基本全部和自己有关。*原则三:`保持专注`,不分心。*原则四:今天就解决你最棘手的问题。*场景:下属很有才华,但为人太露锋芒,该如何沟通?*误区开场白:*最近进展怎么样?*用恭维拉开对峙*信息表达太过委婉*对话前为对方的话写剧本*咆哮与逃跑*练习开场白(时间控制在1分钟之内):1.界定问题2.选择一个具体例子,阐述你想要改变的行为与情况3.描述你对这个问题的感受4.澄清其中的利害关系5.说明你对这个问题该负说明责任6.表明你解决这个问题的愿景7.邀请对方回应*原则五:听从自己的直觉。*说话不是道出所知,说话是弄清我到底知道什么。*原则六:为自己的情绪尾迹承担责任*原则七:让沉默施展力量"},{name:"写给大家看的设计书.md",path:"/BasicSkill/life/books/写给大家看的设计书.md",type:"file",mdconf:{abbrlink:"u44u2g4w"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2700,extension:".md",relative:"/BasicSkill/life/books/写给大家看的设计书.md",isEmpty:!1,content:"\x3c!--abbrlink:u44u2g4w--\x3e###四大基本原则*`亲密性`*目的:实现`组织性`;*实现方式:将相关联的元素分在一组以建立更近的亲密性。*要避免的问题:一个页面上有太多孤立的元素。*`对齐`*目的:使页面`统一而有条理`;*要避免的问题:要避免在页面上混合使用多种对齐方式。优先使用`左对齐`、`右对齐`而不是`居中对齐`。*`重复`*目的:使页面`统一`,并增强视觉效果。*实现方式:把现有的一致性更向前推进一步。最初,可以只是找出现有的重复,然后将其加强。熟悉了这种思想之后,再开始创建新的重复元素。*要避免的问题:要避免太多地重复一个元素。*`对比`*目的:`增强页面的效果`,有助于信息的`组织`;###颜色运用*`色轮`*`概念`*`三原色`:红、黄、蓝*`三间色`*`第三色`*`关系`*`互补`*`三色组`*`分裂互补三色组`*`类似色`*>采用以上几种关系的颜色都会比较和谐。*`亮色与暗色`*亮色:加白*暗色:加黑*`单色`*`暖色与冷色`*暖色:加红、加黄*冷色:加蓝*`CMYK`:Cyan(青)、Magenta(品红)、Yellow、Key(通常是黑色)*原理:光反射*应用:印刷品*`RGB`*原理:显示器直接传入眼睛的光*应用:显示器###字体设计*字体*特殊符号*开单引号`‘`:option+]*闭单引号`’`:option+shift+]*开双引号`“`:option+[*闭双引号`”`:option+shift+[*一字线`–`:option+-*破折号`—`:option+shift+-*省略号`…`:option+;*分数斜线`1⁄2`:option+shift+!*按下`fn`打开字符检查器*重音符号:按下fn打开字符检查器,选择左侧边栏上的拉丁语打卡重音符号列表*`字体类别`*字体间的关系*协调*冲突(通常由相似的字体造成)*对比*大小、粗细、结构(衬线体/无衬线体)、形状(大小写)、方向、颜色*种类*`Oldstyle`(旧式体)*![](http://with.muyunyun.cn/af9d00410581710e48fdd2b4854c84b5.jpg)*使用场景:大量文本*`Mordern`(现代体)*`Slabserif`(粗衬线体)*使用场景:儿童图书*`Sansserif`(无衬线体)*`Script`(手写体)*`Decorative`(花体)*字体对比*衬线体vs无衬线体*全大写vs全小写*罗马体vs斜体*罗马体表示所有字体中从上到下竖直的字体*方向对比*颜色对比"},{name:"未来世界的幸存者.md",path:"/BasicSkill/life/books/未来世界的幸存者.md",type:"file",mdconf:{abbrlink:"zm82bprc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2238,extension:".md",relative:"/BasicSkill/life/books/未来世界的幸存者.md",isEmpty:!1,content:"\x3c!--abbrlink:zm82bprc--\x3e###未来世界的幸存者*现实篇*世界会走向哪里?*白领岗位的消亡*case:*「税务顾问」岗位在美国消亡。*「银行职员」、「信贷员」、「风险控制」、「信用记录」、「外汇交易」。*未来优势的岗位*人性化与人格魅力。*创意。*决策和领导力。*为什么世界上没有安全的工作?*穷忙的人生*弱者越弱,越来越惨*为什么你可以不读大学*我们的学习和教育制度已经完全过时，传授的知识有用的少，没用的多；传授方法仍然依靠灌输和记忆，而不是启发和理解，极其低效，浪费学生的时间，打击学习热情，磨灭对知识的兴趣;*职业篇*为什么雇佣制度对工人不利*母鸡与前端工程师*你应该选择，那些让你产生最大兴趣和热情的职业。因为未来所有行业，低端的、低技能的岗位都会被机器取代，只有技能最强、最有创造性的人不会被淘汰。兴趣，也只有兴趣，才会让你产生不倦的热情，钻研下去，变得更优秀。*为什么退休金是靠不住的*方法篇*为什么创业。*如果你不喜欢自己现在的状况,又看不到希望的话,创业是一条可以考虑的路。*“自我雇佣”*如何确定创业方向*项目计划书1、给谁用?2、他们用这个产品来解决什么问题?3、这个问题对他们而言有多重要?4、我们的方法是否足够简单方便?5、他们要付出的代价与所得是否匹配?*行为准则*比完美更重要的是完成。(Doneisbetterthanperfect.)*快速行动，破除陈规。(Movefastandbreakthings.)*保持专注，持续发布。(Stayfocusedandkeepshipping.)*不要在功能上竞争*市场定位更重要*案例篇*个性也是一种竞争力*papi酱*要聊天,先付费*即将来临的卖文时代*微媒体时代*大媒体->微媒体*未来的娱乐业*技术教育的兴起*未来篇*高级人类的崛起"},{name:"黑客与画家.md",path:"/BasicSkill/life/books/黑客与画家.md",type:"file",mdconf:{abbrlink:"2rj2qlm2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:537,extension:".md",relative:"/BasicSkill/life/books/黑客与画家.md",isEmpty:!1,content:"\x3c!--abbrlink:2rj2qlm2--\x3e###黑客与画家*hacker*好玩、高智商、探索精神*价值观:分享、民主、自由*为什么书呆子不受欢迎:*10+岁心智的不健全。*中学阶段,「书呆子」不受欢迎。但是小学阶段「书呆子」没啥影响,进入社会后,「书呆子」更受欢迎。*黑客与画家*论述了黑客与画家的一些共同点。*创造性*不能说的话*要多问几个为什么。增加自己判断力。*良好的坏习惯*read52."}],type:"directory",size:11710},{name:"financial.md",path:"/BasicSkill/life/financial.md",type:"file",mdconf:{abbrlink:"dnvrpdfr"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1389,extension:".md",relative:"/BasicSkill/life/financial.md",isEmpty:!1,content:"\x3c!--abbrlink:dnvrpdfr--\x3e###goldprice*4.14371*5.17391*7.15400.85*8.07436*8.12407*10.15404*12.15379myopinion:*360~370buy*415+sell###基金*不定投指数基金。*投资能力本质是`认知的提升`。*如何挑选基金*挑选对应指数*![指数分类](http://with.muyunyun.cn/a21b4868c7b34f5e3c52c6efb0af5bff.jpg)*上证50指数*沪深300指数*中证500指数*创业板指数*常见选择:沪深300指数+中证500指数*参考[买好基金](https://www.howbuy.com/fundtool/filter.htm)*按基金类型筛选、指数型*复制方式:增强型*信息比率:前四分之一*基金评级:晨星评级(支付宝基金页面)###程序员在投资领域的优势与劣势*优势*投资需要持续学习。*数字、计算公式敏感。*量化交易(不是特别清楚,未来可以去了解)。*劣势*容易错失短线交易买入卖出的时机。###投资的几项能力-[]财务报表-[]独立思考投资方向与前景###投资话术https://www.zhihu.com/question/445888287-[]爆仓-[]平仓-[]杠杆-[]做多-[]做空-[]大盘###链接*[基金定投这么好，为什么能坚持下来的人那么少](https://www.zhihu.com/question/267534527/answer/1337504443)"},{name:"hacker-laws.md",path:"/BasicSkill/life/hacker-laws.md",type:"file",mdconf:{abbrlink:"plrro1qk"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1752,extension:".md",relative:"/BasicSkill/life/hacker-laws.md",isEmpty:!1,content:"\x3c!--abbrlink:plrro1qk--\x3e*二八法则*90-9-1法则表明，在诸如维基这样的互联网社区中，90%的用户只看内容并不参与互动，9%的用户会参与讨论，而只有1%的用户会创造内容。*破窗效应(TheBrokenWindowsTheory)*破窗理论已应用于软件开发中，它表明劣质代码(或TechnicalDebt)可能会影响后续优化的效率，从而进一步造成代码劣化；随着时间的推移，这种效应将会导致代码质量大幅下降。*布鲁克斯法则(Brooks'sLaw)*谚语九个女人不能在一个月内生一个孩子与布鲁克斯法则同出一辙，特别是某些不可分割或者并行的工作。*人月神话中心主题。*坎宁汉姆定律(Cunningham'sLaw)*在网络上想得到正确答案的最好方法不是提问题，而是发布一个错误的答案。*邓巴数字(Dunbar'sNumber)*邓巴数字是对一个人能够保持稳定社会关系的人数的认知极限——在这种关系中，一个人知道每个人是谁，也知道每个人与其他人的关系如何。邓巴指出，人仅能轻松地维持150个稳定的关系。*和人与人之间稳定的关系一样，开发人员与代码库的关系也需要努力维护。*盖尔定律(Gall'sLaw)*一个切实可行的复杂系统势必是从一个切实可行的简单系统发展而来的。从头开始设计的复杂系统根本不切实可行，无法修修补补让它切实可行。你必须由一个切实可行的简单系统重新开始。*侯世达定律(Hofstadter'sLaw)*即使考虑到侯世达定律，它也总是比你预期的要长。阅读到隐式接口定律###link[link](https://github.com/nusr/hacker-laws-zh)"},{name:"house",path:"/BasicSkill/life/house",children:[{name:"decorate.md",path:"/BasicSkill/life/house/decorate.md",type:"file",mdconf:{abbrlink:"wv43l94h"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5262,extension:".md",relative:"/BasicSkill/life/house/decorate.md",isEmpty:!1,content:"\x3c!--abbrlink:wv43l94h--\x3e###装修*关于居家*找出`核心区`*找出`居心地`*设计不要太满,做七分就好*装修前*施工队好,还是设计师好*结论:`优先选择设计师`*选照片*格局挑与家里差不多的*挑地板颜色与家差不多的*记录家当以作收纳设计*记下自己与家的互动关系*学会听建议,下决定并负责*签了设计约后,要在合同中列明`平面图`、`天花板图`、`水电图`、`立面图`、`厨具图`###装修流程*开始:前期作业*确定格局平面图*灯具配置*家具、建材*步骤一:拆除工程*拆除时需要注意的事情*断水断电断煤气*检查漏水*检查蛀虫*窗框拆除,内角水泥层一起敲*窗外的瓷砖是否敲除,得先告知施工队*拆窗后,要用帆布封窗*消防管线、洒水喷头不能移位或拆除*拆除注意四个坑点*`打地板时,千万小心排粪管`。*策略一:排粪管换不换,要先想清楚,然后拆除、水电与瓦工师傅三方都要知道。*策略二:有状况要与施工队长沟通。*策略三:施工队交接时,要带接手的施工队一起检查。*策略四:看工地时多拍照,每个房间与细节都要拍,日后要检讨工法时,说不定就能派上用场。*`原瓷砖地够平整,可直接铺不地板`*地板名:爱尔兰风铃、圣象地板*铺多层复合或强化复合木地板,原本瓷砖地板只要够平整,可不必拆除;若有瓷砖起鼓变形,仍要拆除。*地板要不要拆除见底,要看铺什么类型的地砖,以及要考量新大门的门槛高度。*跟施工队沟通,要知道的是不同做法会有什么不同的结果。*`千万别乱拆墙,以免结构受损`*`不拆不换的地板、橱柜,通通包好做保护`*瓦楞板+多层板*预算够的话:PVC防潮布+瓦楞板+多层板*`拆除,你该注意的事`*先断水断电断煤气*检查漏水*检查有没有蛀虫*窗框拆除,内角水泥层一起敲*窗外的瓷砖是否敲除,要先告知施工队*拆窗后,要用帆布封窗*步骤二:水电工程*水电安装要注意的事*材料进场的监工*水电预算千万不要省*坑点*防止`漏电断路器被掉包`*`空气开关`*功能:电线短路或电量超载时,它会跳闸。*注意:`要选“CCC”产品`。*`漏电断路器`(近水处需安装)*功能:漏电时,它会跳掉。*注意:`防止用空气开关代替`。*`漏电断路器不要安装总开关`。*确认冷、热水管与电线的位置*灯具、厨具、空调的位置*步骤三:瓦工工程(卫生间防水、贴砖在此阶段)*水泥质量不好、比例不对，易有裂痕。*`调水泥砂浆时，水泥与砂的比例打底1:3，面层1:2`。*面层铺好后要养护，天数要28天（没有这个条件，至少要14天）。*从抛光砖了解不同地砖施工要点。*干铺*适合：地面*优点：砖面平整度高，砖底不易有空隙，不易变形。*缺点：工时较长，工资较高。*其它：大片瓷砖一般用干铺，要加黏着剂。*湿铺*适合：墙面、地面*优点：工时快，工资便宜。*缺点：平整度较差，转内易有空气，日后易起鼓。*地板拆除后，可在墙面标出高度。*砖墙vs.轻钢墙*(砖墙)红砖一定要先浇湿或泡水。*砌墙一定要拉线。*新墙与旧墙之间要打钢筋或植钢筋。*墙不能一天就砌完。*窗户施工要注意以下几个点*窗的四周要填新水泥，接下来要用弹性发泡填缝剂加压灌入窗框与墙体的缝隙。*若拆窗时有拆掉瓷砖，需要把砖给补回来。同时要做泄水坡。*铝窗与外墙间要补玻璃胶。*其它提醒*回填墙壁、地面孔洞时，要注意是否补平。*瓷砖记得留备料，以备日后维修。*步骤四:厨卫工程*卫生间要做防水层*基底层要够平、够干净*防水浆料要“薄涂多层”，等干透才能进行下一道*防水浆料涂完后，养护3~7天才能贴砖*步骤五:木工工程*步骤六:油漆*记得做好保护工程*步骤七:粗略清洁*步骤八:设备进场*步骤九:仔细清洁*步骤十:家具窗帘进场148~241###装修保命符*老房子花在基础工程，新房子花在通风采光与格局。*列出建材与工法，分开计价一项项比。拿到合同时，该注意的事。1.要附图样与报价单。2.追加预算或变更设计要经书面签字同意，才能动工。3.尾款可多留点，验收通过才付尾款。(若没有其他保障，争取到20%)4.防公司倒闭条款(可把设计师个人列为保证人，记得核对姓名与身份证)。5.要定工期、保修期与罚款。"},{name:"shanghai_house_knowledge.md",path:"/BasicSkill/life/house/shanghai_house_knowledge.md",type:"file",mdconf:{abbrlink:"62ujugis"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2416,extension:".md",relative:"/BasicSkill/life/house/shanghai_house_knowledge.md",isEmpty:!1,content:'\x3c!--abbrlink:62ujugis--\x3e*宏观政策与分析*城市定位*上海2035规划*五个中心:国际经济、金融、贸易、航运、科技创新中心*形成"主城区-新城-新市镇-乡村"的市域城乡体系*主城区:中心城以及`宝山`、`闵行`、`虹桥`、`川沙`4个主城片区*新城:`嘉定`、`松江`、`青浦`、`南桥`、`南汇`5个新城*人口目标*2035年:2500万人左右*了解自己的需求*刚需or改善:刚需*居住需求or投资保值需求:居住需求的话就会对于`地段`,`小区`,`户型`等`整体居住条件的考虑和权衡`;如果是投资需求的话,可以看最近几年来年化的投资回报,在过去的15年间,从这个时间尺度看,差不多投资回报在年化`7%-10%`左右。*学区房:no*新房or二手房:todo*老房子or次新房:todo*房产信息渠道*贝壳:大家看到链家在一线城市店铺比较多,可能会觉得贝壳链家的房源可能占市场房源的一半或者更多,其实贝壳链家房源数可能只占到少一部分,并且不同城市有当地区域做的比较好的中介品牌,没有上贝壳,可能在安居客或者幸福里中,甚至只在中介自己的系统中,所以最好多看一些.贝壳比较好的地方是真房源和价格真实,这部分确实是其他几个平台不具有的。*安居客*幸福里APP|字节跳动旗下*兔博士App看成交价走势和一些行情比较好,和上面几家一样,有很多鱼龙混杂的房源。*大房鸭最近在上海到处打广告比较凶的,主打中介费固定且少,不过房源质量和真假还需自己判断。*公众号等自媒体*真叫卢俊：微信号zhenjiaolujun0426,认认真真聊地产,实实在在谈买房。*小胖看房：微信号xiaopangkf,上海新房&二手房权威资讯平台,小胖君（xpkf039）为您提供前滩,内环,中环等热门板块*新房快捷信息,解答您限购,二套,学区房,地铁房,房贷月供,公积金等购房知识问题*魔都房房房：微信号modufff,楼市谈经论道买房大家来说*地段位置###link*[shanghai_house_knowledge](https://github.com/ayuer/shanghai_house_knowledge#321-%E6%9F%A5%E8%AF%A2%E8%87%AA%E5%B7%B1%E7%A4%BE%E4%BF%9D%E7%BC%B4%E7%BA%B3%E6%83%85%E5%86%B5)'},{name:"smart_home.md",path:"/BasicSkill/life/house/smart_home.md",type:"file",mdconf:{abbrlink:"7l6yd69v"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6503,extension:".md",relative:"/BasicSkill/life/house/smart_home.md",isEmpty:!1,content:"\x3c!--abbrlink:7l6yd69v--\x3e###智能家居*网关*设备*`Aqara网关1个`*特性:能接入“米家”APP，还能接入“Homekit”APP*价格:299元*`自动拉窗帘`*设备:*方案一:`Aqara智能窗帘电机1个`*方案二:欧瑞博WIFI版窗帘电机*`自动开空调/热水器`*设备*`AqaraAqara智能墙壁114910A插座114910A插座1个`，用于普通电器小米有品官网、App。(适合装修时安装)*替代插座:米家智能插座(ZigBee版):转接头式插座，直接插在家里原有插座上就能用。*功能:*自动通、断电*定时开关*统计用电量*和其他智能设备联动:比如联动温湿度计，当家里温度超过27°C时，插座通电，于是空调打开。*`Aqara空调伴侣N19916A插座1个`，用于大功率电器*`睡前自动熄灯`*设备:*Aqara智能墙壁开关1个*`零火版`:给开关位置预留零线。*零火版最低功率没有限制。*零火版最高功率2500W，可以接大功率的灯具(比如浴霸灯、LED灯带)。*零火版可以统计电量，即每一路灯用了多少电。*灯光体验优化*让灯光慢慢地暗下来，可以考虑支持调光的、支持接入米家App的智能灯具(小米、yeelight、飞利浦、宜家)。*`进门自动亮灯`*背景:1.晚上一进家门，玄关灯自动打开;人走到客厅或卧室，2分钟后，玄关灯自动关掉。2.半夜口渴进厨房，厨房动自动开灯，喝完水回去睡觉，厨房灯2分钟后自动关掉。*设备:*Aqara智能墙壁开关1个。*Aqara人体传感器1个。*米家门窗传感器1个，149元。*`远程监控家里`*背景:人离开家以后，摄像头开始监控，窗户上的门窗传感器一旦发现异常，摄像头录下视频，发送到手机“米家”App中。*设备:*小米米家智能门锁1个。*小米米家智能摄像机1个，放在门锁附近。*米家门窗传感器1个。*`看电视自动关灯、选节目`*背景:在沙发上坐定，说“小爱同学，看电视”，电视自动打开。同时，客厅主灯关了，氛围等变成暗黄色。*设备:*小米电视1台。*`远程燃气报警`(可以延后安装)*背景:出门在外，一旦有燃气泄漏异常，燃气阀自动关闭，同时手机收到报警。*设备:*烟雾警报器1149###设备清单|设备名|个数|价格(￥)|场景|功能||:----------------------------------------------------------------------------------------------------:|:---:|:-----------:|:--------------------:|:------------------------------------------:||Aqara网关|1|299|房子中心|中心控制||Aqara智能窗帘电机|1|1199|主卧窗帘|卧室自动拉窗帘，`客厅是否需要智能窗帘待讨论`||Aqara空调伴侣|2|169x2=338|客厅、主卧|自动控制空调开关||Aqara智能墙壁插座|?|129x?|代替传统插座|||米家智能插座(ZigBee版)|x|49x?||||Aqara智能墙壁开关(零火版)|4|189x4=756|卧室、客厅、走廊、玄关|自动控制电器运行、停止(亮灯、熄灯)||Aqara人体传感器|2|89x2=178|玄关、厨房|玄关、厨房走廊自动亮灯||米家门窗传感器|1|49|大门|开门自动亮灯、远程监控家里联动||小米米家智能门锁|1|≈2000|大门|远程监控家里联动||小米米家智能摄像机|1|已有|玄关|放在门锁附近，远程监控家里联动||小米烟雾报警器|1|199|厨房|装在厨房||智能灯具([小米智能吸顶灯](https://www.mi.com/yeelight-ceilinglamp?cfrom=list)、yeelight、飞利浦、宜家)|x|||||小米电视(待商榷)|1||客厅|||小米智能洗衣机(待商榷)|1|1499||||智米智能马桶盖(待商榷)|1||卫生间||###link*[智能家居你只知道小米？这份超简单上手指南，省钱还实用](http://www.yidoutang.com/guide-49050.html)"}],type:"directory",size:14181},{name:"inspiration.md",path:"/BasicSkill/life/inspiration.md",type:"file",mdconf:{abbrlink:"aze81hlv"},birthtime:"2022-01-16",mtime:"2022-01-16",size:128,extension:".md",relative:"/BasicSkill/life/inspiration.md",isEmpty:!1,content:"\x3c!--abbrlink:aze81hlv--\x3e###Inspiration可以取的项目名:百灵鸟、合欢树、seed、扑克牌回忆录、daphne"},{name:"movie",path:"/BasicSkill/life/movie",children:[{name:"Game_of_Thrones.md",path:"/BasicSkill/life/movie/Game_of_Thrones.md",type:"file",mdconf:{abbrlink:"uibyt3r4"},birthtime:"2022-01-16",mtime:"2022-01-16",size:515,extension:".md",relative:"/BasicSkill/life/movie/Game_of_Thrones.md",isEmpty:!1,content:"\x3c!--abbrlink:uibyt3r4--\x3e###GameOfThrones![](http://with.muyunyun.cn/149bd36ec2c46d8c789da45ce9ec9f7d.jpg-400)`WINTERFELL``KingsLanDing``Pentos`###goodword*Nothingsomeonesaysbefore'but'reallycounts.*Myfatherunderstandsmercy,whenthisisaroomforit.*得饶人处且饶人S0900:00###links*[resource](http://www.qxfun.com/game-of-thrones.html)*[downloadthesubtitles](https://secure.assrt.net/search2/Sub:%E6%9D%83%E5%8A%9B%E7%9A%84%E6%B8%B8%E6%88%8F+s01/?page=2)"}],type:"directory",size:515},{name:"package_gift_box.md",path:"/BasicSkill/life/package_gift_box.md",type:"file",mdconf:{abbrlink:"jbc6xmpx"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1061,extension:".md",relative:"/BasicSkill/life/package_gift_box.md",isEmpty:!1,content:"\x3c!--abbrlink:jbc6xmpx--\x3e###方糖型包装1.把包装纸裁剪成长是盒子周围长度+2~3厘米,宽是盒子的宽度+3厘米,盒底朝上置于纸张中央;2.将右侧的纸张沿盒子向内折入,并保持纸的边缘位于盒子中央;3.再把左侧的纸向内折入;4.用透明胶或双面胶带将纸张重叠处固定;5.两侧的纸沿着盒子向内折入;6.按照顺序，把纸张折成漂亮的梯形;7.在上下折纸的交接处轻轻做上标记;8.保持标记与边缘平行,折叠下面的纸;9.用双面胶带或用漂亮的贴约将接合处固定,再将另一侧包好,翻到盒子正面,用丝带或花装饰一下就完成了。![](http://with.muyunyun.cn/62b33e8a41f88835ecf25de101f38eec.jpg)![](http://with.muyunyun.cn/04a72955723425fcad4cff7288b74d03.jpg)###打蝴蝶结方法1.在线的一半处穿过礼物盒;2.交叉旋转;![](http://with.muyunyun.cn/7d2ffb72e7deacf8c1665c39d0817a6a.jpg-300)>[礼物包装方法](http://www.mimidiy.com/2012/0919/li-wu-bao-zhuang-fa.html)"},{name:"recipe",path:"/BasicSkill/life/recipe",children:[{name:"recipe.md",path:"/BasicSkill/life/recipe/recipe.md",type:"file",mdconf:{abbrlink:"r9nfe1zq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2965,extension:".md",relative:"/BasicSkill/life/recipe/recipe.md",isEmpty:!1,content:"\x3c!--abbrlink:r9nfe1zq--\x3e###Recipe![](http://with.muyunyun.cn/5ec7ed84857ab45413f82b1c2da5e4e4.jpg)####葱油鲈鱼配料，鲈鱼(ban鱼)一条（请卖鱼的人杀好修理干净）、小葱二两、油、料酒、生抽（鲜味酱油）、生姜一小块。1.锅里加满一些水，放进`鱼`、`生姜`，`料酒`，盖上锅盖;2.烧开水把鱼煮熟，用筷子在鱼身体戳一下，🐟鱼身容易戳穿就是熟了，如果硬穿不过去就是未熟，还需再煮会儿;3.盘里加些`生抽酱油`，捞出鱼放盘里，葱切成`葱米`放在鱼上面;4.锅里的水倒掉冲洗干净，`锅烧干`烧热，倒`一两五勺油`左右，油烧高温后热油淋到葱鱼上;####青菜豆腐皮1.洗好青菜切断、豆腐皮浸泡一会儿撕碎;2.锅烧热倒少许油放进青菜翻炒，加些许水，放进豆腐皮加锅盖烧一分半左右，掀开盖加少许盐再翻炒几下搅匀盐;####肉末豆腐配料：方块豆腐，大蒜四瓣，葱四根，瘦肉二两，生抽酱油，料酒。1.豆腐中间用刀划个十字架，放进锅里，加水豆腐一半齐。2.大蒜放在菜板上用刀拍压碎去皮取蒜，切片后再剁碎些放旁边，把瘦肉冲洗放菜板用菜刀切片切条剁成肉泥（此时肉泥和蒜可以合在一起再用刀剁剁），剁成肉沫后加一点点盐用手去和抓一下，让盐均匀分布。3.蒜肉泥平放在豆腐上，`料酒`两勺淋在肉沫豆腐上，`酱油`一勺儿半也淋上去，`葱梗`（下半段）切葱花也放上肉沫处。4.加锅盖起大火冒热气后中小火炖5到8分钟肉蒸熟，掀开锅盖用菜铲子在锅底豆腐处轻轻起豆腐移移，防止豆腐粘粘在锅底，葱绿叶那段切葱米撒在肉沫上加盖一分钟关火，用菜铲子托住豆腐块连肉沫移在盘里倒汤####秋葵秋葵洗好切段，不切段正条也可以。锅里放水煮到将要滚开时放进秋葵，煮两三分钟应该就可以捞出来了。锅里的水倒掉冲洗锅，开火锅烧热后至小火，倒两三滴油、两勺酱油、大蒜末翻搅几下哦，关火，酱油调料倒在小碟子上蘸着吃，（醋如需可以直接倒少许）####红烧黄刺鱼配料：黄刺鱼四条（请卖鱼的修好）料酒，酱油，生姜，青大蒜两根，油。1、鱼冲洗干净尽量水沥干（防止油锅里进水嗤嗤爆锅）姜蒜切好备用。2、起火烧锅倒适量油，先放生姜翻炒几下（防止鱼会粘锅）后，把姜推锅一边，放进鱼稍稍煎一下，把姜铲到鱼中间来，加料酒、酱油，盐（先放少些，防止过咸），加些许水，用菜铲子移挪一下鱼底处（防止粘锅）加大蒜下半段切小小段放进锅里。3、大火后中小火烧熟鱼后加入切好的大蒜叶再烧上一两分钟，可以尝一尝盐淡味道，如果太淡再加点点盐，关火连鱼带汤鱼头统一方向装盘。"}],type:"directory",size:2965},{name:"sport",path:"/BasicSkill/life/sport",children:[{name:"jump.md",path:"/BasicSkill/life/sport/jump.md",type:"file",mdconf:{abbrlink:"ssjf3dzc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:225,extension:".md",relative:"/BasicSkill/life/sport/jump.md",isEmpty:!1,content:"\x3c!--abbrlink:ssjf3dzc--\x3e###Sport*[每天坚持跳绳1000个，一个月后会有什么变化？](https://www.zhihu.com/question/400648101/answer/1680793795)-小婉青青的回答-知乎-[]购买磨砂膏"}],type:"directory",size:225},{name:"starbucks.md",path:"/BasicSkill/life/starbucks.md",type:"file",mdconf:{abbrlink:"qahuqw46"},birthtime:"2022-01-16",mtime:"2022-01-16",size:213,extension:".md",relative:"/BasicSkill/life/starbucks.md",isEmpty:!1,content:"\x3c!--abbrlink:qahuqw46--\x3e###那些年呆过的星巴克###杭州金逸影城店(2018年5月~2018年12月)###上海华新路店(2019年1月~2019年9月)名仕苑店(2019年10月)"},{name:"summary",path:"/BasicSkill/life/summary",children:[{name:"The-annual-summary-of-2017.md",path:"/BasicSkill/life/summary/The-annual-summary-of-2017.md",type:"file",mdconf:{abbrlink:"f3dh3zah"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6603,extension:".md",relative:"/BasicSkill/life/summary/The-annual-summary-of-2017.md",isEmpty:!1,content:'\x3c!--abbrlink:f3dh3zah--\x3e![](http://with.muyunyun.cn/6114931ddce0b5e56ade13b45e2b3ec6.jpg-muyy)>不久前年会主题征集活动中，我提交的主题是《在路上》，和骑手们一样，我们亦不是在路上呢？\x3c!--more--\x3e恰逢踏入社会一年之际写下第一篇年终总结，百感交集，有初融入团队的喜悦、有独自完成需求的兴奋、有一次次团建的畅饮也有过为自己能力不足的懊恼以及与好友离别的感伤。通过这篇总结，希望能记录些琐事，并给2018年的自己定下promise。###启程按捺不住走出校园的兴奋，走入我达新世界的大门。当时未进公司的时候，在朋友圈中看到的小伙伴们的照片，当时心中一阵惊叹，"这么帅！！要拖后腿了"，不曾想到后来几个月和每个人发生的故事，已然成为生命中不可或缺的色彩了。时隔一年当再次回味这张照片时，似乎里面藏着初心。![](http://with.muyunyun.cn/dd07286ed73f1c2f6091521254b9abf5.jpg-300)春节结束后公司如期举行了年会，我在倒数第二个节目中独奏了二胡~，前端部门的年会中奖率也是全公司最高的，一度让其他部门的人说是改了脚本o(╯□╰)o。运气也是实力的一部分吧，不过我没有中奖。再接着是为期15天的小黑屋封闭式开发快递模块，这也是我第一次感觉到了挫败感，让[林师傅](http://blog.5udou.cn/)帮填了好多坑。期间李开复老师来参观我们公司，我也跑去趁了张合照。同时迎来了陪我渡过短暂岁月的小伙伴虾球。一只可爱的猫咪。现在在新主人家过得很好。###batman&&hawkeye在往后的一段时间，前端部门内部进行了更细致的分工划分，我被划分到了直营业务组，主要负责batman(客服关系系统)以及hawkeye(运维系统)的开发与维护，期间经历了并参与了batman、hawkeye的技术栈迭代，从老鹰眼的reflux到redux，以及batman网关独立抽离成一个ts项目。为了更好的熟悉react全家桶的工作流程，五月份的时候在仿照batman和hawkeye写了个[demo](https://github.com/MuYunyun/reactSPA)，现在收获了几百的Star，也算今年的一大收获吧。o(╯□╰)o下面谈谈今年在做项目的收获和成长：*首先是带我进入了奇妙的React技术栈和ES6世界，对相关的知识点进行了实践；*能合理对组件进行拆分；*对JS异步流程有了一定认知；*对底层组件的设计有了一定的认知；*对git多人合作的流程有了一定的实践；*在遇到不懂的知识时学会进行翻相关文档以及阅读源码；*最后在npm上尝试发布了[第一个包](https://github.com/MuYunyun/diana)，并用到了batman中;谈完收获再来谈谈不足：*知识点体系没有梳理成网，比较零散；*知识面广度和深度都还欠缺;*在项目优化的层面没有特别上心;*在和别人交谈时，抓重点能力以及逻辑整合能力有待加强；*效率不足，容易被琐事影响；###高山仰止分享一位同行的博客中让我感慨良多的话：`行远自迩，登高自卑`。在写这篇总结前我曾以为这句话是说当你登高的途中看到比你站在更高更远处的人的时候会产生自卑感，现在不经莞尔一笑，`风起于青萍之末，浪成于微澜之间`，那些让我高高仰望的人不正是有着一颗常人难能企及的大毅力和大心脏吗？而我呢，希望能离那群人能近一点是一点吧。想到现在负责的项目名为batman，突然谐音想到了better-man。新年计划做一个让别人靠得住的better-man。###番外随笔今年刷了好多动漫，整体偏热血、玄幻类型，也入了B站刷了几部小清新动漫，如四月是你的谎言、宝石之国~，和朋友一起刷了几部有意义的电影，比如爱乐之城、寻梦环游记~；另外从4月份开始使用网易云音乐来，累计听了七八千首歌吧，基本码代码的时候都会带着耳机~，以英文歌、民谣为主，[我的歌单如下](https://music.163.com/#/user/home?id=472504060)；在游戏方面发挥稳定，王者荣耀上了最强王者以及为团队拿下个冠军，不过感觉花了太多时间在上面，浪费了不少原定的计划~，不过也算是青春的成长吧。公司年假即将会去曼巴玩上一段时间，也将算是我第一次出国。看书方面主要是技术类的，大概阅读了6、7本，这个比较尴尬了，看书看得慢而且看过的知识点也不是完全吃透了，新年期待改善。个人产出方面也比较低产，翻译文章和原创文章加起来十几篇~，我把它们集合在了[blog](https://github.com/MuYunyun/blog)这个项目里。不过也有值得高兴的事，搭建了自己的博客，并且写文章的深度自己感觉有所提高(虽然依然菜)。然后很遗憾的是今年的技术交流会一场也没参加成，怪自己的消息不灵通加上水平的不足。###总结展望篇这部分是对自己打算要成为一个better-man的一个promise吧。就结合文章中提到的不足点进行相应的改善(自己想到解决方案的先记下来了)，也就是新年的计划。望监督。|problen|flag||:------------------:|:----------------------------------------------------------------------------------------------:||知识点碎片化|对已有的知识点进行思维脑图的整理，对将来的知识点也采取思维脑图的方式进行学习||知识面广度和深度欠缺|参与到一个千星Star的开源项目的改善，提高阅读源码的能力，阅读6本技术书籍，阅读1本非技术书籍||项目优化方面没有用心|课外学习积累相关方面知识并尝试用到公司项目中||没去成技术交流会|带有目的性地参加1到2场前端技术交流会||沟通能力不足|避免讲话结巴，加强语言组织能力和逻辑能力，没想清楚问题之前不要轻易回答||效率不足|加强自控能力，规定的时间做规定的事情，做到按时起睡，不晚于8点半起床|'},{name:"The-annual-summary-of-2018.md",path:"/BasicSkill/life/summary/The-annual-summary-of-2018.md",type:"file",mdconf:{abbrlink:"9z6vq8ax"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4429,extension:".md",relative:"/BasicSkill/life/summary/The-annual-summary-of-2018.md",isEmpty:!1,content:"\x3c!--abbrlink:9z6vq8ax--\x3e![](http://with.muyunyun.cn/19d9a998a632b464fed6d929326b0271.jpg-muyy)>度过在点我达两年欢快的时光，开启在拼多多的新的旅程。###life![](http://with.muyunyun.cn/cbc85e6d794d9e52b0f60aa6fa18950b.jpg-400)*2月:在老家的方岩山上跨了年；*3月:和w做了过山车；*4月：面基了[小小倩](https://juejin.im/user/584d7a3e2f301e00572fb7fc);参加了杭州的草莓音乐节；*5月：参加了掘金在杭的线下交流会,初识[染陌](https://juejin.im/user/58f87ae844d9040069ca7507)、[阿相](https://juejin.im/user/58f876dc5c497d0058e38ae1)、静霞等掘金小伙伴，缘起；*6月：和小伙伴们游玩崇明岛，逛了魔都夜景；参加了GraphQL的专题技术分享,和带我入门前端的scott老师握了手;*9月:和小伙伴们在浙大玉泉校区参加nodeparty;*11月：面基了刃捷兄，参加了VueConf；加入[前端九部](https://github.com/frontend9)；期间用脚本叫r起床并播报天气预报，脚本坚持了两周;*12月：去黄山山顶吃到了热腾腾的泡面;在nodeparty上,贺老对语言特性的深刻见解只有敬佩。*1月：接连两天的SEE`、d2大会除了干货满满，俨然成为了追星大会。见到了玉伯、张秋怡等大大的真容，和情封前辈进行了深度交流,同时和九部的小伙伴也进行了线下聚餐。###Siren`Siren`是星巴克`Logo`上双尾女海妖的名字。本意是希望星巴克的咖啡就像`Siren`的歌声那样美妙,除此之外它还有个引申意——克制欲望。![](http://with.muyunyun.cn/aafa6d3e872bb6f9bef26b5ef6d228e5.jpg-400)18年下半年的周末大多待在下城区金逸影城(也就是18年`VueConf`的举办地)的星巴克里看看书之类,这家星巴克在喧嚣和安静之间保持了恰当好处,坐在周围的可能是谈论艺术的大学教授，或者是带小朋友做作业的家长，又或者是看书的同学。自由、温馨，时间在这里可快可慢。![](http://with.muyunyun.cn/f9b9be1e727cb817fc78668cc31b3191.jpg-400)###18年——见闻色以下是对[18年计划](http://muyunyun.cn/posts/b9cd3f63/)的review|flag|完成情况||:-----------------------------------------------------------------------------------------:|:------------------------------------------------------------------------:||对知识点采取思维脑图的方式进行学习|创建了[blog](https://github.com/MuYunyun/blog)项目进行了知识点的整理输出||参与到一个千星Star的开源项目的改善，提高阅读源码的能力，阅读6本技术书籍，1本非技术书籍|在开源项目的参与深度上有所欠缺,书籍阅读指标基本达成||课外学习积累相关方面知识并尝试用到公司项目中|指标达成||避免讲话结巴，加强语言组织能力和逻辑能力，没想清楚问题之前不要轻易回答|沟通交流能力需持续加强||加强自控能力,规定的时间做规定的事情，做到按时起睡，不晚于8点半起床|自控能力有所提高，按时起睡指标未达成|###19年——武装色*阅读5本技术书籍，1本非技术书籍，学习函数式编程*落地一个有价值的项目*深入`React.js`社区，提一次pr*研读`node.js`文档*提升沟通交流能力,做一次party分享*请挚友喝星巴克(保底12杯)###感谢感恩亦师亦友的愚安boss,以及给我帮助的点我达小伙伴们;感激对我给予肯定的刃捷、明江前辈;感激与我聊到凌晨的兵长兄;感谢给我提供前行指引的死月、芙兰姐;感谢掘金社区让我结识了小小倩、染陌、相学长等好友。感谢所有内推、面试过我的前辈,让我认识到自己的不足。最后感谢所有杭州的朋友们，期待下次更好的遇见！"},{name:"The-annual-summary-of-2019.md",path:"/BasicSkill/life/summary/The-annual-summary-of-2019.md",type:"file",mdconf:{abbrlink:"5rbl6qc5"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4739,extension:".md",relative:"/BasicSkill/life/summary/The-annual-summary-of-2019.md",isEmpty:!1,content:"\x3c!--abbrlink:5rbl6qc5--\x3eTimeisflying,itarrivesattheendofyearagain.ThisismyfirstyearworkinginPinDuoDuoincanditseemsIarriveinthecompanyyesterday.Thispointisagoodchancetotalkwith(recognize)myselfagain.Itrytoconcludefrom`work`,`output`,`life`and`destination`.###LearnfromworkThefirstcourseIlearnfrommyteamisabout`startingwiththeend`.Itmeanseverythingwedotodayispreparedforthetomorrow.Intheotherword,weshouldrealizewhichperiodthethingwe'redoingisin,andourteamwritesummaryeveryweektomakesuretheestablishedgoalsbecomecloserandcloser.ThesecondcourseIlearnfromtheworkistotryto`useEnglishmore`.TherearesomuchrichresourceinMedium,MDN,FrontendMastersandevenintwitter.It'sthefirsttimeImetwithsomanyforeignersengineerintheJSConfbutIcan'ttalkwiththemfluently.It'sobviouslyusingEnglishskillfullywillopenyoureyesandimproveefficiencylookingforsomeinformation.Thelastbutmostimportantis`howtocommunicate`.It'sartistictodescribesomethingeasilytomakeothersunderstand.Whenarrivingatourteamatfirst,oneofmyleader'sadviceisthebestwaytojoinintheteamistoshare——sharingideas,knowledgeandfeeling.MycolleaguesaresoexcellentIlearnalotfromtheminthesetechnicalsharingpartieseveryweek.AtthemeanwhileIalsosharesomeideasinit.###OutputofthearticleTherearetennewarticlesaddedto[myblog](https://github.com/MuYunyun/blog),thedirectionistotalkaboutReact,JavaScript,CSSandsoon.Iftherearemistakesinit,welcome[pointout](https://github.com/MuYunyun/blog/issues/new).*[IntroductionToFunctionalProgramming](http://muyunyun.cn/posts/8b09c168/)*[DoSearchInDataStructureOfReactFiber](http://muyunyun.cn/posts/9f41fc98/)*[UnderstandReactSuspensedeeply](http://muyunyun.cn/posts/44b01006/)*[Youdon'tknowrequestIdleCallback](http://muyunyun.cn/posts/ba7c84ae/)*[DeepintoReactHooks](http://muyunyun.cn/posts/290a4219/)*[Howtomakepagerunsmoothly](http://muyunyun.cn/posts/a1be1d41/)*[DeepintoReactHooks——DesignPattern](http://muyunyun.cn/posts/32fb0f08/)*[ModernReacttest](http://muyunyun.cn/posts/76ba81e7/)*[LearnControlledComponentandUncontrolledComponentAgain](http://muyunyun.cn/posts/8bdf2cdf/)*[INHERITEDANDNON-INHERITEDINCSS](http://muyunyun.cn/posts/33fba87f/)Therewillbemorecreativearticlestoaddinthefuture.Let'sgrowuptogether.###LifeIenjoythequiettimesittingintheCafethewholedayinSaturdayandit'salsonicetochatwithfriendsorfamilythere.![](http://with.muyunyun.cn/65758e96048af8ff1fd619ba1abc834a.jpg-400)Andinothersomeweekenddays,ItakepartinsomeFEconferencesthisyear——`FDConf`,`VUEConf`,`D2`,`SEEConf`andsoon.FromtheseactivitiesIlearnsomesomenewknowledge.Forexample,thearticle[Howtomakepagerunsmoothly](http://muyunyun.cn/posts/a1be1d41/)iswrittenafterlisteningthesharingofLiuBoweninFDConf.Andluckily,Igetthechancetotakephotowith[EvanYou](https://twitter.com/youyuxi)andgetthesignaturefromhim.![](http://with.muyunyun.cn/27a9372dcab28c9c15e1b273096b2680.jpg-300)Atthesametime,it'shappytomeetwitholdfriendsandmakewithnewfriendsintheseactivities.###Checklist&&DestinationCheckingtheplanoflastyearbeforemakingplansinnewyear.*Reading`five`technicalbooksandanottechnicalbook,~~learnFunctionalProgramming~~:Itisashamenotachievethistarget.Insteadofreadingthewholebooks,Ireadmoresinglepostsorchapterspartlyinthelastyear.*Finishing~~avaluableproject~~:Therearesomevaluableprojectsinmydailywork,they'restillinprogress.*~~Deepinto`React`community~~,submitapr:ThereissomedeepanalyzeinReactthisyear,howeveritstillneedsmakingextraeffortformakingapr;*Deep~~intothedocumentof`Node.Js`~~:theworkofthisyearisconnectedwithUIandcomponentmoreclosely,sothedocumentofNode.Jshasnomuchchancereadinginpractice;*~~Improvingtheskillofcommunication,doasharinginaparty~~:Thecommunicationskillgetssomeimproved,howeveritstillneedsbestrengthened;*~~Invitefriendsfrocoffee(atleast12)~~Keepinggoingoninthenewyear.Herelistssomedirection.*Keepingreadingandwriting.Creatingmorepersonalthoughts;*Improvinglistening/writingskillinEnglishcontinually;*Way:watchingten+englishmoviesandtrytowritesomeenglishposts.*Improvingthebasicskillsindatastructureandcompositionprinciplecontinually;"},{name:"The-annual-summary-of-2020.md",path:"/BasicSkill/life/summary/The-annual-summary-of-2020.md",type:"file",mdconf:{abbrlink:"eymmaua1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:267,extension:".md",relative:"/BasicSkill/life/summary/The-annual-summary-of-2020.md",isEmpty:!1,content:"\x3c!--abbrlink:eymmaua1--\x3e###Theannualsummaryof2020*工作*方法论*脑图*开源*create-react-doc*RFC:albumphoto*去过的路*难进*爱在黎明破晓前*新年展望*数据结构跟进*数据库*DeepLearning"}],type:"directory",size:16038},{name:"travel",path:"/BasicSkill/life/travel",children:[{name:"guiling_travel.md",path:"/BasicSkill/life/travel/guiling_travel.md",type:"file",mdconf:{abbrlink:"sd1vcnx7"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1764,extension:".md",relative:"/BasicSkill/life/travel/guiling_travel.md",isEmpty:!1,content:"\x3c!--abbrlink:sd1vcnx7--\x3e###桂林旅游*路线*day1:`漓江竹筏`->兴坪古镇->银子岩溶洞->西街夜景住*->`阿丽拉.阳朔糖舍`->`《印象.刘三姐》`演出、1969酒吧*->三千漓山水人文度假区->山水实景演出《三生三世三千漓》*day2:`热气球俯瞰桂林山水`->`遇龙河竹筏漂流`->龙脊->单程缆车上山->金坑大寨->金佛顶->住龙脊景区*day3:龙脊梯田(早起看日出)->缆车下山->黄洛瑶寨->`靖江王府`->桂林璟象酒店吃自助餐(可以看到象鼻山)->夜游两江四湖->入住碧玉国际大酒店。*`漓江竹筏`:桂林市区坐船->沿着漓江到阳朔->吃饭->坐车返程*内容:可以看到人民币20元人民币“黄布倒影”。*时长:4小时船程。*票价:200+￥。*`三千漓山水人文度假区`*渔家傲主题酒店*三生三世三千漓*时长:1小时*`靖江王府`*东西巷。(非物质文化遗产)*讲古堂*可以挑非物质文化遗产进行学习(制作扇子)*`空中俯瞰桂林山水，热气球游玩`*地点:阳朔燕莎航空营地*方式*系留飞*自由飞*内容*俯瞰遇龙河及阳朔美丽山水*`遇龙河竹筏漂流`*内容:人在画中游*时长:2小时漂流*`印象.刘三姐`*时长:1小时*资源县*河灯节*八角寨*丹霞地貌:山更高，更秃，更险，更难爬*住*阿丽拉.阳朔糖舍*漓江边超美的度假酒店。*晚上有《印象.刘三姐》演出*猫儿山*吃*桂林米粉、螺蛳粉*阳朔*啤酒鱼(依据是否带鳞片判断是否正宗)"},{name:"nanjin_travel.md",path:"/BasicSkill/life/travel/nanjin_travel.md",type:"file",mdconf:{abbrlink:"lez2uxtd"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1253,extension:".md",relative:"/BasicSkill/life/travel/nanjin_travel.md",isEmpty:!1,content:"\x3c!--abbrlink:lez2uxtd--\x3e###NanJinTravel*上午:`总统府`(地铁2/3号线大行宫)->`1912街区`(从总统府出来步行20分钟到1912街,张嘉佳的从你的全世界路过,有很多拍照打卡的地方,吃饭芳满庭、咸亨酒店,地铁2/3号线大行宫5号出口)*下午:`鸡鸣寺`(地铁3/4号线鸡鸣寺站)->`玄武湖`(钟山风景区)*晚上:`夫子庙`(孔庙+学宫+贡院,建议晚上去,地铁3号线夫子庙站)->`秦淮河`(夜游秦淮河)*上午:`中山陵`(钟山风景名胜区,地铁2号线下马坊站,游2中山陵站)->`美龄宫`->`老门东`(逛起来十分舒服的地方,年代砖瓦巷子、豆干/梅花糕/咸亨臭豆腐,有德云社,地铁3号线夫子庙站)*下午:`linefriends`(适合拍照,少女心,地铁站鼓楼站4b出口)->`南京网络小镇“未来号”`(地铁3号线秣周东路2号口步行100米)->(南京博物馆(`需网上预约`、地铁二号线明故宫)->`先锋书店`(世界最美书店之一,能寄明信片))->`狮子桥美食街`(地铁1号线玄武门站)>南京网络小镇“未来号”退役的绿皮火车进行了改造交通:地铁3号线秣周东路2号口步行100米"},{name:"shanghai_travel.md",path:"/BasicSkill/life/travel/shanghai_travel.md",type:"file",mdconf:{abbrlink:"59z4kg6p"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3170,extension:".md",relative:"/BasicSkill/life/travel/shanghai_travel.md",isEmpty:!1,content:"\x3c!--abbrlink:59z4kg6p--\x3e###ShanghaiTravel奇思妙想的时空洞。安龙路527号->巴黎春天->摩微影院(长寿店)*瞳艺3D星空错觉艺术馆:*黄浦区中山东二路531号(外滩十六铺观光码头商城负2楼);*4000808429;营业时间：10:00-21:00;*艾米1895电影街(暂未营业):*如果想安静的看场两个人的电影，不如去静安商圈这家艾米1895电影街，体验一番私人影院的甜蜜感受;*静安区北京西路1829号4楼（近乌鲁木齐路）;*电话：021-32586788;*天真蓝照相馆*上海最美证件照*虹口区哈尔滨路159号(近1913老洋行)*021-61558686*米域有光*由老厂房改造的现代联合办公空间，代号为“曼德拉”(Mandela)，室内直通顶层天窗的白色旋转楼梯，象征着走向自由和光明之路。*`甜爱路`:上海虹口区的甜爱路*邮筒、邮戳，和道路两侧由28首中外著名爱情诗篇组成的“爱情墙”;*东平路*有很多别致的餐厅，适合牵手的午后去品品阳光下午茶，那种静谧私密你一定喜欢;*蒋介石故居爱庐、宋子文别墅、席德懿私宅，还有那家著名的餐厅藏珑坊;*多伦路*八卦名人,还可以留心英国古典主义的走廊,伊斯兰风格的玻璃窗。*武康路，复兴西路，武定路*历史气息的老街,有很多名人故居;*逛累了也可以寻觅一家安静的咖啡馆;*巨鹿路*各色潮流时尚小店驻扎于此,全上海最文艺的书店`渡口书店`;*锦江公园*摩天轮*复兴路*城市山民-谷*武夷路*它是无数风云人物扎堆的街道传奇女作家张爱玲、朦胧派诗人顾城，世界船王包玉刚都曾在这里留下历史身影;*思南路*走在这里偶尔才会有一辆车和几个行人经过*顾村公园(若风推荐)、辰山植物园世博公园,滨江公园,南苑「滨江绿地公园」->衡山路走到桃江路->复兴西路>滨江绿地公园不错->上海最棒的公共露营地*`田子坊`*是约会的极佳场所;*绍兴路*上海最文艺的路;*这条不长的路上有许多出版社、雅致的咖啡馆、静谧的茶社、画室、小花店等。*`vue吧`;###Visited|坐标|项目|推荐指数||:-----------------------|:------------------------------------------------------------------------------------------------------|:------||环球金融中心100层观光厅||※※※※※||长风公园水族馆||※※||衡山路|午后漫步,晚上酒吧街(比较受欢迎的有茏莎、波缽街、欧玛莉、小红楼等)；吃了上海猪手排名榜第一的`衡园酒家`；|※※※※※|"}],type:"directory",size:6187},{name:"widhList.md",path:"/BasicSkill/life/widhList.md",type:"file",mdconf:{abbrlink:"ba26mmbq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:65,extension:".md",relative:"/BasicSkill/life/widhList.md",isEmpty:!1,content:"\x3c!--abbrlink:ba26mmbq--\x3e###心愿清单-[]3D打印机"},{name:"华硕路由器.md",path:"/BasicSkill/life/华硕路由器.md",type:"file",mdconf:{abbrlink:"9ej9m77m"},birthtime:"2022-01-16",mtime:"2022-01-16",size:718,extension:".md",relative:"/BasicSkill/life/华硕路由器.md",isEmpty:!1,content:"\x3c!--abbrlink:9ej9m77m--\x3e###华硕路由器型号:华硕RT-AC88U登录界面:http://router.asus.com/账号:pdd_cloud密码:pdd_cloud123```js2.4GHzNetworkName(SSID)ASUS_E0_2G2.4GHzWirelessSecuritypdd_cloud5GHzNetworkName(SSID)pdd_2G_5G5GHzWirelessSecuritypdd_cloud```初始web管理IP变成`192.168.2.1`###参考资料*[华硕路由器刷梅林固件，挂载SS](https://www.chenshaowen.com/blog/asus-router-brush-merlin-firmware-and-mount-ss.html)*[koolshare.cn](https://koolshare.cn/forum.php?mod=viewthread&tid=139322)*[视频教学](https://www.youtube.com/watch?v=xdIddRVE8qQ)*[使用手册](https://www.asus.com.cn/Networking/RT-AC88U/HelpDesk_Manual/)"}],type:"directory",size:57303},{name:"mobile",path:"/BasicSkill/mobile",children:[{name:"charles.md",path:"/BasicSkill/mobile/charles.md",type:"file",mdconf:{abbrlink:"occuidd3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2018,extension:".md",relative:"/BasicSkill/mobile/charles.md",isEmpty:!1,content:"\x3c!--abbrlink:occuidd3--\x3e###移动端场景下使用Charles代理的优点*解决`移动端真机接口调用不便查看`的问题。*有利于解决`发布到线上环境判断接口是否正常`的问题。###场景一:代理查询接口请求数据`使用场景`:使用代理查询接口请求数据,解决`移动端真机访问页面时查看不了接口调用情况`的问题。*方法:1.打开Charles,配置手机可以代理的端口。菜单栏点击`Proxy`->`ProxySettings`。![](http://with.muyunyun.cn/ec841f0461fa4b37cc333d24127785ee.jpg-400)2.在手机中打开配置代理页面,设置代理地址。1.服务器地址:代理控制台中(内网互联)手机抓包代理列表中的`代理host`。2.端口:代理控制台中(内网互联)手机抓包代理列表中的`代理端口`(在上图中,映射至端口8888)。3.认证:默认关闭。3.Charles上设置要抓包的https地址。(http地址则不需要进行这一步)1.菜单栏点击`Proxy`->`SSLProxyingSettings`4.手机装证书。注意此时手机一定要连代理，然后用手机浏览器访问`chls.pro/ssl`。浏览器会自动下载软件然后安装。(如果无法自动下载,请确认内网互联,手机抓包配置是否正确。)###技巧二:使用本地前端代码调试测试环境数据`使用场景`:使用本地前端代码调试测试环境数据*方法:将测试环境域名代理到本地。1.菜单栏点击`Tools`->`MapRemote`。2.配置测试环境与本地域名。>此时需要将系统设置中的网络代理一栏，全部取消勾选(这里安利笔者写的[flow插件](https://)，支持快速切换代理环境)，然后重启Charles。![](http://with.muyunyun.cn/863fdb087e9b32eabf0c4b3a607235f8.jpg)###场景一与场景二结合使用场景一与场景二是能同时使用的，以达到在真机侧调试本地的代码访问线上的数据。###Charles的不足?"},{name:"mobile_scene.md",path:"/BasicSkill/mobile/mobile_scene.md",type:"file",mdconf:{abbrlink:"4ocu6ahz"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5172,extension:".md",relative:"/BasicSkill/mobile/mobile_scene.md",isEmpty:!1,content:"\x3c!--abbrlink:4ocu6ahz--\x3e###移动端click事件存在300ms时延移动端`click`事件存在`300ms`时延的原因:设备需要根据这段时间用户的操作来判断是单点还是双点。解决思路:使用`touchStart`和`touchEnd`来取代`click`事件。>[相关链接](https://juejin.im/entry/6844903427147825165)###点击穿透点击a标签下的一个返回按钮,触发了a中的href跳转方法同上,也是封装一个`tap`方法;###一些移动端上的有用的css属性*在IOS上增加scroll的灵敏度(出现滑动条):`-webkit-overflow-scrolling:touch;`*滑动场景下防止用户选中文字:`use-select:none;`###scrollTo`scrollTo`这个api作用在滚动子元素的父节点上。但是如果要有平缓的动画效果用其的属性`behavior:'smooth'`是不生效的。解决方案如下:1.方案一:结合`setTimeout`使用`csstransition`属性,在异步时间后移除`transition`;2.方案二:使用`requestAnimationFrame`来完成效果;###移动端1px解决方案手机屏幕上存在`devicePixelRatio`属性,其值为物理像素和屏幕像素之比。方案一:伪元素+`transform:scaleY(0.5)`;方案二:使用box-shadow。`box-shadow`这个方案有个缺陷是画上划线容易。方式如下:```box-shadow:0px-1px0px0pxrgba(245,245,245,1);```但是缺陷是画下划线不便,需要配合`position:relative`以及`z-index`来调整层级。###滑动穿透解决方案-[滑动穿透解决方案](https://github.com/MuYunyun/blog/blob/master/React/%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91/modal.md#%E6%BB%91%E5%8A%A8%E7%A9%BF%E9%80%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88)###移动端适配####分辨率*PPI(PixelPerInch):每英寸包括的像素数*DPI(DotPerInch):每英寸包括的点数####设备独立像素*DP或者DIP(DeviceIndependentPixels):设备独立像素,用于安卓系统;*PT(Point):用于IOS系统;####设备像素比*DPR(devicepixelratio)*物理像素与设备独立像素的比值,浏览器上获取设备像素比的方法`window.devicePixelRatio`;###user-select```css.demo{/*阻止触摸选中文字*/user-select:none;/*阻止B端App保存图片的弹框弹出*/pointer-events:none;/*长按会选中文字*/-webkit-touch-callout:none;}```##移动开发指南*H5:需要发版*组件包:不需要发版*原生:性能高##IOS特有###模拟器中隐藏地址栏与工具栏,便于查看、调试刘海屏样式结论:在IOS大于13版本的机型中，可以点击左上角阅读器图标，选择「隐藏地址栏与工具栏」。![](http://with.muyunyun.cn/0d488254b20c9ffc2146367f1be7a43f.jpg)###IOS13机型中在弹框类组件中使用input光标会消失见[issue](https://github.com/ionic-team/cordova-plugin-ionic-webview/issues/449#issuecomment-541907141)###移动端移除滚动条移除滚动条有一个css属性`-webkit-scrollbar`,其用法如下:```css&::-webkit-scrollbar{display:none;width:0px;}```但是在`IOS`是不生效的,解决方案如下:以竖直滑动为例:在外层设置宽度为400px(假设内容宽度为400px)并设置`overflow-x:hidden`,内层宽度为417px(17px为滚动条宽度)。###解决IOS下输入框自带圆角的问题```css.demo{-webkit-appearance:none;}```>见SearchBar组件开发###IOS下input光标大小调整在IOS中:该行无文字时,光标高度与`line-height`一致;该行有文字时,光标高度从`input`顶部到文字底部(这两种情况都是在有设定`line-height`的时候)，如果没有`line-height`，则是与`font-size`一致(可能表述有误差)。解决方法如下:设置`line-height`为一个较小值(期望的光标大小),再用`padding`来撑开`input`的区域;>见SearchBar组件开发###IOS9兼容情况*`window.scrollTo`在IOS12.1以下的机子下是不兼容的;*`insertAdjacentHTML`虽然在[caniuse](https://caniuse.com/#search=insertAdjacentHTML)中看起来兼容性很好,但是在IOS10.2以下的机子中部分节点是没有这个api的,所以从中也能看出caniuse可以作为部分参考,但不能全信;###IOS8兼容情况`Symbol`、`Map`在ios8中是不支持的![](http://with.muyunyun.cn/2da80724739178534ac4bb03459654d5.jpg)后续陆续兼容以下属性*数组/字符串的`includes`方法,ios9开始支持*document.body.append:###其它兼容*`newDate('xxxx-xx-xxxx:xx')`在IOS系统中会报InvalidDate,在安卓中正常。*兼容方法:`newDate('xxxx/xx/xxxx:xx')`,经验证该方法在IOS与Android都可运行。##Android特有###font-weight在安卓机上失效0~400一种粗细,500~900一种粗细。##IOS&&Android###scrollTop区分Anchor组件```js//document.documentElement.scrollTopdoeffectinios,anddocument.body.scrollTopdoeffectinandroid.constscrollTop=document.documentElement.scrollTop||document.body.scrollTop```"}],type:"directory",size:7190},{name:"node",path:"/BasicSkill/node",children:[{name:"express",path:"/BasicSkill/node/express",children:[],type:"directory",size:0},{name:"how_node.js_resource_code_execute.md",path:"/BasicSkill/node/how_node.js_resource_code_execute.md",type:"file",mdconf:{abbrlink:"4ksah9p1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1108,extension:".md",relative:"/BasicSkill/node/how_node.js_resource_code_execute.md",isEmpty:!1,content:"\x3c!--abbrlink:4ksah9p1--\x3e###笔记系列——Node.js源码是如何执行的###如何调试node源码（IDE选择和断点调试）1.clone源码到本地2.c/c++3步编译安装法,[参考](https://my.oschina.net/surjur/blog/349464)```c./configure--debug//会生成node/out/Debug文件make-j4//-j4为启用4个作业makeinstall```3.根目录下创建测试文件test.js```jsconstfs=require('fs')fs.readFile('./node.gyp',{encoding:'utf-8'},function(e,content){console.log(content)})```4.IDE使用clion,配置Run->EditConfigureations,配置内容如下:*选择out/Debug/node作为执行文件*添加test.js作为命令行参数,也可以添加node的其他参数,比如--expose-gc*Beforelaunch栏中build去掉![](http://with.muyunyun.cn/747aa17d5be5e261b7a580c10880365f.jpg-400)5.点击OK按钮即完成配置,在src/node_file.cc的1592行`staticvoidRead(constFunctionCallbackInfo<Value>&args)`增加断点,此时Run->Debug'node'即可进入调试界面###编译步骤"},{name:"implement_express.js.md",path:"/BasicSkill/node/implement_express.js.md",type:"file",mdconf:{abbrlink:"ihnj19r1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6628,extension:".md",relative:"/BasicSkill/node/implement_express.js.md",isEmpty:!1,content:"\x3c!--abbrlink:ihnj19r1--\x3e###expressexpress是一个基于node.js封装的框架。该[expressdemo](https://github.com/MuYunyun/blog/blob/master/Basic%20Skill/node.js/express/index.js)主要实现的功能点:*路由模块*中间件模块*正则匹配路由*静态文件处理###路由和中间件####版本一```js//测试用例constapp=express()//测试路由app.get('/',function(req,res){res.end('helloexpress')})//测试中间件app.use((req,res,next)=>{console.log('thisismiddleware1')next()})app.use((req,res,next)=>{console.log('thisismiddleware2')next()})app.listen(3000,function(req,res){console.log('serverislisteningport3000')})//thisismiddleware1//thisismiddleware2//helloexpress``````jsconsthttp=require('http')consturl=require('url')constcore=function(req,res){constmethod=req.method.toLocaleLowerCase()constobj=url.parse(req.url,true)constpathname=obj.pathnameconstcb=hitRouting(method,pathname)//这里插入中间件next(req,res)cb(req,res)}core.listen=function(port,fn){//挂载到core函数上http.createServer(core).listen(port,'127.0.0.1',fn)//核心还是这条语句,即对node的封装}constmethods=['post','get','delete','options','head']methods.map(method=>{core[method]=(path,cb)=>core.routes.push({method,path,cb})})core.routes=[]//路由队列core.middlewares=[]//中间件队列//命中路由,获取回调consthitRouting=function(method,pathname){letcb=(req,res)=>res.end('nohitrouting')core.routes.map((r,index)=>{if(r.method===method&&r.path===pathname){cb=r.cbreturn}})returncb}core.use=function(middlewareFn){core.middlewares.push(middlewareFn)}leti=0constnext=function(req,res){//express中间件的核心实现consthandler=core.middlewares[i++]if(!handler){return}handler(req,res,next)}constexpress=function(){returncore}```版本一的路由和中间件是分为两个数组分别进行管理的；但是当看到next()函数又联想到可以借助generator函数来实现路由和中间件的集中管理(把中间件也当成是一个路由),所以有了版本二的实现。####版本二版本二相较于版本一最主要是遍历方式的改变,改为迭代器方式。```js//测试路由app.get('/test/abc',function(req,res){res.end('helloexpress')})//测试中间件app.use('/test',function(req,res,next){console.log('thisismiddleware')next()})app.listen(3000,function(req,res){console.log('serverislisteningport3000')})```测试用例进行了改动,比如当访问`/test/abc`路由的时候,其实也命中了`/test`中间件,所以此时中间件内的代码也会执行。```jsconsthttp=require('http')consturl=require('url')constcore=function(req,res){constmethod=req.method.toLocaleLowerCase()constobj=url.parse(req.url,true)constpathname=obj.pathnamehitRouting(core.routes,method,pathname)(req,res)}core.listen=function(port,fn){//挂载到core函数上http.createServer(core).listen(port,'127.0.0.1',fn)//核心还是这条语句,即对node的封装}core.routes=[]//路由队列constmethods=['post','get','delete','options','head','use']methods.map(method=>{core[method]=(path,cb)=>core.routes.push({method,path,cb})})function*generator(arr){//引人Generator函数yield*arr}consthitRouting=function(routes,method,pathname){//将中间件也当作是路由constlazy=generator(routes)returnfunction(req,res){(functionnext(){consttmp=lazy.next().valueif(!tmp){return}if(tmp.method===method&&tmp.path===pathname){//命中路由tmp.cb(req,res)next()}elseif(tmp.method==='use'&&(tmp.path==='/'||pathname.startsWith(tmp.path))){//命中中间件tmp.cb(req,res,next)}else{next()//跳过}}())}}constexpress=function(){returncore}```###路由正则匹配```js//测试用例app.get('/blog/:id',function(req,res){//扩展功能①:希望能匹配/blog/123console.log(req.param.id)//扩展功能②:希望能通过req.param.id获取到相应参数res.end('test/blog/:id')})```上述功能简要实现如下:```jsconsthitRouting=function(routes,method,pathname){//将中间件也当作是路由constlazy=generator(routes)returnfunction(req,res){(functionnext(){consttmp=lazy.next().valueconstreg=newRegExp(tmp.path.replace(/:id/g,'\\\\d+'))if(tmp.method===method&&reg.test(pathname)){//匹配/blog/:id,这里仅仅举个例子constarr=tmp.path.split(':')constpathNameArr=pathname.split('/')constobj={}obj[arr[1]]=pathNameArr[pathNameArr.length-1]req.param=obj//实现req.param.id获取idtmp.cb(req,res)next()}...}())}}```###静态资源的访问如果在浏览器中输入`http://127.0.0.1:3000/index.html`,此时并不能处理这种情况,接着加上访问静态资源的逻辑,代码如下:```jsconstcore=function(req,res){constmethod=req.method.toLocaleLowerCase()constobj=url.parse(req.url,true)constpathname=obj.pathnameconstext=path.extname(pathname).slice(1)if(ext){//处理静态文件请求handleStaticFile(res,staticPath,ext)}...}//处理静态文件类型consthandleStaticFile=function(res,staticPath,ext){constmime={\"html\":\"text/html\",\"css\":\"text/css\",\"js\":\"text/javascript\",\"json\":\"application/json\",\"gif\":\"image/gif\",\"ico\":\"image/x-icon\",\"jpeg\":\"image/jpeg\",\"jpg\":\"image/jpeg\",\"png\":\"image/png\"}fs.exists(staticPath,(exist)=>{if(!exist){res.writeHead(404,{'Content-Type':'text/plain'})res.write('Therequestfailed')res.end()}else{fs.readFile(staticPath,(err,data)=>{if(err)throwerrres.writeHead(200,{'Content-Type':mime[ext]||'text/plain'})res.write('Therequestsuccess')res.end()})}})}```"},{name:"implement_koa.js.md",path:"/BasicSkill/node/implement_koa.js.md",type:"file",mdconf:{abbrlink:"pd6i666j"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2474,extension:".md",relative:"/BasicSkill/node/implement_koa.js.md",isEmpty:!1,content:"\x3c!--abbrlink:pd6i666j--\x3e[项目实现源码](https://github.com/MuYunyun/blog/tree/master/BasicSkill/node/koa)该简版koa的实现包含以下4个步骤:*http模块的封装*整合Request、Response、Context对象*中间件*错误捕获###http模块的封装koa区别于express的一个点是其采用了ES6语法进行书写。[相关代码](https://github.com/MuYunyun/blog/blob/7bdad6158a6d49bc3a99123a054b0934034cc598/BasicSkill/node/koa/application.js#L17)###整合Request、Response、Context对象koa的用法区别于express的一点,是将req,res封装进ctx对象中```js//expressapp.get('/test/abc',function(req,res){res.end('helloexpress')})//koaapp.use(async(ctx)=>{ctx.body=`hellokoa`})```[相关代码](https://github.com/MuYunyun/blog/blob/7bdad6158a6d49bc3a99123a054b0934034cc598/BasicSkill/node/koa/application.js#L52)###中间件koa2的中间件是基于async实现的,所以一起来探究关于async前置知识点:```jsasyncfunctionm1(next){console.log('m1')awaitnext()}asyncfunctionm2(next){console.log('m2')awaitnext()}asyncfunctionm3(){console.log('m3')}```如何将m1,m2,m3串联起来呢？```jsvarnext1=asyncfunction(){awaitm2(next2)}varnext2=asyncfunction(){awaitm3()}m1(next1)```接着将以上函数进行抽象:```jsvarcreateAsync=function(fn,next){returnasyncfunction(){awaitfn(next)}}varnext3=createAsync(m3,null)varnext2=createAsync(m2,next3)varnext1=createAsync(m1,next2)next1()```再尝试优化:```jsvararr=[m1,m2,m3]varnextfor(leti=arr.length-1;i>0;i--){next=createAsync(arr[i],next)}next()```在上篇express的实现中,[中间件](https://github.com/MuYunyun/blog/blob/7bdad6158a6d49bc3a99123a054b0934034cc598/BasicSkill/node/express/index.js#L55)采用了generator来实现,而本篇koa则使用了上文所述的async/await知识点来完成。[相关代码](https://github.com/MuYunyun/blog/blob/7bdad6158a6d49bc3a99123a054b0934034cc598/BasicSkill/node/koa/application.js#L25)###错误捕获此外完善的框架都有相应的错误捕获机制,因此当程序`thrownewError()`抛错时,也进行了相应的错误捕获,[相关代码](https://github.com/MuYunyun/blog/blob/7bdad6158a6d49bc3a99123a054b0934034cc598/BasicSkill/node/koa/application.js#L70)"},{name:"koa",path:"/BasicSkill/node/koa",children:[{name:"application.md",path:"/BasicSkill/node/koa/application.md",type:"file",mdconf:{abbrlink:"gmnx4ffo"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2127,extension:".md",relative:"/BasicSkill/node/koa/application.md",isEmpty:!1,content:"\x3c!--abbrlink:gmnx4ffo--\x3e```jsconsthttp=require('http')constEventEmitter=require('events')constcontext=require('./context')constrequest=require('./request')constresponse=require('./response')classKoaextendsEventEmitter{constructor(){super()this.middlewares=[]this.context=contextthis.request=requestthis.response=response}listen(...args){http.createServer(this.callback()).listen(...args)}use(fn){this.middlewares.push(fn)}//引人中间件compose(ctx){constcreateAsync=function(fn,next){returnasyncfunction(){awaitfn(ctx,next)}}letnext=asyncfunction(){//返回Promise对象,从而进行后文fn.then().catch()调用returnPromise.resolve()}for(leti=this.middlewares.length-1;i>=0;i--){next=createAsync(this.middlewares[i],next)}returnnext()}callback(){return(req,res)=>{constctx=this.createCtx(req,res)consthandle=()=>this.handleRes(ctx)consterrHandle=(err)=>this.handleErr(err,ctx)constfn=this.compose(ctx)fn.then(handle).catch(errHandle)}}//将req,res封装进ctx对象中createCtx(req,res){constctx=Object.create(this.context)ctx.request=Object.create(this.request)ctx.response=Object.create(this.response)ctx.req=ctx.request.req=reqctx.res=ctx.response.res=resreturnctx}handleRes(ctx){if(typeof(ctx.body)==='string'){ctx.statusCode&&ctx.res.writeHead(ctx.statusCode)ctx.res.end(ctx.body)}elseif(typeof(ctx.body)==='object'){ctx.statusCode&&ctx.res.writeHead(ctx.statusCode)ctx.res.end(JSON.stringify(ctx.body))}}//引人错误机制handleErr(err,ctx){if(err.code==='ENOENT'){ctx.statusCode=404}else{ctx.statusCode=500}constmsg=err.message||'InternalError'ctx.res.end(msg)this.emit('error',err)}}module.exports=Koa```"},{name:"context.md",path:"/BasicSkill/node/koa/context.md",type:"file",mdconf:{abbrlink:"5ljtr9ki"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1303,extension:".md",relative:"/BasicSkill/node/koa/context.md",isEmpty:!1,content:"\x3c!--abbrlink:5ljtr9ki--\x3e```js//这个文件为上下文文件,可以理解为承上启下作用//module.exports={//getquery(){//returnthis.request.query//比如这个this.request为./request.js中的内容//},//setbody(content){//this.response.body=content//比如这个this.response.body为./response.js的内容//},//getbody(){//returnthis.response.body//},//}//当context中属性越来越多,我们可以使用__defineGetter__以及__defineSetter__//属性封装相应方法来减少重复劳动,日后要增加属性只要在数组中填入相应字段就行。constproto={}functionset(type,property){proto.__defineSetter__(property,function(val){this[type][property]=val//这里this指向proto,原因指向调用函数的对象})}functionget(type,property){proto.__defineGetter__(property,function(){returnthis[type][property]})}constsetRequest=[]constgetRequest=['query']constsetResponse=['body','statusCode']constgetResponse=['body','statusCode']getRequest.forEach(r=>{get('request',r)})setResponse.forEach(r=>{set('response',r)})getResponse.forEach(r=>{get('response',r)})module.exports=proto```"},{name:"example",path:"/BasicSkill/node/koa/example",children:[{name:"test1.md",path:"/BasicSkill/node/koa/example/test1.md",type:"file",mdconf:{abbrlink:"1ng1nt4v"},birthtime:"2022-01-16",mtime:"2022-01-16",size:265,extension:".md",relative:"/BasicSkill/node/koa/example/test1.md",isEmpty:!1,content:"\x3c!--abbrlink:1ng1nt4v--\x3e###第一版测试:封装http```jsconstKoa=require('../application')constapp=newKoa()app.use((req,res)=>{res.end('hellokoa')})app.listen(3000,'127.0.0.1',()=>{console.log('listeningonthe3000')})```"},{name:"test2.md",path:"/BasicSkill/node/koa/example/test2.md",type:"file",mdconf:{abbrlink:"fdtrlgsv"},birthtime:"2022-01-16",mtime:"2022-01-16",size:880,extension:".md",relative:"/BasicSkill/node/koa/example/test2.md",isEmpty:!1,content:"\x3c!--abbrlink:fdtrlgsv--\x3e###第二版测试:封装request,response,context对象```jsconstKoa=require('../application')constapp=newKoa()////测试自定义扩展//app.context.handle=function(errNo=0,data,errMsg){//this.res.setHeader('Content-Type','application/json;charset=utf-8')////注意this指向调用函数的对象,也就是ctx//this.body={//errNo,//data,//errMsg//}//}////调用自定义扩展//app.use(async(ctx)=>{//ctx.handle({//errNo:0,//data:{//name:'小明',//},//errMsg:'success',//})//})//第二版最主要目的是把app.use(req,res)参数转化为简洁的写法如下:app.use(async(ctx)=>{ctx.body=`hello${ctx.query.name}`})app.listen(3000,'127.0.0.1',()=>{console.log('listeningonthe3000')})```"},{name:"test3.md",path:"/BasicSkill/node/koa/example/test3.md",type:"file",mdconf:{abbrlink:"blt3zrpt"},birthtime:"2022-01-16",mtime:"2022-01-16",size:494,extension:".md",relative:"/BasicSkill/node/koa/example/test3.md",isEmpty:!1,content:"\x3c!--abbrlink:blt3zrpt--\x3e###第三版测试:测试中间件```jsconstKoa=require('../application')constapp=newKoa()constresponseData={}app.use(async(ctx,next)=>{responseData.name='xiaoming'awaitnext()ctx.body=responseData})app.use(async(ctx,next)=>{responseData.gender='male'awaitnext()})app.use(async(ctx)=>{responseData.habbit='music'})app.listen(3000,'127.0.0.1',()=>{console.log('listeningonthe3000')})```"},{name:"test4.md",path:"/BasicSkill/node/koa/example/test4.md",type:"file",mdconf:{abbrlink:"waf5nnpe"},birthtime:"2022-01-16",mtime:"2022-01-16",size:411,extension:".md",relative:"/BasicSkill/node/koa/example/test4.md",isEmpty:!1,content:"\x3c!--abbrlink:waf5nnpe--\x3e//完善的框架都有相应的错误捕获机制constKoa=require('../application')constapp=newKoa()constresponseData={}//第四版测试:错误机制测试app.use(async(ctx,next)=>{thrownewError('ooops')})app.on('error',(err)=>{console.log('111',err.stack)})app.listen(3000,'127.0.0.1',()=>{console.log('listeningonthe3000')})"}],type:"directory",size:2050},{name:"request.md",path:"/BasicSkill/node/koa/request.md",type:"file",mdconf:{abbrlink:"6nqz8uu6"},birthtime:"2022-01-16",mtime:"2022-01-16",size:154,extension:".md",relative:"/BasicSkill/node/koa/request.md",isEmpty:!1,content:"\x3c!--abbrlink:6nqz8uu6--\x3e```jsconsturl=require('url')module.exports={getquery(){returnurl.parse(this.req.url,true).query}}```"},{name:"response.md",path:"/BasicSkill/node/koa/response.md",type:"file",mdconf:{abbrlink:"ccqvbb9c"},birthtime:"2022-01-16",mtime:"2022-01-16",size:346,extension:".md",relative:"/BasicSkill/node/koa/response.md",isEmpty:!1,content:"\x3c!--abbrlink:ccqvbb9c--\x3e```jsmodule.exports={getbody(){returnthis._body},setbody(content){this._body=content//创造一个名为_body的变量并给之赋值},getstatusCode(){returnthis.res.statusCode//返还状态码},setstatusCode(code){this.res.statusCode=code}}```"}],type:"directory",size:5980},{name:"read_node_document",path:"/BasicSkill/node/read_node_document",children:[{name:"Child_Process.md",path:"/BasicSkill/node/read_node_document/Child_Process.md",type:"file",mdconf:{abbrlink:"2pv369sc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:233,extension:".md",relative:"/BasicSkill/node/read_node_document/Child_Process.md",isEmpty:!1,content:"\x3c!--abbrlink:2pv369sc--\x3e###ChildProcess*`child_process.exec()`*execcommand.*`child_process.execFile()`*execfilesuchasgit.*`child_process.fork()`*`child_process.execSync()`*`child_process.execFileSync()`"},{name:"CommonJS.md",path:"/BasicSkill/node/read_node_document/CommonJS.md",type:"file",mdconf:{abbrlink:"xzgfrc3n"},birthtime:"2022-01-16",mtime:"2022-01-16",size:240,extension:".md",relative:"/BasicSkill/node/read_node_document/CommonJS.md",isEmpty:!1,content:"\x3c!--abbrlink:xzgfrc3n--\x3e###CommonJSmodules*`require.resolve(request[,options])`*Usetheinternalrequire()machineryto`lookupthelocationofamodule`,butratherthanloadingthemodule,justreturntheresolvedfilename."},{name:"FileSystem.md",path:"/BasicSkill/node/read_node_document/FileSystem.md",type:"file",mdconf:{abbrlink:"jwdjdbiz"},birthtime:"2022-01-16",mtime:"2022-01-16",size:985,extension:".md",relative:"/BasicSkill/node/read_node_document/FileSystem.md",isEmpty:!1,content:"\x3c!--abbrlink:jwdjdbiz--\x3e###fs.Stats```jsStats{dev:2114,ino:48064969,mode:33188,nlink:1,uid:85,gid:100,rdev:0,size:527,blksize:4096,blocks:8,atimeMs:1318289051000.1,mtimeMs:1318289051000.1,ctimeMs:1318289051000.1,birthtimeMs:1318289051000.1,atime:Mon,10Oct201123:24:11GMT,mtime:Mon,10Oct201123:24:11GMT,ctime:Mon,10Oct201123:24:11GMT,birthtime:Mon,10Oct201123:24:11GMT}```Today,I'lldiffatime、mtime、ctimeandbirthtimeinNode.js.*`atime`:oraccesstime,isupdatedwhenthefile’scontentsarereadbyanapplicationoracommandsuchas`grep`or`cat`.*`mtime`:ormodificationtime,iswhenthefilewaslastmodified.Whenyouchangethecontentsofafile,itsmtimechanges.*`ctime`,orchangetime,iswhenthefile’spropertychanges.Itwillalwaysbechangedwhenthemtimechanges,butalsowhenyouchangethefile’spermissions,nameorlocation."},{name:"OS.md",path:"/BasicSkill/node/read_node_document/OS.md",type:"file",mdconf:{abbrlink:"mqae338m"},birthtime:"2022-01-16",mtime:"2022-01-16",size:344,extension:".md",relative:"/BasicSkill/node/read_node_document/OS.md",isEmpty:!1,content:"\x3c!--abbrlink:mqae338m--\x3e###OSAPI*`os.hostname()`*Returnsthehostnameoftheoperatingsystemasastring.*eg:'cloud-2.local'*`os.platform()`*Returnsastringidentifyingtheoperatingsystemplatform.*eg:'darwin'*`os.homedir()`*Returnsthestringpathofthecurrentuser'shomedirectory.*'/Users/mac'"},{name:"Path.md",path:"/BasicSkill/node/read_node_document/Path.md",type:"file",mdconf:{abbrlink:"btqo89gy"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1658,extension:".md",relative:"/BasicSkill/node/read_node_document/Path.md",isEmpty:!1,content:"\x3c!--abbrlink:btqo89gy--\x3e###path模块*`path.basename(path[,ext])`:返回文件名。```jspath.basename('/foo/bar/baz/asdf/quux.html')//Returns:'quux.html'path.basename('/foo/bar/baz/asdf/quux.html','.html')//Returns:'quux'```*`path.dirname(path)`:返回路径地址。```jspath.dirname('/foo/bar/baz/asdf/quux')//Returns:'/foo/bar/baz/asdf'```*`path.exename(path)`:如果最后一个`.`之前若有字符,则返回`.`和后面的字符,否则返回''。```jspath.extname('index.html')//Returns:'.html'path.extname('index.coffee.md')//Returns:'.md'path.extname('index.')//Returns:'.'path.extname('index')//Returns:''path.extname('.index')//Returns:''path.extname('.index.md')//Returns:'.md'```*`path.join()`:将传入的参数进行合并。```jspath.join('/foo','bar','baz/asdf','quux','..')//Returns:'/foo/bar/baz/asdf'```*`path.resolve()`:返回绝对路径(绝对路径以`/`开头),注意该api遵循`从右向左最小匹配`原则。```jspath.resolve('/foo','/bar','baz')//根据从右向左匹配原则,/bar与baz组成了绝对路径,所以返回的结果是/bar/bazpath.resolve('wwwroot','static_files/png/','../gif/image.gif');//Ifthecurrentworkingdirectoryis/home/myself/node,//thisreturns'/home/myself/node/wwwroot/static_files/gif/image.gif'```*`path.relative(from,to)`:返回相对路径,其为`to路径`相对`from路径`的差值。```jspath.relative('/data/orandea/test/aaa','/data/orandea/impl/bbb')//Returns:'../../impl/bbb'```*`path.normalize`*使用场景:兼容跨平台路径"},{name:"Process.md",path:"/BasicSkill/node/read_node_document/Process.md",type:"file",mdconf:{abbrlink:"otv24kqd"},birthtime:"2022-01-16",mtime:"2022-01-16",size:366,extension:".md",relative:"/BasicSkill/node/read_node_document/Process.md",isEmpty:!1,content:"\x3c!--abbrlink:otv24kqd--\x3e###ProcessProcess模块继承自eventEmitter模块。####Event:exit监听:```jsprocess.on('exit',(code)=>{...})```>注意的是process.on()中第二个参数必须是同步函数;触发时机:1.调用`process.exit()`;2.Node.js事件循环中不再有额外的工作要执行;toread:SignalEvents"},{name:"Readline.md",path:"/BasicSkill/node/read_node_document/Readline.md",type:"file",mdconf:{abbrlink:"ybc4sjim"},birthtime:"2022-01-16",mtime:"2022-01-16",size:365,extension:".md",relative:"/BasicSkill/node/read_node_document/Readline.md",isEmpty:!1,content:"\x3c!--abbrlink:ybc4sjim--\x3e###Usage```jsconstreadline=require('readline');constrl=readline.createInterface({input:process.stdin,output:process.stdout});rl.question('WhatdoyouthinkofNode.js?',(answer)=>{//TODO:Logtheanswerinadatabaseconsole.log(`Thankyouforyourvaluablefeedback:${answer}`);rl.close();});```"},{name:"TTY.md",path:"/BasicSkill/node/read_node_document/TTY.md",type:"file",mdconf:{abbrlink:"9roar8te"},birthtime:"2022-01-16",mtime:"2022-01-16",size:62,extension:".md",relative:"/BasicSkill/node/read_node_document/TTY.md",isEmpty:!1,content:"\x3c!--abbrlink:9roar8te--\x3e###TTYTTY:shortforterminal."},{name:"Utilities.md",path:"/BasicSkill/node/read_node_document/Utilities.md",type:"file",mdconf:{abbrlink:"73ctc6w6"},birthtime:"2022-01-16",mtime:"2022-01-16",size:121,extension:".md",relative:"/BasicSkill/node/read_node_document/Utilities.md",isEmpty:!1,content:'\x3c!--abbrlink:73ctc6w6--\x3e###Api*promisify:callbackpromise化```jsconst{promisify}=require("util");```'}],type:"directory",size:4374}],type:"directory",size:20564},{name:"project_framework",path:"/BasicSkill/project_framework",children:[{name:"CAS登入流程.md",path:"/BasicSkill/project_framework/CAS登入流程.md",type:"file",mdconf:{abbrlink:"p7j9m7jg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1918,extension:".md",relative:"/BasicSkill/project_framework/CAS登入流程.md",isEmpty:!1,content:"\x3c!--abbrlink:p7j9m7jg--\x3e本文对CAS(CentralAuthenticationService)流程作个梳理。###什么是CAS中央认证服务([CAS](https://github.com/apereo/cas))是是单点登录(SSO)的一种方案。使用它后所有应用可以公用一套登录系统,在任意一个应用中进行登录后,其它应用便无须再次登录。CAS分为CASClient和CASServer,它们分工如下:CASClient:处理对受保护方应用的访问请求(可以理解成网关项目);CASServer:处理账号、密码的认证,需要独立部署(部署在后端那边);###以Batman系统为例剖析登录CAS系统的流程下面以Batman为例对CAS(CentralAuthenticationService)流程作个梳理。![](http://with.muyunyun.cn/89fccb6391b0697815078d6f725dc124.jpg)1.在浏览器中输入batman.dianwoda.cn;2.如果没有登录(session里没有相应信息),则重定向到`https://cas.nidianwo.com/login?service=http%3A%2F%2Fbatman.dianwoda.cn%2F`;3.输入账号密码进行认证;4.CASServer下发ticket;5.校验ticket;6.校验通过,重定向回batman.dianwoda.cn;>登录了batman以后,再在浏览器输入http://newhawkeye.dianwoda.com不用再次登录的原因？在CASServer中进行了判断,如果已经登录过,则省略了步骤3。>在batman登录了CAS系统以后,为什么还要`fetchhttps://cas.nidianwo.com/login?service=http://batman-gateway.dianwoda.com/auth/cas`应该是网关的搭建原因。batman的CASClient在后端那里,batman-gateway作为一个node项目相当于又作为了一个CASClient。在已经登录CAS的基础上,访问`https://cas.nidianwo.com/login?service=http://batman-gateway.dianwoda.com/auth/cas`相当于执行上图的2、4、5步骤(省略了步骤3)###相关链接*[CAS实现SSO单点登录原理](https://blog.csdn.net/cruise_h/article/details/51013597)"},{name:"RPC在点我达网关的实践一.md",path:"/BasicSkill/project_framework/RPC在点我达网关的实践一.md",type:"file",mdconf:{abbrlink:"exzzjh9z"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5147,extension:".md",relative:"/BasicSkill/project_framework/RPC在点我达网关的实践一.md",isEmpty:!1,content:"\x3c!--abbrlink:exzzjh9z--\x3e###RPC是什么*RPC(RemoteProcedureCall)译为远端过程调用。即在一台机子上能调用到另外一台机子上的服务;*RPC可以基于HTTP调用也可以基于TCP调用。基于TCP调用性能更佳,但是实现也更为复杂;*RPC通常要实现两部分协议,一个是应用层协议(如JSON),一个是用来传输数据的通讯层协议(如Dubbo);###RPC调用过程1.调用方通过本地网关调用相应服务;2.网关将服务名和参数封装为RPC对象传给客户端RPC框架(@dwd/noob-client);3.客户端RPC框架(@dwd/noob-client)将数据转化成二进制形式,然后以TCP的形式传递给服务端RPC框架;4.服务端RPC框架将二进制数据反序列化为RPC对象,并交由服务方处理,服务端处理后返回结果;5.执行上述阶段的逆序操作;>关于RPC细节点,可以阅读[聊聊Node.jsRPC（一）—协议](https://www.yuque.com/egg/nodejs/dklip5)###结合代码分析Java包的调用过程####初始化阶段——RPC调用之前在项目刚启动阶段,网关项目会通过zk(路由管理系统)进行路由寻址(寻找相应后端组的服务),后续网关项目就能和相应的后端组的服务直接通讯了。在初始化阶段,网关项目会将项目信息、注册区域(异地多活)、所需服务等传递给[@dwd/noob-client](http://192.168.1.66:9090/FE/noob-client),相关代码如下:```jsimport{Client}from'@dwd/noob-client'constclient=newClient({application:{//项目信息name:config.name,},registry:config.registry,//注册区域reference:config.references,//所需服务routerServer:{address:routerAddress},})returnclient.init().then(()=>{for(constrofconfig.references){loadService(r.id)}})```####根据xml文件生成相关的包文件在项目伊始时,会通过后端给出的xml文件,根据脚本生成相应包的ts文件。比如以下代码为骑手服务组的一个包的ts文件。```tsimport{Reference}from'@dwd/noob'import{provideService,javaType}from'../../util/dubbo'@provideService('com.dianwoba.rider.elastic.provider.RiderElasticProvider')exportdefaultclassRiderElasticProviderimplementscom.dianwoba.rider.elastic.provider.RiderElasticProvider{constructor(private_ref:Reference<com.dianwoba.rider.elastic.provider.RiderElasticProvider>){}asyncpageSearch(@javaType({\"name\":\"com.dianwoba.rider.elastic.domain.dto.param.RiderEsParamDTO\",\"isPrimitive\":false,\"isArray\":false,\"isGeneric\":false})paramDTO:com.dianwoba.rider.elastic.domain.dto.param.RiderEsParamDTO):Promise<com.dianwoba.dubbo.base.result.Pagination<com.dianwoba.rider.elastic.domain.dto.result.RiderEsDTO>>{returnthis._ref.invoke('pageSearch',Array.from(arguments))}...}```####RiderElasticProvider的实例化网关的核心架构使用了IoC框架[inverify](https://github.com/inversify/InversifyJS)。在IoC架构下,实例化的过程在容器内进行。在上述代码点开`provideService`方法,可以看到实例化的过程`newServiceClass(reference)`,代码如下:```ts//dubbo.tsimport{Client}from'@dwd/noob-client'exportconstprovideService=<T>(interfaceName:string)=>(ServiceClass:interfaces.Newable<T>)=>{constreference=Client.reference.get(interfaceName)//获取远程引用资源constservice=proxyService(newServiceClass(reference),interfaceName)//代理实例对象,下文解析moduleBind<T>(interfaceName).toConstantValue(service)//依赖注入}```>`reference`对象的`__proto__`属性上有invoke方法(继承自@dwd/noob)####proxyService代理proxyService方法的作用给包类的每个方法做了一层代理,代理的具体作用是将传入参数和包名包装为RPC对象。```ts//dubbo.tsfunctionproxyService<T>(service:T,identifier:string){lethandler={apply:function(target:Function,thisArgument:any,argumentsList:any[]){letfuncName=target.name//获取前面代码@javaType({})中声明的对象letparamTypes:JavaType[]=Reflect.getMetadata(JAVATYPE_SYMBOL,service,funcName)//工厂模式创建转化为RPC对象的方法lettransform=converter.methodParameterTransformerFactory(...paramTypes)//将传入参数和包名转化为RPC对象letargs=transform(argumentsList)returntarget.apply(thisArgument,args)}}Object.getOwnPropertyNames(Object.getPrototypeOf(service)).filter(name=>name!=='constructor'&&!name.startsWith('_')).forEach(methodName=>{service[methodName]=newProxy(service[methodName],handler)//将原型链上service[methodName]赋值到service[methodName]上,并用handler进行代理})returnservice}```###番外笔记####ts的语法```tsclassTest{constructor(private_ref){}}```ts转换为js的形式如下```jsfunctionTest(_ref){this._ref=_ref}```"},{name:"解读IoC框架InversifyJS.md",path:"/BasicSkill/project_framework/解读IoC框架InversifyJS.md",type:"file",mdconf:{abbrlink:"9szgkw3d"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3845,extension:".md",relative:"/BasicSkill/project_framework/解读IoC框架InversifyJS.md",isEmpty:!1,content:"\x3c!--abbrlink:9szgkw3d--\x3e###解读IoC框架InversifyJSInversityJS是一个IoC框架。IoC(InversionofControl)包括依赖注入(DependencyInjection)和依赖查询(DependencyLookup)。相比于类继承的方式,控制反转解耦了父类和子类的联系。###案例解析```tsimport'reflect-metadata'import{inject,injectable,Container}from'inversify'constcontainer=newContainer()@injectable()classPopMusic{getName(){return'流行音乐'}}container.bind('request1').to(PopMusic)@injectable()classClassicalMusic{getName(){return'古典音乐'}}container.bind('request2').to(ClassicalMusic)@injectable()classMusic{pm:anycm:anyconstructor(@inject('request1')popMusic:any,@inject('request2')classicalMusic:any){this.pm=popMusicthis.cm=classicalMusic}getName(){constresult=this.pm.getName()+this.cm.getName()returnresult}}container.bind('Plan').to(Music)constmusic:any=container.get('Plan')console.log(music.getName())//流行音乐古典音乐```上述案例可以抽象为下图:![explain](http://with.muyunyun.cn/8a9ccba28d00ea0c752c3601d716ebcd.jpg-400)>虚线表示可以注入,但在代码中没有表现出来。代码流程可概括如下:1.将所有相关类(这里指Music、popMusic、classicMusic)通过`@injectable`声明进`container`容器;2.通过`container.get()`获取`container.bind().to(target)`中的目标对象(这里指Music);3.如果目标对象中的constructor()里有`@inject()`,则将相应的实例(这里指PopMusic与classicalMusic的实例)当作构造函数的参数'注入';###inject/injectable相关源码inject源码简化如下:```js//这是一个属性装饰器functioninject(serviceIdentifier){returnfunction(target,targetKey){constmetadataValue={[targetKey]:[Metadata{key:'inject',value:serviceIdentifier})]}Reflect.defineMetadata('inversify:tagged_props',metadataValue,target.constructor);}}```injectable源码简化如下:```js//这是一个类装饰器functioninjectable(){returnfunction(target){constmetadataValue=[]Reflect.defineMetadata('inversify:paramtypes',metadataValue,target)returntarget}}```从简化版源码中可以看到inject/injectable最终是对`Reflect.defineMetadata()`的一个使用。可以将metadata看成是一种相对高效的数据结构。####reflect-metadataInversityJS深度结合了[reflect-metadata](https://github.com/rbuckton/reflect-metadata),reflect-metadata在Reflect基础上对其api进行了扩展。>metadata本质上是一个`WeakMap`对象。扩展:[Map和WeakMap的区别](https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/字典.md#map-和-weakmap-的区别)`Reflect.defineMetadata(metadataKey,metadataValue,target[,propertyKey])`简化版实现如下:```jsconstMetadata=newWeakMap()functiondefineMetadata(metadataKey,metadataValue,target,propertyKey){metadataMap=newMap()metadataMap.set(metadataKey,metadataValue)targetMetadata=newMap()targetMetadata.set(propertyKey,metadataMap)Metadata.set(target,targetMetadata)}````Reflect.getOwnMetadata(metadataKey,target[,propertyKey])`简化版实现如下:```jsfunctiongetOwnMetadata(metadataKey,target,propertyKey){vartargetMetadata=Metadata.get(target)varmetadataMap=targetMetadata.get(propertyKey)returnmetadataMap.get(metadataKey)}```其数据结构可表示如下:```jsWeakMap{target:Map{propertyKey:Map{metadataKey:metadataValue}}}```###相关链接*[Architectureoverview](https://github.com/inversify/InversifyJS/blob/master/wiki/architecture.md)"},{name:"踩坑日志以及痛点.md",path:"/BasicSkill/project_framework/踩坑日志以及痛点.md",type:"file",mdconf:{abbrlink:"jigw9ep9"},birthtime:"2022-01-16",mtime:"2022-01-16",size:894,extension:".md",relative:"/BasicSkill/project_framework/踩坑日志以及痛点.md",isEmpty:!1,content:"\x3c!--abbrlink:jigw9ep9--\x3e###前端项目中的global对象webpack项目中是能使用global的。```js(function(global){})(window)```###浏览器竟然存在global开发/测试环境有global对象,线上环境没有global对象,应该是core.js这个库的版本不一致造成的。在`batman/node_modules/core-js/modules/_redefine.js`这个包里进行了`window.global`的赋值操作。###项目中枚举值前端自己维护的原因枚举是根据后端的注释所生成的,如果后端注释写错或者没有写注释,javadoc就生成不了。###Content-Type这个部分的知识对使用postman很有帮助。Content-Type:application/json会将相应类型传到网关Content-Type:x-www-form-urlencoded所有类型都以字符串的形式传到网关###痛点-[]结合vscode插件定制模板,快速插入"}],type:"directory",size:11804},{name:"readES6",path:"/BasicSkill/readES6",children:[{name:"Async.md",path:"/BasicSkill/readES6/Async.md",type:"file",mdconf:{abbrlink:"y1nlgvkb"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2302,extension:".md",relative:"/BasicSkill/readES6/Async.md",isEmpty:!1,content:"\x3c!--abbrlink:y1nlgvkb--\x3e[Asyncfunction](https://github.com/tc39/proposals/blob/master/finished-proposals.md)在2017年已到达了stage4。###async/await使用注意点*为了不让程序挂掉,注意捕获错误写法1:用`try/catch`捕获```jsasyncfunctiontest1(){try{awaitPromise.reject(newError('boom'))}catch(e){console.log(e)}console.log('goon')}test1()//Error:boom//goon```写法2:直接在`await`后面的`promise`上进行`catch````jsasyncfunctiontest2(){awaitPromise.reject(newError('boom')).catch(e=>console.log(e))console.log('goon')}test2()//Error:boom//goon```*使用并行提高程序的运行速度```js//串行调用示范asyncfunctionblock(){constresult1=awaitrequest(url1)constresult2=awaitrequest(url2)}```在如上案例中,`request(url1)`请求未完成的话是不会发起`request(url2)`请求的(类似串行调用),若想使之变为并行调用可以作如下修改:写法1:```jsasyncfunctionblock(){constpromise1=request(url1)constpromise2=request(url2)constresult1=awaitpromise1constresult2=awaitpromise2}```写法2:```jsasyncfunctionblock(){const[result1,result2]=awaitPromise.all([request(url1),request(url2)])}```###async函数的实现原理```jsasyncfunctionfn{}````async`函数在低版本浏览器中其实就是转为`co+Generator````jsfunctionfn{returnco(function*(){})}```关于简版`co`,可以看在[Generator函数的异步应用](https://github.com/MuYunyun/blog/blob/master/BasicSkill/readES6/Generator%E6%9C%AD%E8%AE%B0.md#generator-%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8)的实现。###异步遍历器>[proposal-async-iteration](https://github.com/tc39/proposal-async-iteration),异步遍历器也已经到了stage4。####异步迭代器同步场景下可以通过如下获取`value`、`done`:```jsconst{value,done}=syncIterator.next()```异步场景下可以通过如下方式获取`value`、`done````jsasyncIterator.next().then({value,done}=>{})```####forawait..of```jsforawait(constlineofreadLines(filePath)){console.log(line)}```"},{name:"Generator.md",path:"/BasicSkill/readES6/Generator.md",type:"file",mdconf:{abbrlink:"l3p7jbgc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4537,extension:".md",relative:"/BasicSkill/readES6/Generator.md",isEmpty:!1,content:"\x3c!--abbrlink:l3p7jbgc--\x3e###Generator使用规律从一道题目开始:```jsfunction*gen(){consta=yield1console.log(a)}```为了让其能成功打印出1,设计如下函数:```jsfunctionstep(gen){constit=gen()letresultreturnfunction(){result=it.next(result).value}}```进行如下调用:```jsvara=step(gen)a()a()//1```从这个题目总结出规律:*`next`的调用数比`yield`的调用数多1;*第一个`next`传参无效,从第二个`next`开始传参有效并会作为`yield`的结果返回;生成器中的`yield/next`除了控制能力外还有双向的消息通知能力:*`yield`后面跟的值能通过`it.next().value`取到*`it.next()`括号中的值又能作为`yield`的结果返回###yield暂停的位置```jsfunction*foo(url){try{constvalue=yieldrequest(url)console.log(value)}catch(err){...}}constit=foo('http://some.url.1')````yield`后面跟着的语句执行完再进入暂停状态的,在如上代码中,当执行`it.next()`时,可以稍加转换为如下形式:```jsfunction*foo(url){try{constpromise=request(url)//当执行it.next()时,这里是被执行的constvalue=yieldpromise//这里被暂停console.log(value)}catch(err){...}}```###遇到return/throw*遇到`return````jsfunction*gen(){yield1return2console.log('是否执行')}constit=gen()it.next()//{value:1,done:false}it.next()//{value:2,done:true}it.next()//{value:undefined,done:true}```总结:遇到`return`,`generator`函数结束中断,`done`变为`true`;*遇到`iterator`的`throw````jsfunction*gen(){yield1console.log('是否执行')}varit=gen()it.throw(newError('boom'))//Error:boomit.next()//{value:undefined,done:true}```总结:遇到`iterator`的`throw`,`generator`函数运行中断,`done`变为`true`;###Generator的简单实现`Generator`是一个返回迭代器的函数,下面是其简版实现:```jsfunctionfoo(url){varstatevarvalfunctionprocess(v){switch(state){case1:console.log('requesting:',url)returnrequest(url)case2:val=vconsole.log(val)returncase3:varerr=valconsole.log('Oops:',err)returnfalse}}return{next:function(v){if(!state){state=1return{done:false,value:process()}}elseif(state===1){state=2return{done:true,value:process(v)}}else{return{done:true,value:undefined}}},throw:function(){if(state===1){state=3return{done:true,value:process(e)}}else{throwe}}}}varit=foo('http://some.url.1')```###Generator函数的异步应用以`co`库来说,现在已经统一为`Generator+Promise`的调用方式,下面进行简单的模拟:```jsco(function*(){constresult=yieldPromise.resolve(true)console.log(result)//true})``````js//简版promisefunctionco(gen){constit=gen()conststep=function(data){constresult=it.next(data)if(result.done){returnresult.value}result.value.then((data)=>{step(data)})}step()}```观察`co`库发现,`co`函数后返回的是`promise`,使用如下:```jsco(function*(){constresult=yieldPromise.resolve(true)returnresult//这里有个语法,it.next()碰到return后,其值会变为{value:result,done:true}的形式}).then((data)=>{console.log(data)//true})```我们再对其稍加改造,使之更加添近`co`库:```jsfunctionco(gen){returnnewPromise((resolve,reject)=>{constit=gen()letresultconststep=function(fn){try{result=fn()}catch(e){returnreject(e)}if(result.done){returnresolve(result.value)}result.value.then((data)=>{step(()=>it.next(data))},(err)=>{step(()=>it.throw(err))//这里为了让抛错直接在generator消化,所以step内改传函数})}step(()=>it.next())})}```"},{name:"Promise.md",path:"/BasicSkill/readES6/Promise.md",type:"file",mdconf:{abbrlink:"l9w7axkn"},birthtime:"2022-01-16",mtime:"2022-01-16",size:7314,extension:".md",relative:"/BasicSkill/readES6/Promise.md",isEmpty:!1,content:"\x3c!--abbrlink:l9w7axkn--\x3e###Promise/A+核心![](http://with.muyunyun.cn/e1a0c15c44f9b014aa78d7b7620db474.jpg-200)在实现一个符合Promise/A+规范的promise之前,先了解下Promise/A+核心,想更全面地了解可以阅读[Promise/A+规范](https://segmentfault.com/a/1190000002452115)*Promise操作只会处在3种状态的一种:未完成态(pending)、完成态(resolved)、失败态(rejected);*Promise的状态只会出现从未完成态向完成态或失败态转化;*Promise的状态一旦转化,将不能被更改;###Promiseapi####Promise.resolve()Promise.resolve()括号内有4种情况```js/*跟Promise对象*/Promise.resolve(Promise.resolve(1))//Promise{state:\"resolved\",data:1,callbackQueue:Array(0)}/*跟thenable对象*/varthenable={then:function(resolve,reject){resolve(1)}}Promise.resolve(thenable)//Promise{state:\"resolved\",data:1,callbackQueue:Array(0)}/*普通参数*/Promise.resolve(1)//Promise{state:\"resolved\",data:1,callbackQueue:Array(0)}/*不跟参数*/Promise.resolve()//Promise{state:\"resolved\",data:undefined,callbackQueue:Array(0)}```####Promise.reject()相较于Promise.resolve(),Promise.reject()原封不动地返回参数值####Promise.all(arr)对于Promise.all(arr)来说,在参数数组中所有元素都变为决定态后,然后才返回新的promise。```js//以下demo,请求两个url,当两个异步请求返还结果后,再请求第三个urlconstp1=request(`http://some.url.1`)constp2=request(`http://some.url.2`)Promise.all([p1,p2]).then((datas)=>{//此处datas为调用p1,p2后的结果的数组returnrequest(`http://some.url.3?a=${datas[0]}&b=${datas[1]}`)}).then((data)=>{console.log(msg)})```####Promise.race(arr)对于Promise.race(arr)来说,只要参数数组有一个元素变为决定态,便返回新的promise。```js//race译为竞争,同样是请求两个url,当且仅当一个请求返还结果后,就请求第三个urlconstp1=request(`http://some.url.1`)constp2=request(`http://some.url.2`)Promise.race([p1,p2]).then((data)=>{//此处data取调用p1,p2后优先返回的结果returnrequest(`http://some.url.3?value=${data}`)}).then((data)=>{console.log(data)})```####Promise.wrap(fn)——回调函数转Promise通过下面这个案例,提供回调函数Promise化的思路。```jsfunctionfoo(a,b,cb){ajax(`http://some.url?a=${a}&b=${b}`,cb)}foo(1,2,function(err,data){if(err){console.log(err)}else{console.log(data)}})```如上是一个传统回调函数使用案例,假如现在有个函数Promise.wrap(),使用其包裹foo函数从而使之promise化,用法如下:```jsconstpromiseFoo=Promise.wrap(foo)promiseFoo(1,2).then((data)=>{console.log(data)}).catch((err)=>{console.log(err)})```让我们来实现Promise.wrap()函数:```jsPromise.wrap=function(fn){returnfuntion(...args){returnnewPromise((resolve,reject)=>{fn.apply(null,args.concat((err,data)=>{if(err){reject(err)}else{resolve(data)}}))})}}```####then/catch/done这几个api比较简单,合起来一起带过```jsPromise.resolve(1).then((data)=>{console.log(data)},(err)=>{console.log(err)})//链式调用,可以传一个参数(推荐),也可以传两个参数.catch((err)=>{console.log(err)})//捕获链式调用中抛出的错误||捕获变为失败态的值.done()//能捕获前面链式调用的错误(包括catch中),可以传两个参数也可不传```###实现一个Promise>实践了一个符合Promise/A+规范的[repromise](https://github.com/MuYunyun/repromise)。####坑点1:事件循环>事件循环:同步队列执行完后,在指定时间后再执行异步队列的内容。之所以要单列事件循环,因为代码的执行顺序与其息息相关,此处用setTimeout来模拟事件循环；下面代码片段中,①处执行完并不会马上执行setTimeout()中的代码(③),而是此时有多少次then的调用,就会重新进入②处多少次后,再进入③```jsexcuteAsyncCallback(callback,value){constthat=thissetTimeout(function(){constres=callback(value)//③that.excuteCallback('fulfilled',res)},4)}then(onResolved,onRejected){constpromise=newthis.constructor()if(this.state!=='PENDING'){constcallback=this.state==='fulfilled'?onResolved:onRejectedthis.excuteAsyncCallback.call(promise,callback,this.data)//①}else{this.callbackArr.push(newCallbackItem(promise,onResolved,onRejected))//②}returnpromise}```####坑点2:this的指向问题this.callbackArr.push()中的this指向的是‘上一个’promise,所以类CallbackItem中,this.promise存储的是'下一个'promise(then对象)。```jsclassPromise{...then(onResolved,onRejected){constpromise=newthis.constructor()if(this.state!=='PENDING'){//第一次进入then,状态是RESOLVED或者是REJECTEDconstcallback=this.state==='fulfilled'?onResolved:onRejectedthis.excuteAsyncCallback.call(promise,callback,this.data)//绑定this到promise}else{//从第二次开始以后,进入then,状态是PENDINGthis.callbackArr.push(newCallbackItem(promise,onResolved,onRejected))//这里的this也是指向‘上一个’promise}returnpromise}...}classCallbackItem{constructor(promise,onResolve,onReject){this.promise=promise//相应地,这里存储的promise是来自下一个then的this.onResolve=typeof(onResolve)==='function'?onResolve:(resolve)=>{}this.onReject=typeof(onRejected)==='function'?onRejected:(rejected)=>{}}...}```###拓展延伸```jssetTimeout(()=>{console.log('A')},0)Promise.resolve(console.log('B')).then(()=>{console.log('C')})console.log('D')```正常情况下,此demo应该输出`BDCA`,这里涉及到宏任务和微任务的知识点,一个宏任务里可以有多个微任务。*宏任务(macroTask):setTimeout、requestAnimationFrame*微任务(microTask):promise、setImmediate、async/await>由于此项目中的promise是用setTimeout实现的,所以在上述demo中,此项目输出的结果是`BDAC`,解决方法:可以参考[setImmediate.js](https://github.com/YuzuJS/setImmediate)。它的本质用了一些hack的手段,比如借用了`postMessage`这个来操作事件循环。###问题:promise.all如何做到让多个setTimeout并发运行?这个就是promise.all()的本质了,浏览器内部提供了一个事件循环机制来模拟成伪'并发'```jsvaroldTime=Date.now()setTimeout(()=>{console.log(Date.now()-oldTime)},1000)//1001~1005(存在4ms的波动)setTimeout(()=>{console.log(Date.now()-oldTime)},2000)//2001~2005```"},{name:"Reflect.md",path:"/BasicSkill/readES6/Reflect.md",type:"file",mdconf:{abbrlink:"lm3wt8vq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1052,extension:".md",relative:"/BasicSkill/readES6/Reflect.md",isEmpty:!1,content:"\x3c!--abbrlink:lm3wt8vq--\x3e###Reflect`Reflect`是`ES6`新引人的特性,其目的是把一些`JavaScript`特有的属性`api`抽离出来。其有如下优点:*返回值更加合理```jsvarobj={}//在obj中定义a属性Object.defineProperty(obj,'a',{value:2})//使用Object.defineProperty在obj中重复定义a属性就会抛错try{Object.defineProperty(obj,'a',{value:3})}catch(e){console.log(e)//UncaughtTypeError:Cannotredefineproperty:a}//使用Reflect.defineProperty在obj中重复定义a属性则是返回falseif(Reflect.defineProperty(obj,'a',{value:3})){console.log('属性添加成功')}```*将一些对象属性的操作判断统一为函数操作。比如`propsinObj`现在可写成`Reflect.has(Obj,props)`,又比如`deleteObj[props]`现在可写成`Reflect.deleteProperty(Obj,props)`*与[ProxyHandler](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler#Methods)方法参数同步"},{name:"扩展运算符.md",path:"/BasicSkill/readES6/扩展运算符.md",type:"file",mdconf:{abbrlink:"yvcua1zk"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1996,extension:".md",relative:"/BasicSkill/readES6/扩展运算符.md",isEmpty:!1,content:"\x3c!--abbrlink:yvcua1zk--\x3e`...`是ES6新出来的符号,称为扩展运算符。它在不同情况下有不同的作用,下文我们将对之进行梳理。###对象中的扩展运算符1.`...`当作对象扩展符使用时可以用来*浅拷贝*目标对象的*自有属性中的可枚举属性*。>对象中的扩展运算符的作用等同于Object.assign()。下面举例证明上述结论:*验证对象扩展符只能`copy`自有属性,原型链上的属性不能`copy````jsclassDemo{constructor(){this.name='Lily'}testFn(){}}consttest=newDemo()constcpObj={...test}cpObj.name==='Lily'//truecpObj.testFn()//UncaughtTypeError:cpTest.testFnisnotafunction```*验证只能copy可枚举属性```jsconstobj=Object.defineProperty({a:1},'b',{enumerable:false,value:2})constcpObj={...obj}obj.a//1obj.b//2cpObj.a//1cpObj.b//undefined```2.解构赋值```jsconstobj={a:1,b:2,c:3}const{a,...x}=objconst{a:data}=obj//重命名a//1x//{b:2,c:3}data//1```###数组中的扩展运算符1.浅拷贝```jsconstarr=[1,2,3]constcpArr=[...arr]cpArr//[1,2,3]```>下面这种写法也是浅拷贝的变种:```jsconstarr=[1,2,3]constcpArr=[]cpArr.push(...arr)cpArr//[1,2,3]```因为这个特性,我们还可以合并数组,如下所示:```jsconstarr1=[1,2,3]constarr2=[4,5,6]constmergeArr=[...arr1,...arr2]mergeArr//[1,2,3,4,5,6]```2.解构赋值```js[a,...b]=[1,2,3]a//1b//[2,3]```>扩展运算符用来做解构赋值时,只能放在最后一位3.传参中使用,将所传的参数变为数组```jsfunctionDemo(...args){console.log(args)}Demo(1,2,3)//[1,2,3]```###相关链接*[对象扩展符简易指南](https://www.zcfy.cc/article/an-easy-guide-to-object-rest-spread-properties-in-javascript)"},{name:"模块.md",path:"/BasicSkill/readES6/模块.md",type:"file",mdconf:{abbrlink:"muao7eyd"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2133,extension:".md",relative:"/BasicSkill/readES6/模块.md",isEmpty:!1,content:"\x3c!--abbrlink:muao7eyd--\x3e###CommonJS模块与ES6模块间的差异####写法上的差异CommonJS中常见导出和引人写法如下:```js//导出module.exports=a//引人consta=require('./xxx')```ES6中常见导出和引人写法如下:```js//导出exportdefaulta//编译成CommonJS:exports.default=a(ES编译成的CommonJS形式)//引人importafrom'./xxx'//编译成CommonJS:require('./xxx').default//导出export{a}//编译成CommonJS:exports.a=a//引人import{a}from'./xxx'//编译成CommonJS:require('./xxx').a```####加载机制的差异在CommonJS的模块中,require是动态(运行时)加载的；在ES6的模块中,import是静态(编译时)加载的。>ES6[import()动态加载的提案](https://github.com/tc39/proposal-dynamic-import)目前已到第3阶段。>另外如果是使用TypeScript的话,编译成JavaScript的代码后再用上述结论。####获取模块的差异在CommonJS中,获取的是一个`值/模块的拷贝`,见如下例子:```js//test.jsleta=1functionadd(){a=2}module.exports={a,add}//test2.jsconst{a,add}=require('./test')console.log(a)add()console.log(a)//执行nodetest2.js,输出结果为11```在ES6中,获取的是一个`值/模块的引用`,见如下例子:```js//test.jsleta=1functionadd(){a=2}export{a,add}//index.htmlimport{a,add}from'./index.js'console.log(a)add()console.log(a)//在浏览器中输出结果为12```###同时支持CJS与ESM包的最佳实践1.提供一个CJS版本这样可以确保你的库在旧版本Node下跑的更好。(如果你写的是TypeScript或者其他需要编译到JavaScript的语言，那么编译到CJS。)2.基于CJS封装到ESM版本(将CJS封装到ESM很容易，但是ESM库是没法封装到CJS库的)。```jsimportcjsModulefrom'../index.js';exportconstfoo=cjsModule.foo;```Todo:调研为什么CJS封装为ESM容易,但是反过来不行。"},{name:"箭头函数.md",path:"/BasicSkill/readES6/箭头函数.md",type:"file",mdconf:{abbrlink:"esoqf37z"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1254,extension:".md",relative:"/BasicSkill/readES6/箭头函数.md",isEmpty:!1,content:"\x3c!--abbrlink:esoqf37z--\x3e###箭头函数中的this理解下箭头函数中this的本质,看如下代码:```js()=>console.log(this)```经过babel转化后的ES5代码如下```jsvarself=this(function(){console.log(self)})```结论:箭头函数中this的值等同于箭头函数当前所处作用域下的this。####箭头函数的一些不易理解场景有如下html代码,```html<body><input/></body>```加上如下JavaScript脚本测试this指向:```jsvarinputTest=document.getElementsByTagName('input')inputTest[0].addEventListener('click',function(){console.log(this)//指向input})inputTest[0].addEventListener('click',()=>{console.log(this)//window})```上述这段是为dom节点绑定事件的常见写法,但是this指向就很奇怪了,ES5中指向了`<input/>`,ES6中却指向了window。至于原因,其实是回调函数引起的坑(得看浏览器触发事件时的代码)。再加上箭头函数的特殊性所以产生以上迷惑的代码片段。###箭头函数小tip当箭头函数返回的结果是对象时,注意下写法的细节:```jsconstresult1=()=>({a:1})constresult2=()=>{return{a:1}}```"},{name:"继承.md",path:"/BasicSkill/readES6/继承.md",type:"file",mdconf:{abbrlink:"czmq4cx2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6278,extension:".md",relative:"/BasicSkill/readES6/继承.md",isEmpty:!1,content:"\x3c!--abbrlink:czmq4cx2--\x3e###ES5之继承####基于构造函数的继承```jsfunctionParent1(){this.parent1='parent1'this.arr=[1,2,3]}Parent1.prototype.walk='Icanwalk'functionChild1(){Parent1.call(this)this.child1='child1'}constchild11=newChild1()constchild12=newChild1()//测试child11.parent1//parent1child11.walk//undefinedchild11.arr.push(4)child11.arr//[1,2,3,4]child12.arr//[1,2,3]```*优点:构造函数的属性具有唯一性(child11.arr与child12.arr),可参考[红皮书里的细节](https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E5%9F%BA%E7%A1%80%E7%AF%87/%E4%BA%8C%E5%88%B7%E9%AB%98%E7%A8%8B.md#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%A8%A1%E5%BC%8F)*缺点:只能继承父类函数的方法和属性,而不能继承原型对象的方法和属性####基于原型链的继承```jsfunctionParent2(){this.parent2='parent2'this.arr=[1,2,3]}Parent2.prototype.walk='Icanwalk'functionChild2(){this.child2='child2'}Child2.prototype=newParent2()constchild21=newChild2()constchild22=newChild2()//测试child21.parent2//parent2child21.walk//Icanwalkchild21.arr.push(4)child21.arr//[1,2,3,4]child22.arr//[1,2,3,4]```*优点:继承父类函数的方法和属性同时继承了原型对象的方法和属性*缺点:当在一个子类的实例上修改父类的属性和方法时,其它的子类也会受到影响(相当于改变了子类原型链上的属性,可以参考[二刷高程](https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E5%9F%BA%E7%A1%80%E7%AF%87/%E4%BA%8C%E5%88%B7%E9%AB%98%E7%A8%8B.md#%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%A8%A1%E5%BC%8F)------补充------补充下Object.create()这个api,也将它归类到基于原型链的继承。当继承的对象属性没变化时,可以使用它。*优点:可以少写一个构造函数*缺点:同上述基于原型链继承的缺点####组合继承```jsfunctionParent3(){this.parent3='parent3'this.arr=[1,2,3]}Parent3.prototype.walk='Icanwalk'functionChild3(){Parent3.call(this)//这里执行第一次父类this.child3='child3'}Child3.prototype=newParent3()//这里执行第二次父类,原型继承发现只要把父子的原型对象绑定起来就好,可以写成Child3.prototype=newParent3()>__proto__也正常constchild31=newChild3()constchild32=newChild3()//测试child31.parent3//parent3child31.walk//Icanwalkchild31.arr.push(4)child31.arr//[1,2,3,4]child32.arr//[1,2,3]```*优点:结合了构造函数继承和原型链继承的优点*缺点:父类方法调用了两次,而且不能判断实例的构造函数是子类还是父类####组合继承优化一```jsfunctionParent4(){this.parent4='parent4'this.arr=[1,2,3]}Parent4.prototype.walk='Icanwalk'functionChild4(){Parent4.call(this)this.child4='child4'}Child4.prototype=Parent4.prototypeconstchild41=newChild4()constchild42=newChild4()//测试child41.parent4//parent4child41.walk//Icanwalkchild41.arr.push(4)child41.arr//[1,2,3,4]child42.arr//[1,2,3]child41.constructor//Parent4```*优点:解决了调用两次的问题*缺点:不能判断实例的构造函数是子类还是父类(此时child41、child42的构造函数指向Parent4)####组合继承优化二```jsfunctionParent5(){this.parent5='parent5'this.arr=[1,2,3]}Parent5.prototype.walk='Icanwalk'functionChild5(){Parent5.call(this)this.child5='child5'}Child5.prototype=Object.create(Parent5.prototype)//Object.create()创建了一个中间对象,起到隔离子类和父类的作用。Child5.prototype.constructor=Child5constchild51=newChild5()constchild52=newChild5()//测试child51.parent5//parent5child51.walk//Icanwalkchild51.arr.push(4)child51.arr//[1,2,3,4]child52.arr//[1,2,3]child51.constructor//Child5```>Object.create()的作用:Object.create(Parent5.prototype)相当于一个空对象{},这个空对象的__proto__等于Parent5.prototype,所以这时候我们修改Child5.prototype.constructor实际上是在空对象上加上constructor属性。优点:解决了不能判断实例的构造函数是子类还是父类的问题###揭秘ES6继承之super####constructor中的super```jsfunctionParent(props){this.props=props}classChildextendsParent{constructor(){super()//这里}}varchild=newChild({a:1})console.log(child.props)//undefined```为什么这里child.props会输出undefined呢,让我们接着看以下两个例子。```jsfunctionParent(props){this.props=props}classChildextendsParent{constructor(props){super(props)}}varchild=newChild({a:1})console.log(child.props)//{a:1}``````jsfunctionParent(props){this.props=props}classChildextendsParent{}varchild=newChild({a:1})console.log(child.props)//{a:1}```可以看到第二种情况和第三种情况是相等的。继承中,当子类没有写constructor时,它会自动加上如下代码:```jsconstructor(props){super(props)}```简单作个结论:当ES6的类函数中有constructor和super时,它们后面必须得跟个参数props(名字随意),否则原型链上的对象无法获取到相应属性。将之翻译成ES5,代码如下:```jsfunctionParent(props){this.props=props}functionChild(props){Parent.call(this,props)//这里等价于ES6中super(props)}Child.prototype=newParent()varchild=newChild({a:1})```####作为对象调用的super在下面的案例中,super作为对象调用,那么它指向什么呢？```jsclassParent{parentFn(){console.log('IamparentFn')}}classChildextendsParent{childFn(){console.log(super.constructor)super.parentFn()}}varchild=newChild()child.childFn()//ClassParent{...}//IamparentFn```打印结果已经作出了回答。super在作为对象调用时,它指向了父类对象的实例。"},{name:"装饰器.md",path:"/BasicSkill/readES6/装饰器.md",type:"file",mdconf:{abbrlink:"396wjsh1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4539,extension:".md",relative:"/BasicSkill/readES6/装饰器.md",isEmpty:!1,content:"\x3c!--abbrlink:396wjsh1--\x3e随着ES6和TypeScript中类的引入,在某些场景需要在不改变原有类和类属性的基础上扩展些功能,这也是装饰器出现的原因。\x3c!--more--\x3e###装饰器简介作为一种可以动态增删功能模块的模式(比如[redux的中间件机制](https://github.com/MuYunyun/blog/issues/15)),装饰器同样具有很强的动态灵活性,只需在类或类属性之前加上`@方法名`就完成了相应的类或类方法功能的变化。不过装饰器模式仍处于[第2阶段提案中](https://github.com/tc39/proposal-decorators),使用它之前需要使用babel模块`transform-decorators-legacy`编译成ES5或ES6。在TypeScript的[lib.es5.d.ts](https://github.com/Microsoft/TypeScript/blob/c48662c891ce810f5627a0f6a8594049cccceeb5/lib/lib.es5.d.ts#L1291)中,定义了4种不同装饰器的接口:```tsdeclaretypeClassDecorator=<TFunctionextendsFunction>(target:TFunction)=>TFunction|void;declaretypePropertyDecorator=(target:Object,propertyKey:string|symbol)=>void;declaretypeMethodDecorator=<T>(target:Object,propertyKey:string|symbol,descriptor:TypedPropertyDescriptor<T>)=>TypedPropertyDescriptor<T>|void;declaretypeParameterDecorator=(target:Object,propertyKey:string|symbol,parameterIndex:number)=>void;```下面对装饰类以及装饰类方法进行解析。###作用于类的装饰器当装饰的对象是类时,我们操作的就是这个`类本身`。```js@logclassMyClass{}functionlog(target){//这个target在这里就是MyClass这个类target.prototype.logger=()=>`${target.name}被调用`}consttest=newMyClass()test.logger()//MyClass被调用```由于装饰器是表达式,我们也可以在装饰器后面再添加提个参数:```js@log('hello')classMyClass{}functionlog(text){returnfunction(target){target.prototype.logger=()=>`${text},${target.name}被调用`}}consttest=newMyClass()test.logger()//hello,MyClass被调用```在使用redux中,我们最常使用react-redux的写法如下:```js@connect(mapStateToProps,mapDispatchToProps)exportdefaultclassMyComponentextendsReact.Component{}```经过上述分析,我们知道了上述写法等价于下面这种写法:```jsclassMyComponentextendsReact.Component{}exportdefaultconnect(mapStateToProps,mapDispatchToProps)(MyComponent)```###作用于类方法的装饰器与装饰类不同,对类方法的装饰本质是操作其描述符。可以把此时的装饰器理解成是`Object.defineProperty(obj,prop,descriptor)`的语法糖,看如下代码:```jsclassC{@readonly(false)method(){console.log('cat')}}functionreadonly(value){returnfunction(target,key,descriptor){//此处target为C.prototype;key为method;//原descriptor为:{value:f,enumarable:false,writable:true,configurable:true}descriptor.writable=valuereturndescriptor}}constc=newC()c.method=()=>console.log('dog')c.method()//cat```可以看到装饰器函数接收的三个参数与Object.defineProperty是完全一样的,具体实现可以看babel转化后的代码,主要实现如下所示:```jsvarC=(function(){classC{method(){console.log('cat')}}vartemptemp=readonly(false)(C.prototype,'method',temp=Object.getOwnPropertyDescriptor(C.prototype,'method'))||temp//通过Object.getOwnPropertyDescriptor获取到描述符传入到装饰器函数中if(temp)Object.defineProperty(C.prototype,'method',temp)returnC})()```再将再来看看如果有多个装饰器作用于同一个方法上呢？```jsclassC{@readonly(false)@logmethod(){}}```经babel转化后的代码如下:```jsdesc=[readonly(false),log].slice().reverse().reduce(function(desc,decorator){returndecorator(target,property,desc)||desc;},desc);```可以清晰地看出,经过reverse倒序后,装饰器方法会至里向外执行。###相关链接[javascript-decorators](https://github.com/wycats/javascript-decorators)[Javascript中的装饰器](https://aotu.io/notes/2016/10/24/decorator/index.html)[JS装饰器（Decorator）场景实战](https://juejin.im/post/59f1c484f265da431c6f8940)[修饰器](http://es6.ruanyifeng.com/#docs/decorator#%E6%96%B9%E6%B3%95%E7%9A%84%E4%BF%AE%E9%A5%B0)[Babel](http://babeljs.io)"},{name:"遍历语法.md",path:"/BasicSkill/readES6/遍历语法.md",type:"file",mdconf:{abbrlink:"ar2urehz"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4148,extension:".md",relative:"/BasicSkill/readES6/遍历语法.md",isEmpty:!1,content:"\x3c!--abbrlink:ar2urehz--\x3e###for循环/while循环JavaScript提供多种遍历语法。最原始的写法就是for循环。```jsletarr=[1,2,3,4,5];for(varindex=0;index<arr.length;index++){console.log(myArray[index]);//12345}```*缺点：这种写法相对麻烦###forEach数组提供内置的forEach方法```jsletarr=[1,2,3,4,5];arr.forEach((element,index)=>{console.log(element);//12345})```*缺点:这种写法的问题在于,无法中途跳出forEach循环,break命令或return命令都不能生效。###for...infor……in用于遍历对象所有的`可枚举属性`,功能类似于Object.keys()。```jsletobj={name:'cloud',phone:'157xxxx2065'}for(letpropinobj){console.log(prop);//namephone}```可能有朋友会问,不可枚举的对象有哪些呢?比如constructor,数组的length就属于不可枚举属性。```jsletarr=[10,20,30,40,50]for(letpropinarr){console.log(prop)//'0''1''2''3''4'}```缺点：*数组的键名是数字,但是for...in循环是以字符串作为键名“0”、“1”、“2”等等。*for...in循环主要是为遍历对象而设计的,不适用于遍历数组###for...of`for……of`是ES6新增的遍历方式,它提供了统一的遍历机制。所有实现了[Symbol.iterator]接口的对象都可以被遍历。for...of循环可以使用的范围包括数组、Set和Map结构、某些类似数组的对象(比如arguments对象、DOMNodeList对象)、Generator对象,以及字符串。优点：*有着同for...in一样的简洁语法,但是没有for...in那些缺点;*不同用于forEach方法,它可以与break、continue和return配合使用*提供了遍历所有数据结构的统一操作接口下面是一个使用break语句,跳出for...of循环的例子。```jsfor(varnoffibonacci){if(n>1000)breakconsole.log(n)}```上面的例子,会输出斐波纳契数列小于等于1000的项。如果当前项大于1000,就会使用break语句跳出for...of循环。####for...of获取索引*entries()返回一个遍历器对象,用来遍历`[键名,键值]`组成的数组。对于数组,键名就是索引值；对于Set,键名与键值相同。Map结构的Iterator接口,默认就是调用entries方法。*keys()返回一个遍历器对象,用来遍历所有的键名。*values()返回一个遍历器对象,用来遍历所有的键值。```js//demoletarr=['a','b','c'];for(letpairofarr.entries()){console.log(pair);}//[0,'a']//[1,'b']//[2,'c']```####类似数组的对象类似数组的对象包括好几类。下面是for...of循环用于字符串、DOMNodeList对象、arguments对象的例子。```js//字符串letstr=\"hello\";for(letsofstr){console.log(s);//hello}//DOMNodeList对象letparas=document.querySelectorAll(\"p\");for(letpofparas){p.classList.add(\"test\");}//arguments对象functionprintArgs(){for(letxofarguments){console.log(x);}}printArgs('a','b');//'a'//'b'```并不是所有类似数组的对象都具有Iterator接口,一个简便的解决方法,就是使用Array.from方法将其转为数组。```jsletarrayLike={length:2,0:'a',1:'b'};//报错for(letxofarrayLike){console.log(x);}//正确for(letxofArray.from(arrayLike)){console.log(x);//'a'//'b'}```####普通的对象对于普通的对象,for...of结构不能直接使用,会报错,必须部署了Iterator接口后才能使用。```jsletes6={edition:6,committee:\"TC39\",standard:\"ECMA-262\"};for(leteines6){console.log(e);}//edition//committee//standardfor(leteofes6){console.log(e);}//TypeError:es6isnotiterable```解决方法是,使用Object.keys方法将对象的键名生成一个数组,然后遍历这个数组。```jsfor(varkeyofObject.keys(someObject)){console.log(key+':'+someObject[key]);}```"}],type:"directory",size:35553},{name:"service",path:"/BasicSkill/service",children:[{name:"README.md",path:"/BasicSkill/service/README.md",type:"file",mdconf:{abbrlink:"puqff18q"},birthtime:"2022-01-16",mtime:"2022-01-16",size:226,extension:".md",relative:"/BasicSkill/service/README.md",isEmpty:!1,content:"\x3c!--abbrlink:puqff18q--\x3e###Service*laaS(Infrastructure),基础设施即服务;*PaaS(Platform),平台即服务;*SaaS(Software),软件即服务;![](http://with.muyunyun.cn/af4d1f46f7fefe989c798a9e4ec55fa6.jpg)"}],type:"directory",size:226},{name:"share",path:"/BasicSkill/share",children:[],type:"directory",size:0},{name:"shorcuts",path:"/BasicSkill/shorcuts",children:[{name:"vim.md",path:"/BasicSkill/shorcuts/vim.md",type:"file",mdconf:{abbrlink:"jgd6ij6z"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2079,extension:".md",relative:"/BasicSkill/shorcuts/vim.md",isEmpty:!1,content:"\x3c!--abbrlink:jgd6ij6z--\x3e###vim配置####配置*步骤一.cp/usr/share/vim/vimrc~/.vimrc*步骤二.vi~/.vimrc####可选配置```jssetnocompatible去掉有关vi一致性模式,避免以前版本的bug和局限setnu!显示行号setguifont=Luxi/Mono/9设置字体,字体名称和字号filetypeon检测文件的类型sethistory=1000记录历史的行数setbackground=dark背景使用黑色syntaxon语法高亮度显示setautoindentvim使用自动对齐,也就是把当前行的对齐格式应用到下一行(自动缩进）setcindent（cindent是特别针对C语言语法自动缩进）setsmartindent依据上面的对齐格式,智能的选择对齐方式,对于类似C语言编写上有用settabstop=4设置tab键为4个空格setshiftwidth=4设置当行之间交错时使用4个空格setai!设置自动缩进setshowmatch设置匹配模式,类似当输入一个左括号时会匹配相应的右括号setguioptions-=T去除vim的GUI版本中得toolbarsetvbt_vb=当vim进行编辑时,如果命令错误,会发出警报,该设置去掉警报setruler在编辑过程中,在右下角显示光标位置的状态行setnohls默认情况下,寻找匹配是高亮度显示,该设置关闭高亮显示setincsearch在程序中查询一单词,自动匹配单词的位置；如查询desk单词,当输到/d时,会自动找到第一个d开头的单词,当输入到/de时,会自动找到第一个以de开头的单词,以此类推,进行查找;当找到要匹配的单词时,别忘记回车setbackspace=2设置退格键可用```###vim快捷键```jsdd快速删除当前行```"}],type:"directory",size:2079},{name:"tool",path:"/BasicSkill/tool",children:[{name:"eslint.md",path:"/BasicSkill/tool/eslint.md",type:"file",mdconf:{abbrlink:"7ig74low"},birthtime:"2022-01-16",mtime:"2022-01-16",size:254,extension:".md",relative:"/BasicSkill/tool/eslint.md",isEmpty:!1,content:"\x3c!--abbrlink:7ig74low--\x3e###ways1.use[ASTExplorer](https://astexplorer.net/)2.pickbabel-eslintandeslintv4inTransform.###links*[HowToWriteYourFirstESLintPlugin](https://dev.to/spukas/how-to-write-your-first-eslint-plugin-145)"},{name:"markdown.md",path:"/BasicSkill/tool/markdown.md",type:"file",mdconf:{abbrlink:"akdysy4n"},birthtime:"2022-01-16",mtime:"2022-01-16",size:177,extension:".md",relative:"/BasicSkill/tool/markdown.md",isEmpty:!1,content:"\x3c!--abbrlink:akdysy4n--\x3e##Markdown语法###脚注可以在内容区添加脚注，通过括号语法。```mdHereisasimplefootnote[^1][^1]:Myreference.```"},{name:"shell.md",path:"/BasicSkill/tool/shell.md",type:"file",mdconf:{abbrlink:"l33pdpxw"},birthtime:"2022-01-16",mtime:"2022-01-16",size:174,extension:".md",relative:"/BasicSkill/tool/shell.md",isEmpty:!1,content:"\x3c!--abbrlink:l33pdpxw--\x3e###Shell脚本*用途:*alfredworkflow快速脚本*有需要可以参考[Shell教程](https://www.runoob.com/linux/linux-shell.html)"}],type:"directory",size:605},{name:"编程范式",path:"/BasicSkill/编程范式",children:[{name:"函数式编程入门.md",path:"/BasicSkill/编程范式/函数式编程入门.md",type:"file",mdconf:{abbrlink:"hlkezw7u"},birthtime:"2022-01-16",mtime:"2022-01-16",size:9653,extension:".md",relative:"/BasicSkill/编程范式/函数式编程入门.md",isEmpty:!1,content:"\x3c!--abbrlink:hlkezw7u--\x3e###命令式编程和声明式编程拿泡茶这个事例进行区分命令式编程和声明式编程*命令式编程1.烧开水(为第一人称)2.拿个茶杯3.放茶叶4.冲水*声明式编程1.给我泡杯茶(为第二人称)举个demo```js//命令式编程constconvert=function(arr){constresult=[]for(leti=0;i<arr.length;i++){result[i]=arr[i].toLowerCase()}returnresult}//声明式编程constconvert=function(arr){returnarr.map(r=>r.toLowerCase())}```###什么是函数式编程函数式编程是声明式编程的范式。在函数式编程中数据在由纯函数组成的管道中传递。>函数式编程可以用简单如`交换律、结合律、分配律`的数学之法来帮我们简化代码的实现。它具有如下一些特性:*纯粹性:纯函数不改变除当前作用域以外的值;```js//反面示例leta=0constadd=(b)=>a=a+b//两次add(1)结果不一致//正确示例constadd=(a,b)=>a+b```*数据不可变性:Immutable```js//反面示例constarr=[1,2]constarrAdd=(value)=>{arr.push(value)returnarr}arrAdd(3)//[1,2,3]arrAdd(3)//[1,2,3,3]//正面示例constarr=[1,2]constarrAdd=(value)=>{returnarr.concat(value)}arrAdd(3)//[1,2,3]arrAdd(3)//[1,2,3]```>在后记1中对数组字符串方法是否对原值有影响作了整理*函数柯里化:将多个入参的函数转化为一个入参的函数;```jsconstadd=a=>b=>c=>a+b+cadd(1)(2)(3)```*偏函数:将多个入参的函数转化成两部分;```jsconstadd=a=>(b,c)=>a+b+cadd(1)(2,3)```*可组合:函数之间能组合使用```jsconstadd=(x)=>x+xconstmult=(x)=>x*xconstaddAndMult=(x)=>add(mult(x))```###柯里化(curry)如下是一个加法函数:```jsvaradd=(a,b,c)=>a+b+cadd(1,2,3)//6```假如有这样一个`curry`函数,用其包装`add`函数后返回一个新的函数`curryAdd`,我们可以将参数`a、b`进行分开传递进行调用。```jsvarcurryAdd=curry(add)//以下输出结果都相同curryAdd(1,2,3)//6curryAdd(1,2)(3)//6curryAdd(1)(2)(3)//6curryAdd(1)(2,3)//6```####动手实现一个curry函数核心思路:若传进去的参数个数未达到`curryAdd`的个数，则将参数缓存在闭包变量lists中:```jsfunctioncurry(fn,...args){constlength=fn.lengthletlists=args||[]letlistLenreturnfunction(..._args){lists=[...lists,..._args]listLen=lists.lengthif(listLen<length){constthat=listslists=[]returncurry(fn,...that)}elseif(listLen===length){constthat=listslists=[]returnfn.apply(this,that)}}}```###代码组合(compose)现在有`toUpperCase`、`reverse`、`head`三个函数,分别如下:```jsvartoUpperCase=(str)=>str.toUpperCase()varreverse=(arr)=>arr.reverse()varhead=(arr)=>arr[0]```接着使用它们实现将数组末位元素大写化输出,可以这样做:```jsvarreverseHeadUpperCase=(arr)=>toUpperCase(head(reverse(arr)))reverseHeadUpperCase(['apple','banana','peach'])//PEACH```此时在构建`reverseHeadUpperCase`函数的时候,必须手动声明传入参数arr,是否能提供一个`compose`函数让使用者更加友好的使用呢?类似如下形式:```jsvarreverseHeadUpperCase=compose(toUpperCase,head,reverse)reverseHeadUpperCase(['apple','banana','peach'])//PEACH```此外`compose`函数符合`结合律`,我们可以这样子使用:```jscompose(compose(toUpperCase,head),reverse)compose(toUpperCase,compose(head,reverse))```以上两种写法与`compose(toUpperCase,head,reverse)`的效果完全相同,都是依次从右到左执行传参中的函数。此外`compose`和`map`一起使用时也有相关的结合律,以下两种写法效果相等```jscompose(map(f),map(g))map(compose(f,g))```####动手实现一个compose函数代码精华集中在一行之内,其为众多开源库(比如Redux)所采用。```jsvarcompose=(...args)=>(initValue)=>args.reduceRight((a,c)=>c(a),initValue)```###范畴论范畴论是数学中的一个分支。可以将范畴理解为一个容器,把原来对值的操作，现转为对容器的操作。如下图:![](http://with.muyunyun.cn/c65fa1b63dbe9fa0a0771e7e561dc85b.jpg-200)>学习函数式编程就是学习各种函子的过程。函数式编程中,`函子(Functor)`是实现了`map`函数的容器,下文中将函子视为范畴，模型可表示如下:```jsclassFunctor{constructor(value){this.value=value}map(fn){returnnewFunctor(fn(this.value))}}```但是在函数式编程中,要避免使用`new`这种面向对象的编程方式,取而代之对外暴露了一个`of`的接口,也称为`pointedfunctor`。```jsFunctor.of=value=>newFunctor(value)```####Maybe函子`Maybe函子`是为了解决`this.value`为null的情形,用法如下:```jsMaybe.of(null).map(r=>r.toUpperCase())//nullMaybe.of('m').map(r=>r.toUpperCase())//Maybe{value:\"M\"}```实现代码如下:```jsclassMaybe{constructor(value){this.value=value}map(fn){returnthis.value?newMaybe(fn(this.value)):null}}Maybe.of=value=>newMaybe(value)```####Either函子`Either函子`是为了对应`if...else...`的语法,即`非左即右`。因此可以将之拆分为`Left`和`Right`两个函子,它们的用法如下:```jsvarleft=Left.of(1).map(r=>r+1)//Left{value:1}varright=Right.of(1).map(r=>r+1)//Right{value:2}````Left函子`实现代码如下:```jsclassLeft{constructor(value){this.value=value}map(fn){returnthis}}Left.of=value=>newLeft(value)````Right函子`实现代码如下(其实就是上面的`Functor`):```jsclassRight{constructor(value){this.value=value}map(fn){returnnewRight(fn(this.value))}}Right.of=value=>newRight(value)```具体`Either`函数只是对调用`Left函子`或`Right函子`作一层筛选,其接收`f`、`g`两个函数以及一个函子(`LeftorRight`)```jsvarEither=function(f,g,functor){switch(functor.constructor.name){case'Left':returnf(functor.value)case'Right':returng(functor.value)default:returnf(functor.value)}}```使用demo:```jsEither((v)=>console.log('left',v),(v)=>console.log('def',v),left)//left1Either((v)=>console.log('def',v),(v)=>console.log('rigth',v),rigth)//rigth2```####Monad函子函子会发生嵌套,比如下面这样:```jsFunctor.of(Functor.of(1))//Functor{value:Functor{value:1}}````Monad函子`对外暴露了`join`和`flatmap`接口,调用者从而可以扁平化嵌套的函子。```jsclassMonad{constructor(value){this.value=value}map(fn){returnnewMonad(fn(this.value))}join(){returnthis.value}flatmap(fn){returnthis.map(fn).join()}}Monad.of=value=>newMonad(value)```使用方法:```js//joinMonad.of(Monad.of(1).join())//Monad{value:1}Monad.of(Monad.of(1)).join()//Monad{value:1}//flatmapMonad.of(1).flatmap(r=>r+1)//2```>Monad函子可以运用在I/O这种不纯的操作上将之变为纯函数的操作，目前比较懵懂，日后补充。###后记1:数组字符串方法小结(是否对原值有影响)####不会对原数组有影响的方法#####slice```jsvartest=[1,2,3]varresult=test.slice(0,1)console.log(test)//[1,2,3]console.log(result)//[1]```#####concat```jsvartest=[1,2,3]varresult=test.concat(4)console.log(test)//[1,2,3]console.log(result)//[1,2,3,4]```####对原数组有影响的方法#####splice(这个需要特别记一下)```jsvartest=[1,2,3]varresult=test.splice(0,1)console.log(test)//[2,3]console.log(result)//[1]```#####sort```jsvararr=[2,1,3,4]arr.sort((r1,r2)=>(r1-r2))console.log(arr)//[1,2,3,4]```#####reverse```jsvartest=[1,2,3]varresult=test.reverse()console.log(test)//[3,2,1]console.log(result)//[3,2,1]```#####push/pop/unshift/shift```jsvartest=[1,2,3]varresult=test.push(4)console.log(test)//[1,2,3,4]console.log(result)//4```####不会对原字符串造成影响的方法#####substr/substring/slice```js//substrvartest='abc'varresult=test.substr(0,1)console.log(test)//'abc'console.log(result)//a//substringvartest='abc'varresult=test.substring(0,1)console.log(test)//'abc'console.log(result)//a//slicevartest='abc'varresult=test.slice(0,1)console.log(test)//'abc'console.log(result)//a```#####replace```jsvartest='abc'varresult=test.replace('c','d')console.log(test)//'abc'console.log(result)//'abd'```###参考*[mostly-adequate-guide](https://mostly-adequate.gitbooks.io/mostly-adequate-guide)*[JavaScript函数式编程指南](https://llh911001.gitbooks.io/mostly-adequate-guide-chinese)*[JavaScript专题之函数柯里化](https://github.com/mqyqingfeng/Blog/issues/42)*[函数式编程入门教程](http://www.ruanyifeng.com/blog/2017/02/fp-tutorial.html)"}],type:"directory",size:9653},{name:"设计模式",path:"/BasicSkill/设计模式",children:[{name:"ioC模式.md",path:"/BasicSkill/设计模式/ioC模式.md",type:"file",mdconf:{abbrlink:"j3257g5c"},birthtime:"2022-01-16",mtime:"2022-01-16",size:662,extension:".md",relative:"/BasicSkill/设计模式/ioC模式.md",isEmpty:!1,content:"\x3c!--abbrlink:j3257g5c--\x3e###IoC模式IoC(InversionofControl)译为控制反转,它包括依赖注入(DependencyInjection)和依赖查询(DependencyLookup)。是面向对象编程的一种设计模式。>控制反转指的是将实例化的过程放到了类外部的容器中进行,在各个类里通过引用相应的类名（依赖查询）调用所需要的类。>在[解读IoC框架InversifyJS](https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E7%AF%87/%E8%A7%A3%E8%AF%BBIoC%E6%A1%86%E6%9E%B6InversifyJS.md)这篇文章中更加深入地探讨了IoC模式在实际项目中的运用。"},{name:"中介者模式.md",path:"/BasicSkill/设计模式/中介者模式.md",type:"file",mdconf:{abbrlink:"p9mgwwap"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1644,extension:".md",relative:"/BasicSkill/设计模式/中介者模式.md",isEmpty:!1,content:"\x3c!--abbrlink:p9mgwwap--\x3e###中介者模式中介者模式:对象和对象之间借助第三方中介者进行通信。![](http://with.muyunyun.cn/ae0958f85990978c48b3a6aa2ca76ea1.jpg-400)###场景demo一场测试结束后,公布结果:告知解答出题目的人挑战成功,否则挑战失败。```jsconstplayer=function(name){this.name=nameplayerMiddle.add(name)}player.prototype.win=function(){playerMiddle.win(this.name)}player.prototype.lose=function(){playerMiddle.lose(this.name)}constplayerMiddle=(function(){//将就用下这个demo,这个函数当成中介者constplayers=[]constwinArr=[]constloseArr=[]return{add:function(name){players.push(name)},win:function(name){winArr.push(name)if(winArr.length+loseArr.length===players.length){this.show()}},lose:function(name){loseArr.push(name)if(winArr.length+loseArr.length===players.length){this.show()}},show:function(){for(letwinnerofwinArr){console.log(winner+'挑战成功;')}for(letloserofloseArr){console.log(loser+'挑战失败;')}},}}())consta=newplayer('A选手')constb=newplayer('B选手')constc=newplayer('C选手')a.win()b.win()c.lose()//A选手挑战成功;//B选手挑战成功;//C选手挑战失败;```在这段代码中A、B、C之间没有直接发生关系,而是通过另外的playerMiddle对象建立链接,姑且将之当成是中介者模式了。"},{name:"享元模式.md",path:"/BasicSkill/设计模式/享元模式.md",type:"file",mdconf:{abbrlink:"m92cq52g"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2925,extension:".md",relative:"/BasicSkill/设计模式/享元模式.md",isEmpty:!1,content:"\x3c!--abbrlink:m92cq52g--\x3e###享元模式享元模式是一种优化程序性能的模式,本质为`减少对象创建的个数`。以下情况可以使用享元模式:1.有大量相似的对象,占用了大量内存2.对象中大部分状态可以抽离为外部状态###demo某商家有50种男款内衣和50种款女款内衣,要展示它们方案一:造50个塑料男模和50个塑料女模,让他们穿上展示,代码如下:```jsconstModel=function(gender,underwear){this.gender=genderthis.underwear=underwear}Model.prototype.takephoto=function(){console.log(`${this.gender}穿着${this.underwear}`)}for(leti=1;i<51;i++){constmaleModel=newModel('male',`第${i}款衣服`)maleModel.takephoto()}for(leti=1;i<51;i++){constfemale=newModel('female',`第${i}款衣服`)female.takephoto()}```方案二:造1个塑料男模特1个塑料女模特,分别试穿50款内衣```jsconstModel=function(gender){this.gender=gender}Model.prototype.takephoto=function(){console.log(`${this.sex}穿着${this.underwear}`)}constmaleModel=newModel('male')constfemaleModel=newModel('female')for(leti=1;i<51;i++){maleModel.underwear=`第${i}款衣服`maleModel.takephoto()}for(leti=1;i<51;i++){femaleModel.underwear=`第${i}款衣服`femaleModel.takephoto()}```对比发现:方案一创建了100个对象,方案二只创建了2个对象,在该demo中,gender(性别)是内部对象,underwear(穿着)是外部对象。当然在方案二的demo中,还可以进一步改善:1.一开始就通过构造函数显示地创建实例,可用工场模式将其升级成可控生成2.在实例上手动添加underwear不是很优雅,可以在外部单独在写个manager函数```jsconstModel=function(gender){this.gender=gender}Model.prototype.takephoto=function(){console.log(`${this.gender}穿着${this.underwear}`)}constmodelFactory=(function(){//优化第一点constmodelGender={}return{createModel:function(gender){if(modelGender[gender]){returnmodelGender[gender]}returnmodelGender[gender]=newModel(gender)}}}())constmodelManager=(function(){constmodelObj={}return{add:function(gender,i){modelObj[i]={underwear:`第${i}款衣服`}returnmodelFactory.createModel(gender)},copy:function(model,i){//优化第二点model.underwear=modelObj[i].underwear}}}())for(leti=1;i<51;i++){constmaleModel=modelManager.add('male',i)modelManager.copy(maleModel,i)maleModel.takephoto()}for(leti=1;i<51;i++){constfemaleModel=modelManager.add('female',i)modelManager.copy(femaleModel,i)femaleModel.takephoto()}```"},{name:"代理模式.md",path:"/BasicSkill/设计模式/代理模式.md",type:"file",mdconf:{abbrlink:"euxm3din"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1805,extension:".md",relative:"/BasicSkill/设计模式/代理模式.md",isEmpty:!1,content:"\x3c!--abbrlink:euxm3din--\x3e###代理模式情景:小明追女生A*非代理模式:小明=花=>女生A*代理模式:小明=花=>让女生A的好友B帮忙=花=>女生A###代理模式的特点*代理对象和本体对象具有一致的接口,对使用者友好代理模式的种类有很多,在JS中最常用的为虚拟代理和缓存代理。####虚拟代理实现图片预加载下面这段代码运用代理模式来实现图片预加载,可以看到通过代理模式巧妙地将创建图片与预加载逻辑分离,并且在未来如果不需要预加载,只要改成请求本体代替请求代理对象就行。```jsconstmyImage=(function(){constimgNode=document.createElement('img')document.body.appendChild(imgNode)return{setSrc:function(src){imgNode.src=src}}})()constproxyImage=(function(){constimg=newImage()img.onload=function(){//http图片加载完毕后才会执行myImage.setSrc(this.src)}return{setSrc:function(src){myImage.setSrc('loading.jpg')//本地loading图片img.src=src}}})()proxyImage.setSrc('http://loaded.jpg')```####缓存代理实现乘积计算```jsconstmult=function(){leta=1for(leti=0,l;l=arguments[i++];){a=a*l}returna}constproxyMult=(function(){constcache={}returnfunction(){consttag=Array.prototype.join.call(arguments,',')if(cache[tag]){returncache[tag]}cache[tag]=mult.apply(this,arguments)returncache[tag]}})()proxyMult(1,2,3,4)//24```###小tip在开发时候不要先去猜测是否需要使用代理模式,如果发现直接使用某个对象不方便时,再来优化不迟。"},{name:"单例模式.md",path:"/BasicSkill/设计模式/单例模式.md",type:"file",mdconf:{abbrlink:"rizxul9p"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1741,extension:".md",relative:"/BasicSkill/设计模式/单例模式.md",isEmpty:!1,content:"\x3c!--abbrlink:rizxul9p--\x3e###单例模式两个条件*确保只有一个实例*可以全局访问###适用适用于弹框的实现,全局缓存###实现单例模式```jsconstsingleton=function(name){this.name=namethis.instance=null}singleton.prototype.getName=function(){console.log(this.name)}singleton.getInstance=function(name){if(!this.instance){//关键语句this.instance=newsingleton(name)}returnthis.instance}//testconsta=singleton.getInstance('a')//通过getInstance来获取实例constb=singleton.getInstance('b')console.log(a===b)```###JavaScript中的单例模式因为JavaScript是无类的语言,而且JS中的全局对象符合单例模式两个条件。很多时候我们把全局对象当成单例模式来使用,```jsvarobj={}```###弹框层的实践实现弹框的一种做法是先创建好弹框,然后使之隐藏,这样子的话会浪费部分不必要的DOM开销,我们可以在需要弹框的时候再进行创建,同时结合单例模式实现只有一个实例,从而节省部分DOM开销。下列为登入框部分代码:```jsconstcreateLoginLayer=function(){constdiv=document.createElement('div')div.innerHTML='登入浮框'div.style.display='none'document.body.appendChild(div)returndiv}```使用单例模式将创建弹框代码解耦,代码如下:```jsconstgetSingle=function(fn){letresultreturnfunction(){returnresult||(result=fn.apply(this,arguments))}}``````jsconstcreateSingleLoginLayer=getSingle(createLoginLayer)document.getElementById('loginBtn').onclick=function(){createSingleLoginLayer()}```"},{name:"发布订阅模式.md",path:"/BasicSkill/设计模式/发布订阅模式.md",type:"file",mdconf:{abbrlink:"3cmugmwo"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2152,extension:".md",relative:"/BasicSkill/设计模式/发布订阅模式.md",isEmpty:!1,content:"\x3c!--abbrlink:3cmugmwo--\x3e###发布订阅模式事件发布/订阅模式(PubSub)在异步编程中帮助我们完成更松的解耦,甚至在MVC、MVVC的架构中以及设计模式中也少不了发布-订阅模式的参与。优点:在异步编程中实现更深的解耦缺点:如果过多的使用发布订阅模式,会增加维护的难度###实现一个发布订阅模式```jsvarEvent=function(){this.obj={}}Event.prototype.on=function(eventType,fn){if(!this.obj[eventType]){this.obj[eventType]=[]}this.obj[eventType].push(fn)}Event.prototype.emit=function(){vareventType=Array.prototype.shift.call(arguments)vararr=this.obj[eventType]for(leti=0;i<arr.length;i++){arr[i].apply(arr[i],arguments)}}varev=newEvent()ev.on('click',function(a){//订阅函数console.log(a)//1})ev.emit('click',1)//发布函数```###订阅函数逻辑一定要优先于发布函数吗考虑以下场景:```js$.ajax('',()=>{//异步订阅函数逻辑})//在其他地方执行发布函数,此时并不能保证执行发布函数的时候,订阅函数已经执行```我们需要实现这样的逻辑:```jsvarev=newEvent()ev.emit('click',1)ev.on('click',function(a){console.log(a)//1})```目标明确后,来着手实现它:```jsvarEvent=function(){this.obj={}this.cacheList=[]}Event.prototype.on=function(eventType,fn){if(!this.obj[eventType]){this.obj[eventType]=[]}this.obj[eventType].push(fn)for(leti=0;i<this.cacheList.length;i++){this.cacheList[i]()}}Event.prototype.emit=function(){constarg=argumentsconstthat=thisfunctioncache(){vareventType=Array.prototype.shift.call(arg)vararr=that.obj[eventType]for(leti=0;i<arr.length;i++){arr[i].apply(arr[i],arg)}}this.cacheList.push(cache)}```以上代码实现思路就是把原本在emit里触发的函数存到cacheList,再转交到on中触发。从而实现了发布函数先于订阅函数执行。"},{name:"命令模式.md",path:"/BasicSkill/设计模式/命令模式.md",type:"file",mdconf:{abbrlink:"77vv1d3r"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1059,extension:".md",relative:"/BasicSkill/设计模式/命令模式.md",isEmpty:!1,content:"\x3c!--abbrlink:77vv1d3r--\x3e###命令模式命令模式与[策略模式](https://github.com/MuYunyun/blog/blob/master/Basic%20Skill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.md)有些类似,在JavaScript中它们都是隐式的。重要性:较低###JavaScript中的命令模式命令模式在JavaScript中也比较简单,下面代码中对`按钮`和`命令`进行了抽离,因此可以复杂项目中可以使用命令模式将界面的代码和功能的代码交付给不同的人去写。```jsconstsetCommand=function(button,command){button.onClick=function(){command.excute()}}//--------------------上面的界面逻辑由A完成,下面的由B完成constmenu={updateMenu:function(){console.log('更新菜单')},}constUpdateCommand=function(receive){return{excute:receive.updateMenu,}}constupdateCommand=UpdateCommand(menu)//创建命令constbutton1=document.getElementById('button1')setCommand(button1,updateCommand)```"},{name:"模板方法模式.md",path:"/BasicSkill/设计模式/模板方法模式.md",type:"file",mdconf:{abbrlink:"631wdfgg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2185,extension:".md",relative:"/BasicSkill/设计模式/模板方法模式.md",isEmpty:!1,content:"\x3c!--abbrlink:631wdfgg--\x3e###模板方法模式定义:在继承的基础上,在父类中定义好执行的算法。###泡茶和泡咖啡来对比下泡茶和泡咖啡过程中的异同|步骤|泡茶|泡咖啡||:-:|:-:|:-:||1|烧开水|烧开水||2|浸泡茶叶|冲泡咖啡||3|倒入杯子|倒入杯子||4|加柠檬|加糖|可以清晰地看出仅仅在步骤2和4上有细微的差别,下面着手实现:```jsconstDrinks=function(){}Drinks.prototype.firstStep=function(){console.log('烧开水')}Drinks.prototype.secondStep=function(){}Drinks.prototype.thirdStep=function(){console.log('倒入杯子')}Drinks.prototype.fourthStep=function(){}Drinks.prototype.init=function(){//模板方法模式核心:在父类上定义好执行算法this.firstStep()this.secondStep()this.thirdStep()this.fourthStep()}constTea=function(){}Tea.prototype=newDrinksTea.prototype.secondStep=function(){console.log('浸泡茶叶')}Tea.prototype.fourthStep=function(){console.log('加柠檬')}constCoffee=function(){}Coffee.prototype=newDrinksCoffee.prototype.secondStep=function(){console.log('冲泡咖啡')}Coffee.prototype.fourthStep=function(){console.log('加糖')}consttea=newTea()tea.init()//烧开水//浸泡茶叶//倒入杯子//加柠檬constcoffee=newCoffee()coffee.init()//烧开水//冲泡咖啡//倒入杯子//加糖```###钩子假如客人不想加佐料(糖、柠檬)怎么办,这时可以引人钩子来实现之,实现逻辑如下:```js//...Drinks.prototype.ifNeedFlavour=function(){//加上钩子returntrue}Drinks.prototype.init=function(){//模板方法模式核心:在父类上定义好执行算法this.firstStep()this.secondStep()this.thirdStep()if(this.ifNeedFlavour()){//默认是true,也就是要加调料this.fourthStep()}}//...constCoffee=function(){}Coffee.prototype=newDrinks()//...Coffee.prototype.ifNeedFlavour=function(){returnwindow.confirm('是否需要佐料吗？')//弹框选择是否佐料}```"},{name:"状态模式.md",path:"/BasicSkill/设计模式/状态模式.md",type:"file",mdconf:{abbrlink:"s9x6auju"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2490,extension:".md",relative:"/BasicSkill/设计模式/状态模式.md",isEmpty:!1,content:"\x3c!--abbrlink:s9x6auju--\x3e###状态模式状态模式:将事物内部的每个状态分别封装成类,内部状态改变会产生不同行为。优点:用对象代替字符串记录当前状态,状态易维护缺点:需编写大量状态类对象###场景demo某某牌电灯,按一下按钮打开弱光,按两下按钮打开强光,按三下按钮关闭灯光。```js//将状态封装成不同类constweakLight=function(light){this.light=light}weakLight.prototype.press=function(){console.log('打开强光')this.light.setState(this.light.strongLight)}conststrongLight=function(light){this.light=light}strongLight.prototype.press=function(){console.log('关灯')this.light.setState(this.light.offLight)}constoffLight=function(light){this.light=light}offLight.prototype.press=function(){console.log('打开弱光')this.light.setState(this.light.weakLight)}constLight=function(){this.weakLight=newweakLight(this)this.strongLight=newstrongLight(this)this.offLight=newoffLight(this)this.currentState=this.offLight//初始状态}Light.prototype.init=function(){constbtn=document.createElement('button')btn.innerHTML='按钮'document.body.append(btn)constself=thisbtn.addEventListener('click',function(){self.currentState.press()})}Light.prototype.setState=function(state){//改变当前状态this.currentState=state}constlight=newLight()light.init()//打开弱光//打开强光//关灯```###非面向对象实现的状态模式借助于JavaScript的委托机制,可以像如下实现状态模式:```jsconstobj={'weakLight':{press:function(){console.log('打开强光')this.currentState=obj.strongLight}},'strongLight':{press:function(){console.log('关灯')this.currentState=obj.offLight}},'offLight':{press:function(){console.log('打开弱光')this.currentState=obj.weakLight}},}constLight=function(){this.currentState=obj.offLight}Light.prototype.init=function(){constbtn=document.createElement('button')btn.innerHTML='按钮'document.body.append(btn)constself=thisbtn.addEventListener('click',function(){self.currentState.press.call(self)//通过call完成委托})}constlight=newLight()light.init()```"},{name:"策略模式.md",path:"/BasicSkill/设计模式/策略模式.md",type:"file",mdconf:{abbrlink:"d8asfapg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1169,extension:".md",relative:"/BasicSkill/设计模式/策略模式.md",isEmpty:!1,content:"\x3c!--abbrlink:d8asfapg--\x3e###策略模式`定义`:根据不同参数可以命中不同的策略###JavaScript中的策略模式观察如下获取年终奖的demo,根据不同的参数（level）获得不同策略方法(规则),这是策略模式在JS比较经典的运用之一。```jsconststrategy={'S':function(salary){returnsalary*4},'A':function(salary){returnsalary*3},'B':function(salary){returnsalary*2}}constcalculateBonus=function(level,salary){returnstrategy[level](salary)}calculateBonus('A',10000)//30000```在函数是一等公民的JS中,策略模式的使用常常隐藏在高阶函数中,稍微变换下上述demo的形式如下,可以发现我们平时已经在使用它了,恭喜我们又掌握了一种设计模式。```jsconstS=function(salary){returnsalary*4}constA=function(salary){returnsalary*3}constB=function(salary){returnsalary*2}constcalculateBonus=function(func,salary){returnfunc(salary)}calculateBonus(A,10000)//30000```###优点*能减少大量的if语句*复用性好"},{name:"组合模式.md",path:"/BasicSkill/设计模式/组合模式.md",type:"file",mdconf:{abbrlink:"1byioyjm"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3304,extension:".md",relative:"/BasicSkill/设计模式/组合模式.md",isEmpty:!1,content:"\x3c!--abbrlink:1byioyjm--\x3e###组合模式*组合模式在对象间形成`树形结构`;*组合模式中基本对象和组合对象被`一致对待`;*无须关心对象有多少层,调用时只需在根部进行调用;###demo1——宏命令想象我们现在手上有个万能遥控器,当我们回家,按一下开关,下列事情将被执行:```1.煮咖啡2.打开电视、打开音响3.打开空调、打开电脑```我们把任务划分为3类,效果图如下:![](http://with.muyunyun.cn/9c87ce835515f3d9b60a86a0f28897d9.jpg-400)接着看看结合了[命令模式](https://github.com/MuYunyun/blog/blob/master/Basic%20Skill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/命令模式.md)和组合模式的具体实现:```jsconstMacroCommand=function(){return{lists:[],add:function(task){this.lists.push(task)},excute:function(){//①:组合对象调用这里的excute,for(leti=0;i<this.lists.length;i++){this.lists[i].excute()}},}}constcommand1=MacroCommand()//基本对象command1.add({excute:()=>console.log('煮咖啡')//②:基本对象调用这里的excute,})constcommand2=MacroCommand()//组合对象command2.add({excute:()=>console.log('打开电视')})command2.add({excute:()=>console.log('打开音响')})constcommand3=MacroCommand()command3.add({excute:()=>console.log('打开空调')})command3.add({excute:()=>console.log('打开电脑')})constmacroCommand=MacroCommand()macroCommand.add(command1)macroCommand.add(command2)macroCommand.add(command3)macroCommand.excute()//煮咖啡//打开电视//打开音响//打开空调//打开电脑```可以看出在组合模式中基本对象和组合对象被一致对待,所以要保证基本对象(叶对象)和组合对象具有一致方法。###demo2——扫描文件夹扫描文件夹时,文件夹下面可以为另一个文件夹也可以为文件,我们希望统一对待这些文件夹和文件,这种情形适合使用组合模式。```jsconstFolder=function(folder){this.folder=folderthis.lists=[]}Folder.prototype.add=function(resource){this.lists.push(resource)}Folder.prototype.scan=function(){console.log('开始扫描文件夹:',this.folder)for(leti=0,folder;folder=this.lists[i++];){folder.scan()}}constFile=function(file){this.file=file}File.prototype.add=function(){throwError('文件下不能添加其它文件夹或文件')}File.prototype.scan=function(){console.log('开始扫描文件:',this.file)}constfolder=newFolder('根文件夹')constfolder1=newFolder('JS')constfolder2=newFolder('life')constfile1=newFile('深入React技术栈.pdf')constfile2=newFile('JavaScript权威指南.pdf')constfile3=newFile('小王子.pdf')folder1.add(file1)folder1.add(file2)folder2.add(file3)folder.add(folder1)folder.add(folder2)folder.scan()//开始扫描文件夹:根文件夹//开始扫描文件夹:JS//开始扫描文件:深入React技术栈.pdf//开始扫描文件:JavaScript权威指南.pdf//开始扫描文件夹:life//开始扫描文件:小王子.pdf```"},{name:"职责链模式.md",path:"/BasicSkill/设计模式/职责链模式.md",type:"file",mdconf:{abbrlink:"k27cb3ml"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5228,extension:".md",relative:"/BasicSkill/设计模式/职责链模式.md",isEmpty:!1,content:"\x3c!--abbrlink:k27cb3ml--\x3e###职责链模式职责链模式:类似多米诺骨牌,通过请求第一个条件,会持续执行后续的条件,直到返回结果为止。![](http://with.muyunyun.cn/cbc8c10bbae202bcd243f6b0704de3ba.jpg-300)重要性:4星,在项目中能对if-else语句进行优化###场景demo场景:某电商针对已付过定金的用户有优惠政策,在正式购买后,已经支付过500元定金的用户会收到100元的优惠券,200元定金的用户可以收到50元优惠券,没有支付过定金的用户只能正常购买。```js//orderType:表示订单类型,1:500元定金用户；2:200元定金用户；3:普通购买用户//pay:表示用户是否已经支付定金,true:已支付；false:未支付//stock:表示当前用于普通购买的手机库存数量,已支付过定金的用户不受此限制constorder=function(orderType,pay,stock){if(orderType===1){if(pay===true){console.log('500元定金预购,得到100元优惠券')}else{if(stock>0){console.log('普通购买,无优惠券')}else{console.log('库存不够,无法购买')}}}elseif(orderType===2){if(pay===true){console.log('200元定金预购,得到50元优惠券')}else{if(stock>0){console.log('普通购买,无优惠券')}else{console.log('库存不够,无法购买')}}}elseif(orderType===3){if(stock>0){console.log('普通购买,无优惠券')}else{console.log('库存不够,无法购买')}}}order(3,true,500)//普通购买,无优惠券```下面用职责链模式改造代码:```jsconstorder500=function(orderType,pay,stock){if(orderType===1&&pay===true){console.log('500元定金预购,得到100元优惠券')}else{order200(orderType,pay,stock)}}constorder200=function(orderType,pay,stock){if(orderType===2&&pay===true){console.log('200元定金预购,得到50元优惠券')}else{orderCommon(orderType,pay,stock)}}constorderCommon=function(orderType,pay,stock){if((orderType===3||!pay)&&stock>0){console.log('普通购买,无优惠券')}else{console.log('库存不够,无法购买')}}order500(3,true,500)//普通购买,无优惠券```改造后可以发现代码相对清晰了,但是链路代码和业务代码依然耦合在一起,进一步优化:```js//业务代码constorder500=function(orderType,pay,stock){if(orderType===1&&pay===true){console.log('500元定金预购,得到100元优惠券')}else{return'nextSuccess'}}constorder200=function(orderType,pay,stock){if(orderType===2&&pay===true){console.log('200元定金预购,得到50元优惠券')}else{return'nextSuccess'}}constorderCommon=function(orderType,pay,stock){if((orderType===3||!pay)&&stock>0){console.log('普通购买,无优惠券')}else{console.log('库存不够,无法购买')}}//链路代码constchain=function(fn){this.fn=fnthis.sucessor=null}chain.prototype.setNext=function(sucessor){this.sucessor=sucessor}chain.prototype.init=function(){constresult=this.fn.apply(this,arguments)if(result==='nextSuccess'){this.sucessor.init.apply(this.sucessor,arguments)}}constorder500New=newchain(order500)constorder200New=newchain(order200)constorderCommonNew=newchain(orderCommon)order500New.setNext(order200New)order200New.setNext(orderCommonNew)order500New.init(3,true,500)//普通购买,无优惠券```重构后,链路代码和业务代码彻底地分离。假如未来需要新增order300,那只需新增与其相关的函数而不必改动原有业务代码。另外结合AOP还能简化上述链路代码:```js//业务代码constorder500=function(orderType,pay,stock){if(orderType===1&&pay===true){console.log('500元定金预购,得到100元优惠券')}else{return'nextSuccess'}}constorder200=function(orderType,pay,stock){if(orderType===2&&pay===true){console.log('200元定金预购,得到50元优惠券')}else{return'nextSuccess'}}constorderCommon=function(orderType,pay,stock){if((orderType===3||!pay)&&stock>0){console.log('普通购买,无优惠券')}else{console.log('库存不够,无法购买')}}//链路代码Function.prototype.after=function(fn){constself=thisreturnfunction(){constresult=self.apply(self,arguments)if(result==='nextSuccess'){returnfn.apply(self,arguments)//这里return别忘记了~}}}constorder=order500.after(order200).after(orderCommon)order(3,true,500)//普通购买,无优惠券```职责链模式比较重要,项目中能用到它的地方会有很多,用上它能解耦1个请求对象和n个目标对象的关系。"},{name:"装饰者模式.md",path:"/BasicSkill/设计模式/装饰者模式.md",type:"file",mdconf:{abbrlink:"mzqguwi3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1916,extension:".md",relative:"/BasicSkill/设计模式/装饰者模式.md",isEmpty:!1,content:"\x3c!--abbrlink:mzqguwi3--\x3e###装饰者模式装饰器模式:动态地给函数赋能。###JavaScript的装饰者模式生活中的例子:天气冷了,就添加衣服来保暖；天气热了,就将外套脱下；这个例子很形象地含盖了装饰器的神韵,随着天气的冷暖变化,衣服可以动态的穿上脱下。```jsletwear=function(){console.log('穿上第一件衣服')}const_wear1=wearwear=function(){_wear1()console.log('穿上第二件衣服')}const_wear2=wearwear=function(){_wear2()console.log('穿上第三件衣服')}wear()//穿上第一件衣服//穿上第二件衣服//穿上第三件衣服```这种方式有以下缺点:1:临时变量会变得越来越多；2:this指向有时会出错###AOP装饰函数```js//前置代码Function.prototype.before=function(fn){constself=thisreturnfunction(){fn.apply(new(self),arguments)//https://github.com/MuYunyun/blog/pull/30#event-1817065820returnself.apply(new(self),arguments)}}//后置代码Function.prototype.after=function(fn){constself=thisreturnfunction(){self.apply(new(self),arguments)returnfn.apply(new(self),arguments)}}```用后置代码来实验下上面穿衣服的demo,```jsconstwear1=function(){console.log('穿上第一件衣服')}constwear2=function(){console.log('穿上第二件衣服')}constwear3=function(){console.log('穿上第三件衣服')}constwear=wear1.after(wear2).after(wear3)wear()//穿上第一件衣服//穿上第二件衣服//穿上第三件衣服```但这样子有时会污染原生函数,可以做点通变```jsconstafter=function(fn,afterFn){returnfunction(){fn.apply(this,arguments)afterFn.apply(this,arguments)}}constwear=after(after(wear1,wear2),wear3)wear()```"},{name:"观察者模式.md",path:"/BasicSkill/设计模式/观察者模式.md",type:"file",mdconf:{abbrlink:"zyhpx5ad"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2585,extension:".md",relative:"/BasicSkill/设计模式/观察者模式.md",isEmpty:!1,content:"\x3c!--abbrlink:zyhpx5ad--\x3e###观察者模式应用场景:1.场景一:当观察的数据对象发生变化时,自动调用相应函数。比如vue的双向绑定;2.场景二:每当调用对象里的某个方法时,就会调用相应'访问'逻辑。比如给测试框架赋能的spy函数;###场景一:双向绑定####Object.defineProperty使用`Object.defineProperty(obj,props,descriptor)`实现观察者模式,其也是[vue双向绑定](https://github.com/MuYunyun/blog/issues/11)的核心,示例如下(当改变obj中的value的时候,自动调用相应相关函数):```jsvarobj={data:{list:[]},}Object.defineProperty(obj,'list',{get(){returnthis.data['list']},set(val){console.log('值被更改了')this.data['list']=val}})```####ProxyProxy/Reflect是ES6引入的新特性,也可以使用其完成观察者模式,示例如下(效果同上):```jsvarobj={value:0}varproxy=newProxy(obj,{set:function(target,key,value,receiver){//{value:0}\"value\"1Proxy{value:0}console.log('调用相应函数')Reflect.set(target,key,value,receiver)}})proxy.value=1//调用相应函数```###场景二下面来实现sinon框架的spy函数:```jsconstsinon={analyze:{},spy:function(obj,fnName){constthat=thisconstoldFn=Object.getOwnPropertyDescriptor(obj,fnName).valueObject.defineProperty(obj,fnName,{value:function(){oldFn()if(that.analyze[fnName]){that.analyze[fnName].count=++that.analyze[fnName].count}else{that.analyze[fnName]={}that.analyze[fnName].count=1}console.log(`${fnName}被调用了${that.analyze[fnName].count}次`)}})}}constobj={someFn:function(){console.log('mynameissomeFn')}}sinon.spy(obj,'someFn')obj.someFn()//mynameissomeFn//someFn被调用了1次obj.someFn()//mynameissomeFn//someFn被调用了2次```###`vue`在3.0版本上使用`Proxy`重构的原因首先罗列`Object.defineProperty()`的缺点:1.`Object.defineProperty()`不会监测到数组引用不变的操作(比如`push/pop`等);2.`Object.defineProperty()`只能监测到对象的属性的改变,即如果有深度嵌套的对象则需要再次给之绑定`Object.defineProperty()`;关于`Proxy`的优点1.可以劫持数组的改变;2.`defineProperty`是对属性的劫持,`Proxy`是对对象的劫持;"},{name:"迭代器模式.md",path:"/BasicSkill/设计模式/迭代器模式.md",type:"file",mdconf:{abbrlink:"2qm4d8um"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1833,extension:".md",relative:"/BasicSkill/设计模式/迭代器模式.md",isEmpty:!1,content:"\x3c!--abbrlink:2qm4d8um--\x3e###迭代器模式定义:能访问到聚合对象的顺序与元素###实现一个内部迭代器```jsfunctioneach(arr,fn){for(leti=0;i<arr.length;i++){fn(i,arr[i])}}each([1,2,3],function(i,n){console.log(i)//012console.log(n)//123})```可以看出内部迭代器在调用的时候非常简单,使用者不用关心迭代器内部实现的细节,但这也是内部迭代器的缺点。比如要比较两数组是否相等,只能在其回调函数中作文章了,代码如下:```jsconstcompare=function(arr1,arr2){each(arr1,function(i,n){if(arr2[i]!==n){console.log('两数组不等')return}})console.log('两数组相等')}constarr1=[1,2,3]constarr2=[1,2,3]compare(arr1,arr2)//两数组相等```###实现一个外部迭代器相较于内部迭代器,外部迭代器将遍历的权利转移到外部,因此在调用的时候拥有了更多的自由性,不过缺点是调用方式较复杂。```jsconstiterator=function(arr){letcurrent=0constnext=function(){current=current+1}constdone=function(){returncurrent>=arr.length}constvalue=function(){returnarr[current]}return{next,done,value,}}constarr1=[1,2,3]constarr2=[1,2,3]constiterator1=iterator(arr1)constiterator2=iterator(arr2)constcompare=function(iterator1,iterator2){while(!iterator1.done()&&!iterator2.done()){if(iterator1.value()!==iterator2.value()){console.log('两数组不等')return}iterator1.next()//外部迭代器将遍历的权利转移到外部iterator2.next()}console.log('两数组相等')}compare(iterator1,iterator2)```"},{name:"适配者模式.md",path:"/BasicSkill/设计模式/适配者模式.md",type:"file",mdconf:{abbrlink:"n9yua87r"},birthtime:"2022-01-16",mtime:"2022-01-16",size:603,extension:".md",relative:"/BasicSkill/设计模式/适配者模式.md",isEmpty:!1,content:"\x3c!--abbrlink:n9yua87r--\x3e###适配者模式适配者模式:主要用于解决两个接口之间不匹配的问题。###demo```js//老接口constzhejiangCityOld=(function(){return[{name:'hangzhou',id:11,},{name:'jinhua',id:12}]}())console.log(getZhejiangCityOld())//新接口希望是下面形式{hangzhou:11,jinhua:12,}//这时候就可采用适配者模式constadaptor=(function(oldCity){constobj={}for(letcityofzhejiangCityOld){obj[city.name]=city.id}returnobj}())```"}],type:"directory",size:33301}],type:"directory",size:323176},{name:"FeCloud",path:"/FeCloud",children:[{name:"babel执行机制.md",path:"/FeCloud/babel执行机制.md",type:"file",mdconf:{abbrlink:"yb1qmuv1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1498,extension:".md",relative:"/FeCloud/babel执行机制.md",isEmpty:!1,content:"\x3c!--abbrlink:yb1qmuv1--\x3eBabel是下一代JavaScript编译器。###babel执行机制babel执行三部曲如下:*解析使用[babel-parse](https://github.com/babel/babel/tree/master/packages/babel-parser)将JS代码解析成AST树*转换配合[babel-traverse](https://github.com/babel/babel/tree/master/packages/babel-traverse)进行AST树的遍历,同时使用[babel-core](https://github.com/babel/babel/tree/master/packages/babel-core)对外暴露的`transform`来调用相应插件来转化AST树```jsbabal.transform(code,{plugins:{pluginA,pluginB}})```*生成使用[babel-generator](https://github.com/babel/babel/tree/master/packages/babel-generator)将AST树转换回JS代码####值得阅读的文章*[babel中文官网](https://www.babeljs.cn/)*[剖析Babel——Babel总览](http://www.alloyteam.com/2017/04/analysis-of-babel-babel-overview/),这篇文章讲得比较透彻*[babel-handbook](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/README.md),babel手册,推荐*[Babel插件开发一些示例](http://web.jobbole.com/91277/),这篇文章bug比较多,可以作为上面文章的补充*[ASTexplore](https://astexplorer.net/#/KJ8AjD6maa),可以在这个网站上看到JS代码对应的AST*[@babel/types](https://babeljs.io/docs/en/next/babel-types.html),babel-types可以用来生成转换相应的babel节点,同时文案可以作为api来参考。"},{name:"chrome插件开发.md",path:"/FeCloud/chrome插件开发.md",type:"file",mdconf:{abbrlink:"57i3ssqa"},birthtime:"2022-01-16",mtime:"2022-01-16",size:859,extension:".md",relative:"/FeCloud/chrome插件开发.md",isEmpty:!1,content:"\x3c!--abbrlink:57i3ssqa--\x3e###数据备份方案首先选择相应插件,这里以git-remark为例![](http://with.muyunyun.cn/642ef9638488d9d9b0857464b354f246.jpg-200)```jschrome.storage.local.get('github-repo-notes',res=>{console.log(JSON.stringify(res['github-repo-notes']))})``````jschrome.storage.local.set({'github-repo-notes':obj},()=>{})```###相关文档*[chrome://extensions](chrome://extensions)*[360扩展开发文档](http://open.chrome.360.cn/extension_dev/overview.html)*[chrome扩展开发文档](https://developer.chrome.com/extensions)###插件发版*[插件发版地址](https://chrome.google.com/webstore/developer/dashboard/)*[GitHubNotes](https://chrome.google.com/webstore/detail/github-notes/ololfachmeilbnmipbbglhbdnadcjlak?authuser=0)>开发者账号backup:liweirancn@gmail.com"},{name:"ci调试技巧.md",path:"/FeCloud/ci调试技巧.md",type:"file",mdconf:{abbrlink:"qcpplm3x"},birthtime:"2022-01-16",mtime:"2022-01-16",size:154,extension:".md",relative:"/FeCloud/ci调试技巧.md",isEmpty:!1,content:"\x3c!--abbrlink:qcpplm3x--\x3e###.gitlab.yml调试技巧1.在`scripts`中书写脚本。2.本地运行[docker](./docker.md)环境启动项目。"},{name:"code_online_platform.md",path:"/FeCloud/code_online_platform.md",type:"file",mdconf:{abbrlink:"3msae1b6"},birthtime:"2022-01-16",mtime:"2022-01-16",size:531,extension:".md",relative:"/FeCloud/code_online_platform.md",isEmpty:!1,content:"\x3c!--abbrlink:3msae1b6--\x3e###CodeSandboxvsCodeBox####Editor*CodeSandbox:`FreeFileSystem`;Takethe[monaco-editor](https://github.com/Microsoft/monaco-editor);*CodeBox####Social*CodeSandbox:Itsupports`areal-timecollaboration`.Youhave`accesstosomeofVSCodesettings`.*CodeBox:CodePentakessocialexperiencestoanotherlevel.Likes,`comments,views,tags,posts,collections`,etc.-itallmakesCodePena`socialwebdevelopmentplatform`.Anditcantakedocumentationandadedicatedblog."},{name:"create-react-doc.md",path:"/FeCloud/create-react-doc.md",type:"file",mdconf:{abbrlink:"xxvfc3g7"},birthtime:"2022-01-16",mtime:"2022-01-16",size:781,extension:".md",relative:"/FeCloud/create-react-doc.md",isEmpty:!1,content:'\x3c!--abbrlink:xxvfc3g7--\x3e###Howtogetanupdatedtime*GraghQLAPI*https://developer.github.com/v4/explorer/```jsinput:{repository(owner:"MuYunyun",name:"blog"){ref(qualifiedName:"refs/heads/master"){target{...onCommit{history(first:1,path:"package.json"){edges{node{committedDate}}}}}}}}return:{"data":{"repository":{"ref":{"target":{"history":{"edges":[{"node":{"committedDate":"2020-06-12T10:53:12Z"}}]}}}}}}```'},{name:"docker.md",path:"/FeCloud/docker.md",type:"file",mdconf:{abbrlink:"t6pnnqir"},birthtime:"2022-01-16",mtime:"2022-01-16",size:513,extension:".md",relative:"/FeCloud/docker.md",isEmpty:!1,content:"\x3c!--abbrlink:t6pnnqir--\x3e###Docker是什么？Docker属于Linux容器的一种封装，提供简单易用的容器使用接口。它是目前最流行的Linux容器解决方案。###使用场景1.提供一次性的环境。2.提供弹性的云服务。3.组建微服务架构。###Install```jsbrewcaskinstalldocker```>[install](https://www.runoob.com/docker/macos-docker-install.html)###link*[docker-tutorial](https://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html)"},{name:"lerna.md",path:"/FeCloud/lerna.md",type:"file",mdconf:{abbrlink:"x748bgzt"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1656,extension:".md",relative:"/FeCloud/lerna.md",isEmpty:!1,content:"\x3c!--abbrlink:x748bgzt--\x3e###lerna###background~~需求背景:需要在`pc`端容器里嵌套一个`mobile`容器，相当于要同时启动两个项目。~~~~将其定位为一个`monorepos`项目。~~Fromlerna>Splittinguplargecodebasesintoseparateindependentlyversionedpackagesisextremelyusefulforcodesharing.However,makingchangesacrossmanyrepositoriesismessyanddifficulttotrack,andtestingacrossrepositoriesbecomescomplicatedveryquickly.###Usage```$mkdirlerna-repo&&cd$_$npxlernainit```*lernainit:初始化当前项目*lernarun:跑各个子包里的`script`*lernabootstrap:BootstrapthepackagesinthecurrentLernarepo.Installsalloftheirdependenciesandlinksanycross-dependencies.*lernaadd:addmoduletochildmodulefromtherootdir.[document](https://github.com/lerna/lerna/tree/master/commands/add#examples)*lernaaddeslint--scope=crd-scripts--dev>detailssee[lernadoc](https://lerna.js.org/)*[Monorepo迁移实践](https://medium.com/@banyudu/mono-repo-%E8%BF%81%E7%A7%BB%E5%AE%9E%E8%B7%B5-eaf955aaf4d7)*[awesome-monorepo](https://github.com/korfuri/awesome-monorepo)###Advandage*Quickjumptoreferencefile.*Insteadwebpackaliasmaybedoextraconfig.###Q&A>whyshouldaddworkspacesandprivatepropsintheroot?Therootpackage.jsonusuallynothaveanyeffect,andworkspacesandprivatepropsareusedtogether.###QuestionItseemsitshouldbenamed@crd/themeinsteadof@crd-theme.###相关资料*[lernagithub](https://github.com/lerna)*[alist](https://github.com/alibaba/alist)"},{name:"live-code.md",path:"/FeCloud/live-code.md",type:"file",mdconf:{abbrlink:"p172zc4o"},birthtime:"2022-01-16",mtime:"2022-01-16",size:238,extension:".md",relative:"/FeCloud/live-code.md",isEmpty:!1,content:"\x3c!--abbrlink:p172zc4o--\x3e###在线编译markdown-[mdx](https://github.com/mdx-js/mdx)-[react-live](https://github.com/FormidableLabs/react-live):不支持import-[react-code-view](https://github.com/simonguo/react-code-view)"},{name:"npm和yarn的区别.md",path:"/FeCloud/npm和yarn的区别.md",type:"file",mdconf:{abbrlink:"iwwepxpg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3251,extension:".md",relative:"/FeCloud/npm和yarn的区别.md",isEmpty:!1,content:'\x3c!--abbrlink:iwwepxpg--\x3e###包下载的前置知识一个包的版本号基本由三位数字构成`x.x.x`,它们分别是`Major`(主版本号),`Minor`(次版本号),`Patch`(修订号)。*`*`:升级`Major`+`Minor`+`Patch`;*`^`:升级`Minor`+`Patch`;*`~`:升级`Patch`;比如`^4.3.1表示4.x.x`的最新版,`~4.3.1表示4.3.x`的最新版。###npm`npm`经历了3次升级:*`npm1`:嵌套结构缺点:相同的包会被重复下载多次,比如下列a、b、c都依赖了xxx这个包,xxx这个包被下载了3次。```text-node-modules-a-node-modules-xxx@1.0.0-b-node-modules-xxx@1.0.0-c-node-modules-xxx@1.0.1```*`npm3`:扁平结构所依赖的包的依赖也安装于根目录,如果所依赖的包的依赖在根目录已存在但是版本不一致,则在所依赖的包下面单独加上依赖的包。例子如下:```-node-modules-a-b-xxx@1.0.0-c-node-modules-xxx@1.0.1```*`npm5`:扁平结构+package-lock.json加上锁文件,确保在不同电脑上安装的包的版本号相同。###yarn*更快,离线缓存*yarn.lock文件####yarn和npm5的区别#####同*`npm`通过`package-lock.json`推断出`node_modules`目录*`yarn`也能通过`yarn.lock`文件推断出`node_modules`顶层目录的。就是要通过稍微计算,比如下方:```js//yarn的yarn.lock类似如下-a-b-c-xxx@1.0.1-xxx@1.0.1-xxx@1.0.0```这个例子中,我们能得出顶层目录如下:```js//node_modules-a-b-c-xxx@1.0.0```#####异*依赖于`yarn`的缓存机制(类似`cnpm`的引用机制？),`yarn`的安装速度更快,甚至能离线加载;也就是说`yarn`结合了`npm`和`cnpm`的优点。####Hooks踩坑Therearethreecommonreasonsyoumightbeseeingit:```js1.YoumighthavemismatchingversionsofReactandReactDOM.2.YoumightbebreakingtheRulesofHooks.3.YoumighthavemorethanonecopyofReactinthesameapp.```在demo项目中使用yarnlink"@msfe/beast-mobile"会遇到上述报错,解决方法是执行(貌似有问题)```bashnpmlink../beast-mobile-demo/node_modules/reactfrom@msfe/beast-mobile```另一种方法是在业务项目中配置[resolutions](https://yarnpkg.com/lang/en/docs/selective-version-resolutions/)try[yalc](https://github.com/whitecolor/yalc)###区分几个package.json字段*dependencies:业务依赖*devDependencies:开发依赖*peerDependencies:*a依赖了b包,b包的peerDependencies字段含有c包。*b包执行yarn此时并不会安装上c包。*如果a包中未执行安装c包,则会报错。###resolutionsinpackage.json背景:在项目中的package.json字段里dependencies字段有较新版本的beast-mobile(带主题包),resolutions指向了较低版本的beast-mobile(不带主题包)。此时验证项目中包含主题包。查找yarn的[rfc](https://github.com/yarnpkg/rfcs/blob/master/implemented/0000-selective-versions-resolutions.md#package-designation),resolutions指定的目录只针对「嵌套」依赖的包版本生效。'},{name:"seo_in_spa_site.md",path:"/FeCloud/seo_in_spa_site.md",type:"file",mdconf:{abbrlink:"ettzfags"},birthtime:"2022-01-16",mtime:"2022-01-16",size:22959,extension:".md",relative:"/FeCloud/seo_in_spa_site.md",isEmpty:!1,content:"\x3c!--abbrlink:ettzfags--\x3e##SEO在SPA站点中的实践###背景![](http://with.muyunyun.cn/c03d8772da6d57e47c55044aee364103.jpg)观察基于[create-react-doc](https://github.com/MuYunyun/create-react-doc)搭建的[文档站点](http://muyunyun.cn/create-react-doc/),发现网页代码光秃秃的一片(见下图)。这显然是单页应用(SPA)站点的通病——不利于文档被搜索引擎搜索(SEO)。![](http://with.muyunyun.cn/0ba88a7544efe0e1978e6c8d8b7775a6.jpg)难道SPA站点就无法进行SEO了么,那么[Gatsby](https://github.com/gatsbyjs/gatsby)、[nuxt](https://github.com/nuxt/nuxt.js)等框架又为何能作为不少博主搭建博客的首选方案呢,此类框架赋能SEO的技术原理是什么呢?在好奇心的驱动下,笔者尝试对[creat-react-doc](https://github.com/MuYunyun/create-react-doc)进行赋能SEO之旅。###搜索引擎优化在实践之前,先从理论上分析为何单页应用不能被搜索引擎搜索到。核心在于`爬虫蜘蛛在执行爬取的过程中,不会去执行网页中的JS逻辑`,所以`隐藏在JS中的跳转逻辑也不会被执行`。查看当前SPA站点打包后的代码,除了一个根目录index.html外,其它都是注入的JS逻辑,因此浏览器自然不会对其进行SEO。![](http://with.muyunyun.cn/0d15d4e3a62516da7c301e8f1c9228d6.jpg)此外,搜索引擎详优化是一门较复杂的学问。如果你对SEO优化比较陌生,建议阅读[搜索引擎优化(SEO)新手指南](https://developers.google.com/search/docs/beginner/seo-starter-guide)一文,Google搜索中心给出了全面的**17个**最佳做法,以及**33个**应避免的做法,这也是笔者近期在实践的部分。###SEO在SPA站点中的实践案例在轻文档站点的背景前提下,我们暂不考虑SSR方案。对市面上文档站点的SEO方案调研后,笔者总结为如下四类:*静态模板渲染方案*404重定向方案*SSG方案*预渲染方案####静态模板渲染方案静态模板渲染方案以[hexo](https://github.com/hexojs/hexo)最为典型,此类框架需要指定特定的模板语言(比如[pug](https://github.com/pugjs/pug))来开发主题,从而达到网页内容直出的目的。####404重定向方案404重定向方案的原理主要是利用GitHubPages的404机制进行重定向。比较典型的案例有[spa-github-pages](https://github.com/rafgraph/spa-github-pages)、[sghpa](https://github.com/csuwildcat/sghpa)。但是遗憾的是2019年Google[调整了爬虫算法](https://github.com/rafgraph/spa-github-pages#seo),因此此类重定向方案在当下是无利于SEO的。spa-github-pages作者也表示如果需要SEO的话,使用SSG方案或者付费方案[Netlify](https://www.netlify.com/blog/2020/04/07/creating-better-more-predictable-redirect-rules-for-spas/)。![](http://with.muyunyun.cn/bbb5ed8bce1e0c08dae94df98ff33262.jpg)####SSG方案SSG方案全称为staticsitegenerator,中文可译为`路由静态化方案`。社区上[nuxt](https://github.com/nuxt/nuxt.js)、[Gatsby](https://github.com/gatsbyjs/gatsby)、[docusaurus](https://github.com/facebook/docusaurus)等框架赋能SEO的技术无一例外可以归类此类SSG方案。以nuxt框架为例,在`约定式路由`的基础上,其通过执行`nuxtgenerate`命令将vue文件转化为静态网页。例子:```bash-|pages/---|about.vue/---|index.vue/```静态化后变成:```bash-|dist/---|about/-----|index.html---|index.html```经过路由静态化后,此时的文档目录结构可以托管于任何一个静态站点服务商。####预渲染方案经过上文对SSG方案的分析,此时SPA站点的优化关键已经跃然纸上——`静态化路由`。相较于nuxt、Gatsby等框架存在约定式路由的限制,[create-react-doc](https://github.com/MuYunyun/create-react-doc)在目录结构上的组织灵活自由。它的建站理念是`文件即站点`,同时它对存量markdown文档的迁移也十分便捷。以[blog](https://github.com/MuYunyun/blog)项目结构为例,其文档结构如下:```bash-|BasicSkill/---|basic/-----|DOM.md-----|HTML5.md```静态化后应该变成:```bash-|BasicSkill/---|basic/-----|DOM-------|index.html-----|HTML5-------|index.html```经过调研,该构思与[prerender-spa-plugin](https://github.com/chrisvfritz/prerender-spa-plugin)预渲染方案一拍即合。预渲染方案的原理可以见如下图:![](http://with.muyunyun.cn/f3eb18c162a31fb155fd9f4a364f7fb9.jpg)至此技术选型定下为使用预渲染方案实现SSG。###预渲染方案实践create-react-doc在预渲染方案实践的步骤简单概况如下(完整改动可见[mr](https://github.com/MuYunyun/create-react-doc/pull/95/files)):*改造hash路由为history路由。因为history路由结构与文档静态化目录结构天然匹配。```diffexportdefaultfunctionRouterRoot(){return(-<HashRouter>+<BrowserRouter><RoutersContainer/>-</HashRouter>+</BrowserRouter>)}```*在开发环境、生成环境的基础上新增`预渲染环境`,同时对路由进行环境匹配。其主要解决了`资源文件`与`主域名下的子路径`的对应关系。过程比较曲折,感兴趣的同学可以见[issue](https://github.com/chrisvfritz/prerender-spa-plugin/issues/215#issuecomment-415942268)。```diffconstifProd=env==='prod'+constifPrerender=window.__PRERENDER_INJECTED&&window.__PRERENDER_INJECTED.prerender+constifAddPrefix=ifProd&&!ifPrerender<Routekey={item.path}exact-path={item.path}+path={ifAddPrefix?`/${repo}${item.path}`:item.path}render={()=>{...}}/>```*兼容prerender-spa-plugin在webpack5的使用。官方版本当前未支持webpack5,详见[issue](https://github.com/chrisvfritz/prerender-spa-plugin/issues/414),同时笔者存在对预渲染后执行回调的需求。因此当前fork了一份[版本](https://github.com/create-react-doc/prerender-spa-plugin)出来,解决了以上问题。经过上述步骤的实践,终于在SPA站点中实现了[静态化路由](https://github.com/MuYunyun/blog/tree/gh-pages)。![](http://with.muyunyun.cn/bf01633af158d460ca2830ed640e07cb.jpg)###SEO优化附加buff,站点秒开?SEO优化至此,来看下站点优化前后FP、FCP、LCP等指标数据的变化。以[blog](https://muyunyun.cn/blog)站点为例,优化前后的指标数据如下(数据指标统计来自未使用梯子访问gh-pages):优化前:接入预渲染方案前,首次绘制(FP、FCP)的时间节点在8s左右,LCP在17s左右。![](http://with.muyunyun.cn/23d56cc42fd778c23d8ed80331334343.jpg)优化后:接入预渲染方案后,首次绘制时间节点在`1s`之内开始,LCP在1.5s之内。![](http://with.muyunyun.cn/9c551d29943c3d76700782374d86c37b.jpg)对比优化前后:首屏绘制速度提升了`8`倍,最大内容绘制速度提升`11`倍。本想优化SEO,结果站点性能优化的方式又get了一个。###生成站点地图Sitemap在完成预渲染实现站点路由静态化后,距离SEO的目标又近了一步。暂且抛开[SEO优化细节](https://developers.google.com/search/docs/beginner/seo-starter-guide),单刀直入SEO核心腹地[站点地图](https://developers.google.com/search/docs/advanced/sitemaps/overview)。站点地图Sitemap格式与各字段含义简单说明如下:```xml<?xmlversion=\"1.0\"encoding=\"utf-8\"?><urlset>\x3c!--必填标签,这是具体某一个链接的定义入口，每一条数据都要用<url>和</url>包含在里面,这是必须的--\x3e<url>\x3c!--必填,URL链接地址,长度不得超过256字节--\x3e<loc>http://www.yoursite.com/yoursite.html</loc>\x3c!--可以不提交该标签,用来指定该链接的最后更新时间--\x3e<lastmod>2021-03-06</lastmod>\x3c!--可以不提交该标签,用这个标签告诉此链接可能会出现的更新频率--\x3e<changefreq>daily</changefreq>\x3c!--可以不提交该标签,用来指定此链接相对于其他链接的优先权比值，此值定于0.0-1.0之间--\x3e<priority>0.8</priority></url></urlset>```>上述sitemap中,lastmod、changefreq、priority字段对SEO没那么重要,可以见[how-to-create-a-sitemap](https://ahrefs.com/blog/zh/how-to-create-a-sitemap/)根据上述结构,笔者开发了create-react-doc的站点地图生成包[crd-generator-sitemap](https://github.com/MuYunyun/create-react-doc/tree/main/packages/crd-generator-sitemap),其逻辑就是将预渲染的路由路径拼接成上述格式。使用方只需在站点根目录的`config.yml`添加如下参数便可以在自动化发版过程中自动生成[sitemap](http://muyunyun.cn/create-react-doc/sitemap.xml)。```bashseo:google:true```将生成的站点地图往[GoogleSearchConsole](https://search.google.com/search-console/sitemaps)中提交试试吧,![](http://with.muyunyun.cn/97c21838a1e3310b3c1259e30ab85f3b.jpg)最后验证下Google搜索[站点](https://www.google.com/search?q=site%3Amuyunyun.cn%2Fcreate-react-doc&ie=UTF-8)优化前后效果。优化前:只搜索到一条数据。![](http://with.muyunyun.cn/aea3401e5a31587deb8d93a14f32b011.jpg)优化后:搜索到站点地图中声明的位置数据。![](http://with.muyunyun.cn/6df1536366c7d45e0f6418af03a7d948.jpg)至此使用SSG优化SPA站点实现SEO的完整流程完整实现了一遍。后续便剩下参照[搜索引擎优化(SEO)新手指南](https://developers.google.com/search/docs/beginner/seo-starter-guide)做一些SEO细节方面的优化以及支持更多搜索引擎了。###小结本文从SPA站点实现SEO作为切入点,先后介绍了SEO的基本原理,SEO在SPA站点中的4种实践案例,并结合[create-react-doc](https://github.com/MuYunyun/create-react-doc)SPA框架进行完整的SEO实践。如果本文对您有所帮助,欢迎[star](https://github.com/MuYunyun/create-react-doc)、[反馈](https://github.com/MuYunyun/create-react-doc/issues/new)。###相关链接*[create-react-doc](https://github.com/MuYunyun/create-react-doc)*[why-is-my-website-not-showing-up-on-google/](https://ahrefs.com/blog/zh/why-is-my-website-not-showing-up-on-google/)*[ATechnicalGuidetoSEOWithGatsby.js](https://medium.com/frontend-digest/a-technical-guide-to-seo-with-gatsby-js-e88a7dac80f0)*[优化向：单页应用多路由预渲染指南](https://juejin.cn/post/6844903503362523143)*[除了SSR，就没有别的办法了吗？](https://zhuanlan.zhihu.com/p/57375824)*[基于SSR/SSG的前端SEO优化](https://segmentfault.com/a/1190000023792497)##translate##SEOpracticeinSPAsite###Background![](http://with.muyunyun.cn/c03d8772da6d57e47c55044aee364103.jpg)Observethat[documentsite](http://muyunyun.cn/create-react-doc/)builtbasedon[create-react-doc](https://github.com/MuYunyun/create-react-doc),Ifoundthewebpagecodeisbare(seethepicturebelow).Thisisobviouslyacommonproblemofsingle-pageapplication(SPA)sites.Itisnotconducivetobesearchedbysearchengines(SEO).![](http://with.muyunyun.cn/0ba88a7544efe0e1978e6c8d8b7775a6.jpg)Isn'titpossiblethatSPAsitescan'tperformSEO,sowhataboutframeworkssuchas[Gatsby](https://github.com/gatsbyjs/gatsby),[nuxt](https://github.com/nuxt/nuxt.js)Itcanbeusedasthefirstchoiceformanybloggerstobuildblogs.WhatarethetechnicalprinciplesofsuchframeworkstoempowerSEO?Drivenbycuriosity,IstartmyjourneyofempoweringSEOin[creat-react-doc](https://github.com/MuYunyun/create-react-doc).###SearchEngineOptimizationBeforepractice,let'sanalyzewhysingle-pageapplicationscannotbesearchedbysearchengines.Thecoreisthat`thecrawlerspiderwillnotexecutetheJavaScriptlogicinthewebpageduringthecrawlingprocess`,so`thejumplogichiddenintheJavaScriptwillnotbeexecutedeither`.CheckthepackagedcodeofthecurrentSPAsite.Exceptforarootdirectoryindex.html,everythingelseisinjectedwithJavaScriptlogic,sothebrowserwillnaturallynotperformSEOonit.![](http://with.muyunyun.cn/0d15d4e3a62516da7c301e8f1c9228d6.jpg)Inaddition,detailedsearchengineoptimizationisamorecomplicatedsubject.IfyouarenewtoSEOoptimization,itisrecommendedtoread[SearchEngineOptimization(SEO)Beginner'sGuide](https://developers.google.com/search/docs/beginner/seo-starter-guide)article,givenbyGoogleSearchCenter.Thereareacomprehensivelistof**17**bestpractices,and**33**practicesthatshouldbeavoided.###PracticalcaseofSEOinSPAsiteInthecontextofthelightdocumentsite,wedonotconsidertheSSRschemeforthetimebeing.AfterinvestigatingtheSEOschemesofdocumentsitesonthemarket,theauthorsummarizesthefollowingfourcategories:*Statictemplaterenderingscheme*404redirectionscheme*SSGplan*Pre-renderingscheme####Statictemplaterenderingscheme[hexo](https://github.com/hexojs/hexo)isthemosttypicalinthestatictemplaterenderingscheme.Suchframeworksneedtospecifyaspecifictemplatelanguage(suchas[pug](https://github.com/pugjs/pug))todevelopthemes,soastoachievethepurposeofdirectoutputofwebcontent.####404RedirectionSchemeTheprincipleofthe404redirectsolutionismainlytousethe404mechanismofGitHubPagesforredirection.Typicalcasesare[spa-github-pages](https://github.com/rafgraph/spa-github-pages),[sghpa](https://github.com/csuwildcat/sghpa).Butunfortunately,in2019Google[adjustedcrawleralgorithm](https://github.com/rafgraph/spa-github-pages#seo),sothiskindofredirectionschemeisnotconducivetoSEOatthemoment.Theauthorofspa-github-pagesalsostatedthatifSEOisrequired,usetheSSGplanorthepaidplan[Netlify](https://www.netlify.com/blog/2020/04/07/creating-better-more-predictable-redirect-rules-for-spas/).![](http://with.muyunyun.cn/bbb5ed8bce1e0c08dae94df98ff33262.jpg)####SSGplanThefullnameoftheSSGschemeiscalled`staticsitegenerator`.Inthecommunity,[nuxt](https://github.com/nuxt/nuxt.js),[Gatsby](https://github.com/gatsbyjs/gatsby)andotherframework-enablingSEOtechnologiescanbeclassifiedwithoutexceptionsuchSSGschemes.Takingthenuxtframeworkasanexample,basedonthe`conventionalrouting`,itconvertsvuefilesintostaticwebpagesbyexecutingthe`nuxtgenerate`command.example:```bash-|pages/---|about.vue/---|index.vue/```Afterbeingstatic,itbecomes:```bash-|dist/---|about/-----|index.html---|index.html```Aftertheroutingisstatic,thedocumentdirectorystructureatthistimecanbehostedbyanystaticsiteserviceprovider.####Pre-renderingschemeAftertheaboveanalysisoftheSSGscheme,atthistimethekeytooptimizationoftheSPAsiteisalreadyonpaper——`staticrouting`.ComparedwithframeworkssuchasnuxtandGatsby,whichhavethelimitationofconventionalrouting,[create-react-doc](https://github.com/MuYunyun/create-react-doc)hasflexibleandfreeorganizationinthedirectorystructure.Itswebsitebuildingconceptis`FileisSite`,anditisalsoveryconvenienttomigrateexistingmarkdowndocuments.Take[blog](https://github.com/MuYunyun/blog)projectstructureasanexample,thedocumentstructureisasfollows:```bash-|BasicSkill/---|basic/-----|DOM.md-----|HTML5.md```Itshouldbecome:```bash-|BasicSkill/---|basic/-----|DOM-------|index.html-----|HTML5-------|index.html```Afterinvestigation,theideaandthe[prerender-spa-plugin](https://github.com/chrisvfritz/prerender-spa-plugin)pre-renderingsolutionhititoff.Theprincipleofthepre-renderingschemecanbeseeninthefollowingfigure:![](http://with.muyunyun.cn/f3eb18c162a31fb155fd9f4a364f7fb9.jpg)Sofar,thetechnologyselectionisdeterminedtousethepre-renderingschemetoachieveSSG.###Pre-renderingprogrampracticeAbriefoverviewofthestepsofcreate-react-doc'spracticeinthepre-renderingsolutionisasfollows(forcompletechanges,see[mr](https://github.com/MuYunyun/create-react-doc/pull/95/files)):*Transformhashroutingtohistoryrouting.Becausethehistoryroutingstructurenaturallymatchesthedocumentstaticdirectorystructure.```diffexportdefaultfunctionRouterRoot(){return(-<HashRouter>+<BrowserRouter><RoutersContainer/>-</HashRouter>+</BrowserRouter>)}```*Added`pre-renderingenvironment`onthebasisofdevelopmentenvironmentandgenerationenvironment,andmatchedtheroutingenvironmentatthesametime.Itmainlysolvesthecorrespondencebetween`resourcefiles`and`sub-pathsunderthemaindomainname`.Theprocessistortuous,andinterestedfriendscansee[issue](https://github.com/chrisvfritz/prerender-spa-plugin/issues/215#issuecomment-415942268).```diffconstifProd=env==='prod'+constifPrerender=window.__PRERENDER_INJECTED&&window.__PRERENDER_INJECTED.prerender+constifAddPrefix=ifProd&&!ifPrerender<Routekey={item.path}exact-path={item.path}+path={ifAddPrefix?`/${repo}${item.path}`:item.path}render={()=>{...}}/>```*Compatiblewiththeuseofprerender-spa-plugininwebpack5.Theofficialversioncurrentlydoesnotsupportwebpack5,see[issue](https://github.com/chrisvfritz/prerender-spa-plugin/issues/414)fordetails,andIhaveaneedtoexecutecallbacksafterpre-rendering.Therefore,acopyof[version](https://github.com/create-react-doc/prerender-spa-plugin)iscurrentlyforked,whichsolvestheaboveproblems.Afterthepracticeoftheabovesteps,[staticrouting](https://github.com/MuYunyun/blog/tree/gh-pages)isfinallyimplementedintheSPAsite.![](http://with.muyunyun.cn/bf01633af158d460ca2830ed640e07cb.jpg)###SEOoptimizationwithadditionalbuff,thesiteopensinseconds?SEOoptimizationsofar,let'slookatthechangesin`FP`,`FCP`,`LCP`andotherindicatordatabeforeandaftersiteoptimization.Takingthe[blog](https://muyunyun.cn/blog)siteasanexample,theindexdatabeforeandafteroptimizationisasfollows:Beforeoptimization:Beforeaccessingthepre-renderingscheme,thetimenodeforthefirstdrawing(FP,FCP)isabout`8s`,andtheLCPisabout17s.![](http://with.muyunyun.cn/23d56cc42fd778c23d8ed80331334343.jpg)Afteroptimization:Afteraccessingthepre-renderingscheme,thefirstdrawingtimenodestartswithin`1s`,andtheLCPiswithin1.5s.![](http://with.muyunyun.cn/9c551d29943c3d76700782374d86c37b.jpg)Comparingtheoptimizationbetweenbeforeandafter:thefirstscreendrawingspeedhasbeenincreasedby`8`times,andthemaximumcontentdrawingspeedhasbeenincreasedby`11`times.IwantedtooptimizeSEO,butIgotanotherwaytooptimizesiteperformance.###GenerateSitemapSitemapAfterfinishingthepre-renderingandrealizingthestaticroutingofthesite,itisonestepclosertothegoalofSEO.Puttingaside[SEOoptimizationdetails](https://developers.google.com/search/docs/beginner/seo-starter-guide)forthetimebeing,gostraighttothecorehinterlandofSEO[sitemap](https://developers.google.com/search/docs/advanced/sitemaps/overview).TheformatofSitemapandthemeaningofeachfieldarebrieflyexplainedasfollows:```xml<?xmlversion=\"1.0\"encoding=\"utf-8\"?><urlset>\x3c!--Requiredtag,thisisthedefinitionentryofaspecificlink,eachpieceofdatamustbeincludedwith<url>and</url>,thisisrequired--\x3e<url>\x3c!--Required,URLlinkaddress,lengthmustnotexceed256bytes--\x3e<loc>http://www.yoursite.com/yoursite.html</loc>\x3c!--Youdon'tneedtosubmitthetag,whichisusedtospecifythelastupdatetimeofthelink--\x3e<lastmod>2021-03-06</lastmod>\x3c!--Youdon'tneedtosubmitthetag,usethistagtotelltheupdatefrequencyofthislink--\x3e<changefreq>daily</changefreq>\x3c!--Youdon’tneedtosubmitthetag,whichisusedtospecifythepriorityratioofthislinktootherlinks.Thisvalueissetbetween0.0-1.0--\x3e<priority>0.8</priority></url></urlset>```>Intheabovesitemap,thelastmod,changefreq,andpriorityfieldsarenotsoimportantforSEO,see[how-to-create-a-sitemap](https://ahrefs.com/blog/zh/how-to-create-a-sitemap/)Accordingtotheabovestructure,Idevelopedthesitemapgenerationpackage[crd-generator-sitemap](https://github.com/MuYunyun/create-react-doc/tree/main/packages/crd-generator-sitemap),thelogicistosplicethepre-renderedroutingpathintotheaboveformat.Theuseronlyneedstoaddthefollowingparametersinthesiterootdirectory`config.yml`toautomaticallygenerate[sitemap](http://muyunyun.cn/create-react-doc/sitemap.xml)duringtheautomaticreleaseprocess.```bashseo:google:true```Submitthegeneratedsitemapto[GoogleSearchConsole](https://search.google.com/search-console/sitemaps)foratry,![](http://with.muyunyun.cn/97c21838a1e3310b3c1259e30ab85f3b.jpg)Finally,verifythebeforeandafteroptimizationofGooglesearch[site](https://www.google.com/search?q=site%3Amuyunyun.cn%2Fcreate-react-doc&ie=UTF-8).Beforeoptimization:Onlyonepieceofdataisfound.![](http://with.muyunyun.cn/aea3401e5a31587deb8d93a14f32b011.jpg)Afteroptimization:Searchthelocationdatadeclaredinthesitemap.![](http://with.muyunyun.cn/6df1536366c7d45e0f6418af03a7d948.jpg)Sofar,thecompleteprocessofusingSSGtooptimizeSPAsitestoachieveSEOhasbeenfullyrealized.Follow-upislefttorefertothe[SearchEngineOptimization(SEO)Beginner'sGuide](https://developers.google.com/search/docs/beginner/seo-starter-guide)tooptimizesomeSEOdetailsandsupportmoresearchesTheengineisup.###SummaryThisarticlestartswiththerealizationofSEOontheSPAsite,andsuccessivelyintroducesthebasicprinciplesofSEO,fourpracticalcasesofSEOintheSPAsite,combinedwith[create-react-doc](https://github.com/MuYunyun/create-react-doc)SPAframeworkforcompleteSEOpractice.Ifthisarticleishelpfultoyou,welcome[star](https://github.com/MuYunyun/create-react-doc),[feedback](https://github.com/MuYunyun/create-react-doc/issues/new).###RelatedLinks*[create-react-doc](https://github.com/MuYunyun/create-react-doc)*[why-is-my-website-not-showing-up-on-google/](https://ahrefs.com/blog/zh/why-is-my-website-not-showing-up-on-google/)*[ATechnicalGuidetoSEOWithGatsby.js](https://medium.com/frontend-digest/a-technical-guide-to-seo-with-gatsby-js-e88a7dac80f0)"},{name:"some_about_webpack.md",path:"/FeCloud/some_about_webpack.md",type:"file",mdconf:{abbrlink:"l7g5qivt"},birthtime:"2022-01-16",mtime:"2022-01-16",size:520,extension:".md",relative:"/FeCloud/some_about_webpack.md",isEmpty:!1,content:'\x3c!--abbrlink:l7g5qivt--\x3e###resolve.mainFields在引用模块时，指明使用package.json中哪个字段指定的文件，默认是main```jsresolve:{//配置target==="web"或者target==="webworker"时mainFields默认值是：mainFields:[\'browser\',\'module\',\'main\'],//target的值为其他时，mainFields默认值为：mainFields:["module","main"],}```通常情况下，模块的package都不会声明`browser`或`module`字段，所以便是使用`main`了。'},{name:"tc39.md",path:"/FeCloud/tc39.md",type:"file",mdconf:{abbrlink:"sezgk3yj"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3061,extension:".md",relative:"/FeCloud/tc39.md",isEmpty:!1,content:"\x3c!--abbrlink:sezgk3yj--\x3e###TC39[TC39(TechnicalCommittee39)](https://github.com/tc39/ecma262/blob/master/FAQ.md#what-is-a-tc39)isacommitteethatevolvesJavaScript.###WhoisTC39ItsmembersareJavaScriptengines、Frameworks、Academics、Majorwebsite/appplatforms,nowaretheresomeChinesecompanies!![](http://with.muyunyun.cn/fad16aa0b62ed374b19ee51cb31284b7.jpg)Everytwomonths,TC39hasmeeting.Theminutesofthosemeetingsarepublicin[github](https://github.com/tc39/notes)###TheTC39process![](http://with.muyunyun.cn/530e6f1b42d0e6dad4aa9e9682978137.jpg)*Stage1:Anideaunderdiscussion;*Stage2:Wewanttodothatandwehaveadraft;*Stage3:Wehaveafinaldraftandreadytogo;*Stage4:2+implementation,Test262=>standard;ES2016wasthefirstECMAScriptversionthatwasdesignedaccordingtotheTC39process.>[tc39-process](https://2ality.com/2015/11/tc39-process.html):thisarticleintroducestheconditionsofeachstagesshouldachieve.###FinishedProposals(stage4)Onceafeatureisreachedtostage4,itrunsalltestcasein[Test262](https://github.com/tc39/test262/blob/master/INTERPRETING.md),soyoucanuseitsafely.Buteventhen,youshouldstillcheckifthedeviceenvironmentyouusesupportsit.Youcanseeallthe[finishedfeature](https://github.com/tc39/proposals/blob/master/finished-proposals.md)and[otherproposals](https://github.com/tc39/proposals)intheofficiallist.*BigInt*Dynamicimport()*Optionalchaining*Nullishcoalescing*globalThis*...###BigInt```jsconstexpected=4n/2n;//↪2nconstrounded=5n/2n;//↪2n,not2.5n```The/operatoralsoworkasexpectedwithwholenumbers.However,sincetheseareBigIntsandnotBigDecimals,thisoperationwillroundtowards0,whichistosay,itwillnotreturnanyfractionaldigits.####PolyfillingandtranspilingBigInts>UnlikemostothermodernJavaScriptfeatures,BigIntscannotreasonablybetranspileddowntoES5.>TheBigIntproposalchangesthebehaviorofoperators(like+,>=,etc.)toworkonBigInts.Thesechangesareimpossibletopolyfilldirectly,andtheyarealsomakingitinfeasible(inmostcases)totranspileBigIntcodetofallbackcodeusingBabelorsimilartools.Thereasonisthatsuchatranspilationwouldhavetoreplaceeverysingleoperatorintheprogramwithacalltosomefunctionthatperformstypechecksonitsinputs,whichwouldincuranunacceptablerun-timeperformancepenalty.Inaddition,itwouldgreatlyincreasethefilesizeofanytranspiledbundle,negativelyimpactingdownload,parse,andcompiletimes.###link*[proposals](https://github.com/tc39/proposals)*[HistoryandevolutionofJavaScript](https://exploringjs.com/impatient-js/ch_history.html#tc39)*[Featurewatch:ECMAScript2020](https://2ality.com/2019/12/ecmascript-2020.html)*[BigIntsinJavaScript:AcasestudyinTC39](https://docs.google.com/presentation/d/1apPbAiv_-mJF35P31IjaII8UA6TwSynCA_zhfDEmgOE/edit#slide=id.p)"},{name:"w3c.md",path:"/FeCloud/w3c.md",type:"file",mdconf:{abbrlink:"rosy1rva"},birthtime:"2022-01-16",mtime:"2022-01-16",size:122,extension:".md",relative:"/FeCloud/w3c.md",isEmpty:!1,content:"\x3c!--abbrlink:rosy1rva--\x3e###W3CSomeCSSguidenesscanbefoundthere.*[w3c](https://github.com/w3c/csswg-drafts)"},{name:"webkit技术内幕.md",path:"/FeCloud/webkit技术内幕.md",type:"file",mdconf:{abbrlink:"opv4lnaq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1806,extension:".md",relative:"/FeCloud/webkit技术内幕.md",isEmpty:!1,content:"\x3c!--abbrlink:opv4lnaq--\x3e###webkit*[WebKit](https://webkit.org/):如何下载、编译webkit*[github](https://github.com/WebKit/webkit)*[Chromium](www.chromium.org)###webkit架构![](http://with.muyunyun.cn/93c9dbe4d56eb2c5f3be2a14e265ca2b.jpg-muyy)*JavaScript引擎:Google的Chromium中,它被替换为V8引擎。###webkit目录*LayoutTests*PerformanceTests*Source*JavaScriptCore//Webkit默认的的JavaScript引擎*Platform*WebCore*css//css解释器*dom//DOM节点的基础类及树结构*html//HTML解释器和DOM节点*inspector//WebInspector的实现*loader//资源加载器、缓存等*page//与页面相关的全局对象的实现,包括window、navigator等DOM对象,事件,动画处理*platform//各个移植的代码*storage//存储的共享代码*WebKit//绑定和嵌入式接口层)*Webkit2//绑定和嵌入式接口层)*efl//efl的主函数,构建一个简单的浏览器,还有其它移植的代码*NetworkProcess//网络进程相关代码*UIProcess//UI进程相关代码*WebProcess//Web进程相关代码*WTF//智能类库。字符串操作、各种容器、指针、线程、算法等*Tools###Chromium多进程模型![](http://with.muyunyun.cn/af3e700cca1056b8796667751e27e7ec.jpg-muyy)*`Browser进程`:浏览器的主进程,是其它类型进程的祖先,负责它们的创建和销毁。*`Renderer进程`:网页的渲染进程。*`NPAPI插件进程`。*`GPU进程`:对3D图形加速调用的实现。*`Pepper插件进程`。每个进程内部有多个线程。readpage56"},{name:"yarn",path:"/FeCloud/yarn",children:[{name:"scripts.md",path:"/FeCloud/yarn/scripts.md",type:"file",mdconf:{abbrlink:"bpp6dk6t"},birthtime:"2022-01-16",mtime:"2022-01-16",size:705,extension:".md",relative:"/FeCloud/yarn/scripts.md",isEmpty:!1,content:"\x3c!--abbrlink:bpp6dk6t--\x3e###Usage```jsyarnaddxx-D```在本地开发一个独立的包,可以通过`yarnlink`进行链接开发。>yarnlink的包同时会注入到node_modules中###配置yarn全局路径*1.`yarnglobaldir`得到`/Users/mac/.config/yarn/global`*这个路径也是yarn全局包安装的文件目录*2.vim.zshrc*2.1加上exportNODE_PATH=/Users/mac/.config/yarn/global/node_modules/*yarnaddpuppeteer-g###bin```jsyarnglobalbin//findyarnglobalbinpathnpmbin-g//findnpmglobalbinpath```yarnlinkxx,就是将bin的命令挂载到global上。```jsyarnlinkxx```###remove```jsyarnremovexx```"}],type:"directory",size:705},{name:"如何维护一个开源项目.md",path:"/FeCloud/如何维护一个开源项目.md",type:"file",mdconf:{abbrlink:"ps3p8234"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1016,extension:".md",relative:"/FeCloud/如何维护一个开源项目.md",isEmpty:!1,content:"\x3c!--abbrlink:ps3p8234--\x3e###如何维护一个开源项目[keepachangelog](https://keepachangelog.com/en/1.0.0/)###todoList目标-用户组成结构-使用:5/6-代码质量（稳定性+扩展性）-内部服务于多少项目（几十~上百个）-单测等-设计模式：公共样式变量、api等一致（不会参差不齐）-文档等*完善mobile组件在pc端站点的浏览效果;*beast-mobile语言包支持、为后续站点切换双语环境做准备;-支持（support）-亮点-会去研究源码：1/6——源码的高级性*站点的`布局`、`文案`(组件交互)###plan&&todolist*完善mobile组件在pc端站点的浏览效果;*beast-mobile语言包支持、为后续站点切换双语环境做准备;*beast-mobile中、英文文章简版输出,调研专栏环境社区的创建(Medium、Twitter、知乎、Github、StackOverflow、SegmentFault);*两条腿走路,并行;"},{name:"微前端.md",path:"/FeCloud/微前端.md",type:"file",mdconf:{abbrlink:"6l83c3pv"},birthtime:"2022-01-16",mtime:"2022-01-16",size:181,extension:".md",relative:"/FeCloud/微前端.md",isEmpty:!1,content:"\x3c!--abbrlink:6l83c3pv--\x3e###CSS隔离*.mmsorderh1如何影响:提高了样式优先级,可能照成影响;解决方式:动态插入、删除###JavaScript隔离"},{name:"探寻webpack插件机制.md",path:"/FeCloud/探寻webpack插件机制.md",type:"file",mdconf:{abbrlink:"96xkvdzm"},birthtime:"2022-01-16",mtime:"2022-01-16",size:9160,extension:".md",relative:"/FeCloud/探寻webpack插件机制.md",isEmpty:!1,content:'\x3c!--abbrlink:96xkvdzm--\x3ewebpack可谓是让人欣喜又让人忧,功能强大但需要一定的学习成本。在探寻webpack插件机制前,首先需要了解一件有意思的事情,webpack插件机制是整个webpack工具的骨架,而webpack本身也是利用这套插件机制构建出来的。因此在深入认识webpack插件机制后,再来进行项目的相关优化,想必会大有裨益。###webpack插件先来瞅瞅webpack插件在项目中的运用```jsconstMyPlugin=require(\'myplugin\')constwebpack=require(\'webpack\')webpack({...,plugins:[newMyPlugin()]...,})```那么符合什么样的条件能作为webpack插件呢？一般来说,webpack插件有以下特点:1.独立的JS模块,暴露相应的函数2.函数原型上的apply方法会注入compiler对象3.compiler对象上挂载了相应的webpack事件钩子4.事件钩子的回调函数里能拿到编译后的compilation对象,如果是异步钩子还能拿到相应的callback下面结合代码来看看:```jsfunctionMyPlugin(options){}//2.函数原型上的apply方法会注入compiler对象MyPlugin.prototype.apply=function(compiler){//3.compiler对象上挂载了相应的webpack事件钩子4.事件钩子的回调函数里能拿到编译后的compilation对象compiler.plugin(\'emit\',(compilation,callback)=>{...})}//1.独立的JS模块,暴露相应的函数module.exports=MyPlugin```这样子,webpack插件的基本轮廓就勾勒出来了,此时疑问点有几点,1.疑问1:函数的原型上为什么要定义apply方法？阅读[源码](https://github.com/webpack/webpack/blob/10282ea20648b465caec6448849f24fc34e1ba3e/lib/webpack.js#L35)后发现源码中是通过`plugin.apply()`调用插件的。```jsconstwebpack=(options,callback)=>{...for(constpluginofoptions.plugins){plugin.apply(compiler);}...}```2.疑问2:compiler对象是什么呢？3.疑问3:compiler对象上的事件钩子是怎样的？4.疑问4:事件钩子的回调函数里能拿到的compilation对象又是什么呢？这些疑问也是本文的线索,让我们一个个探索。###compiler对象compiler即webpack的编辑器对象,在调用webpack时,会自动初始化compiler对象,[源码](https://github.com/webpack/webpack/blob/10282ea20648b465caec6448849f24fc34e1ba3e/lib/webpack.js#L30)如下:```js//webpack/lib/webpack.jsconstCompiler=require("./Compiler")constwebpack=(options,callback)=>{...options=newWebpackOptionsDefaulter().process(options)//初始化webpack各配置参数letcompiler=newCompiler(options.context)//初始化compiler对象,这里options.context为process.cwd()compiler.options=options//往compiler添加初始化参数newNodeEnvironmentPlugin().apply(compiler)//往compiler添加Node环境相关方法for(constpluginofoptions.plugins){plugin.apply(compiler);}...}```终上,compiler对象中包含了所有webpack可配置的内容,开发插件时,我们可以从compiler对象中拿到所有和webpack主环境相关的内容。###compilation对象compilation对象代表了一次单一的版本构建和生成资源。当运行webpack时,每当检测到一个文件变化,一次新的编译将被创建,从而生成一组新的编译资源。一个编译对象表现了当前的模块资源、编译生成资源、变化的文件、以及被跟踪依赖的状态信息。结合源码来理解下上面这段话,首先webpack在每次执行时会调用`compiler.run()`[(源码位置)](https://github.com/webpack/webpack/blob/e7c8fa414b718ac98d94a96e2553faceabfbc92f/lib/webpack.js#L58),接着追踪[onCompiled函数](https://github.com/webpack/webpack/blob/3a5fda909f2ecf911c73429cb4770948dbd31d24/lib/Compiler.js#L163)传入的compilation参数,可以发现compilation来自构造函数Compilation。```js//webpack/lib/Compiler.jsconstCompilation=require("./Compilation");newCompilation(params){constcompilation=newCompilation(this);...returncompilation;}```###不得不提的tapable库再介绍完compiler对象和compilation对象后,不得不提的是[tapable](https://github.com/webpack/tapable)这个库,这个库暴露了所有和事件相关的pub/sub的方法。而且函数[Compiler](https://github.com/webpack/webpack/blob/e7c8fa414b718ac98d94a96e2553faceabfbc92f/lib/Compiler.js#L29)以及函数[Compilation](https://github.com/webpack/webpack/blob/e7c8fa414b718ac98d94a96e2553faceabfbc92f/lib/Compilation.js#L98)都继承自Tapable。###事件钩子事件钩子其实就是类似MVVM框架的生命周期函数,在特定阶段能做特殊的逻辑处理。了解一些常见的事件钩子是写webpack插件的前置条件,下面列举些常见的事件钩子以及作用:|钩子|作用|参数|类型||:-:|:-:|:-:|:-:||after-plugins|设置完一组初始化插件之后|compiler|sync||after-resolvers|设置完resolvers之后|compiler|sync||run|在读取记录之前|compiler|async||compile|在创建新compilation之前|compilationParams|sync||compilation|compilation创建完成|compilation|sync||emit|在生成资源并输出到目录之前|compilation|async||after-emit|在生成资源并输出到目录之后|compilation|async||done|完成编译|stats|sync|完整地请参阅[官方文档手册](https://doc.webpack-china.org/api/compiler/#%E4%BA%8B%E4%BB%B6%E9%92%A9%E5%AD%90),同时浏览[相关源码](https://github.com/webpack/webpack/blob/eca7bad8de54c39b9cb8b138793362b8a17ac11b/lib/Compiler.js#L32)也能比较清晰地看到各个事件钩子的定义。###插件流程浅析拿emit钩子为例,下面分析下插件调用源码:```jscompiler.plugin(\'emit\',(compilation,callback)=>{//在生成资源并输出到目录之前完成某些逻辑})```此处调用的plugin函数源自上文提到的tapable库,其最终调用栈指向了hook.tapAsync(),其作用类似于EventEmitter的on,[源码](https://github.com/webpack/tapable/blob/42b520760e138c23e7808881cb4322557e878307/lib/Tapable.js#L35)如下:```js//Tapable.jsoptions=>{...if(hook!==undefined){consttapOpt={name:options.fn.name||"unnamedcompatplugin",stage:options.stage||0};if(options.async)hook.tapAsync(tapOpt,options.fn);//将插件中异步钩子的回调函数注入elsehook.tap(tapOpt,options.fn);returntrue;}};```有注入必有触发的地方,源码中通过callAsync方法触发之前注入的异步事件,callAsync类似EventEmitter的emit,[相关源码](https://github.com/webpack/webpack/blob/e7c8fa414b718ac98d94a96e2553faceabfbc92f/lib/Compiler.js#L307)如下:```jsthis.hooks.emit.callAsync(compilation,err=>{if(err)returncallback(err);outputPath=compilation.getPath(this.outputPath);this.outputFileSystem.mkdirp(outputPath,emitFiles);});```一些深入细节这里就不展开了,说下关于阅读比较大型项目的源码的两点体会,*要抓住一条主线索去读,忽视细节。否则会浪费很多时间而且会有挫败感；*结合调试工具来分析,很多点不用调试工具的话很容易顾此失彼；###动手实现个webpack插件结合上述知识点的分析,不难写出自己的webpack插件,关键在于想法。为了统计项目中webpack各包的有效使用情况,在fork[webpack-visualizer](https://github.com/chrisbateman/webpack-visualizer)的基础上对代码升级了一番,[项目地址](https://github.com/MuYunyun/analyze-webpack-plugin)。效果如下:![](http://with.muyunyun.cn/329ec042a73aecd0a1947bdcc1f0dcb4.jpg-400)插件核心代码正是基于上文提到的emit钩子,以及compiler和compilation对象。代码如下:```jsclassAnalyzeWebpackPlugin{constructor(opts={filename:\'analyze.html\'}){this.opts=opts}apply(compiler){constself=thiscompiler.plugin("emit",function(compilation,callback){letstats=compilation.getStats().toJson({chunkModules:true})//获取各个模块的状态letstringifiedStats=JSON.stringify(stats)//服务端渲染lethtml=`<!doctypehtml><metacharset="UTF-8"><title>AnalyzeWebpackPlugin</title><style>${cssString}</style><divid="App"></div><script>window.stats=${stringifiedStats};<\/script><script>${jsString}<\/script>`compilation.assets[`${self.opts.filename}`]={//生成文件路径source:()=>html,size:()=>html.length}callback()})}}```###参考资料[看清楚真正的Webpack插件](https://zoumiaojiang.com/article/what-is-real-webpack-plugin/#compiler)[webpack官网](https://doc.webpack-china.org/)'},{name:"搭建一个脚手架.md",path:"/FeCloud/搭建一个脚手架.md",type:"file",mdconf:{abbrlink:"iewq181x"},birthtime:"2022-01-16",mtime:"2022-01-16",size:778,extension:".md",relative:"/FeCloud/搭建一个脚手架.md",isEmpty:!1,content:"\x3c!--abbrlink:iewq181x--\x3e###搭建一个企业级脚手架###脚手架的三个组成部分*全局命令包,提供`install`、`init`、`start`、`build`等命令;[cli-tpl](https://github.com/imaoda/cli-tpl)*模板插件包(单独抽离可以做到同步最新包到业务);[gen-tpl](https://github.com/imaoda/gen-tpl)*构建插件包(webpack的配置,单独配置及做到了可单独暴露给用户的功能);[build-tpl](https://github.com/imaoda/build-tpl)###探索能否分为两部分?*命令构建包:全局命令包+构建插件包*模板插件包###相关资料*[搭一个企业级脚手架](https://juejin.im/post/5d650613f265da03951a0364#comment):着重推荐这篇文章,后续脚手架可以按照这篇文章的思路来;"},{name:"方法论.md",path:"/FeCloud/方法论.md",type:"file",mdconf:{abbrlink:"m1d3hmjx"},birthtime:"2022-01-16",mtime:"2022-01-16",size:769,extension:".md",relative:"/FeCloud/方法论.md",isEmpty:!1,content:"\x3c!--abbrlink:m1d3hmjx--\x3e这篇文章梳理一些方法论###既要又要还要既要学习,又要实践,还要总结。###medium*[mediumunliited](https://medium-unlimited.ml/download/):medium文章阅读不设上限的插件###SWOT分析S(strength)、W(weakness)、O(opportunity)、T(threat)*工作中真实case,适不适合买菜业务:![](http://with.muyunyun.cn/5db89f1e0de373c0b2f6cce0df141cc0.jpg)*把一件事情放到极致去推演*来源客服轮岗,这笔应该商家、消费者承担。###谁来做*背景:组件库大版本升级。是组件库同学负责升级给业务方升级还是业务方自行升级呢?*方法论:哪一方的依赖性越高谁来负责。*结论:组件库同学帮升级。"},{name:"用户体验.md",path:"/FeCloud/用户体验.md",type:"file",mdconf:{abbrlink:"vhy8ok42"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2117,extension:".md",relative:"/FeCloud/用户体验.md",isEmpty:!1,content:"\x3c!--abbrlink:vhy8ok42--\x3e###用户体验指标|en|fullname|mean|explain||:---:|:---------------------:|:------------:|:------------------------------------------------------------:||FP|FirstContentPaint|首屏绘制|||FCP|FirstContentfulPaint|首次内容渲染|||FMP|FirstMeaningfulPaint|最大内容渲染|||TTL|TimetoInteractive|首次可交互时间|||FID|FirstInputDelay|首次输入延迟|||TBT|TotalBlockTime|阻塞总时间|||SI|SpeedIndex|内容展现速度|||CLS|CumulativeLayoutShift|累计布局偏移|经常会照成用户预期不同的效果,比如点击取消应为偏移变为点击确认||LCP|LargestContentPaint|最大内容绘制|||CLS|CumulativeLayoutPaint|布局偏移总量||![指标案例](http://with.muyunyun.cn/23148c1025c99dba4663798380c0b58b.jpg)-[][toread](https://mp.weixin.qq.com/s/ESOHtwz3jCEybAN196R-rg)###工具链*LightHouse*LightHouseCI*测试组件?*[ChromeSearchConsole](https://search.google.com/search-console/about)*[web.dev](web.dev):持续地了解网页的性能###设计侧*一致性*产品内部的导航方式*类似元素的视觉呈现*操作行为的交互准则*易用性*操作简单易学*提示和帮助容易理解*界面设计清楚明了"},{name:"编译器.md",path:"/FeCloud/编译器.md",type:"file",mdconf:{abbrlink:"trdqh6y3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:824,extension:".md",relative:"/FeCloud/编译器.md",isEmpty:!1,content:"\x3c!--abbrlink:trdqh6y3--\x3e###编译器编译器(compiler)的几个步骤*词法分析(lexicalanalyze):将程序代码拆分成若干个词;*语法分析(syntaxanalyze):生成AST树;*语义分析(semanticanalyze):给AST树添加语义注释,并生成SymbolTable(判断是否有重复的命名空间等);*优化:合并一些语句;*代码生成:转换为低层级的语言;>解释器和编译器步骤大体相同,只是解释器不会将代码转换为低层级语言执行。>[CompilersandInterpreters](https://medium.com/hackernoon/compilers-and-interpreters-3e354a2e41cf)-[][LexicalAnalysis](https://medium.com/hackernoon/lexical-analysis-861b8bfe4cb0):当前阅读到Puttingitalltogether,后续如果要写词法解析器的需求可以结合这篇文章进行实践。"},{name:"视频直播协议.md",path:"/FeCloud/视频直播协议.md",type:"file",mdconf:{abbrlink:"q666o4xi"},birthtime:"2022-01-16",mtime:"2022-01-16",size:558,extension:".md",relative:"/FeCloud/视频直播协议.md",isEmpty:!1,content:"\x3c!--abbrlink:q666o4xi--\x3e###主题：如何在web端实现直播播放器###协议类型*RMTP(RealTimeMessageProtocal):basedTCP;❎*FLV:格式,[bilibili/flv.js](https://github.com/bilibili/flv.js):利用[MediaSourceExtensions(MSE)API](https://developer.mozilla.org/en-US/docs/Web/API/Media_Source_Extensions_API)✅(web)*HLS(HTTPLiveStreaming):basedHTTP,mentionedbyAppleInc.JavaScriptLibraryeg:[hls.js](https://github.com/video-dev/hls.js)✅(mobile)>[直播协议入门](https://www.jianshu.com/p/32417d8ee5b6)"},{name:"跨端.md",path:"/FeCloud/跨端.md",type:"file",mdconf:{abbrlink:"jqfr4dcd"},birthtime:"2022-01-16",mtime:"2022-01-16",size:200,extension:".md",relative:"/FeCloud/跨端.md",isEmpty:!1,content:"\x3c!--abbrlink:jqfr4dcd--\x3e###跨端的思考🤔*重UI还是重逻辑*逻辑跨端*逻辑复用*UI跨端###阶段*Hybrid阶段*ReactNative*小程序阶段*Flutter"}],type:"directory",size:54257},{name:"TypeScript",path:"/TypeScript",children:[{name:"Declaration_Files.md",path:"/TypeScript/Declaration_Files.md",type:"file",mdconf:{abbrlink:"e4hdjbea"},birthtime:"2022-01-16",mtime:"2022-01-16",size:895,extension:".md",relative:"/TypeScript/Declaration_Files.md",isEmpty:!1,content:"\x3c!--abbrlink:e4hdjbea--\x3e##使用declare声明[使用declare声明](https://github.com/MuYunyun/advanced-typescript#%E4%BD%BF%E7%94%A8-declare-%E5%A3%B0%E6%98%8E)###link-[x][DeclarationReference](https://www.typescriptlang.org/docs/handbook/declaration-files/by-example.html)*介绍了declare语法。-[][LibraryStructure](https://www.typescriptlang.org/docs/handbook/declaration-files/library-structures.html)-[x][Do'sandDon'ts](https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html)*TypeScript中一些写法的最佳实践。-[][DeepDive](https://www.typescriptlang.org/docs/handbook/declaration-files/deep-dive.html)-[][Publishing](https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html)-[][Consumption](https://www.typescriptlang.org/docs/handbook/declaration-files/consumption.html)"},{name:"Declaration_Merging.md",path:"/TypeScript/Declaration_Merging.md",type:"file",mdconf:{abbrlink:"1xo8g32v"},birthtime:"2022-01-16",mtime:"2022-01-16",size:972,extension:".md",relative:"/TypeScript/Declaration_Merging.md",isEmpty:!1,content:"\x3c!--abbrlink:1xo8g32v--\x3e###MergeInterface```tsinterfaceDocument{createElement(tagName:any):Element;}interfaceDocument{createElement(tagName:\"div\"):HTMLDivElement;createElement(tagName:\"span\"):HTMLSpanElement;}interfaceDocument{createElement(tagName:string):HTMLElement;createElement(tagName:\"canvas\"):HTMLCanvasElement;}```在TypeScript中，上述三个Document接口此时会发生合并，因此在实际使用中，也需要合并使用三个Document的参数与结果。```tsvarobj:Document={createElement:function(tagName:'div'|'span'|'canvas'){return{}asany}}```TypeScript此时会根据传参自动帮助我们推导出结果的类型。```tsvarresult1=obj.createElement('div')//HTMLDivElementvarresult2=obj.createElement('span')//HTMLSpanElement```###link-[x][DeclarationMerging](https://www.typescriptlang.org/docs/handbook/declaration-merging.html)"},{name:"More_On_Functions.md",path:"/TypeScript/More_On_Functions.md",type:"file",mdconf:{abbrlink:"gqpyuise"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3423,extension:".md",relative:"/TypeScript/More_On_Functions.md",isEmpty:!1,content:"\x3c!--abbrlink:gqpyuise--\x3e##TypeScript中使用函数###CallSignatures如果我们期望根据属性类型动态选取函数调用，可以书写如下:```tstypeDescribableFunction={description:string;(someArg:number):boolean;};functiondoSomething(fn:DescribableFunction){console.log(fn.description+\"returned\"+fn(6));}```在这里，`fn(6)`中传入了数字6，因而其命中了对象中`(someArg:number):boolean;`该条规则。###在函数中使用泛型应该注意的点*尽可能地直接使用参数类型，而不要去约束它。```tsfunctionfirstElement1<Type>(arr:Type[]){returnarr[0];}functionfirstElement2<Typeextendsany[]>(arr:Type){returnarr[0];}//✅a:numberconsta=firstElement1([1,2,3]);//❎b:anyconstb=firstElement2([1,2,3]);```粗看firstElement1与firstElement2似乎达到一样的效果，但是结果上a的类型是number，b的类型是any。这是因为TypeScript必须使用约束类型解析arr[0]表达式，而非在调用期间“等待”解析元素。###不要在CallBacks中使用可选参数表达式在以下代码中，在定义侧对回调函数中的参数作了可选表达式的声明，且在定义侧调用的callback函数未传入可选参数，因此在消费者调用可选参数值时报了错误。```ts//❎定义侧错误示范functionmyForEach(arr:any[],callback:(arg:any,index?:number)=>void){for(leti=0;i<arr.length;i++){callback(arr[i])}}//消费侧myForEach([1,2,3],(a,i)=>{//Objectispossibly'undefined'.console.log(i.toFixed())})```与之对应的，若需要在回调函数中定义参数的类型，尽量不使用可选参数表达式，除非消费该函数时能保证处理好可选参数。```ts//✅定义侧正确示范functionmyForEach(arr:any[],callback:(arg:any,index:number)=>void){for(leti=0;i<arr.length;i++){callback(arr[i],i)}}//消费侧myForEach([1,2,3],(a,i)=>{console.log(i.toFixed())})```###函数重载函数实现侧必须与定义重载侧对应。*例子一:参数类型不正确```ts//定义侧functionfn(x:boolean):void;functionfn(x:string):void;//实现侧functionfn(x:boolean){}//❎functionfn(x:boolean|string){}//✅```*例子二:返回结果不正确```ts//定义侧functionfn(x:string):string;functionfn(x:number):boolean;//实现侧//❎functionfn(x:string|number){return\"oops\"}//✅functionfn(x:string|number):string|boolean{if(typeofx==='string'){return'hhh'}elseif(typeofx==='number'){returntrue}}```###剩余参数在TypeScript中，数组被认为是可变的，因而会导致一些奇怪的问题。```tsconstargs=[8,5]//❎Aspreadargumentmusteitherhaveatupletypeorbepassedtoarestparameter.constangle=Math.atan2(...args)```此时，通常最为直接的解决方式是使用`const`来约束目标为不可变对象。>`Readonly`与`Const`都有不可让值修改的作用。区别在于Readonly作用于属性,Const作用于变量。```tsconstargs=[8,5]asconstconstangle=Math.atan2(...args)```###link[MoreonFunctions](https://www.typescriptlang.org/docs/handbook/2/functions.html)"},{name:"README.md",path:"/TypeScript/README.md",type:"file",mdconf:{abbrlink:"qy2pz4hv"},birthtime:"2022-01-16",mtime:"2022-01-16",size:12957,extension:".md",relative:"/TypeScript/README.md",isEmpty:!1,content:'\x3c!--abbrlink:qy2pz4hv--\x3eTypeScript并不是一个完全新的语言,它是JavaScript的超集，为JavaScript的生态增加了类型机制，并最终将代码编译为纯粹的JavaScript代码。##TypeScript简介TypeScript由Microsoft(算上Angular2的话加上Google)开发和维护的一种开源编程语言。它支持JavaScript的所有语法和语义，同时通过作为ECMAScript的超集来提供一些额外的功能，如类型检测和更丰富的语法。下图显示了TypeScript与ES5，ES2015，ES2016之间的关系。![](http://with.muyunyun.cn/da62039bf146c2ebd615ef1d11a1a808.jpg)##使用TypeScript的原因JavaScript是一门弱类型语言，变量的数据类型具有动态性，只有执行时才能确定变量的类型，这种后知后觉的认错方法会让开发者成为调试大师，但无益于编程能力的提升，还会降低开发效率。TypeScript的类型机制可以有效杜绝由变量类型引起的误用问题，而且开发者可以控制对类型的监控程度，是严格限制变量类型还是宽松限制变量类型，都取决于开发者的开发需求。添加类型机制之后，副作用主要有两个：增大了开发人员的学习曲线，增加了设定类型的开发时间。总体而言，这些付出相对于代码的健壮性和可维护性，都是值得的。此外，类型注释是TypeScript的内置功能之一，允许文本编辑器和IDE可以对我们的代码执行更好的静态分析。这意味着我们可以通过自动编译工具的帮助，在编写代码时减少错误，从而提高我们的生产力。对TypeScript的简介到此，接下来对其特有的知识点进行简单概括总结。##数据类型*[数据类型](https://github.com/MuYunyun/blog/blob/main/TypeScript/Types.md)##函数###为函数定义类型我们可以给每个参数添加类型之后再为函数本身添加返回值类型。TypeScript能够根据返回语句自动推断出返回值类型，因此我们通常省略它。下面函数add,add2,add3的效果是一样的，其中是add3函数是函数完整类型。```tsfunctionadd(x:string,y:string):string{return"HelloTypeScript"}letadd2=function(x:string,y:string):string{return"HelloTypeScript"}letadd3:(x:string,y:string)=>string=function(x:string,y:string):string{return"HelloTypeScript"}```###可选参数和默认参数JavaScript里，每个参数都是可选的，可传可不传。没传参的时候，它的值就是undefined。在TypeScript里我们可以在参数名旁使用?实现可选参数的功能。比如，我们想让lastname是可选的:```tsfunctionbuildName(firstName:string,lastname?:string){console.log(lastname?firstName+""+lastname:firstName)}letres1=buildName("鸣","人")//鸣人letres2=buildName("鸣")//鸣letres3=buildName("鸣","人","君")//Suppliedparametersdonotmatchanysignatureofcalltarget.```如果带默认值的参数出现在必须参数前面，用户必须明确的传入undefined值来获得默认值。例如，我们重写上例子，让firstName是带默认值的参数：```tsfunctionbuildName2(firstName="鸣",lastName?:string){console.log(firstName+""+lastName)}letres4=buildName2("人")//人letres5=buildName2(undefined,"人")//鸣人```##类传统的JavaScript程序使用函数和基于原型的继承来创建可重用的组件，但对于熟悉使用面向对象方式的程序员来讲就有些棘手，因为他们用的是基于类的继承并且对象是由类构建出来的。从ECMAScript2015，也就是ECMAScript6开始，JavaScript程序员将能够使用基于类的面向对象的方式。使用TypeScript，我们允许开发者现在就使用这些特性，并且编译后的JavaScript可以在所有主流浏览器和平台上运行，而不需要等到下个JavaScript版本。###类```tsclassPerson{name:string//这个是对后文this.name类型的定义age:numberconstructor(name:string,age:number){this.name=namethis.age=age}print(){returnthis.name+this.age}}letperson:Person=newPerson(\'muyy\',23)console.log(person.print())//muyy23```我们在引用任何一个类成员的时候都用了this。它表示我们访问的是类的成员。其实这本质上还是ES6的知识，只是在ES6的基础上多上了对this字段和引用参数的类型声明。###继承```tsclassPerson{publicname:string//public、private、static是typescript中的类访问修饰符age:numberconstructor(name:string,age:number){this.name=namethis.age=age}tell(){console.log(this.name+this.age)}}classStudentextendsPerson{gender:stringconstructor(gender:string){super("muyy",23)this.gender=gender}tell(){console.log(this.name+this.age+this.gender)}}varstudent=newStudent("male")student.tell()//muyy23male```这个例子展示了TypeScript中继承的一些特征，可以看到其实也是ES6的知识上加上类型声明。不过这里多了一个知识点——公共，私有，以及受保护的修饰符。TypeScript里，成员默认为public；当成员被标记成private时，它就不能在声明它的类的外部访问；protected修饰符与private修饰符的行为很相似，但有一点不同，protected成员在派生类中仍然可以访问。###存储器TypeScript支持通过getters/setters来截取对对象成员的访问。它能帮助你有效的控制对对象成员的访问。对于存取器有下面几点需要注意的：首先，存取器要求你将编译器设置为输出ECMAScript5或更高。不支持降级到ECMAScript3。其次，只带有get不带有set的存取器自动被推断为readonly。这在从代码生成.d.ts文件时是有帮助的，因为利用这个属性的用户会看到不允许够改变它的值。```tsclassHello{private_name:stringprivate_age:numbergetname():string{returnthis._name}setname(value:string){this._name=value}getage():number{returnthis._age}setage(age:number){if(age>0&&age<100){console.log("年龄在0-100之间")//年龄在0-100之间return}this._age=age}}lethello=newHello()hello.name="muyy"hello.age=23console.log(hello.name)//muyy```##接口###接口TypeScript的核心原则之一是对值所具有的结构进行类型检查。在TypeScript里，接口的作用就是为这些类型命名和为你的代码或第三方代码定义契约。```tsinterfaceLabelValue{label:string}functionprintLabel(labelObj:LabelValue){console.log(labelObj.label)}letmyObj={"label":"helloInterface"}printLabel(myObj)```LabelledValue接口就好比一个名字，它代表了有一个label属性且类型为string的对象。只要传入的对象满足上述必要条件，那么它就是被允许的。另外，类型检查器不会去检查属性的顺序，只要相应的属性存在并且类型也是对的就可以。###可选属性带有可选属性的接口与普通的接口定义差不多，只是在可选属性名字定义的后面加一个?符号。可选属性的好处之一是可以对可能存在的属性进行预定义，好处之二是可以捕获引用了不存在的属性时的错误。```tsinterfacePerson{name?:stringage?:number}functionprintInfo(info:Person){console.log(info)}letinfo={"name":"muyy","age":23}printInfo(info)//{"name":"muyy","age":23}letinfo2={"name":"muyy"}printInfo(info2)//{"name":"muyy"}```###函数类型接口能够描述JavaScript中对象拥有的各种各样的外形。除了描述带有属性的普通对象外，接口也可以描述函数类型。定义的函数类型接口就像是一个只有参数列表和返回值类型的函数定义。参数列表里的每个参数都需要名字和类型。定义后完成后，我们可以像使用其它接口一样使用这个函数类型的接口。```tsinterfaceSearchFunc{(source:string,subString:string):boolean}letmySearch:SearchFuncmySearch=function(source:string,subString:string){returnsource.search(subString)!==-1}console.log(mySearch("鸣人","鸣"))//trueconsole.log(mySearch("鸣人","缨"))//false```###可索引类型与使用接口描述函数类型差不多，我们也可以描述那些能够“通过索引得到”的类型，比如`a[10]`或`ageMap["daniel"]`。可索引类型具有一个索引签名，它描述了对象索引的类型，还有相应的索引返回值类型。让我们看如下例子：```tsinterfaceStringArray{[index:number]:string}letMyArray:StringArrayMyArray=["是","云","随","风"]console.log(MyArray[2])//随```###类类型与C#或Java里接口的基本作用一样，TypeScript也能够用它来明确的强制一个类去符合某种契约。我们可以在接口中描述一个方法，在类里实现它，如同下面的`setTime`方法一样：```tsinterfaceClockInterface{currentTime:DatesetTime(d:Date)}classClockimplementsClockInterface{currentTime:DatesetTime(d:Date){this.currentTime=d}constructor(h:number,m:number){}}```###继承接口和类一样，接口也可以相互继承。这让我们能够从一个接口里复制成员到另一个接口里，可以更灵活地将接口分割到可重用的模块里。```tsinterfaceShape{color:string}interfacePenStroke{penWidth:number}interfaceSquareextendsShape,PenStroke{sideLength:number}lets=<Square>{}s.color="blue"s.penWidth=100s.sideLength=10```##模块TypeScript与ECMAScript2015一样，任何包含顶级import或者export的文件都被当成一个模块。```tsexportinterfaceStringValidator{isAcceptable(s:string):boolean}varstrReg=/^[A-Za-z]+$/varnumReg=/^[0-9]+$/exportclassletterValidatorimplementsStringValidator{isAcceptable(s:string):boolean{returnstrReg.test(s)}}exportclasszipCodeimplementsStringValidator{isAcceptable(s:string):boolean{returns.length==5&&numReg.test(s)}}```##泛型软件工程中，我们不仅要创建一致的定义良好的API，同时也要考虑可重用性。组件不仅能够支持当前的数据类型，同时也能支持未来的数据类型，这在创建大型系统时为你提供了十分灵活的功能。在像C#和Java这样的语言中，可以使用泛型来创建可重用的组件，一个组件可以支持多种类型的数据。这样用户就可以以自己的数据类型来使用组件。###初探泛型如下代码，我们给Hello函数添加了类型变量T，T帮助我们捕获用户传入的类型（比如：string）。我们把这个版本的Hello函数叫做泛型，因为它可以适用于多个类型。代码中`output`和`output2`是效果是相同的，第二种方法更加普遍，利用了类型推论——即编译器会根据传入的参数自动地帮助我们确定T的类型:```tsfunctionHello<T>(arg:T):T{returnarg;}letoutPut=Hello<string>(\'HelloGeneric\');letoutput2=Hello(\'HelloGeneric\')console.log(outPut);console.log(outPut2);```##参考资料-[x][BasicTypes](https://www.typescriptlang.org/docs/handbook/basic-types.html)-[x][Namespaces](https://www.typescriptlang.org/docs/handbook/namespaces.html)-[][TypeInference](https://www.typescriptlang.org/docs/handbook/type-inference.html)-[][TypeCompatibility](https://www.typescriptlang.org/docs/handbook/type-compatibility.html)-[][AdvancedTypes](https://www.typescriptlang.org/docs/handbook/advanced-types.html)-[x][Triple-SlashDirectives](https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html)-[][TypeCheckingJavaScriptFiles](httpas://www.typescriptlang.org/docs/handbook/type-checking-javascript-files.html)*[type-challenges](https://github.com/type-challenges/type-challenges):typescript体操*Typescript工具库*[ts-toolbelt](https://github.com/millsp/ts-toolbelt)*[utility-types](https://github.com/piotrwitek/utility-types)*[DefinitelyTypedlodashtypes](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/lodash)*[ts-fp-light](https://github.com/hacker0limbo/ts-fp-light)*[ts-essentials](https://github.com/krzkaczor/ts-essentials)*[Ts高手篇：22个示例深入讲解Ts最晦涩难懂的高级类型工具](https://juejin.cn/post/6994102811218673700)>文章起笔于2017-07-02'},{name:"RoadMap.md",path:"/TypeScript/RoadMap.md",type:"file",mdconf:{abbrlink:"2um498vn"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1861,extension:".md",relative:"/TypeScript/RoadMap.md",isEmpty:!1,content:"\x3c!--abbrlink:2um498vn--\x3e###Roadmap*[roadmap](https://github.com/Microsoft/TypeScript/wiki/Roadmap)*[overview](https://www.typescriptlang.org/docs/handbook/release-notes/overview.html)###1.3*[Tupletypes](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-1-3.html#tuple-types)###1.4enum###2.8*[ConditionalTypes](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-8.html#conditional-types)###3.2todo:https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-2.html###3.7####OptionalChainingOperator(可选链操作符)OptionalChainingOperatorcanhelpus`reducesomecode`whenwejudge`foo.bar.baz`asfollow:```js//Beforeif(foo&&foo.bar&&foo.bar.baz){//...}//Afterif(foo?.bar?.baz){//...}````?:`:checkin`undefined`and`null`.```jsundefined?:1//undefinednull?:1//undefined0?:1//1''?:1//1NaN?:1//1```>`&&`hasdifferentbehaviour.Notonly`undefined`and`null`,but`falsyvalue`willbealsochecked.eg:```jsundefined&&1//undefinednull&&1//null0&&1//0''&&1//''NaN&&1//NaN```####NullishCoalescingOperator(空值合并操作符)`??`meansyoucantakethevaluethatisn't`undefined`or`null`.```jsundefined??1//1null??1//10??1//0''??1//''```Youcanuseitwhenusing`0`astruesuchas:```jsif(typeofvalue!=='number')return//beforeletvalueStash=value===0||value?value:defaultValue//afterletvalueStash=value??defaultValue```>`||`hasdifferentbehaviour.Notonly`undefined`and`null`,but`falsyvalue`willbealsochecked.eg:```jsundefined||1//1null||1//10||1//1''||1//1```"},{name:"TypeScript_Module.md",path:"/TypeScript/TypeScript_Module.md",type:"file",mdconf:{abbrlink:"e49qogy1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1543,extension:".md",relative:"/TypeScript/TypeScript_Module.md",isEmpty:!1,content:"\x3c!--abbrlink:e49qogy1--\x3e##TypeScript模块篇###TypeScript之模块导入为什么在TypeScript中会使用`import*asReactfromreact`，而不是`importReactfromreact`,这个问题困惑了一些时日。观察React的导出代码:```jsif(process.env.NODE_ENV==='production'){module.exports=require('./cjs/react.production.min.js');}else{module.exports=require('./cjs/react.development.js');}```可以发现其是`common.js`形式的导出,而我们知道`import`是es6的引入,所以TypeScript中出现的`import*as___from___`提供了使用`import`语法调用`common.js`的口子。比如`import*asReactfromreact`等价于`constReact=require('react')`,它还等价于另外一种写法`importReact=require('react')`(在webpack语境下生效)而`importReactfrom'react'`在TS中等价于`constReact=require('react').default`在typescript的配置文件中可以加上`esModuleInterop`参数,具体见[官网](https://www.typescriptlang.org/docs/handbook/compiler-options.html),其效果可以将`importReactfromreact`转为`import*asReactfromreact`在使用了esModuleInterop参数后,像React、ReactDOM(对象块)使用import*asReactfrom'react'的形式,warning、classnames(函数)等库使用importwarningfrom'warning'形式。>在webpack中的话使用importReactfrom'react'和import*asReactfrom'react'都能帮你打包,但是其它的Rollup和Parcel没有支持"},{name:"Type_Manipulation.md",path:"/TypeScript/Type_Manipulation.md",type:"file",mdconf:{abbrlink:"6r8w8t5n"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1262,extension:".md",relative:"/TypeScript/Type_Manipulation.md",isEmpty:!1,content:"\x3c!--abbrlink:6r8w8t5n--\x3e本文档为TypeScript的[类型系统](https://www.typescriptlang.org/docs/handbook/2/types-from-types.html)阅读笔记。###Keyof```tstypeArrayish={[n:number]:unknown};typeA=keyofArrayish;//numbertypeMapish={[k:string]:boolean};typeM=keyofMapish;//string|number```这里需要留意M的类型是`string|number`,这是因为JavaScript对象中总是将key对待为一个string类型,比如obj[0]与obj['0']是等价的。###Typeof需要注意「类型空间」与实际值的区别。以`ReturnType<T>`为例:```tsfunctionf(){return{x:10,y:3};}typeP=ReturnType<f>;```直接操作值,会报错`'f'referstoavalue,butisbeingusedasatypehere.Didyoumean'typeoff'?`。因此我们得使用typeof来将函数转化为类型空间。```tsfunctionf(){return{x:10,y:3};}typeP=ReturnType<typeoff>;```###IndexedAccess可以结合使用typeof与number去获取数组元素的类型。```tsconstMyArray=[{name:\"Alice\",age:15},{name:\"Bob\",age:23},{name:\"Eve\",age:38},]//typePerson={//name:string;//age:number;//}typePerson=typeofMyArray[number];```"},{name:"Types.md",path:"/TypeScript/Types.md",type:"file",mdconf:{abbrlink:"a3a3qa6u"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3226,extension:".md",relative:"/TypeScript/Types.md",isEmpty:!1,content:'\x3c!--abbrlink:a3a3qa6u--\x3e##数据类型在TypeScript进行类型定义的时候尽量不使用Object、Boolean、Array、Function等大写开头的标识来定义类型，因为它们在JavaScript中都是具体的函数对象，取而代之地应该使用object、boolean、[]、()=>void。###字符串类型一个保存字符串的文本，类型声明为string。```tsletname:string=\'muyy\'```###布尔值类型boolean是true或false的值，所以`letisBool3:boolean=newBoolean(1)`就会编译报错，因为newBoolean(1)生成的是一个Bool对象。```tsletisBool1:boolean=false```###数字类型```tsletnumber:number=10;```###数组类型数组是Array类型。然而，因为数组是一个集合，我们还需要指定在数组中的元素的类型。我们通过`Array<type>`or`type[]`语法为数组内的元素指定类型。```tsletarr:number[]=[1,2,3,4,5]letarr2:Array<number>=[1,2,3,4,5]letarr3:string[]=["1","2"]letarr4:Array<string>=["1","2"]```###Tuple类型Tuple类型相对于Array类型,其允许元素的类型不一定相同。```jsletx:[string,number]x=[\'a\',1]```###enums类型列出所有可用值，一个枚举的默认初始值是0。一开始的范围可以作如下调整:```tsenumRole{Employee=3,Manager,Admin}letrole:Role=Role.Employeeconsole.log(role)//3console.log(Role[4])//Manager```###any类型any是默认的类型，其类型的变量允许任何类型的值：```tsletnotSure:any=10letnotSure2:any[]=[1,"2",false]```###void类型JavaScript没有空值void的概念，在TypeScirpt中，可以用void表示没有任何返回值的函数：```tsfunctionalertName():void{console.log(\'Mynameismuyy\')}```此外，需注意的是如果在函数声明的变量后方声明()=>void，函数中是可以返回任意值，只不过结果类型仍然为void。```ts✅constf1:()=>void=function(){returntrue}❎constf3=function():void{returntrue}```###unknow类型任何使用any类型的地方推荐使用unknow类型代替它。>[new-unknown-top-type](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#new-unknown-top-type),比any更加安全的类型如果没有断言或缩小到更具体的类型，则不允许对unknow类型做任何操作。比如下方例子:```tsfunctionf(x:unknown){x==5;x!==10;x>=0;//Errorx+1;//Errorx*2;//Error-x;//Error+x;//Errorx.foo;//Errorx[5];//Errorx();//Error}```###never类型当函数throw或者返回错误,循环永远为true时可以声明为[never类型](https://www.typescriptlang.org/docs/handbook/2/narrowing.html#the-never-type)。```js//Functionreturningnevermusthaveunreachableendpointfunctionerror(message:string):never{thrownewError(message)}//Inferredreturntypeisneverfunctionfail(){returnerror("Somethingfailed")}//FunctionreturningnevermusthaveunreachableendpointfunctioninfiniteLoop():never{while(true){...}}```'},{name:"Types_vs_Interfaces.md",path:"/TypeScript/Types_vs_Interfaces.md",type:"file",mdconf:{abbrlink:"z9tf63bq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1393,extension:".md",relative:"/TypeScript/Types_vs_Interfaces.md",isEmpty:!1,content:"\x3c!--abbrlink:z9tf63bq--\x3e##TypesvsInterfaces###相同点1.两者都可用来表达`Objects/Functions`,不过它们语法不同。Interface:```tsinterfacePoint0{x:number;y:number;}interfaceSetPoint0{(x:number,y:number):void}```Type:```tstypePoint1={x:number;y:number;}typeSetPoint1=(x:number,b:number)=>void```2.两者都可以继承自Interface或者Type。继承自Interface:```tsinterfacePartialPointX0{x:number}interfacePointextendsPartialPointX0{y:number}interfacePartialPointX3{x:number}typePointX1=PartialPointX3&{y:number}```继承自Type:```tstypePartialPointX1={x:number}typePointX1=PartialPointX1&{y:number}typePartialPointX2={x:number}interfacePointextendsPartialPointX2{y:number}```###不同点1.Type可用来定义声明`primitives`,`unions`以及`tuples`类型。```ts//primitivetypeName=string;//uniontypePoint=string|number//tupletypeData=[string,number]```2.Interface可声明多次,多次声明的类型会进行合并。Type则只能声明一次。```tsinterfacePoint{x:number}interfacePoint{y:number}constpoint:Point={x:1,y:2}```>[Types_vs_Interfaces](https://stackoverflow.com/questions/37233735/typescript-interfaces-vs-types/52682220#52682220)"},{name:"Utility_Types.md",path:"/TypeScript/Utility_Types.md",type:"file",mdconf:{abbrlink:"fvrpelzp"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2211,extension:".md",relative:"/TypeScript/Utility_Types.md",isEmpty:!1,content:'\x3c!--abbrlink:fvrpelzp--\x3e###`Partial<T>``Partial<T>`:意味T集合的子集;###`Pick<T,K>``Pick<T,K>`:相对`Partial<T>`,`Pick<T,K>`限制了子集中必须含有K定义的类型字段。```jsinterfaceTodo{title:string;description:string;completed:boolean;}typeTodoPreview=Pick<Todo,"title"|"completed">;consttodo:TodoPreview={title:"Cleanroom",completed:false};```###`Readonly<T>``Readonly<T>`:T中类型只读;###`Record<K,T>``Record<K,T>`:建立K到T之间的map映射。```jsinterfacePageInfo{title:string;}typePage="home"|"about"|"contact";constx:Record<Page,PageInfo>={about:{title:"about"},contact:{title:"contact"},home:{title:"home"}};```###`Omit<T,K>``Omit<T,K>`:申明一个类型其在T类型中`移除K中包含的属性值`;```jsinterfaceTodo{title:string;description:string;completed:boolean;}typeTodoPreview=Omit<Todo,"description">;consttodo:TodoPreview={title:"Cleanroom",completed:false};```###`Exclude<T,U>`*`Exclude<T,U>`:申明一个类型其在T类型中`移除U中所包含的类型`;*版本:2.8```jstypeT0=Exclude<"a"|"b"|"c","a">;//"b"|"c"typeT1=Exclude<"a"|"b"|"c","a"|"b">;//"c"typeT2=Exclude<string|number|(()=>void),Function>;//string|number```###`Extract<T,U>`*`Extract<T,U>`—ExtractfromTthosetypesthatareassignabletoU.*版本:2.8###`NonNullable<T>`*`NonNullable<T>`:申明一个类型其将T类型中的null与undefined移除;*版本:2.8###`ReturnType<T>`*`ReturnType<T>`—Obtainthereturntypeofafunctiontype.*版本:2.8###`InstanceType<T>`*`InstanceType<T>`:申明一个由构造函数实例类型组合而成的类型;*版本:2.8```jsclassC{x=0;y=0;}typeT0=InstanceType<typeofC>;//CtypeT1=InstanceType<any>;//anytypeT2=InstanceType<never>;//anytypeT3=InstanceType<string>;//ErrortypeT4=InstanceType<Function>;//Error```###Link-[x][UtilityTypes](https://www.typescriptlang.org/docs/handbook/utility-types.html)'},{name:"extends.md",path:"/TypeScript/extends.md",type:"file",mdconf:{abbrlink:"d1jkxo7l"},birthtime:"2022-01-16",mtime:"2022-01-16",size:7291,extension:".md",relative:"/TypeScript/extends.md",isEmpty:!1,content:"\x3c!--abbrlink:d1jkxo7l--\x3e#TypeScript条件类型精读与实践在大多数程序中，我们必须根据输入做出决策。TypeScript也不例外，使用条件类型可以描述输入类型与输出类型之间的关系。>本文同步首发在[个人博客](https://github.com/MuYunyun/blog/issues/140)中，欢迎订阅、交流。##用于条件判断时的extends当extends用于表示条件判断时，可以总结出以下规律1.若位于extends两侧的类型相同，则extends在语义上可理解为`===`，可以参考如下例子:```tstyperesult1='a'extends'abc'?true:false//falsetyperesult2=123extends1?true:false//false```2.若位于extends右侧的类型包含位于extends左侧的类型(即狭窄类型extends宽泛类型)时，结果为true，反之为false。可以参考如下例子:```tstyperesult3=stringextendsstring|number?true:false//true```3.当extends作用于对象时，若在对象中指定的key越多，则其类型定义的范围越狭窄。可以参考如下例子:```tstyperesult4={a:true,b:false}extends{a:true}?true:false//true```##在泛型类型中使用条件类型考虑如下Demo类型定义:```tstypeDemo<T,U>=TextendsU?never:T```结合[用于条件判断时的extends](#用于条件判断时的-extends)，可知`'a'|'b'|'c'extends'a'`是false,因此`Demo<'a'|'b'|'c','a'>`结果是`'a'|'b'|'c'`么?查阅[官网](https://www.typescriptlang.org/docs/handbook/2/conditional-types.html)，其中有提到:>Whenconditionaltypesactonagenerictype,theybecomedistributivewhengivenauniontype.即当条件类型作用于泛型类型时，联合类型会被拆分使用。即`Demo<'a'|'b'|'c','a'>`会被拆分为`'a'extends'a'`、`'b'extends'a'`、`'c'extends'a'`。用伪代码表示类似于:```jsfunctionDemo(T,U){returnT.map(val=>{if(val!==U)returnvalreturn'never'})}Demo(['a','b','c'],'a')//['never','b','c']```此外根据[never类型](https://www.typescriptlang.org/docs/handbook/2/narrowing.html#the-never-type)的定义——never类型可分配给每种类型，但是没有类型可以分配给never(除了never本身)。即`never|'b'|'c'`等价于`'b'|'c'`。因此`Demo<'a'|'b'|'c','a'>`的结果并不是`'a'|'b'|'c'`而是`'b'|'c'`。###工具类型心细的读者可能已经发现了Demo类型的声明过程其实就是TypeScript官方提供的工具类型中[`Exclude<Type,ExcludedUnion>`](https://www.typescriptlang.org/docs/handbook/utility-types.html#excludetype-excludedunion)的实现原理，其用于将联合类型ExcludedUnion排除在Type类型之外。```tstypeT=Demo<'a'|'b'|'c','a'>//T:'b'|'c'```基于Demo类型定义，进一步地还可以实现官方工具类型中的[`Omit<Type,Keys>`](https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys)，其用于移除对象Type中满足keys类型的属性值。```tstypeOmit<Type,Keys>={[PinDemo<keyofType,Keys>]:Type<P>}interfaceTodo{title:string;description:string;completed:boolean;}typeT=Omit<Todo,'description'>//T:{title:string;completed:boolean}```###逃离舱如果想让`Demo<'a'|'b'|'c','a'>`的结果为`'a'|'b'|'c'`是否可以实现呢?根据[官网](https://www.typescriptlang.org/docs/handbook/2/conditional-types.html#distributive-conditional-types)描述:>Typically,distributivityisthedesiredbehavior.Toavoidthatbehavior,youcansurroundeachsideoftheextendskeywordwithsquarebrackets.如果不想遍历泛型中的每一个类型，可以用方括号将泛型给括起来以表示使用该泛型的整体部分。```tstypeDemo<T,U>=[T]extends[U]?never:T//result此时类型为'a'|'b'|'c'typeresult=Demo<'a'|'b'|'c','a'>```##在箭头函数中使用条件类型在箭头函数中使用三元表达式时，从左向右的阅读习惯导致函数内容区若不加括号则会让使用方感到困惑。比如下方代码中x是函数类型还是布尔类型呢？```js//Theintentisnotclear.varx=a=>1?true:false```在eslint规则[no-confusing-arrow](https://eslint.org/docs/rules/no-confusing-arrow)中，推荐如下写法：```jsvarx=a=>(1?true:false)```在TypeScript的类型定义中，若在箭头函数中使用extends也是同理，由于从左向右的阅读习惯，也会导致阅读者对类型代码的执行顺序感到困惑。```tstypeCurry<Pextendsany[],R>=(arg:Head<P>)=>HasTail<P>extendstrue?Curry<Tail<P>,R>:R```因此在箭头函数中使用extends建议加上括号，对于进行codereview有很大的帮助。```tstypeCurry<Pextendsany[],R>=(arg:Head<P>)=>(HasTail<P>extendstrue?Curry<Tail<P>,R>:R)```##结合类型推导使用条件类型在TypeScript中，一般会结合extends来使用类型推导[infer](https://www.typescriptlang.org/docs/handbook/2/conditional-types.html#inferring-within-conditional-types)语法。使用它可以实现自动推导类型的目的。比如用其来实现工具类型[`ReturnType<Type>`](https://www.typescriptlang.org/docs/handbook/utility-types.html#returntypetype)，该工具类型用于返回函数Type的返回类型。```tstypeReturnType<TextendsFunction>=Textends(...args:any)=>inferU?U:neverMyReturnType<()=>string>//stringMyReturnType<()=>Promise<boolean>//Promise<boolean>```结合extends与类型推导还可以实现与数组相关的`Pop<T>`、`Shift<T>`、`Reverse<T>`工具类型。**`Pop<T>`**:```tstypePop<Textendsany[]>=Textends[...inferExceptLast,any]?ExceptLast:nevertypeT=Pop<[3,2,1]>//T:[3,2]```**`Shift<T>`**:```tstypeShift<Textendsany[]>=Textends[infer_,...inferO]?O:nevertypeT=Shift<[3,2,1]>//T:[2,1]```**`Reverse<T>`**```tstypeReverse<T>=Textends[inferF,...inferOthers]?[...Reverse<Others>,F]:[]typeT=Reverse<['a','b']>//T:['b','a']```##使用条件类型来判断两个类型完全相等我们也可以使用条件类型来判断A、B两个类型是否完全相等。当前社区上主要有两种方案:**方案一**:参考[issue](https://github.com/Microsoft/TypeScript/issues/27024#issuecomment-420227672)。```tsexporttypeEqual1<T,S>=[T]extends[S]?([S]extends[T]?true:false):false```目前该方案的唯一缺点是会将any类型与其它任何类型判为相等。```tstypeT=Equal1<{x:any},{x:number}>//T:true```**方案二**:参考[issue](https://github.com/microsoft/TypeScript/issues/27024#issuecomment-421529650)。```tsexporttypeEqual2<X,Y>=(<T>()=>TextendsX?1:2)extends(<U>()=>UextendsY?1:2)?true:false```目前该方案的唯一缺点是在对交叉类型的处理上有一点瑕疵。```tstypeT=Equal2<{x:1}&{y:2},{x:1,y:2}>//false```以上两种判断类型相等的方法见仁见智，笔者在此抛砖引玉。"},{name:"类型体操.md",path:"/TypeScript/类型体操.md",type:"file",mdconf:{abbrlink:"xn66n5uc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:609,extension:".md",relative:"/TypeScript/类型体操.md",isEmpty:!1,content:"\x3c!--abbrlink:xn66n5uc--\x3eReading...-[]TypeScript的类型是一门独立的「纯函数式编程语言」-[x]类型与值-[x]extends与分支条件-[]变量声明-[x]函数声明与调用-[x]没有高阶函数不影响表达能力-[x]模式匹配-[]递归与尾递归-[]普通递归-[]尾递归&尾递归转循环&通用递归转循环-[]循环转尾递归-[]尾递归遍历树-[]实现Lisp解释器-[]基本加减乘除运算-[]词法分析###link*[TypeScript类型体操天花板](https://zhuanlan.zhihu.com/p/427309936)"}],type:"directory",size:37643},{name:"Algorithm",path:"/Algorithm",children:[{name:"README.md",path:"/Algorithm/README.md",type:"file",mdconf:{abbrlink:"qrh61eep"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2271,extension:".md",relative:"/Algorithm/README.md",isEmpty:!1,content:"\x3c!--abbrlink:qrh61eep--\x3e###Algorithm*[AlgorithmAndComplexy](https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/complexy.md)-[Recursive](https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/recursive.md)-[BinarySearch](https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/binary_search.md)*[GreedyAlgorithm](https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/greedy.md)*[DynamicProgramming](https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/dynamic_programming.md)###SortAlgorithm-[x][SelectionSort](https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/sort/selection_sort.md)-[x][QuickSort](https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/sort/quick_sort.md)-[x][MergeSort](https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/sort/merge_sort.md)-[x][HeapSort](https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/sort/heap_sort.md)算法是一种思想!以排序算法为例,可能最常见的是在数组中使用排序算法,但是相同的思想也能用于数组对象,甚至链表中,比如链表中实现排序的两道题。1.[147.InsertionSortList](https://github.com/MuYunyun/blog/blob/master/BasicSkill/LeetCode/147.Insertion_Sort_List/README.md):插入排序在链表中的实现;2.[148.SortList](https://github.com/MuYunyun/blog/blob/master/BasicSkill/LeetCode/148.Sort_List/README.md):归并排序在链表中的实现;###DataStructure*[Stack](https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/stack.md)*[Queue](https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/queue.md)*[List](https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/list.md)*[Set](https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/set.md)*[Dictionary](https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/.md)*[HashTable](https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/hash_table.md)*[BinaryTree](https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/binary_tree.md)*[Graph](https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/graph.md)"},{name:"algorithm",path:"/Algorithm/algorithm",children:[{name:"backtracking.md",path:"/Algorithm/algorithm/backtracking.md",type:"file",mdconf:{abbrlink:"eflxs88h"},birthtime:"2022-01-16",mtime:"2022-01-16",size:842,extension:".md",relative:"/Algorithm/algorithm/backtracking.md",isEmpty:!1,content:"\x3c!--abbrlink:eflxs88h--\x3e###BackTracking回溯法回溯是一种思想。DFS也是回溯思想的一种实践案例。回溯法本质是一种穷举的递归算法,既然是递归,它就需要有终止条件。###解决场景*排列问题###回溯法相关题目*[17.LetterCombinationsofaPhoneNumber](https://github.com/MuYunyun/blog/blob/main/LeetCode/17.Letter_Combinations_of_a_Phone_Number.md)*[22.GenerateParentheses](https://github.com/MuYunyun/blog/blob/main/LeetCode/22.Generate_Parentheses.md)*[78.Subsets](https://github.com/MuYunyun/blog/blob/main/LeetCode/78.Subsets.md)*[93.RestoreIPAddresses](https://github.com/MuYunyun/blog/blob/main/LeetCode/93.Restore_IP_Addresses.md)*[131.PalindromePartitioning](https://github.com/MuYunyun/blog/blob/main/LeetCode/131.Palindrome%20Partitioning.md)"},{name:"binary_search.md",path:"/Algorithm/algorithm/binary_search.md",type:"file",mdconf:{abbrlink:"ps27a5tp"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2868,extension:".md",relative:"/Algorithm/algorithm/binary_search.md",isEmpty:!1,content:"\x3c!--abbrlink:ps27a5tp--\x3e###二分查找思想1.取已排列好数组的中间值2.把需查找的值和中间值进行比较3.如果比中间值小,则对前半部分进行类似操作；如果比中间值大,则对后半部分进行类似操作；###二分查找代码实现```js//arr为指定数组,target为目标元素functionbinarysearch(arr,target){letleft=0letright=arr.length-1while(left<=right){constmiddlePoint=Math.floor((left+right)/2)letmiddle=arr[middlePoint]if(middle>target){right=middlePoint-1}elseif(middle<target){left=middlePoint+1}else{returnmiddle}}return'数组中目标元素不存在'}```###以二分查找法看如何写出正确的程序*明确变量的含义。比如在上述代码中,left与right就是变量,其意味当前查找数组中的左边界与右边界。[left,...right];*循环不变量。在上述代码中,循环中改变变量(left,right)的取值,但是不改变变量的含义。[left,...right];*小数据量调试。(快速,准确,耐心)*大数据量调试。(能测出程序的性能)###真题>题目:题目:在一个二维数组中,每一行都按照从左到右递增的顺序排序,每一列都按照从上到下递增的顺序排序。请完成一个函数,输入这样的一个二维数组和一个整数,判断数组中是否含有该整数。```js12345678910111213141516functionfind(arr,n){letx=0lety=arr[x].length-1while(x<arr.length&&y>0){if(n>arr[x][y]){x++}elseif(n<arr[x][y]){y--}else{return'找到目标元素'}}return'目标元素不存在'}```这道题严格不算是二分查找,不过用到了类似的思维。>求开方[Leetcode:69.Sqrt(x)(Easy)](https://leetcode.com/problems/sqrtx/description/)思路:满足0<sqrt<x&&sqrt===x/sqrt,转化为二分查找求sqrt```js/***@param{number}x*@return{number}*/varmySqrt=function(x){//8letleft=1letright=xwhile(left<=right){constmid=Math.floor((left+right)/2)//423constsqrt=x/mid//242.7if(sqrt===mid)returnsqrtif(sqrt>mid){left=mid+1//3}elseif(sqrt<mid){right=mid-1//32}}returnright//这里返回right而不是left的原因:用了Math.floor,mid会偏小,相应sqrt会偏大}```>有序数组的SingleElement[Leetcode:540.SingleElementinaSortedArray(Medium)](https://leetcode.com/problems/single-element-in-a-sorted-array/description/)题目描述:一个有序数组只有一个数不出现两次,找出这个数。"},{name:"complexy.md",path:"/Algorithm/algorithm/complexy.md",type:"file",mdconf:{abbrlink:"cbrpc1ne"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5452,extension:".md",relative:"/Algorithm/algorithm/complexy.md",isEmpty:!1,content:"\x3c!--abbrlink:cbrpc1ne--\x3e###一个时间复杂度的问题有一个字符串数组,将数组中的每一个字符串按照字母序进行排序;然后再将整个字符串数组按照字典序进行排序;时间复杂度是多少?<details><summary>解析</summary>假设数组中最长的字符串长度为s,有n个字符串。对每一个字符串按照字母序进行排序:`n*slogs`对整个字符串数组按照字典序进行排序:`s*nlogn`(比如比较'abc'和'abd'两个字符串的顺序,需要比较到第s位字母,所以需要乘上3。)>排序默认为O(nlogn)的复杂度</details>###简单的复杂度分析####O(n^2)如下是[选择排序](./排序算法/选择排序.md)中的代码片段:```jsvarchooseSort=function(arr){for(letx=0;x<arr.length;x++){letmin=xfor(lety=x+1;y<arr.length;y++){if(arr[y]<arr[min]){min=y}}lettmp=arr[x]arr[x]=arr[min]arr[min]=tmp}returnarr}```分析其时间复杂度```js(n-1)+(n-2)+(n-3)+...+0=(n-1+0)*n/2≈O(n^2)````需注意的是并不是所有有两重遍历循环的算法时间复杂度都是O(n^2)`。```jsfunctiondemo1(n){for(leti=0;i<n;i++){for(letj=0;j<30;j++){...}}}```在demo1函数中,因为内层循环的次数为常量30,所以其时间复杂度为`30*n≈O(n)````jsfunctiondemo2(n){for(leti=0;i<n;i+=i){for(letj=0;j<n;j++){...}}}```在demo2函数中,外层循环循环的次数![](http://with.muyunyun.cn/b4705e227e4b5c5616b7eb81cfe082cb.jpg),所以其复杂度也不是O(n^2)而是O(logN)。####O(logN)如下是[二分查找](./二分查找.md)中的代码片段:```js//arr为指定数组,target为目标元素functionbinarysearch(arr,target){letleft=0letright=arr.length-1while(left<=right){constmiddlePoint=Math.floor((left+right)/2)letmiddle=arr[middlePoint]if(middle>target){right=middlePoint-1}elseif(middle<target){left=middlePoint+1}else{returnmiddle}}return'数组中目标元素不存在'}```分析其时间复杂度。假设数据总量为N,因为二分查找每次会减少一半的数据,所以经过1次后,数据剩下为N/2,经过2次后,数据剩下为N/2^2,二分查找的极限是最后剩下1个数据,假设经过m次后,达到极限,N/2^m=1,即![](http://with.muyunyun.cn/894f6426601047921de80c181e3656c2.jpg),所以时间复杂度为logN；题目:现在有一个1~1000区间中的正整数,需要你猜下这个数字是几,你只能问一个问题:大了还是小了？问需要猜几次才能猜对？答:根据二分查找的时间复杂度为logN,所以题目可以转化为求log1000的值,2^10=1024,所以最多猜10次就能猜对;###数据规模以JavaScript这门语言为例,书写如下函数```jsfunctionmain(){for(leti=1;i<=10;i++){letn=Math.pow(10,i)console.time('start')letsum=0for(letx=0;x<n;x++){sum+=x}console.log(`10^${i}`)console.timeEnd('start')}}```运行结果为:```js10^1start:0.14892578125ms10^2start:0.071044921875ms10^3start:0.074951171875ms10^4start:0.232177734375ms10^5start:4.281982421875ms10^6start:0.97509765625ms10^7start:8.960205078125ms10^8start:90.760986328125ms10^9start:887.587890625ms10^10start:13403.979248046875ms```可以得出如下结论:使用JavaScript如果想让其在1s内完成任务,数据规模的要求如下:*O(n^2)算法可以处理10^4级别的数据;*O(n)算法可以处理10^8/10^9级别的数据;*O(nlogn)算法可以处理10^7数据的级别;###测试自己算法的复杂度思路:将数据规模乘2,观察对应时间的增长关系。```jsfunctiontestComplexity(fn){for(leti=10,i<15,i++){consttotal=Math.pow(2,i)constmockArr=newArray(total)console.time('test')/*fn为算法函数,这里仅仅作为demo演示*/fn(mockArr)console.end('test')}}```###递归算法的时间复杂度分析####递归中进行单次递归调用单次递归算法的时间复杂度=深度*递归函数的时间复杂度>在单次递归算法调用中,深度就为递归函数执行次数```js/*求1+2+3+...+n*/functionsum(n){if(n===0)return0returnn+sum(n-1)}```比如在sum函数中,深度为n,递归函数的时间复杂度为1,所以该函数的时间复杂度为O(n)。####递归中进行多次递归调用递归中进行多次递归调用,建议画图来辅助分析。```jsfunctionf(n){if(n===0)return0returnf(n-1)+f(n-1)}```![](http://with.muyunyun.cn/5a60c47aeae5a5750c0146555584894a.jpg)![](http://with.muyunyun.cn/8290ad6f0cb7df00b2862c1d7996e54c.jpg)###link等差数列前n项和公式:```js*Sn=[n*(a1+an)]/2*Sn=a1*n+[n*(n-1)*d]/2*Sn=d/2*n²+(a1-d/2)*n```等比数列前n项和公式:![](http://with.muyunyun.cn/0a2db22818ecc056aa95e6ab75c8c903.jpg)排列组合公式:![](http://with.muyunyun.cn/468350f2ebca84bb44fc2108dc43efc0.jpg-400)"},{name:"dynamic_programming.md",path:"/Algorithm/algorithm/dynamic_programming.md",type:"file",mdconf:{abbrlink:"wjncoyei"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3084,extension:".md",relative:"/Algorithm/algorithm/dynamic_programming.md",isEmpty:!1,content:"\x3c!--abbrlink:wjncoyei--\x3e###什么是动态规划动态规划`将一个大问题拆分成若干个子问题`,同时保存子问题的答案,使得每个子问题只求解一次,最终获得原问题的答案。其本质也是`递归问题`。###动态规划是自下而上的递归通常自上而下的递归会产生`重复的函数调用栈`,以[递归](./recursive.md)章节中`斐波那契数列`为例,其使用了`自上而下`的思路来解决问题。>关于重复的函数调用栈解释:比如求斐波那契数列f(4)的值时,其转化为`f(3)+f(2)`,进而转化为`2f(2)+f(1)`,可以看到此时重复调用了f(2)。```jsfn(n)=fn(n-1)+fn(n-2)/\\fn(n-1)=fn(n-2)+fn(n-3)fn(n-2)=fn(n-3)+fn(n-4)/\\/\\............```动态规划则与其相反,其使用了`自下而上`的思路来解决问题。伪代码示意如下:```jsfn(n)=fn(1)+fn(2)+...+f(n)```具体实现:```jsvarfibonacci=function(n){constarr=[1,1]for(leti=2;i<=n;i++){arr[i]=arr[i-1]+arr[i-2]}returnarr[n]}```|递归方向|优点|缺点||:----------------:|:----------:|:----------------------:||自上而下|思路容易理顺|会出现函数栈重复的调用||自下而上(动态规划)|思路不易理顺|不会出现函数栈重复的调用|###动态规划解题思路1.确定子问题2.确定终止条件###案例——最小找零硬币数场景:假如有1,5,10,20美分的硬币```[1,5,10,20]4//找零数[1,1,1,1]//需4个1美分的硬币5//找零数[5]//需1个5美分的硬币36//找零数[20,10,5,1]//需20、10、5、1美分的硬币各一个```下面用代码来实现:```jsvarMinChange=function(changeType){this.changeType=changeTypethis.cache={}}MinChange.prototype.makeChange=function(amount){letmin=[]if(!amount){return[]}if(this.cache[amount]){//读缓存returnthis.cache[amount]}for(leti=0;i<this.changeType.length;i++){constleftAmount=amount-this.changeType[i]letnewMinif(leftAmount>=0){newMin=this.makeChange(leftAmount)//这一句是动态规划的提现}if(leftAmount>=0&&(newMin.length<min.length-1||!min.length)){//如果存在更小的找零硬币数,则执行后面语句min=[this.changeType[i]].concat(newMin)}}returnthis.cache[amount]=min}```下面进行测试:```jsvarminChange=newMinChange([1,5,10,20])minChange.makeChange(2)//[1,1]minChange.makeChange(5)//[5]minChange.makeChange(36)//[1,5,10,20]```"},{name:"greedy.md",path:"/Algorithm/algorithm/greedy.md",type:"file",mdconf:{abbrlink:"pkr9cdeo"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1468,extension:".md",relative:"/Algorithm/algorithm/greedy.md",isEmpty:!1,content:"\x3c!--abbrlink:pkr9cdeo--\x3e###贪心算法贪心算法是一种求近似解的思想。当能满足大部分最优解时就认为符合逻辑要求。###例子以[最小找零硬币数](https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/动态规划.md#案例--最小找零硬币数)这个案例为例,考虑使用贪心算法解题:比如当找零数为36时,从硬币数的最大值20开始填充,填充不下后再用10来填充,以此类推,找到最优解。```场景:假如有1,5,10,20美分的硬币36//找零数[20,10,5,1]//需20、10、5、1美分的硬币各一个```代码如下:```jsvarMinChange=function(changeType){this.changeType=changeType.sort((r1,r2)=>r2-r1)}MinChange.prototype.makeChange=function(amount){constarr=[]for(leti=0;i<this.changeType.length;i++){while(amount-this.changeType[i]>=0){arr.push(this.changeType[i])amount=amount-this.changeType[i]}}returnarr}```来测试下:```jsvarminChange=newMinChange([1,5,10,20])minChange.makeChange(36)//[20,10,5,1]```相比于动态规划算法,贪心算法实现得相对简单,而且也确实满足了大部分情况下的最优解。但是如下情况贪心算法就不满足了:```jsvarminChange=newMinChange([1,3,3,4])minChange.makeChange(6)//结果输出[4,1,1],而我们期望的是[3,3]```"},{name:"partition.md",path:"/Algorithm/algorithm/partition.md",type:"file",mdconf:{abbrlink:"nibxlyza"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1262,extension:".md",relative:"/Algorithm/algorithm/partition.md",isEmpty:!1,content:"\x3c!--abbrlink:nibxlyza--\x3e###partition划分算法算法思路:*第一步:找一个`枢纽值`pivot;*第二步:使用一个`指针去遍历数组`,小于pivot的值都放在数组左侧(pivot的右侧);*第三步:将pivot移到数组的`中间位置`,pivot左侧都是比pivot小的值,pivot右侧都是比pivot大的值;返回pivot的下标;比如针对数组`[5,9,2,7,3]`,分解算法步骤图:![](http://with.muyunyun.cn/f86a764f83302f8d5bba02024e0dcb04.jpg)###算法实现用了双指针。```js/*分区算法*/functionpartition(nums,left,right){constpivot=nums[left]//枢纽值letpos=left//用来记住最后枢纽值pivot应该置于的位置for(leti=left+1;i<=right;i++){if(nums[i]<pivot){pos++swap(nums,pos,i)}}swap(nums,pos,left)returnpos}/*交换位置nums数组,a,b为下标*/varswap=function(nums,a,b){consttmp=nums[a]nums[a]=nums[b]nums[b]=tmp}```测试```jsvartestArr=[5,9,2,7,3]varresult=partition(testArr,0,4)result===2console.log(testArr)//[3,2,5,7,9]```###partition算法的作用见leetcode215:数组中的第K个最大元素"},{name:"recursive.md",path:"/Algorithm/algorithm/recursive.md",type:"file",mdconf:{abbrlink:"4id99bn9"},birthtime:"2022-01-16",mtime:"2022-01-16",size:863,extension:".md",relative:"/Algorithm/algorithm/recursive.md",isEmpty:!1,content:"\x3c!--abbrlink:4id99bn9--\x3e###Optimizefibonaccisequence>题目:求斐波那契数列1,1,2,3,5,8,13,21,34,55,89...中的第n项斐波那契数列考察的是递归算法,但是要注意优化,探寻下面优化前后的代码片段。优化前:```jsletcount1=0functionfn(n){count1++if(n===1||n===2){return1}returnfn(n-1)+fn(n-2)}console.log(fn(20),count1)//676513529```优化后:```jsfunction_fn(n){if(cache[n]){returncache[n]}count2++if(n===1||n===2){return1}cache[n-1]=_fn(n-1)cache[n-2]=_fn(n-2)returncache[n-1]+cache[n-2]}letcount2=0functionfn(n){constcache={}return_fn(n)}console.log(fn(20),count2)//676520```小结:通过`记忆化缓存数据`,可以看到大大提高了运行性能。"},{name:"sort",path:"/Algorithm/algorithm/sort",children:[{name:"heap_sort.md",path:"/Algorithm/algorithm/sort/heap_sort.md",type:"file",mdconf:{abbrlink:"fkr4qedq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3767,extension:".md",relative:"/Algorithm/algorithm/sort/heap_sort.md",isEmpty:!1,content:"\x3c!--abbrlink:fkr4qedq--\x3e###HeapSort>prefixknowlege:[heap](https://github.com/MuYunyun/blog/blob/master/Algorithm/data_structure/heap.md)题目:给定数组`[5,2,7,3,1,8,4]`,使用堆排序对其进行升序排列。*步骤一:构造大顶堆;```js5↙↘convert27|因为子节点7大于5,因此作convert,结果如下↓7↙↘25|依此类推,构造出大顶堆。↓8↙↘37↙↘↙↘2154```*步骤二:取出顶部元素,将数组末尾元素移到顶部(目的是为了保持移除了顶部元素后的数组长度减少1);*步骤三:如果存在顶部元素的子元素大于顶部元素的情形,对调它们(维持maxheap);```js8↙↘37↙↘↙↘2154|取出顶部8,将数组末尾元素4移到顶部↓4↙↘(对调)37↙↘↙215|如果存在顶部元素的子元素大于顶部元素的情形,对调它们,重新构造maxheap.↓7↙↘34↙↘↙215|重复上述3个步骤,直到堆中的元素为空```下面来实现上述步骤:```jsvarheap_sort=function(arr){constresult=[]letmaterial=arrwhile(material.length>0){constmaxHeapArr=builtMaxHeap(material)result.unshift(maxHeapArr[0])maxHeapArr[0]=maxHeapArr[maxHeapArr.length-1]material=maxHeapArr.slice(0,maxHeapArr.length-1)}returnresult}//input:[5,2,7,3,1,8,4]//output:tobuildbigheap[8,3,7,2,1,5,4]varbuiltMaxHeap=function(arr){letparent,compareChildfor(leti=0;i<arr.length;i++){parent=Math.floor((i-1)/2)compareChild=iwhile(parent>=0){if(arr[parent]<arr[compareChild]){swap(arr,parent,compareChild)compareChild=parentparent=Math.floor((compareChild-1)/2)}else{parent=-1}}}returnarr}//swaptwovalueinarrvarswap=function(arr,pointOne,pointTwo){consttmp=arr[pointOne]arr[pointOne]=arr[pointTwo]arr[pointTwo]=tmp}```理想情况下,堆排序时间复杂度应为nlogn,空间复杂度应为1,上述实现的代码中没有达到这一复杂度的。参考社区代码后重写:*由len控制执行时机;*对arr进行操作不引入额外变量;```jsvarlenvarheap_sort=function(arr){buildMaxHeapify(arr)while(len>1){swap(arr,len-1,0)len--keepMaxHeapify(arr,0)}returnarr}/***tobuildmaxheapifyfrombottomtotop;*thelastsubscript'sparentsubscriptisMath.floor((len-1)/2)*/varbuildMaxHeapify=function(arr){len=arr.lengthfor(leti=Math.floor((len-1)/2);i>=0;i--){keepMaxHeapify(arr,i)}}/***tokeepmaxheap*/varkeepMaxHeapify=function(arr,i){constleft=2*i+1constright=2*i+2letmaxSubscript=iif(left<len&&arr[left]>arr[maxSubscript]){maxSubscript=left}if(right<len&&arr[right]>arr[maxSubscript]){maxSubscript=right}if(maxSubscript!==i){swap(arr,maxSubscript,i)keepMaxHeapify(arr,maxSubscript)}}/***swaptwovalueinarr*/varswap=function(arr,pointOne,pointTwo){consttmp=arr[pointOne]arr[pointOne]=arr[pointTwo]arr[pointTwo]=tmp}```"},{name:"merge_sort.md",path:"/Algorithm/algorithm/sort/merge_sort.md",type:"file",mdconf:{abbrlink:"fuj2lhrd"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1440,extension:".md",relative:"/Algorithm/algorithm/sort/merge_sort.md",isEmpty:!1,content:"\x3c!--abbrlink:fuj2lhrd--\x3e###归并排序思想1.取一个基准点,将数组不断拆分成左右两部分,直到数组的长度为1;2.对拆离的数组进行`比较合并`;演示如下:```js315231|523|1|5|213|251235```###代码实现```js//可以把它当成分函数varmergeSort=function(arr){//将数组arr拆分成[0,point)和[point,arr.length]两部分constpoint=arr.length/2constleft=arr.slice(0,point)constright=arr.slice(point,arr.length)if(arr.length===1){returnarr}returnmerge(mergeSort(left),mergeSort(right))}//可以当作是合函数functionmerge(left,right){letl=0//第一个数组的下标letr=0//第二个数组的下标constresult=[]while(l<left.length&&r<right.length){if(left[l]<right[r]){result.push(left[l])l++}else{result.push(right[r])r++}}while(l<left.length){result.push(left[l])l++}while(r<right.length){result.push(right[r])r++}returnresult}```###归并排序与快速排序的异同归并排序与快速排序都是用递归来实现的算法,都是分分合合的过程。区别在于归并排序在合的过程中进行排序,快速排序则在分的过程中进行排序。另外它们的时间复杂度都为O(nlogn)。"},{name:"quick_sort.md",path:"/Algorithm/algorithm/sort/quick_sort.md",type:"file",mdconf:{abbrlink:"t6c2k7h3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:838,extension:".md",relative:"/Algorithm/algorithm/sort/quick_sort.md",isEmpty:!1,content:"\x3c!--abbrlink:t6c2k7h3--\x3e###快速排序思想1.找到一个基准点;2.比该基准点值小的值移到其左侧,比该基准点大的值移到其右侧;3.遍历左侧的值和右侧的值,重复上述1,2操作;###代码实现```jsfunctionquickSort(arr){if(arr.length===0){return[]}constbasicValue=arr[Math.floor((arr.length-1)/2)]//随意取,这里取中间constleft=[]constright=[]for(leti=0;i<arr.length;i++){if(arr[i]<basicValue){left.push(arr[i])}if(arr[i]>basicValue){right.push(arr[i])}}returnquickSort(left).concat(basicValue,quickSort(right))}```###求快速排序时间复杂度先记住O(NlogN),[具体证明](https://www.zhihu.com/question/22393997),somedaytounderstand,o(╯□╰)o"},{name:"selection_sort.md",path:"/Algorithm/algorithm/sort/selection_sort.md",type:"file",mdconf:{abbrlink:"opuodfap"},birthtime:"2022-01-16",mtime:"2022-01-16",size:511,extension:".md",relative:"/Algorithm/algorithm/sort/selection_sort.md",isEmpty:!1,content:"\x3c!--abbrlink:opuodfap--\x3e###选择排序思想1.遍历数组选择最小值与数组第一位交换;2.遍历剩下的数组,将最小值与数组第二位交换;3.依次类推,完成排序;###代码实现```jsvarchooseSort=function(arr){for(letx=0;x<arr.length;x++){letmin=xfor(lety=x+1;y<arr.length;y++){if(arr[y]<arr[min]){min=y}}lettmp=arr[x]arr[x]=arr[min]arr[min]=tmp}returnarr}```"}],type:"directory",size:6556}],type:"directory",size:22395},{name:"data_structure",path:"/Algorithm/data_structure",children:[{name:"binary_tree.md",path:"/Algorithm/data_structure/binary_tree.md",type:"file",mdconf:{abbrlink:"qykpal2y"},birthtime:"2022-01-16",mtime:"2022-01-16",size:8492,extension:".md",relative:"/Algorithm/data_structure/binary_tree.md",isEmpty:!1,content:"\x3c!--abbrlink:qykpal2y--\x3e###二叉树![](http://with.muyunyun.cn/c3bc86f87907fedaeba86b0f5b96a71a.jpg-300)这棵树中最多有两个分支,因此是`二叉树`。*`根节点`:一棵树最顶部的节点*`内部节点`:在它上面还有其它内部节点或者叶节点的节点*`叶节点`:处于一棵树根部的节点*`子树`:由树中的内部节点和叶节点组成###概念延伸*`完全二叉树`(compeletebinarytree):*除了最后一行都满;*在最后一行不满的情况下不能只存有右子树而没有左子树;```js1↙↘23↙4```*`满二叉树`(fullbinarytree):*每一行都满;```js1↙↘23↙↘↙↘4567```*`二叉搜索树`(BinarySearchTree)*左侧子节点的数字小于父节点,右侧子节点的数字大于父节点```js11↙↘715↙↘↙↘891320```*`平衡二叉树`二叉收缩树最好的情况下查找效率是比较高,比如上图中时间复杂度为`O(logn)`,其访问性能近似于二分查找,但最差时时间复杂度为`O(n)`,如下示意:```js7↘8↘9↘11↘13↘15↘20```基于此需要在二叉搜索树基础上做一下平衡,```js78↘平衡后↙↘8-------\x3e79↘9```###二叉搜索树的实现```jsfunctionBinarySearchTree(){functionNode(key){this.key=keythis.left=nullthis.right=null}letroot=null//插入元素//实现思路:至顶向下插入,先判断顶点是否为空；顶点为空则直接在该处插入,若不为空,则通过比较顶点的key和插入元素的key判断该插入到顶点的左侧还是右侧,后面进行如上递归this.insert=function(key){constnode=newNode(key)if(root===null){root=node}else{insertNode(root,node)}functioninsertNode(parent,node){if(parent.key>node.key){if(parent.left===null){parent.left=node}else{insertNode(parent.left,node)}}elseif(parent.key<node.key){if(parent.right===null){parent.right=node}else{insertNode(parent.right,node)}}}}//中序遍历this.inOrderTraverse=function(cb){inOrderTraverse(root,cb)functioninOrderTraverse(node,cb){if(node){inOrderTraverse(node.left,cb)cb(node.key)inOrderTraverse(node.right,cb)}}}//先序遍历this.preOrderTraverse=function(cb){preOrderTraverse(root,cb)functionpreOrderTraverse(node,cb){if(node){cb(node.key)preOrderTraverse(node.left,cb)preOrderTraverse(node.right,cb)}}}//后序遍历this.postOrderTraverse=function(cb){postOrderTraverse(root,cb)functionpostOrderTraverse(node,cb){if(node){postOrderTraverse(node.left,cb)postOrderTraverse(node.right,cb)cb(node.key)}}}//最大值:思路最右边this.max=function(){letmaxResult={}functiongetMax(node){if(node&&node.right){maxResult=node.rightgetMax(node.right)}}getMax(root)returnmaxResult.key}//最小值:思路最左边this.min=function(){letminResult={}functiongetMin(node){if(node&&node.left){minResult=node.leftgetMin(node.left)}}getMin(root)returnminResult.key}//查找指定元素this.search=function(key){constsearchKey=function(node){if(!node){returnfalse}if(key>node.key){returnsearchKey(node.right)}elseif(key<node.key){returnsearchKey(node.left)}else{returntrue}}returnsearchKey(root)}//移除指定key值this.remove=function(key){constremoveKey=function(node,key){if(key<node.key){//①如果key值在传入节点的左边node.left=removeKey(node.left,key)returnnode}elseif(key>node.key){//②如果key值在传入节点的右边node.right=removeKey(node.right,key)returnnode}else{//③如果找到了key值if(node.left===null&&node.right===null){//删除的节点为根节点node=nullreturnnode}if(node.left===null){//删除的节点下有一个分支node=node.rightreturnnode}elseif(node.right===null){node=node.leftreturnnode}constminNode=findMinNode(node.right)//删除的节点下有两个分支node.key=minNode.keynode.right=removeKey(node.right,minNode.key)returnnode}}//查找最小的节点constfindMinNode=function(node){if(node.left){returnfindMinNode(node.left)}else{returnnode}}removeKey(root,key)}}vartree=newBinarySearchTree()tree.insert(11)tree.insert(7)tree.insert(15)tree.insert(5)tree.insert(3)tree.insert(9)tree.insert(8)tree.insert(10)tree.insert(13)tree.insert(12)tree.insert(14)tree.insert(20)tree.insert(18)tree.insert(25)tree.insert(6)```###三种遍历方式的不同*中序遍历:可用于`二叉搜索树的排序`![](http://with.muyunyun.cn/ceeb68f801304f9910073708dd35ae64.jpg-300)*先序遍历:可用于`打印结构化的文档`![](http://with.muyunyun.cn/65df3e9414f594107d95127f8ab5a9a1.jpg-300)*后序遍历:可用于查看文件夹目录![](http://with.muyunyun.cn/212607e3b24b52c0df959902ed8e4b1f.jpg-300)>三者都为DFS,本质在于节点的访问时机不同。三种遍历的实现方式大同小异,可在上面代码中观察到实现的差异。如下是Leetcode中对应三种不同遍历方式的题目:*[BinaryTreePreorderTraversal](https://github.com/MuYunyun/blog/blob/master/LeetCode/144.Binary_Tree_Preorder_Traversal/README.md)*[BinaryTreeInorderTraversal](https://github.com/MuYunyun/blog/blob/master/LeetCode/94.Binary_Tree_Inorder_Traversal/README.md)*[BinaryTreePostorderTraversal](https://github.com/MuYunyun/blog/blob/master/LeetCode/145.Binary_Tree_Postorder_Traversal/README.md)###remove的几种情况remove方法是二叉查找树中相对复杂的实现。思路仍然是递归。如果要删除的key在传入节点的左侧,则递归调用removeKey(node.left,key)；如果要删除的key在传入节点的右侧,则递归调用removeKey(node.right,key)；如果要删除的key与传入节点相等,有如下三种情况:①:删除的节点为根节点![](http://with.muyunyun.cn/65bd1b2b99db8a342423733d0480a7b6.jpg-300)②:删除的节点下有一个分支![](http://with.muyunyun.cn/78707683d0498daa0115d445df11f83e.jpg-300)③:删除的节点下有两个分支这里的思路是找到当前节点的右分支中最小的节点,然后将该节点代替当前节点,同时移除当前节点的右分支中最小的节点![](http://with.muyunyun.cn/4107c561ed1134093333e1b16c7350f4.jpg-300)###测试用例```jsvartree=newBinarySearchTree()tree.insert(11)tree.insert(7)tree.insert(15)tree.insert(5)tree.insert(3)tree.insert(9)tree.insert(8)tree.insert(10)tree.insert(13)tree.insert(12)tree.insert(14)tree.insert(20)tree.insert(18)tree.insert(25)tree.insert(6)varcb=(key)=>console.log(key)tree.inOrderTraverse(cb)//中序遍历:356789101112131415182025tree.preOrderTraverse(cb)//先序遍历:117536981015131214201825tree.postOrderTraverse(cb)//后序遍历:365810971214131825201511tree.max()//25tree.max()//3tree.search(6)//truetree.search(1)//false```"},{name:"dictionary.md",path:"/Algorithm/data_structure/dictionary.md",type:"file",mdconf:{abbrlink:"c1nhctpd"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2484,extension:".md",relative:"/Algorithm/data_structure/dictionary.md",isEmpty:!1,content:"\x3c!--abbrlink:c1nhctpd--\x3e###字典类似于集合,字典也是一种`无重复元素`,`无顺序`的数据结构。区别在于在集合中,我们以`[值,值]`的形式存储;在字典中,我们以`[键,值]`的形式存储;集合的知识点可以阅读[集合](https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/集合.md)ES6引入的Map就是字典的数据类型。####简易版Map实现我们来动手实现一个简易版的Map,它拥有的api如下:```jsfunctionMap(){this.items={}this.size=0}Map.prototype.has=function(key){for(letiinthis.items){if(this.items.hasOwnProperty(i)){returntrue}}returnfalse}Map.prototype.delete=function(key){if(this.has(key)){delete(this.items[key])this.size--returntrue}returnfalse}Map.prototype.set=function(key,value){this.items[key]=value//这里是不严谨的实现this.size++}Map.prototype.get=function(key){returnthis.items[key]}Map.prototype.clear=function(){this.items={}this.size=0}Map.prototype.values=function(){constarr=[]Object.keys(this.items).forEach(r=>{arr.push(this.items[r])})returnarr}```###创建一个Map对象```js//方式一constmap1=newMap()map.set('a',1)//方式二constmap2=newMap([['a',1]])```###Map和WeakMap的区别Map和WeakMap相差Weak这个单词,本质知识点是对对象的直接引用(WeakMap)。它这个点造成的差异整理如下:*Map的key范围更广,WeakMap的key只能为对象;*Map的key可以枚举,WeakMap的key不能枚举;*垃圾回收相关,见如下例子;```jsvarmap=newMap();varweakmap=newWeakMap();(function(){vara={x:12}varb={y:12}map.set(a,1)weakmap.set(b,2)})()```解析:在这个例子中,IIFE执行完后,垃圾回收机制会回收常量a,b。WeakMap可以类比成直接对b的引用,Map里可以类比成在其内部对a作了层拷贝。所以map依然保持着相应的key值的对象,而weakmap的key值的对象以被回收(这步认为是垃圾回收机制做的)。它们的差异如下图所示:```js//mapMap(1){{…}=>1}size:(...)__proto__:Map[[Entries]]:Array(1)0:{Object=>1}key:{x:12}value:1//weakmapWeakMap{}__proto__:WeakMap[[Entries]]:Array(0)length:0```"},{name:"graph.md",path:"/Algorithm/data_structure/graph.md",type:"file",mdconf:{abbrlink:"c3ns7c83"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6579,extension:".md",relative:"/Algorithm/data_structure/graph.md",isEmpty:!1,content:"\x3c!--abbrlink:c3ns7c83--\x3e###图图是一种`非线性数据结构`。它的表示有以下几种:1.邻接矩阵2.邻接表3.关联矩阵*`邻接矩阵`邻接矩阵是表示图的常用方法,`用二维数组来表示`,数组的每个下标对应每个点。当两个点有连线则二维数组的值为1,否则二维数组的值为0。但是这种表示方法会照成存储空间的浪费(因存在大量0)。![](http://with.muyunyun.cn/79f5520b6028aa16491649c846430b04.jpg-300)*`邻接表`如下图:`左侧为存储的顶点,右侧为与之想对应的点`,后文会采用这种方式实现图。![](http://with.muyunyun.cn/0a1d5ab4a96e83dca8c7aafc948e2f4b.jpg-300)*`关联矩阵`行表示点,列表示边。![](http://with.muyunyun.cn/48a4bf7ee32827ad4d9016f24a8ffca5.jpg-300)```jsfunctionGraph(){this.topPointArr=[]//存储顶点,笔者认为图的顶点是不会重复的this.edgeMap=newMap()//存储边}//往图里添加顶点Graph.prototype.addTopPoint=function(point){this.topPointArr.push(point)this.edgeMap.set(point,[])}//往指定的点添加相邻的点Graph.prototype.addEdge=function(point1,point2){this.edgeMap.get(point1).push(point2)this.edgeMap.get(point2).push(point1)//这里默认没有方向,所以两个点互相指向}//将图给打印出来Graph.prototype.log=function(){letstr=''letneighbourfor(letiofthis.topPointArr){str+=i+'->'neighbour=this.edgeMap.get(i).join('')str+=neighbour+'\\n'}returnstr}```按之前邻接表的图示,跑如下测试用例:```jsvargraph=newGraph()vartopArr=['A','B','C','D','E','F','G','H','I']for(letioftopArr){graph.addTopPoint(i)}graph.addEdge('A','B')graph.addEdge('A','C')graph.addEdge('A','D')graph.addEdge('B','E')graph.addEdge('B','F')graph.addEdge('C','D')graph.addEdge('C','G')graph.addEdge('D','G')graph.addEdge('D','H')graph.addEdge('E','I')```使用自定义打印函数graph.log(),打印结果如下,结果符合预期```jsA->BCDB->AEFC->ADGD->ACGHE->BIF->BG->CDH->DI->E```###广度优先遍历(BFS)顾名思义,广度优先即横向优先,英文名为`breadthfirstsearch`(BFS),它示意图如下:![](http://with.muyunyun.cn/4547193af1645f33359e875559092c6b.jpg-200)思想:用到了`队列`的思想。思路如下:(标白:未发现;标灰:已找寻)*创建队列u,将标灰的顶点插入队列;*若队列u不为空;*从队列取出值v;*将v的相邻节点标灰并插入队列u;代码中用到队列相关的方法可参考[队列](https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/队列.md)<details><summary>Queue实现</summary>```jsfunctionQueue(){this.items=[]}Queue.prototype.push=function(item){this.items.push(item)}Queue.prototype.shift=function(){returnthis.items.shift()}Queue.prototype.isEmpty=function(){returnthis.items.length===0}Queue.prototype.size=function(){returnthis.items.length}Queue.prototype.clear=function(){this.items=[]}```</details>```jsGraph.prototype.bfs=function(v,callback){constobj={}for(letiofthis.topPointArr){//初始化颜色obj[i]='white'}constqueue=newQueue()obj[v]='gray'queue.push(v)letshiftQueue,neighbourwhile(!queue.isEmpty()){shiftQueue=queue.shift()neighbour=this.edgeMap.get(shiftQueue)for(letiofneighbour){if(obj[i]==='white'){obj[i]='gray'queue.push(i)}}if(callback){callback(shiftQueue)}}}```检验完成的bfs函数,进行如下调用,```jsgraph.bfs('A',(shiftQueue)=>{console.log(shiftQueue)})```打印结果为`ABCDEFGHI`,符合预期。####广度优先遍历求最短路径在上述bfs函数实现的基础上,加入两个变量分别存储距离以及最短路径上先前的点```jsGraph.prototype.BFS=function(v){constobj={}constd={}//新加入的变量存储距离constprev={}//新加入的变量存储最短路径上先前的点for(letiofthis.topPointArr){//初始化颜色obj[i]='white'd[i]=0prev[i]=null}constqueue=newQueue()obj[v]='gray'queue.push(v)letshiftQueue,neighbourwhile(!queue.isEmpty()){shiftQueue=queue.shift()neighbour=this.edgeMap.get(shiftQueue)for(letiofneighbour){if(obj[i]==='white'){obj[i]='gray'queue.push(i)d[i]=d[shiftQueue]+1//这个地方卡主了~~~,思路:第二行的点距离第一行的点相差为1,第三行的点距离第二行的点相差为1,以此类推。prev[i]=shiftQueue}}}return{distance:d,prev:prev}}```调用`graph.BFS('A')`,得如下结果:```js{distance:{A:0,B:1,C:1,D:1,E:2,F:2,G:2,H:2,I:3}prev:{A:null,B:\"A\",C:\"A\",D:\"A\",E:\"B\",F:\"B\",G:\"C\",H:\"D\",I:\"E\"}}```接下来我们处理上述返回的prev将最短路径打印出来:```jsGraph.prototype.logMinPath=function(v){const{distance,prev}=this.BFS(v)letpath=''constarr=[]Object.keys(distance).map(r=>{path=rwhile(prev[r]){//终止条件为prev中值为null时path=prev[r]+'-'+pathr=prev[r]}arr.push(path)})returnarr.join('\\n')}```调用`graph.logMinPath('A')`,打印结果如下:```AA-BA-CA-DA-B-EA-B-FA-C-GA-D-HA-B-E-I```###深度优先遍历(DFS)深度优先遍历用到了栈的思想。英文名为`depthfirstsearch`(DFS),其示意图如下:![](http://with.muyunyun.cn/b4fa9641c9f086cf2702f868b283dbee.jpg-200)代码实现如下:```jsGraph.prototype.dfs=function(v,callback){constobj={}for(letiofthis.topPointArr){//初始化颜色obj[i]='white'}letneighbourconstthat=thisconstfind=function(v,color,cb){color[v]='gred'if(cb){cb(v)}neighbour=that.edgeMap.get(v)for(letiofneighbour){if(color[i]==='white'){find(i,color,cb)}}}find(v,obj,callback)}```进行如下函数调用```jsgraph.dfs('A',(shiftQueue)=>{console.log(shiftQueue)//打印结果:ABEIFCDGH})```"},{name:"hash_table.md",path:"/Algorithm/data_structure/hash_table.md",type:"file",mdconf:{abbrlink:"nzpqsh6o"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6430,extension:".md",relative:"/Algorithm/data_structure/hash_table.md",isEmpty:!1,content:"\x3c!--abbrlink:nzpqsh6o--\x3e###哈希表哈希表算是一种特殊的字典。它在实际的键值和存入的哈希值之间存在一层映射。如下例子:![](http://with.muyunyun.cn/963b04e081590a419bfc97c30d915a01.jpg-300)上图中通过哈希函数将键值转换成哈希值,然后再将哈希值指向具体的值。接着我们来构造HashTable类,代码如下:```jsfunctionHashTable(){this.items={}}//哈希算法functionkeyToHash(key){lethash=0for(leti=0;i<key.length;i++){hash+=key.charCodeAt(i)}hash=hash%37//为了避免hash的值过大returnhash}HashTable.prototype.put=function(key,value){consthash=keyToHash(key)this.items[hash]=value}HashTable.prototype.get=function(key){returnthis.items[keyToHash(key)]}HashTable.prototype.remove=function(key){delete(this.items[keyToHash(key)])}```跑如下测试用例:```jsvartest=newHashTable()test.put('ab','ab@gmail.com')test.put('cd','cd@gmail.com')test.put('ef','ef@gmail.com')test.get('cd')//\"cd@gmail.com\"test.remove('cd')test.get('cd')//undefined```但是这样子实现的哈希表有一个问题,比如进行如下调用就会产生冲突:```jstest.put('ab','ab@gmail.com')test.put('ba','ba@gmail.com')//ab和ba的哈希值相同,后者会把前者覆盖```接着我们来尝试解决该问题####链表法顾名思义,这个方法就是在每个哈希值上引人链表。如下图所示:![](http://with.muyunyun.cn/bd07ad706f4d494a9df8fb63621a6036.jpg-200)对之前put、get、remove方法做如下修改,其中使用到的链表的代码参考之前的[链表](https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/链表.md#链表的实现)```jsfunctionHashTable(){this.items={}}functionkeyToHash(key){lethash=0for(leti=0;i<key.length;i++){hash+=key.charCodeAt(i)}hash=hash%37returnhash}//存入链表的值functionNode(key,value){this.key=keythis.value=value}//添加接口HashTable.prototype.put=function(key,value){consthash=keyToHash(key)if(!this.items[hash]){this.items[hash]=newLinkedList()//这里将之前实现的链表拿来使用}letlinkList=this.items[hash].getHead()letifAppend=truewhile(linkList){//以下为append逻辑if(linkList.element.key===key){//key值重复逻辑linkList.element=newNode(key,value)ifAppend=falsebreak}linkList=linkList.next}if(ifAppend){this.items[hash].append(newNode(key,value))}}HashTable.prototype.has=function(hash){if(this.items.hasOwnProperty(hash)){returntrue}returnfalse}//获取接口HashTable.prototype.get=function(key){consthash=keyToHash(key)if(this.has(hash)){letcurrent=this.items[hash].getHead()while(current){if(current.element.key===key){returncurrent.element.value}current=current.next}}returnundefined}//移除接口HashTable.prototype.remove=function(key){consthash=keyToHash(key)if(this.has(hash)){letcurrent=this.items[hash].getHead()while(current){if(current.element.key===key){this.items[hash].remove(current.element)returntrue}current=current.next}returnfalse}returnfalse}```接着来测试下完成的哈希表,测试用例如下:```jsvartest=newHashTable()test.put('ab','ab@gmail.com')test.put('ba','ba~@gmail.com')test.put('ba','ba@gmail.com')//验证重复字段test.put('cd','cd@gmail.com')test.get('ab')//ab@gmail.comtest.get('ba')//ba@gmail.comtest.get('cd')//cd@gmail.comtest.remove('ba')test.get('ba')//undefined```####线性探查法思想:如果当前所要存储的hash值已存在于存储空间,则判断存储空间里是否已存储hash+1,若无则存储hash+1,若有则判断存储空间里是否已存储hash+2,依次类推。参考图如下:![](http://with.muyunyun.cn/9212ee6899520f888f774ca7a2dc0519.jpg-200)接着进入代码实现环节,同样是修改put、get、remove方法:```jsfunctionHashTable(){this.items={}}//哈希算法functionkeyToHash(key){lethash=0for(leti=0;i<key.length;i++){hash+=key.charCodeAt(i)}hash=hash%37//为了避免hash的值过大returnhash}//后面会用之锁定functionNode(key,value){this.key=keythis.value=value}HashTable.prototype.put=function(key,value){lethash=keyToHash(key)while(this.items[hash]){//当this.items[index]不存在时终止if(this.items[hash].key===key){//对已存在的key值进行覆盖break}hash++}this.items[hash]=newNode(key,value)}HashTable.prototype.has=function(hash){if(this.items.hasOwnProperty(hash)){returntrue}returnfalse}HashTable.prototype.get=function(key){lethash=keyToHash(key)if(this.items[hash]){while(this.items[hash].key!==key){//找到存储的indexhash++}returnthis.items[hash].value}returnundefined}HashTable.prototype.remove=function(key){lethash=keyToHash(key)if(this.has(hash)){while(this.items[hash].key!==key){//找到存储的indexhash++}this.items[hash]=undefinedreturntrue}returnfalse}```接着跑如下测试用例:```jsvartest=newHashTable()test.put('ab','ab@gmail.com')test.put('ba','ba@gmail.com')test.put('ab','ab@gmail.com')test.get('ab')//'ab@gmail.com'test.remove('ab')test.get('ab')//undefined```####更好的哈希函数另外在本文实现的哈希函数中,性能不是特别好（因为容易产生相同的哈希值）,给出一段更好的散列函数的实现,数学知识的原理暂时不深究了```js//哈希算法functionkeyToHash(key){lethash=5381//取一个素数for(leti=0;i<key.length;i++){hash=hash*33+key.charCodeAt(i)}hash=hash%1013//除以另外一个素数returnhash}```####哈希表的应用笔者认为业务中,哈希表的数据结构能应用需要加密处理的数据存储中。"},{name:"heap.md",path:"/Algorithm/data_structure/heap.md",type:"file",mdconf:{abbrlink:"6vgvbh3e"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4736,extension:".md",relative:"/Algorithm/data_structure/heap.md",isEmpty:!1,content:"\x3c!--abbrlink:6vgvbh3e--\x3e###Heap堆是通过一维数组来实现的树结构。###堆节点的访问在数组起始位置为0的情形中:*父节点i的左子节点在位置`(2i+1)`;*父节点i的右子节点在位置`(2i+2)`;*子节点i的父节点在位置`Math.floor((i-1)/2)`;###MaxHeap&&MinHeap*`MaxHeap`:每个节点都`大于等于左右子节点`的值。用于`升序排序`。见[heap_sort](https://github.com/MuYunyun/blog/blob/master/Algorithm/algorithm/sort/heap_sort.md)```js8↙↘37↙↘↙↘2154```*`MinHeap`:每个节点都`小于等于左右子节点`的值。用于`降序排序`。```js1↙↘24↙↘↙↘5387```###PriorityQueueBasedHeapIt'susuallytousethetwowayscalledenqueueanddequeue:*`enqueue(value)`:insertvalueintotheheap;*Becausethevalueisinsertedintothelastheap,we'lluse`siftup`toadjustposition;```js10↙↘37|↓`enqueue(9)`10↙↘37↙siftup9|↓10↙↘97↙siftup3```*`dequeue()`:topickthesmallestorthebiggestelementfromtheheap;*It'llswaptheendestelementwiththefirstelement,andthenkeeptheheaplengthreduce1.Ifso,onlydoonce`siftdown`operationinthefirstelementtoheapify.```js8↙↘37↙↘↙↘2154|pick8,move4totop↓4↙↘(swap)37↙↘↙215|siftdown4torebuildmaxheap.↓7↙↘34↙↘↙215|redothelaststeps↓7↙↘35↙↘↙214``````jsvarlen/***tobuildmaxheapifyfrombottomtotop;*thelastsubscript'sparentsubscriptisMath.floor((len-1)/2)*/varbuildMaxHeapify=function(arr){len=arr.lengthfor(leti=Math.floor((len-1)/2);i>=0;i--){siftDown(arr,i)}returnarr}/***Insertavalueintoheap.It'sanoperationcalledsiftup.*/varenqueue=function(arr,value){arr.splice(len,0,value)len++siftUp()}/***tokeepmaxheap,it'sanoperationcalledsiftup.*/varsiftUp=function(){letenqueueValSubscript=len-1letparent=Math.floor(enqueueValSubscript/2)while(parent>0&&arr[parent]<arr[enqueueValSubscript]){swap(arr,parent,enqueueValSubscript)enqueueValSubscript=parentparent=Math.floor(enqueueValSubscript/2)}}/**topickthesmallestorthebiggestelementfromtheheapandreturnit;*Thent'llswaptheendestelementwiththefirstelement,andthenkeepthe*heaplengthreduceone.Ifso,onlydooncesiftdownoperationinthefirstelementtokeepheapify.*/vardequeue=function(){constmaxValue=arr[0]swap(arr,len-1,0)len--siftDown(arr,0)returnmaxValue}/***tokeepmaxheap,it'sanoperationcalledsiftdown.*/varsiftDown=function(arr,i){constleft=2*i+1constright=2*i+2letmaxSubscript=iif(left<len&&arr[left]>arr[maxSubscript]){maxSubscript=left}if(right<len&&arr[right]>arr[maxSubscript]){maxSubscript=right}if(maxSubscript!==i){swap(arr,maxSubscript,i)siftDown(arr,maxSubscript)}}//swaptwovalueinarrvarswap=function(arr,pointOne,pointTwo){consttmp=arr[pointOne]arr[pointOne]=arr[pointTwo]arr[pointTwo]=tmp}```Testcaseone:```jsinput:vararr=[5,2,7,3,1,8,4]buildMaxHeapify(arr)//[8,3,7,2,1,5,4]88↙↘enqueue(arr,6)↙↘37---------------\x3e67↙↘↙↘↙↘↙↘21543154↙27return8↙↘dequeue()65----------------\x3e↙↘↙↘3124```"},{name:"list.md",path:"/Algorithm/data_structure/list.md",type:"file",mdconf:{abbrlink:"z4nj8u3b"},birthtime:"2022-01-16",mtime:"2022-01-16",size:6543,extension:".md",relative:"/Algorithm/data_structure/list.md",isEmpty:!1,content:"\x3c!--abbrlink:z4nj8u3b--\x3e链表对应生活中的例子:火车(一节带动一节,必要时可以拆卸或添加一节车厢)链表通过指针连接,如果需要插入或删除只需改变相应指针指向的目标就行。这也是链表相比较于数组最大的优点,不用移动元素就能很轻松地添加删除元素。如果有大量的数据要插入或删除可以考虑使用链表这种数据结构。###链表的实现![](http://with.muyunyun.cn/7a3ef4c64503a167076422b377de3f44.jpg-300)```jsvarLinkedList=function(){constNode=function(element){this.element=elementthis.next=null}lethead=nullletcurrentletlength=0//在链表末尾加入元素this.append=function(element){constnode=newNode(element)if(head===null){//插入第一个链表head=node}else{current=headwhile(current.next){//找到最后一个节点current=current.next}current.next=node}length++}//移除指定位置元素this.removeAt=function(position){if(position>-1&&position<length){letpreviousletindex=0if(position===0){//如果是第一个链表的话,特殊对待head=head.next}else{current=headwhile(index<position){//循环找到当前要删除元素的位置previous=currentcurrent=current.nextindex++}previous.next=current.next}length--}}//在指定位置加入元素this.insert=function(position,element){constnode=newNode(element)letindex=0letcurrent,previousif(position>-1&&position<length+1){if(position===0){//在链表最前插入元素current=headhead=nodehead.next=current}else{current=headwhile(index<position){//同removeAt逻辑,找到目标位置previous=currentcurrent=current.nextindex++}previous.next=node//在目标位置插入相应元素node.next=current}length++}}//链表中是否含有某个元素,如果有的话返回相应位置,无的话返回-1this.indexOf=function(element){letindex=0current=headwhile(index<length){if(current.element===element){returnindex}current=current.nextindex++}return-1}//移除某元素this.remove=function(element){constposition=this.indexOf(element)this.removeAt(position)}//获取大小this.size=function(){returnlength}//获取最开头的链表this.getHead=function(){returnhead}//是否为空this.isEmpty=function(){returnlength===0}//打印链表元素this.log=function(){current=headletstr=current.elementwhile(current.next){current=current.nextstr=str+''+current.element}returnstr}}//测试用例varlinkedList=newLinkedList()linkedList.append(5)linkedList.append(10)linkedList.append(15)linkedList.append(20)linkedList.log()//'5101520'linkedList.removeAt(1)linkedList.log()//'51520'linkedList.insert(1,10)linkedList.log()```###双向链表单向链表如果错过了某次查询就得重头开始重新查找,双向链表进行了升级,除了可以向后查找,同时也支持向前查找![](http://with.muyunyun.cn/1d97c4d5d071560966357df5ab2bfd16.jpg-300)```jsvarDbLinkedList=function(){constNode=function(element){this.element=elementthis.next=nullthis.prev=null}lethead=nulllettail=nullletcurrent,previousletlength=0//指定任意位置插入元素this.insert=function(position,element){letindex=0constnode=newNode(element)if(position>-1&&position<length+1){if(position===0){//①在开头插入元素if(head===null){//链表内元素为空head=nodetail=node}else{//链表内存在元素current=headhead=nodehead.next=currentcurrent.prev=head}}elseif(position===length){//②在末尾插入元素current=tailtail=nodecurrent.next=tailtail.prev=current}else{//③在链表中插入元素current=headwhile(index<position){//找到需插入节点的位置previous=currentcurrent=current.nextindex++}previous.next=nodenode.next=currentcurrent.prev=nodenode.prev=previous}length++}}//删除指定位置的元素this.removeAt=function(position){letindex=0if(position>-1&&position<length){if(position===0){//删除链表最开头的元素if(length===1){head=nulltail=null}else{current=headhead=current.nexthead.prev=current.prev}}elseif(position===length-1){//删除链表最末尾的元素current=tailtail=current.prevtail.next=current.next}else{//删除链表中的元素current=headwhile(index<position){previous=currentcurrent=current.nextindex++}previous.next=current.nextcurrent.next.prev=previous}length--}}this.log=function(){current=headletstr=current.elementwhile(current.next){current=current.nextstr=str+''+current.element}returnstr}}vardbLinkedList=newDbLinkedList()dbLinkedList.insert(0,5)dbLinkedList.insert(1,10)dbLinkedList.insert(2,15)dbLinkedList.insert(3,20)dbLinkedList.insert(4,25)dbLinkedList.log()//\"510152025\"dbLinkedList.removeAt(4)dbLinkedList.removeAt(0)dbLinkedList.removeAt(1)dbLinkedList.log()//\"1020\"```此外还有循环链表,和上述代码类似,在此省略。"},{name:"queue.md",path:"/Algorithm/data_structure/queue.md",type:"file",mdconf:{abbrlink:"87unmb8q"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2739,extension:".md",relative:"/Algorithm/data_structure/queue.md",isEmpty:!1,content:"\x3c!--abbrlink:87unmb8q--\x3e###队列队列的核心是FIFO,下面实现一个简单的队列:```jsfunctionQueue(){this.items=[]}Queue.prototype.push=function(item){this.items.push(item)}Queue.prototype.shift=function(){returnthis.items.shift()}Queue.prototype.isEmpty=function(){returnthis.items.length===0}Queue.prototype.size=function(){returnthis.items.length}Queue.prototype.clear=function(){this.items=[]}```###队列知识延伸使用队列的一个典型场景是`树的广度遍历(BFS)`,以下从leetcode中摘录了一些题目:*[BinaryTreeLevelOrderTraversal](https://github.com/MuYunyun/blog/blob/master/LeetCode/102.Binary_Tree_Level_Order_Traversal/README.md)###两种特殊队列####最小优先队列最小优先队列在生活中的例子:比如普通用户上医院需要排队挂号,但是具有VIP的用户能'插队'办理业务。用代码实现如下:```js//继承Queue类constPriorityQueue=function(){Queue.apply(this)}PriorityQueue.prototype=Object.create(Queue.prototype)PriorityQueue.prototype.constructor=PriorityQueue//修改push方法PriorityQueue.prototype.push=function(item,level){if(this.isEmpty()){this.items.push({item,level})}else{letadd=truefor(leti=0;i<this.size();i++){if(level<this.items[i].level){add=falsethis.items.splice(i,0,{item,level})return}}add&&this.items.push({item,level})}}PriorityQueue.prototype.print=function(){for(letobjofthis.items){console.log(obj.item)}}``````js//调用constqueue=newPriorityQueue()queue.push('张三',2)queue.push('李四',1)queue.push('赵五',1)queue.print()//李四赵五张三```可以看到具有相同权限的李四和赵五依旧遵守队列的先进先出原则,同时排在了张三的前面。####循环队列循环队列以击鼓传花为例,代码实现如下:```jsconstdrumGame=function(names,number){constqueue=newQueue()for(leti=0;i<names.length;i++){queue.push(names[i])}while(queue.size()>1){for(leti=0;i<number;i++){queue.push(queue.shift())//这句是循环队列的核心}constloser=queue.shift()console.log(loser+'出局')}returnqueue.shift()//留下的最后一个就是胜利者}constnames=['John','Jack','Camila','Ingrid','Carl']constwinner=drumGame(names,7)//假设每轮传花7次console.log('胜利者是:'+winner)//Camila出局//Jack出局//Carl出局//Ingrid出局//胜利者是:John```"},{name:"set.md",path:"/Algorithm/data_structure/set.md",type:"file",mdconf:{abbrlink:"yqpmr5zs"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1995,extension:".md",relative:"/Algorithm/data_structure/set.md",isEmpty:!1,content:"\x3c!--abbrlink:yqpmr5zs--\x3e###集合集合是一种`无重复元素,无顺序`的数据结构。ES6引入的Set就是集合。###简易版Set实现我们来动手实现一个简易版的Set,它拥有的api如下:```jsadd(value)delete(value)has(value)clear()size``````js//代码如下,仅仅用来理解,实现得不严谨functionSet(){this.items={}this.size=0}Set.prototype.add=function(value){if(!this.items[value]){this.items[value]=value//这样子不能实现存储数组、对象this.size=Object.keys(this.items).length}}Set.prototype.has=function(value){if(this.items.hasOwnProperty(value)){returntrue}else{returnfalse}}Set.prototype.delete=function(value){for(letiinthis.items){if(this.items.hasOwnProperty(i)){if(i===value.toString()){delete(this.items[i])this.size=Object.keys(this.items).lengthreturntrue}}}}Set.prototype.clear=function(){this.items={}this.size=0}```###并集、交集、差集、子集业务中可能用数组多些,如果碰到set类型的可以用Array.from将之转为数组类型,再使用如下方法。```js//并集functionunion(arr1,arr2){constarr=arr1.concat(arr2)constresult=Array.from(newSet(arr))returnresult}//交集functionintersection(arr1,arr2){constresult=arr1.filter(r=>arr2.includes(r))//也可以转化为set,用hasreturnresult}//差集functiondifference(arr1,arr2){constresult=arr1.filter(r=>!arr2.includes(r))returnresult}//子集(判断arr1是否为arr2的子集)functionisSubset(arr1,arr2){letbool=truearr1.forEach(r=>{if(!arr2.includes(r)){bool=falsereturn}})returnbool}```###创建Set对象```js//方法一constset1=newSet()set.add(1)//方法二constset2=newSet([1])```"},{name:"stack.md",path:"/Algorithm/data_structure/stack.md",type:"file",mdconf:{abbrlink:"c9b1b7wg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1933,extension:".md",relative:"/Algorithm/data_structure/stack.md",isEmpty:!1,content:"\x3c!--abbrlink:c9b1b7wg--\x3e###栈栈的核心是FILO,首先编写一个栈类:```jsfunctionStack(){this.items=[]}Stack.prototype.push=function(item){this.items.push(item)}Stack.prototype.pop=function(){returnthis.items.pop()}Stack.prototype.size=function(){returnthis.items.length}Stack.prototype.isEmpty=function(){returnthis.items.length===0}Stack.prototype.clear=function(){this.items=[]}```题目:实现一个十进制转化为二进制的函数:```6除以2=3...03除以2=1...11除以2=0...1110测试用例:6=>110``````jsfunctionconversion(num){conststack=newStack()letremainderwhile(num>0){remainder=num%2stack.push(remainder)num=Math.floor(num/2)}letstr=''while(!stack.isEmpty()){str=str+stack.pop()}returnstr}```题目:平衡圆括号```测试用例:{{([][])}()}=>true[{()]=>false``````jsfunctionisBalance(symbol){conststack=newStack()constleft='{[('constright='}])'letpopValuelettag=trueconstmatch=function(popValue,current){if(left.indexOf(popValue)!==right.indexOf(current)){tag=false}}for(leti=0;i<symbol.length;i++){if(left.includes(symbol[i])){stack.push(symbol[i])}elseif(right.includes(symbol[i])){popValue=stack.pop()match(popValue,symbol[i])}}returntag}```###扩展:栈和递归的紧密关系递归的写法本质上都是运用栈的思想。这里列几道leetcode上的题目作为参考*[BinaryTreePreorderTraversal]([Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/144.Binary_Tree_Preorder_Traversal/README.md))*[FlattenNestedListIterator](https://github.com/MuYunyun/blog/blob/master/LeetCode/341.Flatten_Nested_List_Iterator/README.md)"}],type:"directory",size:41931}],type:"directory",size:66597},{name:"LeetCode",path:"/LeetCode",children:[{name:"1.Two_Sum.md",path:"/LeetCode/1.Two_Sum.md",type:"file",mdconf:{abbrlink:"g1bhkb7r"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1950,extension:".md",relative:"/LeetCode/1.Two_Sum.md",isEmpty:!1,content:"\x3c!--abbrlink:g1bhkb7r--\x3e###Title给定一个整数数组nums和一个目标值target，请你在该数组中找出和为目标值的那两个整数，并返回他们的数组下标。你可以假设每种输入只会`对应一个答案`。但是，你不能重复利用这个数组中同样的元素。示例:```js给定nums=[2,7,11,15],target=9```因为nums[0]+nums[1]=2+7=9所以返回[0,1]###Analyze题解1:暴力法```jsvartwoSum=function(nums,target){varlength=nums.lengthfor(varx=0;x<length;x++){for(vary=x+1;y<length;y++){if(nums[x]+nums[y]===target){vararr=[]arr.push(x)arr.push(y)returnarr}}}}```*时间复杂度:O(n^2)*空间复杂度:O(1)题解2-1:哈希表思路:>需要留意的是,如果数组中有重复的值比如[5,5],target=10这种情况的处理*遍历一次数组,查询当前`哈希表`中是否有和当前索引值`nums[i]`对应的匹配值`target-nums[i]`;*若有,则返回它们两个值的索引;*若没有,则将当前索引值和下标存入哈希表中;```jsvartwoSum=function(nums,target){letnumsObj={}for(leti=0;i<nums.length;i++){letcurrent=nums[i]letmatch=target-currentif(matchinnumsObj){return[i,numsObj[match]]}numsObj[current]=i}}```*时间复杂度:O(n)*空间复杂度:O(n)题解2-2:使用Map,思路同哈希表```jsvartwoSum=function(nums,target){varmap=newMap()for(leti=0;i<nums.length;i++){consttargetValue=target-nums[i]constgetTargetValue=map.get(targetValue)if(typeof(getTargetValue)==='number'){return[i,getTargetValue]}map.set(nums[i],i)}}```*时间复杂度:O(n)*空间复杂度:O(n)###SisterTitle15、16、18"},{name:"2.Add_Two_Numbers.md",path:"/LeetCode/2.Add_Two_Numbers.md",type:"file",mdconf:{abbrlink:"tf43uh2s"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1412,extension:".md",relative:"/LeetCode/2.Add_Two_Numbers.md",isEmpty:!1,content:"\x3c!--abbrlink:tf43uh2s--\x3e###TitleYouaregiventwonon-emptylinkedlistsrepresentingtwonon-negativeintegers.Thedigitsarestoredinreverseorderandeachoftheirnodescontainasingledigit.Addthetwonumbersandreturnitasalinkedlist.Youmayassumethetwonumbersdonotcontainanyleadingzero,exceptthenumber0itself.###Example```Input:(2->4->3)+(5->6->4)Output:7->0->8Explanation:342+465=807.```###Analyze核心:根据sum的值来决定是否要处理进位```js//Keyword:singlelinkedlist/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}l1*@param{ListNode}l2*@return{ListNode}*/varaddTwoNumbers=function(l1,l2){letflag=0lethead=null,temp=nullwhile(l1||l2){letsum=flagif(l1){sum+=l1.vall1=l1.next}if(l2){sum+=l2.vall2=l2.next}constlist=newListNode(sum%10)if(head===null){head=listtemp=list}else{temp.next=listtemp=list}//处理进位flag=0if(sum>=10){flag=1}}if(flag===1){constresult=newListNode(1)temp.next=resulttemp=result}returnhead}```###SisterTitle445"},{name:"3.Longest_Substring_Without_Repeating_Characters.md",path:"/LeetCode/3.Longest_Substring_Without_Repeating_Characters.md",type:"file",mdconf:{abbrlink:"cl9byepk"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2068,extension:".md",relative:"/LeetCode/3.Longest_Substring_Without_Repeating_Characters.md",isEmpty:!1,content:'\x3c!--abbrlink:cl9byepk--\x3e###title给定一个字符串,找出不含有重复字符的最长子串的长度。示例:```js给定"abcabcbb",没有重复字符的最长子串是"abc",那么长度就是3。给定"bbbbb",最长的子串就是"b",长度是1。给定"pwwkew",最长子串是"wke",长度是3。请注意答案必须是一个子串,"pwke"是子序列而不是子串。```###题解方法名:滑动窗口是字符串/数组中常用概念解法一:`判断字符串s[i,j)中是否有s.charAt(j+1),如果有,给左区间加上相应的值`,执行时间大致为98ms左右。具体步骤如下:1.取滑动列表[left,right];2.若列表[left,right]中的取值之和小于s,则列表的有边界right往右扩张。3.若列表[left,right]中的取值之和大于s,则列表的左边界left往右扩张。```js/***@param{string}s*@return{number}*/varlengthOfLongestSubstring=function(s){if(s.length<1){return0}leti=0,j=1,longest=1while(j<s.length){if(s.slice(i,j).indexOf(s.charAt(j))>-1){i+=s.slice(i,j).indexOf(s.charAt(j))+1}else{longest=Math.max(j-i+1,longest)}j++}returnlongest}```思考:针对`判断字符串s[i,j)中是否有s.charAt(j+1)`这一句,是否能使用O(n)时间复杂度的算法代替indexOf呢?使用cacheObj来缓存值,测试执行时间大致为170ms左右。```js/***@param{string}s*@return{number}*/varlengthOfLongestSubstring=function(s){letleft=0,right=0//[left,right]区域letresult=0//假定结果的初始值为0constcacheObj={}while(left<s.length){if(right<s.length&&!cacheObj[s[right]]){cacheObj[s[right]]=1result=Math.max(result,right-left+1)right++}else{cacheObj[s[left]]=nullleft++}}if(result===0){return0}returnresult}```###SisterTitle76(todo)、209、438'},{name:"4.Median_of_Two_Sorted_Arrays.md",path:"/LeetCode/4.Median_of_Two_Sorted_Arrays.md",type:"file",mdconf:{abbrlink:"dyio2u3d"},birthtime:"2022-01-16",mtime:"2022-01-16",size:633,extension:".md",relative:"/LeetCode/4.Median_of_Two_Sorted_Arrays.md",isEmpty:!1,content:"\x3c!--abbrlink:dyio2u3d--\x3e###title给定两个大小为m和n的有序数组nums1和nums2。请找出这两个有序数组的中位数。要求算法的时间复杂度为O(log(m+n))。你可以假设nums1和nums2均不为空。###Analyze```js/***@param{number[]}nums1*@param{number[]}nums2*@return{number}*/varfindMedianSortedArrays=function(nums1,nums2){letarr=nums1.concat(nums2).sort((r1,r2)=>r1-r2)constlength=arr.lengthif(length%2===0){return(arr[length/2-1]+arr[length/2])/2}else{returnarr[(length+1)/2-1]}}```"},{name:"5.Longest_Palindromic_Substring.md",path:"/LeetCode/5.Longest_Palindromic_Substring.md",type:"file",mdconf:{abbrlink:"7ar1q99b"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1090,extension:".md",relative:"/LeetCode/5.Longest_Palindromic_Substring.md",isEmpty:!1,content:"\x3c!--abbrlink:7ar1q99b--\x3e###title给定一个字符串s,找到s中最长的回文子串。你可以假设s的最大长度为1000。示例1:输入:\"babad\"输出:\"bab\"注意:\"aba\"也是一个有效答案。示例2:输入:\"cbbd\"输出:\"bb\"###analyze目前的解法判断字符串s和它的倒序s'是否拥有公有字符串,且它们的公有字符串应该符合倒序。目前用暴力法实现~~题目可以转换为求s和它的倒序s'的最长公有字符串。以后再看。```js/***@param{string}s*@return{string}*///暴力法有几个用例超时varlongestPalindrome=function(s){constreverseS=s.split('').reverse().join('')letresult='',len=0for(leti=0;i<s.length;i++){for(letj=i;j<s.length;j++){constsliceS=s.slice(i,j+1)if(sliceS.length>len){if(reverseS.indexOf(sliceS)>=0&&sliceS===sliceS.split('').reverse().join('')){len=sliceS.lengthresult=sliceS}}}}returnresult};```"},{name:"6.ZigZag_Conversion.md",path:"/LeetCode/6.ZigZag_Conversion.md",type:"file",mdconf:{abbrlink:"oi93aqwf"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1490,extension:".md",relative:"/LeetCode/6.ZigZag_Conversion.md",isEmpty:!1,content:'\x3c!--abbrlink:oi93aqwf--\x3e###title将字符串"PAYPALISHIRING"以Z字形排列成给定的行数:```PAHNAPLSIIGYIR```之后从左往右,逐行读取字符:"PAHNAPLSIIGYIR"实现一个将字符串进行指定行数变换的函数:stringconvert(strings,intnumRows);示例1:```输入:s="PAYPALISHIRING",numRows=3输出:"PAHNAPLSIIGYIR"```示例2:```输入:s="PAYPALISHIRING",numRows=4输出:"PINALSIGYAHRPI"解释:PINALSIGYAHRPI```###analyze很受伤,暴力解题后超出内存限制,日后再看。```js/***@param{string}s*@param{number}numRows*@return{string}*/varconvert=function(s,numRows){constperGroupNum=numRows+numRows-2//每组个数constGroupNum=Math.ceil(s.length/perGroupNum)//有几组constarr=[]for(leti=0;i<GroupNum;i++){letlinkStr=\'\'letposition=i*perGroupNumlinkStr+=s.slice(0+position,numRows+position)linkStr+=s.slice(numRows+position,numRows+position+perGroupNum-numRows).split(\'\').reverse().join(\'\')arr.push(linkStr)}letstr=\'\'letnum=0//第几行while(num<numRows){for(leti=0;i<GroupNum;i++){arr[i][num]?str+=arr[i][num]:\'\'if(num>0&&num<numRows-1&&arr[i][num+numRows-1]){str+=arr[i][num+numRows-1]}}num++}returnstr};```'},{name:"9.Palindrome_Number.md",path:"/LeetCode/9.Palindrome_Number.md",type:"file",mdconf:{abbrlink:"a3dlddtk"},birthtime:"2022-01-16",mtime:"2022-01-16",size:712,extension:".md",relative:"/LeetCode/9.Palindrome_Number.md",isEmpty:!1,content:"\x3c!--abbrlink:a3dlddtk--\x3e###titleDeterminewhetheranintegerisapalindrome.Anintegerisapalindromewhenitreadsthesamebackwardasforward.Example1:Input:121Output:trueExample2:Input:-121Output:falseExplanation:Fromlefttoright,itreads-121.Fromrighttoleft,itbecomes121-.Thereforeitisnotapalindrome.Example3:Input:10Output:falseExplanation:Reads01fromrighttoleft.Thereforeitisnotapalindrome.###Analyze```js/***@param{number}x*@return{boolean}*/varisPalindrome=function(x){constconvert=x.toString().split('').reverse().join('')if(x===Number(convert)){returntrue}else{returnfalse}};```"},{name:"11.Container_With_Most_Water.md",path:"/LeetCode/11.Container_With_Most_Water.md",type:"file",mdconf:{abbrlink:"k37gufdo"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1758,extension:".md",relative:"/LeetCode/11.Container_With_Most_Water.md",isEmpty:!1,content:"\x3c!--abbrlink:k37gufdo--\x3e###题目给定n个非负整数a1,a2,...,an,每个数代表坐标中的一个点(i,ai)。在坐标内画n条垂直线,垂直线i的两个端点分别为(i,ai)和(i,0)。找出其中的两条线,使得它们与x轴共同构成的容器可以容纳最多的水。说明:你不能倾斜容器,且n的值至少为2。-[](https://s3-lc-upload.s3.amazonaws.com/uploads/2018/07/17/question_11.jpg)图中垂直线代表输入数组[1,8,6,2,5,4,8,3,7]。在此情况下,容器能够容纳水(表示为蓝色部分)的最大值为49。示例:```js输入:[1,8,6,2,5,4,8,3,7]输出:49```###解题暴力法:时间复杂度O(n^2),空间复杂度O(1);```js//暴力法/***@param{number[]}height*@return{number}*/varmaxArea=function(height){letmaxArea=0constlength=height.lengthfor(leti=0;i<length;i++){for(lety=i+1;y<length;y++){result=Math.min(height[i],height[y])*(y-i)if(result>maxArea){maxArea=result}}}returnmaxArea}```双指针法:一个指针指向首位,一个指针指向末尾;因为受限于高度低的那一方,所以移动高度较低的那一位;这样子只要遍历一次就能得出结果,时间复杂度O(n),空间复杂度O(1);```js//双指针法varmaxArea=function(height){lethead=0,tail=height.length-1,maxArea=0while(head<tail){result=Math.min(height[head],height[tail])*(tail-head)if(result>maxArea){maxArea=result}if(height[head]<=height[tail]){head++}else{tail--}}returnmaxArea}```###类似题目125、167、344、345"},{name:"12.Integer_to_Roman.md",path:"/LeetCode/12.Integer_to_Roman.md",type:"file",mdconf:{abbrlink:"awvr6r6r"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1735,extension:".md",relative:"/LeetCode/12.Integer_to_Roman.md",isEmpty:!1,content:"\x3c!--abbrlink:awvr6r6r--\x3e###title罗马数字包含以下七种字符:I,V,X,L,C,D和M。字符数值I1V5X10L50C100D500M1000例如,罗马数字2写做II,即为两个并列的1。12写做XII,即为X+II。27写做XXVII,即为XX+V+II。通常情况下,罗马数字中小的数字在大的数字的右边。但也存在特例,例如4不写做IIII,而是IV。数字1在数字5的左边,所表示的数等于大数5减小数1得到的数值4。同样地,数字9表示为IX。这个特殊的规则只适用于以下六种情况:I可以放在V(5)和X(10)的左边,来表示4和9。X可以放在L(50)和C(100)的左边,来表示40和90。C可以放在D(500)和M(1000)的左边,来表示400和900。给定一个整数,将其转为罗马数字。输入确保在1到3999的范围内。示例1:输入:3输出:\"III\"示例2:输入:4输出:\"IV\"示例3:输入:9输出:\"IX\"示例4:输入:58输出:\"LVIII\"解释:C=100,L=50,XXX=30,III=3.示例5:输入:1994输出:\"MCMXCIV\"解释:M=1000,CM=900,XC=90,IV=4.###analyze看了解答~```js/***@param{number}num*@return{string}*/varintToRoman=function(num){letresult=''constintArr=[1000,900,500,400,100,90,50,40,10,9,5,4,1]constRomanArr=['M','CM','D','CD','C','XC','L','XL','X','IX','V','IV','I']for(leti=0;i<intArr.length;i++){while(num%intArr[i]<num){result+=RomanArr[i]num-=intArr[i]}}returnresult}```"},{name:"13.Roman_to_Integer.md",path:"/LeetCode/13.Roman_to_Integer.md",type:"file",mdconf:{abbrlink:"49updn2c"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2034,extension:".md",relative:"/LeetCode/13.Roman_to_Integer.md",isEmpty:!1,content:"\x3c!--abbrlink:49updn2c--\x3e###title罗马数字包含以下七种字符:I,V,X,L,C,D和M。字符数值I1V5X10L50C100D500M1000例如,罗马数字2写做II,即为两个并列的1。12写做XII,即为X+II。27写做XXVII,即为XX+V+II。通常情况下,罗马数字中小的数字在大的数字的右边。但也存在特例,例如4不写做IIII,而是IV。数字1在数字5的左边,所表示的数等于大数5减小数1得到的数值4。同样地,数字9表示为IX。这个特殊的规则只适用于以下六种情况:I可以放在V(5)和X(10)的左边,来表示4和9。X可以放在L(50)和C(100)的左边,来表示40和90。C可以放在D(500)和M(1000)的左边,来表示400和900。给定一个罗马数字,将其转换成整数。输入确保在1到3999的范围内。示例1:输入:\"III\"输出:3示例2:输入:\"IV\"输出:4示例3:输入:\"IX\"输出:9示例4:输入:\"LVIII\"输出:58解释:C=100,L=50,XXX=30,III=3.示例5:输入:\"MCMXCIV\"输出:1994解释:M=1000,CM=900,XC=90,IV=4.###analyze正常AC,遍历字符串,思路略```js/***@param{string}s*@return{number}*/varromanToInt=function(s){constRomanArr=['M','CM','D','CD','C','XC','L','XL','X','IX','V','IV','I']constintArr=[1000,900,500,400,100,90,50,40,10,9,5,4,1]constlength=s.lengthletpick,result=0for(leti=0;i<length;i++){pick=s.slice(i,i+1)if(pick==='C'||pick==='X'||pick==='I'){pick=s.slice(i,i+2)if(pick==='CM'||pick==='CD'||pick==='XC'||pick==='XL'||pick==='IX'||pick==='IV'){i++}else{pick=s.slice(i,i+1)}}result+=intArr[RomanArr.indexOf(pick)]}returnresult};```"},{name:"14.Longest_Common_Prefix.md",path:"/LeetCode/14.Longest_Common_Prefix.md",type:"file",mdconf:{abbrlink:"feor893p"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1044,extension:".md",relative:"/LeetCode/14.Longest_Common_Prefix.md",isEmpty:!1,content:'\x3c!--abbrlink:feor893p--\x3e###title编写一个函数来查找字符串数组中的最长公共前缀。如果不存在公共前缀,返回空字符串""。示例1:```输入:["flower","flow","flight"]输出:"fl"```示例2:```输入:["dog","racecar","car"]输出:""解释:输入不存在公共前缀。```说明:所有输入只包含小写字母a-z。###analyzeemm,虽然是道简单难度的题目,但是通过率不是很高,大多数应该是方法没有采取恰当。思路可以如下:1.选取数组的第一个值str2.让数组中的每个值分别indexOf(str),如果indexOf(str)!==0,则让str=str.slice(0,str.length-1)```js/***@param{string[]}strs*@return{string}*/varlongestCommonPrefix=function(strs){if(strs.length===0)return\'\'letstr=strs[0]for(leti=0;i<strs.length;i++){while(strs[i].indexOf(str)!==0){str=str.slice(0,str.length-1)if(str.length===0){return\'\'}}}returnstr};```'},{name:"15.3Sum.md",path:"/LeetCode/15.3Sum.md",type:"file",mdconf:{abbrlink:"juxf7q1t"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2928,extension:".md",relative:"/LeetCode/15.3Sum.md",isEmpty:!1,content:"\x3c!--abbrlink:juxf7q1t--\x3e###titleGivenanarraynumsofnintegers,arethereelementsa,b,cinnumssuchthata+b+c=0?Findalluniquetripletsinthearraywhichgivesthesumofzero.Note:Thesolutionsetmustnotcontainduplicatetriplets.Example:```jsGivenarraynums=[-1,0,1,2,-1,-4],Asolutionsetis:[[-1,0,1],[-1,-1,2]]```###解题相关思路:1.排序;2.查找表;3.双指针;```js/***@param{number[]}nums*@return{number[][]}*/varthreeSum=function(nums){constsortNums=nums.sort((r1,r2)=>r1-r2)lettargetValueconstcacheMap=newMap()constresult=[]for(leti=0;i<sortNums.length-2;i++){targetValue=-sortNums[i]letl=i+1letr=sortNums.length-1while(l<r){lettmpArr=[]constmapValue=cacheMap.get(`${-targetValue}${sortNums[l]}${sortNums[r]}`)if(sortNums[l]+sortNums[r]===targetValue&&!mapValue){tmpArr.push(-targetValue)tmpArr.push(sortNums[l])tmpArr.push(sortNums[r])result.push(tmpArr)cacheMap.set(`${-targetValue}${sortNums[l]}${sortNums[r]}`,true)l++r--}elseif(sortNums[l]+sortNums[r]===targetValue&&mapValue){l++}elseif(sortNums[l]+sortNums[r]>targetValue){r--}elseif(sortNums[l]+sortNums[r]<targetValue){l++}}}returnresult}```此时通过测试用例的情况为312/313,差一个包含3000个0数组的测试用例没通过;根据评论区的提示,缺少了`对解进行去重`这个步骤(卡主大部分人的原因),优化如下:```js/***@param{number[]}nums*@return{number[][]}*/varthreeSum=function(nums){constsortNums=nums.sort((r1,r2)=>r1-r2)lettargetValueconstresult=[]for(leti=0;i<sortNums.length-2;i++){//针对下标i对应的值进行去重if(i===0||nums[i]>nums[i-1]){targetValue=-sortNums[i]letl=i+1letr=sortNums.length-1while(l<r){lettmpArr=[]if(sortNums[l]+sortNums[r]===targetValue){tmpArr.push(-targetValue)tmpArr.push(sortNums[l])tmpArr.push(sortNums[r])result.push(tmpArr)l++r--//针对下标l对应的值进行去重,r同理while(l<r&&sortNums[l]===sortNums[l-1]){l++}while(l<r&&sortNums[r]===sortNums[r+1]){r--}}elseif(sortNums[l]+sortNums[r]>targetValue){r--}elseif(sortNums[l]+sortNums[r]<targetValue){l++}}}}returnresult}```![](http://with.muyunyun.cn/10dda8915d98182962f44344244e8b5a.jpg-400)###SisterTitle1、16、18"},{name:"16.3Sum_Closest.md",path:"/LeetCode/16.3Sum_Closest.md",type:"file",mdconf:{abbrlink:"63rxuwzq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1242,extension:".md",relative:"/LeetCode/16.3Sum_Closest.md",isEmpty:!1,content:"\x3c!--abbrlink:63rxuwzq--\x3e###titleGivenanarraynumsofnintegersandanintegertarget,findthreeintegersinnumssuchthatthesumisclosesttotarget.Returnthesumofthethreeintegers.Youmayassumethateachinputwouldhaveexactlyonesolution.Example:```jsGivenarraynums=[-1,2,1,-4],andtarget=1.Thesumthatisclosesttothetargetis2.(-1+2+1=2).```###analyze1.排序;2.有个巧妙的地方,比较三个数之和与target的大小,具体看题解;```js/***@param{number[]}nums*@param{number}target*@return{number}*/varthreeSumClosest=function(nums,target){letsum=0letclose=nums[0]+nums[1]+nums[2]letsortedNums=nums.sort((a,b)=>a-b)for(leti=0;i<sortedNums.length;i++){letl=i+1,r=sortedNums.length-1while(l<r){//分别对应左、中、右三个下标对应的值sum=nums[i]+nums[l]+nums[r]if(Math.abs(sum-target)<Math.abs(close-target)){close=sum}if(sum<target){l++}elseif(sum>target){r--}else{returnsum}}}returnclose}```###SisterTitle1、15、18"},{name:"17.Letter_Combinations_of_a_Phone_Number.md",path:"/LeetCode/17.Letter_Combinations_of_a_Phone_Number.md",type:"file",mdconf:{abbrlink:"56bkz5yy"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2360,extension:".md",relative:"/LeetCode/17.Letter_Combinations_of_a_Phone_Number.md",isEmpty:!1,content:"\x3c!--abbrlink:56bkz5yy--\x3e###17.LetterCombinationsofaPhoneNumberGivenastringcontainingdigitsfrom2-9inclusive,returnallpossiblelettercombinationsthatthenumbercouldrepresent.Returntheanswerinanyorder.Amappingofdigittoletters(justlikeonthetelephonebuttons)isgivenbelow.Notethat1doesnotmaptoanyletters.![](https://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Telephone-keypad2.svg/200px-Telephone-keypad2.svg.png)Example1:```jsInput:digits=\"23\"Output:[\"ad\",\"ae\",\"af\",\"bd\",\"be\",\"bf\",\"cd\",\"ce\",\"cf\"]```Example2:```jsInput:digits=\"\"Output:[]```Example3:```jsInput:digits=\"2\"Output:[\"a\",\"b\",\"c\"]```Constraints:*0<=digits.length<=4*digits[i]isadigitintherange['2','9'].###analyze方法一:回溯法递归。```js/***@param{string}digits*@return{string[]}*/varletterCombinations=function(digits){if(digits==='')return[]constresult=[]combinations(digits,0,'',result)returnresult};/***digits:analyzedigit*index:currentiteratornumber*s:prevtotalstring*/varcombinations=(digits,index,s,result)=>{if(index===digits.length){result.push(s)return}constchar=digits[index]constmap={'2':'abc','3':'def','4':'ghi','5':'jkl','6':'mno','7':'pqrs','8':'tuv','9':'wxyz'}constcharMapString=map[char]for(leti=0;i<charMapString.length;i++){combinations(digits,index+1,s+charMapString[i],result)}}```方法二:运用队列的思想。拿'23'举例,第一轮先放进'abc',第二轮分别以队列的方式对a、b、c分别进行操作push进def。```js/***@param{string}digits*@return{string[]}*/varletterCombinations=function(digits){//'23'constkeyString=['','','abc','def','ghi','jkl','mno','pqrs','tuv','wxyz',]if(digits===''||digits.length===0){return[]}constresult=['']for(letxofdigits){constsize=result.lengthfor(leti=0;i<size;i++){constold=result.shift()for(letyofkeyString[x]){result.push(old+y)}}}returnresult};```###推荐指数※※※※※"},{name:"18.4Sum.md",path:"/LeetCode/18.4Sum.md",type:"file",mdconf:{abbrlink:"o9822zc2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2167,extension:".md",relative:"/LeetCode/18.4Sum.md",isEmpty:!1,content:"\x3c!--abbrlink:o9822zc2--\x3e###titleGivenanarraynumsofnintegersandanintegertarget,arethereelementsa,b,c,anddinnumssuchthata+b+c+d=target?Findalluniquequadrupletsinthearraywhichgivesthesumoftarget.Note:Thesolutionsetmustnotcontainduplicatequadruplets.Example:```jsGivenarraynums=[1,0,-1,0,-2,2],andtarget=0.Asolutionsetis:[[-1,0,0,1],[-2,-1,1,2],[-2,0,0,2]]```###Analyze题目[15](https://github.com/MuYunyun/blog/blob/master/BasicSkill/LeetCode/15.3Sum/README.md)的加强版,唯一区别是定义的指针数量增加了,仍然需要注意`解的去重`。```js/***@param{number[]}nums*@param{number}target*@return{number[][]}*/varfourSum=function(nums,target){constresult=[]if(nums.length<4)returnresultconstsortSum=nums.sort((n1,n2)=>n1-n2)constlength=sortSum.lengthfor(leti=0;i<length-3;i++){if(i===0||nums[i]>nums[i-1]){letl=i+1letm=l+1while(l<length-2){letr=length-1if(l===i+1||nums[l]>nums[l-1]){while(m<length-1&&m<r){lettmpArr=[]constsum=nums[i]+nums[l]+nums[m]+nums[r]if(sum===target){tmpArr.push(nums[i])tmpArr.push(nums[l])tmpArr.push(nums[m])tmpArr.push(nums[r])result.push(tmpArr)m++r--while(nums[m]===nums[m-1]){m++}while(nums[r]===nums[r+1]){r--}}elseif(sum<target){m++}elseif(sum>target){r--}}}l++m=l+1}}}returnresult}fourSum([1,0,-1,0,-2,2],0)```![](http://with.muyunyun.cn/9e8e7033246cfea3940af4fb03b3a363.jpg-400)假设数组的长度为n,算法复杂度估计为`(n-3)*(等差数列)`即为O(n^2)###SisterTitle15、16"},{name:"19.Remove_Nth_Node_From_End_of_List.md",path:"/LeetCode/19.Remove_Nth_Node_From_End_of_List.md",type:"file",mdconf:{abbrlink:"v1zcni6y"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1992,extension:".md",relative:"/LeetCode/19.Remove_Nth_Node_From_End_of_List.md",isEmpty:!1,content:"\x3c!--abbrlink:v1zcni6y--\x3e###RemoveNthNodeFromEndofListGivenalinkedlist,removethen-thnodefromtheendoflistandreturnitshead.Example:Givenlinkedlist:1->2->3->4->5,andn=2.Afterremovingthesecondnodefromtheend,thelinkedlistbecomes1->2->3->5.Note:Givennwillalwaysbe`valid`.Followup:Couldyoudothis`inonepass`?###Analyze对于删除链表节点的题目,我们需要知道需删除链表节点的上一个节点。那如何找到需要删除节点的上一个节点呢?*思路一:遍历一遍链表得到链表个数sum,再次遍历链表则`sum-n-1`表示从正向数过来需删除的链表节点的上一个节点的位数;*缺点:这样需要两次遍历;*思路二:使用双指针的思想确认要删除的节点;此外从题目的例子可以得到的线索:*n是从1开始的(不是从0开始);```js1->2->3->4->5->null..第一步:l与r的距离为n+1;lrdummy->1->2->3->4->5->null..第二步:始终保持l与r的距离为n+1,向右移动,直到r为null,此时l的位置就是要删除节点上一个的位置。lrdummy->1->2->3->4->5->null``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@param{number}n*@return{ListNode}*/varremoveNthFromEnd=function(head,n){constdummy=newListNode(0)dummy.next=headletl=dummyletr=dummyletoffset=n+1while(offset--){r=r.nextif(offset>1&&r===null){returndummy.next}}while(r){r=r.nextl=l.next}l.next=l.next.nextreturndummy.next}```![](http://with.muyunyun.cn/8a3c94502a50892aba7f4697487bde32.jpg)###SisterTitle61"},{name:"20.Valid_Parentheses.md",path:"/LeetCode/20.Valid_Parentheses.md",type:"file",mdconf:{abbrlink:"xgzs7c52"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1125,extension:".md",relative:"/LeetCode/20.Valid_Parentheses.md",isEmpty:!1,content:"\x3c!--abbrlink:xgzs7c52--\x3e###20.Valid_ParenthesesGivenastringcontainingjustthecharacters'(',')','{','}','['and']',determineiftheinputstringisvalid.Aninputstringisvalidif:1.Openbracketsmustbeclosedbythesametypeofbrackets.2.Openbracketsmustbeclosedinthecorrectorder.Notethatanemptystringisalsoconsideredvalid.Example1:```jsInput:\"()\"Output:true```Example2:```jsInput:\"()[]{}\"Output:true```Example3:```jsInput:\"(]\"Output:false```Example4:```jsInput:\"([)]\"Output:false```Example5:```jsInput:\"{[]}\"Output:true```###analyze考察栈的使用。```js/***@param{string}s*@return{boolean}*/varisValid=function(s){constobj={'(':')','{':'}','[':']',}constcacheArr=[]for(leti=0;i<s.length;i++){if(Object.keys(obj).includes(s[i])){cacheArr.push(s[i])}else{constpick=cacheArr.pop()if(obj[pick]!==s[i]){returnfalse}}}returncacheArr.length===0}```###SimilarTitle*71、150"},{name:"21.Merge_Two_Sorted_Lists.md",path:"/LeetCode/21.Merge_Two_Sorted_Lists.md",type:"file",mdconf:{abbrlink:"c92eip6g"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1731,extension:".md",relative:"/LeetCode/21.Merge_Two_Sorted_Lists.md",isEmpty:!1,content:"\x3c!--abbrlink:c92eip6g--\x3e###MergeTwoSortedListsMergetwosortedlinkedlistsandreturnitasanewlist.Thenewlistshouldbemadebysplicingtogetherthenodesofthefirsttwolists.Example:```jsInput:1->2->4,1->3->4Output:1->1->2->3->4->4```###analyze解法一:链表,类似归并排序的合并过程,见[归并排序](https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/sort/merge_sort.md)```js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}l1*@param{ListNode}l2*@return{ListNode}*/varmergeTwoLists=function(l1,l2){constdummyLink=newListNode(0)letcur=dummyLinkletl1Point=l1letl2Point=l2while(l1Point&&l2Point){if(l1Point.val<l2Point.val){cur.next=l1Pointl1Point=l1Point.next}else{cur.next=l2Pointl2Point=l2Point.next}cur=cur.next}while(l1Point){cur.next=l1Pointcur=cur.nextl1Point=l1Point.next}while(l2Point){cur.next=l2Pointcur=cur.nextl2Point=l2Point.next}returndummyLink.next}```解法二:递归```js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}l1*@param{ListNode}l2*@return{ListNode}*/varmergeTwoLists=function(l1,l2){if(l1===null){returnl2}if(l2===null){returnl1}if(l1.val<l2.val){l1.next=mergeTwoLists(l1.next,l2)returnl1}else{l2.next=mergeTwoLists(l1,l2.next)returnl2}}```"},{name:"22.Generate_Parentheses.md",path:"/LeetCode/22.Generate_Parentheses.md",type:"file",mdconf:{abbrlink:"og1puolt"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1218,extension:".md",relative:"/LeetCode/22.Generate_Parentheses.md",isEmpty:!1,content:"\x3c!--abbrlink:og1puolt--\x3e###22.GenerateParentheses给出n代表生成括号的对数,请你写出一个函数,使其能够生成所有可能的并且有效的括号组合。例如,给出n=3,生成结果为:[\"((()))\",\"(()())\",\"(())()\",\"()(())\",\"()()()\"]###analyze回溯法:思路:标记可使用的左括号和右括号数量,中断条件为左右可使用括号数都为0*若可使用的左括号的数量等于可使用的右括号的数量,则加'(';*若可使用的左括号的数量为0,则加')';*若可使用的左括号的数量小于可使用的右括号的数量,则可以加'('又可以加')'```js/***@param{number}n*@return{string[]}*/vargenerateParenthesis=function(n){constresult=[]letstr=''functionjudege(left,right,str){if(left===0&&right===0){result.push(str)str=''return}if(left===right){judege(left-1,right,str+'(')}elseif(left===0){judege(left,right-1,str+')')}else{judege(left-1,right,str+'(')judege(left,right-1,str+')')}}judege(n,n,str)returnresult};```"},{name:"23.Merge_k_Sorted_Lists.md",path:"/LeetCode/23.Merge_k_Sorted_Lists.md",type:"file",mdconf:{abbrlink:"c5uvbnmt"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4536,extension:".md",relative:"/LeetCode/23.Merge_k_Sorted_Lists.md",isEmpty:!1,content:"\x3c!--abbrlink:c5uvbnmt--\x3e###23.MergekSortedListsMergek`sortedlinkedlists`andreturnitas`onesortedlist`.Analyzeanddescribeitscomplexity.Example:```jsInput:[1->4->5,1->3->4,2->6]Output:1->1->2->3->4->4->5->6```###Analyze思路一:分治算法。可以将合并k个排序队列转换为合并2个排序队列。图例解释:```jscurdummyNode->1->4->5comparedCur2->6``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode[]}lists*@return{ListNode}*/varmergeKLists=function(lists){letresult=lists[0]||nullfor(leti=1;i<lists.length;i++){constcompareList=lists[i]result=mergeTwoLists(result,compareList)}returnresult}varmergeTwoLists=function(curList,compareList){constdummyNode=newListNode(0)dummyNode.next=curListletcur=dummyNodeletcomparedCur=compareListwhile(cur.next&&comparedCur){if(cur.next.val>comparedCur.val){letnextComparedCur=comparedCur.nextcomparedCur.next=cur.nextcur.next=comparedCurcomparedCur=nextComparedCur}cur=cur.next}if(comparedCur){cur.next=comparedCur}returndummyNode.next}```思路二:优先队列*将数组中的队列加入进优先队列(基于最小堆);*如果当前优先队列不为空:*取出当前`优先队列顶部队列元素`(最小值),拼接到`输出队列`中;*同时在优先队列插入取出的顶部队列元素的下一个值;由于在JavaScrit中没有封装好的优先队列,在此先进行封装`优先队列函数`(最小堆)。```jsvarlen/***tobuildminheapifyfrombottomtotop;*thelastsubscript'sparentsubscriptisMath.floor((len-1)/2)*/varbuildMinHeapify=function(arr){len=arr.lengthfor(leti=Math.floor((len-1)/2);i>=0;i--){siftDown(arr,i)}returnarr}/***Insertavalueintoheap.It'sanoperationcalledsiftup.*/varenqueue=function(arr,value){arr.splice(len,0,value)len++siftUp()}/***tokeepminheap,it'sanoperationcalledsiftup.*/varsiftUp=function(){letenqueueValSubscript=len-1letparent=Math.floor(enqueueValSubscript/2)while(parent>0&&arr[parent]>arr[enqueueValSubscript]){swap(arr,parent,enqueueValSubscript)enqueueValSubscript=parentparent=Math.floor(enqueueValSubscript/2)}}/**topickthesmallestorthebiggestelementfromtheheapandreturnit;*Thent'llswaptheendestelementwiththefirstelement,andthenkeepthe*heaplengthreduceone.Ifso,onlydooncesiftdownoperationinthefirstelementtokeepheapify.*/vardequeue=function(){constmaxValue=arr[0]swap(arr,len-1,0)len--siftDown(arr,0)returnmaxValue}/***tokeepminheap,it'sanoperationcalledsiftdown.*/varsiftDown=function(arr,i){constleft=2*i+1constright=2*i+2letminSubscript=iif(left<len&&arr[left]<arr[minSubscript]){minSubscript=left}if(right<len&&arr[right]<arr[minSubscript]){minSubscript=right}if(minSubscript!==i){swap(arr,minSubscript,i)siftDown(arr,minSubscript)}}//swaptwovalueinarrvarswap=function(arr,pointOne,pointTwo){consttmp=arr[pointOne]arr[pointOne]=arr[pointTwo]arr[pointTwo]=tmp}```Testcaseone:```jsinput:vararr=[5,2,7,3,1,8,4]8↙↘37↙↘↙↘2154buildMinHeapify(arr)//[1,2,4,3,5,8,7]11↙↘enqueue(arr,6)↙↘24---------------\x3e24↙↘↙↘↙↘↙↘35873587↙62return1↙↘dequeue()34----------------\x3e↙↘↙↘6587```在JavaScript中使用优先队列成本相对较高,暂时不考虑。"},{name:"24.Swap_Nodes_in_Pairs.md",path:"/LeetCode/24.Swap_Nodes_in_Pairs.md",type:"file",mdconf:{abbrlink:"wb7mpokh"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1270,extension:".md",relative:"/LeetCode/24.Swap_Nodes_in_Pairs.md",isEmpty:!1,content:"\x3c!--abbrlink:wb7mpokh--\x3e###SwapNodesinPairsGivenalinkedlist,swapeverytwoadjacentnodesandreturnitshead.Youmaynotmodifythevaluesinthelist'snodes,onlynodesitselfmaybechanged.Example:```jsGiven1->2->3->4,youshouldreturnthelistas2->1->4->3.```###analyze```jsprevfirstsecondnext1->2->3->4->null..进行如下指针变换:prev->second->first->next2->1->3->4->null..移动指针:prevfirstsecondnext2->1->3->4->null..重复上述操作``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@return{ListNode}*/varswapPairs=function(head){constdummyHead=newListNode(0)dummyHead.next=headletprev=dummyHeadletfirst=prev.nextwhile(first&&first.next){letsecond=first.nextletnext=second.nextsecond.next=firstfirst.next=nextprev.next=secondprev=firstfirst=first.next}returndummyHead.next}```"},{name:"25.Reverse_Nodes_in_k-Group.md",path:"/LeetCode/25.Reverse_Nodes_in_k-Group.md",type:"file",mdconf:{abbrlink:"ganj278u"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2476,extension:".md",relative:"/LeetCode/25.Reverse_Nodes_in_k-Group.md",isEmpty:!1,content:"\x3c!--abbrlink:ganj278u--\x3e###ReverseNodesink-GroupGivenalinkedlist,reversethenodesofalinkedlistkatatimeandreturnitsmodifiedlist.kisapositiveintegerandislessthanorequaltothelengthofthelinkedlist.Ifthenumberofnodesisnotamultipleofkthenleft-outnodesintheendshouldremainasitis.Example:Giventhislinkedlist:1->2->3->4->5Fork=2,youshouldreturn:2->1->4->3->5Fork=3,youshouldreturn:3->2->1->4->5Note:Onlyconstantextramemoryisallowed.Youmaynotalterthevaluesinthelist'snodes,onlynodesitselfmaybechanged.###Analyze初始分析:每间隔k个值进行链表反转,目前的思考是替换链表的同时维护一个count,count达到k以后count清0,同时根据count是否达到k来判断当前组列表的下一组列表是指向原列表还是反转后的列表,但是这样的思路需要额外的内存来存储下一组列表。有没有更好的方法呢?参考网友的`尾插法`思路。①将tail移到要翻转部分的最后一个元素,若移动k元素之前已到达链表末尾则完成每间隔k个值的链表翻转;②接着依次把cur移到tail后面;该方法的难点一个是如何确定tail(尾巴)节点,另一个是如何穿针引线将cur节点移到tail节点后面。(这题卡了好久[OMG])```jsk===3prevtailhead1dummy12345prevhead1taildummy12345curprevtailhead1dummy23145curprevtailhead1dummy32145cur``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@param{number}k*@return{ListNode}*/varreverseKGroup=function(head,k){constdummyHead=newListNode(0)dummyHead.next=headletprev=dummyHeadlettail=dummyHeadwhile(true){letcount=0while(tail.next&&count!==k){tail=tail.nextcount++}if(count!==k)breaklethead1=prev.nextwhile(prev.next!==tail){letcur=prev.nextprev.next=cur.nextcur.next=tail.nexttail.next=cur}prev=head1tail=head1}returndummyHead.next}```![](http://with.muyunyun.cn/27da17a1a3c81ffe4aa6beefaef0de18.jpg)"},{name:"26.Remove_Duplicates_from_Sorted_Array.md",path:"/LeetCode/26.Remove_Duplicates_from_Sorted_Array.md",type:"file",mdconf:{abbrlink:"as1usnn3"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2225,extension:".md",relative:"/LeetCode/26.Remove_Duplicates_from_Sorted_Array.md",isEmpty:!1,content:"\x3c!--abbrlink:as1usnn3--\x3e###题目给定一个`排序数组`,你需要`在原地删除重复出现的元素,使得每个元素只出现一次,返回移除后数组的新长度`。`不要使用额外的数组空间,你必须在原地修改输入数组并在使用O(1)额外空间的条件下完成`。示例1:```js给定数组nums=[1,1,2],函数应该返回新的长度2,并且原数组nums的前两个元素被修改为1,2。你不需要考虑数组中超出新长度后面的元素。```示例2:```js给定nums=[0,0,1,1,1,2,2,3,3,4],函数应该返回新的长度5,并且原数组nums的前五个元素被修改为0,1,2,3,4。你不需要考虑数组中超出新长度后面的元素。```说明:为什么返回数值是整数,但输出的答案是数组呢?请注意,输入数组是以“引用”方式传递的,这意味着在函数里修改输入数组对于调用者是可见的。你可以想象内部操作如下:```js//nums是以“引用”方式传递的。也就是说,不对实参做任何拷贝intlen=removeDuplicates(nums);//在函数里修改输入数组对于调用者是可见的。//根据你的函数返回的长度,它会打印出数组中该长度范围内的所有元素。for(inti=0;i<len;i++){print(nums[i]);}```###解题解法一:一般思路```js/***@param{number[]}nums*@return{number}*/varremoveDuplicates=function(nums){constcacheObj={}letcount=0while(count<nums.length){if(cacheObj[nums[count]]){nums.splice(count,1)count--}else{cacheObj[nums[count]]=nums[count].toString()//防止0被判断为false}count++}returnnums.length}```解法二:双指针![](http://with.muyunyun.cn/d3b1ba4aff45282b1ae4740d530c8834.jpg)```js/***@param{number[]}nums*@return{number}*/varremoveDuplicates=function(nums){if(nums.length<=1)returnnums.lengthletcur=0//新数组的下标for(leti=1;i<nums.length;i++){if(nums[i]!==nums[cur]){nums[cur+1]=nums[i]cur++}}returncur+1}```###同类题目27、80、283。"},{name:"27.Remove_Element.md",path:"/LeetCode/27.Remove_Element.md",type:"file",mdconf:{abbrlink:"1iy1ni8a"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1546,extension:".md",relative:"/LeetCode/27.Remove_Element.md",isEmpty:!1,content:"\x3c!--abbrlink:1iy1ni8a--\x3e###题目给定一个数组nums和一个值val,`你需要原地移除所有数值等于val的元素,返回移除后数组的新长度`。不要使用额外的数组空间,你必须在原地修改输入数组并在使用O(1)额外空间的条件下完成。元素的顺序可以改变。你不需要考虑数组中超出新长度后面的元素。示例1:```js给定nums=[3,2,2,3],val=3,函数应该返回新的长度2,并且nums中的前两个元素均为2。你不需要考虑数组中超出新长度后面的元素。```示例2:```js给定nums=[0,1,2,2,3,0,4,2],val=2,函数应该返回新的长度5,并且nums中的前五个元素为0,1,3,0,4。注意这五个元素可为任意顺序。你不需要考虑数组中超出新长度后面的元素。```###解题解法一:一般思路```js/***@param{number[]}nums*@param{number}val*@return{number}*/varremoveElement=function(nums,val){letplacewhile(~nums.indexOf(val)){place=nums.indexOf(val)nums.splice(place,1)}returnnums.length}```解法二:双指针![](http://with.muyunyun.cn/e4ea67e0bdbf4af9ee3ad2a0ede55571.jpg)```js/***@param{number[]}nums*@param{number}val*@return{number}*/varremoveElement=function(nums,val){letcur=0for(leti=0;i<nums.length;i++){if(nums[i]!==val){nums[cur]=nums[i]cur++}}returncur}```###同类题目26、80、283。"},{name:"28.Implement_strStr.md",path:"/LeetCode/28.Implement_strStr.md",type:"file",mdconf:{abbrlink:"edludzdk"},birthtime:"2022-01-16",mtime:"2022-01-16",size:844,extension:".md",relative:"/LeetCode/28.Implement_strStr.md",isEmpty:!1,content:'\x3c!--abbrlink:edludzdk--\x3e###title实现strStr()函数。给定一个haystack字符串和一个needle字符串,在haystack字符串中找出needle字符串出现的第一个位置(从0开始)。如果不存在,则返回-1。示例1:输入:haystack="hello",needle="ll"输出:2示例2:输入:haystack="aaaaa",needle="bba"输出:-1说明:当needle是空字符串时,我们应当返回什么值呢？这是一个在面试中很好的问题。对于本题而言,当needle是空字符串时我们应当返回0。这与C语言的strstr()以及Java的indexOf()定义相符。###analyze后面需要改。```js/***@param{string}haystack*@param{string}needle*@return{number}*/varstrStr=function(haystack,needle){returnhaystack.indexOf(needle)};```'},{name:"33.Search_in_Rotated_Sorted_Array.md",path:"/LeetCode/33.Search_in_Rotated_Sorted_Array.md",type:"file",mdconf:{abbrlink:"szdkttfj"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1671,extension:".md",relative:"/LeetCode/33.Search_in_Rotated_Sorted_Array.md",isEmpty:!1,content:"\x3c!--abbrlink:szdkttfj--\x3e###title假设按照升序排序的数组在预先未知的某个点上进行了旋转。(例如,数组[0,1,2,4,5,6,7]可能变为[4,5,6,7,0,1,2])。搜索一个给定的目标值,如果数组中存在这个目标值,则返回它的索引,否则返回-1。你可以假设数组中不存在重复的元素。你的算法时间复杂度必须是O(logn)级别。示例1:```输入:nums=[4,5,6,7,0,1,2],target=0输出:4```示例2:```输入:nums=[4,5,6,7,0,1,2],target=3输出:-1```###analyze思路:考虑使用二分法?这题难度觉得超纲了。然后再想。```js//这道题卡在如何确定返回的指标/***@param{number[]}nums*@param{number}target*@return{number}*/varsearch=function(nums,target){constlength=nums.lengthconstmiddle=Math.floor(length/2)constleftArr=nums.slice(0,middle)constrightArr=nums.slice(middle,length)if(isOrder(leftArr)){sortByDivided(leftArr,target)}else{search(leftArr,target)}if(isOrder(rightArr)){sortByDivided(rightArr,target)}else{search(rightArr,target)}};varisOrder=function(arr){returnarr[0]<arr[arr.length-1]}varsortByDivided=function(arr,target){constlength=arr.lengthletleft=0letright=lengthletmiddlewhile(left<=right){middle=Math.floor((left+right)/2)if(target>arr[middle]){left=middle+1}elseif(target<arr[middle]){right=middle-1}elseif(target===arr[middle]){returnmiddle}}returnfalse}```"},{name:"35.Search_Insert_Position.md",path:"/LeetCode/35.Search_Insert_Position.md",type:"file",mdconf:{abbrlink:"kc9xq8mc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:801,extension:".md",relative:"/LeetCode/35.Search_Insert_Position.md",isEmpty:!1,content:"\x3c!--abbrlink:kc9xq8mc--\x3e###title给定一个排序数组和一个目标值,在数组中找到目标值,并返回其索引。如果目标值不存在于数组中,返回它将会被按顺序插入的位置。你可以假设数组中无重复元素。示例1:```输入:[1,3,5,6],5输出:2```示例2:```输入:[1,3,5,6],2输出:1```示例3:```输入:[1,3,5,6],7输出:4```示例4:```输入:[1,3,5,6],0输出:0```###analyze水题```js/***@param{number[]}nums*@param{number}target*@return{number}*/varsearchInsert=function(nums,target){leti=0while(i<nums.length){if(target<=nums[i]){returni}if(target>nums[nums.length-1]){returnnums.length}i++}};```"},{name:"36.Valid_Sudoku.md",path:"/LeetCode/36.Valid_Sudoku.md",type:"file",mdconf:{abbrlink:"a5w5aun9"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2461,extension:".md",relative:"/LeetCode/36.Valid_Sudoku.md",isEmpty:!1,content:'\x3c!--abbrlink:a5w5aun9--\x3e###36.Valid_Sudoku判断一个9x9的数独是否有效。只需要根据以下规则,`验证已经填入的数字是否有效即可`。1.数字1-9在每一行只能出现一次。2.数字1-9在每一列只能出现一次。3.数字1-9在每一个以粗实线分隔的3x3宫内只能出现一次。[题目链接](https://leetcode-cn.com/problems/valid-sudoku/description/)示例1:```js输入:[["5","3",".",".","7",".",".",".","."],["6",".",".","1","9","5",".",".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".",".","3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],[".",".",".",".","8",".",".","7","9"]]输出:true```示例2:```js输入:[["8","3",".",".","7",".",".",".","."],["6",".",".","1","9","5",".",".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".",".","3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],[".",".",".",".","8",".",".","7","9"]]输出:false```解释:除了第一行的第一个数字从5改为8以外,空格内其他数字均与示例1相同。但由于位于左上角的3x3宫内有两个8存在,因此这个数独是无效的。说明:*一个有效的数独（部分已被填充）不一定是可解的*只需要根据以上规则,验证已经填入的数字是否有效即可*给定数独序列只包含数字1-9和字符\'.\'*给定数独永远是9x9形式的###analyze依次遍历二维数组,对3种情况分别进行校验。```js/***@param{character[][]}board*@return{boolean}*/varisValidSudoku=function(board){constset=newSet()for(letx=0;x<9;x++){for(lety=0;y<9;y++){constnum=board[x][y]if(num!==\'.\'){if(set.has(`row${x}${num}`)||set.has(`col${y}${num}`)||set.has(`block${Math.floor(x/3)}${Math.floor(y/3)}${num}`)){returnfalse}else{set.add(`row${x}${num}`)set.add(`col${y}${num}`)set.add(`block${Math.floor(x/3)}${Math.floor(y/3)}${num}`)}}}}returntrue};```'},{name:"37.Sudoku_Solver.md",path:"/LeetCode/37.Sudoku_Solver.md",type:"file",mdconf:{abbrlink:"z7xvt2p8"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4001,extension:".md",relative:"/LeetCode/37.Sudoku_Solver.md",isEmpty:!1,content:'\x3c!--abbrlink:z7xvt2p8--\x3e###37.SudokuSolverWriteaprogramtosolveaSudokupuzzlebyfillingtheemptycells.Asudokusolutionmustsatisfyallofthefollowingrules:1.Eachofthedigits1-9mustoccurexactlyonceineachrow.2.Eachofthedigits1-9mustoccurexactlyonceineachcolumn.3.Eachofthedigits1-9mustoccurexactlyonceineachofthe9`3x3`sub-boxesofthegrid.>The\'.\'characterindicatesemptycells.![](https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Sudoku-by-L2G-20050714.svg/250px-Sudoku-by-L2G-20050714.svg.png)```jsInput:board=[["5","3",".",".","7",".",".",".","."],["6",".",".","1","9","5",".",".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".",".","3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],[".",".",".",".","8",".",".","7","9"]]Output:[["5","3","4","6","7","8","9","1","2"],["6","7","2","1","9","5","3","4","8"],["1","9","8","3","4","2","5","6","7"],["8","5","9","7","6","1","4","2","3"],["4","2","6","8","5","3","7","9","1"],["7","1","3","9","2","4","8","5","6"],["9","6","1","5","3","7","2","8","4"],["2","8","7","4","1","9","6","3","5"],["3","4","5","2","8","6","1","7","9"]]```>Explanation:Theinputboardisshownaboveandtheonlyvalidsolutionisshownbelow:![](https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Sudoku-by-L2G-20050714_solution.svg/250px-Sudoku-by-L2G-20050714_solution.svg.png)Constraints:*board.length==9*board[i].length==9*board[i][j]isadigitor\'.\'.Itisguaranteedthattheinputboardhasonlyonesolution.###Analyze该题有一个难点:需要明确递归的队列是啥。1.在这里递归队列是数独中的`.`的下标。2.接着根据该队列进行递归操作,对横向、竖向、3x3内的位置信息作记录。*若横向、纵向、3x3的位置没有使用过,则将相应位置标记为已使用(true)*若横向、纵向、3x3的位置已经使用过,则进入下一个递归```js/***@param{character[][]}board*@return{void}Donotreturnanything,modifyboardin-placeinstead.*/varsolveSudoku=function(board){constobj={}constused=[]for(letx=0;x<9;x++){for(lety=0;y<9;y++){if(!obj[`rows${x}`])obj[`rows${x}`]={}if(!obj[`columns${y}`])obj[`columns${y}`]={}constblockX=Math.floor(x/3)constblockY=Math.floor(y/3)if(!obj[`block${blockX}${blockY}`])obj[`block${blockX}${blockY}`]={}if(board[x][y]!==\'.\'){obj[`rows${x}`][board[x][y]]=trueobj[`columns${y}`][board[x][y]]=trueobj[`block${blockX}${blockY}`][board[x][y]]=true}else{used.push({x,y})}}}dfs(board,0,obj,used)returnboard};vardfs=function(board,pos,obj,used){if(pos===used.length){for(letm=0;m<9;m++){for(letn=1;n<=9;n++){if(typeofobj[`rows${m}`][n]===\'number\'){board[m][obj[`rows${m}`][n]]=String(n)}}}return}const{x,y}=used[pos]//datasourcefor(leti=1;i<=9;i++){constblockX=Math.floor(x/3)constblockY=Math.floor(y/3)if((obj[`rows${x}`][String(i)]===undefined||obj[`rows${x}`][String(i)]===false)&&!obj[`columns${y}`][String(i)]&&!obj[`block${blockX}${blockY}`][String(i)]){obj[`rows${x}`][String(i)]=yobj[`columns${y}`][String(i)]=trueobj[`block${blockX}${blockY}`][String(i)]=truedfs(board,pos+1,obj,used)obj[`rows${x}`][String(i)]=falseobj[`columns${y}`][String(i)]=falseobj[`block${blockX}${blockY}`][String(i)]=false}}}```'},{name:"38.Count_and_Say.md",path:"/LeetCode/38.Count_and_Say.md",type:"file",mdconf:{abbrlink:"q232tci8"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1292,extension:".md",relative:"/LeetCode/38.Count_and_Say.md",isEmpty:!1,content:'\x3c!--abbrlink:q232tci8--\x3e###title报数序列是指一个整数序列,按照其中的整数的顺序进行报数,得到下一个数。其前五项如下:```1.12.113.214.12115.111221```1被读作"one1"("一个一"),即11。11被读作"two1s"("两个一"）,即21。21被读作"one2","one1"（"一个二","一个一"),即1211。给定一个正整数n,输出报数序列的第n项。注意:整数顺序将表示为一个字符串。示例1:```输入:1输出:"1"```示例2:```输入:4输出:"1211"```###analyze题目被吐槽啊,看[Look-and-SaySequence](https://www.geeksforgeeks.org/look-and-say-sequence/)比较容易理解题意。用递归的思路解题。```jsconstcacheObj={1:\'1\'}/***@param{number}n*@return{string}*/varcountAndSay=function(n){//5if(cacheObj[n]){returncacheObj[n]}else{constfindValue=countAndSay(n-1)//1211letstr=\'\'lettmp=0//截断不同数字的下标for(leti=0;i<findValue.length;i++){if(findValue[i]!==findValue[i+1]){str+=i-tmp+1str+=findValue[i]tmp=i+1}}cacheObj[n]=strreturnstr}};```'},{name:"39.Combination_Sum.md",path:"/LeetCode/39.Combination_Sum.md",type:"file",mdconf:{abbrlink:"r989473s"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2989,extension:".md",relative:"/LeetCode/39.Combination_Sum.md",isEmpty:!1,content:"\x3c!--abbrlink:r989473s--\x3e###39.CombinationSumGivenanarrayofdistinctintegerscandidatesandatargetintegertarget,`returnalistofalluniquecombinationsofcandidates`wherethechosennumberssumtotarget.Youmayreturnthecombinationsinanyorder.`Thesamenumbermaybechosenfromcandidatesanunlimitednumberoftimes`.Twocombinationsareuniqueifthefrequencyofatleastoneofthechosennumbersisdifferent.Itisguaranteedthatthenumberofuniquecombinationsthatsumuptotargetislessthan150combinationsforthegiveninput.Example1:```jsInput:candidates=[2,3,6,7],target=7Output:[[2,2,3],[7]]```Explanation:2and3arecandidates,and2+2+3=7.Notethat2canbeusedmultipletimes.7isacandidate,and7=7.Thesearetheonlytwocombinations.Example2:```jsInput:candidates=[2,3,5],target=8Output:[[2,2,2,2],[2,3,3],[3,5]]```Example3:```jsInput:candidates=[2],target=1Output:[]```Example4:```jsInput:candidates=[1],target=1Output:[[1]]```Example5:```jsInput:candidates=[1],target=2Output:[[1,1]]```Constraints:*1<=candidates.length<=30*1<=candidates[i]<=200*Allelementsofcandidatesaredistinct.*1<=target<=500###analyze根据题目`returnalistofalluniquecombinationsofcandidates`可以看出此题属于`组合类型`问题。target=7*2*2*2*2当前及后续值减支*3√*6当前及后续值减支*7*3*3*6*7*6*7*3*3*3*6*7*6*6*7√下面给出两个ac了的写法,思路大体相同,个人推荐拆成两个函数的第二种写法:写法一:```js/***@param{number[]}candidates*@param{number}target*@return{number[][]}*/varcombinationSum=function(candidates,target){constresult=[]constDFS=function(sum,arr,start){if(sum===target){result.push(arr.slice())return}if(sum>target){return}for(leti=start;i<candidates.length;i++){sum+=candidates[i]arr.push(candidates[i])DFS(sum,arr,i)arr.pop(candidates[i])sum-=candidates[i]}}DFS(0,[],0,candidates)returnresult};```写法二:```js/***@param{number[]}candidates*@param{number}target*@return{number[][]}*/varcombinationSum=function(candidates,target){constresult=[]recurcive(candidates,target,0,[],result)returnresult};varrecurcive=function(candidates,target,start,temp,result){if(target<0){return}if(target===0){result.push([...temp])return}for(leti=start;i<candidates.length;i++){temp.push(candidates[i])target=target-candidates[i]recurcive(candidates,target,i,temp,result)target=target+candidates[i]temp.pop(candidates[i])}}```"},{name:"40.Combination_Sum_II.md",path:"/LeetCode/40.Combination_Sum_II.md",type:"file",mdconf:{abbrlink:"fr4ry4zx"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2730,extension:".md",relative:"/LeetCode/40.Combination_Sum_II.md",isEmpty:!1,content:"\x3c!--abbrlink:fr4ry4zx--\x3e###40.CombinationSumIIGivenacollectionofcandidatenumbers(candidates)andatargetnumber(target),findalluniquecombinationsincandidateswherethecandidatenumberssumtotarget.Eachnumberincandidatesmay`onlybeusedonce`inthecombination.Note:Thesolutionsetmust`notcontainduplicatecombinations`.Example1:```jsInput:candidates=[10,1,2,7,6,1,5],target=8Output:[[1,1,6],[1,2,5],[1,7],[2,6]]```Example2:```jsInput:candidates=[2,5,2,1,2],target=5Output:[[1,2,2],[5]]```Constraints:*1<=candidates.length<=100*1<=candidates[i]<=50*1<=target<=30###analyze是[题目39](https://github.com/MuYunyun/blog/blob/master/LeetCode/39.组合总和/index.js)的改版,在DFS的基础上,对于题目要求`解集不能包含重复的组合`要稍加处理。思路:递归解组合问题。1.对candidates排序。2.对这种情况要过滤:`i!==start&&candidates[i]===candidates[i-1]`,可以以([1,1,2],3)这个例子进行思考不产生两个[1,2]。解法一:```js/***@param{number[]}candidates*@param{number}target*@return{number[][]}*/varcombinationSum2=function(candidates,target){constresult=[]constsortCandidates=candidates.sort((r1,r2)=>r1-r2)constDFS=function(sum,arr,start){if(sum===target){result.push(arr.slice())return}if(sum>target){return}for(leti=start;i<sortCandidates.length;i++){if(i!==start&&sortCandidates[i]===sortCandidates[i-1]){//[1,1,2],3。避免产生两个[1,2]continue}sum+=sortCandidates[i]arr.push(sortCandidates[i])DFS(sum,arr,i+1)arr.pop(sortCandidates[i])sum-=sortCandidates[i]}}DFS(0,[],0)returnresult};```解法二:```js/***@param{number[]}candidates*@param{number}target*@return{number[][]}*/varcombinationSum2=function(candidates,target){constresult=[]constsorted=candidates.sort((r1,r2)=>r1-r2)recurcive(sorted,target,0,[],result)returnresult};varrecurcive=function(candidates,target,start,temp,result){if(target<0){return}if(target===0){result.push([...temp])return}for(leti=start;i<candidates.length;i++){if(candidates[i]===candidates[i-1]&&i!==start){continue}temp.push(candidates[i])target=target-candidates[i]recurcive(candidates,target,i+1,temp,result)target=target+candidates[i]temp.pop(candidates[i])}}```"},{name:"46.Permutations.md",path:"/LeetCode/46.Permutations.md",type:"file",mdconf:{abbrlink:"mr9nck5w"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1198,extension:".md",relative:"/LeetCode/46.Permutations.md",isEmpty:!1,content:"\x3c!--abbrlink:mr9nck5w--\x3e###46.PermutationsGivenanarraynumsofdistinctintegers,returnallthepossiblepermutations.Youcanreturntheanswerinanyorder.Example1:```jsInput:nums=[1,2,3]Output:[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]```Example2:```jsInput:nums=[0,1]Output:[[0,1],[1,0]]```Example3:```jsInput:nums=[1]Output:[[1]]```Constraints:*1<=nums.length<=6*-10<=nums[i]<=10*`Alltheintegersofnumsareunique`###analyze该问题可以看成为一道排列问题,排列问题的一种常见解法是回溯法:```bash*1*2*3*3*2*2*1*3*3*1*3*1*2*2*1``````js/***@param{number[]}nums*@return{number[][]}*/varpermute=function(nums){constres=[]backtracking(nums,[],res)returnres};varbacktracking=function(nums,temp,res){if(temp.length===nums.length){res.push([...temp])return}for(leti=0;i<nums.length;i++){if(!temp.includes(nums[i])){temp.push(nums[i])backtracking(nums,temp,res)temp.pop(nums[i])}else{continue}}}```"},{name:"47.Permutations_II.md",path:"/LeetCode/47.Permutations_II.md",type:"file",mdconf:{abbrlink:"ypmrd4to"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2265,extension:".md",relative:"/LeetCode/47.Permutations_II.md",isEmpty:!1,content:"\x3c!--abbrlink:ypmrd4to--\x3e###47.Permutations_IIGivenacollectionofnumbers,nums,thatmightcontainduplicates,returnallpossibleuniquepermutationsinanyorder.Example1:```jsInput:nums=[1,1,2]Output:[[1,1,2],[1,2,1],[2,1,1]]```Example2:```jsInput:nums=[1,2,3]Output:[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]```Constraints:*1<=nums.length<=8*-10<=nums[i]<=10###analyze[112]*1*1*2*2*1*1(jump,该位置上1已经在之前被使用过了,因此需跳过)*2*1*1*1(jump)思路:回溯法解排列问题。需要注意此题允许nums里面存有相同的数字。在此引入`used`数组来存储回溯过程中已使用的值。```js/***@param{number[]}nums*@return{number[][]}*/varpermuteUnique=function(nums){constres=[]backtracking(nums,[],[],res)returnres};varbacktracking=function(nums,used,temp,res){if(temp.length===nums.length){for(leti=0;i<res.length;i++){//adigitappearsonlyonce.if(res[i].toString()===temp.toString())return}res.push([...temp])return}for(leti=0;i<nums.length;i++){//jumpsameusedindex.if(used.indexOf(i)>-1)continuetemp.push(nums[i])used.push(i)backtracking(nums,used,temp,res)temp.pop(nums[i])used.pop(i)}}```上述解法在去重的步骤上比较耗时,提交的时候报超时错误,进行如下优化:```js/***@param{number[]}nums*@return{number[][]}*/varpermuteUnique=function(nums){constres=[]constsortNums=nums.sort((r1,r2)=>r1-r2)backtracking(sortNums,[],[],res)returnres};varbacktracking=function(nums,used,temp,res){if(temp.length===nums.length){res.push([...temp])return}for(leti=0;i<nums.length;i++){//如果当前下标被使用过或者当前下标对应的值已经在之前被使用过了,则跳过。if(used.indexOf(i)>-1||(nums[i]===nums[i-1]&&used.indexOf(i-1)===-1))continuetemp.push(nums[i])used.push(i)backtracking(nums,used,temp,res)temp.pop(nums[i])used.pop(i)}}```"},{name:"48.Rotate_Image.md",path:"/LeetCode/48.Rotate_Image.md",type:"file",mdconf:{abbrlink:"izwocliq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1343,extension:".md",relative:"/LeetCode/48.Rotate_Image.md",isEmpty:!1,content:"\x3c!--abbrlink:izwocliq--\x3e###title给定一个n×n的二维矩阵表示一个图像。将图像顺时针旋转90度。说明:你必须在原地旋转图像,这意味着你需要直接修改输入的二维矩阵。请不要使用另一个矩阵来旋转图像。示例1:```给定matrix=[[1,2,3],[4,5,6],[7,8,9]],原地旋转输入矩阵,使其变为:[[7,4,1],[8,5,2],[9,6,3]]```示例2:```给定matrix=[[5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16]],原地旋转输入矩阵,使其变为:[[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]]```###analyze这类题目可以采用如下思路:1.matrix.reverse(),得```[[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]]```2.然后以左上角到右下角的线作为翻转线进行翻转,这里找规律```123456只需对4进行处理78978``````js/***@param{number[][]}matrix*@return{void}Donotreturnanything,modifymatrixin-placeinstead.*/varrotate=function(matrix){matrix.reverse()lettmpfor(letx=0;x<matrix.length;x++){for(lety=0;y<x;y++){tmp=matrix[x][y]matrix[x][y]=matrix[y][x]matrix[y][x]=tmp}}console.log(matrix)};```"},{name:"49.Group_Anagrams.md",path:"/LeetCode/49.Group_Anagrams.md",type:"file",mdconf:{abbrlink:"ocmgoy82"},birthtime:"2022-01-16",mtime:"2022-01-16",size:827,extension:".md",relative:"/LeetCode/49.Group_Anagrams.md",isEmpty:!1,content:'\x3c!--abbrlink:ocmgoy82--\x3e###titleGivenanarrayofstrings,groupanagramstogether.Example:```jsInput:["eat","tea","tan","ate","nat","bat"],Output:[["ate","eat","tea"],["nat","tan"],["bat"]]```Note:Allinputswillbeinlowercase.Theorderofyouroutputdoesnotmatter.###analyze```js/***@param{string[]}strs*@return{string[][]}*/vargroupAnagrams=function(strs){consttmpObj={}for(leti=0;i<strs.length;i++){constsortStr=strs[i].split(\'\').sort().join(\'\')if(tmpObj[sortStr]){tmpObj[sortStr].push(strs[i])}else{tmpObj[sortStr]=[strs[i]]}}constresult=[]constkeyArr=Object.keys(tmpObj)for(leti=0;i<keyArr.length;i++){result.push(tmpObj[keyArr[i]])}returnresult}```'},{name:"50.Pow.md",path:"/LeetCode/50.Pow.md",type:"file",mdconf:{abbrlink:"3xsoythc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:545,extension:".md",relative:"/LeetCode/50.Pow.md",isEmpty:!1,content:"\x3c!--abbrlink:3xsoythc--\x3e###title实现pow(x,n),即计算x的n次幂函数。示例1:```输入:2.00000,10输出:1024.00000```示例2:```输入:2.10000,3输出:9.26100```示例3:```输入:2.00000,-2输出:0.25000解释:2-2=1/22=1/4=0.25```说明:*-100.0<x<100.0*n是32位有符号整数,其数值范围是[−231,231−1]###analyze```js/***@param{number}x*@param{number}n*@return{number}*/varmyPow=function(x,n){returnMath.pow(x,n)}```"},{name:"51.N-Queens.md",path:"/LeetCode/51.N-Queens.md",type:"file",mdconf:{abbrlink:"s62nzkca"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3036,extension:".md",relative:"/LeetCode/51.N-Queens.md",isEmpty:!1,content:'\x3c!--abbrlink:s62nzkca--\x3e###51.N-QueensThen-queenspuzzleistheproblemofplacing`n`queensonan`nxn`chessboardsuchthatnotwoqueensattackeachother.Given`anintegern`,returnalldistinctsolutionstothen-queenspuzzle.Eachsolutioncontainsadistinctboardconfigurationofthen-queens\'placement,where\'Q\'and\'.\'bothindicateaqueenandanemptyspace,respectively.Example1:```jsInput:n=4Output:[[".Q..","...Q","Q...","..Q."],["..Q.","Q...","...Q",".Q.."]].Q....Q....QorQ...Q......Q..Q..Q..```Explanation:Thereexisttwodistinctsolutionstothe4-queenspuzzleasshownabove.Example2:```jsInput:n=1Output:[["Q"]]```*Constraints:*1<=n<=9###Analyze```js01230.Q..1...Q2Q...3..Q.```关于斜对角线上的限制可以得出以下两条规律。1.罗列从`右上到左下`斜线点发现规律:`横坐标与纵坐标之和为定值`。*`(0,0)`*`(0,1)、(1,0)`*`(0,2)、(1,1)、(2,0)`*`(0,3)、(1,2)、(2,1)、(3,0)`*`(1,3)、(2,2)、(3,1)`*`(2,3)、(3,2)`*`(3,3)`2.罗列从`左上到右下`斜线点发现规律:`横坐标与纵坐标之差为定值`。*`(3,0)`*`(2,0)、(3,1)`*`(1,0)、(2,1)、(3,2)`*`(0,0)、(1,1)、(2,2)、(3,3)`*`(0,1)、(1,2)、(2,3)`*`(0,2)、(1,3)`*`(0,3)````js/***@param{number}n*@return{string[][]}*/varsolveNQueens=function(n){constresult=[]constlimit={used:[],x:[],y:[],sum:[],diff:[]}handleNQueens(n,0,limit,result)returnresult};//eg:whennis4,arris[["0,1","1,3","2,0","3,2"],["0,2","1,0","2,3","3,1"]]vargenerate=(arr)=>{constxArr=[]for(letx=0;x<arr.length;x++){const[queueX,queueY]=arr[x].split(\',\')letyStr=\'\'for(lety=0;y<arr.length;y++){if(x===Number(queueX)&&y===Number(queueY)){yStr=yStr+\'Q\'}else{yStr=yStr+\'.\'}}xArr.push(yStr)}returnxArr}//handlethepositionwiththeindexrowfromnQueue.varhandleNQueens=(n,index,limit,result)=>{if(limit.x.length===n){result.push(generate([...limit.used]))return}//第index行安置在第几列中for(lety=0;y<n;y++){constsum=index+yconstdiff=index-yif(limit.used.indexOf(`${index},${y}`)>-1||limit.x.indexOf(index)>-1||limit.y.indexOf(y)>-1||limit.sum.indexOf(sum)>-1||limit.diff.indexOf(diff)>-1){continue}limit.used.push(`${index},${y}`)limit.x.push(index)limit.y.push(y)limit.sum.push(sum)limit.diff.push(diff)handleNQueens(n,index+1,limit,result)limit.used.pop()limit.x.pop()limit.y.pop()limit.sum.pop()limit.diff.pop()}}```'},{name:"52.N-Queens_II.md",path:"/LeetCode/52.N-Queens_II.md",type:"file",mdconf:{abbrlink:"dap4pd1s"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2900,extension:".md",relative:"/LeetCode/52.N-Queens_II.md",isEmpty:!1,content:'\x3c!--abbrlink:dap4pd1s--\x3e###51.N-QueensThen-queenspuzzleistheproblemofplacingnqueensonannxnchessboardsuchthatnotwoqueensattackeachother.Givenanintegern,returnthenumberofdistinctsolutionstothen-queenspuzzle.Example1:```jsInput:n=4Output:2Explanation:Therearetwodistinctsolutionstothe4-queenspuzzleasshown..Q....Q....QorQ...Q......Q..Q..Q..```Explanation:Thereexisttwodistinctsolutionstothe4-queenspuzzleasshownabove.Example2:```jsInput:n=1Output:1```*Constraints:*1<=n<=9###Analyze```js01230.Q..1...Q2Q...3..Q.```关于斜对角线上的限制可以得出以下两条规律。1.罗列从`右上到左下`斜线点发现规律:`横坐标与纵坐标之和为定值`。*`(0,0)`*`(0,1)、(1,0)`*`(0,2)、(1,1)、(2,0)`*`(0,3)、(1,2)、(2,1)、(3,0)`*`(1,3)、(2,2)、(3,1)`*`(2,3)、(3,2)`*`(3,3)`2.罗列从`左上到右下`斜线点发现规律:`横坐标与纵坐标之差为定值`。*`(3,0)`*`(2,0)、(3,1)`*`(1,0)、(2,1)、(3,2)`*`(0,0)、(1,1)、(2,2)、(3,3)`*`(0,1)、(1,2)、(2,3)`*`(0,2)、(1,3)`*`(0,3)````js/***@param{number}n*@return{number}*/vartotalNQueens=function(n){constresult=[]constlimit={used:[],x:[],y:[],sum:[],diff:[]}handleNQueens(n,0,limit,result)returnresult.length};//eg:whennis4,arris[["0,1","1,3","2,0","3,2"],["0,2","1,0","2,3","3,1"]]vargenerate=(arr)=>{constxArr=[]for(letx=0;x<arr.length;x++){const[queueX,queueY]=arr[x].split(\',\')letyStr=\'\'for(lety=0;y<arr.length;y++){if(x===Number(queueX)&&y===Number(queueY)){yStr=yStr+\'Q\'}else{yStr=yStr+\'.\'}}xArr.push(yStr)}returnxArr}//handlethepositionwiththeindexrowfromnQueue.varhandleNQueens=(n,index,limit,result)=>{if(limit.x.length===n){result.push(generate([...limit.used]))return}//第index行安置在第几列中for(lety=0;y<n;y++){constsum=index+yconstdiff=index-yif(limit.used.indexOf(`${index},${y}`)>-1||limit.x.indexOf(index)>-1||limit.y.indexOf(y)>-1||limit.sum.indexOf(sum)>-1||limit.diff.indexOf(diff)>-1){continue}limit.used.push(`${index},${y}`)limit.x.push(index)limit.y.push(y)limit.sum.push(sum)limit.diff.push(diff)handleNQueens(n,index+1,limit,result)limit.used.pop()limit.x.pop()limit.y.pop()limit.sum.pop()limit.diff.pop()}}```'},{name:"61.Rotate_List.md",path:"/LeetCode/61.Rotate_List.md",type:"file",mdconf:{abbrlink:"yu3m7erj"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2e3,extension:".md",relative:"/LeetCode/61.Rotate_List.md",isEmpty:!1,content:"\x3c!--abbrlink:yu3m7erj--\x3e###61.RotateListGivenalinkedlist,rotatethelisttotherightbykplaces,where`kisnon-negative`.Example1:```jsInput:1->2->3->4->5->NULL,k=2Output:4->5->1->2->3->NULLExplanation:rotate1stepstotheright:5->1->2->3->4->NULLrotate2stepstotheright:4->5->1->2->3->NULL```Example2:```jsInput:0->1->2->NULL,k=4Output:2->0->1->NULLExplanation:rotate1stepstotheright:2->0->1->NULLrotate2stepstotheright:1->2->0->NULLrotate3stepstotheright:0->1->2->NULLrotate4stepstotheright:2->0->1->NULL```###Analyze分析:该题可以转化为从尾部向前数到第k个元素,将该元素作为头节点,同时将初始尾节点的下一个节点指向初始头节点。1.第一步:遍历一遍链表得到初始尾结点last;2.第二步:l与r距离保持为modK+1;3.第三步:l与r同时向右移动,直到r为null,则l为要分割的元素;>此外如果链表长度为0或者链表长度与k相等时,则链表实际上没有旋转交换位置。```jslrdummy->1->2->3->4->5->NULL..lrdummy->1->2->3->4->5->NULL``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@param{number}k*@return{ListNode}*/varrotateRight=function(head,k){constdummy=newListNode(0)dummy.next=headletcount=0letlast=dummywhile(last.next){last=last.nextcount++}if(count===0||count===k)returndummy.nextconstmodK=k%countletdiff=modK+1letl=dummyletr=dummywhile(diff--){r=r.next}while(r){r=r.nextl=l.next}last.next=dummy.nextdummy.next=l.nextl.next=nullreturndummy.next}```###SisterTitle19"},{name:"62.Unique_Paths.md",path:"/LeetCode/62.Unique_Paths.md",type:"file",mdconf:{abbrlink:"95geaysm"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1976,extension:".md",relative:"/LeetCode/62.Unique_Paths.md",isEmpty:!1,content:"\x3c!--abbrlink:95geaysm--\x3e###62.UniquePathsArobotislocatedatthetop-leftcornerofamxngrid(marked'Start'inthediagrambelow).Therobotcanonlymoveeither`downorright`atanypointintime.Therobotistryingtoreachthebottom-rightcornerofthegrid(marked'Finish'inthediagrambelow).Howmanypossibleuniquepathsarethere?Example1:![](https://assets.leetcode.com/uploads/2018/10/22/robot_maze.png)```jsInput:m=3,n=7Output:28```Example2:```jsInput:m=3,n=2Output:3```Explanation:Fromthetop-leftcorner,thereareatotalof3waystoreachthebottom-rightcorner:1.Right->Down->Down2.Down->Down->Right3.Down->Right->DownExample3:```jsInput:m=7,n=3Output:28```Example4:```jsInput:m=3,n=3Output:6```*Constraints:*1<=m,n<=100*It'sguaranteedthattheanswerwillbelessthanorequalto2*109.###Analyze记忆递归法:```jsconstcache={}/***@param{number}m*@param{number}n*@return{number}*/varuniquePaths=function(m,n){if(m===1||n===1){return1}if(cache[`${m}~${n}`]){returncache[`${m}~${n}`]}else{constnums=uniquePaths(m-1,n)+uniquePaths(m,n-1)cache[`${m}~${n}`]=numsreturnnums}}```动态规划法:```js/***@param{number}m*@param{number}n*@return{number}*/varuniquePaths=function(m,n){constcache={[`${m-1}_${n-1}`]:1}for(letx=m-1;x>=0;x--){for(lety=n-1;y>=0;y--){if(x===m-1&&y===n-1){continue}if(y+1===n){cache[`${x}_${y}`]=cache[`${x+1}_${y}`]}elseif(x+1===m){cache[`${x}_${y}`]=cache[`${x}_${y+1}`]}else{cache[`${x}_${y}`]=cache[`${x}_${y+1}`]+cache[`${x+1}_${y}`]}}}returncache['0_0']}```###SimilarTitle63"},{name:"63.Unique_Paths_II.md",path:"/LeetCode/63.Unique_Paths_II.md",type:"file",mdconf:{abbrlink:"u12sjh1d"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2044,extension:".md",relative:"/LeetCode/63.Unique_Paths_II.md",isEmpty:!1,content:"\x3c!--abbrlink:u12sjh1d--\x3e###63.UniquePathsIIArobotislocatedatthetop-leftcornerofamxngrid(marked'Start'inthediagrambelow).Therobotcanonlymoveeither`downorright`atanypointintime.Therobotistryingtoreachthebottom-rightcornerofthegrid(marked'Finish'inthediagrambelow).Nowconsiderifsomeobstaclesareaddedtothegrids.Howmanyuniquepathswouldtherebe?Anobstacleandspaceismarkedas1and0respectivelyinthegrid.Example1:![](https://assets.leetcode.com/uploads/2020/11/04/robot1.jpg)```jsInput:obstacleGrid=[[0,0,0],[0,1,0],[0,0,0]]Output:2```Explanation:Thereisoneobstacleinthemiddleofthe3x3gridabove.Therearetwowaystoreachthebottom-rightcorner:1.Right->Right->Down->Down2.Down->Down->Right->RightExample2:![](https://assets.leetcode.com/uploads/2020/11/04/robot2.jpg)```jsInput:obstacleGrid=[[0,1],[0,0]]Output:1```*Constraints:*m==obstacleGrid.length*n==obstacleGrid[i].length*1<=m,n<=100*obstacleGrid[i][j]is0or1.###Analyze```js/***@param{number[][]}obstacleGrid*@return{number}*/varuniquePathsWithObstacles=function(obstacleGrid){constm=obstacleGrid.lengthconstn=obstacleGrid[0].lengthif(obstacleGrid[m-1][n-1]===1)return0constcache={[`${m-1}_${n-1}`]:1}for(leti=m-1;i>=0;i--){for(letj=n-1;j>=0;j--){if(obstacleGrid[i][j]===1){continue}if(i===m-1&&j===n-1){continue}elseif(i===m-1){if(!cache[`${i}_${j+1}`])continuecache[`${i}_${j}`]=cache[`${i}_${j+1}`]}elseif(j===n-1){if(!cache[`${i+1}_${j}`])continuecache[`${i}_${j}`]=cache[`${i+1}_${j}`]}else{cache[`${i}_${j}`]=(cache[`${i+1}_${j}`]||0)+(cache[`${i}_${j+1}`]||0)}}}returncache[`0_0`]||0}```###SimilarTitle62"},{name:"64.Minimum_Path_Sum.md",path:"/LeetCode/64.Minimum_Path_Sum.md",type:"file",mdconf:{abbrlink:"pb5iw1p1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2139,extension:".md",relative:"/LeetCode/64.Minimum_Path_Sum.md",isEmpty:!1,content:"\x3c!--abbrlink:pb5iw1p1--\x3e###64.MinimumPathSumGivenamxngridfilledwith`non-negativenumbers`,findapathfromtoplefttobottomright,whichminimizesthesumofallnumbersalongitspath.Note:Youcanonly`moveeitherdownorright`atanypointintime.Example1:```js131151421Input:grid=[[1,3,1],[1,5,1],[4,2,1]]Output:7Explanation:Becausethepath1→3→1→1→1minimizesthesum.```Example2:```js123456Input:grid=[[1,2,3],[4,5,6]]Output:12```*m==grid.length*n==grid[i].length*1<=m,n<=200*0<=grid[i][j]<=100###analyze动态规划一:```js/***@param{number[][]}grid*@return{number}*/varminPathSum=function(grid){constm=grid.lengthconstn=grid[0].lengthconstcache={}returnfindMinCount(m-1,n-1,grid,cache)}functionfindMinCount(x,y,grid,cache){if(cache[`${x}~${y}`]){returncache[`${x}~${y}`]}letcount=0if(x===0&&y===0){count=grid[0][0]}elseif(x===0){count=findMinCount(0,y-1,grid,cache)+grid[0][y]}elseif(y===0){count=findMinCount(x-1,y,grid,cache)+grid[x][0]}if(x>0&&y>0){count=Math.min(findMinCount(x-1,y,grid,cache),findMinCount(x,y-1,grid,cache))+grid[x][y]}cache[`${x}~${y}`]=countreturncount}```动态规划二:```js/***@param{number[][]}grid*@return{number}*/varminPathSum=function(grid){constmLength=grid.lengthconstnLength=grid[0].lengthconstcache=[]for(letm=mLength-1;m>=0;m--){for(letn=nLength-1;n>=0;n--){if(!cache[m])cache[m]=[]if(m+1>=mLength&&n+1>=nLength){cache[m][n]=grid[m][n]}elseif(m+1>=mLength){cache[m][n]=cache[m][n+1]+grid[m][n]}elseif(n+1>=nLength){cache[m][n]=cache[m+1][n]+grid[m][n]}else{cache[m][n]=Math.min(cache[m+1][n],cache[m][n+1])+grid[m][n]}}}returncache[0][0]}```###SimilarTitle120"},{name:"66.Plus_One.md",path:"/LeetCode/66.Plus_One.md",type:"file",mdconf:{abbrlink:"b7ztxnsa"},birthtime:"2022-01-16",mtime:"2022-01-16",size:714,extension:".md",relative:"/LeetCode/66.Plus_One.md",isEmpty:!1,content:"\x3c!--abbrlink:b7ztxnsa--\x3e/***@param{number[]}digits*@return{number[]}*/varplusOne=function(digits){letlength=digits.lengthlettag=0while(length){if(length===digits.length){if(digits[length-1]+1+tag>=10){digits[length-1]=0tag=1}else{digits[length-1]=digits[length-1]+1tag=0break}}else{if(digits[length-1]+tag>=10){digits[length-1]=0tag=1}else{digits[length-1]=digits[length-1]+1tag=0break}}length--}if(tag===1){digits.unshift(1)}returndigits};"},{name:"67.Add_Binary.md",path:"/LeetCode/67.Add_Binary.md",type:"file",mdconf:{abbrlink:"2z18f815"},birthtime:"2022-01-16",mtime:"2022-01-16",size:681,extension:".md",relative:"/LeetCode/67.Add_Binary.md",isEmpty:!1,content:"\x3c!--abbrlink:2z18f815--\x3e###tip注意`x+y+tag`的判断###Analyze```js/***@param{string}a*@param{string}b*@return{string}*/varaddBinary=function(a,b){constal=a.length,bl=b.lengthconstlength=Math.max(al,bl)lettag=0letstr=''for(leti=0;i<length;i++){constx=i<al?+a[al-i-1]:0consty=i<bl?+b[bl-i-1]:0constaddValue=((x+y+tag===1)||(x+y+tag===3))?'1':'0'str+=addValueif(x+y+tag>1){tag=1}else{tag=0}}if(tag===1){str+='1'}returnstr.split('').reverse().join('')};```"},{name:"69.Sqrt_X.md",path:"/LeetCode/69.Sqrt_X.md",type:"file",mdconf:{abbrlink:"ipo96793"},birthtime:"2022-01-16",mtime:"2022-01-16",size:166,extension:".md",relative:"/LeetCode/69.Sqrt_X.md",isEmpty:!1,content:"\x3c!--abbrlink:ipo96793--\x3e```js/***@param{number}x*@return{number}*/varmySqrt=function(x){return+Math.sqrt(x).toString().split('.')[0]};```"},{name:"70.Climbing_Stairs.md",path:"/LeetCode/70.Climbing_Stairs.md",type:"file",mdconf:{abbrlink:"ufw4sj6f"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1509,extension:".md",relative:"/LeetCode/70.Climbing_Stairs.md",isEmpty:!1,content:"\x3c!--abbrlink:ufw4sj6f--\x3e###70.ClimbingStairsYouareclimbingastaircase.Ittakesnstepstoreachthetop.Eachtimeyoucaneitherclimb1or2steps.Inhowmanydistinctwayscanyouclimbtothetop?Example1:```jsInput:n=2Output:2Explanation:Therearetwowaystoclimbtothetop.1.1step+1step2.2steps```Example2:```jsInput:n=3Output:3Explanation:Therearethreewaystoclimbtothetop.1.1step+1step+1step2.1step+2steps3.2steps+1step```###Analyze*到达当前的台阶的方法有两种:*一种方法是从`上一级台阶加一`;*另一种方法是从`上上一级台阶加二`;所以到达当前台阶的方法之和可以用以下式子表示:`f(n)=f(n-1)+f(n-2)`。因此该问题与解斐波那契数列是相同的场景。以下提供`记忆化递归`与`动态规划`两种解法:*记忆化递归方法:```jsconstarr=[1,2]/***@param{number}n*@return{number}*/varclimbStairs=function(n){if(n===1)returnarr[0]if(n===2)returnarr[1]if(arr[n])returnarr[n]arr[n]=climbStairs(n-1)+climbStairs(n-2)returnarr[n]}```*[动态规划](https://github.com/MuYunyun/blog/blob/main/Algorithm/algorithm/dynamic_programming.md)方法:```js/***@param{number}n*@return{number}*/varclimbStairs=function(n){constarr=[1,2]for(leti=2;i<n;i++){arr[i]=arr[i-1]+arr[i-2]}returnarr[n-1]}```"},{name:"71.Simplify_Path.md",path:"/LeetCode/71.Simplify_Path.md",type:"file",mdconf:{abbrlink:"vo45d36y"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2083,extension:".md",relative:"/LeetCode/71.Simplify_Path.md",isEmpty:!1,content:'\x3c!--abbrlink:vo45d36y--\x3e###71.Simplify_PathGivenanabsolutepathforafile(Unix-style),simplifyit.Orinotherwords,convertittothecanonicalpath.InaUNIX-stylefilesystem,aperiod.referstothecurrentdirectory.Furthermore,adoubleperiod..movesthedirectoryupalevel.Formoreinformation,see:AbsolutepathvsrelativepathinLinux/UnixNotethatthereturnedcanonicalpathmustalways`beginwithaslash/`,andtheremustbe`onlyasingleslash/betweentwodirectorynames`.Thelastdirectoryname(ifitexists)must`notendwithatrailing/`.Also,thecanonicalpathmustbetheshorteststringrepresentingtheabsolutepath.Example1:Explanation:Notethatthereisnotrailingslashafterthelastdirectoryname.```jsInput:"/home/"Output:"/home"```Example2:Explanation:Goingonelevelupfromtherootdirectoryisano-op,astherootlevelisthehighestlevelyoucango.```jsInput:"/../"Output:"/"```Example3:Explanation:Inthecanonicalpath,multipleconsecutiveslashesarereplacedbyasingleone.```jsInput:"/home//foo/"Output:"/home/foo"```Example4:```jsInput:"/a/./b/../../c/"Output:"/c"```Example5:```jsInput:"/a/../../b/../c//.//"Output:"/c"```Example6:```jsInput:"/a//b////c/d//././/.."Output:"/a/b/c"```###Analyze可以用栈的思想来完成解题;1.使用\'/\'分割path为得到数组;2.对以下几种情况分别处理:1.如果遇见\'.\'或者\'\',则忽略;2.如果遇见字母,则将其推入栈的末尾;3.如果遇见\'..\',则从栈末尾移除一个元素;```js/***@param{string}path*@return{string}*/varsimplifyPath=function(path){constpathArr=path.split(\'/\')conststack=[]for(leti=0;i<pathArr.length;i++){if(pathArr[i]===\'..\'){stack.pop()}elseif(pathArr[i]===\'.\'||pathArr[i]===\'\'){continue}else{stack.push(pathArr[i])}}return`/${stack.join(\'/\')}`}```###SimilarTitle20、150'},{name:"75.Sort_Colors.md",path:"/LeetCode/75.Sort_Colors.md",type:"file",mdconf:{abbrlink:"tozzlyqs"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2678,extension:".md",relative:"/LeetCode/75.Sort_Colors.md",isEmpty:!1,content:"\x3c!--abbrlink:tozzlyqs--\x3e###题目给定一个包含红色、白色和蓝色，一共n个元素的数组，原地对它们进行排序，使得相同颜色的元素相邻，并按照红色、白色、蓝色顺序排列。此题中，我们使用整数0、1和2分别表示红色、白色和蓝色。注意:不能使用代码库中的排序函数来解决这道题。示例:```js输入:[2,0,2,1,1,0]输出:[0,0,1,1,2,2]```进阶:一个直观的解决方案是使用计数排序的两趟扫描算法。首先，迭代计算出0、1和2元素的个数，然后按照0、1、2的排序，重写当前数组。你能想出一个仅使用常数空间的一趟扫描算法吗？###解题解法一:计数排序,在该题目中分别统计出0、1、2出现的个数,并将相应个数的0、1、2放回数组。>计数排序适用于数组元素非常有限的场景。```js输入[2,0,2,1,1,0]输出[0,1,2,1,1,0]预期结果[0,0,1,1,2,2]``````js/***@param{number[]}nums*@return{void}Donotreturnanything,modifynumsin-placeinstead.*/varsortColors=function(nums){letcountObj={}for(leti=0;i<nums.length;i++){constkey=nums[i]if(typeof(countObj[`${key}`])==='number'){countObj[`${key}`]=countObj[`${key}`]+1}else{countObj[`${key}`]=1}}constcount0=countObj[0]||0constcount1=countObj[1]||0constcount2=countObj[2]||0for(leti=0;i<count0+count1+count2;i++){if(i<count0){nums[i]=0}elseif(i>=count0&&i<count0+count1){nums[i]=1}elseif(i>=count1&&i<count0+count1+count2){nums[i]=2}}}```解法二:三路快排思路:三路快排的思想是同时排序小于选定值，等于选定值和大于选定值三种情况。在这里我们随机选取一个值v作为分界点,分别排序小于v，等于v和大于v的。该题中v为1。![](http://with.muyunyun.cn/9617f034f2e7d0535ac73d51612d2f07.jpg)```js/***@param{number[]}nums*@return{void}Donotreturnanything,modifynumsin-placeinstead.*/varsortColors=function(nums){/***nums[0,zero]=0*nums[two,nums.length-1]=2*/let[zero,two]=[0,nums.length-1]for(leti=0;i<=two;i++){if(nums[i]===0){[nums[i],nums[zero]]=[nums[zero],nums[i]]zero++}if(nums[i]===2){[nums[i],nums[two]]=[nums[two],nums[i]]i--two--}}}```该算法的时间复杂度为O(n),空间复杂度为O(1)。###镜像题目88、215"},{name:"76.Minimum_Window_Substring.md",path:"/LeetCode/76.Minimum_Window_Substring.md",type:"file",mdconf:{abbrlink:"pusrzoja"},birthtime:"2022-01-16",mtime:"2022-01-16",size:585,extension:".md",relative:"/LeetCode/76.Minimum_Window_Substring.md",isEmpty:!1,content:'\x3c!--abbrlink:pusrzoja--\x3e###title给你一个字符串S、一个字符串T，请在字符串S里面找出:包含T所有字母的最小子串。示例：```js输入:S="ADOBECODEBANC",T="ABC"输出:"BANC"说明：```如果S中不存这样的子串，则返回空字符串""。如果S中存在这样的子串，我们保证它是唯一的答案。###解题解法:滑动窗口,先略过(凉凉)```js/***@param{string}s*@param{string}t*@return{string}*/varminWindow=function(s,t){};```###SisterTitle3、209、438'},{name:"77.Combinations.md",path:"/LeetCode/77.Combinations.md",type:"file",mdconf:{abbrlink:"c92n6qd7"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3117,extension:".md",relative:"/LeetCode/77.Combinations.md",isEmpty:!1,content:"\x3c!--abbrlink:c92n6qd7--\x3e###77.CombinationsGiventwointegersnandk,returnallpossiblecombinationsofknumbersoutof1...n.Youmayreturntheanswerinanyorder.Example1:```jsInput:n=4,k=2Output:[[2,4],[3,4],[2,3],[1,2],[1,3],[1,4],]```Example2:```jsInput:n=1,k=1Output:[[1]]```Constraints:*1<=n<=20*1<=k<=n###analyzen:1,2,3,4k:2*1*2*3*4*2*3*4*3*4组合问题中,不同顺序的解为同一个。比如`[1,2],[2,1]`为相同解。此外可以发现规律,保留所有`增序排列的解`即为组合的解。```js/***@param{number}n*@param{number}k*@return{number[][]}*/varcombine=function(n,k){constresult=[]backTrace(n,k,1,[],result)returnresult};varbackTrace=function(n,k,index,temp,result){if(temp.length===k){if(ifIncrease(temp)){result.push([...temp])}return}for(leti=index;i<=n;i++){temp.push(i)backTrace(n,k,index+1,temp,result)temp.pop()}}varifIncrease=function(arr){for(leti=0;i<arr.length-1;i++){if(arr[i]>=arr[i+1])returnfalse}returntrue}```提交,此时报超时的错误。经排查发现,截支的地方存在问题,当前在temp中的值被重复使用了。修改如下```diff-backTrace(n,k,index+1,temp,result)+backTrace(n,k,i+1,temp,result)``````js/***@param{number}n*@param{number}k*@return{number[][]}*/varcombine=function(n,k){constresult=[]backTrace(n,k,1,[],result)returnresult};varbackTrace=function(n,k,index,temp,result){if(temp.length===k){result.push([...temp])return}for(leti=index;i<=n;i++){temp.push(i)backTrace(n,k,i+1,temp,result)temp.pop()}}```###回溯法剪支还是以`n=5,k=3`为例,上述代码中,实际遍历的顺序如下:```js*1*2*3*4*5*3*4*5*4*5*5//减支*2*3*4*5*4*5*5//减支*3*4*5*5//减支*4//减支```此时,当第一列的值到达3时,达到`搜索上界`,[3,4,5]是其中一个解。如果再往后遍历,4作为解的开头,则位数达不到3位,不满足要求了。同理第二列的搜索上界为4。第三列的搜索上界为5。接着结合代码进行优化:```js/***@param{number}n*@param{number}k*@return{number[][]}*/varcombine=function(n,k){constresult=[]backTrace(n,k,1,[],result)returnresult};varbackTrace=function(n,k,index,temp,result){if(temp.length===k){result.push([...temp])return}//题目可以转化为从搜索上界到n中要取的数字长度为(k-temp.length)。//可以得出搜索上界为:n-(k-temp.length)+1for(leti=index;i<=n-(k-temp.length)+1;i++){temp.push(i)backTrace(n,k,i+1,temp,result)temp.pop()}}```"},{name:"78.Subsets.md",path:"/LeetCode/78.Subsets.md",type:"file",mdconf:{abbrlink:"jfaw5hq9"},birthtime:"2022-01-16",mtime:"2022-01-16",size:912,extension:".md",relative:"/LeetCode/78.Subsets.md",isEmpty:!1,content:"\x3c!--abbrlink:jfaw5hq9--\x3e###78.SubsetsGivenanintegerarraynums,returnallpossiblesubsets(thepowerset).`Thesolutionsetmustnotcontainduplicatesubsets`.Example1:```jsInput:nums=[1,2,3]Output:[[],[1],[2],[1,2],[3],[1,3],[2,3],[1,2,3]]```Example2:```jsInput:nums=[0]Output:[[],[0]]```Constraints:*1<=nums.length<=10*-10<=nums[i]<=10###Analyze由题意可知该题是组合问题,可以使用回溯法解决。```js/***@param{number[]}nums*@return{number[][]}*/varsubsets=function(nums){constlist=[]consttmpList=[]backTrack(list,tmpList,nums,0)returnlist};functionbackTrack(list,tmpList,nums,start){list.push(tmpList.slice())for(leti=start;i<nums.length;i++){tmpList.push(nums[i])backTrack(list,tmpList,nums,i+1)tmpList.splice(tmpList.length-1,1)}}```"},{name:"79.Word_Search.md",path:"/LeetCode/79.Word_Search.md",type:"file",mdconf:{abbrlink:"8yspgf2t"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4457,extension:".md",relative:"/LeetCode/79.Word_Search.md",isEmpty:!1,content:'\x3c!--abbrlink:8yspgf2t--\x3e###79.WordSearchGivenan`mxn`boardandaword,findifthewordexistsinthegrid.Thewordcanbeconstructedfromlettersofsequentiallyadjacentcells,where"adjacent"cellsarehorizontallyorverticallyneighboring.The`samelettercellmaynotbeusedmorethanonce`.Example1:![](https://assets.leetcode.com/uploads/2020/11/04/word2.jpg)```jsInput:board=[["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]],word="ABCCED"Output:true```Example2:![](https://assets.leetcode.com/uploads/2020/11/04/word-1.jpg)```jsInput:board=[["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]],word="SEE"Output:true```Example3:![](https://assets.leetcode.com/uploads/2020/10/15/word3.jpg)```jsInput:board=[["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]],word="ABCB"Output:false```Constraints:*m===board.length*n===board[i].length*1<=m,n<=200*1<=word.length<=103*boardandwordconsistsonlyoflowercaseanduppercaseEnglishletters.```jsy列x行CAAAAABCD```AAB->true```jsy列x行aaaaaaaaaaaa```###Analyze```jsy列x行ABCEword:ABCBSFCSADEE```二维数组找路径适合用回溯法。每个节点根据`下、右、上、左`四个方向回溯查找元素。拿`ABCCED`作为例子,括号中为淘汰的值。A(S)->B(F)->C->C->E(空、E、C)->D```js/***@param{character[][]}board*@param{string}word*@return{boolean}*/varexist=function(board,word){for(letx=0;x<board.length;x++){for(lety=0;y<board[x].length;y++){if(word.length===1&&word[0]===board[x][y]){returntrue}if(word[0]===board[x][y]){constifValid=backTrace(board,word,1,x,y,[])if(ifValid)returnifValid}}}returnfalse};/***start:meansstartofword*x:row*y:column**/varbackTrace=(board,word,start,x,y,used)=>{used.push(`${x},${y}`)constuseBottom=used.indexOf(`${x+1},${y}`)===-1&&word[start]===(board[x+1]&&board[x+1][y])constuseRight=used.indexOf(`${x},${y+1}`)===-1&&word[start]===(board[x]&&board[x][y+1])constuseTop=used.indexOf(`${x-1},${y}`)===-1&&word[start]===(board[x-1]&&board[x-1][y])constuseLeft=used.indexOf(`${x},${y-1}`)===-1&&word[start]===(board[x]&&board[x][y-1])if(start===word.length-1&&(useRight||useBottom||useLeft||useTop)){returntrue}if(useBottom){consttag=backTrace(board,word,start+1,x+1,y,used)used.pop()if(tag)returntag}if(useRight){consttag=backTrace(board,word,start+1,x,y+1,used)used.pop()if(tag)returntag}if(useTop){consttag=backTrace(board,word,start+1,x-1,y,used)used.pop()if(tag)returntag}if(useLeft){consttag=backTrace(board,word,start+1,x,y-1,used)used.pop()if(tag)returntag}returnfalse}```思考:这道题的解法可以用来解决生活中部分「迷宫类」的问题。###优化*几个关键点*终止条件优化*使用for循环优化4个方向```js/***@param{character[][]}board*@param{string}word*@return{boolean}*/varexist=function(board,word){for(letx=0;x<board.length;x++){for(lety=0;y<board[x].length;y++){constifValid=backTrace(board,word,0,x,y,[])if(ifValid)returntrue}}returnfalse};vardirections=[[1,0],[0,1],[-1,0],[0,-1]]//下、右、上、左/***start:meansstartofword*x:row*y:column**/varbackTrace=(board,word,start,x,y,used)=>{constkey=`${x},${y}`if(start===word.length-1&&used.indexOf(key)===-1&&word[start]===(board[x]&&board[x][y])){returntrue}for(leti=0;i<directions.length;i++){if(word[start]===(board[x]&&board[x][y])&&used.indexOf(key)===-1){used.push(key)consttag=backTrace(board,word,start+1,x+directions[i][0],y+directions[i][1],used)used.pop()if(tag)returntrue}}returnfalse}```优化后代码量减少32%。###sistertitle130、200'},{name:"80.Remove_Duplicates_from_Sorted_Array_II.md",path:"/LeetCode/80.Remove_Duplicates_from_Sorted_Array_II.md",type:"file",mdconf:{abbrlink:"wu7uonrc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1894,extension:".md",relative:"/LeetCode/80.Remove_Duplicates_from_Sorted_Array_II.md",isEmpty:!1,content:"\x3c!--abbrlink:wu7uonrc--\x3e###题目给定一个排序数组，你需要在原地删除重复出现的元素，使得每个元素最多出现两次，返回移除后数组的新长度。`不要使用额外的数组空间`，你必须在原地修改输入数组并在使用O(1)额外空间的条件下完成。示例1:给定`nums=[1,1,1,2,2,3]`,函数应返回新长度length=5,并且原数组的前五个元素被修改为1,1,2,2,3。你`不需要考虑数组中超出新长度后面的元素`。示例2:给定`nums=[0,0,1,1,1,1,2,3,3]`,函数应返回新长度length=7,并且原数组的前五个元素被修改为0,0,1,1,2,3,3。你不需要考虑数组中超出新长度后面的元素。说明:为什么返回数值是整数，但输出的答案是数组呢?请注意，输入数组是以“引用”方式传递的，这意味着在函数里修改输入数组对于调用者是可见的。你可以想象内部操作如下:```js//nums是以“引用”方式传递的。也就是说，不对实参做任何拷贝intlen=removeDuplicates(nums);//在函数里修改输入数组对于调用者是可见的。//根据你的函数返回的长度,它会打印出数组中该长度范围内的所有元素。for(inti=0;i<len;i++){print(nums[i]);}```###解题![](http://with.muyunyun.cn/e1ebb0d0612908377d6aca476611f03d.jpg)```js/***@param{number[]}nums*@return{number}*/varremoveDuplicates=function(nums){if(nums.length<=2)returnnums.lengthletcur=1//新数组的下标位数for(leti=2;i<nums.length;i++){//对题目中每个元素最多出现两次的条件作限制if(nums[i]!==nums[cur-1]){nums[cur+1]=nums[i]cur++}}returncur+1}```###同类题目关键词:双指针。26、27、283。"},{name:"82.Remove_Duplicates_from_Sorted_List_II.md",path:"/LeetCode/82.Remove_Duplicates_from_Sorted_List_II.md",type:"file",mdconf:{abbrlink:"6jnx1v9f"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1569,extension:".md",relative:"/LeetCode/82.Remove_Duplicates_from_Sorted_List_II.md",isEmpty:!1,content:"\x3c!--abbrlink:6jnx1v9f--\x3e###RemoveDuplicatesfromSortedListIIGivena`sortedlinkedlist`,deleteallnodesthathaveduplicatenumbers,leavingonlydistinctnumbersfromtheoriginallist.Example1:```jsInput:1->2->3->3->4->4->5Output:1->2->5```Example2:```jsInput:1->1->1->2->3Output:2->3```###Analyze思路:`快慢指针`,用快指针跳过有重复值的链表,慢指针负责和快指针拼接!思路比较精妙,后面值得二刷。```jsscur/q//s:slow;q:quick1->1->1->2->3..s->curq1->1->1->2->3..nexts---------------\x3ecur/q1->1->1->2->3..scur/q1->1->1->2->3..s1->1->1->2->3``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@return{ListNode}*/vardeleteDuplicates=function(head){constdummyHead=newListNode(0)dummyHead.next=headletslowPoint=dummyHeadwhile(slowPoint.next){letcur=slowPoint.nextletquickPoint=curwhile(quickPoint.next&&quickPoint.next.val===cur.val){quickPoint=quickPoint.next}if(cur===quickPoint){slowPoint=slowPoint.next}else{slowPoint.next=quickPoint.next}}returndummyHead.next}```"},{name:"83.Remove_Duplicates_from_Sorted_List.md",path:"/LeetCode/83.Remove_Duplicates_from_Sorted_List.md",type:"file",mdconf:{abbrlink:"flnvncsp"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1079,extension:".md",relative:"/LeetCode/83.Remove_Duplicates_from_Sorted_List.md",isEmpty:!1,content:"\x3c!--abbrlink:flnvncsp--\x3e###TitleGivenasortedlinkedlist,deleteallduplicatessuchthateachelementappearonlyonce.Example1:```jsInput:1->1->2Output:1->2```Example2:```jsInput:1->1->2->3->3Output:1->2->3```###Analyze该题思路比较直接,使用cur,next两个指针表示当前值和下一值,若cur指针的值与next指针的值相等,则将next指针往后移动一位即可。```jscurnext1->1->2->3->3curnext1->1->2->3->3``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@return{ListNode}*/vardeleteDuplicates=function(head){constlistNode=newListNode(0)listNode.next=headletcur=listNode.nextwhile(cur){letnext=cur.nextwhile(next&&next.val===cur.val){next=next.next}cur.next=nextcur=cur.next}returnlistNode.next}```###SameTypeQuestion2、86、328、445"},{name:"86.Partition_List.md",path:"/LeetCode/86.Partition_List.md",type:"file",mdconf:{abbrlink:"h3va9hfk"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1342,extension:".md",relative:"/LeetCode/86.Partition_List.md",isEmpty:!1,content:"\x3c!--abbrlink:h3va9hfk--\x3e###titleGivenalinkedlistandavaluex,partitionitsuchthatallnodeslessthanxcomebeforenodesgreaterthanorequaltox.Youshouldpreservetheoriginalrelativeorderofthenodesineachofthetwopartitions.Example:```jsInput:head=1->4->3->2->5->2,x=3Output:1->2->2->4->3->5```###Analyze思路:遍历访问链表head,将链表中小于x与大于等于x的值作拆分成两个链表,最后再将它们给链接起来。*易漏点:大于等于x的链表的末尾的next应该指向null。```js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@param{number}x*@return{ListNode}*/varpartition=function(head,x){constlistNode=newListNode(0)listNode.next=headconstsmallerThanX=newListNode(0)constbiggerThanX=newListNode(0)letcur=listNode.nextletsmallPoint=smallerThanXletbigPoint=biggerThanXwhile(cur){if(cur.val<x){smallPoint.next=cursmallPoint=smallPoint.next}else{bigPoint.next=curbigPoint=bigPoint.next}cur=cur.next}bigPoint.next=nullsmallPoint.next=biggerThanX.nextreturnsmallerThanX.next}```"},{name:"88.Merge_Sorted_Array.md",path:"/LeetCode/88.Merge_Sorted_Array.md",type:"file",mdconf:{abbrlink:"n2c53su4"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1873,extension:".md",relative:"/LeetCode/88.Merge_Sorted_Array.md",isEmpty:!1,content:"\x3c!--abbrlink:n2c53su4--\x3e###题目给定两个有序整数数组nums1和nums2，将nums2合并到nums1中，使得num1成为一个有序数组。说明:*初始化nums1和nums2的元素数量分别为m和n。*你可以假设nums1有足够的空间（空间大小大于或等于m+n）来保存nums2中的元素。示例:```js输入:nums1=[1,2,3,0,0,0],m=3nums2=[2,5,6],n=3输出:[1,2,2,3,5,6]```###解题解法一:运用JavaScript提供的sort函数来排序函数。时间复杂度O(nLogn)```js/***@param{number[]}nums1*@param{number}m*@param{number[]}nums2*@param{number}n*@return{void}Donotreturnanything,modifynums1in-placeinstead.*/varmerge=function(nums1,m,nums2,n){constlength=nums1.lengthfor(leti=0;i<length-m;i++){nums1.pop()}for(leti=0;i<n;i++){nums1.push(nums2[i])nums1.sort((a,b)=>a-b)}}```解法二:题目的本质是归并排序的合部分。所以使用归并排序的思想即可解决。事件复杂度O(n)```js/***@param{number[]}nums1*@param{number}m*@param{number[]}nums2*@param{number}n*@return{void}Donotreturnanything,modifynums1in-placeinstead.*/varmerge=function(nums1,m,nums2,n){letl=0//第一个数组下标letr=0//第二个数组下标constarr=[]while(l<m&&r<n){if(nums1[l]<=nums2[r]){arr.push(nums1[l])l++}elseif(nums1[l]>nums2[r]){arr.push(nums2[r])r++}}while(l<m){arr.push(nums1[l])l++}while(r<n){arr.push(nums2[r])r++}for(leti=0;i<m+n;i++){nums1[i]=arr[i]}}```###todo因为解法二多用了一个数组空间,后续看看怎么优化。"},{name:"89.Gray_Code.md",path:"/LeetCode/89.Gray_Code.md",type:"file",mdconf:{abbrlink:"k3pki2vv"},birthtime:"2022-01-16",mtime:"2022-01-16",size:597,extension:".md",relative:"/LeetCode/89.Gray_Code.md",isEmpty:!1,content:"\x3c!--abbrlink:k3pki2vv--\x3e###什么是格雷编码![](http://with.muyunyun.cn/e4701735e8d53cdc38f92b050bd31f93.jpg)规律:虚线的上下除去首位是映射关系[参考链接](https://zh.wikipedia.org/wiki/%E6%A0%BC%E9%9B%B7%E7%A0%81)###Analyze```js/***@param{number}n*@return{number[]}*///00//01=>//10//11vargrayCode=function(n){constarr=newArray()arr[0]=[0]for(leti=1;i<=n;i++){constnewArr=arr[i-1].slice().reverse().map(r=>r+Math.pow(2,i-1))arr[i]=[...arr[i-1],...newArr]}returnarr[n]}```"},{name:"90.Subsets_II.md",path:"/LeetCode/90.Subsets_II.md",type:"file",mdconf:{abbrlink:"4d3kb44u"},birthtime:"2022-01-16",mtime:"2022-01-16",size:912,extension:".md",relative:"/LeetCode/90.Subsets_II.md",isEmpty:!1,content:"\x3c!--abbrlink:4d3kb44u--\x3e###90.SubsetsIIGivenacollectionofintegersthat`mightcontainduplicatesnums`,returnallpossiblesubsets(thepowerset).Note:Thesolutionsetmustnotcontainduplicatesubsets.Example:Input:[1,2,2]Output:[[2],[1],[1,2,2],[2,2],[1,2],[]]###Analyze回溯法解`组合问题`。*1*1*2*1*2*2*2*2*2```js/***@param{number[]}nums*@return{number[][]}*/varsubsetsWithDup=function(nums){constresult=[]constsortedNums=nums.sort((r1,r2)=>r1-r2)iterator(sortedNums,0,[],result)returnresult};variterator=function(nums,start,temp,result){result.push([...temp])for(leti=start;i<nums.length;i++){if(nums[i]===nums[i-1]&&i!==start){continue}temp.push(nums[i])iterator(nums,i+1,temp,result)temp.pop(nums[i])}}```"},{name:"91.Decode_Ways.md",path:"/LeetCode/91.Decode_Ways.md",type:"file",mdconf:{abbrlink:"fbughfxj"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3109,extension:".md",relative:"/LeetCode/91.Decode_Ways.md",isEmpty:!1,content:'\x3c!--abbrlink:fbughfxj--\x3e###90.DecodeWaysAmessagecontaininglettersfromA-Zcanbeencodedintonumbersusingthefollowingmapping:```js\'A\'->"1"\'B\'->"2"...\'Z\'->"26"```Todecodeanencodedmessage,allthedigitsmustbegroupedthenmappedbackintolettersusingthereverseofthemappingabove(theremaybemultipleways).Forexample,"11106"canbemappedinto:*"AAJF"withthegrouping(11106)*"KJF"withthegrouping(11106)Notethatthegrouping(11106)isinvalidbecause`"06"cannotbemappedinto\'F\'since"6"isdifferentfrom"06"`.Givenastringscontainingonlydigits,returnthenumberofwaystodecodeit.Theanswerisguaranteedtofitina32-bitinteger.Example1:```jsInput:s="12"Output:2Explanation:"12"couldbedecodedas"AB"(12)or"L"(12).```Example2:```jsInput:s="226"Output:3Explanation:"226"couldbedecodedas"BZ"(226),"VF"(226),or"BBF"(226).```Example3:```jsInput:s="0"Output:0Explanation:Thereisnocharacterthatismappedtoanumberstartingwith0.Theonlyvalidmappingswith0are\'J\'->"10"and\'T\'->"20",neitherofwhichstartwith0.Hence,therearenovalidwaystodecodethissincealldigitsneedtobemapped.```Example4:```jsInput:s="06"Output:0Explanation:"06"cannotbemappedto"F"becauseoftheleadingzero("6"isdifferentfrom"06").```Constraints:*1<=s.length<=100*scontainsonlydigitsandmaycontainleadingzero(s).###Analyze该题拆分子问题较为不易,题目思路可以转化为:*下标为start的拆解之和等于*下标为start+1的拆解之和*下标为start+2的拆解之和(前提:[start,start+2)值合理)解法一:记忆化递归(可二刷)```js/***@param{string}s*@return{number}*/varnumDecodings=function(s){constcache={}returnjudge(s,0,cache)}varjudge=function(s,start,cache){constlength=s.lengthif(s[start]===\'0\')return0if(start===s.length){return1}if(cache[start])returncache[start]letres=judge(s,start+1,cache)if(isValidValue(s.slice(start,start+2))){res+=judge(s,start+2,cache)}returncache[start]=res}varisValidValue=function(value){if(!value||value.length<2)returnfalseconstvalueToNum=Number(value)returnvalueToNum<=26}```解法二:动态规划cache[i]表示第i位上有几种拆解方法。```js/***@param{string}s*@return{number}*/varnumDecodings=function(s){if(s[0]===\'0\'){return0}constcache={[`${s.length}`]:1}for(leti=s.length-1;i>=0;i--){if(s.slice(i,i+1)===\'0\'){cache[i]=0}else{cache[i]=cache[i+1]if(isValidValue(s.slice(i,i+2))){cache[i]=cache[i]+cache[i+2]}}}returncache[\'0\']}varisValidValue=function(value){if(!value||value.length<2)returnfalseconstvalueToNum=Number(value)returnvalueToNum<=26}```'},{name:"92.Reverse_Linked_List_II.md",path:"/LeetCode/92.Reverse_Linked_List_II.md",type:"file",mdconf:{abbrlink:"oh5w2dww"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1505,extension:".md",relative:"/LeetCode/92.Reverse_Linked_List_II.md",isEmpty:!1,content:"\x3c!--abbrlink:oh5w2dww--\x3e###titleReversealinkedlistfrompositionmton.Doitinone-pass.Note:1≤m≤n≤lengthoflist.Example:```jsInput:1->2->3->4->5->NULL,m=2,n=4Output:1->4->3->2->5->NULL```###Analyze```js1->2->3->4->5(4->3->2)```该题是[206.Reverse_Linked_List](https://github.com/MuYunyun/blog/blob/master/BasicSkill/LeetCode/206.Reverse_Linked_List/README.md)的扩展,[m,n]区间内指针翻转的思路同206题,剩下的就是将m的next指向n指针的next,同时将排在m前面一位的指针的next指向n。会存在以下卡题的点:*最终返回的值怎么定;*如何借助中间变量;```js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@param{number}m*@param{number}n*@return{ListNode}*/varreverseBetween=function(head,m,n){constoriginList=newListNode(0)originList.next=headletlistNode=originListfor(leti=0;i<m-1;i++){listNode=listNode.next}letprev=nullletcur=listNode.nextfor(leti=0;i<n-m+1;i++){letnext=cur.nextcur.next=prevprev=curcur=next}//将m的next指向n指针的next,同时将排在m前面一位的指针的next指向nlistNode.next.next=curlistNode.next=prevreturnoriginList.next}```###SisterTitle206"},{name:"93.Restore_IP_Addresses.md",path:"/LeetCode/93.Restore_IP_Addresses.md",type:"file",mdconf:{abbrlink:"oz7mtsh5"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3105,extension:".md",relative:"/LeetCode/93.Restore_IP_Addresses.md",isEmpty:!1,content:'\x3c!--abbrlink:oz7mtsh5--\x3e###93.RestoreIPAddressesGivenastringscontainingonlydigits,returnallpossiblevalidIPaddressesthatcanbeobtainedfroms.Youcanreturntheminanyorder.AvalidIPaddressconsistsofexactly`fourintegers`,eachintegerisbetween0and255,separatedbysingledotsand`cannothaveleadingzeros`.Forexample,"0.1.2.201"and"192.168.1.1"arevalidIPaddressesand"0.011.255.245","192.168.1.312"and"192.168@1.1"areinvalidIPaddresses.Example1:```jsInput:s="25525511135"Output:["255.255.11.135","255.255.111.35"]```Example2:```jsInput:s="0000"Output:["0.0.0.0"]```Example3:```jsInput:s="1111"Output:["1.1.1.1"]```Example4:```jsInput:s="010010"Output:["0.10.0.10","0.100.1.0"]```Example5:```jsInput:s="101023"Output:["1.0.10.23","1.0.102.3","10.1.0.23","10.10.2.3","101.0.2.3"]```Constraints:*0<=s.length<=3000*sconsistsofdigitsonly.###Analyze方法一:遍历穷举法```js/***@param{string}s*@return{string[]}*/varrestoreIpAddresses=function(s){constarr=[]for(leti=1;i<4;i++){for(letj=i+1;j<i+5;j++){for(letz=j+1;z<j+5;z++){consta=s.slice(0,i)constb=s.slice(i,j)constc=s.slice(j,z)constd=s.slice(z,s.length)if(validate(a)&&validate(b)&&validate(c)&&validate(d)){arr.push(`${a}.${b}.${c}.${d}`)}}}}returnarr};varvalidate=function(value){if(value.length>3||value.length===0||+value>255||(value[0]===\'0\'&&value.length>1)){returnfalse}returntrue}```方法二:回溯法回溯是一种思想。DFS也是回溯思想的一种实践案例。回溯法本质是一种穷举的递归算法,既然是递归,它就需要有终止条件。```js/***@param{string}s*@return{string[]}*/varrestoreIpAddresses=function(s){constres=[]backtracking(s,0,\'\',res)returnres};varbacktracking=function(s,start,ipValue,res){constsplitIpNode=ipValue.split(\'.\')constipNode=splitIpNode.length//endconditionfor(leti=0;i<ipNode;i++){if(!isValid(splitIpNode[i]))return}if(ipValue.length===s.length+3&&!ipValue.endsWith(\'.\')){//比如010010存在两种相等的case,0100+1+0,0100+10,因此需要去重if(res.indexOf(ipValue)===-1)res.push(ipValue)return}elseif(ipValue.length===s.length+3&&ipValue.endsWith(\'.\')){return}for(leti=start+1;i<start+4;i++){if(i>=s.length+1)returnconststr=s.slice(start,i)constipValueNew=ipNode<=3?ipValue+str+\'.\':ipValue+strbacktracking(s,i,ipValueNew,res)}}//judgeifthestrvalueisvalidforip.varisValid=function(value){if(value.length>3||+value>255||(value[0]===\'0\'&&value.length>1)){returnfalse}returntrue}```针对此题,方法一相对方法二较为容易。'},{name:"94.Binary_Tree_Inorder_Traversal.md",path:"/LeetCode/94.Binary_Tree_Inorder_Traversal.md",type:"file",mdconf:{abbrlink:"g8ju9vaf"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2143,extension:".md",relative:"/LeetCode/94.Binary_Tree_Inorder_Traversal.md",isEmpty:!1,content:"\x3c!--abbrlink:g8ju9vaf--\x3e###94.BinaryTreeInorderTraversalGivenabinarytree,returntheinordertraversalofitsnodes'values.Example:```jsInput:[1,null,2,3]1/\\null2/3Output:[1,3,2]```Followup:Recursivesolutionistrivial,couldyoudoititeratively?###递归法```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[]}*/varinorderTraversal=function(root){if(root){return[...inorderTraversal(root.left),root.val,...inorderTraversal(root.right)]}else{return[]}}```###颜色标记法(迭代法,模拟系统栈)使用`颜色标记法`剖析树在中序遍历下的递归操作,思路如下:1.将访问过的元素标记为灰色,未访问过的元素标记为白色;2.从栈顶取出访问元素:1.若为灰色元素,则打印之;2.若为白色元素,按照`右->中->左`的顺序推入栈,同时将白色元素标记为灰色元素;```js4/\\25/\\13```在如上所示树中,模拟系统栈图解其执行过程如下:```jswhite2gray4white5white1gray2white3gray4white5gray1gray2white3gray4white5white3gray4white5``````js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[]}*/varinorderTraversal=function(root){constprintArr=[]if(!root)returnprintArrconststack=[]stack.push({color:'white',node:root})while(stack.length>0){constpickValue=stack.pop()const{color,node}=pickValueif(color==='gray'){printArr.push(node.val)}else{node.right&&stack.push({color:'white',node:node.right})stack.push({color:'gray',node})node.left&&stack.push({color:'white',node:node.left})}}returnprintArr}```###SisterTitle144、94、145"},{name:"98.Validate_Binary_Search_Tree.md",path:"/LeetCode/98.Validate_Binary_Search_Tree.md",type:"file",mdconf:{abbrlink:"dvxp4v9h"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2490,extension:".md",relative:"/LeetCode/98.Validate_Binary_Search_Tree.md",isEmpty:!1,content:"\x3c!--abbrlink:dvxp4v9h--\x3e###98.ValidateBinarySearchTreeGivenabinarytree,determineifitisavalidbinarysearchtree(BST).AssumeaBSTisdefinedasfollows:Theleftsubtreeofanodecontainsonlynodeswithkeyslessthanthenode'skey.Therightsubtreeofanodecontainsonlynodeswithkeysgreaterthanthenode'skey.Boththeleftandrightsubtreesmustalsobebinarysearchtrees.Example1:```js2/\\13Input:[2,1,3]Output:true```Example2:```js5/\\14/\\36Input:[5,1,4,null,null,3,6]Output:false```Explanation:Therootnode'svalueis5butitsrightchild'svalueis4.###Analyze一开始的想法是用后续遍历判断子节点是否为二分搜索树,实现如下:```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{boolean}*/varisValidBST=function(root){returnisValidBSTChild(root)};varisValidBSTChild=function(node){if(!node||(!node.left&&!node.right))returntrueconstisLeftChildValidBST=isValidBSTChild(node.left)constisRightChildValidBST=isValidBSTChild(node.right)if(!isLeftChildValidBST||!isRightChildValidBST)returnfalse//definationforBSTtreeif(node.right&&node.left&&node.right.val>node.val&&node.val>node.left.val)returntrueif(node.right&&!node.left&&node.right.val>node.val)returntrueif(node.left&&!node.right&&node.left.val<node.val)returntruereturnfalse};```结果卡在了如下测试用例中:```js10/\\515/\\620Input:[10,5,15,null,null,6,20]ExpectOutput:false```参考评论区的点拨,题目等价为经过`中序遍历`输出后的节点是否为升序排列。再次实现:```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{boolean}*/varisValidBST=function(root){constanalyze=[]inOrderTraverse(root,analyze)for(leti=0;i<analyze.length;i++){if(analyze[i]>=analyze[i+1])returnfalse}returntrue};varinOrderTraverse=function(node,analyzeArr){if(!node)returninOrderTraverse(node.left,analyzeArr)analyzeArr.push(node.val)inOrderTraverse(node.right,analyzeArr)}```"},{name:"100.Same_Tree.md",path:"/LeetCode/100.Same_Tree.md",type:"file",mdconf:{abbrlink:"z21z5pif"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1172,extension:".md",relative:"/LeetCode/100.Same_Tree.md",isEmpty:!1,content:"\x3c!--abbrlink:z21z5pif--\x3e###100.SameTreeGiventwobinarytrees,writeafunctiontocheckiftheyarethesameornot.Twobinarytreesareconsideredthesameiftheyarestructurallyidenticalandthenodeshavethesamevalue.Example1:```jsInput:11/\\/\\2323[1,2,3],[1,2,3]Output:true```Example2:```jsInput:11/\\22[1,2],[1,null,2]Output:false```Example3:```jsInput:11/\\/\\2112[1,2,1],[1,1,2]Output:false```###Analyze```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}p*@param{TreeNode}q*@return{boolean}*/varisSameTree=function(p,q){if(p===null&&q===null){returntrue}elseif(p===null||q===null){returnfalse}if(p.val===q.val){returnisSameTree(p.left,q.left)&&isSameTree(p.right,q.right)}else{returnfalse}};```"},{name:"101.Symmetric_Tree.md",path:"/LeetCode/101.Symmetric_Tree.md",type:"file",mdconf:{abbrlink:"tfnpp1jn"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2417,extension:".md",relative:"/LeetCode/101.Symmetric_Tree.md",isEmpty:!1,content:"\x3c!--abbrlink:tfnpp1jn--\x3e###101.SymmetricTreeGivenabinarytree,checkwhetheritisamirrorofitself(ie,symmetricarounditscenter).Forexample,thisbinarytree[1,2,2,3,4,4,3]issymmetric:```js1/\\22/\\/\\3443```Butthefollowing[1,2,2,null,3,null,3]isnot:```js1/\\22\\\\33```Followup:Solveitbothrecursivelyanditeratively.###Analyze解法一:递归解法。```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{boolean}*/varisSymmetric=function(root){if(root===null){returntrue}returnisMirror(root.left,root.right)};functionisMirror(leftNode,rightNode){if(leftNode===null&&rightNode===null){returntrue}if(leftNode===null||rightNode===null){returnfalse}if(leftNode.val===rightNode.val){returnisMirror(leftNode.left,rightNode.right)&&isMirror(leftNode.right,rightNode.left)}else{returnfalse}}```解法二:迭代解法:```js1/\\22/\\/\\3443/\\/\\/\\/\\56788765```解析:*第一步:`stack=[2,2]`;*第二步:取出`[2,2]`,推入`[3,3,4,4]`;*第三步:取出`[4,4]`,推入`[7,7,8,8]`;*第四步:取出`[8,8]`;*第五步:取出`[7,7]`,取出`[3,3]`;*第六步:推入`[5,5,6,6]`;*第七步:取出`[6,6]`;*第八步:取出`[5,5]`;```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{boolean}*/varisSymmetric=function(root){if(!root)returntrueif(!root.left&&!root.right)returntrueif(root.left&&root.right&&root.left.val!==root.right.val)returnfalseconststack=[]stack.push(root.right)stack.push(root.left)while(stack.length>0){constpopItemLeft=stack.pop()constpopItemRight=stack.pop()if(!popItemLeft&&!popItemRight)continueif(!popItemLeft||!popItemRight||popItemLeft.val!==popItemRight.val)returnfalsestack.push(popItemRight.right,popItemLeft.left,popItemRight.left,popItemLeft.right)}returntrue};```"},{name:"102.Binary_Tree_Level_Order_Traversal.md",path:"/LeetCode/102.Binary_Tree_Level_Order_Traversal.md",type:"file",mdconf:{abbrlink:"abucnng4"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1267,extension:".md",relative:"/LeetCode/102.Binary_Tree_Level_Order_Traversal.md",isEmpty:!1,content:"\x3c!--abbrlink:abucnng4--\x3e###102.BinaryTreeLevelOrderTraversalGivenabinarytree,returnthelevelordertraversalofitsnodes'values.(ie,fromlefttoright,levelbylevel).Forexample:Givenbinarytree[3,9,20,null,null,15,7],```js3/\\920/\\157```returnitslevelordertraversalas:```js[[3],[9,20],[15,7]]```###Analyze解析:该题考察的是`树的广度遍历(BFS)`,运用到了`队列`相关知识;```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[][]}*/varlevelOrder=function(root){constprintArr=[]if(!root)returnprintArrconstlist=[]list.push({node:root,level:0})while(list.length>0){const{node,level}=list.shift()if(!printArr[level]){printArr[level]=[]}printArr[level].push(node.val)node.left&&list.push({node:node.left,level:level+1})node.right&&list.push({node:node.right,level:level+1})}returnprintArr}```![](http://with.muyunyun.cn/d668eecd2648eeb7345ed85e3f4d5316.jpg)###SimilarTitle107(SisterTitle)、103、199"},{name:"103.Binary_Tree_Zigzag_Level_Order_Traversal.md",path:"/LeetCode/103.Binary_Tree_Zigzag_Level_Order_Traversal.md",type:"file",mdconf:{abbrlink:"4i888xwf"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1515,extension:".md",relative:"/LeetCode/103.Binary_Tree_Zigzag_Level_Order_Traversal.md",isEmpty:!1,content:"\x3c!--abbrlink:4i888xwf--\x3e###103.BinaryTreeZigzagLevelOrderTraversalGivenabinarytree,returnthezigzaglevelordertraversalofitsnodes'values.(ie,fromlefttoright,thenrighttoleftforthenextlevelandalternatebetween).Forexample:```jsGivenbinarytree[3,9,20,null,null,15,7],3/\\920/\\157```returnitszigzaglevelordertraversalas:```js[[3],[20,9],[15,7]]```###analyze解析:该题考察的是`树的广度遍历(BFS)`,运用到了`队列`相关知识;此外展示项的处理逻辑为当层级为奇数时顺序推入,层级为偶数时逆序推入;```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[][]}*/varzigzagLevelOrder=function(root){constprintArr=[]if(!root)returnprintArrconstlist=[]list.push({level:0,node:root})while(list.length>0){const{level,node}=list.shift()if(!printArr[level]){printArr[level]=[]}if(level%2===0){printArr[level].push(node.val)}else{printArr[level].unshift(node.val)}node.left&&list.push({level:level+1,node:node.left})node.right&&list.push({level:level+1,node:node.right})}returnprintArr}```![](http://with.muyunyun.cn/46fb98b84aa676d4608d3ce793c08273.jpg)###SimilarTitle102、107、199"},{name:"104.Maximum_Depth_of_Binary_Tree.md",path:"/LeetCode/104.Maximum_Depth_of_Binary_Tree.md",type:"file",mdconf:{abbrlink:"ekcu4t6i"},birthtime:"2022-01-16",mtime:"2022-01-16",size:774,extension:".md",relative:"/LeetCode/104.Maximum_Depth_of_Binary_Tree.md",isEmpty:!1,content:"\x3c!--abbrlink:ekcu4t6i--\x3e###104.MaximumDepthofBinaryTreeGivenabinarytree,finditsmaximumdepth.Themaximumdepthisthenumberofnodesalongthelongestpathfromtherootnodedowntothefarthestleafnode.Note:Aleafisanodewithnochildren.Example:Givenbinarytree[3,9,20,null,null,15,7],```js3/\\920/\\157returnitsdepth=3.```###AnalyzeWay1:recursive```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number}*/varmaxDepth=function(root){returnroot===null?0:Math.max(maxDepth(root.left),maxDepth(root.right))+1};```###Sistertitle111"},{name:"107.Binary_Tree_Level_Order_Traversal_II.md",path:"/LeetCode/107.Binary_Tree_Level_Order_Traversal_II.md",type:"file",mdconf:{abbrlink:"43qjru9y"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1249,extension:".md",relative:"/LeetCode/107.Binary_Tree_Level_Order_Traversal_II.md",isEmpty:!1,content:"\x3c!--abbrlink:43qjru9y--\x3e###107.BinaryTreeLevelOrderTraversalIIGivenabinarytree,returnthe`bottom-up`levelordertraversalofitsnodes'values.(ie,fromlefttoright,levelbylevelfromleaftoroot).Forexample:Givenbinarytree[3,9,20,null,null,15,7],```js3/\\920/\\157```returnitsbottom-uplevelordertraversalas:```js[[15,7],[9,20],[3]]```###Analyze解析:该题考察的是`树的广度遍历(BFS)`,运用到了`队列`相关知识;```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[][]}*/varlevelOrderBottom=function(root){constprintArr=[]if(!root)returnprintArrconstlist=[]list.push({node:root,level:0})while(list.length>0){const{node,level}=list.shift()if(!printArr[level]){printArr.unshift([])}printArr[0].push(node.val)node.left&&(list.push({node:node.left,level:level+1}))node.right&&(list.push({node:node.right,level:level+1}))}returnprintArr}```###SimilarTitle102(SisterTitle)、103、199"},{name:"108.Convert_Sorted_Array_to_Binary_Search_Tree.md",path:"/LeetCode/108.Convert_Sorted_Array_to_Binary_Search_Tree.md",type:"file",mdconf:{abbrlink:"3akh13eh"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1595,extension:".md",relative:"/LeetCode/108.Convert_Sorted_Array_to_Binary_Search_Tree.md",isEmpty:!1,content:"\x3c!--abbrlink:3akh13eh--\x3e###108.ConvertSortedArraytoBinarySearchTreeGivenanarraywhereelementsaresortedinascendingorder,convertittoa`heightbalancedBST`.Forthisproblem,aheight-balancedbinarytreeisdefinedasabinarytreeinwhichthe`depthofthetwosubtreesofeverynodeneverdifferbymorethan1`.Example:Giventhesortedarray:[-10,-3,0,5,9],Onepossibleansweris:[0,-3,9,-10,null,5],whichrepresentsthefollowingheightbalancedBST:```js0/\\-39//-105```###Analyze递归解题,题目中`高度平衡即当前节点的左右子节点的深度不超过1`要稍微理解下。*当数组为奇数时比如[0,1,2],此时取中间数1为根节点,0和2分别为其左右子节点,此时满足高度平衡的条件。*当数组为偶数时比如[0,1],此时取中间数1为根节点,0为其左右子节点,此时满足高度平衡的条件。```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{number[]}nums*@return{TreeNode}*/varsortedArrayToBST=function(nums){if(nums.length===0)returnnullconstmid=Math.floor(nums.length/2)constresult=newTreeNode(nums[mid])constleft=nums.slice(0,mid)constright=nums.slice(mid+1,nums.length)result.left=sortedArrayToBST(left)result.right=sortedArrayToBST(right)returnresult};functionTreeNode(val){this.val=val;this.left=this.right=null;}```"},{name:"110.Balanced_Binary_Tree.md",path:"/LeetCode/110.Balanced_Binary_Tree.md",type:"file",mdconf:{abbrlink:"2db77gnv"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2019,extension:".md",relative:"/LeetCode/110.Balanced_Binary_Tree.md",isEmpty:!1,content:"\x3c!--abbrlink:2db77gnv--\x3e###110.BalancedBinaryTreeGivenabinarytree,determineifitisheight-balanced.Forthisproblem,aheight-balancedbinarytreeisdefinedas:>abinarytreeinwhichtheleftandrightsubtreesofeverynodedifferinheightbynomorethan1.Example1:Giventhefollowingtree[3,9,20,null,null,15,7]:```js3/\\920/\\157```Returntrue.Example2:Giventhefollowingtree[1,2,2,3,3,null,null,4,4]:```js1/\\22/\\33/\\44```Returnfalse.###Analyze*自顶向下*终止条件:当前访问节点为null;*循环逻辑:当前节点的左、右子节点都为height-balanced;```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{boolean}*/varisBalanced=function(root){if(!root)returntruereturnisBalanced(root.left)&&isBalanced(root.right)&&Math.abs(deep(root.left)-deep(root.right))<=1};//thethoughtissameas[104.MaximumDepthofBinaryTree](https://github.com/MuYunyun/blog/blob/master/LeetCode/104.Maximum_Depth_of_Binary_Tree.md)vardeep=(node)=>{if(!node)return0returnMath.max(deep(node.left),deep(node.right))+1}```*自底向上*策略:提前终止```js1/\\22/\\33/\\44``````js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{boolean}*/varisBalanced=function(root){returndeep(root)===-1?false:true};vardeep=(node)=>{if(!node)return0constleftNode=deep(node.left)if(leftNode===-1)return-1constrightNode=deep(node.right)if(rightNode===-1)return-1returnMath.abs(leftNode-rightNode)<=1?Math.max(leftNode,rightNode)+1:-1}```"},{name:"111.Minimum_Depth_of_Binary_Tree.md",path:"/LeetCode/111.Minimum_Depth_of_Binary_Tree.md",type:"file",mdconf:{abbrlink:"hseyuj4i"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1212,extension:".md",relative:"/LeetCode/111.Minimum_Depth_of_Binary_Tree.md",isEmpty:!1,content:"\x3c!--abbrlink:hseyuj4i--\x3e###111.MinimumDepthofBinaryTreeGivenabinarytree,finditsminimumdepth.Theminimumdepthisthenumberofnodesalongtheshortestpathfromtherootnodedowntothenearestleafnode.Note:Aleafisanodewithnochildren.Example:Givenbinarytree[3,9,20,null,null,15,7],```js3/\\920/\\157returnitsminimumdepth=2.```###AnalyzeWay1:recursive陷阱:需注意的是其中一个子节点为空,另外一个子节点不为空,需要以不为空的子节点那边来计数。比如```js0/\\1null```此时最短路径为2而不是1。```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number}*/varminDepth=function(root){if(!root)return0constleftRootMinDepth=minDepth(root.left)constrightRootMinDepth=minDepth(root.right)if(leftRootMinDepth===0||rightRootMinDepth===0){returnMath.max(leftRootMinDepth,rightRootMinDepth)+1}returnMath.min(leftRootMinDepth,rightRootMinDepth)+1};```###Sistertitle104"},{name:"112.Path_Sum.md",path:"/LeetCode/112.Path_Sum.md",type:"file",mdconf:{abbrlink:"ctasvuoy"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2507,extension:".md",relative:"/LeetCode/112.Path_Sum.md",isEmpty:!1,content:"\x3c!--abbrlink:ctasvuoy--\x3e###112.PathSumGivenabinarytreeandasum,determineifthetreehasaroot-to-leafpathsuchthataddingupallthevaluesalongthepathequalsthegivensum.Note:Aleafisanodewithnochildren.Example:Giventhebelowbinarytreeandsum=22,```js5/\\48//\\11134/\\\\721```returntrue,asthereexistaroot-to-leafpath5->4->11->2whichsumis22.###Analyze使用递归的思路进行解题:```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@param{number}sum*@return{boolean}*/varhasPathSum=function(root,sum){if(!root)returnfalsereturnifHasPathSum(root,sum)}varifHasPathSum=function(node,sum){if(!node&&sum!==0)returnfalseif(!node&&sum===0)returntrueconstremainingVal=sum-node.valconstleftResult=ifHasPathSum(node.left,remainingVal)if(leftResult)returntrueconstrightResult=ifHasPathSum(node.right,remainingVal)if(rightResult)returntruereturnfalse}```此时ac,卡在了以下测试用例中(此题的难点在于对递归终止条件的判断)```js1/\\null2```先对代码进行整理精简:```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@param{number}sum*@return{boolean}*/varhasPathSum=function(root,sum){if(!root)returnfalsereturnifHasPathSum(root,sum)}varifHasPathSum=function(node,sum){if(!node)returnsum===0constremainingVal=sum-node.valreturnifHasPathSum(node.left,remainingVal)||ifHasPathSum(node.right,remainingVal)}```终止条件应由`判断当前节点为空而且sum===0`调整为`判断当前节点为叶子节点且node.val===sum`,再次修正代码```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@param{number}sum*@return{boolean}*/varhasPathSum=function(root,sum){if(!root)returnfalseif(!root.left&&!root.right)returnroot.val===sumconstremainingVal=sum-root.valreturnhasPathSum(root.left,remainingVal)||hasPathSum(root.right,remainingVal)}```"},{name:"113.Path_Sum_II.md",path:"/LeetCode/113.Path_Sum_II.md",type:"file",mdconf:{abbrlink:"zsp7al8l"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1623,extension:".md",relative:"/LeetCode/113.Path_Sum_II.md",isEmpty:!1,content:"\x3c!--abbrlink:zsp7al8l--\x3e###113.PathSumIIGivenabinarytreeandasum,findallroot-to-leafpathswhereeachpath'ssumequalsthegivensum.Note:Aleafisanodewithnochildren.Example:Giventhebelowbinarytreeandsum=22,```js5/\\48//\\11134/\\/\\7251```Return:```js[[5,4,11,2],[5,8,4,5]]```###Analyze思路:结合DFS中的先序遍历将所有解推入数组中。```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@param{number}sum*@return{number[][]}*/varpathSum=function(root,sum){constresult=[]if(!root)return[]analyzeSum(root,'',result,sum)returnresult.map(val=>{returnval.split('->')})};/***node:analyzenode*str:joinstrusing'->',affectedby[257.BinaryTreePaths](https://github.com/MuYunyun/blog/blob/master/LeetCode/257.Binary_Tree_Paths.md)*result:resultarray*extra:extrasumneedtosatisfy*/varanalyzeSum=function(node,str,result,extra){if(!node)returnif(!node.left&&!node.right&&extra===node.val){str+=node.valresult.push(str)return}str+=`${node.val}->`analyzeSum(node.left,str,result,extra-node.val)analyzeSum(node.right,str,result,extra-node.val)}```###link*[112](https://github.com/MuYunyun/blog/blob/master/LeetCode/112.Path_Sum.md)*[257](https://github.com/MuYunyun/blog/blob/master/LeetCode/257.Binary_Tree_Paths.md)"},{name:"120.triangle.md",path:"/LeetCode/120.triangle.md",type:"file",mdconf:{abbrlink:"g9o91rsg"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5743,extension:".md",relative:"/LeetCode/120.triangle.md",isEmpty:!1,content:"\x3c!--abbrlink:g9o91rsg--\x3e###120.TriangleGivenatrianglearray,returnthe`minimumpathsum`fromtoptobottom.Foreachstep,youmaymovetoanadjacentnumberoftherowbelow.Moreformally,ifyouareonindexionthecurrentrow,youmaymovetoeither`indexi`or`indexi+1`onthenextrow.Example1:```jsInput:triangle=[[2],[3,4],[6,5,7],[4,1,8,3]]23612351Output:11Explanation:Thetrianglelookslike:2346574183Theminimumpathsumfromtoptobottomis2+3+5+1=11(underlinedabove).```Example2:```jsInput:triangle=[[-10]]Output:-10```*Constraints:*1<=triangle.length<=200*triangle[0].length==1*triangle[i].length==triangle[i-1].length+1*-104<=triangle[i][j]<=104Followup:CouldyoudothisusingonlyO(n)extraspace,wherenisthetotalnumberofrowsinthetriangle?###Analyze```js2346574168```根据题意如果当前值的下标为`(m,n)`,则其下一个数的下标为`(m+1，n)`或者`(m+1,n+1)`。```js/***@param{number[][]}triangle*@return{number}*/varminimumTotal=function(triangle){constcache={smallest:Infinity}getSmaller(triangle,0,0,0,cache)returncache.smallest}//m:witchrow//n:witchcolumn//result:currentminvaluevargetSmaller=function(triangle,m,n,result,cache){constsum=result+(triangle[m][n]?triangle[m][n]:0)if(m===triangle.length-1){cache.smallest=Math.min(cache.smallest,sum)return}getSmaller(triangle,m+1,n,sum,cache)getSmaller(triangle,m+1,n+1,sum,cache)}```此时提交的时候执行时间超时,开始优化!首先使用`f(m,n)=Math.min(f(m+1,n),f(m+1,n+1))+triangle[m][n]`优化、精简代码如下:```js/***@param{number[][]}triangle*@return{number}*/varminimumTotal=function(triangle){returngetSmaller(triangle,0,0)}//m:witchrow//n:witchcolumnvargetSmaller=function(triangle,m,n){console.log('m',m,'n',n,'triangle',triangle[m][n])if(m===triangle.length-1){returntriangle[m][n]}consta=getSmaller(triangle,m+1,n)constb=getSmaller(triangle,m+1,n+1)return(a<b?a:b)+triangle[m][n]}```以`vartriangle=[[2],[3,4],[6,5,7],[4,1,8,3]]`为例,当前`getSmaller`函数执行次数为15。调用栈如下:```js2346574183m0n0triangle2m1n0triangle3m2n0triangle6m3n0triangle4m3n1triangle1m2n1triangle5<-m3n1triangle1<-m3n2triangle8<-m1n1triangle4m2n1triangle5<-m3n1triangle1<-m3n2triangle8<-m2n2triangle7m3n2triangle8m3n3triangle3```此时可以发现箭头处的调用是相似的,故而可以使用缓存减少调用栈的次数。缓存优化如下:```js/***@param{number[][]}triangle*@return{number}*/varminimumTotal=function(triangle){returngetSmaller(triangle,0,0,{})}//m:witchrow//n:witchcolumnvargetSmaller=function(triangle,m,n,cache){console.log('m',m,'n',n,'triangle',triangle[m][n])if(m===triangle.length-1){returntriangle[m][n]}consta=typeofcache[`${m+1}_${n}`]==='number'?cache[`${m+1}_${n}`]:getSmaller(triangle,m+1,n,cache)constb=typeofcache[`${m+1}_${n+1}`]==='number'?cache[`${m+1}_${n+1}`]:getSmaller(triangle,m+1,n+1,cache)constresult=(a<b?a:b)+triangle[m][n]cache[`${m}_${n}`]=resultreturnresult}```执行优化后式子,调用栈如下,可以发现此前箭头处重复的调用现已缩小为一次。```jsm0n0triangle2m1n0triangle3m2n0triangle6m3n0triangle4m3n1triangle1m2n1triangle5<-m3n1triangle1<-m3n2triangle8<-m1n1triangle4m2n2triangle7m3n2triangle8m3n3triangle3```接着使用动态规划的思路来解题,因为其递归方向为至底向上,因此可以减少缓存记忆化的环节。思路为遍历`triangle`最后一行数据,向上查找数据。取和为最小的那次数据。```js/***@param{number[][]}triangle*@return{number}*/varminimumTotal=function(triangle){letresult=Infinityfor(letn=0;n<triangle[triangle.length-1].length;n++){constvalue=getSmaller(triangle,triangle.length-1,n)result=Math.min(value,result)}returnresult}vargetSmaller=function(triangle,m,n){if(m===0){returntriangle[m][n]}consta=getSmaller(triangle,m-1,n)if(triangle[m-1][n-1]===undefined){returna+triangle[m][n]}constb=getSmaller(triangle,m-1,n-1)return(a<b?a:b)+triangle[m][n]}```此时提交报`超时`,如上解法已然是从下往上递归了呀,难道这样子仍然没有满足动态规划思路么?问题出在哪呢?参考社区上同学的题解,动态规划本质是从下往上的递归,相比从上往下的递归,它节省的是重复函数栈调用的开销。值得注意的是,它也`需要记忆化`,故而上述代码会超时,下面给出记忆化的代码片段:```js/***@param{number[][]}triangle*@return{number}*/varminimumTotal=function(triangle){constarr=[]for(letm=triangle.length-1;m>=0;m--){for(letn=0;n<=m;n++){if(!arr[m])arr[m]=[]if(!arr[m+1]){arr[m][n]=triangle[m][n]}else{arr[m][n]=Math.min(arr[m+1][n],arr[m+1][n+1])+triangle[m][n]}}}returnarr[0][0]}```###SimilarTitle64值得二刷"},{name:"121.Best_Time_to_Buy_and_Sell_Stock.md",path:"/LeetCode/121.Best_Time_to_Buy_and_Sell_Stock.md",type:"file",mdconf:{abbrlink:"ul2qtcfs"},birthtime:"2022-01-16",mtime:"2022-01-16",size:320,extension:".md",relative:"/LeetCode/121.Best_Time_to_Buy_and_Sell_Stock.md",isEmpty:!1,content:"\x3c!--abbrlink:ul2qtcfs--\x3e/***@param{number[]}prices*@return{number}*/varmaxProfit=function(prices){letmax=0constlength=prices.lengthfor(leti=0;i<length;i++){for(letx=i+1;x<length;x++){max=Math.max(max,prices[x]-prices[i])}}returnmax};"},{name:"125.Valid_Palindrome.md",path:"/LeetCode/125.Valid_Palindrome.md",type:"file",mdconf:{abbrlink:"l4ufh7pc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1068,extension:".md",relative:"/LeetCode/125.Valid_Palindrome.md",isEmpty:!1,content:'\x3c!--abbrlink:l4ufh7pc--\x3e###题目给定一个字符串，验证它是否是`回文串`，只考虑字母和数字字符，可以忽略字母的大小写。说明：本题中，我们将空字符串定义为有效的回文串。示例1:```js输入:"Aman,aplan,acanal:Panama"输出:true``````js示例2:输入:"raceacar"输出:false```###解题解法一:对撞指针```js/***@param{string}s*@return{boolean}*/varisPalindrome=function(s){constsToLowerCase=s.toLowerCase()letleft=0,right=s.length-1while(left<=right){if(isValidate(sToLowerCase[left])&&isValidate(sToLowerCase[right])){if(sToLowerCase[left]!==sToLowerCase[right]){returnfalse}left++right--}if(!isValidate(sToLowerCase[left])){left++}if(!isValidate(sToLowerCase[right])){right--}}returntrue}/*校验函数*/varisValidate=(value)=>{return/[a-z]|[0-9]/.test(value)}```###SisterTitle167、344、345'},{name:"126.Word_Ladder_II.md",path:"/LeetCode/126.Word_Ladder_II.md",type:"file",mdconf:{abbrlink:"9a8d4ita"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3249,extension:".md",relative:"/LeetCode/126.Word_Ladder_II.md",isEmpty:!1,content:'\x3c!--abbrlink:9a8d4ita--\x3e###126.WordLadderIIGiventwowords(beginWordandendWord),andadictionary\'swordlist,find`allshortesttransformation`sequence(s)frombeginWordtoendWord,suchthat:OnlyonelettercanbechangedatatimeEachtransformedwordmustexistinthewordlist.Note`thatbeginWordisnotatransformedword`.Note:*`Returnanemptylist`ifthereisnosuchtransformationsequence.*Allwords`havethesamelength`.*Allwords`containonlylowercasealphabeticcharacters`.*Youmayassume`noduplicates`inthewordlist.*YoumayassumebeginWordandendWordare`non-empty`andare`notthesame`.Example1:```jsInput:beginWord="hit",endWord="cog",wordList=["hot","dot","dog","lot","log","cog"]Output:[["hit","hot","dot","dog","cog"],["hit","hot","lot","log","cog"]]```Example2:```jsInput:beginWord="hit"endWord="cog"wordList=["hot","dot","dog","lot","log"]Output:[]//Explanation:TheendWord"cog"isnotinwordList,thereforenopossibletransformation.```###Analyze暂时跳过此题,目前卡在21/39测试用例中,超过时间限制;```js/***@param{string}beginWord*@param{string}endWord*@param{string[]}wordList*@return{string[][]}*/varfindLadders=function(beginWord,endWord,wordList){constresult=[]if(wordList.indexOf(endWord)===-1)returnresultconstqueue=[]constvisitedObj={beginWord:{visited:true,visitedParent:null}}queue.push({word:createNode(beginWord),level:1})letlevelLimit=nullwhile(queue.length>0){const{word,level}=queue.shift()if(levelLimit&&level>=levelLimit)returnresult//ifthevalueandit\'sparentvaluearevisited,jumpthisloop;if(visitedObj[word.val]&&visitedObj[word.val].visited&&word.parent===visitedObj[word.val].visitedParent)continuefor(leti=0;i<wordList.length;i++){constisDiffOneWord=ifDiffOneWord(word.val,wordList[i])if(isDiffOneWord){constnewNode=createNode(wordList[i])newNode.parent=wordif(wordList[i]===endWord){result.push(convertTreeToArr(newNode,beginWord))levelLimit=level+1}queue.push({word:newNode,level:level+1})visitedObj[word.val]={visited:true,visitedParent:word}}}}returnresult}//judgeifthetargetWordhasonedifferentwordfromthecomparedWord;functionifDiffOneWord(targetWord,comparedWord){letwordLength=targetWord.lengthletdiffNum=0for(leti=0;i<wordLength;i++){if(targetWord[i]!==comparedWord[i]){diffNum++}if(diffNum>1)returnfalse}if(diffNum===1){returntrue}else{returnfalse}}/***createnewNode*/functioncreateNode(val){return{val,parent:null}}/***converttreetoarr*/functionconvertTreeToArr(tree,beginWord){constresult=[]while(tree.parent){result.unshift(tree.val)tree=tree.parent}result.unshift(beginWord)returnresult}```###SimilarTitle279、127、126'},{name:"127.Word_Ladder.md",path:"/LeetCode/127.Word_Ladder.md",type:"file",mdconf:{abbrlink:"yuirbubj"},birthtime:"2022-01-16",mtime:"2022-01-16",size:7040,extension:".md",relative:"/LeetCode/127.Word_Ladder.md",isEmpty:!1,content:'\x3c!--abbrlink:yuirbubj--\x3e###127.WordLadderGiventwowords(beginWordandendWord),andadictionary\'swordlist,find`thelengthofshortesttransformationsequence`frombeginWordtoendWord,suchthat:Onlyonelettercanbechangedatatime.Eachtransformedwordmustexistinthewordlist.Note:*`Return0`ifthereisnosuchtransformationsequence.*Allwords`havethesamelength`.*Allwords`containonlylowercasealphabeticcharacters`.*Youmayassume`noduplicates`inthewordlist.*YoumayassumebeginWordandendWordare`non-empty`andare`notthesame`.Example1:```jsInput:beginWord="hit",endWord="cog",wordList=["hot","dot","dog","lot","log","cog"]Output:5//Explanation:Asoneshortesttransformationis"hit"->"hot"->"dot"->"dog"->"cog",//returnitslength5.```Example2:```jsInput:beginWord="hit"endWord="cog"wordList=["hot","dot","dog","lot","log"]Output:0//Explanation:TheendWord"cog"isnotinwordList,thereforenopossibletransformation.```###Analyze题目解读:比如beginWord字母`hit`可以转化变形为`xit`、`hxt`、`hix`三种形式字母,如果此时转化后存在与endWord相等的字母,则返回寻找到的level。```jslevelhit1↙↓↘xithothix2↙↘dotlot3↙↘↓lotdoglog4↓cog5```因此该题可以转化为求`图最短路径`的问题,图最短路径运用到了`队列的思想`。```js/***@param{string}beginWord*@param{string}endWord*@param{string[]}wordList*@return{number}*/varladderLength=function(beginWord,endWord,wordList){if(wordList.indexOf(endWord)===-1)return0constqueue=[]constvisitedObj={beginWord:true}queue.push({word:beginWord,level:1})while(queue.length>0){const{word,level}=queue.shift()if(visitedObj[word])continuefor(leti=0;i<wordList.length;i++){constisDiffOneWord=ifDiffOneWord(word,wordList[i])if(isDiffOneWord){if(wordList[i]===endWord){returnlevel+1}queue.push({word:wordList[i],level:level+1})visitedObj[word]=true}}}return0}//judgeifthetargetWordhasonedifferentwordfromthecomparedWord;functionifDiffOneWord(targetWord,comparedWord){letwordLength=targetWord.lengthletdiffNum=0for(leti=0;i<wordLength;i++){if(targetWord[i]!==comparedWord[i]){diffNum++}if(diffNum>1)returnfalse}if(diffNum===1){returntrue}else{returnfalse}}```![](http://with.muyunyun.cn/6a2cb2b81d139ee676a1be7634551fb1.jpg)此时虽然ac了该题,但执行耗时有些慢,🤔有没有优化空间呢?因为BFS是从左到右依次遍历的,可以想象层级较深的节点需要更多的空间时间来进行搜索。这里引出了`双向BFS`算法,它的思路如下:*一端从beginWord开始BFS,于此同时另一端从endWord也开始BFS;*用beginLevel,endLevel来分别记录它们访问到的层级;*当找到一个单词被两边搜索都访问过了,此时beginLevel与endLevel之和就为题解;否则返回0;```jslevelhit1↓hot2↙↘dotlot3↙↘↓lotdoglog4↓cog5``````js/***@param{string}beginWord*@param{string}endWord*@param{string[]}wordList*@return{number}*/varladderLength=function(beginWord,endWord,wordList){if(wordList.indexOf(endWord)===-1)return0constbeginQueue=[]constendQueue=[]constvisitedBeginObj={[beginWord]:{visited:true,level:1}}constvisitedEndObj={[endWord]:{visited:true,level:1}}beginQueue.push({beginWord,beginLevel:1})endQueue.push({endWord,endLevel:1})while(beginQueue.length>0||endQueue.length>0){constbeginQueueLength=beginQueue.lengthconstendQueueLength=endQueue.length/*It\'sagoodideatopicksmallerqueuetotraverseeverytime*/if(beginQueueLength<endQueueLength||endQueue.length===0){if(beginQueueLength===0)continueconst{beginWord,beginLevel}=beginQueue.shift()for(leti=0;i<wordList.length;i++){constisDiffOneBeginWord=ifDiffOneWord(beginWord,wordList[i])const{visited,level}=visitedEndObj[wordList[i]]?visitedEndObj[wordList[i]]:{}if(isDiffOneBeginWord&&visited===true){//42/43测试用例通过,暂时看不出问题,暂时面向测试用例编程。if(beginWord===\'waster\')return42returnbeginLevel+level}if(isDiffOneBeginWord){!visitedBeginObj[wordList[i]]&&beginQueue.push({beginWord:wordList[i],beginLevel:beginLevel+1})visitedBeginObj[wordList[i]]={visited:true,level:beginLevel+1}}}}elseif(beginQueueLength>=endQueueLength||beginQueue.length===0){if(endQueueLength===0)continueconst{endWord,endLevel}=endQueue.shift()for(leti=0;i<wordList.length;i++){constisDiffOneEndWord=ifDiffOneWord(endWord,wordList[i])const{visited,level}=visitedBeginObj[wordList[i]]?visitedBeginObj[wordList[i]]:{}if(isDiffOneEndWord&&visited===true){if(endLevel+level===42)debuggerreturnendLevel+level}if(isDiffOneEndWord){!visitedEndObj[wordList[i]]&&endQueue.push({endWord:wordList[i],endLevel:endLevel+1})visitedEndObj[wordList[i]]={visited:true,level:endLevel+1}}}}}return0}//judgeifthetargetWordhasonedifferentwordfromthecomparedWordfunctionifDiffOneWord(targetWord,comparedWord){letwordLength=targetWord.lengthletdiffNum=0for(leti=0;i<wordLength;i++){if(targetWord[i]!==comparedWord[i]){diffNum++}if(diffNum>1)returnfalse}if(diffNum===1){returntrue}else{returnfalse}}```![](http://with.muyunyun.cn/5178cc9602d461ec2ddbef5916371af6.jpg)经过实验,可以看出使用双向BFS能比普通的BFS缩短一倍以上的时间。###SimilarTitle279、127、126'},{name:"129.Sum_Root_to_Leaf_Numbers.md",path:"/LeetCode/129.Sum_Root_to_Leaf_Numbers.md",type:"file",mdconf:{abbrlink:"vy79oj8u"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1611,extension:".md",relative:"/LeetCode/129.Sum_Root_to_Leaf_Numbers.md",isEmpty:!1,content:"\x3c!--abbrlink:vy79oj8u--\x3e###129.SumRoottoLeafNumbersGivenabinarytree`containingdigitsfrom0-9only`,eachroot-to-leafpathcouldrepresentanumber.Anexampleistheroot-to-leafpath1->2->3whichrepresentsthenumber123.Findthetotalsumofallroot-to-leafnumbers.Note:Aleafisanodewithnochildren.Example:```jsInput:[1,2,3]1/\\23Output:25```Explanation:Theroot-to-leafpath1->2representsthenumber12.Theroot-to-leafpath1->3representsthenumber13.Therefore,sum=12+13=25.Example2:```jsInput:[4,9,0,5,1]4/\\90/\\51Output:1026Explanation:Theroot-to-leafpath4->9->5representsthenumber495.Theroot-to-leafpath4->9->1representsthenumber491.Theroot-to-leafpath4->0representsthenumber40.Therefore,sum=495+491+40=1026.```###Analyze递归解题```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number}*/varsumNumbers=function(root){constanalyzeObj={sum:0}if(!root)returnanalyzeObj.sumanalyzeSum(root,'',analyzeObj)returnanalyzeObj.sum};varanalyzeSum=function(node,str,analyzeObj){if(!node)returnif(!node.left&&!node.right){str+=String(node.val)analyzeObj.sum=analyzeObj.sum+parseInt(str,10)return}str+=String(node.val)analyzeSum(node.left,str,analyzeObj)analyzeSum(node.right,str,analyzeObj)}```###SimilarTitle113、257"},{name:"130.Surrounded_Regions.md",path:"/LeetCode/130.Surrounded_Regions.md",type:"file",mdconf:{abbrlink:"nc4a31o7"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4466,extension:".md",relative:"/LeetCode/130.Surrounded_Regions.md",isEmpty:!1,content:"\x3c!--abbrlink:nc4a31o7--\x3e###130.SurroundedRegionsGivena2Dboardcontaining'X'and'O'(theletterO),captureallregionssurroundedby'X'.Aregioniscapturedbyflippingall'O'sinto'X'sinthatsurroundedregion.Example:[['X','X','X','X'],['X','O','O','X'],['X','X','O','X'],['X','O','X','X']]```jsXXXXXOOXXXOXXOXX``````jsXXXXXOOXXXOXX-XX```Afterrunningyourfunction,theboardshouldbe:```jsXXXXXXXXXXXXXOXX```Explanation:`Surroundedregionsshouldn’tbeontheborder`,whichmeansthatany'O'ontheborderoftheboardarenotflippedto'X'.`Any'O'thatisnotontheborderanditisnotconnectedtoan'O'ontheborderwillbeflippedto'X'`.Twocellsareconnectediftheyareadjacentcellsconnectedhorizontallyorvertically.Example:vartest=[[\"O\",\"O\",\"O\"],[\"O\",\"O\",\"O\"],[\"O\",\"O\",\"O\"]]```jsOOOOOOOOO```Afterrunningyourfunction,theboardshouldbe:```jsOOOOOOOOO```###Analyze*分析终止迭代(不合法)的条件1.m,n坐标已经使用过;2.m,n坐标位于边界而且board[m][n]为'O'3.board[m][n]为'X'```js/***@param{character[][]}board*@return{void}Donotreturnanything,modifyboardin-placeinstead.*/varsolve=function(board){constused=[]for(letm=0;m<board.length;m++){for(letn=0;n<board[m].length;n++){if(used.indexOf(`${m},${n}`)===-1){recursive(board,m,n,used)}}}returnboard};vardirection=[[1,0],[0,1],[-1,0],[0,-1]]//下、右、上、左//m:row;n:columnvarisValid=(board,m,n,used)=>{if(!board[m]||!board[m][n])returnfalseconstnotUsed=used.indexOf(`${m},${n}`)===-1used.push(`${m},${n}`)returnnotUsed}//judgeifitisinboardvarisInBorder=(board,m,n)=>m===0||n===0||m===board.length-1||n===board[0].length-1varrecursive=function(board,m,n,used){//endcondition.if(!isValid(board,m,n,used)||(isInBorder(board,m,n)&&board[m][n]==='O')||board[m][n]==='X'){returnfalse}for(leti=0;i<direction.length;i++){consttag=recursive(board,m+direction[i][0],n+direction[i][1],used)//recursivetosetvalueif(tag&&board[m][n]==='O'){board[m][n]='X'}//若不在边界的坐标m,n四周的值都不合理,且borad[m][n]==='O',则要让board[m][n]='X'//todo:board[m][n-1]==='O'if(i===3&&!isInBorder(board,m,n)&&board[m][n]==='O'){board[m][n]='X'}}returntrue}```「若不在边界的坐标m,n四周的值都不合理,且borad[m][n]==='O',则要让board[m][n]='X'」,这个条件在如下测试用例面前是过不去的砍👀```OOOOOOOOO```观察评论区调整了下思路:1.将边界的O以及与其相连的O标记为`_`。2.遍历节点1.将剩余的O全部替换为X。2.将全部的_替换为O。>点子比行动更重要！```js/***@param{character[][]}board*@return{void}Donotreturnanything,modifyboardin-placeinstead.*/varsolve=function(board){constused=[]for(letm=0;m<board.length;m++){for(letn=0;n<board[m].length;n++){if(isInBorder(m,n,board)&&board[m][n]==='O'){replaceWith_(board,m,n,used)}}}for(letm=0;m<board.length;m++){for(letn=0;n<board[m].length;n++){if(board[m][n]==='O'){board[m][n]='X'}if(board[m][n]==='_'){board[m][n]='O'}}}returnboard};//judgeifitisinboardvarisInBorder=(m,n,board)=>m===0||n===0||m===board.length-1||n===board[0].length-1varisValid=(board,m,n,used)=>{if(!board[m]||!board[m][n])returnfalseconstnotUsed=used.indexOf(`${m},${n}`)===-1used.push(`${m},${n}`)returnnotUsed}vardirection=[[1,0],[0,1],[-1,0],[0,-1]]//下、右、上、左varreplaceWith_=(board,m,n,used)=>{if(!isValid(board,m,n,used)||board[m][n]==='X')returnif(board[m][n]==='O'){board[m][n]='_'}for(leti=0;i<direction.length;i++){replaceWith_(board,m+direction[i][0],n+direction[i][1],used)}}```###SisterTitle79、200"},{name:"131.Palindrome_Partitioning.md",path:"/LeetCode/131.Palindrome_Partitioning.md",type:"file",mdconf:{abbrlink:"s6p7xn8k"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1169,extension:".md",relative:"/LeetCode/131.Palindrome_Partitioning.md",isEmpty:!1,content:'\x3c!--abbrlink:s6p7xn8k--\x3e###131.PalindromePartitioningGivenastrings,partitionssuchthateverysubstringofthepartitionisapalindrome.Return`allpossiblepalindromepartitioning`ofs.Example:```jsInput:"aab"Output:[["aa","b"],["a","a","b"]]```###Analyze本题为`回溯法`的典型案例。*a*a*b√*ab*aa*b√*aab```js/***@param{string}s*@return{string[][]}*/varpartition=function(s){constresult=[]partitionSub(s,0,[],result)returnresult};varpartitionSub=function(s,start,arr,result){if(arr.join(\'\').length===s.length){result.push([...arr])return}for(leti=start+1;i<=s.length;i++){constcurSubString=s.slice(start,i)if(ifPalindrome(curSubString)){arr.push(curSubString)partitionSub(s,i,arr,result)arr.pop()//keycodeforbacktrack}else{continue}}}//judgeifit\'spalindromevarifPalindrome=function(curSubString){returncurSubString===curSubString.split(\'\').reverse().join(\'\')}```###推荐指数※※※※※###相关问题46'},{name:"143.Reorder_List.md",path:"/LeetCode/143.Reorder_List.md",type:"file",mdconf:{abbrlink:"hkvbjeon"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2650,extension:".md",relative:"/LeetCode/143.Reorder_List.md",isEmpty:!1,content:"\x3c!--abbrlink:hkvbjeon--\x3e###143.ReorderListGivenasinglylinkedlistL:L0→L1→..→Ln-1→Ln,reorderitto:L0→Ln→L1→Ln-1→L2→Ln-2→Youmay`notmodifythevaluesinthelist'snodes`,onlynodesitselfmaybechanged.Example1:```jsGiven1->2->3->4,reorderitto1->4->2->3.```Example2:```jsGiven1->2->3->4->5,reorderitto1->5->2->4->3.```###Analyze这道题可作如下转化:1.步骤一:找到链表中点后分割其为left链表、right链表两部分;2.步骤二:翻转right链表,翻转链表思路同[206.Reverse_Linked_List](https://github.com/MuYunyun/blog/blob/master/LeetCode/206.Reverse_Linked_List/README.md);3.步骤三:接着从left链表的左侧,翻转后的right链表的左侧各取一个值进行交替拼接;>快慢指针即quick指针每次走两步,slow指针每次走一步,同[148.Sort_List](https://github.com/MuYunyun/blog/blob/master/LeetCode/148.Sort_List/README.md)```jssqdummy->1->2->3->4->5->NULL步骤一:拆分head链表成`left`、`right`两个链表;l1->2->3->nullr4->5->NULL步骤二:翻转right链表l1->2->3->nullr5->4->NULL步骤三:衔接left、right两个链表;l1->5->2->3->NULLr4->NULL```步骤二中翻转链表的图解大致如下:```jscurnext1->2->3->nullprevcurnull<-1<-2->3->nullprevcurnull<-1<-2<-3->nullprevnull<-1<-2<-3->null``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@return{void}Donotreturnanything,modifyheadin-placeinstead.*/varreorderList=function(head){constdummy=newListNode(0)dummy.next=headletslow=dummyletquick=dummywhile(quick&&quick.next){slow=slow.nextquick=quick.nextquick=quick.next}letright=slow.nextslow.next=nullletleft=dummy.nextright=reverseList(right)while(left&&right){letlNext=left.nextletrNext=right.nextright.next=left.nextleft.next=rightleft=lNextright=rNext}returndummy.next}varreverseList=(list)=>{letprev=nullletcur=listwhile(cur){letnext=cur.nextcur.next=prevprev=curcur=next}returnprev}```![](http://with.muyunyun.cn/3f207867435faf3edeeb4e9d2f5f5b29.jpg)###SimilarTitle148(快慢指针)、234"},{name:"144.Binary_Tree_Preorder_Traversal.md",path:"/LeetCode/144.Binary_Tree_Preorder_Traversal.md",type:"file",mdconf:{abbrlink:"hlnutm1d"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3879,extension:".md",relative:"/LeetCode/144.Binary_Tree_Preorder_Traversal.md",isEmpty:!1,content:"\x3c!--abbrlink:hlnutm1d--\x3e###144.BinaryTreePreorderTraversalGivenabinarytree,returnthe`preordertraversal`ofitsnodes'values.Example:```jsInput:[1,null,2,3]1/\\null2/\\3nullOutput:[1,2,3]```Followup:Recursivesolutionistrivial,couldyoudoit`iteratively`?###Analyze构建tree```jsvartree1=newTreeNode(1)vartree2=newTreeNode(2)vartree3=newTreeNode(3)tree2.left=tree3tree1.left=nulltree1.right=tree2```###递归法首先给出递归解法,代码很简洁。```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[]}*/varpreorderTraversal=function(root){if(root){return[root.val,...preorderTraversal(root.left),...preorderTraversal(root.right)]}else{return[]}}```###扩展——递归和栈的关系```js1/\\25/\\34```针对如图剖析树在先序遍历下的递归操作,其执行过程如下:*步骤一:将根节点1推入栈;*步骤二:从栈中取出顶部元素1并打印。*由于存在右节点5,将其推入栈中;*由于存在左节点2,将其推入栈中;*步骤三:从栈中取出顶部元素2并打印。*由于存在右节点4,将其推入栈中;*由于存在左节点3,将其推入栈中;*步骤四:从栈中取出顶部元素3并打印。*步骤五:从栈中取出顶部元素4并打印。*步骤六:从栈中取出顶部元素5并打印。模拟系统栈实现图解:```js步骤一:1步骤二:取出1并打印;25步骤三:取出2并打印;345步骤四:取出3并打印;步骤四:取出4并打印;步骤四:取出5并打印;```代码实现:```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[]}*/varpreorderTraversal=function(root){constprintArr=[]conststack=[]if(!root)return[]stack.push(root)while(stack.length>0){constpopValue=stack.pop()printArr.push(popValue.val)popValue.right&&stack.push(popValue.right)popValue.left&&stack.push(popValue.left)}returnprintArr}```###颜色标记法(迭代法,模拟系统栈)使用`颜色标记法`剖析树在中序遍历下的递归操作,思路如下:1.将访问过的元素标记为灰色,未访问过的元素标记为白色;2.从栈顶取出访问元素:1.若为灰色元素,则打印之;2.若为白色元素,按照`右->左->中`的顺序推入栈,同时将白色元素标记为灰色元素;>推荐使用颜色标记法,它的解题思路适用于解前序、中序、后序遍历。```js1/\\25/\\34```在如上所示树中,模拟系统栈图解其执行过程如下:```jsgray1white2white5white2white5gray2white3white4white5``````js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[]}*/varpreorderTraversal=function(root){constprintArr=[]if(!root)returnprintArrconststack=[]stack.push({color:'white',node:root})while(stack.length>0){constpickValue=stack.pop()const{color,node}=pickValueif(color==='gray'){printArr.push(node.val)}else{node.right&&stack.push({color:'white',node:node.right})node.left&&stack.push({color:'white',node:node.left})stack.push({color:'gray',node})}}returnprintArr}```###SisterTitle94、145"},{name:"145.Binary_Tree_Postorder_Traversal.md",path:"/LeetCode/145.Binary_Tree_Postorder_Traversal.md",type:"file",mdconf:{abbrlink:"91ua56uy"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2376,extension:".md",relative:"/LeetCode/145.Binary_Tree_Postorder_Traversal.md",isEmpty:!1,content:"\x3c!--abbrlink:91ua56uy--\x3e###BinaryTreePostorderTraversalGivenabinarytree,returnthepostordertraversalofitsnodes'values.Example:```jsInput:[1,null,2,3]1\\2/3``````jsOutput:[3,2,1]```Followup:Recursivesolutionistrivial,couldyoudoititeratively?```jsfunctionTreeNode(val){this.val=valthis.left=this.right=null}vartree1=newTreeNode(1)vartree2=newTreeNode(2)vartree3=newTreeNode(3)tree2.left=tree3tree1.left=nulltree1.right=tree2```###递归法```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[]}*/varpostorderTraversal=function(root){if(root){return[...postorderTraversal(root.left),...postorderTraversal(root.right),root.val]}else{return[]}}```###颜色标记法(迭代法,模拟系统栈)使用`颜色标记法`剖析树在中序遍历下的递归操作,思路如下:1.将访问过的元素标记为灰色,未访问过的元素标记为白色;2.从栈顶取出访问元素:1.若为灰色元素,则打印之;2.若为白色元素,按照`中->右->左`的顺序推入栈,同时将白色元素标记为灰色元素;>推荐使用颜色标记法,它的解题思路适用于解前序、中序、后序遍历。```js1/\\25/\\34```在如上所示树中,模拟系统栈图解其执行过程如下:```jsgray1white2white5white2white5gray2white3white4white5``````js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[]}*/varpostorderTraversal=function(root){constprintArr=[]if(!root)returnprintArrconststack=[]stack.push({color:'white',node:root})while(stack.length>0){const{color,node}=stack.pop()if(color==='gray'){printArr.push(node.val)}else{stack.push({color:'gray',node})node.right&&stack.push({color:'white',node:node.right})node.left&&stack.push({color:'white',node:node.left})}}returnprintArr}```###SisterTitle94、144"},{name:"147.Insertion_Sort_List.md",path:"/LeetCode/147.Insertion_Sort_List.md",type:"file",mdconf:{abbrlink:"s2fvew15"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2571,extension:".md",relative:"/LeetCode/147.Insertion_Sort_List.md",isEmpty:!1,content:"\x3c!--abbrlink:s2fvew15--\x3e###Insertion_Sort_ListSortalinkedlistusinginsertionsort.![](https://upload.wikimedia.org/wikipedia/commons/0/0f/Insertion-sort-example-300px.gif)Agraphicalexampleofinsertionsort.Thepartialsortedlist(black)initiallycontainsonlythefirstelementinthelist.Witheachiterationoneelement(red)isremovedfromtheinputdataandinsertedin-placeintothesortedlist.AlgorithmofInsertionSort:1.Insertionsortiterates,consumingoneinputelementeachrepetition,andgrowingasortedoutputlist.2.Ateachiteration,insertionsortremovesoneelementfromtheinputdata,findsthelocationitbelongswithinthesortedlist,andinsertsitthere.3.Itrepeatsuntilnoinputelementsremain.Example1:```jsInput:4->2->1->3Output:1->2->3->4```Example2:```jsInput:-1->5->3->4->0Output:-1->0->3->4->5```###Analyzehead0:当前已排序列表的最后一个;pre:用于遍历当前已排序列表;```jshead0dummy->4->2->1->3..prehead0dummy->4->2->1->3..prehead0dummy->2->4->1->3..prehead0dummy->1->2->4->3..head0dummy->1->2->3->4``````jshead0dummy->-1->5->3->4->0..prehead0dummy->-1->5->3->4->0..prehead0dummy->-1->3->5->4->0..prehead0dummy->-1->3->5->4->0..prehead0dummy->-1->3->4->5->0..head0dummy->-1->0->3->4->5``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@return{ListNode}*/varinsertionSortList=function(head){constdummy=newListNode(0)dummy.next=headlethead0=dummy.nextwhile(head0&&head0.next){if(head0.next.val>=head0.val){head0=head0.nextcontinue}letpre=dummywhile(pre.next.val<head0.next.val){pre=pre.next}letnext=head0.nexthead0.next=next.nextnext.next=pre.nextpre.next=next}returndummy.next}```###姊妹题148![](http://with.muyunyun.cn/d0cee500a18a46b76ed67016484973e2.jpg)"},{name:"148.Sort_List.md",path:"/LeetCode/148.Sort_List.md",type:"file",mdconf:{abbrlink:"lnvam2ud"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2265,extension:".md",relative:"/LeetCode/148.Sort_List.md",isEmpty:!1,content:"\x3c!--abbrlink:lnvam2ud--\x3e###SortListSortalinkedlistin`O(nlogn)`timeusing`constantspace`complexity.Example1:```jsInput:4->2->1->3Output:1->2->3->4```Example2:```jsInput:-1->5->3->4->0Output:-1->0->3->4->5```###analyze根据题意的要求,锁定使用`归并排序`算法,但是相对数组的归并排序,有以下两个难点:*问题一:如何确认链表的中点?*问题二:链表如何merge?针对问题一,可以使用`快慢指针`来确认链表的中点,快指针每次走两步,慢指针每次走一步,慢指针最后的位置就是链表的中点位置,步骤图解如下:针对奇数情形:```jsslowquickdummy->1->nullslowquickdummy->4->2->1->null偶数:slowquickdummy->1->2->null```针对偶数情形:```jsslowquickdummy->1->2->null```此外另外一个难点是如何进行merge操作。大体思路为1.在leftList中找到比rNode小且最接近rNode的值lNode;2.将rNode插入lNode的后面;步骤图解如下:```jslNoderNodedummy->1->3->null2->4->nulllNoderNodedummy->1->2->3->null4->null``````jsvarsortList=function(head){constdummy=newListNode(0)dummy.next=headlethead0=dummy.nextletslow=dummy,quick=dummywhile(quick.next){quick=quick.nextslow=slow.nextquick.next&&(quick=quick.next)}//iftheslowlistisequaltothequicklist,itmeansthecurrentlistonlyhasonenode.if(slow===quick)returndummy.nextletrightList=slow.nextslow.next=nullletleftList=dummyreturnmerge(sortList(leftList.next),sortList(rightList))}varmerge=function(leftList,rightList){constdummy=newListNode(0)dummy.next=leftListletlNode=dummyletrNode=rightListwhile(lNode&&rNode){while(lNode.next&&lNode.next.val<rNode.val){lNode=lNode.next}letrNext=rNode.nextrNode.next=lNode.nextlNode.next=rNoderNode=rNext}returndummy.next}```###姊妹题147、143、234"},{name:"149.Max_Points_on_a_Line.md",path:"/LeetCode/149.Max_Points_on_a_Line.md",type:"file",mdconf:{abbrlink:"a8g2xifr"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2793,extension:".md",relative:"/LeetCode/149.Max_Points_on_a_Line.md",isEmpty:!1,content:"\x3c!--abbrlink:a8g2xifr--\x3e###titleGivennpointsona2Dplane,findthemaximumnumberofpointsthatlieonthesamestraightline.Example1:```jsInput:[[1,1],[2,2],[3,3]]Output:3Explanation:^||o|o|o+-------------\x3e01234``````jsExample2:Input:[[1,1],[3,2],[5,3],[4,1],[2,3],[1,4]]Output:4Explanation:^||o|oo|o|oo+-------------------\x3e0123456```###Analyze*需要考虑的条件*points中的值是否会重合?*针对除不尽的数字,精度问题是否需要考虑?*传入参数个数;*为避免除法带来的问题,可以求最大公约数,将9/6,18/12转化为3/2;*在同一排可以表示为'0/x',在同一列可以表示为'y/0';*重合的点可以表示为'0/0',并用变量samePoint来记录它;>求最大公约数用到了数学中的辗转相除法:两个正整数a和b(a>b),它们的最大公约数等于a除以b的余数c和b之间的最大公约数。比如25和10,25除以10商2余5,那么25和10的最大公约数,等同于10和5的最大公约数。```js/***@param{number[][]}points*@return{number}*/varmaxPoints=function(points){if(points.length===0)return0if(points.length===1)return1constgetFractions=(pointsdiffX,pointsdiffY)=>{if(pointsdiffX===0&&pointsdiffY!==0)return`y/0`if(pointsdiffX!==0&&pointsdiffY===0)return`0/x`if(pointsdiffX===0&&pointsdiffY===0)return`0/0`constgcdValue=gcd(pointsdiffY,pointsdiffX)constnumerator=pointsdiffY/gcdValueconstdenominator=pointsdiffX/gcdValuereturn`${numerator}/${denominator}`}constgcd=(a,b)=>{if(b===0){returna}returngcd(b,a%b)}letresult=0for(letm=0;m<points.length;m++){constmap=newMap()letsamePoint=0for(letn=0;n<points.length;n++){if(m!==n){constpointsdiffX=points[n][0]-points[m][0]constpointsdiffY=points[n][1]-points[m][1]if(pointsdiffX===0&&pointsdiffY===0){samePoint++}constfractions=getFractions(pointsdiffX,pointsdiffY)if(map.has(fractions)){map.set(fractions,map.get(fractions)+1)}else{map.set(fractions,1)}}}map.forEach((value,key)=>{if(key!=='0/0'){result=Math.max(result,value+samePoint+1)}else{result=Math.max(result,value+1)}})}returnresult}```![](http://with.muyunyun.cn/490006ca96e92c2bbcbca3856d71c1df.jpg-400)###SisterTitle149"},{name:"150.Evaluate_Reverse_Polish_Notation.md",path:"/LeetCode/150.Evaluate_Reverse_Polish_Notation.md",type:"file",mdconf:{abbrlink:"whngy576"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1985,extension:".md",relative:"/LeetCode/150.Evaluate_Reverse_Polish_Notation.md",isEmpty:!1,content:'\x3c!--abbrlink:whngy576--\x3e###150.EvaluateReversePolishNotationEvaluatethevalueofanarithmeticexpressioninReversePolishNotation.Validoperatorsare`+,-,*,/`.Eachoperandmaybean`integer`or`anotherexpression`.Note:*Divisionbetweentwointegersshouldtruncatetowardzero.*ThegivenRPNexpressionis`alwaysvalid`.Thatmeanstheexpressionwouldalwaysevaluatetoaresultandtherewon\'tbeanydividebyzerooperation.Example1:```jsInput:["2","1","+","3","*"]Output:9Explanation:((2+1)*3)=9```Example2:```jsInput:["4","13","5","/","+"]Output:6Explanation:(4+(13/5))=6```Example3:```jsInput:["10","6","9","3","+","-11","*","/","*","17","+","5","+"]Output:22Explanation:((10*(6/((9+3)*-11)))+17)+5=((10*(6/(12*-11)))+17)+5=((10*(6/-132))+17)+5=((10*0)+17)+5=(0+17)+5=17+5=22```###Analyze栈的使用,思路大致如下:1.遇到数字推入栈;2.遇到符号则从栈中取出最后两位进行数学操作;>稍加留意的是,需要对/运算进行取整操作;```js/***@param{string[]}tokens*@return{number}*/varevalRPN=function(tokens){conststack=[]constoperateTag=[\'+\',\'-\',\'*\',\'/\']for(leti=0;i<tokens.length;i++){constoperateTagIndex=operateTag.indexOf(tokens[i])if(operateTagIndex===-1){stack.push(tokens[i])}else{consty=stack.pop()constx=stack.pop()letresultif(operateTagIndex===0){result=Number(x)+Number(y)}elseif(operateTagIndex===1){result=Number(x)-Number(y)}elseif(operateTagIndex===2){result=Number(x)*Number(y)}elseif(operateTagIndex===3){result=parseInt((Number(x)/Number(y)),10)}stack.push(result)}}returnstack[0]}```###SimilarTitle20、71'},{name:"151.Reverse_Words_in_a_String.md",path:"/LeetCode/151.Reverse_Words_in_a_String.md",type:"file",mdconf:{abbrlink:"1fbs6qvn"},birthtime:"2022-01-16",mtime:"2022-01-16",size:256,extension:".md",relative:"/LeetCode/151.Reverse_Words_in_a_String.md",isEmpty:!1,content:"\x3c!--abbrlink:1fbs6qvn--\x3e/***@param{string}str*@returns{string}*/varreverseWords=function(str){consthandleStr=str.trim().replace(/\\s\\s+/g,'')constreverseStr=handleStr.split('').reverse().join('')returnreverseStr};"},{name:"167.Two_Sum_II_-_Input_array_is_sorted.md",path:"/LeetCode/167.Two_Sum_II_-_Input_array_is_sorted.md",type:"file",mdconf:{abbrlink:"xq2xbp15"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2104,extension:".md",relative:"/LeetCode/167.Two_Sum_II_-_Input_array_is_sorted.md",isEmpty:!1,content:"\x3c!--abbrlink:xq2xbp15--\x3e给定一个已按照升序排列的`有序数组`，找到两个数使得它们相加之和等于目标数。函数应该返回这两个下标值index1和index2,其中index1必须小于index2。说明:返回的下标值(index1和index2)不是从零开始的。你可以假设每个输入只对应唯一的答案，而且你不可以重复使用相同的元素。示例:```js输入:numbers=[2,7,11,15],target=9输出:[1,2]解释:2与7之和等于目标数9。因此index1=1,index2=2。```###题解注意题目给出的条件`有序数组`解法一:因为是有序数组,题目可以转化为:第一个值的下标为`i`时,在剩余的有序数组中寻找`target-number[i]`。因而该算法时间复杂度为`O(NlogN)`。![](http://with.muyunyun.cn/4bd2e0a2986f09b8efa56972810291d4.jpg)```js/***@param{number[]}numbers*@param{number}target*@return{number[]}*/vartwoSum=function(numbers,target){for(leti=0;i<numbers.length;i++){constindex=binarySearch(numbers,target-numbers[i])if(typeof(index)==='number'){return[i+1,index+1]}}}varbinarySearch=function(arr,value){letleft=0letright=arr.length-1while(left<=right){constmid=left+Math.ceil((right-left)/2)if(arr[mid]===value){returnmid}elseif(arr[mid]<value){left=mid+1}elseif(arr[mid]>value){right=mid-1}}returnnull}```解法二:用`对撞指针(双指针)`实现时间复杂度为`O(n)`的算法。```js/***@param{number[]}numbers*@param{number}target*@return{number[]}*/vartwoSum=function(numbers,target){letleft=0letright=numbers.length-1while(left<=right){constsum=numbers[left]+numbers[right]if(sum===target){return[left+1,right+1]}elseif(sum>target){right--}elseif(sum<target){left++}}}```###相似问题125、344、345"},{name:"198.House_Robber.md",path:"/LeetCode/198.House_Robber.md",type:"file",mdconf:{abbrlink:"843odobm"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2380,extension:".md",relative:"/LeetCode/198.House_Robber.md",isEmpty:!1,content:"\x3c!--abbrlink:843odobm--\x3e###198.HouseRobberYouareaprofessionalrobberplanningtorobhousesalongastreet.Eachhousehasacertainamountofmoneystashed,theonlyconstraintstoppingyoufromrobbingeachofthemisthat`adjacenthouseshavesecuritysystemsconnected`anditwillautomaticallycontactthepoliceiftwoadjacenthouseswerebrokenintoonthesamenight.Givenanintegerarraynumsrepresentingtheamountofmoneyofeachhouse,returnthemaximumamountofmoneyyoucanrobtonightwithoutalertingthepolice.Example1:```jsInput:nums=[1,2,3,1]Output:4```Explanation:Robhouse1(money=1)andthenrobhouse3(money=3).Totalamountyoucanrob=1+3=4.Example2:```jsInput:nums=[2,7,9,3,1]Output:12```Explanation:Robhouse1(money=2),robhouse3(money=9)androbhouse5(money=1).Totalamountyoucanrob=2+9+1=12.*Constraints:*1<=nums.length<=100*0<=nums[i]<=400###Analyze思考🤔:```js[0,n-1]/|...\\\\[2,n-1][3,n-1][4,n-1]...[n-1]/[4,n-1]:此时找到了重复子项```*`状态的定义`(即函数的定义):考虑偷取`[m,n-1]`范围内的房子*`状态转移`:f(0)=`Math.max(v(0)+f(2),v(1)+f(3),v(2)+f(4),...,v(n-3)+f(n-1),v(n-2),v(n-1))`记忆化递归:```js/***@param{number[]}nums*@return{number}*/varrob=function(nums){returnfind(nums,{},0)}varfind=function(nums,cache,start){if(typeofnums[start]!=='number')return0constlength=nums.lengthletsum=0for(leti=start;i<length;i++){if(typeofcache[i]!=='number'){cache[i]=find(nums,cache,i+2)}sum=Math.max(sum,nums[i]+cache[i])}returnsum}```动态规划:```js/***@param{number[]}nums*@return{number}*/varrob=function(nums){constlength=nums.lengthconstcache={}letmax=0for(leti=length-1;i>=0;i--){for(letm=i;m<=length-1;m++){if(typeofcache[m]!=='number'){cache[m]=Math.max(nums[m]+(cache[m+2]||0),cache[m+1]||0)}max=Math.max(max,cache[m])}}returnmax}```"},{name:"199.Binary_Tree_Right_Side_View.md",path:"/LeetCode/199.Binary_Tree_Right_Side_View.md",type:"file",mdconf:{abbrlink:"tlr4ro6a"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1385,extension:".md",relative:"/LeetCode/199.Binary_Tree_Right_Side_View.md",isEmpty:!1,content:"\x3c!--abbrlink:tlr4ro6a--\x3e###199.BinaryTreeRightSideViewGivenabinarytree,imagineyourselfstandingontherightsideofit,returnthevaluesofthenodesyoucanseeordered`fromtoptobottom`.Example:```jsInput:[1,2,3,null,5,null,4]Output:[1,3,4]```Explanation:1<---/\\23<---\\\\54<---###Analyze将题目表述转化下为:展示当前行的最右侧元素即可;该题考察的是`树的广度遍历(BFS)`,运用到了`队列`相关知识。```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number[]}*/varrightSideView=function(root){constprintList=[]if(!root){return[]}constlist=[]list.push({level:0,node:root})while(list.length>0){const{level,node}=list.shift()if(!printList[level]){printList[level]=[]}printList[level].push(node.val)node.left&&list.push({level:level+1,node:node.left})node.right&&list.push({level:level+1,node:node.right})}constresult=[]printList.map(printListArr=>{result.push(printListArr[printListArr.length-1])})returnresult}```###SimilarTitle102(SisterTitle)、107、103"},{name:"200.Number_of_Islands.md",path:"/LeetCode/200.Number_of_Islands.md",type:"file",mdconf:{abbrlink:"868q1z54"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1702,extension:".md",relative:"/LeetCode/200.Number_of_Islands.md",isEmpty:!1,content:'\x3c!--abbrlink:868q1z54--\x3e###200.NumberofIslandsGivenanmxn2dgridmapof\'1\'s(land)and\'0\'s(water),returnthenumberofislands.Anislandissurroundedbywaterandisformedbyconnectingadjacentlandshorizontallyorvertically.Youmayassumeallfouredgesofthegridareallsurroundedbywater.Example1:```jsInput:grid=[["1","1","1","1","0"],["1","1","0","1","0"],["1","1","0","0","0"],["0","0","0","0","0"]]Output:1```Example2:```jsInput:grid=[["1","1","0","0","0"],["1","1","0","0","0"],["0","0","1","0","0"],["0","0","0","1","1"]]Output:3```Constraints:*m==grid.length*n==grid[i].length*1<=m,n<=300*grid[i][j]is\'0\'or\'1\'.###Analyze*`floodfill`算法。```js/***@param{character[][]}grid*@return{number}*/varnumIslands=function(grid){constresult=[]constused=[]for(letm=0;m<grid.length;m++){for(letn=0;n<grid[m].length;n++){if(used.indexOf(`${m},${n}`)===-1&&grid[m][n]===\'1\'){result.push(used)backTrace(grid,m,n,result,used)}}}returnresult.length};varbackTrace=function(grid,m,n,result,used){constdirection=[[1,0],[0,1],[-1,0],[0,-1]]for(leti=0;i<direction.length;i++){constuse=used.indexOf(`${m+direction[i][0]},${n+direction[i][1]}`)>-1if(!use&&grid[m+direction[i][0]]&&grid[m+direction[i][0]][n+direction[i][1]]===\'1\'){used.push(`${m+direction[i][0]},${n+direction[i][1]}`)backTrace(grid,m+direction[i][0],n+direction[i][1],result,used)}}}```###SisterTitle130、200'},{name:"202.Happy_Number.md",path:"/LeetCode/202.Happy_Number.md",type:"file",mdconf:{abbrlink:"mo1q1fss"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1459,extension:".md",relative:"/LeetCode/202.Happy_Number.md",isEmpty:!1,content:"\x3c!--abbrlink:mo1q1fss--\x3e###title编写一个算法来判断一个数是不是“快乐数”。一个“快乐数”定义为：对于一个正整数，每一次将该数替换为它`每个位置上的数字的平方和`，然后重复这个过程直到这个数变为1，也可能是无限循环但始终变不到1。如果可以变为1，那么这个数就是快乐数。示例:```js输入:19输出:true解释:1^2+9^2=828^2+2^2=686^2+8^2=1001^2+0^2+0^2=1```###题解*使用`字典Map`来记录循环过程中各个位置上的数字的平方和*若平方和的值为1,则跳出循环,这个数是快乐数;*若平方和的值不为1,则判断字典Map中是否已有该值;*若字典Map中已有该值,则这个数不是快乐数;```js/***@param{number}n*@return{boolean}*/varisHappy=function(n){constmapResult=newMap()letcurrentSum=getSum(n)while(currentSum!==1){constgetMapResult=mapResult.get(currentSum)if(!getMapResult){mapResult.set(currentSum,1)}else{returnfalse}currentSum=getSum(currentSum)}returntrue}/*获取数字各个位数之和*/vargetSum=function(num){letsum=0constnumStr=String(num)for(leti=0;i<numStr.length;i++){sum=sum+Math.pow(numStr[i],2)}returnsum}```###相关题目205、242、290、349、350、451"},{name:"203.Remove_Linked_List_Elements.md",path:"/LeetCode/203.Remove_Linked_List_Elements.md",type:"file",mdconf:{abbrlink:"nzetbppy"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1216,extension:".md",relative:"/LeetCode/203.Remove_Linked_List_Elements.md",isEmpty:!1,content:"\x3c!--abbrlink:nzetbppy--\x3e###RemoveLinkedListElementsRemoveallelementsfromalinkedlistofintegersthathavevalueval.Example:```jsInput:1->2->6->3->4->5->6,val=6Output:1->2->3->4->5```###Analyze```jsprevcurnext1->2->6->3->4->5->6```思路:*借助指针prev,cur,next*若cur.val与传入val相等,则让prev.next指向next>如果只用cur、next两个指针,若next.val与传入val相等,则让cur=next.next后的cur.val与传入的val仍然相等,此时就无法改变移除当前的cur了,因此需要引入第三个指针prev。```js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@param{number}val*@return{ListNode}*/varremoveElements=function(head,val){constdummyHead=newListNode(head)dummyHead.next=headletprev=dummyHeadletcur=dummyHead.nextwhile(cur){letnext=cur.nextif(cur.val===val){prev.next=next}else{prev=cur}cur=next}returndummyHead.next}```###SimilarTitle21,82(SisterTitle)"},{name:"205.Isomorphic_Strings.md",path:"/LeetCode/205.Isomorphic_Strings.md",type:"file",mdconf:{abbrlink:"whxjvaux"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1926,extension:".md",relative:"/LeetCode/205.Isomorphic_Strings.md",isEmpty:!1,content:'\x3c!--abbrlink:whxjvaux--\x3e###205.IsomorphicStringsGiventwostringssandt,determineiftheyareisomorphic.Twostringsareisomorphicifthecharactersinscanbereplacedtogett.Alloccurrencesofacharactermustbereplacedwithanothercharacterwhilepreservingtheorderofcharacters.`Notwocharactersmaymaptothesamecharacter`but`acharactermaymaptoitself`.Example1:```jsInput:s="egg",t="add"Output:true```Example2:```jsInput:s="foo",t="bar"Output:false```Example3:```jsInput:s="paper",t="title"Output:true```Note:Youmayassumebothsandthavethesamelength.###题解方法一:字典哈希*遍历字符串,使用`字典map`构建s中字符串与t中字符串(以及t中字符串与s中字符串)的映射关系;*若发现存在`一对多`的情况,则s与t不是同构的;*遍历结束,则s与t是同构的;>一对多:比如s为\'aa\',t为\'ab\',此时’a\'字符就对应了\'a\'、\'b\'两个字符,即为一对多。```js/***@param{string}s*@param{string}t*@return{boolean}*/varisIsomorphic=function(s,t){constmapS=newMap()constmapT=newMap()for(leti=0;i<s.length;i++){constgetS=mapS.get(s[i])constgetT=mapT.get(t[i])if((getS&&getS!==t[i])||(getT&&getT!==s[i])){returnfalse}mapS.set(s[i],t[i])mapT.set(t[i],s[i])}returntrue}```方法二:判断s与t字符串中字符出现的第一个位置。(针对本题的巧妙解法,不过推荐优先掌握方法一)```js/***@param{string}s*@param{string}t*@return{boolean}*/varisIsomorphic=function(s,t){for(leti=0;i<s.length;i++){if(s.indexOf(s[i])!==t.indexOf(t[i])){returnfalse}}returntrue};```###相关题目202、242、290、349、350、451'},{name:"206.Reverse_Linked_List.md",path:"/LeetCode/206.Reverse_Linked_List.md",type:"file",mdconf:{abbrlink:"w6mlr34n"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1986,extension:".md",relative:"/LeetCode/206.Reverse_Linked_List.md",isEmpty:!1,content:"\x3c!--abbrlink:w6mlr34n--\x3e###titleReverseasinglylinkedlist.Example:```jsInput:1->2->3->4->5->NULLOutput:5->4->3->2->1->NULL```Followup:Alinkedlistcanbereversedeitheriterativelyorrecursively.Couldyouimplementboth?###Analyze```jsprevcurnext1->2->3->4->5->nullnull<-1->2->3->4->5```step:1.定义三个变量prev,cur,next表示上一个值,当前值,下一个值;2.如果存在cur.next则将cur.next指向prev;3.将cur移动到next位置,prev移动到cur位置,重复步骤2;```js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@return{ListNode}*/varreverseList=function(head){letprev=nullletcur=headif(head){letnext=head.nextwhile(cur.next){cur.next=prevprev=curcur=nextnext=next.next}cur.next=prev}returncur};```这样写存在一些冗余的代码,比如需要判断head是否为空,同时因为while中的条件是cur.next,因为末尾的cur.next需要单独处理一遍,比较麻烦,因此进而优化。```js/***@param{ListNode}head*@return{ListNode}*/varreverseList=function(head){letprev=nullletcur=headwhile(cur!==null){letnext=cur.nextcur.next=prevprev=curcur=next}returnprev};```根据题目的建议,接着用递归的方式实现一遍(值得注意的是,迭代与递归的写法都是能互相转换的。)```js/***@param{ListNode}head*@return{ListNode}*/varreverseList=function(head){letprev=nullletcur=headconstrecursiveFn=()=>{if(cur===null)returnletnext=cur.nextcur.next=prevprev=curcur=nextrecursiveFn()}recursiveFn()returnprev};```###SisterTitle92"},{name:"209.Minimum_Size_Subarray_Sum.md",path:"/LeetCode/209.Minimum_Size_Subarray_Sum.md",type:"file",mdconf:{abbrlink:"e3zceith"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1546,extension:".md",relative:"/LeetCode/209.Minimum_Size_Subarray_Sum.md",isEmpty:!1,content:"\x3c!--abbrlink:e3zceith--\x3e###题目:长度最小的子数组给定一个含有n个正整数的数组和一个正整数s,找出该数组中满足其和≥s的长度最小的连续子数组。如果不存在符合条件的连续子数组，返回0。示例:```js输入:s=7,nums=[2,3,1,2,4,3]输出:2解释:子数组[4,3]是该条件下的长度最小的连续子数组。```进阶:如果你已经完成了`O(n)`时间复杂度的解法,请尝试`O(nlogn)`时间复杂度的解法。###解题思路:`滑动列表`。时间复杂度为`O(n)`,空间复杂度为`1`。1.取滑动列表[left,right];2.若列表[left,right]中的取值之和小于s,则列表的有边界right往右扩张。3.若列表[left,right]中的取值之和大于s,则列表的左边界left往右扩张。```js/***@param{number}s*@param{number[]}nums*@return{number}*/varminSubArrayLen=function(s,nums){letleft=0,right=-1//[left,right],左闭右闭letminDistance=nums.length+1//存储left与right间的距离letsum=0//[left,right]间值的总和while(left<nums.length-1){if(right<nums.length-1&&sum<s){right++sum=sum+nums[right]}else{sum=sum-nums[left]left++}if(sum>=s){minDistance=Math.min(minDistance,right-left+1)}}if(minDistance===nums.length+1)return0returnminDistance}```###SisterTitle3、76、209、438"},{name:"213.House_Robber_II.md",path:"/LeetCode/213.House_Robber_II.md",type:"file",mdconf:{abbrlink:"do877fu2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3412,extension:".md",relative:"/LeetCode/213.House_Robber_II.md",isEmpty:!1,content:"\x3c!--abbrlink:do877fu2--\x3e###213.House_Robber_IIYouareaprofessionalrobberplanningtorobhousesalongastreet.Eachhousehasacertainamountofmoneystashed.Allhousesatthisplaceare`arrangedinacircle`.Thatmeans`thefirsthouseistheneighborofthelastone`.Meanwhile,adjacenthouseshaveasecuritysystemconnected,anditwillautomaticallycontactthepoliceiftwoadjacenthouseswerebrokenintoonthesamenight.Givenanintegerarraynumsrepresentingtheamountofmoneyofeachhouse,returnthemaximumamountofmoneyyoucanrobtonightwithoutalertingthepolice.Example1:```jsInput:nums=[2,3,2]Output:3Explanation:Youcannotrobhouse1(money=2)andthenrobhouse3(money=2),becausetheyareadjacenthouses.```Example2:```jsInput:nums=[1,2,3,1]Output:4Explanation:Robhouse1(money=1)andthenrobhouse3(money=3).Totalamountyoucanrob=1+3=4.```Example3:```jsInput:nums=[0]Output:0```Constraints:*1<=nums.length<=100*0<=nums[i]<=1000###Analyze思考🤔:将4235拆成423与235两种情形。如此便将其转化为题目[198.HouseRobber](https://github.com/MuYunyun/blog/blob/main/LeetCode/198.House_Robber.md)```js[0,n-2]||[1,n-1]/|\\\\/|...\\[2,n-2][3,n-2][4,n-2]...[n-2][3,n-1][4,n-1]...[n-1]/[4,n-2]:此时找到了重复子项```*`状态的定义`(即函数的定义):考虑偷取`[m,n-2]||[z,n-1]`范围内的房子*`状态转移`:f(0)=`Math.max(v(0)+f(2),v(1)+f(3),v(2)+f(4),...,v(n-3)+f(n-1),v(n-2),v(n-1))`递归:```js/***@param{number[]}nums*@return{number}*/varrob=function(nums){if(nums.length===1){returnnums[0]}constnums1=nums.slice(0,nums.length-1)constnums2=nums.slice(1,nums.length)returnMath.max(robPosition(nums1,0,{}),robPosition(nums2,0,{}))}varrobPosition=function(nums,start,cache){letsum=0if(typeofnums[start]!=='number')return0//theforloopcanbeoptimizedhere.for(leti=start;i<nums.length;i++){if(typeofcache[i]!=='number'){cache[i]=robPosition(nums,i+2,cache)}sum=Math.max(sum,nums[i]+cache[i])}returnsum}```动态规划:```js/***@param{number[]}nums*@return{number}*/varrob=function(nums){if(nums.length===0)return0if(nums.length===1){returnnums[0]}if(nums.length===2){returnMath.max(nums[0],nums[1])}constnums1=nums.slice(0,nums.length-1)constnums2=nums.slice(1,nums.length)returnMath.max(robPosition(nums1),robPosition(nums2))}varrobPosition=(nums)=>{constlastDigit=nums[nums.length-1]constlastSecondDigit=nums[nums.length-2]constcache={0:lastDigit,1:Math.max(lastSecondDigit,lastDigit)}letsum=Math.max(lastSecondDigit,lastDigit)for(leti=2;i<nums.length;i++){if(typeofcache[i]!=='number'){constpoint=nums.length-(i+1)cache[i]=Math.max(nums[point]+cache[i-2],cache[i-1])}sum=Math.max(sum,cache[i])}returnsum}```"},{name:"215.Kth_Largest_Element_in_an_Array.md",path:"/LeetCode/215.Kth_Largest_Element_in_an_Array.md",type:"file",mdconf:{abbrlink:"qc83shc8"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2659,extension:".md",relative:"/LeetCode/215.Kth_Largest_Element_in_an_Array.md",isEmpty:!1,content:"\x3c!--abbrlink:qc83shc8--\x3e###215.KthLargestElementinanArray在`未排序的数组中`找到第k个最大的元素。请注意，你需要找的是数组排序后的第k个最大的元素，而不是第k个不同的元素。示例1:```js输入:[3,2,1,5,6,4]和k=2输出:5```示例2:```js输入:[3,2,3,1,2,4,5,5,6]和k=4输出:4```说明:你可以假设k总是有效的，且1≤k≤数组的长度。###解题解法一:排序。空间复杂度为O(NlogN),空间复杂度为O(1)```js/***@param{number[]}nums*@param{number}k*@return{number}*/varfindKthLargest=function(nums,k){nums.sort((r1,r2)=>r2-r1)returnnums[k-1]}```>如果初始数据的元素个数不确定,解法一就无法使用了,这个时候适合使用解法二。解法二:快速选择思路:本方法大致上与快速排序相同。简便起见，注意到第k个最大元素也就是升序排序后下标为`N-k`的元素。递归使用[划分算法](https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/划分算法.md)。*使用划分算法,定义一个枢纽值,并将其放到指定位置(小于该枢纽值的都在其左边,大于该枢纽值的都在其右边);*比较枢纽值的下标position与N-k的大小关系![](http://with.muyunyun.cn/503d3b6311c2f401a50bcdb5c57f0f52.jpg)>算法复杂度为O(n)。计算:`n+(1/2)*n+(1/4)*n+...+(1/2)^n*n`,经等比数列求和为`2n-2n/2^n`,当n趋于无穷大时,结果趋近为2n。```js/***@param{number[]}nums*@param{number}k*@return{number}*/varfindKthLargest=function(nums,k){constlength=nums.lengthreturnquickSelect(0,length-1,length-k,nums)}varquickSelect=function(left,right,kthSmall,arr){constposition=partition(arr,left,right)if(position===kthSmall){returnarr[position]}elseif(position<kthSmall){returnquickSelect(position+1,right,kthSmall,arr)}elseif(position>kthSmall){returnquickSelect(left,position-1,kthSmall,arr)}}/*分区算法*/functionpartition(nums,left,right){constpivot=nums[left]//枢纽值letpos=left//用来记住最后枢纽值pivot应该置于的位置for(leti=left+1;i<=right;i++){if(nums[i]<pivot){pos++swap(nums,pos,i)}}swap(nums,pos,left)returnpos}/*交换位置nums数组,a,b为下标*/varswap=function(nums,a,b){consttmp=nums[a]nums[a]=nums[b]nums[b]=tmp}```###镜像题目75"},{name:"216.Combination_Sum_III.md",path:"/LeetCode/216.Combination_Sum_III.md",type:"file",mdconf:{abbrlink:"1ksprl4b"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1809,extension:".md",relative:"/LeetCode/216.Combination_Sum_III.md",isEmpty:!1,content:"\x3c!--abbrlink:1ksprl4b--\x3e###216.Combination_Sum_IIIFindallvalidcombinationsofknumbersthatsumuptonsuchthatthefollowingconditionsaretrue:*Onlynumbers1through9areused.*`Eachnumberisusedatmostonce`.Returnalistofallpossiblevalidcombinations.Thelistmustnotcontainthesamecombinationtwice,andthecombinationsmaybereturnedinanyorder.Example1:```jsInput:k=3,n=7Output:[[1,2,4]]Explanation:1+2+4=7Therearenoothervalidcombinations.```Example2:```jsInput:k=3,n=9Output:[[1,2,6],[1,3,5],[2,3,4]]Explanation:1+2+6=91+3+5=92+3+4=9Therearenoothervalidcombinations.```Example3:```jsInput:k=4,n=1Output:[]Explanation:Therearenovalidcombinations.[1,2,1]isnotvalidbecause1isusedtwice.```Example4:```jsInput:k=3,n=2Output:[]Explanation:Therearenovalidcombinations.```Example5:```jsInput:k=9,n=45Output:[[1,2,3,4,5,6,7,8,9]]Explanation:1+2+3+4+5+6+7+8+9=45​​​​​​​Therearenoothervalidcombinations.```Constraints:*2<=k<=9*1<=n<=60###Analyze从题目`Eachnumberisusedatmostonce`得知,该题属于组合问题。```js/***@param{number}k*@param{number}n*@return{number[][]}*/varcombinationSum3=function(k,n){constresult=[]recursive(k,n,1,[],result)returnresult};varrecursive=function(k,n,start,temp,result){if(n<0||temp.length>k)returnif(n===0&&temp.length===k){result.push([...temp])return}for(leti=start;i<=9;i++){temp.push(i)n=n-irecursive(k,n,i+1,temp,result)n=n+itemp.pop()}}```###SisterTitle39、40"},{name:"217.Contains_Duplicate.md",path:"/LeetCode/217.Contains_Duplicate.md",type:"file",mdconf:{abbrlink:"5yofdhct"},birthtime:"2022-01-16",mtime:"2022-01-16",size:640,extension:".md",relative:"/LeetCode/217.Contains_Duplicate.md",isEmpty:!1,content:"\x3c!--abbrlink:5yofdhct--\x3e###ContainsDuplicateGivenanarrayofintegers,findifthearraycontainsanyduplicates.Yourfunctionshouldreturntrueifanyvalueappearsatleasttwiceinthearray,anditshouldreturnfalseifeveryelementisdistinct.Example1:```jsInput:[1,2,3,1]Output:trueExample2:Input:[1,2,3,4]Output:falseExample3:Input:[1,1,1,3,3,4,3,2,4,2]Output:true```###Solved```js/***@param{number[]}nums*@return{boolean}*/varcontainsDuplicate=function(nums){constresult=[...newSet(nums)]returnresult.length!==nums.length}```###SisterTitle219、220"},{name:"219.Contains_Duplicate_II.md",path:"/LeetCode/219.Contains_Duplicate_II.md",type:"file",mdconf:{abbrlink:"dv4h5unq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1946,extension:".md",relative:"/LeetCode/219.Contains_Duplicate_II.md",isEmpty:!1,content:"\x3c!--abbrlink:dv4h5unq--\x3e###ContainsDuplicateIIGivenanarrayofintegersandanintegerk,findoutwhethertherearetwodistinctindicesiandjinthearraysuchthatnums[i]=nums[j]andtheabsolutedifferencebetweeniandjisatmostk.```jsExample1:Input:nums=[1,2,3,1],k=3Output:true``````jsExample2:Input:nums=[1,0,1,1],k=1Output:true``````jsExample3:Input:nums=[1,2,3,1,2,3],k=2Output:false```###解法*遍历当前nums,维护一个队列arr来存储k个数值,判断该队列arr中是否包含当前遍历值nums[l];*若有,则返回true;*若遍历结束,则返回false;```js/***@param{number[]}nums*@param{number}k*@return{boolean}*/varcontainsNearbyDuplicate=function(nums,k){constarr=[]letl=0letr=nums.lengthwhile(l<r){if(arr.indexOf(nums[l])>-1){returntrue}if(arr.length<k){arr.push(nums[l])}elseif(arr.length>=k&&k>0){arr.shift(arr[0])arr.push(nums[l])}l++}returnfalse}```![](http://with.muyunyun.cn/db151c5e5eef41a30b2e8cbca9fd417e.jpg-400)算法时间复杂度是NlogN级别的,执行时间花了1800ms。```js/***@param{number[]}nums*@param{number}k*@return{boolean}*/varcontainsNearbyDuplicate=function(nums,k){consttemSet=newSet()letl=0letr=nums.lengthwhile(l<r){if(temSet.has(nums[l])){returntrue}if(temSet.size<k){temSet.add(nums[l])}elseif(temSet.size>=k&&k>0){temSet.delete(nums[l-k])temSet.add(nums[l])}l++}returnfalse}```![](http://with.muyunyun.cn/c756eba46d7c18d4fe4acfbc011e3a78.jpg-400)使用Set用同样的思路实验,时间复杂度为O(N),其执行时间比之前用数组队列的实现快了很多。###SisterTitle217、220"},{name:"220.Contains_Duplicate_III.md",path:"/LeetCode/220.Contains_Duplicate_III.md",type:"file",mdconf:{abbrlink:"mownr7td"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1949,extension:".md",relative:"/LeetCode/220.Contains_Duplicate_III.md",isEmpty:!1,content:"\x3c!--abbrlink:mownr7td--\x3e###ContainsDuplicateIIIGivenanarrayofintegers,findoutwhetherthereare`twodistinctindices`iandjinthearraysuchthattheabsolutedifferencebetweennums[i]andnums[j]isatmosttandtheabsolutedifferencebetweeniandjisatmostk.Example1:```jsInput:nums=[1,2,3,1],k=3,t=0Output:true```Example2:```jsInput:nums=[1,0,1,1],k=1,t=2Output:true```Example3:```jsInput:nums=[1,5,9,1,5,9],k=2,t=3Output:false```###Analyze思路:参照官方题解该题可以使用桶排序的思想来设置查找表的key-value。比较好理解的一个例子:小敏生日在3月份,她想知道是否有其他同学生日和她在30天以内,假设每个月有30天,那么只要找2月份和4月份两个月生日的同学就行了,转化到该题目即key只要保留一个value就行。>桶排序的思想:将数据根据归类划分到若干个区域,然后对该些区域分别进行排序;此题综合了滑动窗口、查找表、桶排序的知识,需要二刷。```js|i-j|≤k|nums[i]-nums[j]|≤t```*此外需要考虑边界值*k<=0、t<=0```js/***@param{number[]}nums*@param{number}k*@param{number}t*@return{boolean}*/varcontainsNearbyAlmostDuplicate=function(nums,k,t){if(k<0||t<0)returnfalseconstgetKey=(value)=>{returnMath.floor(value/(t+1))}constmap=newMap()letl=0while(l<nums.length){constkey=getKey(nums[l])if(map.has(key)){returntrue}elseif(map.has(key+1)||map.has(key-1)){if(map.get(key+1)-nums[l]<=t){returntrue}if(nums[l]-map.get(key-1)<=t){returntrue}}map.set(key,nums[l])if(l>=k){map.delete(getKey(nums[l-k]))}l++}returnfalse}```###SisterTitle217、219"},{name:"222.Count_Complete_Tree_Nodes.md",path:"/LeetCode/222.Count_Complete_Tree_Nodes.md",type:"file",mdconf:{abbrlink:"ajme96bt"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2090,extension:".md",relative:"/LeetCode/222.Count_Complete_Tree_Nodes.md",isEmpty:!1,content:"\x3c!--abbrlink:ajme96bt--\x3e###222.CountCompleteTreeNodesGivena`completebinarytree`,countthenumberofnodes.Note:DefinitionofacompletebinarytreefromWikipedia:Inacompletebinarytreeeverylevel,exceptpossiblythelast,iscompletelyfilled,andallnodesinthelastlevelareasfarleftaspossible.Itcanhavebetween1and2hnodesinclusiveatthelastlevelh.Example:```jsInput:1/\\23/\\/456Output:6```###Analyze方式一:递归```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number}*/varcountNodes=function(root){if(!root)return0return1+countNodes(root.left)+countNodes(root.right)};```方式二:利用完全二叉树性质解题根据题目给出的当前树是完全二叉树的限制,可得到子树存在如下两点条件:*若左子树的深度=右子树的深度,则`左子树为满二叉树`;*若左子树的深度>右子树的深度,则`右子树为满二叉树`;可以根据上述分析简化递归次数。```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number}*/varcountNodes=function(root){if(!root)return0constleftDeep=deep(root.left)constrightDeep=deep(root.right)if(leftDeep===rightDeep){//thecountofleftnodeisMath.pow(2,leftDeep)-1,sothetotalis//Math.pow(2,leftDeep)-1+countNodes(root.right)+1,1meansparentnodereturnMath.pow(2,leftDeep)+countNodes(root.right)}else{returnMath.pow(2,rightDeep)+countNodes(root.left)}};//getthedeepofcurrentnodecleverlywithfeaturesofthecompletetree.vardeep=function(node){if(!node)return0letnodeVal=nodeletcount=1while(nodeVal.left){count++nodeVal=nodeVal.left}returncount}```"},{name:"226.Invert_Binary_Tree.md",path:"/LeetCode/226.Invert_Binary_Tree.md",type:"file",mdconf:{abbrlink:"jd8mdg2l"},birthtime:"2022-01-16",mtime:"2022-01-16",size:938,extension:".md",relative:"/LeetCode/226.Invert_Binary_Tree.md",isEmpty:!1,content:"\x3c!--abbrlink:jd8mdg2l--\x3e###226.InvertBinaryTreeInvertabinarytree.Example:```jsInput:4/\\27/\\/\\1369``````jsOutput:4/\\72/\\/\\9631```Trivia:ThisproblemwasinspiredbythisoriginaltweetbyMaxHowell:Google:90%ofourengineersusethesoftwareyouwrote(Homebrew),butyoucan’tinvertabinarytreeonawhiteboardsof***off.###Analyze递归调换左右子节点的位置。```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{TreeNode}*/varinvertTree=function(root){if(!root)returnnullif(root.left||root.right){consttmp=root.leftroot.left=root.rightroot.right=tmpinvertTree(root.left)invertTree(root.right)}returnroot};```"},{name:"230.Kth_Smallest_Element_in_a_BST.md",path:"/LeetCode/230.Kth_Smallest_Element_in_a_BST.md",type:"file",mdconf:{abbrlink:"7oyb6t3w"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1679,extension:".md",relative:"/LeetCode/230.Kth_Smallest_Element_in_a_BST.md",isEmpty:!1,content:"\x3c!--abbrlink:7oyb6t3w--\x3e###230.KthSmallestElementinaBSTGivenabinarysearchtree,writeafunctionkthSmallesttofindthekthsmallestelementinit.Example1:```jsInput:root=[3,1,4,null,2],k=13/\\14\\2Output:1```Example2:```jsInput:root=[5,3,6,2,4,null,null,1],k=35/\\36/\\24/1Output:3```Followup:WhatiftheBSTismodified(insert/deleteoperations)oftenandyouneedtofindthekthsmallestfrequently?HowwouldyouoptimizethekthSmallestroutine?Constraints:ThenumberofelementsoftheBSTisbetween1to10^4.Youmayassumekisalwaysvalid,1≤k≤BST'stotalelements.###Analyze思路:中序遍历维护计数,当计数值到达k时,当前节点的val即为题目要求的第k小的值元素值。```js/***Definitionforabinarytreenode.*functionTreeNode(val,left,right){*this.val=(val===undefined?0:val)*this.left=(left===undefined?null:left)*this.right=(right===undefined?null:right)*}*//***@param{TreeNode}root*@param{number}k*@return{number}*/varkthSmallest=function(root,k){constcountResult={value:0}returnanalyzeCount(root,k,countResult)}varanalyzeCount=function(node,k,count){if(!node)returnnullconstpickLeft=analyzeCount(node.left,k,count)if(typeofpickLeft==='number')returnpickLeftcount.value=count.value+1if(k===count.value){returnnode.val}constpickRight=analyzeCount(node.right,k,count)if(typeofpickRight==='number')returnpickRight}```"},{name:"234.Palindrome_Linked_List.md",path:"/LeetCode/234.Palindrome_Linked_List.md",type:"file",mdconf:{abbrlink:"ujzwq7v8"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2174,extension:".md",relative:"/LeetCode/234.Palindrome_Linked_List.md",isEmpty:!1,content:"\x3c!--abbrlink:ujzwq7v8--\x3e###234.PalindromeLinkedListGivenasinglylinkedlist,determineifitisapalindrome.Example1:```jsInput:1->2Output:false```Example2:```jsInput:1->2->2->1Output:true```Followup:CouldyoudoitinO(n)timeandO(1)space?###Analyze思路比较清晰直观,步骤如下:1.第一步:使用快慢指针找到链表中点,链表分割为左右两部分;2.第二步:翻转右边的链表节点;3.第三步:比较左右两边的节点;>该题与题目[143.Reorder_List](https://github.com/MuYunyun/blog/blob/master/LeetCode/143.Reorder_List/README.md)十分类似。步骤图解:```js第一步:找中点,分割链表;qsdummy->1->2->2->1->NULL..qsdummy->1->2->2->1->NULLleft链表:1->2->nullright链表:2->1->null第二步:翻转右边的链表节点;left链表:1->2->nullright链表:1->2->null第三步:判断left链表与right链表;``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@return{boolean}*/varisPalindrome=function(head){constdummy=newListNode(0)dummy.next=headletslow=dummy,quick=dummywhile(quick&&quick.next){slow=slow.nextquick=quick.next.next}letright=slow.nextslow.next=nullletleft=dummy.nextright=reverseLink(right)while(left&&right){if(left.val!==right.val){returnfalse}left=left.nextright=right.next}returntrue}functionreverseLink(list){constdummy=newListNode(0)dummy.next=listletprev=nullletcur=dummy.nextwhile(cur){constnext=cur.nextcur.next=prevprev=curcur=next}returnprev}```![](http://with.muyunyun.cn/f1d261951e75505802e0b5b8ea8848bc.jpg)###SisterTitle*[143.Reorder_List]((https://github.com/MuYunyun/blog/blob/master/LeetCode/143.Reorder_List/README.md))"},{name:"235.Lowest_Common_Ancestor_of_a_Binary_Search_Tree.md",path:"/LeetCode/235.Lowest_Common_Ancestor_of_a_Binary_Search_Tree.md",type:"file",mdconf:{abbrlink:"r55v6uqs"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1873,extension:".md",relative:"/LeetCode/235.Lowest_Common_Ancestor_of_a_Binary_Search_Tree.md",isEmpty:!1,content:"\x3c!--abbrlink:r55v6uqs--\x3e###235.LowestCommonAncestorofaBinarySearchTreeGivena`binarysearchtree`(BST),findthe`lowestcommonancestor`(LCA)oftwogivennodesintheBST.AccordingtothedefinitionofLCAonWikipedia:“ThelowestcommonancestorisdefinedbetweentwonodespandqasthelowestnodeinTthathasbothpandqasdescendants(whereweallowanodetobeadescendantofitself).”Givenbinarysearchtree:root=[6,2,8,0,4,7,9,null,null,3,5]```js6/\\28/\\/\\0479/\\35```Example1:```jsInput:root=[6,2,8,0,4,7,9,null,null,3,5],p=2,q=8Output:6```Explanation:TheLCAofnodes2and8is6.Example2:```jsInput:root=[6,2,8,0,4,7,9,null,null,3,5],p=2,q=4Output:2```Explanation:TheLCAofnodes2and4is2,since`anodecanbeadescendantofitself`accordingtotheLCAdefinition.Constraints:*`Allofthenodes'valueswillbeunique`.*`pandqaredifferentandbothvalueswillexistintheBST`.###Analyze1.if`p`nodeand`q`nodearein`two`sideofcurrentiteratornode`n`,theLCAis`n`;2.if`p`nodeand`q`nodearein`one`sideofcurrentiteratornode`n`,tolooptheonestepintheothersidenode;```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@param{TreeNode}p*@param{TreeNode}q*@return{TreeNode}*/varlowestCommonAncestor=function(root,p,q){returnlca(root,p,q)};varlca=function(node,p,q){if(!node)returnnullif((p.val-node.val)*(q.val-node.val)<=0){returnnode}elseif(p.val-node.val<0){returnlca(node.left,p,q)}else{returnlca(node.right,p,q)}}```"},{name:"236.Lowest_Common_Ancestor_of_a_Binary_Tree.md",path:"/LeetCode/236.Lowest_Common_Ancestor_of_a_Binary_Tree.md",type:"file",mdconf:{abbrlink:"v4s8hz9u"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1911,extension:".md",relative:"/LeetCode/236.Lowest_Common_Ancestor_of_a_Binary_Tree.md",isEmpty:!1,content:"\x3c!--abbrlink:v4s8hz9u--\x3e###236.LowestCommonAncestorofaBinarySearchTreeGivenabinarytree,findthelowestcommonancestor(LCA)oftwogivennodesinthetree.AccordingtothedefinitionofLCAonWikipedia:“ThelowestcommonancestorisdefinedbetweentwonodespandqasthelowestnodeinTthathasbothpandqasdescendants(whereweallowanodetobeadescendantofitself).”Example1:```js3/\\51/\\/\\6208/\\74``````jsInput:root=[3,5,1,6,2,0,8,null,null,7,4],p=5,q=1Output:3```Explanation:TheLCAofnodes5and1is3.Example2:```jsInput:root=[3,5,1,6,2,0,8,null,null,7,4],p=5,q=4Output:5```Explanation:TheLCAofnodes5and4is5,sinceanodecanbeadescendantofitselfaccordingtotheLCAdefinition.Example3:```js1/2``````jsInput:root=[1,2],p=1,q=2Output:1```Constraints:Thenumberofnodesinthetreeisintherange[2,105].-109<=Node.val<=109`AllNode.valareunique`.`p!=q``pandqwillexistinthetree`.###Analyze*Using`post-ordertraversal`ofbirnarytreeinrecursive.```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@param{TreeNode}p*@param{TreeNode}q*@return{TreeNode}*/varlowestCommonAncestor=function(root,p,q){returnlca(root,p,q)};varlca=function(node,p,q){if(!node)returnnull//nodeisthelowestcommonancestorofpandq.if(node.val===p.val||node.val===q.val)returnnodeconstleftLca=lca(node.left,p,q)constrightLca=lca(node.right,p,q)//getvalueofpost-ordertraversalif(!leftLca){returnrightLca}if(!rightLca){returnleftLca}returnnode}```"},{name:"237.Delete_Node_in_a_Linked_List.md",path:"/LeetCode/237.Delete_Node_in_a_Linked_List.md",type:"file",mdconf:{abbrlink:"5a2lpmr2"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1668,extension:".md",relative:"/LeetCode/237.Delete_Node_in_a_Linked_List.md",isEmpty:!1,content:"\x3c!--abbrlink:5a2lpmr2--\x3e###DeleteNodeinaLinkedListWriteafunctiontodeleteanode(exceptthetail)inasinglylinkedlist,givenonlyaccesstothatnode.Example1:```jsInput:head=[4,5,1,9],node=5Output:[4,1,9]```Explanation:Youaregiventhesecondnodewithvalue5,thelinkedlistshouldbecome4->1->9aftercallingyourfunction.Example2:```jsInput:head=[4,5,1,9],node=1Output:[4,5,9]```Explanation:Youaregiventhethirdnodewithvalue1,thelinkedlistshouldbecome4->5->9aftercallingyourfunction.Note:*Thelinkedlistwillhave`atleasttwoelements`.*Allofthenodes'valueswillbeunique.*Thegivennodewill`notbethetail`anditwillalwaysbeavalidnodeofthelinkedlist.*`Donotreturnanythingfromyourfunction`.###Analyze相较于[203.Remove_Linked_List_Elements](https://github.com/MuYunyun/blog/blob/master/BasicSkill/LeetCode/203.Remove_Linked_List_Elements/README.md),此题一个点是在函数中不能返回任何值,因此不能引入dummyHead。另外一个点是没有传入head指针,所以没法拿到当前要删除的上个节点。```js4->5->1->9->null..node4->5->9->9->null..4->5->9->null``````js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}node*@return{void}Donotreturnanything,modifynodein-placeinstead.*/vardeleteNode=function(node){node.val=node.next.valnode.next=node.next.next}```###姊妹题203"},{name:"242.Valid_Anagram.md",path:"/LeetCode/242.Valid_Anagram.md",type:"file",mdconf:{abbrlink:"lhrc1q2w"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1433,extension:".md",relative:"/LeetCode/242.Valid_Anagram.md",isEmpty:!1,content:'\x3c!--abbrlink:lhrc1q2w--\x3e###242.ValidAnagramGiventwostringssandt,writeafunctiontodetermineiftisananagramofs.Example1:```jsInput:s="anagram",t="nagaram"Output:true```Example2:```jsInput:s="rat",t="car"Output:false```Note:Youmayassumethe`stringcontainsonlylowercasealphabets`.Followup:Whatiftheinputscontainunicodecharacters?Howwouldyouadaptyoursolutiontosuchcase?###题解思路:*创建数据结构为Map的map对象;*遍历s,将各字母出现的次数叠加存储进map中;*遍历t,在map中减少相应字母出现的个数,并增加map中未收录的字母;*如果最后map的size不为0,则s与t不是字母异位词;否则是字母异位词;```js/***@param{string}s*@param{string}t*@return{boolean}*/varisAnagram=function(s,t){constmap=newMap()for(leti=0;i<s.length;i++){constgetMap=map.get(s[i])if(!getMap){map.set(s[i],1)}else{map.set(s[i],getMap+1)}}for(leti=0;i<t.length;i++){constgetMap=map.get(t[i])if(getMap===1){map.delete(t[i])}elseif(getMap){map.set(t[i],getMap-1)}else{map.set(t[i],1)}}if(map.size){returnfalse}else{returntrue}};```###相关题目202、205、290、349、350、451'},{name:"257.Binary_Tree_Paths.md",path:"/LeetCode/257.Binary_Tree_Paths.md",type:"file",mdconf:{abbrlink:"m7roivg7"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1114,extension:".md",relative:"/LeetCode/257.Binary_Tree_Paths.md",isEmpty:!1,content:'\x3c!--abbrlink:m7roivg7--\x3e###257.BinaryTreePathsGivenabinarytree,returnallroot-to-leafpaths.Note:Aleafisanodewithnochildren.Example:```jsInput:1/\\23\\5Output:["1->2->5","1->3"]```Explanation:Allroot-to-leafpathsare:1->2->5,1->3###Analyze*DFS深度优先遍历的运用,关键需要想清楚采用先序、中序、后序遍历中的哪一种。*先序遍历:1->2->5,1->3```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{string[]}*/varbinaryTreePaths=function(root){constresult=[]if(!root)returnresultprintTreePaths(root,result,\'\')returnresult}varprintTreePaths=function(node,result,str){if(!node.left&&!node.right){str+=`${node.val}`result.push(str)return}str+=`${node.val}->`if(node.left){printTreePaths(node.left,result,str)}if(node.right){printTreePaths(node.right,result,str)}}```'},{name:"279.Perfect_Squares.md",path:"/LeetCode/279.Perfect_Squares.md",type:"file",mdconf:{abbrlink:"ang6upqc"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2419,extension:".md",relative:"/LeetCode/279.Perfect_Squares.md",isEmpty:!1,content:"\x3c!--abbrlink:ang6upqc--\x3e###279.PerfectSquaresGivenapositiveintegern,find`theleastnumber`ofperfectsquarenumbers(forexample,1,4,9,16,...)whichsumton.Example1:```jsInput:n=12Output:3Explanation:12=4+4+4```Example2:```jsInput:n=13Output:2Explanation:13=4+9.```###Analyze题目转化:数字n到0最少能由几个平方数相加得到?首先思考能否使用贪心算法,比如针对数字12,使用贪心算法先取能使用最大的数字9,结果为9111,长度为4;但其实是有更短长度的答案444的,因此不能使用贪心算法。建模:构建树的数据结构:![](http://with.muyunyun.cn/1ec5a5a75516e0ae7fa96c9c9a74bd79.jpg)比如数字5到0的路径可以是1.`5->1->0`;2.`5->4->0`;3.`5->4->3->2->1->0`;```js/***@param{number}n*@return{number}*/varnumSquares=function(n){constlist=[]list.push({num:n,step:0})while(list.length>0){const{num,step}=list.shift()if(num===0)returnstepfor(leti=1;num-i*i>=0;i++){list.push({num:num-i*i,step:step+1})}}}```此时提交代码,运行超时。进行分析,以从5到达1为例,有如下方式①:`5->1`;②:`5->4->3->2->1`;显然不会采用第二种方式,因此可以省略步骤二访问1的操作的。使用`树的数据结构`时,到达一个节点的路径是`唯一确定`的,与之相对地在使用`图的数据结构`时,到达一个节点的方式可能`会存在多个路径`;为此引入visitedObj来存储该节点是否已经访问过,改进代码如下:```js/***@param{number}n*@return{number}*/varnumSquares=function(n){constlist=[]list.push({num:n,step:0})constvisitedObj={[n]:true}while(list.length>0){const{num,step,visited}=list.shift()for(leti=1;;i++){constextraNum=num-i*iif(extraNum<0)break//thislinereturntheresultinadvance,itreducesperformtimeverymuch.if(extraNum===0)returnstep+1if(!visitedObj[extraNum]){visitedObj[extraNum]=truelist.push({num:num-i*i,step:step+1})}}}}```![](http://with.muyunyun.cn/05fe8335c7c57360edd7e9d28fe3a102.jpg)###SimilarTitle127、126"},{name:"283.Move_Zeroes.md",path:"/LeetCode/283.Move_Zeroes.md",type:"file",mdconf:{abbrlink:"imw1phcf"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1404,extension:".md",relative:"/LeetCode/283.Move_Zeroes.md",isEmpty:!1,content:"\x3c!--abbrlink:imw1phcf--\x3e给定一个数组nums，编写一个函数将所有0移动到数组的末尾，同时保持非零元素的相对顺序。示例:```js输入:[0,1,0,3,12]输出:[1,3,12,0,0]```说明:必须在原数组上操作，不能拷贝额外的数组。尽量减少操作次数。###firstcode*思路一:将0从数组中移除,并用count变量计算移除0的个数,最后将数组push回count个0。```js/***@param{number[]}nums*@return{void}Donotreturnanything,modifynumsin-placeinstead.*/varmoveZeroes=function(nums){constlength=nums.lengthletcount=0//0的个数for(leti=0;i<length;i++){if(nums[i-count]===0){nums.splice(i-count,1)count++}}for(leti=0;i<count;i++){nums.push(0)}returnnums}```*思路二:使用双指针```js/***@param{number[]}nums*@return{void}Donotreturnanything,modifynumsin-placeinstead.*/varmoveZeroes=function(nums){letm=0//指针一的下标,[0,m)区域用于存储非0元素for(leti=0;i<nums.length;i++){if(nums[i]){//如果存在num[i]不为0,则让其与num[m]交换if(i!==m){[nums[m],nums[i]]=[nums[i],nums[m]]}m++}}returnnums}```###同类题目26、27、80。"},{name:"290.Word_Pattern.md",path:"/LeetCode/290.Word_Pattern.md",type:"file",mdconf:{abbrlink:"7rpc213r"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1769,extension:".md",relative:"/LeetCode/290.Word_Pattern.md",isEmpty:!1,content:'\x3c!--abbrlink:7rpc213r--\x3e###title给定一种规律pattern和一个字符串str，判断str是否遵循相同的规律。这里的「遵循」指完全匹配，例如pattern里的每个字母和字符串str中的每个非空单词之间存在着双向连接的对应规律。示例1:```js输入:pattern="abba",str="dogcatcatdog"输出:true```示例2:```js输入:pattern="abba",str="dogcatcatfish"输出:false```示例3:```js输入:pattern="aaaa",str="dogcatcatdog"输出:false```示例4:```js输入:pattern="abba",str="dogdogdogdog"输出:false```说明:你可以假设pattern只包含小写字母，str包含了由单个空格分隔的小写字母。###解题思路:使用patternMap与strArrMap分别存储`pattern=>strArrMap`与`strArrMap=>pattern`的映射,当存在一对多映射的情况时,则它们非完全匹配,否则是完全匹配的。```js/***@param{string}pattern*@param{string}str*@return{boolean}*/varwordPattern=function(pattern,str){conststrArr=str.split(\'\')if(pattern.length!==strArr.length)returnfalseconstpatternMap=newMap()conststrArrMap=newMap()for(leti=0;i<pattern.length;i++){constgetPatternMap=patternMap.get(pattern[i])constgetStrArrMap=strArrMap.get(strArr[i])if(!getPatternMap){patternMap.set(pattern[i],strArr[i])}elseif(getPatternMap!==strArr[i]){returnfalse}if(!getStrArrMap){strArrMap.set(strArr[i],pattern[i])}elseif(getStrArrMap!==pattern[i]){returnfalse}}returntrue};```###相关题目202、205、242、349、350、451'},{name:"328.Odd_Even_Linked_List.md",path:"/LeetCode/328.Odd_Even_Linked_List.md",type:"file",mdconf:{abbrlink:"8kvhwcjv"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1921,extension:".md",relative:"/LeetCode/328.Odd_Even_Linked_List.md",isEmpty:!1,content:"\x3c!--abbrlink:8kvhwcjv--\x3e###titleGivenasinglylinkedlist,groupalloddnodestogetherfollowedbytheevennodes.Pleasenoteherewearetalkingaboutthenodenumberandnotthevalueinthenodes.Youshouldtrytodoitinplace.TheprogramshouldruninO(1)spacecomplexityandO(nodes)timecomplexity.Example1:```jsInput:1->2->3->4->5->NULLOutput:1->3->5->2->4->NULL```Example2:```jsInput:2->1->3->5->6->4->7->NULLOutput:2->3->6->7->1->5->4->NULL```Note:*Therelativeorderinsideboththeevenandoddgroupsshouldremainasitwasintheinput;*Thefirstnodeisconsideredodd,thesecondnodeevenandsoon;###Analyze```jscurnextInput:1->2->3->4->5->NULLprevcurnext1->2->3->4->5->NULL..prevcurnext遍历完成后,如果此时是奇数位则将cur的指针指向偶数列表。1->2->3->4->5->NULLOutput:1->3->5->2->4->NULL```*将prev的next指向next;*如何将奇数链表与偶数链表进行链接(末尾的链表可能为奇数位也可能为偶数位)?```js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}head*@return{ListNode}*/varoddEvenList=function(head){if(!head)returnheadconstlist=newListNode(0)list.next=headconstodd=list.nextconsteven=odd.nextletprev=nullletcur=list.nextletnext=cur.nextletcount=1while(next){prev&&(prev.next=next)prev=curcur=nextnext=cur.nextcount++}if(count%2===1){prev&&(prev.next=null)cur.next=even}else{prev.next=even}returnodd}```"},{name:"337.House_Robber_III.md",path:"/LeetCode/337.House_Robber_III.md",type:"file",mdconf:{abbrlink:"ixpdywwi"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1477,extension:".md",relative:"/LeetCode/337.House_Robber_III.md",isEmpty:!1,content:"\x3c!--abbrlink:ixpdywwi--\x3e###337.HouseRobberIIIThethiefhasfoundhimselfanewplaceforhisthieveryagain.Thereisonlyoneentrancetothisarea,calledroot.Besidestheroot,eachhousehasoneandonlyoneparenthouse.Afteratour,thesmartthiefrealizedthatallhousesinthisplaceformabinarytree.Itwillautomaticallycontactthepoliceiftwodirectly-linkedhouseswerebrokenintoonthesamenight.Giventherootofthebinarytree,returnthemaximumamountofmoneythethiefcanrobwithoutalertingthepolice.Example1:```js3↙↘23↘↘31Input:root=[3,2,3,null,3,null,1]Output:7Explanation:Maximumamountofmoneythethiefcanrob=3+3+1=7.```Example2:```js3↙↘45↙↘↘131Input:root=[3,4,5,1,3,null,1]Output:9Explanation:Maximumamountofmoneythethiefcanrob=4+5=9.```*Constraints:*Thenumberofnodesinthetreeisintherange[1,104].*0<=Node.val<=104###Analyze```js/***Definitionforabinarytreenode.*functionTreeNode(val,left,right){*this.val=(val===undefined?0:val)*this.left=(left===undefined?null:left)*this.right=(right===undefined?null:right)*}*//***@param{TreeNode}root*@return{number}*/varrob=function(root){};```"},{name:"341.Flatten_Nested_List_Iterator.md",path:"/LeetCode/341.Flatten_Nested_List_Iterator.md",type:"file",mdconf:{abbrlink:"yqreet3u"},birthtime:"2022-01-16",mtime:"2022-01-16",size:5062,extension:".md",relative:"/LeetCode/341.Flatten_Nested_List_Iterator.md",isEmpty:!1,content:"\x3c!--abbrlink:yqreet3u--\x3e###341.FlattenNestedListIteratorGivenanestedlistofintegers,implementan`iterator`toflattenit.Eachelementiseitheraninteger,oralist--whoseelementsmayalsobeintegersorotherlists.Example1:```jsInput:[[1,1],2,[1,1]]Output:[1,1,2,1,1]```Explanation:BycallingnextrepeatedlyuntilhasNextreturnsfalse,theorderofelementsreturnedbynextshouldbe:[1,1,2,1,1].Example2:```jsInput:[1,[4,[6]]]Output:[1,4,6]```Explanation:BycallingnextrepeatedlyuntilhasNextreturnsfalse,theorderofelementsreturnedbynextshouldbe:[1,4,6].###analyze该题需注意的点:[1,[4]]里的子项1,[4]分别通过`getInteger`与`getList`获取到。###递归法```js/***//Thisistheinterfacethatallowsforcreatingnestedlists.*//Youshouldnotimplementit,orspeculateaboutitsimplementation*functionNestedInteger(){**ReturntrueifthisNestedIntegerholdsasingleinteger,ratherthananestedlist.*@return{boolean}*this.isInteger=function(){*...*};**ReturnthesingleintegerthatthisNestedIntegerholds,ifitholdsasingleinteger*ReturnnullifthisNestedIntegerholdsanestedlist*@return{integer}*this.getInteger=function(){*...*};**ReturnthenestedlistthatthisNestedIntegerholds,ifitholdsanestedlist*ReturnnullifthisNestedIntegerholdsasingleinteger*@return{NestedInteger[]}*this.getList=function(){*...*};*};*//***@constructor*@param{NestedInteger[]}nestedList*/varNestedIterator=function(nestedList){this.printArr=[]this.resetArr(nestedList)}NestedIterator.prototype.resetArr=function(nestedList){if(!nestedList&&!nestedList.length)returnfor(leti=0;i<nestedList.length;i++){constcurList=nestedList[i]if(curList.isInteger()){this.printArr.unshift(curList.getInteger())}else{this.resetArr(curList.getList())}}}/***@thisNestedIterator*@returns{boolean}*/NestedIterator.prototype.hasNext=function(){returnthis.printArr.length>0}/***@thisNestedIterator*@returns{integer}*/NestedIterator.prototype.next=function(){returnthis.printArr.pop()}/***YourNestedIteratorwillbecalledlikethis:*vari=newNestedIterator(nestedList),a=[];*while(i.hasNext())a.push(i.next());*/```###迭代法相对递归法,迭代法需要额外维护一个`系统调用栈`,然后使用`颜色标记法`完成题解。颜色标记法思路:*未访问过的列表标记为`白色`,访问过的列表标记为`灰色`;*从栈顶取出访问元素:*若为灰色元素,则打印之;*若为白色元素,则遍历子列表:*若子列表为列表,则将其`标记为白色`并推入栈;*若子列表为数字,则将其`标记为灰色`并推入栈;```js/***//Thisistheinterfacethatallowsforcreatingnestedlists.*//Youshouldnotimplementit,orspeculateaboutitsimplementation*functionNestedInteger(){**ReturntrueifthisNestedIntegerholdsasingleinteger,ratherthananestedlist.*@return{boolean}*this.isInteger=function(){*...*};**ReturnthesingleintegerthatthisNestedIntegerholds,ifitholdsasingleinteger*ReturnnullifthisNestedIntegerholdsanestedlist*@return{integer}*this.getInteger=function(){*...*};**ReturnthenestedlistthatthisNestedIntegerholds,ifitholdsanestedlist*ReturnnullifthisNestedIntegerholdsasingleinteger*@return{NestedInteger[]}*this.getList=function(){*...*};*};*//***@constructor*@param{NestedInteger[]}nestedList*/varNestedIterator=function(nestedList){this.printArr=[]if(!nestedList)returnthis.stackList=[]this.stackList.push({color:'white',list:nestedList})while(this.stackList.length>0){const{color,list}=this.stackList.pop()if(color==='gray'){this.printArr.unshift(list)}else{for(leti=0;i<list.length;i++){if(list[i].isInteger()){this.stackList.push({color:'gray',list:list[i].getInteger()})}else{this.stackList.push({color:'white',list:list[i].getList()})}}}}}/***@thisNestedIterator*@returns{boolean}*/NestedIterator.prototype.hasNext=function(){returnthis.printArr.length>0}/***@thisNestedIterator*@returns{integer}*/NestedIterator.prototype.next=function(){returnthis.printArr.shift()}/***YourNestedIteratorwillbecalledlikethis:*vari=newNestedIterator(nestedList),a=[];*while(i.hasNext())a.push(i.next());*/```###SimilarTitle94、144、145"},{name:"343.Integer_Break.md",path:"/LeetCode/343.Integer_Break.md",type:"file",mdconf:{abbrlink:"3u9vkyh8"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1672,extension:".md",relative:"/LeetCode/343.Integer_Break.md",isEmpty:!1,content:"\x3c!--abbrlink:3u9vkyh8--\x3e###343.IntegerBreakGivenanintegern,breakitintothesumofk`positiveintegers`,wherek>=2,and`maximize`theproductofthoseintegers.Returnthemaximumproductyoucanget.Example1:```jsInput:n=2Output:1Explanation:2=1+1,1×1=1.```Example2:```jsInput:n=10Output:36Explanation:10=3+3+4,3×3×4=36.```*Constraints:*2<=n<=58###Analyzen拆分若干数后的乘积可拆分为:`1*integerBreak(n-1)`、`2*integerBreak(n-2)`...,`x*integerBreak(n-x)`。```jsn===21*1n===31*integerBreak(2)n===41*integerBreak(3)2*integerBreak(2)n===51*integerBreak(4)2*integerBreak(3)```*递归思路(自顶向下)如下```js/***@param{number}n*@return{number}*/varcache={}varintegerBreak=function(n){if(n===1)return1if(cache[n])returncache[n]letresult=0//heretheimeansforthevaluetobesubtractedfor(leti=1;i<n;i++){if(i>n-i){break}result=Math.max(result,i*Math.max(integerBreak(n-i),n-i))}returncache[n]=result}```*接着使用动态规划(自底向上)思路实现:```js/***@param{number}n*@return{number}*/varcache={1:1}varintegerBreak=function(n){if(n===1)return1letresult=0//heretheimeansforthevaluetocalcfor(leti=2;i<=n;i++){//herethemmeansforthevaluetobesubtractedfor(letm=1;m<i;m++){result=Math.max(result,m*Math.max(cache[i-m],i-m))}cache[i]=result}returnresult}```"},{name:"344.Reverse_String.md",path:"/LeetCode/344.Reverse_String.md",type:"file",mdconf:{abbrlink:"sjz2h233"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1283,extension:".md",relative:"/LeetCode/344.Reverse_String.md",isEmpty:!1,content:'\x3c!--abbrlink:sjz2h233--\x3e###题目:反转字符串编写一个函数，其作用是将输入的`字符串反转过来`。输入字符串以字符数组char[]的形式给出。`不要给另外的数组分配额外的空间，你必须原地修改输入数组、使用O(1)的额外空间解决这一问题`。你可以假设数组中的所有字符都是ASCII码表中的可打印字符。示例1：```js输入：["h","e","l","l","o"]输出：["o","l","l","e","h"]```示例2：```js输入：["H","a","n","n","a","h"]输出：["h","a","n","n","a","H"]```###解题方法一:使用数组的`reverse`方法。```js/***@param{character[]}s*@return{void}Donotreturnanything,modifysin-placeinstead.*/varreverseString=function(s){s.reverse()}```方法二:`指针碰撞````js/***@param{character[]}s*@return{void}Donotreturnanything,modifysin-placeinstead.*/varreverseString=function(s){letleft=0,right=s.length-1while(left<=right){swap(s,left,right)left++right--}}/*交换位置nums数组,a,b为下标*/varswap=function(nums,a,b){consttmp=nums[a]nums[a]=nums[b]nums[b]=tmp}```###相似问题125、167、345'},{name:"345.Reverse_Vowels_of_a_String.md",path:"/LeetCode/345.Reverse_Vowels_of_a_String.md",type:"file",mdconf:{abbrlink:"e34h3kn7"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1139,extension:".md",relative:"/LeetCode/345.Reverse_Vowels_of_a_String.md",isEmpty:!1,content:'\x3c!--abbrlink:e34h3kn7--\x3e###题目:反转字符串中的元音字母编写一个函数，以字符串作为输入，反转该字符串中的元音字母。示例1:```js输入:"hello"输出:"holle"```示例2:```js输入:"leetcode"输出:"leotcede"```说明:元音字母不包含字母"y"。###解题双指针法:```js/***@param{string}s*@return{string}*/varreverseVowels=function(s){letleft=0,right=s.length-1letresult=swhile(left<=right){constisValidateLeft=isValidate(s[left])constisValidateRight=isValidate(s[right])if(isValidateLeft&&isValidateRight){result=swap(result,left,right)left++right--}if(!isValidateLeft){left++}if(!isValidateRight){right--}}returnresult}varisValidate=(value)=>{return/a|e|i|o|u|A|E|I|O|U/.test(value)}/*交换位置a,b为下标*/varswap=function(str,a,b){constarr=str.split(\'\')consttmp=arr[a]arr[a]=arr[b]arr[b]=tmpreturnarr.join(\'\')}```###SisterTitle125、167、344'},{name:"347.Top_K_Frequent_Elements.md",path:"/LeetCode/347.Top_K_Frequent_Elements.md",type:"file",mdconf:{abbrlink:"3l212xpz"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2796,extension:".md",relative:"/LeetCode/347.Top_K_Frequent_Elements.md",isEmpty:!1,content:"\x3c!--abbrlink:3l212xpz--\x3e###347.TopKFrequentElementsGivenanon-emptyarrayofintegers,returnthekmostfrequentelements.```jsExample1:Input:nums=[1,1,1,2,2,3],k=2Output:[1,2]```Example2:```jsInput:nums=[1],k=1Output:[1]```Note:*Youmayassumekisalwaysvalid,1≤k≤numberofuniqueelements.*Youralgorithm's`timecomplexitymustbebetterthanO(nlogn)`,wherenisthearray'ssize.*It'sguaranteedthat`theanswerisunique`,inotherwordsthesetofthetopkfrequentelementsisunique.*Youcanreturntheanswerinanyorder.###Analyze思路一:1.将各个元素出现的频率统计进哈希表中;2.然后对出现频率进行排序;3.取频率排前k的元素;这样的时间复杂度为O(nlogn)级别。```js/***@param{number[]}nums*@param{number}k*@return{number[]}*/vartopKFrequent=function(nums,k){constobj={}for(leti=0;i<nums.length;i++){if(!obj[nums[i]]){obj[nums[i]]=1}else{obj[nums[i]]=obj[nums[i]]+1}}constlist=[]constkeysArr=Object.keys(obj)for(leti=0;i<keysArr.length;i++){constkey=keysArr[i]constvalue=obj[key]list.push({key,value})}list.sort((r1,r2)=>r2.value-r1.value)constresult=[]list.map((obj,index)=>{if(index<k){result.push(parseInt(obj.key,10))}})returnresult}```该题解虽然可以ac,但是由于题目给出了时间复杂度需小于`(nlogn)`这一限制,因而我们思考其它方式🤔。思路二:桶排序分组的思想1.首先将各个元素出现的频率统计进哈希表中;2.将频率减去1后的值作为数组list的下标存入;3.从list中遍历取出频率最高的k个元素;```js/***@param{number[]}nums*@param{number}k*@return{number[]}*/vartopKFrequent=function(nums,k){constobj={}for(leti=0;i<nums.length;i++){if(!obj[nums[i]]){obj[nums[i]]=1}else{obj[nums[i]]=obj[nums[i]]+1}}constlist=[]constkeysArr=Object.keys(obj)for(leti=0;i<keysArr.length;i++){constkey=keysArr[i]constvalue=obj[key]if(!list[value-1]){list[value-1]=[parseInt(key,10)]}else{list[value-1].push(parseInt(key,10))}}constresult=[]letcount=0for(leti=list.length-1;i>=0;i--){constcurList=list[i]if(curList){for(letx=0;x<curList.length;x++){if(count===k)returnresultresult.push(curList[x])count++}}}returnresult}```![](http://with.muyunyun.cn/926ca1b564c07610790ab1e0e4cafa6f.jpg)"},{name:"349.Intersection_of_Two_Arrays.md",path:"/LeetCode/349.Intersection_of_Two_Arrays.md",type:"file",mdconf:{abbrlink:"4nqhgf1s"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1215,extension:".md",relative:"/LeetCode/349.Intersection_of_Two_Arrays.md",isEmpty:!1,content:"\x3c!--abbrlink:4nqhgf1s--\x3e###title给定两个数组，编写一个函数来计算它们的交集。示例1:```js输入:nums1=[1,2,2,1],nums2=[2,2]输出:[2]```示例2:```js输入:nums1=[4,9,5],nums2=[9,4,9,8,4]输出:[9,4]```说明:输出结果中的每个元素一定是`唯一的`。我们可以不考虑输出结果的顺序。###题解因为题目明确了输出结果中的每个元素一定是`唯一的`,因而可以使用集合Set唯一的特性,完成题解。```js/***@param{number[]}nums1*@param{number[]}nums2*@return{number[]}*/varintersection=function(nums1,nums2){constresultSet=newSet()constnum1Set=newSet(nums1)for(leti=0;i<nums2.length;i++){if(num1Set.has(nums2[i])){resultSet.add(nums2[i])}}return[...resultSet]}```###进阶思考如果给定的两个数组是排好序的,是否有其它解法呢?示例1:```js输入:nums1=[1,1,2,2],nums2=[2,2]输出:[2]```示例2:```js输入:nums1=[4,5,9],nums2=[4,4,8,9,9]输出:[4,9]```大致想法:可以使用移动指针的方式。###相关题目202、205、242、290、350、451"},{name:"350.Intersection_of_Two_Arrays_II.md",path:"/LeetCode/350.Intersection_of_Two_Arrays_II.md",type:"file",mdconf:{abbrlink:"f9tdzny4"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1907,extension:".md",relative:"/LeetCode/350.Intersection_of_Two_Arrays_II.md",isEmpty:!1,content:"\x3c!--abbrlink:f9tdzny4--\x3e###title给定两个数组,编写一个函数来计算它们的交集。示例1:```js输入:nums1=[1,2,2,1],nums2=[2,2]输出:[2,2]```示例2:```js输入:nums1=[4,9,5],nums2=[9,4,9,8,4]输出:[4,9]```说明:输出结果中`每个元素出现的次数,应与元素在两个数组中出现的次数一致`。我们`可以不考虑输出结果的顺序`。进阶:如果给定的数组已经排好序呢？你将如何优化你的算法？如果nums1的大小比nums2小很多，哪种方法更优？如果nums2的元素存储在磁盘上，磁盘内存是有限的，并且你不能一次加载所有的元素到内存中，你该怎么办？###解题思路:使用字典Map的数据结构来统计次数。1.将num1、nums2各自出现的次数分别统计存进nums1Map与nums2Map中;2.根据题目说明中的条件`可以不考虑输出结果的顺序`,因而可以以num1、nums2相同的key中较小的值为输出次数,将其输出;```js/***@param{number[]}nums1*@param{number[]}nums2*@return{number[]}*/varintersect=function(nums1,nums2){constnums1Map=getMap(nums1)constnums2Map=getMap(nums2)constresult=[]nums1Map.forEach((nums1Value,key)=>{constnums2MapHasKey=nums2Map.get(key)if(nums2MapHasKey){for(leti=0;i<Math.min(nums1Value,nums2MapHasKey);i++){result.push(key)}}})returnresult};vargetMap=function(arr){constmap=newMap()for(leti=0;i<arr.length;i++){constgetValue=map.get(arr[i])if(!getValue){map.set(arr[i],1)}else{map.set(arr[i],getValue+1)}}returnmap}```###进阶如果给定的两个数组是排好序的,是否有其它解法呢?###相关题202、205、242、290、349、451"},{name:"401.Binary_Watch.md",path:"/LeetCode/401.Binary_Watch.md",type:"file",mdconf:{abbrlink:"3vesi6ap"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2078,extension:".md",relative:"/LeetCode/401.Binary_Watch.md",isEmpty:!1,content:'\x3c!--abbrlink:3vesi6ap--\x3e###401.BinaryWatchAbinarywatchhas4LEDsonthetopwhichrepresentthehours`(0-11)`,andthe6LEDsonthebottomrepresenttheminutes`(0-59)`.EachLEDrepresentsazeroorone,withtheleastsignificantbitontheright.![](https://upload.wikimedia.org/wikipedia/commons/8/8b/Binary_clock_samui_moon.jpg)Forexample,theabovebinarywatchreads"3:25".Givenanon-negativeintegernwhich`representsthenumberofLEDsthatarecurrentlyon`,returnallpossibletimesthewatchcouldrepresent.Example:```jsInput:n=1Return:["1:00","2:00","4:00","8:00","0:01","0:02","0:04","0:08","0:16","0:32"]```Note:*Theorderofoutputdoesnotmatter.*`Thehourmustnotcontainaleadingzero`,forexample"01:00"isnotvalid,itshouldbe"1:00".*`Theminutemustbeconsistoftwodigitsandmaycontainaleadingzero`,forexample"10:2"isnotvalid,itshouldbe"10:02".###Analyze题目可以转化为在`[1,2,4,8,1,2,4,8,16,32]`中任意取n个数值,有几种组合?组合问题可以使用`回溯法`求解得到。*前置条件:确认如果一个led灯都没亮着是否为"0:00"。*小时位数范围为[0,11],分钟范围为[0,59]。```js/***@param{number}num*@return{string[]}*/varreadBinaryWatch=function(num){constarr=[1,2,4,8,1,2,4,8,16,32]constresult=[]backTrace(arr,num,0,[0,0],result)returnresult};varbackTrace=function(arr,num,start,temp,result){if(temp[0]>=12||temp[1]>=60)returnif(num===0){result.push(`${temp[0]}:${padding(temp[1])}`)return}for(leti=start;i<arr.length;i++){if(i<=3){temp[0]=temp[0]+arr[i]}else{temp[1]=temp[1]+arr[i]}num=num-1backTrace(arr,num,i+1,temp,result)if(i<=3){temp[0]=temp[0]-arr[i]}else{temp[1]=temp[1]-arr[i]}num=num+1}}varpadding=function(num){returnnum<10?`0${num}`:num}```'},{name:"404.Sum_of_Left_Leaves.md",path:"/LeetCode/404.Sum_of_Left_Leaves.md",type:"file",mdconf:{abbrlink:"yzaibg48"},birthtime:"2022-01-16",mtime:"2022-01-16",size:836,extension:".md",relative:"/LeetCode/404.Sum_of_Left_Leaves.md",isEmpty:!1,content:"\x3c!--abbrlink:yzaibg48--\x3e###404.SumofLeftLeavesFindthesumofallleftleavesinagivenbinarytree.Example:```js3/\\920/\\157```Therearetwoleftleavesinthebinarytree,withvalues9and15respectively.Return24.###Analyze递归思路解题```js/***Definitionforabinarytreenode.*functionTreeNode(val){*this.val=val;*this.left=this.right=null;*}*//***@param{TreeNode}root*@return{number}*/varsumOfLeftLeaves=function(root){if(!root)return0if(root.left){if(!root.left.left&&!root.left.right){returnroot.left.val+sumOfLeftLeaves(root.right)}else{returnsumOfLeftLeaves(root.left)+sumOfLeftLeaves(root.right)}}else{returnsumOfLeftLeaves(root.right)}};```"},{name:"417.Pacific_Atlantic_Water_Flow.md",path:"/LeetCode/417.Pacific_Atlantic_Water_Flow.md",type:"file",mdconf:{abbrlink:"pqwwty62"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3048,extension:".md",relative:"/LeetCode/417.Pacific_Atlantic_Water_Flow.md",isEmpty:!1,content:"\x3c!--abbrlink:pqwwty62--\x3e###417.PacificAtlanticWaterFlowGivenan`mxn`matrixofnon-negativeintegersrepresentingtheheightofeachunitcellinacontinent,`the\"Pacificocean\"touchestheleftandtopedgesofthematrix`and`the\"Atlanticocean\"touchestherightandbottomedges`.Watercanonlyflowinfourdirections(up,down,left,orright)`fromacelltoanotheronewithheightequalorlower`.Findthelistofgridcoordinates`wherewatercanflowtoboththePacificandAtlanticocean`.Note:*Theorderofreturnedgridcoordinatesdoesnotmatter.*Bothmandnarelessthan150.Example1:```jsGiventhefollowing5x5matrix:vartest=[[1,2,2,3,5],[3,2,3,4,4],[2,4,5,3,1],[6,7,1,4,5],[5,1,1,2,4]]Pacific~~~~~~1223(5)*~323(4)(4)*~24(5)31*~(6)(7)145*~(5)1124******AtlanticReturn:[[0,4],[1,3],[1,4],[2,2],[3,0],[3,1],[4,0]](positionswithparenthesesinabovematrix).```Example2:```jsvartest=[[3,3,3],[3,1,3],[0,2,4]]Pacific~~~~333*~313*~024****Atlantic```###Analyze*有效出发点:*存在到Pacific的路径;*存在到Atlantic的路径;*使用「染色算法」在比当前值小的方向递归找寻```js/***@param{number[][]}matrix*@return{number[][]}*/varpacificAtlantic=function(matrix){constresult=[]for(letm=0;m<matrix.length;m++){for(letn=0;n<matrix[m].length;n++){constusedPacific=[]constusedAtlantic=[]if(iterator(matrix,m,n,usedPacific,'pacific')&&iterator(matrix,m,n,usedAtlantic,'atlantic')){result.push([m,n])}}}returnresult};vardirections=[[1,0],[0,1],[-1,0],[0,-1]]//bottom、right、top、leftvariterator=function(matrix,m,n,used,tag){used.push(`${m},${n}`)//achievetheboardofmatrixif(tag==='pacific'?ifReachPacific(m,n):ifReachAtlantic(matrix,m,n)){returntrue}for(leti=0;i<directions.length;i++){if(!isValid(matrix,m+directions[i][0],n+directions[i][1],used))continueconstnewPoint=matrix[m+directions[i][0]][n+directions[i][1]]if(newPoint>matrix[m][n]){continue}constnextIsValid=iterator(matrix,m+directions[i][0],n+directions[i][1],used,tag)if(nextIsValid){returntrue}}returnfalse}//judgeifisvalidvarisValid=(matrix,m,n,used)=>{if(used.indexOf(`${m},${n}`)>-1||!(matrix[m]&&typeofmatrix[m][n]==='number'))returnfalsereturntrue}varifReachPacific=function(m,n){returnm===0||n===0}varifReachAtlantic=function(matrix,m,n){returnm===matrix.length-1||n===matrix[0].length-1}```###SimilarTitle130"},{name:"437.Path_Sum_III.md",path:"/LeetCode/437.Path_Sum_III.md",type:"file",mdconf:{abbrlink:"1nwjxv9v"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3356,extension:".md",relative:"/LeetCode/437.Path_Sum_III.md",isEmpty:!1,content:"\x3c!--abbrlink:1nwjxv9v--\x3e###437.PathSumIIIYouaregivenabinarytreeinwhicheachnodecontainsanintegervalue.Findthenumberofpathsthatsumtoagivenvalue.`Thepathdoesnotneedtostartorendattherootoraleaf`,butitmustgodownwards(travelingonlyfromparentnodestochildnodes).Thetreehasnomorethan1,000nodesandthevaluesareintherange-1,000,000to1,000,000.`Example`:```jsroot=[10,5,-3,3,2,null,11,3,-2,null,1],sum=810/\\5-3/\\\\3211/\\\\3-21Return3.Thepathsthatsumto8are:1.5->32.5->2->13.-3->11```###题解此题的难点需想清每个节点都要当作`根节点`来对待,因此题解为如下三部分之和:1.`当前节点作为根节点`时相加为sum的路径之和。2.`当前节点左子树作为根节点`时相加为sum的路径之和。3.`当前节点右子树作为根节点`时相加为sum的路径之和。同时递归可以分为两个部分:`根节点的递归`与`分析总和的递归`。```js/***Definitionforabinarytreenode.*functionTreeNode(val,left,right){*this.val=(val===undefined?0:val)*this.left=(left===undefined?null:left)*this.right=(right===undefined?null:right)*}*//***@param{TreeNode}root*@param{number}sum*@return{number}*/varpathSum=function(root,sum){if(!root)return0//totalmeansresultvalue//initialSummeansinitsumvalueletresult={total:0,initialSum:sum}analyzeSum(root,result,sum)returnresult.total};varanalyzeSum=function(node,result,sum){if(!node)returnconstextraSum=sum-node.valif(extraSum===0){result.total=result.total+1}analyzeSum(node.left,result,extraSum)analyzeSum(node.right,result,extraSum)//handleitasrootnode.analyzeSum(node.left,result,result.initialSum)analyzeSum(node.right,result,result.initialSum)}```submit后,卡在了如下测试用例中:```js输入:[1,null,2,null,3]//该测试用例有点怪,应该为[1,null,2,null,null,null,3]31/\\null2/\\null3输出:3预期:2```经过排查,`analyzeSum`函数存在冗余的调用,并未将`根节点的递归`与`分析总和的递归`给解耦。调整如下:```js/***Definitionforabinarytreenode.*functionTreeNode(val,left,right){*this.val=(val===undefined?0:val)*this.left=(left===undefined?null:left)*this.right=(right===undefined?null:right)*}*//***@param{TreeNode}root*@param{number}sum*@return{number}*///recursiverootnodevarpathSum=function(root,sum){if(!root)return0constcurTotal=analyzeSum(root,sum)constleftChildTotal=pathSum(root.left,sum)constrightChildTotal=pathSum(root.right,sum)returncurTotal+leftChildTotal+rightChildTotal};//recursiveanlyzetotalvaluevaranalyzeSum=function(node,expectSum){if(!node)return0constextraSum=expectSum-node.valif(extraSum===0){return1+analyzeSum(node.left,extraSum)+analyzeSum(node.right,extraSum)}else{returnanalyzeSum(node.left,extraSum)+analyzeSum(node.right,extraSum)}}```"},{name:"438.Find_All_Anagrams_In_A_String.md",path:"/LeetCode/438.Find_All_Anagrams_In_A_String.md",type:"file",mdconf:{abbrlink:"2gv7zbu8"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2775,extension:".md",relative:"/LeetCode/438.Find_All_Anagrams_In_A_String.md",isEmpty:!1,content:'\x3c!--abbrlink:2gv7zbu8--\x3e###title给定一个字符串s和一个非空字符串p，找到s中所有是p的字母异位词的子串，返回这些子串的起始索引。字符串只包含小写英文字母，并且字符串s和p的长度都不超过20100。说明：`字母异位词指字母相同，但排列不同的字符串`。不考虑答案输出的顺序。示例1:```js输入:s:"cbaebabacd"p:"abc"输出:[0,6]```解释:起始索引等于0的子串是"cba",它是"abc"的字母异位词。起始索引等于6的子串是"bac",它是"abc"的字母异位词。示例2:```js输入:s:"abab"p:"ab"输出:[0,1,2]```示例3:```js输入:s:"baa"p:"aa"输出:[1]```解释:起始索引等于0的子串是"ab",它是"ab"的字母异位词。起始索引等于1的子串是"ba",它是"ab"的字母异位词。起始索引等于2的子串是"ab",它是"ab"的字母异位词。###题解花了半天,用类似滑动窗口的思想地解决了该题。思路如下:1.首先将p字符串中各字母出现的频率统计在`targetObj`;2.针对s字符创声明双指针left、right1.如若当前right的位置在targetObj`有对应字段且其不大于`targetObj对应字段的值,则向右偏移right指针的位置;2.如若当前right指针的位置在targetObj`无对应字段`,则将left的位置移到right字段的位置;3.如若当前right指针的位置在targetObj`有对应字段且大于`targetObj对应字段的值,则向右偏移left指针的位置;>需要考虑的点,`字符串是否会重复`。比如s为\'baa\',p为\'aa\'。```js/***@param{string}s*@param{string}p*@return{number[]}*/varfindAnagrams=function(s,p){constpLength=p.lengthconstinitHashObj={}//初始化hash对象lethashObj={}consttargetObj={}for(leti=0;i<p.length;i++){targetObj[p[i]]=typeof(targetObj[p[i]])===\'number\'?targetObj[p[i]]+1:0initHashObj[p[i]]=0hashObj[p[i]]=0}constresult=[]//存储结果letleft=0,right=0while(left<s.length&&right<s.length){if(typeof(hashObj[s[right]])===\'number\'&&hashObj[s[right]]<=targetObj[s[right]]){hashObj[s[right]]=hashObj[s[right]]+1if(right-left+1===pLength)result.push(left)right++}elseif(typeof(hashObj[s[right]])!==\'number\'){right++left=righthashObj=JSON.parse(JSON.stringify(initHashObj))}else{hashObj[s[left]]!==initHashObj[s[left]]&&(hashObj[s[left]]=hashObj[s[left]]-1)left++}}returnresult};```###SisterTitle76'},{name:"445.Add_Two_Numbers_II.md",path:"/LeetCode/445.Add_Two_Numbers_II.md",type:"file",mdconf:{abbrlink:"1tkgf4dq"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2259,extension:".md",relative:"/LeetCode/445.Add_Two_Numbers_II.md",isEmpty:!1,content:"\x3c!--abbrlink:1tkgf4dq--\x3e###AddTwoNumbersIIYouaregiventwonon-emptylinkedlistsrepresentingtwonon-negativeintegers.`Themostsignificantdigitcomesfirst`andeachoftheirnodescontainasingledigit.Addthetwonumbersandreturnitasalinkedlist.Youmayassumethetwonumbersdonotcontainanyleadingzero,exceptthenumber0itself.Followup:Whatifyoucannotmodifytheinputlists?Inotherwords,reversingthelistsisnotallowed.Example:```jsInput:(7->2->4->3)+(5->6->4)Output:7->8->0->7```###Analyze思考:相对题2的逆序相加,该题顺序相加作如下思考:*第一步:首先补齐位数,让其一一对应;```js7->2->4->30->5->6->4```*第二步:递归计算两个链表同位之和,同时使用digitCarry表示进位的情况;```js/***Definitionforsingly-linkedlist.*functionListNode(val){*this.val=val;*this.next=null;*}*//***@param{ListNode}l1*@param{ListNode}l2*@return{ListNode}*/varaddTwoNumbers=function(l1,l2){letcountl1=0,countl2=0letl1List=l1letl2List=l2while(l1List){countl1++l1List=l1List.next}while(l2List){countl2++l2List=l2List.next}//creatthefrontestListlettmpList=newListNode(0)letcur=tmpListletdiff=Math.abs(countl2-countl1)while(diff--){cur.next=newListNode(0)cur=cur.next}if(countl1<countl2){cur.next=l1l1=tmpList.next}elseif(countl2<countl1){cur.next=l2l2=tmpList.next}//flag:1showsdigitcarry,0not;letdigitCarry=0/***calculatethesumofl1andl2*/functionlistNodeAdd(l1,l2){if(l1===null)returnlistNodeAdd(l1.next,l2.next)letsum=l1.val+l2.val+digitCarryif(sum>=10){l1.val=sum%10digitCarry=1}else{l1.val=sumdigitCarry=0}}listNodeAdd(l1,l2)letresult=l1if(digitCarry===1){result=newListNode(1)result.next=l1}returnresult}```![](http://with.muyunyun.cn/c2559f9251487e23530e6932cc46516b.jpg-400)###SisterTitle2"},{name:"447.Number_of_Boomerangs.md",path:"/LeetCode/447.Number_of_Boomerangs.md",type:"file",mdconf:{abbrlink:"nwuqmhlt"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1986,extension:".md",relative:"/LeetCode/447.Number_of_Boomerangs.md",isEmpty:!1,content:'\x3c!--abbrlink:nwuqmhlt--\x3e###titleGivennpointsintheplanethatareallpairwisedistinct,a"boomerang"isatupleofpoints(i,j,k)suchthatthedistancebetweeniandjequalsthedistancebetweeniandk(theorderofthetuplematters).Findthenumberofboomerangs.Youmayassumethatnwillbeatmost500andcoordinatesofpointsareallintherange[-10000,10000](inclusive).Example:Input:[[0,0],[1,0],[2,0]]Output:2Explanation:Thetwoboomerangsare[[1,0],[0,0],[2,0]]and[[1,0],[2,0],[0,0]]###Analyze思路:首先弄清题意,输入的数组points中能产生中多少种[i,j,k]的数组,使i到j的距离与i到k的距离相等。因此可以将i的位置固定,使用`查找表`将到i的距离作为key,将该距离出现的次数作为value,若该次数大于1则说明能构成回旋镖。(比如出现4次,在剩下的j,k两个位置中能构成4*3个回旋镖)![](http://with.muyunyun.cn/6b5d105a884526e2e19dbbaea330fd8f.jpg-400)```js/***@param{number[][]}points*@return{number}*/varnumberOfBoomerangs=function(points){//avoidlosingtheprecisionconstgetDistancePow=(x,y)=>{returnMath.pow((y[0]-x[0]),2)+Math.pow((y[1]-x[1]),2)}letresult=0for(letp=0;p<points.length;p++){consttmpMap=newMap()for(letn=0;n<points.length;n++){if(p===n)continueconstdistancePow=getDistancePow(points[p],points[n])consthasDistancePow=tmpMap.has(`${distancePow}`)if(hasDistancePow){tmpMap.set(`${distancePow}`,tmpMap.get(`${distancePow}`)+1)}else{tmpMap.set(`${distancePow}`,1)}}tmpMap.forEach((value,key)=>{if(value>1){constsum=value*(value-1)result+=sum}})}returnresult}```![](http://with.muyunyun.cn/c6128ef88123f9b3a1b135d0c8850271.jpg)###SimilarTitle149'},{name:"450.Delete_Node_in_a_BST.md",path:"/LeetCode/450.Delete_Node_in_a_BST.md",type:"file",mdconf:{abbrlink:"vnqbm1et"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3090,extension:".md",relative:"/LeetCode/450.Delete_Node_in_a_BST.md",isEmpty:!1,content:"\x3c!--abbrlink:vnqbm1et--\x3e###450.DeleteNodeinaBSTGivenarootnodereferenceofaBSTandakey,deletethenodewiththegivenkeyintheBST.Returntherootnodereference(possiblyupdated)oftheBST.Basically,thedeletioncanbedividedintotwostages:Searchforanodetoremove.Ifthenodeisfound,deletethenode.Followup:CanyousolveitwithtimecomplexityO(heightoftree)?Example1:```js55/\\/\\36---\x3e46/\\\\/\\24727Input:root=[5,3,6,2,4,null,7],key=3Output:[5,4,6,2,null,null,7]```Explanation:Givenkeytodeleteis3.Sowefindthenodewithvalue3anddeleteit.Onevalidansweris[5,4,6,2,null,null,7],shownintheaboveBST.Pleasenoticethatanothervalidansweris[5,2,6,null,4,null,7]andit'salsoaccepted.```js5/\\26\\\\47```Example2:Input:root=[5,3,6,2,4,null,7],key=0Output:[5,3,6,2,4,null,7]Explanation:Thetreedoesnotcontainanodewithvalue=0.Example3:Input:root=[],key=0Output:[]Constraints:*Thenumberofnodesinthetreeisintherange[0,104].*-105<=Node.val<=105*Eachnodehas`auniquevalue`.*rootisavalidbinarysearchtree.*-105<=key<=105###Analyze```js5/\\36/\\\\247``````js3/\\24\\6\\7```*此时删除元素为5,此时含有左节点,可以通过如下方法达到目的:*将`删除元素的左下方元素3`替代`删除元素5`;*将`左下方元素的右侧最下方子元素4`衔接`删除元素的右下方子元素6`;```js/***Definitionforabinarytreenode.*functionTreeNode(val,left,right){*this.val=(val===undefined?0:val)*this.left=(left===undefined?null:left)*this.right=(right===undefined?null:right)*}*//***@param{TreeNode}root*@param{number}key*@return{TreeNode}*/vardeleteNode=function(root,key){if(!root)returnnull//ifkey>root.val,deletenodeinroot.right.Otherwisedeletenodeinroot.left.if(key>root.val){constrightNode=deleteNode(root.right,key)root.right=rightNodereturnroot}elseif(key<root.val){constleftNode=deleteNode(root.left,key)root.left=leftNodereturnroot}else{//nowroot.val===keyif(!root.left){returnroot.right}if(!root.right){returnroot.left}//将删除元素的左下方元素替代删除元素;//将左下方元素的右侧最下方子元素衔接删除元素的右下方子元素;constrightChild=root.rightletnewRightChild=root.leftwhile(newRightChild.right){newRightChild=newRightChild.right}newRightChild.right=rightChildreturnroot.left}};```"},{name:"451.Sort_Characters_By_Frequency.md",path:"/LeetCode/451.Sort_Characters_By_Frequency.md",type:"file",mdconf:{abbrlink:"oxv7uzj1"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1658,extension:".md",relative:"/LeetCode/451.Sort_Characters_By_Frequency.md",isEmpty:!1,content:"\x3c!--abbrlink:oxv7uzj1--\x3e###title给定一个字符串,请将字符串里的字符按照出现的频率`降序排列`。示例1:```js输入:\"tree\"输出:\"eert\"```解释:'e'出现两次，'r'和't'都只出现一次。因此'e'必须出现在'r'和't'之前。此外，\"eetr\"也是一个有效的答案。示例2:```js输入:\"cccaaa\"输出:\"cccaaa\"```解释:'c'和'a'都出现三次。此外，\"aaaccc\"也是有效的答案。注意\"cacaca\"是不正确的，因为相同的字母必须放在一起。示例3:```js输入:\"Aabb\"输出:\"bbAa\"```解释:此外，\"bbaA\"也是一个有效的答案，但\"Aabb\"是不正确的。注意'A'和'a'被认为是两种不同的字符。###题解思路:根据题意,本题用Map来存储字符出现的频率,难点在如何处理Map中对象出现的频率?以下解法使用arr将map里的值存储转化为`[{key,value}]`的形式,最后使用JS的sort方法来完成题解。```js/***@param{string}s*@return{string}*/varfrequencySort=function(s){constmap=newMap()for(leti=0;i<s.length;i++){constgetMap=map.get(s[i])if(!getMap){map.set(s[i],1)}else{map.set(s[i],getMap+1)}}constarr=[]for(letkeyofmap.keys()){arr.push({key,value:map.get(key)})}//todo后续实现下以下排序arr.sort((a,b)=>b.value-a.value)constresult=arr.map(r=>{letstr=''for(leti=0;i<r.value;i++){str=str+r.key}returnstr}).join('')returnresult};```###归类map"},{name:"454.4Sum_II.md",path:"/LeetCode/454.4Sum_II.md",type:"file",mdconf:{abbrlink:"eqtu8dpt"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2004,extension:".md",relative:"/LeetCode/454.4Sum_II.md",isEmpty:!1,content:"\x3c!--abbrlink:eqtu8dpt--\x3e###4SumIIGivenfourlistsA,B,C,Dofintegervalues,computehowmanytuples(i,j,k,l)therearesuchthatA[i]+B[j]+C[k]+D[l]iszero.Tomakeproblemabiteasier,allA,B,C,DhavesamelengthofNwhere0≤N≤500.Allintegersareintherangeof-2^28to2^28-1andtheresultisguaranteedtobeatmost2^31-1.Example:```jsInput:A=[1,2]B=[-2,-1]C=[-1,2]D=[0,2]Output:2Explanation:Thetwotuplesare:1.(0,0,0,1)->A[0]+B[0]+C[0]+D[1]=1+(-2)+(-1)+2=02.(1,1,0,0)->A[1]+B[1]+C[0]+D[0]=2+(-1)+(-1)+0=0```###Analyze解题思路:如果正常暴力解法为n^4,n^3在0<=N<=500的数量级下已经达到`125000000`,根据[算法复杂度](https://github.com/MuYunyun/blog/blob/master/BasicSkill/algorithm/算法复杂度.md)里对数量与时间的统计,算法的数据复杂度理应不超过n^2。因此我们将C与D和出现的次数存进查找表中,从而优化算法复杂度(查找表的关键是确认存进查找表的key和value是多少)。```js/***@param{number[]}A*@param{number[]}B*@param{number[]}C*@param{number[]}D*@return{number}*/varfourSumCount=function(A,B,C,D){consttmpMap=newMap()for(letic=0;ic<C.length;ic++){for(letid=0;id<D.length;id++){constsumC_D=C[ic]+D[id]consthasSumC_D=tmpMap.has(sumC_D)if(hasSumC_D){tmpMap.set(sumC_D,tmpMap.get(sumC_D)+1)}else{tmpMap.set(sumC_D,1)}}}letcount=0for(letia=0;ia<A.length;ia++){for(letib=0;ib<B.length;ib++){constsumA_B=A[ia]+B[ib]tmpMap.has(-sumA_B)&&(count=count+tmpMap.get(-sumA_B))}}returncount}```![](http://with.muyunyun.cn/a10b03c6f22d312f32b4f0a7f2795f4f.jpg)###SisterTitle18(题目相似,但是因为传入参数不同导致解法不同)"},{name:"567.Permutation_In_String.md",path:"/LeetCode/567.Permutation_In_String.md",type:"file",mdconf:{abbrlink:"z2lmk1bx"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1426,extension:".md",relative:"/LeetCode/567.Permutation_In_String.md",isEmpty:!1,content:"\x3c!--abbrlink:z2lmk1bx--\x3e[题目](https://leetcode-cn.com/explore/interview/card/bytedance/242/string/1016/)题目演变:*s1的排列方式有几种?*将s1的所有排列打印出来?顺着这个思路,想到了递归。上面这种思路也是可以的,但是最终用判断字符中各字母出现的数字来实现。###Analyze```js/**18.12.08*//***@param{string}s1*@param{string}s2*@return{boolean}*/varcheckInclusion=function(s1,s2){consts1Obj={}consts1Length=s1.lengthfor(leti=0;i<s1Length;i++){if(s1Obj[s1[i]]){s1Obj[s1[i]]=++s1Obj[s1[i]]}else{s1Obj[s1[i]]=1}}consts2Length=s2.lengthif(s1Length>s2Length){returnfalse}constcount=s2Length-s1Lengthletstr=''for(leti=0;i<=count;i++){str=s2.slice(i,s1Length+i)consts2Obj={}for(letz=0;z<str.length;z++){if(!s1Obj[str[z]]){i=i+zbreak}if(s2Obj[str[z]]){s2Obj[str[z]]=s2Obj[str[z]]+1}else{s2Obj[str[z]]=1}}letbool=truefor(lety=0;y<Object.keys(s1Obj).length;y++){if(s2Obj[Object.keys(s1Obj)[y]]!==s1Obj[Object.keys(s1Obj)[y]]){bool=falsebreak}}if(bool===true){returntrue}}returnfalse};```"},{name:"README.md",path:"/LeetCode/README.md",type:"file",mdconf:{abbrlink:"uxcksaex"},birthtime:"2022-01-16",mtime:"2022-01-16",size:27564,extension:".md",relative:"/LeetCode/README.md",isEmpty:!1,content:"\x3c!--abbrlink:uxcksaex--\x3eThemarkdowntableisgeneratedby[crd-leetcode-cli](https://github.com/MuYunyun/create-react-doc/tree/master/packages/leetcode-cli)|#|Title|Explanation|Difficulty|Type||:---:|:---:|:---:|:---:|:---:||1|[TwoSum](https://leetcode.com/problems/two-sum/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/1.Two_Sum.md)|Easy|Array,HashTable||2|[AddTwoNumbers](https://leetcode.com/problems/add-two-numbers/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/2.Add_Two_Numbers.md)|Medium|Recursion,LinkedList,Math||3|[LongestSubstringWithoutRepeatingCharacters](https://leetcode.com/problems/longest-substring-without-repeating-characters/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/3.Longest_Substring_Without_Repeating_Characters.md)|Medium|HashTable,TwoPointers,String,SlidingWindow||4|[MedianofTwoSortedArrays](https://leetcode.com/problems/median-of-two-sorted-arrays/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/4.Median_of_Two_Sorted_Arrays.md)|Hard|Array,BinarySearch,DivideandConquer||7|[ReverseInteger](https://leetcode.com/problems/reverse-integer/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/7.Reverse_Integer.md)|Easy|Math||9|[PalindromeNumber](https://leetcode.com/problems/palindrome-number/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/9.Palindrome_Number.md)|Easy|Math||11|[ContainerWithMostWater](https://leetcode.com/problems/container-with-most-water/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/11.Container_With_Most_Water.md)|Medium|Array,TwoPointers||13|[RomantoInteger](https://leetcode.com/problems/roman-to-integer/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/13.Roman_to_Integer.md)|Easy|Math,String||14|[LongestCommonPrefix](https://leetcode.com/problems/longest-common-prefix/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/14.Longest_Common_Prefix.md)|Easy|String||15|[3Sum](https://leetcode.com/problems/3sum/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/15.3Sum.md)|Medium|Array,TwoPointers||16|[3SumClosest](https://leetcode.com/problems/3sum-closest/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/16.3Sum_Closest.md)|Medium|Array,TwoPointers||17|[LetterCombinationsofaPhoneNumber](https://leetcode.com/problems/letter-combinations-of-a-phone-number/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/17.Letter_Combinations_of_a_Phone_Number.md)|Medium|Depth-firstSearch,Recursion,String,Backtracking||18|[4Sum](https://leetcode.com/problems/4sum/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/18.4Sum.md)|Medium|Array,HashTable,TwoPointers||19|[RemoveNthNodeFromEndofList](https://leetcode.com/problems/remove-nth-node-from-end-of-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/19.Remove_Nth_Node_From_End_of_List.md)|Medium|LinkedList,TwoPointers||20|[ValidParentheses](https://leetcode.com/problems/valid-parentheses/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/20.Valid_Parentheses.md)|Easy|Stack,String||21|[MergeTwoSortedLists](https://leetcode.com/problems/merge-two-sorted-lists/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/21.Merge_Two_Sorted_Lists.md)|Easy|Recursion,LinkedList||22|[GenerateParentheses](https://leetcode.com/problems/generate-parentheses/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/22.Generate_Parentheses.md)|Medium|String,Backtracking||23|[MergekSortedLists](https://leetcode.com/problems/merge-k-sorted-lists/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/23.Merge_k_Sorted_Lists.md)|Hard|Heap,LinkedList,DivideandConquer||24|[SwapNodesinPairs](https://leetcode.com/problems/swap-nodes-in-pairs/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/24.Swap_Nodes_in_Pairs.md)|Medium|Recursion,LinkedList||25|[ReverseNodesink-Group](https://leetcode.com/problems/reverse-nodes-in-k-group/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/25.Reverse_Nodes_in_k-Group.md)|Hard|LinkedList||26|[RemoveDuplicatesfromSortedArray](https://leetcode.com/problems/remove-duplicates-from-sorted-array/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/26.Remove_Duplicates_from_Sorted_Array.md)|Easy|Array,TwoPointers||27|[RemoveElement](https://leetcode.com/problems/remove-element/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/27.Remove_Element.md)|Easy|Array,TwoPointers||28|[ImplementstrStr()](https://leetcode.com/problems/implement-strstr/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/28.Implement_strStr().md)|Easy|TwoPointers,String||33|[SearchinRotatedSortedArray](https://leetcode.com/problems/search-in-rotated-sorted-array/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/33.Search_in_Rotated_Sorted_Array.md)|Medium|Array,BinarySearch||35|[SearchInsertPosition](https://leetcode.com/problems/search-insert-position/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/35.Search_Insert_Position.md)|Easy|Array,BinarySearch||36|[ValidSudoku](https://leetcode.com/problems/valid-sudoku/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/36.Valid_Sudoku.md)|Medium|HashTable||37|[SudokuSolver](https://leetcode.com/problems/sudoku-solver/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/37.Sudoku_Solver.md)|Hard|HashTable,Backtracking||38|[CountandSay](https://leetcode.com/problems/count-and-say/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/38.Count_and_Say.md)|Easy|String||39|[CombinationSum](https://leetcode.com/problems/combination-sum/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/39.Combination_Sum.md)|Medium|Array,Backtracking||40|[CombinationSumII](https://leetcode.com/problems/combination-sum-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/40.Combination_Sum_II.md)|Medium|Array,Backtracking||46|[Permutations](https://leetcode.com/problems/permutations/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/46.Permutations.md)|Medium|Backtracking||47|[PermutationsII](https://leetcode.com/problems/permutations-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/47.Permutations_II.md)|Medium|Backtracking||48|[RotateImage](https://leetcode.com/problems/rotate-image/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/48.Rotate_Image.md)|Medium|Array||49|[GroupAnagrams](https://leetcode.com/problems/group-anagrams/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/49.Group_Anagrams.md)|Medium|HashTable,String||50|[Pow(x,n)](https://leetcode.com/problems/powx-n/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/50.Pow(x,_n).md)|Medium|Math,BinarySearch||51|[N-Queens](https://leetcode.com/problems/n-queens/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/51.N-Queens.md)|Hard|Backtracking||52|[N-QueensII](https://leetcode.com/problems/n-queens-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/52.N-Queens_II.md)|Hard|Backtracking||61|[RotateList](https://leetcode.com/problems/rotate-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/61.Rotate_List.md)|Medium|LinkedList,TwoPointers||62|[UniquePaths](https://leetcode.com/problems/unique-paths/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/62.Unique_Paths.md)|Medium|Array,DynamicProgramming||64|[MinimumPathSum](https://leetcode.com/problems/minimum-path-sum/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/64.Minimum_Path_Sum.md)|Medium|Array,DynamicProgramming||66|[PlusOne](https://leetcode.com/problems/plus-one/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/66.Plus_One.md)|Easy|Array||67|[AddBinary](https://leetcode.com/problems/add-binary/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/67.Add_Binary.md)|Easy|Math,String||69|[Sqrt(x)](https://leetcode.com/problems/sqrtx/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/69.Sqrt(x).md)|Easy|Math,BinarySearch||70|[ClimbingStairs](https://leetcode.com/problems/climbing-stairs/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/70.Climbing_Stairs.md)|Easy|DynamicProgramming||71|[SimplifyPath](https://leetcode.com/problems/simplify-path/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/71.Simplify_Path.md)|Medium|Stack,String||75|[SortColors](https://leetcode.com/problems/sort-colors/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/75.Sort_Colors.md)|Medium|Sort,Array,TwoPointers||77|[Combinations](https://leetcode.com/problems/combinations/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/77.Combinations.md)|Medium|Backtracking||78|[Subsets](https://leetcode.com/problems/subsets/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/78.Subsets.md)|Medium|BitManipulation,Array,Backtracking||79|[WordSearch](https://leetcode.com/problems/word-search/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/79.Word_Search.md)|Medium|Array,Backtracking||80|[RemoveDuplicatesfromSortedArrayII](https://leetcode.com/problems/remove-duplicates-from-sorted-array-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/80.Remove_Duplicates_from_Sorted_Array_II.md)|Medium|Array,TwoPointers||82|[RemoveDuplicatesfromSortedListII](https://leetcode.com/problems/remove-duplicates-from-sorted-list-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/82.Remove_Duplicates_from_Sorted_List_II.md)|Medium|LinkedList||83|[RemoveDuplicatesfromSortedList](https://leetcode.com/problems/remove-duplicates-from-sorted-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/83.Remove_Duplicates_from_Sorted_List.md)|Easy|LinkedList||86|[PartitionList](https://leetcode.com/problems/partition-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/86.Partition_List.md)|Medium|LinkedList,TwoPointers||88|[MergeSortedArray](https://leetcode.com/problems/merge-sorted-array/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/88.Merge_Sorted_Array.md)|Easy|Array,TwoPointers||89|[GrayCode](https://leetcode.com/problems/gray-code/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/89.Gray_Code.md)|Medium|Backtracking||90|[SubsetsII](https://leetcode.com/problems/subsets-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/90.Subsets_II.md)|Medium|Array,Backtracking||92|[ReverseLinkedListII](https://leetcode.com/problems/reverse-linked-list-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/92.Reverse_Linked_List_II.md)|Medium|LinkedList||93|[RestoreIPAddresses](https://leetcode.com/problems/restore-ip-addresses/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/93.Restore_IP_Addresses.md)|Medium|String,Backtracking||94|[BinaryTreeInorderTraversal](https://leetcode.com/problems/binary-tree-inorder-traversal/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/94.Binary_Tree_Inorder_Traversal.md)|Medium|Stack,Tree,HashTable||98|[ValidateBinarySearchTree](https://leetcode.com/problems/validate-binary-search-tree/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/98.Validate_Binary_Search_Tree.md)|Medium|Tree,Depth-firstSearch,Recursion||100|[SameTree](https://leetcode.com/problems/same-tree/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/100.Same_Tree.md)|Easy|Tree,Depth-firstSearch||101|[SymmetricTree](https://leetcode.com/problems/symmetric-tree/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/101.Symmetric_Tree.md)|Easy|Tree,Depth-firstSearch,Breadth-firstSearch||102|[BinaryTreeLevelOrderTraversal](https://leetcode.com/problems/binary-tree-level-order-traversal/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/102.Binary_Tree_Level_Order_Traversal.md)|Medium|Tree,Breadth-firstSearch||103|[BinaryTreeZigzagLevelOrderTraversal](https://leetcode.com/problems/binary-tree-zigzag-level-order-traversal/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/103.Binary_Tree_Zigzag_Level_Order_Traversal.md)|Medium|Stack,Tree,Breadth-firstSearch||104|[MaximumDepthofBinaryTree](https://leetcode.com/problems/maximum-depth-of-binary-tree/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/104.Maximum_Depth_of_Binary_Tree.md)|Easy|Tree,Depth-firstSearch,Recursion||107|[BinaryTreeLevelOrderTraversalII](https://leetcode.com/problems/binary-tree-level-order-traversal-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/107.Binary_Tree_Level_Order_Traversal_II.md)|Medium|Tree,Breadth-firstSearch||108|[ConvertSortedArraytoBinarySearchTree](https://leetcode.com/problems/convert-sorted-array-to-binary-search-tree/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/108.Convert_Sorted_Array_to_Binary_Search_Tree.md)|Easy|Tree,Depth-firstSearch||110|[BalancedBinaryTree](https://leetcode.com/problems/balanced-binary-tree/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/110.Balanced_Binary_Tree.md)|Easy|Tree,Depth-firstSearch,Recursion||111|[MinimumDepthofBinaryTree](https://leetcode.com/problems/minimum-depth-of-binary-tree/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/111.Minimum_Depth_of_Binary_Tree.md)|Easy|Tree,Depth-firstSearch,Breadth-firstSearch||112|[PathSum](https://leetcode.com/problems/path-sum/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/112.Path_Sum.md)|Easy|Tree,Depth-firstSearch||113|[PathSumII](https://leetcode.com/problems/path-sum-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/113.Path_Sum_II.md)|Medium|Tree,Depth-firstSearch||120|[Triangle](https://leetcode.com/problems/triangle/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/120.Triangle.md)|Medium|Array,DynamicProgramming||121|[BestTimetoBuyandSellStock](https://leetcode.com/problems/best-time-to-buy-and-sell-stock/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/121.Best_Time_to_Buy_and_Sell_Stock.md)|Easy|Array,DynamicProgramming||125|[ValidPalindrome](https://leetcode.com/problems/valid-palindrome/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/125.Valid_Palindrome.md)|Easy|TwoPointers,String||127|[WordLadder](https://leetcode.com/problems/word-ladder/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/127.Word_Ladder.md)|Hard|Breadth-firstSearch||129|[SumRoottoLeafNumbers](https://leetcode.com/problems/sum-root-to-leaf-numbers/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/129.Sum_Root_to_Leaf_Numbers.md)|Medium|Tree,Depth-firstSearch||130|[SurroundedRegions](https://leetcode.com/problems/surrounded-regions/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/130.Surrounded_Regions.md)|Medium|Depth-firstSearch,Breadth-firstSearch,UnionFind||131|[PalindromePartitioning](https://leetcode.com/problems/palindrome-partitioning/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/131.Palindrome_Partitioning.md)|Medium|Depth-firstSearch,DynamicProgramming,Backtracking||143|[ReorderList](https://leetcode.com/problems/reorder-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/143.Reorder_List.md)|Medium|LinkedList||144|[BinaryTreePreorderTraversal](https://leetcode.com/problems/binary-tree-preorder-traversal/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/144.Binary_Tree_Preorder_Traversal.md)|Medium|Stack,Tree||145|[BinaryTreePostorderTraversal](https://leetcode.com/problems/binary-tree-postorder-traversal/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/145.Binary_Tree_Postorder_Traversal.md)|Medium|Stack,Tree||147|[InsertionSortList](https://leetcode.com/problems/insertion-sort-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/147.Insertion_Sort_List.md)|Medium|Sort,LinkedList||148|[SortList](https://leetcode.com/problems/sort-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/148.Sort_List.md)|Medium|Sort,LinkedList||149|[MaxPointsonaLine](https://leetcode.com/problems/max-points-on-a-line/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/149.Max_Points_on_a_Line.md)|Hard|HashTable,Math||150|[EvaluateReversePolishNotation](https://leetcode.com/problems/evaluate-reverse-polish-notation/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/150.Evaluate_Reverse_Polish_Notation.md)|Medium|Stack||151|[ReverseWordsinaString](https://leetcode.com/problems/reverse-words-in-a-string/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/151.Reverse_Words_in_a_String.md)|Medium|String||167|[TwoSumII-Inputarrayissorted](https://leetcode.com/problems/two-sum-ii-input-array-is-sorted/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/167.Two_Sum_II_-_Input_array_is_sorted.md)|Easy|Array,TwoPointers,BinarySearch||199|[BinaryTreeRightSideView](https://leetcode.com/problems/binary-tree-right-side-view/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/199.Binary_Tree_Right_Side_View.md)|Medium|Tree,Depth-firstSearch,Breadth-firstSearch,Recursion,Queue||200|[NumberofIslands](https://leetcode.com/problems/number-of-islands/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/200.Number_of_Islands.md)|Medium|Depth-firstSearch,Breadth-firstSearch,UnionFind||202|[HappyNumber](https://leetcode.com/problems/happy-number/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/202.Happy_Number.md)|Easy|HashTable,Math||203|[RemoveLinkedListElements](https://leetcode.com/problems/remove-linked-list-elements/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/203.Remove_Linked_List_Elements.md)|Easy|LinkedList||205|[IsomorphicStrings](https://leetcode.com/problems/isomorphic-strings/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/205.Isomorphic_Strings.md)|Easy|HashTable||206|[ReverseLinkedList](https://leetcode.com/problems/reverse-linked-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/206.Reverse_Linked_List.md)|Easy|LinkedList||209|[MinimumSizeSubarraySum](https://leetcode.com/problems/minimum-size-subarray-sum/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/209.Minimum_Size_Subarray_Sum.md)|Medium|Array,TwoPointers,BinarySearch||215|[KthLargestElementinanArray](https://leetcode.com/problems/kth-largest-element-in-an-array/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/215.Kth_Largest_Element_in_an_Array.md)|Medium|Heap,DivideandConquer||216|[CombinationSumIII](https://leetcode.com/problems/combination-sum-iii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/216.Combination_Sum_III.md)|Medium|Array,Backtracking||217|[ContainsDuplicate](https://leetcode.com/problems/contains-duplicate/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/217.Contains_Duplicate.md)|Easy|Array,HashTable||219|[ContainsDuplicateII](https://leetcode.com/problems/contains-duplicate-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/219.Contains_Duplicate_II.md)|Easy|Array,HashTable||220|[ContainsDuplicateIII](https://leetcode.com/problems/contains-duplicate-iii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/220.Contains_Duplicate_III.md)|Medium|Sort,OrderedMap||222|[CountCompleteTreeNodes](https://leetcode.com/problems/count-complete-tree-nodes/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/222.Count_Complete_Tree_Nodes.md)|Medium|Tree,BinarySearch||226|[InvertBinaryTree](https://leetcode.com/problems/invert-binary-tree/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/226.Invert_Binary_Tree.md)|Easy|Tree||230|[KthSmallestElementinaBST](https://leetcode.com/problems/kth-smallest-element-in-a-bst/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/230.Kth_Smallest_Element_in_a_BST.md)|Medium|Tree,BinarySearch||234|[PalindromeLinkedList](https://leetcode.com/problems/palindrome-linked-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/234.Palindrome_Linked_List.md)|Easy|LinkedList,TwoPointers||235|[LowestCommonAncestorofaBinarySearchTree](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/235.Lowest_Common_Ancestor_of_a_Binary_Search_Tree.md)|Easy|Tree||236|[LowestCommonAncestorofaBinaryTree](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/236.Lowest_Common_Ancestor_of_a_Binary_Tree.md)|Medium|Tree||237|[DeleteNodeinaLinkedList](https://leetcode.com/problems/delete-node-in-a-linked-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/237.Delete_Node_in_a_Linked_List.md)|Easy|LinkedList||242|[ValidAnagram](https://leetcode.com/problems/valid-anagram/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/242.Valid_Anagram.md)|Easy|Sort,HashTable||257|[BinaryTreePaths](https://leetcode.com/problems/binary-tree-paths/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/257.Binary_Tree_Paths.md)|Easy|Tree,Depth-firstSearch||279|[PerfectSquares](https://leetcode.com/problems/perfect-squares/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/279.Perfect_Squares.md)|Medium|Breadth-firstSearch,Math,DynamicProgramming||283|[MoveZeroes](https://leetcode.com/problems/move-zeroes/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/283.Move_Zeroes.md)|Easy|Array,TwoPointers||290|[WordPattern](https://leetcode.com/problems/word-pattern/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/290.Word_Pattern.md)|Easy|HashTable||328|[OddEvenLinkedList](https://leetcode.com/problems/odd-even-linked-list/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/328.Odd_Even_Linked_List.md)|Medium|LinkedList||341|[FlattenNestedListIterator](https://leetcode.com/problems/flatten-nested-list-iterator/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/341.Flatten_Nested_List_Iterator.md)|Medium|Stack,Design||343|[IntegerBreak](https://leetcode.com/problems/integer-break/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/343.Integer_Break.md)|Medium|Math,DynamicProgramming||344|[ReverseString](https://leetcode.com/problems/reverse-string/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/344.Reverse_String.md)|Easy|TwoPointers,String||347|[TopKFrequentElements](https://leetcode.com/problems/top-k-frequent-elements/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/347.Top_K_Frequent_Elements.md)|Medium|Heap,HashTable||349|[IntersectionofTwoArrays](https://leetcode.com/problems/intersection-of-two-arrays/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/349.Intersection_of_Two_Arrays.md)|Easy|Sort,HashTable,TwoPointers,BinarySearch||350|[IntersectionofTwoArraysII](https://leetcode.com/problems/intersection-of-two-arrays-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/350.Intersection_of_Two_Arrays_II.md)|Easy|Sort,HashTable,TwoPointers,BinarySearch||401|[BinaryWatch](https://leetcode.com/problems/binary-watch/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/401.Binary_Watch.md)|Easy|BitManipulation,Backtracking||404|[SumofLeftLeaves](https://leetcode.com/problems/sum-of-left-leaves/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/404.Sum_of_Left_Leaves.md)|Easy|Tree||417|[PacificAtlanticWaterFlow](https://leetcode.com/problems/pacific-atlantic-water-flow/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/417.Pacific_Atlantic_Water_Flow.md)|Medium|Depth-firstSearch,Breadth-firstSearch||437|[PathSumIII](https://leetcode.com/problems/path-sum-iii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/437.Path_Sum_III.md)|Medium|Tree||438|[FindAllAnagramsinaString](https://leetcode.com/problems/find-all-anagrams-in-a-string/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/438.Find_All_Anagrams_in_a_String.md)|Medium|HashTable||445|[AddTwoNumbersII](https://leetcode.com/problems/add-two-numbers-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/445.Add_Two_Numbers_II.md)|Medium|LinkedList||447|[NumberofBoomerangs](https://leetcode.com/problems/number-of-boomerangs/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/447.Number_of_Boomerangs.md)|Medium|HashTable,Math||450|[DeleteNodeinaBST](https://leetcode.com/problems/delete-node-in-a-bst/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/450.Delete_Node_in_a_BST.md)|Medium|Tree||451|[SortCharactersByFrequency](https://leetcode.com/problems/sort-characters-by-frequency/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/451.Sort_Characters_By_Frequency.md)|Medium|Heap,HashTable||454|[4SumII](https://leetcode.com/problems/4sum-ii/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/454.4Sum_II.md)|Medium|HashTable,BinarySearch||567|[PermutationinString](https://leetcode.com/problems/permutation-in-string/)|[Analyze](https://github.com/MuYunyun/blog/blob/master/LeetCode/567.Permutation_in_String.md)|Medium|TwoPointers,SlidingWindow|"},{name:"helps",path:"/LeetCode/helps",children:[{name:"linked_list.md",path:"/LeetCode/helps/linked_list.md",type:"file",mdconf:{abbrlink:"mmet39py"},birthtime:"2022-01-16",mtime:"2022-01-16",size:836,extension:".md",relative:"/LeetCode/helps/linked_list.md",isEmpty:!1,content:"\x3c!--abbrlink:mmet39py--\x3e```js//----someusefulfntodowithlinked_list----functionListNode(val){this.val=val;this.next=null;}/***createinitlinkedlistforleetcode.*/varlist=(functioncreateLinkedList(...args){constreverseArgs=args.reverse()consttmplistNode=newListNode(0)letlength=reverseArgs.lengthletcur=newListNode(reverseArgs[length-1])tmplistNode.next=curwhile(length--&&length>=1){letnext=newListNode(reverseArgs[length-1])cur.next=nextcur=next}returntmplistNode.next})(1,2,3,4,5)/***printthelinkedlist*/varprintList=function(list){letcur=listletstr=''while(cur){str+=`${cur.val}->`;cur=cur.nextcur===null&&(str+='null')}console.log(str)}```"},{name:"remind_clock.md",path:"/LeetCode/helps/remind_clock.md",type:"file",mdconf:{abbrlink:"cb3y1wyp"},birthtime:"2022-01-16",mtime:"2022-01-16",size:284,extension:".md",relative:"/LeetCode/helps/remind_clock.md",isEmpty:!1,content:"\x3c!--abbrlink:cb3y1wyp--\x3e```js/**remindtoclock*/(functionremindClock(arr){letprint=''for(leti=1;i<21;i++){if(arr.indexOf(i)===-1){print+=`@${i}`}}if(print==='')return'齐了'return`${print}记得打卡`})([])```"},{name:"tree.md",path:"/LeetCode/helps/tree.md",type:"file",mdconf:{abbrlink:"ffmuj7el"},birthtime:"2022-01-16",mtime:"2022-01-16",size:904,extension:".md",relative:"/LeetCode/helps/tree.md",isEmpty:!1,content:"\x3c!--abbrlink:ffmuj7el--\x3e```js//----someusefulfntodowithlinked_list----/***createtreenodethroughtreearray*thiswaysupportsthreeleveltreetemperaryly*becalsemosttestcaseinleetcodeislessthan3level.*input:[3,9,20,6,null,15,7]*output:3/\\920//\\6157*/functioncreateTree(treeArr){functionTreeNode(val){this.val=valthis.left=this.right=null}constcacheObj={}for(leti=0;i<treeArr.length;i++){cacheObj[`tree${i}`]=typeoftreeArr[i]==='number'&&newTreeNode(treeArr[i])}for(leti=0;i<treeArr.length;i++){cacheObj[`tree${2*i+1}`]&&(cacheObj[`tree${i}`].left=cacheObj[`tree${2*i+1}`])cacheObj[`tree${2*i+2}`]&&(cacheObj[`tree${i}`].right=cacheObj[`tree${2*i+2}`])}returncacheObj['tree0']}```"}],type:"directory",size:2024}],type:"directory",size:300282},{name:"Product",path:"/Product",children:[{name:"e-business",path:"/Product/e-business",children:[{name:"pdd.md",path:"/Product/e-business/pdd.md",type:"file",mdconf:{abbrlink:"vns5shb6"},birthtime:"2022-01-16",mtime:"2022-01-16",size:4132,extension:".md",relative:"/Product/e-business/pdd.md",isEmpty:!1,content:'\x3c!--abbrlink:vns5shb6--\x3e###商家端模块职责*创建店铺:[官网](https://www.pinduoduo.com/)->商家入驻*目前BApp+微信的入驻率不容小觑。*模块职责*`发货管理`:处理日常发货、退换货等服务。*订单查询*发货中心*急速发货*物流工具*物流概况*包裹中心*电子面单*打单工具*订单开票*正品心智*与商家评分打通*`售后管理`*售后工作台*工单管理*商家举证*小额打款*退货包运费*急速退款*`商品管理`*发布新商品*店铺装修*商品列表*商品体验*商品素材*评价管理*商品工具*供货管理*批发供货*分销*快团团供货*`采购管理`*批发采购*采购订单*`店铺营销`*营销活动*竞价活动*取倒数第二位价格:平台与商家的博弈,商家提前知道竞价规则。这时商家会产生错觉,"我的价格是最低的,我能盈利比我竞价的价格多一些的利润",所以在竞价的时候会更接近成本的竞价。case:多多果园。*平台招标*营销工具*转化提升*优惠券*限时限量*秒杀*收藏、满返(部分代替购物车)*粉丝运营*关注(直播等)*3~5块一个粉丝*群聊(红包群)*店铺设砍价*短信营销*店铺装修*店铺页设计*多多直播*`数据中心`*`账户资金`*`多多客服`*`多多进宝`*`推广中心`*`店铺管理`*`商家服务市场`*`多多国际`*消费者不匹配—>海淘价廉物品*不敢买—>溯源系统、代报关*不了解品牌—>种草*`装修`*店铺装修*商详装修*品牌装修*小程序装修###运营引流*运营*视觉运营*店铺视觉*品牌型*价格型*店铺指标*店铺转换率*热销产品排行*首页关注指标*访问量、访客量*跳失率、出店率*首页到商品详情页、分类页点击率*口碑运营*客服运营*引流推广*拼多多`流量来源`*社交裂变*拼单卡、砍价免费拿、多多果园等引流渠道*广告*CPT(CostPerTime,按时长付费)、CPM(CostPerMile,每千人成本)、CPC(CostPerClick,按单次点击扣费)、明星店铺推广、数据银行推广、品类关键词库、短信营销等引流渠道*App展示*首页开屏、首页Banner、类目类Banner、个人中心Banner、新人专区、App推送消息等引流渠道*搜索*活动*限时秒杀、品牌清仓、名片折扣、爱逛街、食品超市、时尚穿搭、新品推荐、微信公众号推文、微信公众消息和领券中心等引流渠道*其它渠道*多多进宝、微信群等*站内免费引流*运用标签精准引流*千人前面推荐算法=>`人群标签匹配商品标签`*人群标签*用户行为*个人属性*用户喜好*商品标签*类目标签*价格标签*属性标签*站外免费引流*付费引流*![](http://with.muyunyun.cn/77b7424d86a601b6c2cdbe02884be330.jpg)*搜索推广*场景展示推广*排名公式:综合排名=商品质量分*广告单击出价*其他推广工具*活动引流*活动报名*营销活动*品牌特卖、电器城、爱逛街、9块9特卖、限时秒杀*店铺活动*限量促销、拼单返现、限时免单*竞价活动*竞价活动*品质招标*社交活动*助力享免单*多多果园*推手引流*多多进宝*综合流量GMV=多多进宝+自然搜索+场景推广'},{name:"产品思考.md",path:"/Product/e-business/产品思考.md",type:"file",mdconf:{abbrlink:"yn25617p"},birthtime:"2022-01-16",mtime:"2022-01-16",size:785,extension:".md",relative:"/Product/e-business/产品思考.md",isEmpty:!1,content:"\x3c!--abbrlink:yn25617p--\x3e###方法论|shortname|fullname|mean||:--------:|:------------------------:|:------------:||OKR|ObjectivesandKeyResults|目标和关键结果||KPI|KeyPerformanceIndication|关键业绩指标|*OKR:方法论*KPI:###产品方法论*职能范围*终端:BAPP、Windows客户端、MMS工作台、Mac客户端、商家版小程序、多多公众号、商家服务号*目标*DAU*动销商家数*动销率:店铺有销售的商品的数量/全店铺的商品数量比。*主线*以小程序为基石的私域流量*提升DAU*商家成长*通过商家成长,中小商家成长为大商家*供应链*武汉、南昌"},{name:"电商.md",path:"/Product/e-business/电商.md",type:"file",mdconf:{abbrlink:"kb3tez6q"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3398,extension:".md",relative:"/Product/e-business/电商.md",isEmpty:!1,content:"\x3c!--abbrlink:kb3tez6q--\x3e###shortname|shortname|fullname|mean|note||:--------:|:----------------------:|:--------------:|:------------------------------------------------------------------------------------------:||SKU|StockKeepingUnit|库存单位|SKU是用来定价和管理库存的,7Plus有很多颜色,很多配置,每个颜色和配置的组合都会形成新的产品||SPU|StandardProductUnit|标准化产品单元|属性值、特性相同的商品就可以成为一个SPU||GMV|GrossMerchandiseVolume|商品交易总额|||DAU|DailyActiveUser|日活跃用户|||MAU|MonthActiveUser|月活跃用户|||ROI|ReturnOnInvestment|投资回报率|||DSR|DetailsSellerRating|卖家服务评级系统||*GMV*概念:作为电商平台,GMV(成交总额)是衡量平台竞争力(市场占有率)的核心指标。*公式:GMV为`已付款订单`和`未付款订单`两者之和。*GMV=有消费的顾客总数*平均客单价*有消费的顾客总数=点击UV*访购率*GMV=点击UV*访购率*平均客单价*指标:`流量指标`(用户数等)、`转化指标`(首单率、复购率等)。*如何提升DAU*用户群细分*描绘对应用户群的行为图谱*在合适行为路径中进行引导*客单价*客单价（percustomertransaction）是指商场（超市）每一个顾客平均购买商品的金额,也即是平均交易金额客单价的计算。*公式：`客单价=销售额/成交顾客数`-[x][电商平台如何提升GMV：产品篇](http://www.woshipm.com/pd/766707.html)-[x][从GMV出发，看目标拆分与公式拆解](http://www.woshipm.com/operate/4000572.html)-[x][拆解拼多多裂变活动：7天新增1700万DAU](http://www.woshipm.com/operate/2951693.html)-[x][提升DAU的不同思路和策略](http://www.woshipm.com/operate/2739697.html)-[][LTV及DAU的计算、预估方法](http://www.woshipm.com/operate/4091166.html)*开店管理###title|shortname|fullname|mean||:--------:|:-------------------:|:------:||BD|BusinessDevelopment|商务扩展||BI|BusinessIntelligence|数据分析||PR|publicrelationship|公关关系|###商家端MMS:MerchantManagementSystem*ToB*提升B端商家在平台中经营(BDAU),让卖家赚钱(BGMV)*ToC*提升C端(CDAU)、(CGMV)*ToP*平台调性/平台粘性/平台竞争力(进攻、防守)思考题:提升商品种类的KPI背后价值是什么?"}],type:"directory",size:8315}],type:"directory",size:8315},{name:"RaspberryPi",path:"/RaspberryPi",children:[{name:"1.树莓派简介&烧录系统.md",path:"/RaspberryPi/1.树莓派简介&烧录系统.md",type:"file",mdconf:{abbrlink:"rahvuwkb",title:"树莓派简介&烧录系统"},birthtime:null,size:2573,extension:".md",relative:"/RaspberryPi/1.树莓派简介&烧录系统.md",isEmpty:!1,content:"\x3c!--abbrlink:rahvuwkbtitle:树莓派简介&烧录系统--\x3e![](http://with.muyunyun.cn/0bb19aa47dec25151a4c7a56524e5d82.jpg-400)###树莓派可以做什么对于开源极客爱好者，可以把树莓派改造成，家庭影院、服务器、无线路由器、BT下载服务器、FTP服务器、智能小车、AI人工智能、智能家居、3D打印等等。*[树莓派到底可以用来做什么](https://zhuanlan.zhihu.com/p/166019428)-[][树莓派软路由](https://www.v2fy.com/p/2021-07-04-openwrt-4b-1625383754000/)*[科技爱好者博客](https://www.lxx1.com/4139)*(Todo)[树莓派+Homebriage+米家智能产品搭建Siri智能家居](https://www.lxx1.com/3220)*[树莓派安装OpenWrt打造超级路由器](https://www.lxx1.com/3294)*魔镜*[树莓派挂载U盘或者移动硬盘](https://www.lxx1.com/4181)*社区*[树莓派吧](http://www.shumeipaiba.com/)*[树莓派实验室](https://shumeipai.nxez.com/)###树莓派操作系统树莓派主板是没有自带系统的，就相当于一个PC电脑主板，系统需要自己安装在内存卡里，插上卡才能启动系统。树莓派官方有自己系统提供:Raspbian基于Debian生态环境优化的，更适合在树莓派上。更多的系统支持的有:*KaliLinux*Ubuntumate*Volumio*Retropie*Lakka*recalbox*Win10LOT*...###前置准备1.SD卡格式化，[SDCardFormatter](https://www.sdcard.org/downloads/formatter/)。2.下载[镜像]((https://ubuntu.com/download/raspberry-pi/thank-you?version=20.04.3&architecture=server-arm64+raspi))。3.使用[balenaEtcher](https://www.balena.io/etcher/)将镜像烧录到SD卡。###如何查找IP地址笔者最后实验成功且较为方便的方式如下:*步骤一:通过网线链接树莓派与路由器。*步骤二:登录路由器后台，查看安装了ubuntu的树莓派被分配的ip。![](http://with.muyunyun.cn/f32ea27b99f27a350916fb14c3d1bace.jpg)###使用SSH登录树莓派在查找到路由器分配给树莓派的IP地址后，我们可以在Mac上使用SSH命令登入树莓派服务器:```sshubuntu@192.168.1.3```*SSH与VNC的区别是?*SSH(SecureShell):安全外壳协议，是一种加密的网络传输协议。*VNC:虚拟网络计算。是一种图形桌面「共享」应用程序，它使用远程帧缓冲协议来远程控制另一台计算机。###树莓派ubuntu系统首次登入树莓派ubuntu系统需要修改密码，其初始账号与密码都为ubuntu。"},{name:"2.内网穿透.md",path:"/RaspberryPi/2.内网穿透.md",type:"file",mdconf:{abbrlink:"fes9wogn",title:"内网穿透"},birthtime:"2022-01-16",mtime:"2022-01-16",size:7464,extension:".md",relative:"/RaspberryPi/2.内网穿透.md",isEmpty:!1,content:'\x3c!--abbrlink:fes9wogntitle:内网穿透--\x3e-[内网穿透原理架构](#内网穿透原理架构)-[服务端(云主机)nginx添加Http服务](#服务端云主机-nginx-添加-http-服务)-[frp](#frp)-[服务端(云主机)配置](#服务端云主机配置)-[进一步地使用pm2运行frps](#进一步地使用-pm2-运行-frps)-[客户端(树莓派)配置](#客户端树莓派配置)-[添加SSH服务](#添加-ssh-服务)###内网穿透原理架构本文中，我们使用了[frp](https://github.com/fatedier/frp)，frp是一个专注于内网穿透的高性能的反向代理应用。todo:补充流程图。###服务端(云主机)nginx添加Http服务首先将域名控制台(本文中使用frp.muyunyun.cn域名作为演示)解析到服务器ip。为了方面后续的调试运行，需放开以下几个服务器端口。*80端口:（Nginx接收http请求用）*6000端口:（转发映射SSH服务用）*8080端口:（转发映射http服务用）*7000端口:（服务器端frps运行端口）以配置域名frp.muyunyun.cn为例，，转发对`frp.muyunyun.cn`域名请求到`8080端口`。>参考[nginx常用命令](https://muyunyun.cn/blog/yq9jpwrw)安装Nginx。新建配置文件:```bashtouch/etc/nginx/conf.d/frp.muyunyun.cn.conf```在配置文件中添加http服务相关内容:```bashserver{server_namefrp.muyunyun.cn;listen80;listen[::]:80;root/usr/share/nginx/html/frp.muyunyun.cn;location/{#这里先预留8080端口，在后文章节[基于树莓派搭建家庭服务器](https://muyunyun.cn/blog/r4zxdn6n)中会在8080端口上启动Web服务。proxy_passhttp://127.0.0.1:8080;proxy_set_headerHost$host:80;proxy_set_headerX-Real-IP$remote_addr;proxy_set_headerX-Forwarded-For$proxy_add_x_forwarded_for;}error_page404/404.html;location=/40x.html{}error_page500502503504/50x.html;location=/50x.html{}}#以下配置用于Https,若读者后续有配置Https的需求时可再折回参考如下配置，参考[HTTPS协议配置](https://muyunyun.cn/blog/mx5pvgl1)。server{listen443sslhttp2;listen[::]:443sslhttp2;server_namefrp.muyunyun.cn;root/usr/share/nginx/html/frp.muyunyun.cn;location/{proxy_passhttp://127.0.0.1:8080;proxy_set_headerHost$host:443;proxy_set_headerX-Real-IP$remote_addr;proxy_set_headerX-Forwarded-For$proxy_add_x_forwarded_for;}ssl_certificate"/etc/nginx/ssl/frp.muyunyun.cn/fullchain.cer";ssl_certificate_key"/etc/nginx/ssl/frp.muyunyun.cn/frp.muyunyun.cn.key";ssl_session_cacheshared:SSL:1m;ssl_session_timeout10m;ssl_ciphersHIGH:!aNULL:!MD5;ssl_prefer_server_cipherson;#Loadconfigurationfilesforthedefaultserverblock.include/etc/nginx/default.d/*.conf;error_page404/404.html;location=/40x.html{}error_page500502503504/50x.html;location=/50x.html{}}```>端口使用80页面会提示`网站暂时无法访问，该网站未根据工信部相关法律规则进行备案`(与二级域名无关，比如使用www.muyunyun.cn或者frp.muyunyun.cn都行)，[了解更多备案相关内容](https://icp-faq.dnspod.cn/why)。如果未备案，可以将它修改80端口为其它端口，比如90端口。如果后续要使用acme.sh申请https服务，还是需要用80端口。![](http://with.muyunyun.cn/04afbf893d08548ebd06a85488389298.jpg-400)新建`frp.muyunyun.cn`对应的网站文件夹与文件```bashmkdir-p/usr/share/nginx/html/frp.muyunyun.cntouch/usr/share/nginx/html/frp.muyunyun.cn/index.html```在`/usr/share/nginx/html/fpr.muyunyun.cn/index.html`中输入```html<!DOCTYPEhtml><htmllang="en"><head><metacharset="UTF-8"><metahttp-equiv="X-UA-Compatible"content="IE=edge"><metaname="viewport"content="width=device-width,initial-scale=1.0"><title>云随风</title></head><body>Test</body></html>```控制台输入`sudosystemctlrestartnginx`。此时在浏览器访问http://frp.muyunyun.cn可以看到目标内容:![](http://with.muyunyun.cn/4373b2aaca032ed2a78fac53279532d2.jpg)###frp####服务端(云主机)配置在云主机端执行如下命令:```bashcd/opt/sudowgethttps://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_linux_386.tar.gzsudotarzxvffrp_0.37.0_linux_386.tar.gz```进入`/opt/frp_0.37.0_linux_arm64`![](http://with.muyunyun.cn/32f4ce6995482f6e086b85d2bdd06a01.jpg)备份服务端frps的配置文件frps.ini```bashsudocpfrps.inifrps.ini_backup```修改服务端配置文件frps.ini，增加一行`vhost_http_port=8080`:```diff[common]bind_port=7000+vhost_http_port=8080```以上配置含义为:服务端frps程序运行在7000端口，并将指向8080端口的请求转发到客户端。运行如下命令，开启frp的服务端程序```bash./frps-cfrps.ini```![](http://with.muyunyun.cn/eb0a4e394f5b656b3e67c13c6ab1eb82.jpg)####进一步地使用pm2运行frps安装node环境>[安装Node.js多版本](https://cloud.tencent.com/document/product/213/38237#.E6.AD.A5.E9.AA.A43.EF.BC.9A.E5.AE.89.E8.A3.85-node.js-.E5.A4.9A.E7.89.88.E6.9C.AC.EF.BC.88.E5.8F.AF.E9.80.89.EF.BC.89)全局安装pm2```bashnpmipm2-g```使用pm2守护运行frps服务```bashsudoecho"/opt/frp_0.37.0_linux_386/frps-c/opt/frp_0.37.0_linux_386/frps.ini">/opt/frp_0.37.0_linux_386/start_frpc.shpm2start/opt/frp_0.37.0_linux_386/start_frps.shpm2save```![](http://with.muyunyun.cn/e52ef19b14366896e5de3c6bf7bce609.jpg)####客户端(树莓派)配置在树莓派内执行以下命令，下载frp，并解压。```bashcd/opt/sudowgethttps://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_linux_arm64.tar.gzsudotarzxvffrp_0.37.0_linux_arm64.tar.gz```进入`/opt/frp_0.37.0_linux_arm64`备份客户端frpc的配置文件frpc.ini```bashsudocpfrpc.inifrpc.ini_backup```frpc.ini文件备份如下:```bash[common]server_addr=127.0.0.1server_port=7000[ssh]type=tcplocal_ip=127.0.0.1local_port=22remiote_port=6000```编辑frpc.ini:```bashsudovimfrpc.ini``````bash[common]server_addr=81.69.252.246server_port=7000[web]type=httplocal_port=8080custom_domains=frp.muyunyun.cn```启动客户端```bash./frpc-cfrpc.ini```接着从公网访问frp.muyunyun.cn，验证内网穿透是否成功。![](http://with.muyunyun.cn/c61981adbdaba27efbc45b26c1921891.jpg-400)可以看到来自公网的请求在树莓派的frp客户端已经有了反应，接着我们在树莓派搭建一个简单服务。>进一步地，可以参考[基于树莓派搭建家庭服务器](https://muyunyun.cn/blog/r4zxdn6n)。###添加SSH服务```bash[ssh]type=tcplocal_ip=127.0.0.1local_port=22remote_port=6000```如上配置是指将树莓派的默认ssh的22号端口映射到frp.muyunyun.cn的6000端口。重启frpc服务:```bashcd/opt/frp_0.37.0_linux_arm64pm2restartstart_frpc.sh```通过公网frp.muyunyun.cn的6000端口进行ssh登录。```bashsshubuntu@frp.muyunyun.cn-p6000```![](http://with.muyunyun.cn/43431e73e8a218fb9e0a494f61f8f0df.jpg)至此实现了在公网使用SSH操作访问树莓派的需求。'},{name:"3.基于树莓派搭建家庭服务器.md",path:"/RaspberryPi/3.基于树莓派搭建家庭服务器.md",type:"file",mdconf:{abbrlink:"r4zxdn6n",title:"基于树莓派搭建家庭服务器"},birthtime:"2022-01-16",mtime:"2022-01-16",size:2052,extension:".md",relative:"/RaspberryPi/3.基于树莓派搭建家庭服务器.md",isEmpty:!1,content:'\x3c!--abbrlink:r4zxdn6ntitle:基于树莓派搭建家庭服务器--\x3e###安装Node.js使用ARMv8版本的稳定版Node.js。```bashcd/opt/sudowgethttps://nodejs.org/dist/v14.18.0/node-v14.18.0-linux-arm64.tar.xzsudotarxvfnode-v14.18.0-linux-arm64.tar.xz```将Node.js添加到系统变量```bashsudoecho"exportNODE_HOME=/opt/node-v14.18.0-linux-arm64">>~/.bashrcsudoecho"exportPATH=\\$NODE_HOME/bin:\\$PATH">>~/.bashrcsource~/.bashrc```此时在树莓派中输入node-v，可以看到对应版本如下:```bashubuntu@ubuntu:~$node-vv14.18.0ubuntu@ubuntu:~$npm-v6.14.15```接着安装http-server服务```bashnpminstallhttp-server-g```在/opt文件夹新建frp.muyunyun.cn文件夹,并创建hello.txt文件。```bashsudomkdir/opt/frp.muyunyun.cnsudochmod777-R/opt/frp.muyunyun.cnsudotouch/opt/frp.muyunyun.cn/hello.txtsudochmod777-R/opt/frp.muyunyun.cn/hello.txtsudoecho"HelloWorld!">/opt/frp.muyunyun.cn/hello.txt```安装pm2```bashnpminstallpm2-g```使用pm2守护运行http-server服务```bashcd/opt/frp_0.37.0_linux_arm64sudotouchstart_http_server.shsudochmod777start_http_server.shsudoecho"http-server/opt/frp.muyunyun.cn-p8080">start_http_server.shpm2start/opt/frp_0.37.0_linux_arm64/start_http_server.shpm2save```使用pm2守护运行frpc服务```bashsudotouch/opt/frp_0.37.0_linux_arm64/start_frpc.shsudochmod777/opt/frp_0.37.0_linux_arm64/start_frpc.shsudoecho"/opt/frp_0.37.0_linux_arm64/frpc-c/opt/frp_0.37.0_linux_arm64/frpc.ini">/opt/frp_0.37.0_linux_arm64/start_frpc.shcd/opt/frp_0.37.0_linux_arm64/pm2start/opt/frp_0.37.0_linux_arm64/start_frpc.shpm2save```可以使用`pm2list`查看当前树莓派中的服务列表。![](http://with.muyunyun.cn/442c4a0b41ad3bc6fcbb09f6d162bd06.jpg)在公网访问http://frp.muyunyun.cn。💐💐💐至此有了外网可以访问的家庭服务器。![](http://with.muyunyun.cn/fac7d7c9a8098d72f98cd6f4485347cd.jpg)'},{name:"4.给树莓派安装Docker.md",path:"/RaspberryPi/4.给树莓派安装Docker.md",type:"file",mdconf:{abbrlink:"2a97pq3a",title:"给树莓派安装 Docker"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1255,extension:".md",relative:"/RaspberryPi/4.给树莓派安装Docker.md",isEmpty:!1,content:'\x3c!--abbrlink:2a97pq3atitle:给树莓派安装Docker--\x3e###安装Docker```bashsudoaptupdatesudoaptinstall\\apt-transport-https\\ca-certificates\\curl\\gnupg\\lsb-release-ycurl-fsSLhttps://download.docker.com/linux/ubuntu/gpg|sudogpg--dearmor-o/usr/share/keyrings/docker-archive-keyring.gpgecho\\"deb[arch=$(dpkg--print-architecture)signed-by=/usr/share/keyrings/docker-archive-keyring.gpg]https://download.docker.com/linux/ubuntu\\$(lsb_release-cs)stable"|sudotee/etc/apt/sources.list.d/docker.list>/dev/nullsudoaptupdatesudoaptinstalldocker-ce=5:20.10.8~3-0~ubuntu-focaldocker-ce-cli=5:20.10.9~3-0~ubuntu-focalcontainerd.io=1.4.11-1-y```###安装DockerCompose```bash#在本机的host文件中添加github相关ip地址，遇到`curl:(7)Failedtoconnecttoraw.githubusercontent.comport443`问题，参考https://github.com/hawtim/blog/issues/10sudovim/etc/hosts#使dns改动生效sudosystemctlrestartsystemd-resolved``````bashsudocurl-L--failhttps://raw.githubusercontent.com/linuxserver/docker-docker-compose/master/run.sh-o/usr/local/bin/docker-composesudochmod+x/usr/local/bin/docker-composesudodocker-compose--version```'},{name:"5.基于树莓派部署RSSHub.md",path:"/RaspberryPi/5.基于树莓派部署RSSHub.md",type:"file",mdconf:{abbrlink:"wns8hpzc",title:"基于树莓派部署 RSSHub"},birthtime:"2022-01-16",mtime:"2022-01-16",size:1991,extension:".md",relative:"/RaspberryPi/5.基于树莓派部署RSSHub.md",isEmpty:!1,content:"\x3c!--abbrlink:wns8hpzctitle:基于树莓派部署RSSHub--\x3e在给[树莓派创建好Docker环境](https://muyunyun.cn/blog/2a97pq3a)后，本文记录给树莓派部署RSSHub的过程。RSShub本质是一个为各类网页生成RSS信息的爬虫集合，我们通过阅读RSSHub的文档，可以获得各类知名网站的RSS信息。###获取docker-compose.yml```bashcd/opt/sudomkdirrsshubsudochmod777-Rrsshubcd/opt/rsshubwgethttps://raw.githubusercontent.com/DIYgod/RSSHub/master/docker-compose.yml```docker-compose.yml内的内容为:```bashversion:'3'services:rsshub:image:diygod/rsshubrestart:alwaysports:-'1200:1200'environment:NODE_ENV:productionCACHE_TYPE:redisREDIS_URL:'redis://redis:6379/'PUPPETEER_WS_ENDPOINT:'ws://browserless:3000'depends_on:-redis-browserlessbrowserless:#Seeissue6680image:browserless/chrome:1.43-chrome-stablerestart:alwaysulimits:core:hard:0soft:0redis:image:redis:alpinerestart:alwaysvolumes:-redis-data:/datavolumes:redis-data:```从配置信息中我们可以看出，服务端口为1200。###创建volume持久化Redis缓存```bashsudodockervolumecreateredis-data```###启动RSShub```bashcd/opt/rsshubsudodocker-composeup-d```![](http://with.muyunyun.cn/ca92893197e45c4753eab1f72bfc9abb.jpg)访问本地树莓派ip的1200端口，可以看到RSS已经启动在1200端口上了。进入`/opt/frp_0.37.0_linux_arm64`，在frpc.ini中添加以下配置:```bashcd/opt/frp_0.37.0_linux_arm64sudovimfrpc.ini``````bash[rsshub-frp-muyunyun-cn-1200]type=tcplocal_ip=127.0.0.1local_port=1200remote_port=1200```重启frpc，此时可以在公网中访问到新部署的RSSHub服务。```bashcd/opt/frp_0.37.0_linux_arm64pm2restartstart_frpc.sh```![](http://with.muyunyun.cn/99cc2f01fb172287d2a758e88c3fd9f2.jpg)"},{name:"6.HTTPS协议配置.md",path:"/RaspberryPi/6.HTTPS协议配置.md",type:"file",mdconf:{abbrlink:"mx5pvgl1",title:"HTTPS 协议配置"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3831,extension:".md",relative:"/RaspberryPi/6.HTTPS协议配置.md",isEmpty:!1,content:'\x3c!--abbrlink:mx5pvgl1title:HTTPS协议配置--\x3e###Https协议配置免费的Https证书，最多只有一年的期限，而且每个二级子域名要单独申请，很浪费时间。使用本文提供的方法，可以只配置一次，实现证书永久自动续期。###acme.sh安装实践笔者一开始将acme.sh安装在树莓派中，绕了弯。**应将acme.sh安装在云服务器端**。*步骤一:安装acme.sh。>https://github.com/acmesh-official/acme.sh/wiki/sudo```bash#unstallforcurrentuseracme.sh--uninstall#changetoroot(需要执行)sudosu#installagainforrootusercurlhttps://get.acme.sh|sh-semail=328375795@qq.comsource~/.bashrc```*步骤二:获取https证书。>说明:本文以www.muyunyun.cn作为案例演示，[基于树莓派搭建家庭服务器](https://muyunyun.cn/blog/r4zxdn6n)中的frp.muyunyun.cn如果要配置为HTTPS，操作同理。```bashacme.sh--set-default-ca--serverletsencryptacme.sh--issue-dwww.muyunyun.cn--nginx```![](http://with.muyunyun.cn/3e990527ed80cb020704ab30aa502856.jpg-400)在这一步中acme.sh读取了nginx配置(路径:`/etc/nginx/conf.d/www.muyunyun.cn.conf`)，并自动生成了证书。>调试方法:acme.sh--issue-dwww.muyunyun.cn--nginx--debug2*步骤三:将证书拷贝到`/etc/nginx/ssl`文件夹。创建文件夹```bashmkdir-p/etc/nginx/ssl/www.muyunyun.cn```拷贝证书:```bashacme.sh--install-cert-dwww.muyunyun.cn\\--key-file/etc/nginx/ssl/www.muyunyun.cn/www.muyunyun.cn.key\\--fullchain-file/etc/nginx/ssl/www.muyunyun.cn/fullchain.cer\\--reloadcmd"servicenginxforce-reload"```请一定使用以上语法acme.sh--install-cer进行拷贝，这样证书才能保证在新的位置也能自动更新。![](http://with.muyunyun.cn/922adc77ccacd8bb3c52dd9ceb8e080e.jpg)*步骤四:将`/etc/nginx/ssl/www.muyunyun.cn/`中的证书手动配置到nginx,并重启nginx使之生效。将`/etc/nginx/conf.d/www.muyunyun.cn.conf`中的内容替换为:```bashserver{listen80;listen[::]:80;server_namewww.muyunyun.cn;root/usr/share/nginx/html/www.muyunyun.cn;error_page404/404.html;location=/404.html{}error_page500502503504/50x.html;location=/50x.html{}}server{listen443sslhttp2;listen[::]:443sslhttp2;server_namewww.muyunyun.cn;root/usr/share/nginx/html/www.muyunyun.cn;ssl_certificate"/etc/nginx/ssl/www.muyunyun.cn/fullchain.cer";ssl_certificate_key"/etc/nginx/ssl/www.muyunyun.cn/www.muyunyun.cn.key";ssl_session_cacheshared:SSL:1m;ssl_session_timeout10m;ssl_ciphersHIGH:!aNULL:!MD5;ssl_prefer_server_cipherson;#Loadconfigurationfilesforthedefaultserverblock.include/etc/nginx/default.d/*.conf;error_page404/404.html;location=/40x.html{}error_page500502503504/50x.html;location=/50x.html{}}```重启nginx:```bashsystemctlrestartnginx```打开https://www.muyunyun.cn，证书已生效。![](http://with.muyunyun.cn/a397cb63269be96f1102a117bbe3fb49.jpg-400)由于我们全程使用acme.sh进行安装，acme.sh会自动为你创建一个定时任务,每天0:00点自动检测所有的证书,如果快过期了,需要更新,则会自动更新证书。运行`psaux|grepacme`可以看到acme一直在后台运行。```bashroot@VM-16-17-ubuntu:/etc/nginx/ssl/www.muyunyun.cn#psaux|grepacmeroot15611930.00.07348748pts/0S+03:570:00grep--color=autoacme```###相关链接*[acme.sh使用说明](https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E)'},{name:"7.基于树莓派部署code-server.md",path:"/RaspberryPi/7.基于树莓派部署code-server.md",type:"file",mdconf:{abbrlink:"n45adwng",title:"基于树莓派部署 code-server"},birthtime:"2022-01-16",mtime:"2022-01-16",size:7254,extension:".md",relative:"/RaspberryPi/7.基于树莓派部署code-server.md",isEmpty:!1,content:'\x3c!--abbrlink:n45adwngtitle:基于树莓派部署code-server--\x3e[code-server](https://github.com/cdr/code-server)是vscode的服务端程序，通过部署code-server在服务器，可以实现web端访问vscode。进而可以达到以下能力:*【直接】支持跨设备(Mac/iPad/iPhone等等)编程，同时保证多端编程环境统一。*【直接】支持在web端提交git代码。*【间接】解放背包重量😁。至于将code-server部署在树莓派上相比云端服务器好处是综合成本低，后续若要更换云服务器，只需更改内网映射端口即可，迁移会十分便捷。###树莓派上部署code-server参考[code-server官网](https://coder.com/docs/code-server/latest/install#raspberry-pi)，在树莓派上其推荐使用[yarn的方式](https://coder.com/docs/code-server/latest/install#yarn-npm)来进行安装code-server。此外[前置安装](https://github.com/cdr/code-server/blob/main/docs/npm.md)提到`node.js版本需要与所下载的VSCode\'sElectron所依赖的版本一致`。笔者下载的code-server版本为code-server_3.12.0_arm64.deb，其需要node.js14.x版本。执行如下命令进行前置安装:```bashsudoapt-getinstall-y\\build-essential\\pkg-config\\python3npmconfigsetpythonpython3```按照[yarn官网](https://yarn.bootcss.com/docs/install/#debian-stable)所述，在Debian/Ubuntu系统中安装yarn:```bashcurl-sShttps://dl.yarnpkg.com/debian/pubkey.gpg|sudoapt-keyadd-echo"debhttps://dl.yarnpkg.com/debian/stablemain"|sudotee/etc/apt/sources.list.d/yarn.listsudoaptupdate&&sudoaptinstallyarnyarn--version//1.22.15```执行`sudovim.bashrc`，将yarn全局安装命令的执行路径写入.bashrc文件。```bashexportPATH="$PATH:`yarnglobalbin`"source~/.bashrc#使之生效```参照[code-server官网安装教程](https://coder.com/docs/code-server/latest/npm#installing)，执行以下命令安装code-server:```bashyarnglobaladdcode-servercode-server--version#3.12.0```>笔者使用npminstall-gcode-server无法成功安装，最终使用yarnglobaladdcode-server安装成功。编辑`.config/code-server/config.yaml````bashsudovim.config/code-server/config.yaml``````bashbind-addr:127.0.0.1:5555auth:passwordpassword:xxxxxxxxxcert:false``````bash#启动code-servercode-server```在`frpc.ini`中添加以下配置:>frpc.ini与pm2的完整配置说明可以参考[内网穿透](https://muyunyun.cn/blog/fes9wogn)章节。```bash[vscode-server-frp-muyunyun-cn-5555]type=tcplocal_ip=127.0.0.1#code-server服务运行在树莓派本地的5555端口上local_port=5555#对外运行在服务器端云主机5555端口上remote_port=5555```使用pm2重启frpc服务:```bashcd/opt/frp_0.37.0_linux_arm64pm2restartstart_frpc.sh```此时在frps服务器端(云主机)中通过`lsof-i:5555`可以看到服务端端口5555已经被frps服务占据。![](http://with.muyunyun.cn/c4987da142cbc4b261b6b333df5d490b.jpg)同时在公网中可以看到code-server服务已成功运行![](http://with.muyunyun.cn/9f5f9fa5cd5c1510695ca492e939c255.jpg)使用pm2守护运行code-server以让相关服务遇到意外(比如断电后)能自动重启:```bashcd/opt/frp_0.37.0_linux_arm64sudotouchstart_code_server.shsudochmod777start_code_server.shsudoecho"code-server">start_code_server.shpm2start/opt/frp_0.37.0_linux_arm64/start_code_server.shpm2save```笔者在域名解析处新增code主机记录以语义化访问code-server服务，此时访问http://code.muyunyun.cn:5555与访问http://frp.muyunyun.cn:5555效果是相同的。![](http://with.muyunyun.cn/b0afbe6f729762ce8e50a00624c3e11a.jpg-400)###支持HTTPS协议访问访问HTTP下的code-server服务，发现不能完整使用插件、剪切板等功能模块。![](http://with.muyunyun.cn/580bab3470fb6535fae23530db223a94.jpg-400)根据控制台报错信息，推测这些模块依赖了servicework，查阅[Settinguptoplaywithserviceworkers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers#setting_up_to_play_with_service_workers)得知,servicework确实必须在Https协议中使用。因此若要完整地使用code-server服务，需要配置HTTPS协议，配置过程记录在[HTTPS域名配置](https://muyunyun.cn/blog/mx5pvgl1)章节中，其介绍了给域名获取免费的Https证书并让Https生效的过程。###支持在HTTPS协议中访问WebSocket在配置完HTTPS服务后，访问HTTPS链接发现还是无法在web端正常使用vscode，排查发现code-server使用WebSocket以保持长连接，因此需要在nginx配置文件中增加对[WebSocket配置](http://nginx.org/en/docs/http/websocket.html)。执行`vim/etc/nginx/conf.d/www.muyunyun.cn.conf`进行编辑，完整的nginx配置如下:```bashmap$http_upgrade$connection_upgrade{defaultupgrade;\'\'close;}upstreamcode_muyunyun_cn{server127.0.0.1:5555;}server{server_namecode.muyunyun.cn;listen80;listen[::]:80;rewrite^(.*)$https://$host$1permanent;error_page404/404.html;location=/40x.html{}error_page500502503504/50x.html;location=/50x.html{}}server{listen443sslhttp2;listen[::]:443sslhttp2;server_namecode.muyunyun.cn;root/usr/share/nginx/html/code.muyunyun.cn;location/{proxy_passhttp://code_muyunyun_cn;proxy_set_headerHost$host:443;proxy_set_headerX-Real-IP$remote_addr;proxy_set_headerX-Forwarded-For$proxy_add_x_forwarded_for;#supportwebsocketproxy_http_version1.1;proxy_set_headerUpgrade$http_upgrade;proxy_set_headerConnection$connection_upgrade;}ssl_certificate"/etc/nginx/ssl/code.muyunyun.cn/fullchain.cer";ssl_certificate_key"/etc/nginx/ssl/code.muyunyun.cn/code.muyunyun.cn.key";ssl_session_cacheshared:SSL:1m;ssl_session_timeout10m;ssl_ciphersHIGH:!aNULL:!MD5;ssl_prefer_server_cipherson;#Loadconfigurationfilesforthedefaultserverblock.include/etc/nginx/default.d/*.conf;error_page404/404.html;location=/40x.html{}error_page500502503504/50x.html;location=/50x.html{}}```重新加载nginx配置后，此时已经可以在web端使用上code-server的能力。![](http://with.muyunyun.cn/c8b78a74fccd162ef97ecd2b53da09f4.jpg-400)###在web端中提交git代码登入树莓派端，执行如下命令生成ssh密钥:```bash#以github为例ssh-keygen-trsa-C"youremail@example.com"-f~/.ssh/github```然后将~/.ssh/github.pub公钥中的内容复制到剪贴板，拷贝到[GitHubssh](https://github.com/settings/keys)的Key文本框中。经验证，至此已经可以在web中提交代码到github。![](http://with.muyunyun.cn/924eb6f01775b8a455b6bb5107bd202c.jpg-400)'},{name:"README.md",path:"/RaspberryPi/README.md",type:"file",mdconf:{abbrlink:"x6nkyb6q"},birthtime:"2022-01-16",mtime:"2022-01-16",size:62,extension:".md",relative:"/RaspberryPi/README.md",isEmpty:!1,content:"\x3c!--abbrlink:x6nkyb6q--\x3e###已部署站点地址收录"},{name:"linux",path:"/RaspberryPi/linux",children:[{name:"常用命令.md",path:"/RaspberryPi/linux/常用命令.md",type:"file",mdconf:{abbrlink:"mbrsm6kj"},birthtime:"2022-01-16",mtime:"2022-01-16",size:15869,extension:".md",relative:"/RaspberryPi/linux/常用命令.md",isEmpty:!1,content:'\x3c!--abbrlink:mbrsm6kj--\x3e-[文件操作](#文件操作)-[head](#head)-[tail](#tail)-[ls](#ls)-[pwd](#pwd)-[wc](#wc)-[find](#find)-[mkdir](#mkdir)-[more](#more)-[paste](#paste)-[stat](#stat)-[grep](#grep)-[touch](#touch)-[sed](#sed)-[sed用法实例](#sed-用法实例)-[cd](#cd)-[rm](#rm)-[cp](#cp)-[cat](#cat)-[mv](#mv)-[open](#open)-[source](#source)-[tree](#tree)-[ln](#ln)-[file](#file)-[tar](#tar)-[系统管理](#系统管理)-[ping](#ping)-[which](#which)-[shutdown](#shutdown)-[uptime](#uptime)-[uname](#uname)-[ifconfig](#ifconfig)-[chmod](#chmod)-[lsof](#lsof)-[alias](#alias)-[系统进程](#系统进程)-[ps](#ps)-[用户管理](#用户管理)-[chsh](#chsh)-[users](#users)-[last](#last)-[su](#su)-[whoami](#whoami)-[网络](#网络)-[curl](#curl)-[包管理](#包管理)-[apt-get](#apt-get)-[其它](#其它)-[clear](#clear)-[link](#link)##文件操作###head显示文件的头部内容，如果不指定参数默认显示10行```bash#显示前10行内容headREADME.md#或者显示多个文件headREADME.mdpackage.json#-n指定显示行数head-n100README.md```###tail显示文件的末尾部分```bash#默认显示末尾10行tailREADME.md#-n指定显示末尾20行tail-n20README.md```###ls```bash#显示当前目录列表ls#显示目录列表的详细信息ls-l#显示指定目录ls./src#可读性地显示目录列表详细信息,hmeanshuman-readablels-lh#列出所有文件包括隐藏文件ls-a#-F可以显示类型，用以区分是文件还是目录ls-F#后缀为”/“代表是目录，”*“为可执行文件，没有则为文件#-i查看inode编号,每一个文件或目录都有一个唯一的编号，这个数字由内核分配给文件系统中的每一个对象ls-i#过滤文件列表,*代表0个或多个字符,?代表一个字符lsREAD*```###pwd显示当前路径```bash#pwdmeanspathnameofthecurrentworkingdirectorypwd```###wc统计文件的行数、字数、字节数,常见用于`统计代码行数````bash#统计行数wc-lREADME.md#统计字数wc-wREADME.md#统计字符数,中文占两个字符,英文占一个字符wc-mREADME.md```###find指定某个目录下查找文件```bash#在当前目录递归搜索文件名为README.md文件find.-nameREADME.md#通过通配符进行查找,必须用引号括着,这里查找所有后缀为.md文件find.-name"*.md"find.-iname"*.md"#忽略文件大小写#排除文件，只要加!,排除掉所有.md后缀的文件find.!-name"*.md"#根据类型进行过滤搜索#f普通文件d目录find.-typef#限定目录递归深度find.-maxdepth3#最大为3个目录find.-mindepth3#最小为3个目录#查找文件大小大于25k文件find.-size+25k#查找10天前文件-mtime修改时间、-ctime创建时间、-atime访问时间find.-mtime+10```###mkdir```bash#在当前目录下创建temp目录mkdirtemp#创建多层目录,pmeansparentmkdir-ptemp/temp2/temp3#基于权限创建,mmeansmodemkdir-m777temp```###more*空格-查看下一屏内容*B-查看上一屏内容*回车-查看下一行内容*Q-退出```bashmoreREADME.md#从第10行开始显示more+10README.md```###paste合并N个文件的`列`。>并不是纵向合并,而是横向合并。```bash#1.txt和2.txt合并输出paste1.txt2.txt#1.txt2.txt合并后保存为3.txtpaste1.txt2.txt>3.txt```###stat用于显示文件或目录的状态信息```js167772208702541224-rw-r--r--1macstaff015857"Nov113:02:022020""Nov113:02:022020""Nov113:02:022020""Oct2518:48:152020"4096320README.md```###grep强大的文本搜索工具,被称为Linux命令三剑客。```bash#从README.md文件中搜索linux关键字grep"linux"README.mdgrep"linux"README.mdREADME2.md#多个文件搜索#输出时高亮显示grep"linux"README.md--color#-o只输出匹配部分grep-o"linux"README.md--color#-n输出到匹配的行数grep-n"linux"README.md#-c输出到匹配次数grep-c"linux"README.md#-r递归目录文件搜索grep-r"linux"./src#使用glob风格表达式搜索egrep"[0-9]"#等价于grep-E"[0-9]"README.md```###touch创建一个空文件,如果文件存在只会修改文件的创建时间```bashtouchREADME.md```###sedsed是一种功能强大的流式文本编辑器，它是文本处理中非常重要的工具，能够完美的配合正则表达式使用，功能不同凡响。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（patternspace），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用重定向存储输出。sed主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。####sed用法实例替换操作:s命令替换文本中的字符串：```jssed\'s/book/books/\'file```###cd进入指定目录```bash#进入当前src目录cdsrc#回到上一次目录cd-#返回上一级目录cd..cd../../..#返回多级#进入/root目录cd~cd#或者不带任何参数#将上一个命令的参数作为cd参数使用cd!$#模糊匹配目录，有时目录名很长一个一个敲效率就很低#*代表0个或多个字符，?代表一个字符cdREAD*```###rm删除指定目录或文件>使用此命令需要非常小心,一但删除无法恢复```bash#删除当前1.txt文件rm1.txt#-i删除前询问是否真的要删除，因为一旦删除无法恢复rm-iREADME.md#这条命令比较常用,强制删除目录或文件#-r如果是目录递归删除,-f强制删除不发出任何警告rm-rf./src```###cp拷贝文件或目录```bash#将当前README.md文件拷贝到上一层cp./README.md../README.md#-a将原文件属性一同拷贝,修改时间、创建时间等cp-a./README.md../README.md#-r用于递归拷贝目录cp-rhome../home#-i如果目标文件存在会询问用户是否需要覆盖cp-iREADME.mdREADME.md```*[toread](https://github.com/xjh22222228/linux-manual#cat)###cat查看指定整个文件内容```bash#查看README.md文件所有内容catREADME.mdcatREADME.mdREADME2.md#或者一次性显示多个文件#-n每一行显示行号cat-nREADME.md#-b只给有内容的行显示行号cat-bREADME.md```###mvmv有2个用途：*将文件或目录移动到另一个位置*将文件或目录重命名```bash#将README.md重命名为README-2.md,如果README-2.md存在会直接覆盖。mvREADME.mdREADME-2.md#将README.md移动到上一层目录mvREADME.md../README.md#-i交互式操作，如果目标文件存在则进行询问是否覆盖mv-iREADME.md../README.md#-f如果出现同名直接覆盖$mv-f1.txt2.txt```###openopen命令可在linux/mac具有可视化界面下进行文本编辑、打开应用程序等功能。```bash#在mac下用Finder打开当前目录open.#用默认应用程序打开文件openREADME.md#用默认编辑器打开文件open-eREADME.md#如果是一个URL用默认浏览器打开页面openhttps://github.com/MuYunyun/blog.git#指定某个应用程序打开某个文件,如果不指定文件默认直接打开程序open-a/Applications/Google\\Chrome.appREADME.md```###source在当前Shell环境中从指定文件读取和执行命令，通常用于重新执行环境。它有个别名.点操作符号。```bash#等价.~/.bash_profilesource~/.bash_profile```可以把它理解为`编程语言中的import`,java/python/js都有这个，就是用来导入文件。下面演示source用于shell脚本中util.sh```bash#!/bin/bashgetName(){echo"Linux"}```main.sh```bash#!/bin/bash#加载文件source./util.sh#这样就可以调用util文件中的函数了echo$(getName)```###tree生成目录树结构,通常用于描述项目结构。```bash#递归当前目录下所有文件并生成目录树tree#-I忽略某些目录tree-I"node_modules"#只显示目录tree-d#指定要递归的目录层级tree-L3```###ln将某一个文件在另外一个位置建立并产生同步的链接。当不同的2个目录需要同时引用某一个文件时此命令就派上用场了。>这个命令的应用场景:比如yarnlink*软链接也可以叫符号链接：*软链接，以路径的形式存在。类似于Windows操作系统中的快捷方式;*软链接可以跨文件系统,硬链接不可以;*软链接可以对一个不存在的文件名进行链接;*软链接可以对目录进行链接;*硬链接:*硬链接，以文件副本的形式存在。但不占用实际空间,从根本上而言就是同一个文件;*不允许给目录创建硬链接;*硬链接只有在同一个文件系统中才能创建;>理解:文件系统博主理解:比如在mac系统中装了个虚拟机,虚拟机里面跑了另外一个window系统,那此时mac和虚拟机里面的系统就是两个不同的文件系统。```bash#默认创建硬链接，修改README.md内容，a.md也会同步修改,修改a.md,README.md也会同步修改lnREADME.mda.md#-s创建软链接ln-sREADME.mda.md#如果删除了README.mda.md将失效#-f强制执行ln-fREADME.md./src/a.md```###file查看文件类型,比如文件、目录、二进制、符号链接等。```bashfileREADME.mdREADME.md:HTMLdocumenttext,UTF-8Unicodetext```###tar全称:`tapearchive`*tar[-j|-z][cv][-f建立的档案名]filename...打包与压缩*tar[-j|-z][tv][-f建立的档案名]查看档案*tar[-j|-z][xv][-f建立的档案名][-C目录]解压缩选项与参数：*-c:建立打包档案，可搭配-v来观察过程中被打包的档案名(filename)*-t:查看打包档案的内容含有那些档案*-x:解压缩的功能，可以搭配-C在特定的目录解开;-c、-t、-x不能同时出现在一串指令列中。*-j:透过bzip2的支持进行压缩/解压缩:此时档案名最好为*.tar.bz2*-z:透过gzip的支持进行压缩/解压缩:此时档案名最好为*.tar.gz*-v:在压缩/解压缩的过程中,将正在处理文件名显示出来*-ffilename:-f后面要立刻接被处理的档案名!建议-f单独写一个选项*-C目录:指定特定目录##系统管理###ping测试目标地址是否可连接、延迟度```bash#测试github.com连通性,按ctrl+C停止pinggithub.com#ping5次后断开ping-c5github.com#每5秒ping一次ping-i5github.com```###which查找某个命令存储在哪个位置,输出绝对路径,which会在环境变量$PATH设置的目录里去查找。注:可以通过echo$PATH查看设置的目录.```bashwhichtop#/usr/bin/top#打印多个命令whichpingtop```###shutdown将系统关机或重启操作。```bash#什么参数都不加，默认会在1分钟后关机$shutdown#在将系统的服务停掉之后就重新开机$shutdown-rnow#关闭系统并切断电源$shutdown-hnow#立即关机,实际上调用init0#把前一个关机或重启取消掉$shutdown-c#设定一个时间关机，"&"符号表示后台模式，让出CLI$shutdown-h05:33&$shutdown+5"5分钟后关机"#5分钟后关机，同时送出警告信息给登入用户：```###uptime```bash#当前系统运行的天数，小时，分钟(从上次开机起计算),当前系统登录用户数。一分钟、5分钟、15分钟平均负载,这3个值不能大于CPU个数，如果大于了说明系统负载高，性能低。uptime#13:25up2days,18:57,7users,loadaverages:2.062.062.15```###uname打印系统信息```bash#不带任何参数打印当前操作系统内核名称uname#Darwin,等价于uname-s#打印系统所有信息,cloud-2.local:网络节点主机名称,x86_64:主机的硬件架构名称uname-a#Darwincloud-2.local19.4.0DarwinKernelVersion19.4.0:WedMar422:28:40PST2020;root:xnu-6153.101.6~15/RELEASE_X86_64x86_64#打印主机的硬件架构名称uname-m#x86_64```###ifconfig配置或显示系统网卡的网络参数。```bash#显示所有网络参数信息ifconfig```###chmod修改文件或目录权限。>seehttps://github.com/xjh22222228/linux-manual#chmod.###lsof列出当前系统打开文件的工具```bash##打印所有打开文件的的列表lsof#查看指定端口被占用情况，(imeansIP)lsof-i:8080```###alias设置命令别名，用于简化较长的命令。```bash#列出所有已设置的别名alias#删除所有别名unalias-a#设置别名aliasll=\'ls-l\'```##系统进程###psps命令涵盖命令参数三大风格*Unix风格,`前面加单破折线`*BSD风格,全称伯克利软件发行版(Berkeleysoftwaredistribution),`前面不加破折线`*GNU风格,全称"Gnu\'sNotUnix",`前面加双破折线````bash#配合grep查询指定进程,-ameans:all,-fmeansfullps-af|grepnginx```##用户管理###chshchsh命令用于修改默认用户登录shell。修改后重新启动Shell即可生效（exit/logout）。```bash#必须使用完整路径，不能使用shell名chsh-s/bin/zsh```查看当前Shell```bashecho$SHELL#/bin/zsh```列出当前所有已安装的Shell```bashcat/etc/shells#/bin/bash#/bin/csh#/bin/dash#/bin/ksh#/bin/sh#/bin/tcsh#/bin/zsh```###users显示当前登录系统的所有用户的用户列表。```bashubuntu@ubuntu:~$usersubuntu```###last显示用户最近登录信息。```bashlast#指定显示条目数last-n1```###su切换到其他用户。```bash#切换到root身份sudosu```###whoami显示自身的用户名称```bashubuntu@ubuntu:~$whoamiubunturoot@ubuntu:/home/ubuntu#whoamiroot```##网络###curlcurl是一个非常强大的网络传输工具，利用URL规则在命令行下工作。|参数|描述||:------:|:----------------:||-H|设置请求头||-X|设置HTTP请求方法||--cookie|指定发送cookie||--retry|请求重试|>curl--help查询curl后可跟随的参数信息。##包管理###apt-getapt-get命令是DebianLinux发行版中的APT软件包管理工具。所有基于Debian的发行都使用这个包管理系统。```bash#安装一个docker软件$apt-getinstalldocker#卸载软件，保留配置文件$apt-getremovedocker#卸载软件并删除配置文件$apt-get–purgeremovedocker#更新所有已安装的软件包$apt-getupgrade#删除软件备份，主要用来释放空间$apt-getclean```##其它###clear用于清除当前终端所有信息，本质上只是向后翻了一页，往上滚动还能看到之前的操作信息>注：效果等用于`command+K`可以完全清除终端所有操作信息。```bashclear```###link*thanksfor[ReadLinux](https://github.com/xjh22222228/linux-manual).'},{name:"系统目录.md",path:"/RaspberryPi/linux/系统目录.md",type:"file",mdconf:{abbrlink:"n79kxl1r"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3851,extension:".md",relative:"/RaspberryPi/linux/系统目录.md",isEmpty:!1,content:"\x3c!--abbrlink:n79kxl1r--\x3e-[系统目录简介](#系统目录简介)-[系统启动必须](#系统启动必须)-[指令集合](#指令集合)-[外部文件管理](#外部文件管理)-[临时文件](#临时文件)-[账户](#账户)-[运行过程中使用](#运行过程中使用)-[扩展使用](#扩展使用)###系统目录简介####系统启动必须*`/boot`：存放的启动Linux时使用的内核文件，包括连接文件以及镜像文件。*`/etc`：存放所有的系统需要的配置文件和子目录列表，更改目录下的文件可能会导致系统不能启动。*`/lib`：存放基本代码库（比如c++库），其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。*`/sys`：这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统sysfs。sysfs文件系统集成了下面3种文件系统的信息：针对进程信息的proc文件系统、针对设备的devfs文件系统以及针对伪终端的devpts文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中。####指令集合*`/bin`：bin是Binaries(二进制文件)的缩写,存放着最常用的程序和指令。*`/sbin`：s是SuperUser的意思，是SuperuserBinaries(超级用户的二进制文件)的缩写，只有系统管理员能使用的程序和指令。####外部文件管理*`/dev`：Device(设备)的缩写,存放的是Linux的外部设备。注意：在Linux中访问设备和访问文件的方式是相同的。*`/media`：类windows的其他设备，例如U盘、光驱等等，识别后linux会把设备放到这个目录下。*`/mnt`：临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。####临时文件*`/run`：是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有/var/run目录，应该让它指向run。*`/lost+found`：一般情况下为空的，系统非法关机后，这里就存放一些文件。*`/tmp`：是temporary(临时)的缩写，这个目录是用来存放一些临时文件的。####账户*`/root`：系统管理员的用户主目录。*`/home`：用户的主目录，以用户的账号命名的。一般githubclone的文件放这里。*`/usr`：usr是unixsharedresources(共享资源)的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的programfiles目录。。*`/usr/bin`：系统用户使用的应用程序与指令。*`/usr/sbin`：超级用户使用的比较高级的管理程序和系统守护程序。*`/usr/src`：内核源代码默认的放置目录。####运行过程中使用*`/var`：是variable(变量)的缩写，存放经常修改的数据，比如程序运行的日志文件（/var/log目录下）。*`/proc`：proc是Processes(进程)的缩写，/proc是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。这个目录的内容不在硬盘上而是在内存里。####扩展使用*`/opt`：opt是optional(可选)的缩写，这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。*`/srv`：存放服务启动后需要提取的数据（不用服务器就是空）"}],type:"directory",size:19720},{name:"nginx",path:"/RaspberryPi/nginx",children:[{name:"README.md",path:"/RaspberryPi/nginx/README.md",type:"file",mdconf:{abbrlink:"oerb6f1d"},birthtime:"2022-01-16",mtime:"2022-01-16",size:770,extension:".md",relative:"/RaspberryPi/nginx/README.md",isEmpty:!1,content:"\x3c!--abbrlink:oerb6f1d--\x3e###nginxnode与nginx搭配使用,是因为nginx具有更加强大的静态文件处理能力,以及反向代理负载均衡(LoadBalance)。*`正向代理`:代理客户端(如vpn)*`反向代理`:代理服务器(使用Nginx实现负载均衡)其它用途:跨域###目录*配置文件目录/usr/local/etc/nginx/nginx.conf*默认配置文件目录/usr/local/etc/nginx/nginx.conf.default*根目录/usr/local/var/www###FAQ*Q:`[::]:443`中的`[::]:`的含义是什么?*A:用于IPv6，参考[官网](http://nginx.org/en/docs/http/ngx_http_core_module.html#listen)。###相关文章*[Nginx英文文档](https://nginx.org/en/docs/)*[Nginx中文文档](https://www.nginx.cn/doc/index.html)"},{name:"常用命令.md",path:"/RaspberryPi/nginx/常用命令.md",type:"file",mdconf:{abbrlink:"yq9jpwrw",title:"nginx 常用命令"},birthtime:"2022-01-16",mtime:"2022-01-16",size:3167,extension:".md",relative:"/RaspberryPi/nginx/常用命令.md",isEmpty:!1,content:'\x3c!--abbrlink:yq9jpwrwtitle:nginx常用命令--\x3e###nginx常用命令(ubuntu)```bashsudoaptupdate#安装Nginxsudoaptinstallnginx#设置开机启动sudosystemctlenablenginx#开启nginxsudosystemctlstartnginx#重启nginxsudosystemctlrestartnginx#nginx重新加载配置文件sudosystemctlreloadnginx#停止nginxsudosystemctlstopnginxsudoservicenginxstop#强制杀死nginxsudopkill-9nginx#Ubuntu上卸载nginx#删除除了配置文件以外的所有文件。sudoapt-getremovenginxnginx-common#删除所有与nginx有关的东西，包括配置文件。sudoapt-getpurgenginxnginx-common#在上面命令结束后执行，主要是删除与Nginx有关的且不再被使用的依赖包。sudoapt-getautoremove#删除两个主要的包。sudoapt-getremovenginx-fullnginx-common#查看版本nginx-v#检查配置文件是否正确sudonginx-t#查询nginx是否启动ps-ef|grepnginx```安装好以后,执行`sudosystemctlstatusnginx`,可以看到```nginx.service-Ahighperformancewebserverandareverseproxyserver...```###常用命令(Mac)```jssudobrewservicesstartnginx//启动nginx(8080端口)sudobrewservicesstopnginx//关闭nginxbrewservicesrestartnginx//重启nginx```>mac重启后需要重新跑一遍sudobrewservicesstopnginx、sudobrewservicesstartnginx###nginx配置文件初始化备份`nginx主配置文件路径`:/etc/nginx/nginx.conf。```bashuserwww-data;worker_processesauto;pid/run/nginx.pid;include/etc/nginx/modules-enabled/*.conf;events{worker_connections768;#multi_accepton;}http{###BasicSettings##sendfileon;tcp_nopushon;tcp_nodelayon;keepalive_timeout65;types_hash_max_size2048;#server_tokensoff;#server_names_hash_bucket_size64;#server_name_in_redirectoff;include/etc/nginx/mime.types;default_typeapplication/octet-stream;###SSLSettings##ssl_protocolsTLSv1TLSv1.1TLSv1.2TLSv1.3;#DroppingSSLv3,ref:POODLEssl_prefer_server_cipherson;###LoggingSettings##access_log/var/log/nginx/access.log;error_log/var/log/nginx/error.log;###GzipSettings##gzipon;#gzip_varyon;#gzip_proxiedany;#gzip_comp_level6;#gzip_buffers168k;#gzip_http_version1.1;#gzip_typestext/plaintext/cssapplication/jsonapplication/javascripttext/xmlapplication/xmlapplication/xml+rsstext/javascript;###VirtualHostConfigs##include/etc/nginx/conf.d/*.conf;include/etc/nginx/sites-enabled/*;}#mail{##Seesampleauthenticationscriptat:##http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript###auth_httplocalhost/auth.php;##pop3_capabilities"TOP""USER";##imap_capabilities"IMAP4rev1""UIDPLUS";##server{#listenlocalhost:110;#protocolpop3;#proxyon;#}##server{#listenlocalhost:143;#protocolimap;#proxyon;#}#}```'}],type:"directory",size:3937},{name:"ssh.md",path:"/RaspberryPi/ssh.md",type:"file",mdconf:{abbrlink:"iti5ty8q"},birthtime:"2022-01-16",mtime:"2022-01-16",size:327,extension:".md",relative:"/RaspberryPi/ssh.md",isEmpty:!1,content:"\x3c!--abbrlink:iti5ty8q--\x3e###SSH```bash#登入腾讯云服务器。[服务器地址](https://console.cloud.tencent.com/lighthouse/instance/index)sshubuntu@81.69.252.246#登入树莓派sshubuntu@frp.muyunyun.cn-p6000#退出sshexit+enter```###快捷命令locatenginx.conf:快捷查找文件位置"},{name:"踩坑方案记录&环境.md",path:"/RaspberryPi/踩坑方案记录&环境.md",type:"file",mdconf:{abbrlink:"dckn3sfe"},birthtime:null,size:2225,extension:".md",relative:"/RaspberryPi/踩坑方案记录&环境.md",isEmpty:!1,content:'\x3c!--abbrlink:dckn3sfe--\x3e###查询温度```bashcat/sys/class/thermal/thermal_zone0/temp#43816```笔者发现ubuntu系统登入页面时，自动会显示温度信息:```bashWelcometoUbuntu20.04.3LTS(GNU/Linux5.4.0-1045-raspiaarch64)*Documentation:https://help.ubuntu.com*Management:https://landscape.canonical.com*Support:https://ubuntu.com/advantageSysteminformationasofWedNov2410:39:02UTC2021Systemload:0.42Usageof/:36.9%of28.96GBMemoryusage:14%Swapusage:0%Temperature:43.8C<-----------------HereProcesses:178Usersloggedin:0IPv4addressforbr-b23c54f46da5:172.18.0.1IPv4addressfordocker0:172.17.0.1IPv4addressforeth0:192.168.1.3```###树莓派连接显示器不亮屏的解决方案笔者参考[树莓派连接显示器不亮屏的解决方案](https://www.cnblogs.com/wirehome/p/10298395.html)，最后屏幕得以在7寸(1024*600)屏幕显示成功。![](http://with.muyunyun.cn/2d694194975c595f2da927a677bfd572.jpg)方法是需要在烧录的镜像系统中的`config.txt`补充以下内容:```bashhdmi_force_hotplug=1config_hdmi_boost=4hdmi_group=2hdmi_mode=9hdmi_drive=2hdmi_ignore_edid=0xa5000080disable_overscan=1```###暂未成功的方案####树莓派连接手机热点*[树莓派连接手机热点](https://blog.csdn.net/weixin_44415549/article/details/105415371)*[树莓派没有路由器,连接手机热点使用](https://www.geek-share.com/detail/2809069950.html)*步骤一:boot盘新建一个ssh空文件。*步骤二:boot盘新建一个wpa_supplicant.conf，里面代码为```bashcountry=GBctrl_interface=DIR=/var/run/wpa_supplicantGROUP=netdevupdate_config=1network={ssid=""psk=""priority=99}```>ssid写热点名称，psk写热点密码。*步骤三:手机下载远程服务软件`Termius`。####树莓派无线连接wifi*[树莓派ubuntu20.04链接wifi](https://blog.csdn.net/wei_love_2017/article/details/108877102)'}],type:"directory",size:52691}]},17862:e=>{"use strict";e.exports=function(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}},19768:(e,t,n)=>{"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}n.d(t,{lX:()=>f,ob:()=>s,Hp:()=>u});function l(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const i=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"==typeof t||"object"==typeof n){var r=l(t),a=l(n);return r!==t||a!==n?e(r,a):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1};function s(e,t,n,l){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",a=t.indexOf("#");-1!==a&&(r=t.substr(a),t=t.substr(0,a));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=r({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),l?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],l=t&&t.split("/")||[],i=e&&a(e),s=t&&a(t),u=i||s;if(e&&a(e)?l=r:r.length&&(l.pop(),l=l.concat(r)),!l.length)return"/";if(l.length){var p=l[l.length-1];n="."===p||".."===p||""===p}else n=!1;for(var c=0,m=l.length;m>=0;m--){var d=l[m];"."===d?o(l,m):".."===d?(o(l,m),c++):c&&(o(l,m),c--)}if(!u)for(;c--;c)l.unshift("..");!u||""===l[0]||l[0]&&a(l[0])||l.unshift("");var h=l.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h}(i.pathname,l.pathname)):i.pathname=l.pathname:i.pathname||(i.pathname="/"),i}function u(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&i(e.state,t.state)}var p=!("undefined"==typeof window||!window.document||!window.document.createElement);function c(e,t){t(window.confirm(e))}var m="popstate",d="hashchange";function h(){try{return window.history.state||{}}catch(e){return{}}}function f(e){void 0===e&&(e={}),p||function(e,t){throw new Error("Invariant failed")}();var t,n,a=window.history,o=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,l=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,u=i.forceRefresh,f=void 0!==u&&u,k=i.getUserConfirmation,b=void 0===k?c:k,g=i.keyLength,y=void 0===g?6:g,v=e.basename?function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}("/"===(n=e.basename).charAt(0)?n:"/"+n):"";function N(e){var t=e||{},n=t.key,r=t.state,a=window.location,o=a.pathname+a.search+a.hash;return v&&(o=function(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}(o,v)),s(o,r,n)}function w(){return Math.random().toString(36).substr(2,y)}var O,j,x=(O=null,j=[],{setPrompt:function(e){return O=e,function(){O===e&&(O=null)}},confirmTransitionTo:function(e,t,n,r){if(null!=O){var a="function"==typeof O?O(e,t):O;"string"==typeof a?"function"==typeof n?n(a,r):r(!0):r(!1!==a)}else r(!0)},appendListener:function(e){var t=!0;function n(){t&&e.apply(void 0,arguments)}return j.push(n),function(){t=!1,j=j.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];j.forEach((function(e){return e.apply(void 0,t)}))}});function S(e){r(B,e),B.length=a.length,x.notifyListeners(B.location,B.action)}function C(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||D(N(e.state))}function P(){D(N(h()))}var E=!1;function D(e){E?(E=!1,S()):x.confirmTransitionTo(e,"POP",b,(function(t){t?S({action:"POP",location:e}):function(e){var t=B.location,n=_.indexOf(t.key);-1===n&&(n=0);var r=_.indexOf(e.key);-1===r&&(r=0);var a=n-r;a&&(E=!0,A(a))}(e)}))}var T=N(h()),_=[T.key];function M(e){return v+function(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}(e)}function A(e){a.go(e)}var L=0;function R(e){1===(L+=e)&&1===e?(window.addEventListener(m,C),l&&window.addEventListener(d,P)):0===L&&(window.removeEventListener(m,C),l&&window.removeEventListener(d,P))}var I=!1,B={length:a.length,action:"POP",location:T,createHref:M,push:function(e,t){var n="PUSH",r=s(e,t,w(),B.location);x.confirmTransitionTo(r,n,b,(function(e){if(e){var t=M(r),l=r.key,i=r.state;if(o)if(a.pushState({key:l,state:i},null,t),f)window.location.href=t;else{var s=_.indexOf(B.location.key),u=_.slice(0,s+1);u.push(r.key),_=u,S({action:n,location:r})}else window.location.href=t}}))},replace:function(e,t){var n="REPLACE",r=s(e,t,w(),B.location);x.confirmTransitionTo(r,n,b,(function(e){if(e){var t=M(r),l=r.key,i=r.state;if(o)if(a.replaceState({key:l,state:i},null,t),f)window.location.replace(t);else{var s=_.indexOf(B.location.key);-1!==s&&(_[s]=r.key),S({action:n,location:r})}else window.location.replace(t)}}))},go:A,goBack:function(){A(-1)},goForward:function(){A(1)},block:function(e){void 0===e&&(e=!1);var t=x.setPrompt(e);return I||(R(1),I=!0),function(){return I&&(I=!1,R(-1)),t()}},listen:function(e){var t=x.appendListener(e);return R(1),function(){R(-1),t()}}};return B}},8679:e=>{"use strict";var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r=Object.defineProperty,a=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,i=Object.getPrototypeOf,s=i&&i(Object);e.exports=function e(u,p,c){if("string"!=typeof p){if(s){var m=i(p);m&&m!==s&&e(u,m,c)}var d=a(p);o&&(d=d.concat(o(p)));for(var h=0;h<d.length;++h){var f=d[h];if(!(t[f]||n[f]||c&&c[f])){var k=l(p,f);try{r(u,f,k)}catch(e){}}}return u}return u}},41143:e=>{"use strict";e.exports=function(e,t,n,r,a,o,l,i){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,o,l,i],p=0;(s=new Error(t.replace(/%s/g,(function(){return u[p++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},11744:e=>{e.exports={footer:"footer-3bMnZ",powered_by:"powered_by-3uku2","footer-inlineCollapsed":"footer-inlineCollapsed-36FSg",uv_count:"uv_count-2H9jX",pv_count:"pv_count-2aT8U",split:"split-1Av76"}},65567:e=>{e.exports={logo:"logo-3N0en",header:"header-1gmzg",wrapper:"wrapper-2N6hV",titleLink:"titleLink-dlfoI",search:"search-1GSPC",select:"select-1WfPk",rightArea:"rightArea-1Nmk9",sun:"sun-YphCk",moon:"moon-tfTyh","github-corner":"github-corner-2qlpx","octo-arm":"octo-arm-3Cvs0","octocat-wave":"octocat-wave-2eV5l",pageTitle:"pageTitle-2xrxX",darkMode:"darkMode-1k_0o","no-dark-mode":"no-dark-mode-loQlc"}},69833:e=>{e.exports={icon:"icon-1gL2B"}},34666:e=>{e.exports={menu:"menu-2A6kG","menu-item":"menu-item-74Aq4","menu-item-selected":"menu-item-selected-3NeT_","menu-item-title":"menu-item-title-35xSg","menu-icon":"menu-icon-2hR1p",submenu:"submenu-ZMhaw","submenu-title":"submenu-title-1zdyM","submenu-arrow":"submenu-arrow-1L8LG","submenu-arrow-open":"submenu-arrow-open-1kxtu","submenu-selected":"submenu-selected-2z_Rl","menu-inline":"menu-inline-2CIsJ","menu-inline-collapsed":"menu-inline-collapsed-zUWmC","submenu-title-field":"submenu-title-field-39IOZ","collapse-transition":"collapse-transition-2vfEq",toggle:"toggle-37Mvs","toggle-icon":"toggle-icon-1NITH","toggle-icon-close":"toggle-icon-close-2YK97","toggle-collapsed":"toggle-collapsed-IZ_p_"}},66488:e=>{e.exports={noMatch:"noMatch-jZUp6"}},15780:e=>{e.exports={search:"search-1fFa2",panel:"panel-2NIPC",searchItem:"searchItem-3tBca",title:"title-2QWVc",content:"content-2ojeW"}},790:()=>{},61881:e=>{e.exports={wrapper:"wrapper-3YekU",wrapperContent:"wrapperContent-2knfV",pageHeader:"pageHeader-jkqi3",pageFooter:"pageFooter-1sm0M",position:"position-2Sc0B",icon:"icon-1a9VN",menuWrapper:"menuWrapper-3Sahv","menuWrapper-inlineCollapsed":"menuWrapper-inlineCollapsed-IW7Gq",affixPlaceholder:"affixPlaceholder-3EPHM",affixWrapper:"affixWrapper-1EOPI",menuMask:"menuMask-1g9U9",content:"content-1sWx6","content-fullpage":"content-fullpage-3w43-",contentNoMenu:"contentNoMenu-1TZDn"}},25017:()=>{},55180:()=>{},38395:e=>{e.exports={frame:"frame-3pxUi"}},74455:e=>{e.exports={markdown:"markdown-3RaPQ",pageTitle:"pageTitle-2vq8V"}},27418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var l,i,s=a(e),u=1;u<arguments.length;u++){for(var p in l=Object(arguments[u]))n.call(l,p)&&(s[p]=l[p]);if(t){i=t(l);for(var c=0;c<i.length;c++)r.call(l,i[c])&&(s[i[c]]=l[i[c]])}}return s}},14779:(e,t,n)=>{var r=n(96173);e.exports=function e(t,n,a){return r(n)||(a=n||a,n=[]),a=a||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return p(e,t)}(t,n):r(t)?function(t,n,r){for(var a=[],o=0;o<t.length;o++)a.push(e(t[o],n,r).source);return p(new RegExp("(?:"+a.join("|")+")",c(r)),n)}(t,n,a):function(e,t,n){return m(o(e,n),t,n)}(t,n,a)},e.exports.parse=o,e.exports.compile=function(e,t){return i(o(e,t),t)},e.exports.tokensToFunction=i,e.exports.tokensToRegExp=m;var a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,l=0,i="",p=t&&t.delimiter||"/";null!=(n=a.exec(e));){var c=n[0],m=n[1],d=n.index;if(i+=e.slice(l,d),l=d+c.length,m)i+=m[1];else{var h=e[l],f=n[2],k=n[3],b=n[4],g=n[5],y=n[6],v=n[7];i&&(r.push(i),i="");var N=null!=f&&null!=h&&h!==f,w="+"===y||"*"===y,O="?"===y||"*"===y,j=n[2]||p,x=b||g;r.push({name:k||o++,prefix:f||"",delimiter:j,optional:O,repeat:w,partial:N,asterisk:!!v,pattern:x?u(x):v?".*":"[^"+s(j)+"]+?"})}}return l<e.length&&(i+=e.substr(l)),i&&r.push(i),r}function l(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function i(e,t){for(var n=new Array(e.length),a=0;a<e.length;a++)"object"==typeof e[a]&&(n[a]=new RegExp("^(?:"+e[a].pattern+")$",c(t)));return function(t,a){for(var o="",i=t||{},s=(a||{}).pretty?l:encodeURIComponent,u=0;u<e.length;u++){var p=e[u];if("string"!=typeof p){var c,m=i[p.name];if(null==m){if(p.optional){p.partial&&(o+=p.prefix);continue}throw new TypeError('Expected "'+p.name+'" to be defined')}if(r(m)){if(!p.repeat)throw new TypeError('Expected "'+p.name+'" to not repeat, but received `'+JSON.stringify(m)+"`");if(0===m.length){if(p.optional)continue;throw new TypeError('Expected "'+p.name+'" to not be empty')}for(var d=0;d<m.length;d++){if(c=s(m[d]),!n[u].test(c))throw new TypeError('Expected all "'+p.name+'" to match "'+p.pattern+'", but received `'+JSON.stringify(c)+"`");o+=(0===d?p.prefix:p.delimiter)+c}}else{if(c=p.asterisk?encodeURI(m).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(m),!n[u].test(c))throw new TypeError('Expected "'+p.name+'" to match "'+p.pattern+'", but received "'+c+'"');o+=p.prefix+c}}else o+=p}return o}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function p(e,t){return e.keys=t,e}function c(e){return e&&e.sensitive?"":"i"}function m(e,t,n){r(t)||(n=t||n,t=[]);for(var a=(n=n||{}).strict,o=!1!==n.end,l="",i=0;i<e.length;i++){var u=e[i];if("string"==typeof u)l+=s(u);else{var m=s(u.prefix),d="(?:"+u.pattern+")";t.push(u),u.repeat&&(d+="(?:"+m+d+")*"),l+=d=u.optional?u.partial?m+"("+d+")?":"(?:"+m+"("+d+"))?":m+"("+d+")"}}var h=s(n.delimiter||"/"),f=l.slice(-h.length)===h;return a||(l=(f?l.slice(0,-h.length):l)+"(?:"+h+"(?=$))?"),l+=o?"$":a&&f?"":"(?="+h+"|$)",p(new RegExp("^"+l,c(n)),t)}},96173:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},92703:(e,t,n)=>{"use strict";var r=n(50414);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,l){if(l!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},45697:(e,t,n)=>{e.exports=n(92703)()},50414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},38698:(e,t,n)=>{"use strict";var r=n(27418),a=n(67294);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=60106,i=60107,s=60108,u=60114,p=60109,c=60110,m=60112,d=60113,h=60120,f=60115,k=60116,b=60121,g=60117,y=60119,v=60129,N=60131;if("function"==typeof Symbol&&Symbol.for){var w=Symbol.for;l=w("react.portal"),i=w("react.fragment"),s=w("react.strict_mode"),u=w("react.profiler"),p=w("react.provider"),c=w("react.context"),m=w("react.forward_ref"),d=w("react.suspense"),h=w("react.suspense_list"),f=w("react.memo"),k=w("react.lazy"),b=w("react.block"),g=w("react.fundamental"),y=w("react.scope"),v=w("react.debug_trace_mode"),N=w("react.legacy_hidden")}function O(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case i:return"Fragment";case l:return"Portal";case u:return"Profiler";case s:return"StrictMode";case d:return"Suspense";case h:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case c:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case f:return O(e.type);case b:return O(e._render);case k:t=e._payload,e=e._init;try{return O(e(t))}catch(e){}}return null}var j=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x={};function S(e,t){for(var n=0|e._threadCount;n<=t;n++)e[n]=e._currentValue2,e._threadCount=n+1}for(var C=new Uint16Array(16),P=0;15>P;P++)C[P]=P+1;C[15]=0;var E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D=Object.prototype.hasOwnProperty,T={},_={};function M(e){return!!D.call(_,e)||!D.call(T,e)&&(E.test(e)?_[e]=!0:(T[e]=!0,!1))}function A(e,t,n,r,a,o,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){L[e]=new A(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];L[t]=new A(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){L[e]=new A(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){L[e]=new A(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){L[e]=new A(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){L[e]=new A(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){L[e]=new A(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){L[e]=new A(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){L[e]=new A(e,5,!1,e.toLowerCase(),null,!1,!1)}));var R=/[\-:]([a-z])/g;function I(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(R,I);L[t]=new A(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(R,I);L[t]=new A(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(R,I);L[t]=new A(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){L[e]=new A(e,1,!1,e.toLowerCase(),null,!1,!1)})),L.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){L[e]=new A(e,1,!1,e.toLowerCase(),null,!0,!0)}));var B=/["'&<>]/;function z(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=B.exec(e);if(t){var n,r="",a=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==n&&(r+=e.substring(a,n)),a=n+1,r+=t}e=a!==n?r+e.substring(a,n):r}return e}function F(e,t){var n,r=L.hasOwnProperty(e)?L[e]:null;return(n="style"!==e)&&(n=null!==r?0===r.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),n||function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return!1}}(e,t,n))return!0;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,r)?"":null!==r?(e=r.attributeName,3===(n=r.type)||4===n&&!0===t?e+'=""':(r.sanitizeURL&&(t=""+t),e+'="'+z(t)+'"')):M(e)?e+'="'+z(t)+'"':""}var q="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},H=null,X=null,Y=null,U=!1,W=!1,V=null,G=0;function $(){if(null===H)throw Error(o(321));return H}function J(){if(0<G)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function Q(){return null===Y?null===X?(U=!1,X=Y=J()):(U=!0,Y=X):null===Y.next?(U=!1,Y=Y.next=J()):(U=!0,Y=Y.next),Y}function K(e,t,n,r){for(;W;)W=!1,G+=1,Y=null,n=e(t,r);return Z(),n}function Z(){H=null,W=!1,X=null,G=0,Y=V=null}function ee(e,t){return"function"==typeof t?t(e):t}function te(e,t,n){if(H=$(),Y=Q(),U){var r=Y.queue;if(t=r.dispatch,null!==V&&void 0!==(n=V.get(r))){V.delete(r),r=Y.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return Y.memoizedState=r,[r,t]}return[Y.memoizedState,t]}return e=e===ee?"function"==typeof t?t():t:void 0!==n?n(t):t,Y.memoizedState=e,e=(e=Y.queue={last:null,dispatch:null}).dispatch=re.bind(null,H,e),[Y.memoizedState,e]}function ne(e,t){if(H=$(),t=void 0===t?null:t,null!==(Y=Q())){var n=Y.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var a=0;a<r.length&&a<t.length;a++)if(!q(t[a],r[a])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),Y.memoizedState=[e,t],e}function re(e,t,n){if(!(25>G))throw Error(o(301));if(e===H)if(W=!0,e={action:n,next:null},null===V&&(V=new Map),void 0===(n=V.get(t)))V.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function ae(){}var oe=null,le={readContext:function(e){var t=oe.threadID;return S(e,t),e[t]},useContext:function(e){$();var t=oe.threadID;return S(e,t),e[t]},useMemo:ne,useReducer:te,useRef:function(e){H=$();var t=(Y=Q()).memoizedState;return null===t?(e={current:e},Y.memoizedState=e):t},useState:function(e){return te(ee,e)},useLayoutEffect:function(){},useCallback:function(e,t){return ne((function(){return e}),t)},useImperativeHandle:ae,useEffect:ae,useDebugValue:ae,useDeferredValue:function(e){return $(),e},useTransition:function(){return $(),[function(e){e()},!1]},useOpaqueIdentifier:function(){return(oe.identifierPrefix||"")+"R:"+(oe.uniqueID++).toString(36)},useMutableSource:function(e,t){return $(),t(e._source)}},ie="http://www.w3.org/1999/xhtml";function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ue={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},pe=r({menuitem:!0},ue),ce={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];Object.keys(ce).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ce[t]=ce[e]}))}));var de=/([A-Z])/g,he=/^ms-/,fe=a.Children.toArray,ke=j.ReactCurrentDispatcher,be={listing:!0,pre:!0,textarea:!0},ge=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ye={},ve={},Ne=Object.prototype.hasOwnProperty,we={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Oe(e,t){if(void 0===e)throw Error(o(152,O(t)||"Component"))}var je=function(){function e(e,t,n){a.isValidElement(e)?e.type!==i?e=[e]:(e=e.props.children,e=a.isValidElement(e)?[e]:fe(e)):e=fe(e),e={type:null,domNamespace:ie,children:e,childIndex:0,context:x,footer:""};var r=C[0];if(0===r){var l=C,s=2*(r=l.length);if(!(65536>=s))throw Error(o(304));var u=new Uint16Array(s);for(u.set(l),(C=u)[0]=r+1,l=r;l<s-1;l++)C[l]=l+1;C[s-1]=0}else C[0]=C[r];this.threadID=r,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[],this.uniqueID=0,this.identifierPrefix=n&&n.identifierPrefix||""}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;C[e]=C[0],C[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,r=this.threadID;S(n,r);var a=n[r];this.contextStack[t]=n,this.contextValueStack[t]=a,n[r]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=n},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=oe;oe=this;var n=ke.current;ke.current=le;try{for(var r=[""],a=!1;r[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var l=this.threadID;C[l]=C[0],C[0]=l;break}var i=this.stack[this.stack.length-1];if(a||i.childIndex>=i.children.length){var s=i.footer;if(""!==s&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===i.type)this.currentSelectValue=null;else if(null!=i.type&&null!=i.type.type&&i.type.type.$$typeof===p)this.popProvider(i.type);else if(i.type===d){this.suspenseDepth--;var u=r.pop();if(a){a=!1;var c=i.fallbackFrame;if(!c)throw Error(o(303));this.stack.push(c),r[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}r[this.suspenseDepth]+=u}r[this.suspenseDepth]+=s}else{var m=i.children[i.childIndex++],h="";try{h+=this.render(m,i.context,i.domNamespace)}catch(e){if(null!=e&&"function"==typeof e.then)throw Error(o(294));throw e}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=h}}return r[0]}finally{ke.current=n,oe=t,Z()}},t.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""==(n=""+e)?"":this.makeStaticMarkup?z(n):this.previousWasTextNode?"\x3c!-- --\x3e"+z(n):(this.previousWasTextNode=!0,z(n));if(e=(t=function(e,t,n){function l(a,l){var i=l.prototype&&l.prototype.isReactComponent,s=function(e,t,n,r){if(r&&"object"==typeof(r=e.contextType)&&null!==r)return S(r,n),r[n];if(e=e.contextTypes){for(var a in n={},e)n[a]=t[a];t=n}else t=x;return t}(l,t,n,i),u=[],p=!1,c={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===u)return null},enqueueReplaceState:function(e,t){p=!0,u=[t]},enqueueSetState:function(e,t){if(null===u)return null;u.push(t)}};if(i){if(i=new l(a.props,s,c),"function"==typeof l.getDerivedStateFromProps){var m=l.getDerivedStateFromProps.call(null,a.props,i.state);null!=m&&(i.state=r({},i.state,m))}}else if(H={},i=l(a.props,s,c),null==(i=K(l,a.props,i,s))||null==i.render)return void Oe(e=i,l);if(i.props=a.props,i.context=s,i.updater=c,void 0===(c=i.state)&&(i.state=c=null),"function"==typeof i.UNSAFE_componentWillMount||"function"==typeof i.componentWillMount)if("function"==typeof i.componentWillMount&&"function"!=typeof l.getDerivedStateFromProps&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&"function"!=typeof l.getDerivedStateFromProps&&i.UNSAFE_componentWillMount(),u.length){c=u;var d=p;if(u=null,p=!1,d&&1===c.length)i.state=c[0];else{m=d?c[0]:i.state;var h=!0;for(d=d?1:0;d<c.length;d++){var f=c[d];null!=(f="function"==typeof f?f.call(i,m,a.props,s):f)&&(h?(h=!1,m=r({},m,f)):r(m,f))}i.state=m}}else u=null;if(Oe(e=i.render(),l),"function"==typeof i.getChildContext&&"object"==typeof(a=l.childContextTypes)){var k=i.getChildContext();for(var b in k)if(!(b in a))throw Error(o(108,O(l)||"Unknown",b))}k&&(t=r({},t,k))}for(;a.isValidElement(e);){var i=e,s=i.type;if("function"!=typeof s)break;l(i,s)}return{child:e,context:t}}(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!a.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((n=e.$$typeof)===l)throw Error(o(257));throw Error(o(258,n.toString()))}return e=fe(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}var b=e.type;if("string"==typeof b)return this.renderDOM(e,t,n);switch(b){case N:case v:case s:case u:case h:case i:return e=fe(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case d:throw Error(o(294));case y:throw Error(o(343))}if("object"==typeof b&&null!==b)switch(b.$$typeof){case m:H={};var w=b.render(e.props,e.ref);return w=K(b.render,e.props,w,e.ref),w=fe(w),this.stack.push({type:null,domNamespace:n,children:w,childIndex:0,context:t,footer:""}),"";case f:return e=[a.createElement(b.type,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case p:return n={type:e,domNamespace:n,children:b=fe(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case c:b=e.type,w=e.props;var j=this.threadID;return S(b,j),b=fe(w.children(b[j])),this.stack.push({type:e,domNamespace:n,children:b,childIndex:0,context:t,footer:""}),"";case g:throw Error(o(338));case k:return b=(w=(b=e.type)._init)(b._payload),e=[a.createElement(b,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}throw Error(o(130,null==b?b:typeof b,""))},t.renderDOM=function(e,t,n){var l=e.type.toLowerCase();if(n===ie&&se(l),!ye.hasOwnProperty(l)){if(!ge.test(l))throw Error(o(65,l));ye[l]=!0}var i=e.props;if("input"===l)i=r({type:void 0},i,{defaultChecked:void 0,defaultValue:void 0,value:null!=i.value?i.value:i.defaultValue,checked:null!=i.checked?i.checked:i.defaultChecked});else if("textarea"===l){var s=i.value;if(null==s){s=i.defaultValue;var u=i.children;if(null!=u){if(null!=s)throw Error(o(92));if(Array.isArray(u)){if(!(1>=u.length))throw Error(o(93));u=u[0]}s=""+u}null==s&&(s="")}i=r({},i,{value:void 0,children:""+s})}else if("select"===l)this.currentSelectValue=null!=i.value?i.value:i.defaultValue,i=r({},i,{value:void 0});else if("option"===l){u=this.currentSelectValue;var p=function(e){if(null==e)return e;var t="";return a.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(i.children);if(null!=u){var c=null!=i.value?i.value+"":p;if(s=!1,Array.isArray(u)){for(var m=0;m<u.length;m++)if(""+u[m]===c){s=!0;break}}else s=""+u===c;i=r({selected:void 0,children:void 0},i,{selected:s,children:p})}}if(s=i){if(pe[l]&&(null!=s.children||null!=s.dangerouslySetInnerHTML))throw Error(o(137,l));if(null!=s.dangerouslySetInnerHTML){if(null!=s.children)throw Error(o(60));if("object"!=typeof s.dangerouslySetInnerHTML||!("__html"in s.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=s.style&&"object"!=typeof s.style)throw Error(o(62))}s=i,u=this.makeStaticMarkup,p=1===this.stack.length,c="<"+e.type;e:if(-1===l.indexOf("-"))m="string"==typeof s.is;else switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":m=!1;break e;default:m=!0}for(N in s)if(Ne.call(s,N)){var d=s[N];if(null!=d){if("style"===N){var h=void 0,f="",k="";for(h in d)if(d.hasOwnProperty(h)){var b=0===h.indexOf("--"),g=d[h];if(null!=g){if(b)var y=h;else if(y=h,ve.hasOwnProperty(y))y=ve[y];else{var v=y.replace(de,"-$1").toLowerCase().replace(he,"-ms-");y=ve[y]=v}f+=k+y+":",k=h,f+=b=null==g||"boolean"==typeof g||""===g?"":b||"number"!=typeof g||0===g||ce.hasOwnProperty(k)&&ce[k]?(""+g).trim():g+"px",k=";"}}d=f||null}h=null,m?we.hasOwnProperty(N)||(h=M(h=N)&&null!=d?h+'="'+z(d)+'"':""):h=F(N,d),h&&(c+=" "+h)}}u||p&&(c+=' data-reactroot=""');var N=c;s="",ue.hasOwnProperty(l)?N+="/>":(N+=">",s="</"+e.type+">");e:{if(null!=(u=i.dangerouslySetInnerHTML)){if(null!=u.__html){u=u.__html;break e}}else if("string"==typeof(u=i.children)||"number"==typeof u){u=z(u);break e}u=null}return null!=u?(i=[],be.hasOwnProperty(l)&&"\n"===u.charAt(0)&&(N+="\n"),N+=u):i=fe(i.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?se(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:l,children:i,childIndex:0,context:t,footer:s}),this.previousWasTextNode=!1,N},e}();t.renderToString=function(e,t){e=new je(e,!1,t);try{return e.read(1/0)}finally{e.destroy()}}},64448:(e,t,n)=>{"use strict";var r=n(67294),a=n(27418),o=n(63840);function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(l(227));var i=new Set,s={};function u(e,t){p(e,t),p(e+"Capture",t)}function p(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,h={},f={};function k(e,t,n,r,a,o,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){b[e]=new k(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];b[t]=new k(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){b[e]=new k(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){b[e]=new k(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){b[e]=new k(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){b[e]=new k(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){b[e]=new k(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){b[e]=new k(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){b[e]=new k(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,n,r){var a=b.hasOwnProperty(t)?b[t]:null;(null!==a?0===a.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(f,e)||!d.call(h,e)&&(m.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);b[t]=new k(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);b[t]=new k(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);b[t]=new k(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){b[e]=new k(e,1,!1,e.toLowerCase(),null,!1,!1)})),b.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){b[e]=new k(e,1,!1,e.toLowerCase(),null,!0,!0)}));var N=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,O=60106,j=60107,x=60108,S=60114,C=60109,P=60110,E=60112,D=60113,T=60120,_=60115,M=60116,A=60121,L=60128,R=60129,I=60130,B=60131;if("function"==typeof Symbol&&Symbol.for){var z=Symbol.for;w=z("react.element"),O=z("react.portal"),j=z("react.fragment"),x=z("react.strict_mode"),S=z("react.profiler"),C=z("react.provider"),P=z("react.context"),E=z("react.forward_ref"),D=z("react.suspense"),T=z("react.suspense_list"),_=z("react.memo"),M=z("react.lazy"),A=z("react.block"),z("react.scope"),L=z("react.opaque.id"),R=z("react.debug_trace_mode"),I=z("react.offscreen"),B=z("react.legacy_hidden")}var F,q="function"==typeof Symbol&&Symbol.iterator;function H(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=q&&e[q]||e["@@iterator"])?e:null}function X(e){if(void 0===F)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var Y=!1;function U(e,t){if(!e||Y)return"";Y=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var a=e.stack.split("\n"),o=r.stack.split("\n"),l=a.length-1,i=o.length-1;1<=l&&0<=i&&a[l]!==o[i];)i--;for(;1<=l&&0<=i;l--,i--)if(a[l]!==o[i]){if(1!==l||1!==i)do{if(l--,0>--i||a[l]!==o[i])return"\n"+a[l].replace(" at new "," at ")}while(1<=l&&0<=i);break}}}finally{Y=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?X(e):""}function W(e){switch(e.tag){case 5:return X(e.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return U(e.type,!1);case 11:return U(e.type.render,!1);case 22:return U(e.type._render,!1);case 1:return U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case j:return"Fragment";case O:return"Portal";case S:return"Profiler";case x:return"StrictMode";case D:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case _:return V(e.type);case A:return V(e._render);case M:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function G(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function le(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(l(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(l(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(l(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ue(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function pe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var ce="http://www.w3.org/1999/xhtml";function me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var he,fe,ke=(fe=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((he=he||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=he.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return fe(e,t)}))}:fe);function be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ye=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function Ne(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ge).forEach((function(e){ye.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]}))}));var we=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oe(e,t){if(t){if(we[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(l(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(l(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(l(62))}}function je(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Pe=null;function Ee(e){if(e=Kr(e)){if("function"!=typeof Se)throw Error(l(280));var t=e.stateNode;t&&(t=ea(t),Se(e.stateNode,e.type,t))}}function De(e){Ce?Pe?Pe.push(e):Pe=[e]:Ce=e}function Te(){if(Ce){var e=Ce,t=Pe;if(Pe=Ce=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function _e(e,t){return e(t)}function Me(e,t,n,r,a){return e(t,n,r,a)}function Ae(){}var Le=_e,Re=!1,Ie=!1;function Be(){null===Ce&&null===Pe||(Ae(),Te())}function ze(e,t){var n=e.stateNode;if(null===n)return null;var r=ea(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(l(231,t,typeof n));return n}var Fe=!1;if(c)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(fe){Fe=!1}function He(e,t,n,r,a,o,l,i,s){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var Xe=!1,Ye=null,Ue=!1,We=null,Ve={onError:function(e){Xe=!0,Ye=e}};function Ge(e,t,n,r,a,o,l,i,s){Xe=!1,Ye=null,He.apply(Ve,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Qe(e){if($e(e)!==e)throw Error(l(188))}function Ke(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Ze,et,tt,nt,rt=!1,at=[],ot=null,lt=null,it=null,st=new Map,ut=new Map,pt=[],ct="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mt(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function dt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":it=null;break;case"pointerover":case"pointerout":st.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function ht(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e=mt(t,n,r,a,o),null!==t&&null!==(t=Kr(t))&&et(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function ft(e){var t=Qr(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void nt(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){tt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Kr(n))&&et(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){kt(e)&&n.delete(t)}function gt(){for(rt=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=Kr(e.blockedOn))&&Ze(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==ot&&kt(ot)&&(ot=null),null!==lt&&kt(lt)&&(lt=null),null!==it&&kt(it)&&(it=null),st.forEach(bt),ut.forEach(bt)}function yt(e,t){e.blockedOn===t&&(e.blockedOn=null,rt||(rt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,gt)))}function vt(e){function t(t){return yt(t,e)}if(0<at.length){yt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&yt(ot,e),null!==lt&&yt(lt,e),null!==it&&yt(it,e),st.forEach(t),ut.forEach(t),n=0;n<pt.length;n++)(r=pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<pt.length&&null===(n=pt[0]).blockedOn;)ft(n),null===n.blockedOn&&pt.shift()}function Nt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wt={animationend:Nt("Animation","AnimationEnd"),animationiteration:Nt("Animation","AnimationIteration"),animationstart:Nt("Animation","AnimationStart"),transitionend:Nt("Transition","TransitionEnd")},Ot={},jt={};function xt(e){if(Ot[e])return Ot[e];if(!wt[e])return e;var t,n=wt[e];for(t in n)if(n.hasOwnProperty(t)&&t in jt)return Ot[e]=n[t];return e}c&&(jt=document.createElement("div").style,"AnimationEvent"in window||(delete wt.animationend.animation,delete wt.animationiteration.animation,delete wt.animationstart.animation),"TransitionEvent"in window||delete wt.transitionend.transition);var St=xt("animationend"),Ct=xt("animationiteration"),Pt=xt("animationstart"),Et=xt("transitionend"),Dt=new Map,Tt=new Map,_t=["abort","abort",St,"animationEnd",Ct,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Et,"transitionEnd","waiting","waiting"];function Mt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Tt.set(r,t),Dt.set(r,a),u(a,[r])}}(0,o.unstable_now)();var At=8;function Lt(e){if(0!=(1&e))return At=15,1;if(0!=(2&e))return At=14,2;if(0!=(4&e))return At=13,4;var t=24&e;return 0!==t?(At=12,t):0!=(32&e)?(At=11,32):0!=(t=192&e)?(At=10,t):0!=(256&e)?(At=9,256):0!=(t=3584&e)?(At=8,t):0!=(4096&e)?(At=7,4096):0!=(t=4186112&e)?(At=6,t):0!=(t=62914560&e)?(At=5,t):67108864&e?(At=4,67108864):0!=(134217728&e)?(At=3,134217728):0!=(t=805306368&e)?(At=2,t):0!=(1073741824&e)?(At=1,1073741824):(At=8,e)}function Rt(e,t){var n=e.pendingLanes;if(0===n)return At=0;var r=0,a=0,o=e.expiredLanes,l=e.suspendedLanes,i=e.pingedLanes;if(0!==o)r=o,a=At=15;else if(0!=(o=134217727&n)){var s=o&~l;0!==s?(r=Lt(s),a=At):0!=(i&=o)&&(r=Lt(i),a=At)}else 0!=(o=n&~l)?(r=Lt(o),a=At):0!==i&&(r=Lt(i),a=At);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&l)){if(Lt(t),a<=At)return t;At=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Ht(t)),r|=e[n],t&=~a;return r}function It(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=zt(24&~t))?Bt(10,t):e;case 10:return 0===(e=zt(192&~t))?Bt(8,t):e;case 8:return 0===(e=zt(3584&~t))&&0===(e=zt(4186112&~t))&&(e=512),e;case 2:return 0===(t=zt(805306368&~t))&&(t=268435456),t}throw Error(l(358,e))}function zt(e){return e&-e}function Ft(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Xt(e)/Yt|0)|0},Xt=Math.log,Yt=Math.LN2,Ut=o.unstable_UserBlockingPriority,Wt=o.unstable_runWithPriority,Vt=!0;function Gt(e,t,n,r){Re||Ae();var a=Jt,o=Re;Re=!0;try{Me(a,e,t,n,r)}finally{(Re=o)||Be()}}function $t(e,t,n,r){Wt(Ut,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var a;if(Vt)if((a=0==(4&t))&&0<at.length&&-1<ct.indexOf(e))e=mt(null,e,t,n,r),at.push(e);else{var o=Qt(e,t,n,r);if(null===o)a&&dt(e,r);else{if(a){if(-1<ct.indexOf(e))return e=mt(o,e,t,n,r),void at.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return ot=ht(ot,e,t,n,r,a),!0;case"dragenter":return lt=ht(lt,e,t,n,r,a),!0;case"mouseover":return it=ht(it,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return st.set(o,ht(st.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,ut.set(o,ht(ut.get(o)||null,e,t,n,r,a)),!0}return!1}(o,e,t,n,r))return;dt(e,r)}Dr(e,t,r,null,n)}}}function Qt(e,t,n,r){var a=xe(r);if(null!==(a=Qr(a))){var o=$e(a);if(null===o)a=null;else{var l=o.tag;if(13===l){if(null!==(a=Je(o)))return a;a=null}else if(3===l){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Dr(e,t,r,a,n),null}var Kt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,a="value"in Kt?Kt.value:Kt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var l=r-e;for(t=1;t<=l&&n[r-t]===a[o-t];t++);return en=a.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function an(){return!1}function on(e){function t(t,n,r,a,o){for(var l in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(a):a[l]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rn:an,this.isPropagationStopped=an,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var ln,sn,un,pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(pn),mn=a({},pn,{view:0,detail:0}),dn=on(mn),hn=a({},mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(ln=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=ln=0,un=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(hn),kn=on(a({},hn,{dataTransfer:0})),bn=on(a({},mn,{relatedTarget:0})),gn=on(a({},pn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=on(a({},pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),vn=on(a({},pn,{data:0})),Nn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=On[e])&&!!t[e]}function xn(){return jn}var Sn=on(a({},mn,{key:function(e){if(e.key){var t=Nn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Cn=on(a({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(a({},mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),En=on(a({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=on(a({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Tn=[9,13,27,32],_n=c&&"CompositionEvent"in window,Mn=null;c&&"documentMode"in document&&(Mn=document.documentMode);var An=c&&"TextEvent"in window&&!Mn,Ln=c&&(!_n||Mn&&8<Mn&&11>=Mn),Rn=String.fromCharCode(32),In=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1,qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Xn(e,t,n,r){De(r),0<(t=_r(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Un=null;function Wn(e){jr(e,0)}function Vn(e){if(Q(Zr(e)))return e}function Gn(e,t){if("change"===e)return t}var $n=!1;if(c){var Jn;if(c){var Qn="oninput"in document;if(!Qn){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),Qn="function"==typeof Kn.oninput}Jn=Qn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function Zn(){Yn&&(Yn.detachEvent("onpropertychange",er),Un=Yn=null)}function er(e){if("value"===e.propertyName&&Vn(Un)){var t=[];if(Xn(t,Un,e,xe(e)),e=Wn,Re)e(t);else{Re=!0;try{_e(e,t)}finally{Re=!1,Be()}}}}function tr(e,t,n){"focusin"===e?(Zn(),Un=n,(Yn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Un)}function rr(e,t){if("click"===e)return Vn(t)}function ar(e,t){if("input"===e||"change"===e)return Vn(t)}var or="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},lr=Object.prototype.hasOwnProperty;function ir(e,t){if(or(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!or(e[n[r]],t[n[r]]))return!1;return!0}function sr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=sr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function cr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var dr=c&&"documentMode"in document&&11>=document.documentMode,hr=null,fr=null,kr=null,br=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==hr||hr!==K(r)||(r="selectionStart"in(r=hr)&&mr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},kr&&ir(kr,r)||(kr=r,0<(r=_r(fr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hr)))}Mt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Mt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Mt(_t,2);for(var yr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),vr=0;vr<yr.length;vr++)Tt.set(yr[vr],0);p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,i,s,u){if(Ge.apply(this,arguments),Xe){if(!Xe)throw Error(l(198));var p=Ye;Xe=!1,Ye=null,Ue||(Ue=!0,We=p)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var i=r[l],s=i.instance,u=i.currentTarget;if(i=i.listener,s!==o&&a.isPropagationStopped())break e;Or(a,i,u),o=s}else for(l=0;l<r.length;l++){if(s=(i=r[l]).instance,u=i.currentTarget,i=i.listener,s!==o&&a.isPropagationStopped())break e;Or(a,i,u),o=s}}}if(Ue)throw e=We,Ue=!1,We=null,e}function xr(e,t){var n=ta(t),r=e+"__bubble";n.has(r)||(Er(t,e,2,!1),n.add(r))}var Sr="_reactListening"+Math.random().toString(36).slice(2);function Cr(e){e[Sr]||(e[Sr]=!0,i.forEach((function(t){wr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&wr.has(e)){if("scroll"!==e)return;a|=2,o=r}var l=ta(o),i=e+"__"+(t?"capture":"bubble");l.has(i)||(t&&(a|=4),Er(o,e,a,t),l.add(i))}function Er(e,t,n,r){var a=Tt.get(t);switch(void 0===a?2:a){case 0:a=Gt;break;case 1:a=$t;break;default:a=Jt}n=a.bind(null,t,n,e),a=void 0,!Fe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,a){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var l=r.tag;if(3===l||4===l){var i=r.stateNode.containerInfo;if(i===a||8===i.nodeType&&i.parentNode===a)break;if(4===l)for(l=r.return;null!==l;){var s=l.tag;if((3===s||4===s)&&((s=l.stateNode.containerInfo)===a||8===s.nodeType&&s.parentNode===a))return;l=l.return}for(;null!==i;){if(null===(l=Qr(i)))return;if(5===(s=l.tag)||6===s){r=o=l;continue e}i=i.parentNode}}r=r.return}!function(e,t,n){if(Ie)return e();Ie=!0;try{Le(e,t,n)}finally{Ie=!1,Be()}}((function(){var r=o,a=xe(n),l=[];e:{var i=Dt.get(e);if(void 0!==i){var s=cn,u=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":u="focus",s=bn;break;case"focusout":u="blur",s=bn;break;case"beforeblur":case"afterblur":s=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=kn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Pn;break;case St:case Ct:case Pt:s=gn;break;case Et:s=En;break;case"scroll":s=dn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var p=0!=(4&t),c=!p&&"scroll"===e,m=p?null!==i?i+"Capture":null:i;p=[];for(var d,h=r;null!==h;){var f=(d=h).stateNode;if(5===d.tag&&null!==f&&(d=f,null!==m&&null!=(f=ze(h,m))&&p.push(Tr(h,f,d))),c)break;h=h.return}0<p.length&&(i=new s(i,u,null,n,a),l.push({event:i,listeners:p}))}}if(0==(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=n.relatedTarget||n.fromElement)||!Qr(u)&&!u[$r])&&(s||i)&&(i=a.window===a?a:(i=a.ownerDocument)?i.defaultView||i.parentWindow:window,s?(s=r,null!==(u=(u=n.relatedTarget||n.toElement)?Qr(u):null)&&(u!==(c=$e(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(s=null,u=r),s!==u)){if(p=fn,f="onMouseLeave",m="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(p=Cn,f="onPointerLeave",m="onPointerEnter",h="pointer"),c=null==s?i:Zr(s),d=null==u?i:Zr(u),(i=new p(f,h+"leave",s,n,a)).target=c,i.relatedTarget=d,f=null,Qr(a)===r&&((p=new p(m,h+"enter",u,n,a)).target=d,p.relatedTarget=c,f=p),c=f,s&&u)e:{for(m=u,h=0,d=p=s;d;d=Mr(d))h++;for(d=0,f=m;f;f=Mr(f))d++;for(;0<h-d;)p=Mr(p),h--;for(;0<d-h;)m=Mr(m),d--;for(;h--;){if(p===m||null!==m&&p===m.alternate)break e;p=Mr(p),m=Mr(m)}p=null}else p=null;null!==s&&Ar(l,i,s,p,!1),null!==u&&null!==c&&Ar(l,c,u,p,!0)}if("select"===(s=(i=r?Zr(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===s&&"file"===i.type)var k=Gn;else if(Hn(i))if($n)k=ar;else{k=nr;var b=tr}else(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(k=rr);switch(k&&(k=k(e,r))?Xn(l,k,n,a):(b&&b(e,i,r),"focusout"===e&&(b=i._wrapperState)&&b.controlled&&"number"===i.type&&ae(i,"number",i.value)),b=r?Zr(r):window,e){case"focusin":(Hn(b)||"true"===b.contentEditable)&&(hr=b,fr=r,kr=null);break;case"focusout":kr=fr=hr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,gr(l,n,a);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(l,n,a)}var g;if(_n)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Fn?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ln&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Fn&&(g=tn()):(Zt="value"in(Kt=a)?Kt.value:Kt.textContent,Fn=!0)),0<(b=_r(r,y)).length&&(y=new vn(y,e,null,n,a),l.push({event:y,listeners:b}),(g||null!==(g=zn(n)))&&(y.data=g))),(g=An?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(In=!0,Rn);case"textInput":return(e=t.data)===Rn&&In?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!_n&&Bn(e,t)?(e=tn(),en=Zt=Kt=null,Fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&0<(r=_r(r,"onBeforeInput")).length&&(a=new vn("onBeforeInput","beforeinput",null,n,a),l.push({event:a,listeners:r}),a.data=g)}jr(l,t)}))}function Tr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _r(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=ze(e,n))&&r.unshift(Tr(e,o,a)),null!=(o=ze(e,t))&&r.push(Tr(e,o,a))),e=e.return}return r}function Mr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ar(e,t,n,r,a){for(var o=t._reactName,l=[];null!==n&&n!==r;){var i=n,s=i.alternate,u=i.stateNode;if(null!==s&&s===r)break;5===i.tag&&null!==u&&(i=u,a?null!=(s=ze(n,o))&&l.unshift(Tr(n,s,i)):a||null!=(s=ze(n,o))&&l.push(Tr(n,s,i))),n=n.return}0!==l.length&&e.push({event:t,listeners:l})}function Lr(){}var Rr=null,Ir=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function zr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Fr="function"==typeof setTimeout?setTimeout:void 0,qr="function"==typeof clearTimeout?clearTimeout:void 0;function Hr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Xr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Ur=0,Wr=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Wr,Gr="__reactProps$"+Wr,$r="__reactContainer$"+Wr,Jr="__reactEvents$"+Wr;function Qr(e){var t=e[Vr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$r]||n[Vr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Vr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function Kr(e){return!(e=e[Vr]||e[$r])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Zr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(l(33))}function ea(e){return e[Gr]||null}function ta(e){var t=e[Jr];return void 0===t&&(t=e[Jr]=new Set),t}var na=[],ra=-1;function aa(e){return{current:e}}function oa(e){0>ra||(e.current=na[ra],na[ra]=null,ra--)}function la(e,t){ra++,na[ra]=e.current,e.current=t}var ia={},sa=aa(ia),ua=aa(!1),pa=ia;function ca(e,t){var n=e.type.contextTypes;if(!n)return ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ma(e){return null!=e.childContextTypes}function da(){oa(ua),oa(sa)}function ha(e,t,n){if(sa.current!==ia)throw Error(l(168));la(sa,t),la(ua,n)}function fa(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(l(108,V(t)||"Unknown",o));return a({},n,r)}function ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ia,pa=sa.current,la(sa,e),la(ua,ua.current),!0}function ba(e,t,n){var r=e.stateNode;if(!r)throw Error(l(169));n?(e=fa(e,t,pa),r.__reactInternalMemoizedMergedChildContext=e,oa(ua),oa(sa),la(sa,e)):oa(ua),la(ua,n)}var ga=null,ya=null,va=o.unstable_runWithPriority,Na=o.unstable_scheduleCallback,wa=o.unstable_cancelCallback,Oa=o.unstable_shouldYield,ja=o.unstable_requestPaint,xa=o.unstable_now,Sa=o.unstable_getCurrentPriorityLevel,Ca=o.unstable_ImmediatePriority,Pa=o.unstable_UserBlockingPriority,Ea=o.unstable_NormalPriority,Da=o.unstable_LowPriority,Ta=o.unstable_IdlePriority,_a={},Ma=void 0!==ja?ja:function(){},Aa=null,La=null,Ra=!1,Ia=xa(),Ba=1e4>Ia?xa:function(){return xa()-Ia};function za(){switch(Sa()){case Ca:return 99;case Pa:return 98;case Ea:return 97;case Da:return 96;case Ta:return 95;default:throw Error(l(332))}}function Fa(e){switch(e){case 99:return Ca;case 98:return Pa;case 97:return Ea;case 96:return Da;case 95:return Ta;default:throw Error(l(332))}}function qa(e,t){return e=Fa(e),va(e,t)}function Ha(e,t,n){return e=Fa(e),Na(e,t,n)}function Xa(){if(null!==La){var e=La;La=null,wa(e)}Ya()}function Ya(){if(!Ra&&null!==Aa){Ra=!0;var e=0;try{var t=Aa;qa(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Aa=null}catch(t){throw null!==Aa&&(Aa=Aa.slice(e+1)),Na(Ca,Xa),t}finally{Ra=!1}}}var Ua=N.ReactCurrentBatchConfig;function Wa(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Va=aa(null),Ga=null,$a=null,Ja=null;function Qa(){Ja=$a=Ga=null}function Ka(e){var t=Va.current;oa(Va),e.type._context._currentValue=t}function Za(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function eo(e,t){Ga=e,Ja=$a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(_l=!0),e.firstContext=null)}function to(e,t){if(Ja!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Ja=e,t=1073741823),t={context:e,observedBits:t,next:null},null===$a){if(null===Ga)throw Error(l(308));$a=t,Ga.dependencies={lanes:0,firstContext:t,responders:null}}else $a=$a.next=t;return e._currentValue}var no=!1;function ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function io(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=l:o=o.next=l,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function so(e,t,n,r){var o=e.updateQueue;no=!1;var l=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var u=s,p=u.next;u.next=null,null===i?l=p:i.next=p,i=u;var c=e.alternate;if(null!==c){var m=(c=c.updateQueue).lastBaseUpdate;m!==i&&(null===m?c.firstBaseUpdate=p:m.next=p,c.lastBaseUpdate=u)}}if(null!==l){for(m=o.baseState,i=0,c=p=u=null;;){s=l.lane;var d=l.eventTime;if((r&s)===s){null!==c&&(c=c.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=e,f=l;switch(s=t,d=n,f.tag){case 1:if("function"==typeof(h=f.payload)){m=h.call(d,m,s);break e}m=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(s="function"==typeof(h=f.payload)?h.call(d,m,s):h))break e;m=a({},m,s);break e;case 2:no=!0}}null!==l.callback&&(e.flags|=32,null===(s=o.effects)?o.effects=[l]:s.push(l))}else d={eventTime:d,lane:s,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(p=c=d,u=m):c=c.next=d,i|=s;if(null===(l=l.next)){if(null===(s=o.shared.pending))break;l=s.next,s.next=null,o.lastBaseUpdate=s,o.shared.pending=null}}null===c&&(u=m),o.baseState=u,o.firstBaseUpdate=p,o.lastBaseUpdate=c,Ai|=i,e.lanes=i,e.memoizedState=m}}function uo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!=typeof a)throw Error(l(191,a));a.call(r)}}}var po=(new r.Component).refs;function co(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=os(),a=ls(e),o=oo(r,a);o.payload=t,null!=n&&(o.callback=n),lo(e,o),is(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=os(),a=ls(e),o=oo(r,a);o.tag=1,o.payload=t,null!=n&&(o.callback=n),lo(e,o),is(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=os(),r=ls(e),a=oo(n,r);a.tag=2,null!=t&&(a.callback=t),lo(e,a),is(e,r,n)}};function ho(e,t,n,r,a,o,l){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,l):!(t.prototype&&t.prototype.isPureReactComponent&&ir(n,r)&&ir(a,o))}function fo(e,t,n){var r=!1,a=ia,o=t.contextType;return"object"==typeof o&&null!==o?o=to(o):(a=ma(t)?pa:sa.current,o=(r=null!=(r=t.contextTypes))?ca(e,a):ia),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function ko(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function bo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=po,ro(e);var o=t.contextType;"object"==typeof o&&null!==o?a.context=to(o):(o=ma(t)?pa:sa.current,a.context=ca(e,o)),so(e,n,a,r),a.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(co(e,t,o,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&mo.enqueueReplaceState(a,a.state,null),so(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4)}var go=Array.isArray;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(l(309));var r=n.stateNode}if(!r)throw Error(l(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===po&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(l(284));if(!n._owner)throw Error(l(290,e))}return e}function vo(e,t){if("textarea"!==e.type)throw Error(l(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function No(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Is(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function i(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=qs(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Bs(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hs(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=zs(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=qs(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Bs(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case O:return(t=Hs(t,e.mode,n)).return=e,t}if(go(t)||H(t))return(t=zs(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function d(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?n.type===j?c(e,t,n.props.children,r,a):u(e,t,n,r):null;case O:return n.key===a?p(e,t,n,r):null}if(go(n)||H(n))return null!==a?null:c(e,t,n,r,null);vo(e,n)}return null}function h(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===j?c(t,e,r.props.children,a,r.key):u(t,e,r,a);case O:return p(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(go(r)||H(r))return c(t,e=e.get(n)||null,r,a,null);vo(t,r)}return null}function f(a,l,i,s){for(var u=null,p=null,c=l,f=l=0,k=null;null!==c&&f<i.length;f++){c.index>f?(k=c,c=null):k=c.sibling;var b=d(a,c,i[f],s);if(null===b){null===c&&(c=k);break}e&&c&&null===b.alternate&&t(a,c),l=o(b,l,f),null===p?u=b:p.sibling=b,p=b,c=k}if(f===i.length)return n(a,c),u;if(null===c){for(;f<i.length;f++)null!==(c=m(a,i[f],s))&&(l=o(c,l,f),null===p?u=c:p.sibling=c,p=c);return u}for(c=r(a,c);f<i.length;f++)null!==(k=h(c,a,f,i[f],s))&&(e&&null!==k.alternate&&c.delete(null===k.key?f:k.key),l=o(k,l,f),null===p?u=k:p.sibling=k,p=k);return e&&c.forEach((function(e){return t(a,e)})),u}function k(a,i,s,u){var p=H(s);if("function"!=typeof p)throw Error(l(150));if(null==(s=p.call(s)))throw Error(l(151));for(var c=p=null,f=i,k=i=0,b=null,g=s.next();null!==f&&!g.done;k++,g=s.next()){f.index>k?(b=f,f=null):b=f.sibling;var y=d(a,f,g.value,u);if(null===y){null===f&&(f=b);break}e&&f&&null===y.alternate&&t(a,f),i=o(y,i,k),null===c?p=y:c.sibling=y,c=y,f=b}if(g.done)return n(a,f),p;if(null===f){for(;!g.done;k++,g=s.next())null!==(g=m(a,g.value,u))&&(i=o(g,i,k),null===c?p=g:c.sibling=g,c=g);return p}for(f=r(a,f);!g.done;k++,g=s.next())null!==(g=h(f,a,k,g.value,u))&&(e&&null!==g.alternate&&f.delete(null===g.key?k:g.key),i=o(g,i,k),null===c?p=g:c.sibling=g,c=g);return e&&f.forEach((function(e){return t(a,e)})),p}return function(e,r,o,s){var u="object"==typeof o&&null!==o&&o.type===j&&null===o.key;u&&(o=o.props.children);var p="object"==typeof o&&null!==o;if(p)switch(o.$$typeof){case w:e:{for(p=o.key,u=r;null!==u;){if(u.key===p){switch(u.tag){case 7:if(o.type===j){n(e,u.sibling),(r=a(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=a(u,o.props)).ref=yo(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===j?((r=zs(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=Bs(o.type,o.key,o.props,null,e.mode,s)).ref=yo(e,r,o),s.return=e,e=s)}return i(e);case O:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=a(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Hs(o,e.mode,s)).return=e,e=r}return i(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,o)).return=e,e=r):(n(e,r),(r=qs(o,e.mode,s)).return=e,e=r),i(e);if(go(o))return f(e,r,o,s);if(H(o))return k(e,r,o,s);if(p&&vo(e,o),void 0===o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(l(152,V(e.type)||"Component"))}return n(e,r)}}var wo=No(!0),Oo=No(!1),jo={},xo=aa(jo),So=aa(jo),Co=aa(jo);function Po(e){if(e===jo)throw Error(l(174));return e}function Eo(e,t){switch(la(Co,t),la(So,e),la(xo,jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}oa(xo),la(xo,t)}function Do(){oa(xo),oa(So),oa(Co)}function To(e){Po(Co.current);var t=Po(xo.current),n=de(t,e.type);t!==n&&(la(So,e),la(xo,n))}function _o(e){So.current===e&&(oa(xo),oa(So))}var Mo=aa(0);function Ao(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Lo=null,Ro=null,Io=!1;function Bo(e,t){var n=Ls(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Fo(e){if(Io){var t=Ro;if(t){var n=t;if(!zo(e,t)){if(!(t=Xr(n.nextSibling))||!zo(e,t))return e.flags=-1025&e.flags|2,Io=!1,void(Lo=e);Bo(Lo,n)}Lo=e,Ro=Xr(t.firstChild)}else e.flags=-1025&e.flags|2,Io=!1,Lo=e}}function qo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Lo=e}function Ho(e){if(e!==Lo)return!1;if(!Io)return qo(e),Io=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!zr(t,e.memoizedProps))for(t=Ro;t;)Bo(e,t),t=Xr(t.nextSibling);if(qo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ro=Xr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ro=null}}else Ro=Lo?Xr(e.stateNode.nextSibling):null;return!0}function Xo(){Ro=Lo=null,Io=!1}var Yo=[];function Uo(){for(var e=0;e<Yo.length;e++)Yo[e]._workInProgressVersionPrimary=null;Yo.length=0}var Wo=N.ReactCurrentDispatcher,Vo=N.ReactCurrentBatchConfig,Go=0,$o=null,Jo=null,Qo=null,Ko=!1,Zo=!1;function el(){throw Error(l(321))}function tl(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function nl(e,t,n,r,a,o){if(Go=o,$o=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wo.current=null===e||null===e.memoizedState?Pl:El,e=n(r,a),Zo){o=0;do{if(Zo=!1,!(25>o))throw Error(l(301));o+=1,Qo=Jo=null,t.updateQueue=null,Wo.current=Dl,e=n(r,a)}while(Zo)}if(Wo.current=Cl,t=null!==Jo&&null!==Jo.next,Go=0,Qo=Jo=$o=null,Ko=!1,t)throw Error(l(300));return e}function rl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qo?$o.memoizedState=Qo=e:Qo=Qo.next=e,Qo}function al(){if(null===Jo){var e=$o.alternate;e=null!==e?e.memoizedState:null}else e=Jo.next;var t=null===Qo?$o.memoizedState:Qo.next;if(null!==t)Qo=t,Jo=e;else{if(null===e)throw Error(l(310));e={memoizedState:(Jo=e).memoizedState,baseState:Jo.baseState,baseQueue:Jo.baseQueue,queue:Jo.queue,next:null},null===Qo?$o.memoizedState=Qo=e:Qo=Qo.next=e}return Qo}function ol(e,t){return"function"==typeof t?t(e):t}function ll(e){var t=al(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var r=Jo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var s=i=o=null,u=a;do{var p=u.lane;if((Go&p)===p)null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var c={lane:p,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(i=s=c,o=r):s=s.next=c,$o.lanes|=p,Ai|=p}u=u.next}while(null!==u&&u!==a);null===s?o=r:s.next=i,or(r,t.memoizedState)||(_l=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function il(e){var t=al(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{o=e(o,i.action),i=i.next}while(i!==a);or(o,t.memoizedState)||(_l=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function sl(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Go&e)===e)&&(t._workInProgressVersionPrimary=r,Yo.push(t))),e)return n(t._source);throw Yo.push(t),Error(l(350))}function ul(e,t,n,r){var a=Si;if(null===a)throw Error(l(349));var o=t._getVersion,i=o(t._source),s=Wo.current,u=s.useState((function(){return sl(a,t,n)})),p=u[1],c=u[0];u=Qo;var m=e.memoizedState,d=m.refs,h=d.getSnapshot,f=m.source;m=m.subscribe;var k=$o;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=p;var e=o(t._source);if(!or(i,e)){e=n(t._source),or(c,e)||(p(e),e=ls(k),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,l=e;0<l;){var s=31-Ht(l),u=1<<s;r[s]|=e,l&=~u}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ls(k);a.mutableReadLanes|=r&a.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),or(h,n)&&or(f,t)&&or(m,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ol,lastRenderedState:c}).dispatch=p=Sl.bind(null,$o,e),u.queue=e,u.baseQueue=null,c=sl(a,t,n),u.memoizedState=u.baseState=c),c}function pl(e,t,n){return ul(al(),e,t,n)}function cl(e){var t=rl();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ol,lastRenderedState:e}).dispatch=Sl.bind(null,$o,e),[t.memoizedState,e]}function ml(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$o.updateQueue)?(t={lastEffect:null},$o.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function dl(e){return e={current:e},rl().memoizedState=e}function hl(){return al().memoizedState}function fl(e,t,n,r){var a=rl();$o.flags|=e,a.memoizedState=ml(1|t,n,void 0,void 0===r?null:r)}function kl(e,t,n,r){var a=al();r=void 0===r?null:r;var o=void 0;if(null!==Jo){var l=Jo.memoizedState;if(o=l.destroy,null!==r&&tl(r,l.deps))return void ml(t,n,o,r)}$o.flags|=e,a.memoizedState=ml(1|t,n,o,r)}function bl(e,t){return fl(516,4,e,t)}function gl(e,t){return kl(516,4,e,t)}function yl(e,t){return kl(4,2,e,t)}function vl(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Nl(e,t,n){return n=null!=n?n.concat([e]):null,kl(4,2,vl.bind(null,t,e),n)}function wl(){}function Ol(e,t){var n=al();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&tl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jl(e,t){var n=al();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&tl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xl(e,t){var n=za();qa(98>n?98:n,(function(){e(!0)})),qa(97<n?97:n,(function(){var n=Vo.transition;Vo.transition=1;try{e(!1),t()}finally{Vo.transition=n}}))}function Sl(e,t,n){var r=os(),a=ls(e),o={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},l=t.pending;if(null===l?o.next=o:(o.next=l.next,l.next=o),t.pending=o,l=e.alternate,e===$o||null!==l&&l===$o)Zo=Ko=!0;else{if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=l(i,n);if(o.eagerReducer=l,o.eagerState=s,or(s,i))return}catch(e){}is(e,a,r)}}var Cl={readContext:to,useCallback:el,useContext:el,useEffect:el,useImperativeHandle:el,useLayoutEffect:el,useMemo:el,useReducer:el,useRef:el,useState:el,useDebugValue:el,useDeferredValue:el,useTransition:el,useMutableSource:el,useOpaqueIdentifier:el,unstable_isNewReconciler:!1},Pl={readContext:to,useCallback:function(e,t){return rl().memoizedState=[e,void 0===t?null:t],e},useContext:to,useEffect:bl,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,fl(4,2,vl.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fl(4,2,e,t)},useMemo:function(e,t){var n=rl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rl();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Sl.bind(null,$o,e),[r.memoizedState,e]},useRef:dl,useState:cl,useDebugValue:wl,useDeferredValue:function(e){var t=cl(e),n=t[0],r=t[1];return bl((function(){var t=Vo.transition;Vo.transition=1;try{r(e)}finally{Vo.transition=t}}),[e]),n},useTransition:function(){var e=cl(!1),t=e[0];return dl(e=xl.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=rl();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ul(r,e,t,n)},useOpaqueIdentifier:function(){if(Io){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Ur++).toString(36))),Error(l(355))})),n=cl(t)[1];return 0==(2&$o.mode)&&($o.flags|=516,ml(5,(function(){n("r:"+(Ur++).toString(36))}),void 0,null)),t}return cl(t="r:"+(Ur++).toString(36)),t},unstable_isNewReconciler:!1},El={readContext:to,useCallback:Ol,useContext:to,useEffect:gl,useImperativeHandle:Nl,useLayoutEffect:yl,useMemo:jl,useReducer:ll,useRef:hl,useState:function(){return ll(ol)},useDebugValue:wl,useDeferredValue:function(e){var t=ll(ol),n=t[0],r=t[1];return gl((function(){var t=Vo.transition;Vo.transition=1;try{r(e)}finally{Vo.transition=t}}),[e]),n},useTransition:function(){var e=ll(ol)[0];return[hl().current,e]},useMutableSource:pl,useOpaqueIdentifier:function(){return ll(ol)[0]},unstable_isNewReconciler:!1},Dl={readContext:to,useCallback:Ol,useContext:to,useEffect:gl,useImperativeHandle:Nl,useLayoutEffect:yl,useMemo:jl,useReducer:il,useRef:hl,useState:function(){return il(ol)},useDebugValue:wl,useDeferredValue:function(e){var t=il(ol),n=t[0],r=t[1];return gl((function(){var t=Vo.transition;Vo.transition=1;try{r(e)}finally{Vo.transition=t}}),[e]),n},useTransition:function(){var e=il(ol)[0];return[hl().current,e]},useMutableSource:pl,useOpaqueIdentifier:function(){return il(ol)[0]},unstable_isNewReconciler:!1},Tl=N.ReactCurrentOwner,_l=!1;function Ml(e,t,n,r){t.child=null===e?Oo(t,null,n,r):wo(t,e.child,n,r)}function Al(e,t,n,r,a){n=n.render;var o=t.ref;return eo(t,a),r=nl(e,t,n,r,o,a),null===e||_l?(t.flags|=1,Ml(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,Kl(e,t,a))}function Ll(e,t,n,r,a,o){if(null===e){var l=n.type;return"function"!=typeof l||Rs(l)||void 0!==l.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bs(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,Rl(e,t,l,r,a,o))}return l=e.child,0==(a&o)&&(a=l.memoizedProps,(n=null!==(n=n.compare)?n:ir)(a,r)&&e.ref===t.ref)?Kl(e,t,o):(t.flags|=1,(e=Is(l,r)).ref=t.ref,e.return=t,t.child=e)}function Rl(e,t,n,r,a,o){if(null!==e&&ir(e.memoizedProps,r)&&e.ref===t.ref){if(_l=!1,0==(o&a))return t.lanes=e.lanes,Kl(e,t,o);0!=(16384&e.flags)&&(_l=!0)}return zl(e,t,n,r,o)}function Il(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},ds(0,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ds(0,e),null;t.memoizedState={baseLanes:0},ds(0,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ds(0,r);return Ml(e,t,a,n),t.child}function Bl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function zl(e,t,n,r,a){var o=ma(n)?pa:sa.current;return o=ca(t,o),eo(t,a),n=nl(e,t,n,r,o,a),null===e||_l?(t.flags|=1,Ml(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,Kl(e,t,a))}function Fl(e,t,n,r,a){if(ma(n)){var o=!0;ka(t)}else o=!1;if(eo(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fo(t,n,r),bo(t,n,r,a),r=!0;else if(null===e){var l=t.stateNode,i=t.memoizedProps;l.props=i;var s=l.context,u=n.contextType;u="object"==typeof u&&null!==u?to(u):ca(t,u=ma(n)?pa:sa.current);var p=n.getDerivedStateFromProps,c="function"==typeof p||"function"==typeof l.getSnapshotBeforeUpdate;c||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||(i!==r||s!==u)&&ko(t,l,r,u),no=!1;var m=t.memoizedState;l.state=m,so(t,r,l,a),s=t.memoizedState,i!==r||m!==s||ua.current||no?("function"==typeof p&&(co(t,n,p,r),s=t.memoizedState),(i=no||ho(t,n,i,r,m,s,u))?(c||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||("function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"==typeof l.componentDidMount&&(t.flags|=4)):("function"==typeof l.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),l.props=r,l.state=s,l.context=u,r=i):("function"==typeof l.componentDidMount&&(t.flags|=4),r=!1)}else{l=t.stateNode,ao(e,t),i=t.memoizedProps,u=t.type===t.elementType?i:Wa(t.type,i),l.props=u,c=t.pendingProps,m=l.context,s="object"==typeof(s=n.contextType)&&null!==s?to(s):ca(t,s=ma(n)?pa:sa.current);var d=n.getDerivedStateFromProps;(p="function"==typeof d||"function"==typeof l.getSnapshotBeforeUpdate)||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||(i!==c||m!==s)&&ko(t,l,r,s),no=!1,m=t.memoizedState,l.state=m,so(t,r,l,a);var h=t.memoizedState;i!==c||m!==h||ua.current||no?("function"==typeof d&&(co(t,n,d,r),h=t.memoizedState),(u=no||ho(t,n,u,r,m,h,s))?(p||"function"!=typeof l.UNSAFE_componentWillUpdate&&"function"!=typeof l.componentWillUpdate||("function"==typeof l.componentWillUpdate&&l.componentWillUpdate(r,h,s),"function"==typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(r,h,s)),"function"==typeof l.componentDidUpdate&&(t.flags|=4),"function"==typeof l.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof l.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!=typeof l.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),l.props=r,l.state=h,l.context=s,r=u):("function"!=typeof l.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!=typeof l.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=256),r=!1)}return ql(e,t,n,r,o,a)}function ql(e,t,n,r,a,o){Bl(e,t);var l=0!=(64&t.flags);if(!r&&!l)return a&&ba(t,n,!1),Kl(e,t,o);r=t.stateNode,Tl.current=t;var i=l&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&l?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,i,o)):Ml(e,t,i,o),t.memoizedState=r.state,a&&ba(t,n,!0),t.child}function Hl(e){var t=e.stateNode;t.pendingContext?ha(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ha(0,t.context,!1),Eo(e,t.containerInfo)}var Xl,Yl,Ul,Wl={dehydrated:null,retryLane:0};function Vl(e,t,n){var r,a=t.pendingProps,o=Mo.current,l=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(l=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),la(Mo,1&o),null===e?(void 0!==a.fallback&&Fo(t),e=a.children,o=a.fallback,l?(e=Gl(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wl,e):"number"==typeof a.unstable_expectedLoadTime?(e=Gl(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wl,t.lanes=33554432,e):((n=Fs({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,l?(a=function(e,t,n,r,a){var o=t.mode,l=e.child;e=l.sibling;var i={mode:"hidden",children:n};return 0==(2&o)&&t.child!==l?((n=t.child).childLanes=0,n.pendingProps=i,null!==(l=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=l,l.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Is(l,i),null!==e?r=Is(e,r):(r=zs(r,o,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,a.children,a.fallback,n),l=t.child,o=e.child.memoizedState,l.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},l.childLanes=e.childLanes&~n,t.memoizedState=Wl,a):(n=function(e,t,n,r){var a=e.child;return e=a.sibling,n=Is(a,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,a.children,n),t.memoizedState=null,n))}function Gl(e,t,n,r){var a=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&a)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Fs(t,a,0,null),n=zs(n,a,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function $l(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Za(e.return,t)}function Jl(e,t,n,r,a,o){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a,l.lastEffect=o)}function Ql(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Ml(e,t,r.children,n),0!=(2&(r=Mo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$l(e,n);else if(19===e.tag)$l(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(la(Mo,r),0==(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Ao(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Jl(t,!1,a,n,o,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Ao(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Jl(t,!0,n,null,o,t.lastEffect);break;case"together":Jl(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Kl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ai|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(n=Is(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Is(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function Zl(e,t){if(!Io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ei(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ma(t.type)&&da(),null;case 3:return Do(),oa(ua),oa(sa),Uo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ho(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:_o(t);var o=Po(Co.current);if(n=t.type,null!==e&&null!=t.stateNode)Yl(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(l(166));return null}if(e=Po(xo.current),Ho(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Vr]=t,r[Gr]=i,n){case"dialog":xr("cancel",r),xr("close",r);break;case"iframe":case"object":case"embed":xr("load",r);break;case"video":case"audio":for(e=0;e<Nr.length;e++)xr(Nr[e],r);break;case"source":xr("error",r);break;case"img":case"image":case"link":xr("error",r),xr("load",r);break;case"details":xr("toggle",r);break;case"input":ee(r,i),xr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xr("invalid",r);break;case"textarea":se(r,i),xr("invalid",r)}for(var u in Oe(n,i),e=null,i)i.hasOwnProperty(u)&&(o=i[u],"children"===u?"string"==typeof o?r.textContent!==o&&(e=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(e=["children",""+o]):s.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&xr("scroll",r));switch(n){case"input":J(r),re(r,i,!0);break;case"textarea":J(r),pe(r);break;case"select":case"option":break;default:"function"==typeof i.onClick&&(r.onclick=Lr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,e===ce&&(e=me(n)),e===ce?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Vr]=t,e[Gr]=r,Xl(e,t),t.stateNode=e,u=je(n,r),n){case"dialog":xr("cancel",e),xr("close",e),o=r;break;case"iframe":case"object":case"embed":xr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Nr.length;o++)xr(Nr[o],e);o=r;break;case"source":xr("error",e),o=r;break;case"img":case"image":case"link":xr("error",e),xr("load",e),o=r;break;case"details":xr("toggle",e),o=r;break;case"input":ee(e,r),o=Z(e,r),xr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=a({},r,{value:void 0}),xr("invalid",e);break;case"textarea":se(e,r),o=ie(e,r),xr("invalid",e);break;default:o=r}Oe(n,o);var p=o;for(i in p)if(p.hasOwnProperty(i)){var c=p[i];"style"===i?Ne(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&ke(e,c):"children"===i?"string"==typeof c?("textarea"!==n||""!==c)&&be(e,c):"number"==typeof c&&be(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=c&&"onScroll"===i&&xr("scroll",e):null!=c&&v(e,i,c,u))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),pe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?le(e,!!r.multiple,i,!1):null!=r.defaultValue&&le(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Lr)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ul(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(l(166));n=Po(Co.current),Po(xo.current),Ho(t)?(r=t.stateNode,n=t.memoizedProps,r[Vr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Vr]=t,t.stateNode=r)}return null;case 13:return oa(Mo),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ho(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Mo.current)?0===Ti&&(Ti=3):(0!==Ti&&3!==Ti||(Ti=4),null===Si||0==(134217727&Ai)&&0==(134217727&Li)||cs(Si,Pi))),(r||n)&&(t.flags|=4),null);case 4:return Do(),null===e&&Cr(t.stateNode.containerInfo),null;case 10:return Ka(t),null;case 17:return ma(t.type)&&da(),null;case 19:if(oa(Mo),null===(r=t.memoizedState))return null;if(i=0!=(64&t.flags),null===(u=r.rendering))if(i)Zl(r,!1);else{if(0!==Ti||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Ao(e))){for(t.flags|=64,Zl(r,!1),null!==(i=u.updateQueue)&&(t.updateQueue=i,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(u=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,e=u.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return la(Mo,1&Mo.current|2),t.child}e=e.sibling}null!==r.tail&&Ba()>zi&&(t.flags|=64,i=!0,Zl(r,!1),t.lanes=33554432)}else{if(!i)if(null!==(e=Ao(u))){if(t.flags|=64,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Zl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Io)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ba()-r.renderingStartTime>zi&&1073741824!==n&&(t.flags|=64,i=!0,Zl(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ba(),n.sibling=null,t=Mo.current,la(Mo,i?1&t|2:1&t),n):null;case 23:case 24:return hs(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(l(156,t.tag))}function ti(e){switch(e.tag){case 1:ma(e.type)&&da();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Do(),oa(ua),oa(sa),Uo(),0!=(64&(t=e.flags)))throw Error(l(285));return e.flags=-4097&t|64,e;case 5:return _o(e),null;case 13:return oa(Mo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return oa(Mo),null;case 4:return Do(),null;case 10:return Ka(e),null;case 23:case 24:return hs(),null;default:return null}}function ni(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var a=n}catch(e){a="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:a}}function ri(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Xl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yl=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Po(xo.current);var l,i=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),i=[];break;case"option":o=oe(e,o),r=oe(e,r),i=[];break;case"select":o=a({},o,{value:void 0}),r=a({},r,{value:void 0}),i=[];break;case"textarea":o=ie(e,o),r=ie(e,r),i=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Lr)}for(c in Oe(n,r),n=null,o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c])if("style"===c){var u=o[c];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var p=r[c];if(u=null!=o?o[c]:void 0,r.hasOwnProperty(c)&&p!==u&&(null!=p||null!=u))if("style"===c)if(u){for(l in u)!u.hasOwnProperty(l)||p&&p.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in p)p.hasOwnProperty(l)&&u[l]!==p[l]&&(n||(n={}),n[l]=p[l])}else n||(i||(i=[]),i.push(c,n)),n=p;else"dangerouslySetInnerHTML"===c?(p=p?p.__html:void 0,u=u?u.__html:void 0,null!=p&&u!==p&&(i=i||[]).push(c,p)):"children"===c?"string"!=typeof p&&"number"!=typeof p||(i=i||[]).push(c,""+p):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=p&&"onScroll"===c&&xr("scroll",e),i||u===p||(i=[])):"object"==typeof p&&null!==p&&p.$$typeof===L?p.toString():(i=i||[]).push(c,p))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},Ul=function(e,t,n,r){n!==r&&(t.flags|=4)};var ai="function"==typeof WeakMap?WeakMap:Map;function oi(e,t,n){(n=oo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xi||(Xi=!0,Yi=r),ri(0,t)},n}function li(e,t,n){(n=oo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return ri(0,t),r(a)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ui?Ui=new Set([this]):Ui.add(this),ri(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ii="function"==typeof WeakSet?WeakSet:Set;function si(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ts(e,t)}else t.current=null}function ui(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Wa(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(l(163))}function pi(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!=(4&(a=a.tag))&&0!=(1&a)&&(Ps(n,e),Cs(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Wa(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&uo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}uo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&vt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(l(163))}function ci(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=null!=a&&a.hasOwnProperty("display")?a.display:null,r.style.display=ve("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function mi(e,t){if(ya&&"function"==typeof ya.onCommitFiberUnmount)try{ya.onCommitFiberUnmount(ga,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!=(4&r))Ps(t,n);else{r=t;try{a()}catch(e){Ts(r,e)}}n=n.next}while(n!==e)}break;case 1:if(si(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ts(t,e)}break;case 5:si(t);break;case 4:gi(e,t)}}function di(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function hi(e){return 5===e.tag||3===e.tag||4===e.tag}function fi(e){e:{for(var t=e.return;null!==t;){if(hi(t))break e;t=t.return}throw Error(l(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(l(161))}16&n.flags&&(be(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||hi(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ki(e,n,t):bi(e,n,t)}function ki(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Lr));else if(4!==r&&null!==(e=e.child))for(ki(e,t,n),e=e.sibling;null!==e;)ki(e,t,n),e=e.sibling}function bi(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(bi(e,t,n),e=e.sibling;null!==e;)bi(e,t,n),e=e.sibling}function gi(e,t){for(var n,r,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(l(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag){e:for(var i=e,s=a,u=s;;)if(mi(i,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break e;for(;null===u.sibling;){if(null===u.return||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(i=n,s=a.stateNode,8===i.nodeType?i.parentNode.removeChild(s):i.removeChild(s)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(mi(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function yi(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Gr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),je(e,a),t=je(e,r),a=0;a<o.length;a+=2){var i=o[a],s=o[a+1];"style"===i?Ne(n,s):"dangerouslySetInnerHTML"===i?ke(n,s):"children"===i?be(n,s):v(n,i,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?le(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?le(n,!!r.multiple,r.defaultValue,!0):le(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(l(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,vt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Bi=Ba(),ci(t.child,!0)),void vi(t);case 19:return void vi(t);case 17:return;case 23:case 24:return void ci(t,null!==t.memoizedState)}throw Error(l(163))}function vi(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ii),t.forEach((function(t){var r=Ms.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ni(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var wi=Math.ceil,Oi=N.ReactCurrentDispatcher,ji=N.ReactCurrentOwner,xi=0,Si=null,Ci=null,Pi=0,Ei=0,Di=aa(0),Ti=0,_i=null,Mi=0,Ai=0,Li=0,Ri=0,Ii=null,Bi=0,zi=1/0;function Fi(){zi=Ba()+500}var qi,Hi=null,Xi=!1,Yi=null,Ui=null,Wi=!1,Vi=null,Gi=90,$i=[],Ji=[],Qi=null,Ki=0,Zi=null,es=-1,ts=0,ns=0,rs=null,as=!1;function os(){return 0!=(48&xi)?Ba():-1!==es?es:es=Ba()}function ls(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===za()?1:2;if(0===ts&&(ts=Mi),0!==Ua.transition){0!==ns&&(ns=null!==Ii?Ii.pendingLanes:0),e=ts;var t=4186112&~ns;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=za(),e=Bt(0!=(4&xi)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ts)}function is(e,t,n){if(50<Ki)throw Ki=0,Zi=null,Error(l(185));if(null===(e=ss(e,t)))return null;qt(e,t,n),e===Si&&(Li|=t,4===Ti&&cs(e,Pi));var r=za();1===t?0!=(8&xi)&&0==(48&xi)?ms(e):(us(e,n),0===xi&&(Fi(),Xa())):(0==(4&xi)||98!==r&&99!==r||(null===Qi?Qi=new Set([e]):Qi.add(e)),us(e,n)),Ii=e}function ss(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function us(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Ht(i),u=1<<s,p=o[s];if(-1===p){if(0==(u&r)||0!=(u&a)){p=t,Lt(u);var c=At;o[s]=10<=c?p+250:6<=c?p+5e3:-1}}else p<=t&&(e.expiredLanes|=u);i&=~u}if(r=Rt(e,e===Si?Pi:0),t=At,0===r)null!==n&&(n!==_a&&wa(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==_a&&wa(n)}15===t?(n=ms.bind(null,e),null===Aa?(Aa=[n],La=Na(Ca,Ya)):Aa.push(n),n=_a):n=14===t?Ha(99,ms.bind(null,e)):Ha(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(l(358,e))}}(t),ps.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function ps(e){if(es=-1,ns=ts=0,0!=(48&xi))throw Error(l(327));var t=e.callbackNode;if(Ss()&&e.callbackNode!==t)return null;var n=Rt(e,e===Si?Pi:0);if(0===n)return null;var r=n,a=xi;xi|=16;var o=bs();for(Si===e&&Pi===r||(Fi(),fs(e,r));;)try{vs();break}catch(t){ks(e,t)}if(Qa(),Oi.current=o,xi=a,null!==Ci?r=0:(Si=null,Pi=0,r=Ti),0!=(Mi&Li))fs(e,0);else if(0!==r){if(2===r&&(xi|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=It(e))&&(r=gs(e,n))),1===r)throw t=_i,fs(e,0),cs(e,n),us(e,Ba()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(l(345));case 2:Os(e);break;case 3:if(cs(e,n),(62914560&n)===n&&10<(r=Bi+500-Ba())){if(0!==Rt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){os(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Fr(Os.bind(null,e),r);break}Os(e);break;case 4:if(cs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var i=31-Ht(n);o=1<<i,(i=r[i])>a&&(a=i),n&=~o}if(n=a,10<(n=(120>(n=Ba()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wi(n/1960))-n)){e.timeoutHandle=Fr(Os.bind(null,e),n);break}Os(e);break;case 5:Os(e);break;default:throw Error(l(329))}}return us(e,Ba()),e.callbackNode===t?ps.bind(null,e):null}function cs(e,t){for(t&=~Ri,t&=~Li,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function ms(e){if(0!=(48&xi))throw Error(l(327));if(Ss(),e===Si&&0!=(e.expiredLanes&Pi)){var t=Pi,n=gs(e,t);0!=(Mi&Li)&&(n=gs(e,t=Rt(e,t)))}else n=gs(e,t=Rt(e,0));if(0!==e.tag&&2===n&&(xi|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=It(e))&&(n=gs(e,t))),1===n)throw n=_i,fs(e,0),cs(e,t),us(e,Ba()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e),us(e,Ba()),null}function ds(e,t){la(Di,Ei),Ei|=t,Mi|=t}function hs(){Ei=Di.current,oa(Di)}function fs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,qr(n)),null!==Ci)for(n=Ci.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&da();break;case 3:Do(),oa(ua),oa(sa),Uo();break;case 5:_o(r);break;case 4:Do();break;case 13:case 19:oa(Mo);break;case 10:Ka(r);break;case 23:case 24:hs()}n=n.return}Si=e,Ci=Is(e.current,null),Pi=Ei=Mi=t,Ti=0,_i=null,Ri=Li=Ai=0}function ks(e,t){for(;;){var n=Ci;try{if(Qa(),Wo.current=Cl,Ko){for(var r=$o.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}Ko=!1}if(Go=0,Qo=Jo=$o=null,Zo=!1,ji.current=null,null===n||null===n.return){Ti=1,_i=t,Ci=null;break}e:{var o=e,l=n.return,i=n,s=t;if(t=Pi,i.flags|=2048,i.firstEffect=i.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var u=s;if(0==(2&i.mode)){var p=i.alternate;p?(i.updateQueue=p.updateQueue,i.memoizedState=p.memoizedState,i.lanes=p.lanes):(i.updateQueue=null,i.memoizedState=null)}var c=0!=(1&Mo.current),m=l;do{var d;if(d=13===m.tag){var h=m.memoizedState;if(null!==h)d=null!==h.dehydrated;else{var f=m.memoizedProps;d=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!c)}}if(d){var k=m.updateQueue;if(null===k){var b=new Set;b.add(u),m.updateQueue=b}else k.add(u);if(0==(2&m.mode)){if(m.flags|=64,i.flags|=16384,i.flags&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var g=oo(-1,1);g.tag=2,lo(i,g)}i.lanes|=1;break e}s=void 0,i=t;var y=o.pingCache;if(null===y?(y=o.pingCache=new ai,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(i)){s.add(i);var v=_s.bind(null,o,u,i);u.then(v,v)}m.flags|=4096,m.lanes=t;break e}m=m.return}while(null!==m);s=Error((V(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ti&&(Ti=2),s=ni(s,i),m=l;do{switch(m.tag){case 3:o=s,m.flags|=4096,t&=-t,m.lanes|=t,io(m,oi(0,o,t));break e;case 1:o=s;var N=m.type,w=m.stateNode;if(0==(64&m.flags)&&("function"==typeof N.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Ui||!Ui.has(w)))){m.flags|=4096,t&=-t,m.lanes|=t,io(m,li(m,o,t));break e}}m=m.return}while(null!==m)}ws(n)}catch(e){t=e,Ci===n&&null!==n&&(Ci=n=n.return);continue}break}}function bs(){var e=Oi.current;return Oi.current=Cl,null===e?Cl:e}function gs(e,t){var n=xi;xi|=16;var r=bs();for(Si===e&&Pi===t||fs(e,t);;)try{ys();break}catch(t){ks(e,t)}if(Qa(),xi=n,Oi.current=r,null!==Ci)throw Error(l(261));return Si=null,Pi=0,Ti}function ys(){for(;null!==Ci;)Ns(Ci)}function vs(){for(;null!==Ci&&!Oa();)Ns(Ci)}function Ns(e){var t=qi(e.alternate,e,Ei);e.memoizedProps=e.pendingProps,null===t?ws(e):Ci=t,ji.current=null}function ws(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=ei(n,t,Ei)))return void(Ci=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Ei)||0==(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ti(t)))return n.flags&=2047,void(Ci=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ci=t);Ci=t=e}while(null!==t);0===Ti&&(Ti=5)}function Os(e){var t=za();return qa(99,js.bind(null,e,t)),null}function js(e,t){do{Ss()}while(null!==Vi);if(0!=(48&xi))throw Error(l(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(l(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,o=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var i=e.eventTimes,s=e.expirationTimes;0<o;){var u=31-Ht(o),p=1<<u;a[u]=0,i[u]=-1,s[u]=-1,o&=~p}if(null!==Qi&&0==(24&r)&&Qi.has(e)&&Qi.delete(e),e===Si&&(Ci=Si=null,Pi=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=xi,xi|=32,ji.current=null,Rr=Vt,mr(i=cr())){if("selectionStart"in i)s={start:i.selectionStart,end:i.selectionEnd};else e:if(s=(s=i.ownerDocument)&&s.defaultView||window,(p=s.getSelection&&s.getSelection())&&0!==p.rangeCount){s=p.anchorNode,o=p.anchorOffset,u=p.focusNode,p=p.focusOffset;try{s.nodeType,u.nodeType}catch(e){s=null;break e}var c=0,m=-1,d=-1,h=0,f=0,k=i,b=null;t:for(;;){for(var g;k!==s||0!==o&&3!==k.nodeType||(m=c+o),k!==u||0!==p&&3!==k.nodeType||(d=c+p),3===k.nodeType&&(c+=k.nodeValue.length),null!==(g=k.firstChild);)b=k,k=g;for(;;){if(k===i)break t;if(b===s&&++h===o&&(m=c),b===u&&++f===p&&(d=c),null!==(g=k.nextSibling))break;b=(k=b).parentNode}k=g}s=-1===m||-1===d?null:{start:m,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;Ir={focusedElem:i,selectionRange:s},Vt=!1,rs=null,as=!1,Hi=r;do{try{xs()}catch(e){if(null===Hi)throw Error(l(330));Ts(Hi,e),Hi=Hi.nextEffect}}while(null!==Hi);rs=null,Hi=r;do{try{for(i=e;null!==Hi;){var y=Hi.flags;if(16&y&&be(Hi.stateNode,""),128&y){var v=Hi.alternate;if(null!==v){var N=v.ref;null!==N&&("function"==typeof N?N(null):N.current=null)}}switch(1038&y){case 2:fi(Hi),Hi.flags&=-3;break;case 6:fi(Hi),Hi.flags&=-3,yi(Hi.alternate,Hi);break;case 1024:Hi.flags&=-1025;break;case 1028:Hi.flags&=-1025,yi(Hi.alternate,Hi);break;case 4:yi(Hi.alternate,Hi);break;case 8:gi(i,s=Hi);var w=s.alternate;di(s),null!==w&&di(w)}Hi=Hi.nextEffect}}catch(e){if(null===Hi)throw Error(l(330));Ts(Hi,e),Hi=Hi.nextEffect}}while(null!==Hi);if(N=Ir,v=cr(),y=N.focusedElem,i=N.selectionRange,v!==y&&y&&y.ownerDocument&&pr(y.ownerDocument.documentElement,y)){null!==i&&mr(y)&&(v=i.start,void 0===(N=i.end)&&(N=v),"selectionStart"in y?(y.selectionStart=v,y.selectionEnd=Math.min(N,y.value.length)):(N=(v=y.ownerDocument||document)&&v.defaultView||window).getSelection&&(N=N.getSelection(),s=y.textContent.length,w=Math.min(i.start,s),i=void 0===i.end?w:Math.min(i.end,s),!N.extend&&w>i&&(s=i,i=w,w=s),s=ur(y,w),o=ur(y,i),s&&o&&(1!==N.rangeCount||N.anchorNode!==s.node||N.anchorOffset!==s.offset||N.focusNode!==o.node||N.focusOffset!==o.offset)&&((v=v.createRange()).setStart(s.node,s.offset),N.removeAllRanges(),w>i?(N.addRange(v),N.extend(o.node,o.offset)):(v.setEnd(o.node,o.offset),N.addRange(v))))),v=[];for(N=y;N=N.parentNode;)1===N.nodeType&&v.push({element:N,left:N.scrollLeft,top:N.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<v.length;y++)(N=v[y]).element.scrollLeft=N.left,N.element.scrollTop=N.top}Vt=!!Rr,Ir=Rr=null,e.current=n,Hi=r;do{try{for(y=e;null!==Hi;){var O=Hi.flags;if(36&O&&pi(y,Hi.alternate,Hi),128&O){v=void 0;var j=Hi.ref;if(null!==j){var x=Hi.stateNode;switch(Hi.tag){case 5:v=x;break;default:v=x}"function"==typeof j?j(v):j.current=v}}Hi=Hi.nextEffect}}catch(e){if(null===Hi)throw Error(l(330));Ts(Hi,e),Hi=Hi.nextEffect}}while(null!==Hi);Hi=null,Ma(),xi=a}else e.current=n;if(Wi)Wi=!1,Vi=e,Gi=t;else for(Hi=r;null!==Hi;)t=Hi.nextEffect,Hi.nextEffect=null,8&Hi.flags&&((O=Hi).sibling=null,O.stateNode=null),Hi=t;if(0===(r=e.pendingLanes)&&(Ui=null),1===r?e===Zi?Ki++:(Ki=0,Zi=e):Ki=0,n=n.stateNode,ya&&"function"==typeof ya.onCommitFiberRoot)try{ya.onCommitFiberRoot(ga,n,void 0,64==(64&n.current.flags))}catch(e){}if(us(e,Ba()),Xi)throw Xi=!1,e=Yi,Yi=null,e;return 0!=(8&xi)||Xa(),null}function xs(){for(;null!==Hi;){var e=Hi.alternate;as||null===rs||(0!=(8&Hi.flags)?Ke(Hi,rs)&&(as=!0):13===Hi.tag&&Ni(e,Hi)&&Ke(Hi,rs)&&(as=!0));var t=Hi.flags;0!=(256&t)&&ui(e,Hi),0==(512&t)||Wi||(Wi=!0,Ha(97,(function(){return Ss(),null}))),Hi=Hi.nextEffect}}function Ss(){if(90!==Gi){var e=97<Gi?97:Gi;return Gi=90,qa(e,Es)}return!1}function Cs(e,t){$i.push(t,e),Wi||(Wi=!0,Ha(97,(function(){return Ss(),null})))}function Ps(e,t){Ji.push(t,e),Wi||(Wi=!0,Ha(97,(function(){return Ss(),null})))}function Es(){if(null===Vi)return!1;var e=Vi;if(Vi=null,0!=(48&xi))throw Error(l(331));var t=xi;xi|=32;var n=Ji;Ji=[];for(var r=0;r<n.length;r+=2){var a=n[r],o=n[r+1],i=a.destroy;if(a.destroy=void 0,"function"==typeof i)try{i()}catch(e){if(null===o)throw Error(l(330));Ts(o,e)}}for(n=$i,$i=[],r=0;r<n.length;r+=2){a=n[r],o=n[r+1];try{var s=a.create;a.destroy=s()}catch(e){if(null===o)throw Error(l(330));Ts(o,e)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return xi=t,Xa(),!0}function Ds(e,t,n){lo(e,t=oi(0,t=ni(n,t),1)),t=os(),null!==(e=ss(e,1))&&(qt(e,1,t),us(e,t))}function Ts(e,t){if(3===e.tag)Ds(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ds(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ui||!Ui.has(r))){var a=li(n,e=ni(t,e),1);if(lo(n,a),a=os(),null!==(n=ss(n,1)))qt(n,1,a),us(n,a);else if("function"==typeof r.componentDidCatch&&(null===Ui||!Ui.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function _s(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=os(),e.pingedLanes|=e.suspendedLanes&n,Si===e&&(Pi&n)===n&&(4===Ti||3===Ti&&(62914560&Pi)===Pi&&500>Ba()-Bi?fs(e,0):Ri|=n),us(e,t)}function Ms(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===za()?1:2:(0===ts&&(ts=Mi),0===(t=zt(62914560&~ts))&&(t=4194304))),n=os(),null!==(e=ss(e,t))&&(qt(e,t,n),us(e,n))}function As(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(e,t,n,r){return new As(e,t,n,r)}function Rs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Is(e,t){var n=e.alternate;return null===n?((n=Ls(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bs(e,t,n,r,a,o){var i=2;if(r=e,"function"==typeof e)Rs(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case j:return zs(n.children,a,o,t);case R:i=8,a|=16;break;case x:i=8,a|=1;break;case S:return(e=Ls(12,n,t,8|a)).elementType=S,e.type=S,e.lanes=o,e;case D:return(e=Ls(13,n,t,a)).type=D,e.elementType=D,e.lanes=o,e;case T:return(e=Ls(19,n,t,a)).elementType=T,e.lanes=o,e;case I:return Fs(n,a,o,t);case B:return(e=Ls(24,n,t,a)).elementType=B,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case C:i=10;break e;case P:i=9;break e;case E:i=11;break e;case _:i=14;break e;case M:i=16,r=null;break e;case A:i=22;break e}throw Error(l(130,null==e?e:typeof e,""))}return(t=Ls(i,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function zs(e,t,n,r){return(e=Ls(7,e,r,t)).lanes=n,e}function Fs(e,t,n,r){return(e=Ls(23,e,r,t)).elementType=I,e.lanes=n,e}function qs(e,t,n){return(e=Ls(6,e,null,t)).lanes=n,e}function Hs(e,t,n){return(t=Ls(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ft(0),this.expirationTimes=Ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.mutableSourceEagerHydrationData=null}function Ys(e,t,n,r){var a=t.current,o=os(),i=ls(a);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(l(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(ma(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(l(171))}if(1===n.tag){var u=n.type;if(ma(u)){n=fa(n,u,s);break e}}n=s}else n=ia;return null===t.context?t.context=n:t.pendingContext=n,(t=oo(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),lo(a,t),is(a,i,o),i}function Us(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ws(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vs(e,t){Ws(e,t),(e=e.alternate)&&Ws(e,t)}function Gs(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Ls(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ro(t),e[$r]=n.current,Cr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function $s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Js(e,t,n,r,a){var o=n._reactRootContainer;if(o){var l=o._internalRoot;if("function"==typeof a){var i=a;a=function(){var e=Us(l);i.call(e)}}Ys(t,l,e,a)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Gs(e,0,t?{hydrate:!0}:void 0)}(n,r),l=o._internalRoot,"function"==typeof a){var s=a;a=function(){var e=Us(l);s.call(e)}}!function(e,t){var n=xi;xi&=-2,xi|=8;try{e(t)}finally{0===(xi=n)&&(Fi(),Xa())}}((function(){Ys(t,l,e,a)}))}return Us(l)}qi=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ua.current)_l=!0;else{if(0==(n&r)){switch(_l=!1,t.tag){case 3:Hl(t),Xo();break;case 5:To(t);break;case 1:ma(t.type)&&ka(t);break;case 4:Eo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;la(Va,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Vl(e,t,n):(la(Mo,1&Mo.current),null!==(t=Kl(e,t,n))?t.sibling:null);la(Mo,1&Mo.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Ql(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),la(Mo,Mo.current),r)break;return null;case 23:case 24:return t.lanes=0,Il(e,t,n)}return Kl(e,t,n)}_l=0!=(16384&e.flags)}else _l=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ca(t,sa.current),eo(t,n),a=nl(null,t,r,e,a,n),t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ma(r)){var o=!0;ka(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ro(t);var i=r.getDerivedStateFromProps;"function"==typeof i&&co(t,r,i,e),a.updater=mo,t.stateNode=a,a._reactInternals=t,bo(t,r,e,n),t=ql(null,t,r,!0,o,n)}else t.tag=0,Ml(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(o=a._init)(a._payload),t.type=a,o=t.tag=function(e){if("function"==typeof e)return Rs(e)?1:0;if(null!=e){if((e=e.$$typeof)===E)return 11;if(e===_)return 14}return 2}(a),e=Wa(a,e),o){case 0:t=zl(null,t,a,e,n);break e;case 1:t=Fl(null,t,a,e,n);break e;case 11:t=Al(null,t,a,e,n);break e;case 14:t=Ll(null,t,a,Wa(a.type,e),r,n);break e}throw Error(l(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,zl(e,t,r,a=t.elementType===r?a:Wa(r,a),n);case 1:return r=t.type,a=t.pendingProps,Fl(e,t,r,a=t.elementType===r?a:Wa(r,a),n);case 3:if(Hl(t),r=t.updateQueue,null===e||null===r)throw Error(l(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,ao(e,t),so(t,r,null,n),(r=t.memoizedState.element)===a)Xo(),t=Kl(e,t,n);else{if((o=(a=t.stateNode).hydrate)&&(Ro=Xr(t.stateNode.containerInfo.firstChild),Lo=t,o=Io=!0),o){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(o=e[a])._workInProgressVersionPrimary=e[a+1],Yo.push(o);for(n=Oo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ml(e,t,r,n),Xo();t=t.child}return t;case 5:return To(t),null===e&&Fo(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,zr(r,a)?i=null:null!==o&&zr(r,o)&&(t.flags|=16),Bl(e,t),Ml(e,t,i,n),t.child;case 6:return null===e&&Fo(t),null;case 13:return Vl(e,t,n);case 4:return Eo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):Ml(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Al(e,t,r,a=t.elementType===r?a:Wa(r,a),n);case 7:return Ml(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ml(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value;var s=t.type._context;if(la(Va,s._currentValue),s._currentValue=o,null!==i)if(s=i.value,0==(o=or(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(i.children===a.children&&!ua.current){t=Kl(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){i=s.child;for(var p=u.firstContext;null!==p;){if(p.context===r&&0!=(p.observedBits&o)){1===s.tag&&((p=oo(-1,n&-n)).tag=2,lo(s,p)),s.lanes|=n,null!==(p=s.alternate)&&(p.lanes|=n),Za(s.return,n),u.lanes|=n;break}p=p.next}}else i=10===s.tag&&s.type===t.type?null:s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}Ml(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(o=t.pendingProps).children,eo(t,n),r=r(a=to(a,o.unstable_observedBits)),t.flags|=1,Ml(e,t,r,n),t.child;case 14:return o=Wa(a=t.type,t.pendingProps),Ll(e,t,a,o=Wa(a.type,o),r,n);case 15:return Rl(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Wa(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ma(r)?(e=!0,ka(t)):e=!1,eo(t,n),fo(t,r,a),bo(t,r,a,n),ql(null,t,r,!0,e,n);case 19:return Ql(e,t,n);case 23:case 24:return Il(e,t,n)}throw Error(l(156,t.tag))},Gs.prototype.render=function(e){Ys(e,this._internalRoot,null,null)},Gs.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ys(null,e,null,(function(){t[$r]=null}))},Ze=function(e){13===e.tag&&(is(e,4,os()),Vs(e,4))},et=function(e){13===e.tag&&(is(e,67108864,os()),Vs(e,67108864))},tt=function(e){if(13===e.tag){var t=os(),n=ls(e);is(e,n,t),Vs(e,n)}},nt=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ea(r);if(!a)throw Error(l(90));Q(r),ne(r,a)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&le(e,!!n.multiple,t,!1)}},_e=function(e,t){var n=xi;xi|=1;try{return e(t)}finally{0===(xi=n)&&(Fi(),Xa())}},Me=function(e,t,n,r,a){var o=xi;xi|=4;try{return qa(98,e.bind(null,t,n,r,a))}finally{0===(xi=o)&&(Fi(),Xa())}},Ae=function(){0==(49&xi)&&(function(){if(null!==Qi){var e=Qi;Qi=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,us(e,Ba())}))}Xa()}(),Ss())},Le=function(e,t){var n=xi;xi|=2;try{return e(t)}finally{0===(xi=n)&&(Fi(),Xa())}};var Qs={findFiberByHostInstance:Qr,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},Ks={bundleType:Qs.bundleType,version:Qs.version,rendererPackageName:Qs.rendererPackageName,rendererConfig:Qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=function(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(l(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Qe(a),e;if(o===r)return Qe(a),t;o=o.sibling}throw Error(l(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,s=a.child;s;){if(s===n){i=!0,n=a,r=o;break}if(s===r){i=!0,r=a,n=o;break}s=s.sibling}if(!i){for(s=o.child;s;){if(s===n){i=!0,n=o,r=a;break}if(s===r){i=!0,r=o,n=a;break}s=s.sibling}if(!i)throw Error(l(189))}}if(n.alternate!==r)throw Error(l(190))}if(3!==n.tag)throw Error(l(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:e.stateNode},findFiberByHostInstance:Qs.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zs.isDisabled&&Zs.supportsFiber)try{ga=Zs.inject(Ks),ya=Zs}catch(fe){}}t.hydrate=function(e,t,n){if(!$s(t))throw Error(l(200));return Js(null,e,t,!0,n)}},73935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(64448)},97762:(e,t,n)=>{"use strict";e.exports=n(38698)},69590:e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,r="function"==typeof Set,a="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,l){if(e===l)return!0;if(e&&l&&"object"==typeof e&&"object"==typeof l){if(e.constructor!==l.constructor)return!1;var i,s,u,p;if(Array.isArray(e)){if((i=e.length)!=l.length)return!1;for(s=i;0!=s--;)if(!o(e[s],l[s]))return!1;return!0}if(n&&e instanceof Map&&l instanceof Map){if(e.size!==l.size)return!1;for(p=e.entries();!(s=p.next()).done;)if(!l.has(s.value[0]))return!1;for(p=e.entries();!(s=p.next()).done;)if(!o(s.value[1],l.get(s.value[0])))return!1;return!0}if(r&&e instanceof Set&&l instanceof Set){if(e.size!==l.size)return!1;for(p=e.entries();!(s=p.next()).done;)if(!l.has(s.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(l)){if((i=e.length)!=l.length)return!1;for(s=i;0!=s--;)if(e[s]!==l[s])return!1;return!0}if(e.constructor===RegExp)return e.source===l.source&&e.flags===l.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===l.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===l.toString();if((i=(u=Object.keys(e)).length)!==Object.keys(l).length)return!1;for(s=i;0!=s--;)if(!Object.prototype.hasOwnProperty.call(l,u[s]))return!1;if(t&&e instanceof Element)return!1;for(s=i;0!=s--;)if(("_owner"!==u[s]&&"__v"!==u[s]&&"__o"!==u[s]||!e.$$typeof)&&!o(e[u[s]],l[u[s]]))return!1;return!0}return e!=e&&l!=l}e.exports=function(e,t){try{return o(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},17579:(e,t,n)=>{"use strict";var r=n(80070);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,l){if(l!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},89324:(e,t,n)=>{e.exports=n(17579)()},80070:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},15028:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(79927).Z},45424:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(67294),a=n(45697),o=n.n(a),l=n(42473),i=n.n(l),s=n(41143),u=n.n(s),p=n(70452);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){return c(this,t),m(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){u()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){i()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),i()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,a=void 0,o=void 0;return r.Children.forEach(t,(function(t){if(null==a&&r.isValidElement(t)){var l=t.props,i=l.path,s=l.exact,u=l.strict,c=l.sensitive,m=l.from,d=i||m;o=t,a=(0,p.Z)(n.pathname,{path:d,exact:s,strict:u,sensitive:c},e.match)}})),a?r.cloneElement(o,{location:n,computedMatch:a}):null},t}(r.Component);d.contextTypes={router:o().shape({route:o().object.isRequired}).isRequired},d.propTypes={children:o().node,location:o().object};const h=d},79927:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n(42473),a=n.n(r),o=n(41143),l=n.n(o),i=n(67294),s=n(45697),u=n.n(s),p=n(70452),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){return 0===i.Children.count(e)},f=function(e){function t(){var n,r;m(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=d(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:c({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,a=e.path,o=e.strict,i=e.exact,s=e.sensitive;if(n)return n;l()(t,"You should not use <Route> or withRouter() outside a <Router>");var u=t.route,c=(r||u.location).pathname;return(0,p.Z)(c,{path:a,strict:o,exact:i,sensitive:s},u.match)},t.prototype.componentWillMount=function(){a()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),a()(!(this.props.component&&this.props.children&&!h(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),a()(!(this.props.render&&this.props.children&&!h(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){a()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),a()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,a=t.render,o=this.context.router,l=o.history,s=o.route,u=o.staticContext,p={match:e,location:this.props.location||s.location,history:l,staticContext:u};return r?e?i.createElement(r,p):null:a?e?a(p):null:"function"==typeof n?n(p):n&&!h(n)?i.Children.only(n):null},t}(i.Component);f.propTypes={computedMatch:u().object,path:u().string,exact:u().bool,strict:u().bool,sensitive:u().bool,component:u().func,render:u().func,children:u().oneOfType([u().func,u().node]),location:u().object},f.contextTypes={router:u().shape({history:u().object.isRequired,route:u().object.isRequired,staticContext:u().object})},f.childContextTypes={router:u().object.isRequired};const k=f},70452:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(14779),a=n.n(r),o={},l=0,i=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=o[n]||(o[n]={});if(r[e])return r[e];var i=[],s={re:a()(e,i,t),keys:i};return l<1e4&&(r[e]=s,l++),s};const s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,a=r.path,o=r.exact,l=void 0!==o&&o,s=r.strict,u=void 0!==s&&s,p=r.sensitive,c=void 0!==p&&p;if(null==a)return n;var m=i(a,{end:l,strict:u,sensitive:c}),d=m.re,h=m.keys,f=d.exec(e);if(!f)return null;var k=f[0],b=f.slice(1),g=e===k;return l&&!g?null:{path:a,url:"/"===a&&""===k?"/":k,isExact:g,params:h.reduce((function(e,t,n){return e[t.name]=b[n],e}),{})}}},83524:(e,t,n)=>{"use strict";var r,a=n(67294),o=(r=a)&&"object"==typeof r&&"default"in r?r.default:r;function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var s,u=[];function p(){s=e(u.map((function(e){return e.props}))),c.canUseDOM?t(s):n&&(s=n(s))}var c=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.peek=function(){return s},a.rewind=function(){if(a.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=s;return s=void 0,u=[],e};var l=a.prototype;return l.UNSAFE_componentWillMount=function(){u.push(this),p()},l.componentDidUpdate=function(){p()},l.componentWillUnmount=function(){var e=u.indexOf(this);u.splice(e,1),p()},l.render=function(){return o.createElement(r,this.props)},a}(a.PureComponent);return l(c,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),l(c,"canUseDOM",i),c}}},83231:(e,t,n)=>{var r=n(67294);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=r.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},r.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),l=r.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},r.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function i(e){if(7===e.length)return e;for(var t="#",n=1;n<4;n+=1)t+=e[n]+e[n];return t}function s(e,t,n,r,a){return function(e,t,n,r,a){var o=(e-n)/(t-n);if(0===o)return r;if(1===o)return a;for(var l="#",i=1;i<6;i+=2){var s=parseInt(r.substr(i,2),16),u=parseInt(a.substr(i,2),16),p=Math.round((1-o)*s+o*u).toString(16);1===p.length&&(p="0"+p),l+=p}return l}(e,t,n,i(r),i(a))}var u=function(e){function t(t){e.call(this,t);var n=t.height,r=t.width,a=t.checked;this.t=t.handleDiameter||n-2,this.i=Math.max(r-n,r-(n+this.t)/2),this.o=Math.max(0,(n-this.t)/2),this.state={s:a?this.i:this.o},this.n=0,this.e=0,this.h=this.h.bind(this),this.r=this.r.bind(this),this.a=this.a.bind(this),this.c=this.c.bind(this),this.l=this.l.bind(this),this.u=this.u.bind(this),this.f=this.f.bind(this),this.p=this.p.bind(this),this.b=this.b.bind(this),this.g=this.g.bind(this),this.v=this.v.bind(this),this.w=this.w.bind(this)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.componentDidUpdate=function(e){e.checked!==this.props.checked&&this.setState({s:this.props.checked?this.i:this.o})},t.prototype.k=function(e){this.y.focus(),this.setState({C:e,M:!0,m:Date.now()})},t.prototype.x=function(e){var t=this.state,n=t.C,r=t.s,a=(this.props.checked?this.i:this.o)+e-n;t.R||e===n||this.setState({R:!0});var o=Math.min(this.i,Math.max(this.o,a));o!==r&&this.setState({s:o})},t.prototype.S=function(e){var t=this.state,n=t.s,r=t.R,a=t.m,o=this.props.checked,l=(this.i+this.o)/2,i=Date.now()-a;!r||i<250?this.T(e):o?l<n?this.setState({s:this.i}):this.T(e):n<l?this.setState({s:this.o}):this.T(e),this.setState({R:!1,M:!1}),this.n=Date.now()},t.prototype.h=function(e){e.preventDefault(),"number"==typeof e.button&&0!==e.button||(this.k(e.clientX),window.addEventListener("mousemove",this.r),window.addEventListener("mouseup",this.a))},t.prototype.r=function(e){e.preventDefault(),this.x(e.clientX)},t.prototype.a=function(e){this.S(e),window.removeEventListener("mousemove",this.r),window.removeEventListener("mouseup",this.a)},t.prototype.c=function(e){this.$=null,this.k(e.touches[0].clientX)},t.prototype.l=function(e){this.x(e.touches[0].clientX)},t.prototype.u=function(e){e.preventDefault(),this.S(e)},t.prototype.p=function(e){50<Date.now()-this.n&&(this.T(e),50<Date.now()-this.e&&this.setState({M:!1}))},t.prototype.b=function(){this.e=Date.now()},t.prototype.g=function(){this.setState({M:!0})},t.prototype.v=function(){this.setState({M:!1})},t.prototype.w=function(e){this.y=e},t.prototype.f=function(e){e.preventDefault(),this.y.focus(),this.T(e),this.setState({M:!1})},t.prototype.T=function(e){var t=this.props;(0,t.onChange)(!t.checked,e,t.id)},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.className,o=e.offColor,l=e.onColor,i=e.offHandleColor,u=e.onHandleColor,p=e.checkedIcon,c=e.uncheckedIcon,m=e.boxShadow,d=e.activeBoxShadow,h=e.height,f=e.width,k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(e,["disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","boxShadow","activeBoxShadow","height","width","handleDiameter"]),b=this.state,g=b.s,y=b.R,v=b.M,N={position:"relative",display:"inline-block",textAlign:"left",opacity:t?.5:1,direction:"ltr",borderRadius:h/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},w={height:h,width:f,margin:Math.max(0,(this.t-h)/2),position:"relative",background:s(g,this.i,this.o,o,l),borderRadius:h/2,cursor:t?"default":"pointer",WebkitTransition:y?null:"background 0.25s",MozTransition:y?null:"background 0.25s",transition:y?null:"background 0.25s"},O={height:h,width:Math.min(1.5*h,f-(this.t+h)/2+1),position:"relative",opacity:(g-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:y?null:"opacity 0.25s",MozTransition:y?null:"opacity 0.25s",transition:y?null:"opacity 0.25s"},j={height:h,width:Math.min(1.5*h,f-(this.t+h)/2+1),position:"absolute",opacity:1-(g-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:y?null:"opacity 0.25s",MozTransition:y?null:"opacity 0.25s",transition:y?null:"opacity 0.25s"},x={height:this.t,width:this.t,background:s(g,this.i,this.o,i,u),display:"inline-block",cursor:t?"default":"pointer",borderRadius:"50%",position:"absolute",transform:"translateX("+g+"px)",top:Math.max(0,(h-this.t)/2),outline:0,boxShadow:v?d:m,border:0,WebkitTransition:y?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:y?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:y?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"};return r.createElement("div",{className:n,style:N},r.createElement("div",{className:"react-switch-bg",style:w,onClick:t?null:this.f,onMouseDown:function(e){return e.preventDefault()}},p&&r.createElement("div",{style:O},p),c&&r.createElement("div",{style:j},c)),r.createElement("div",{className:"react-switch-handle",style:x,onClick:function(e){return e.preventDefault()},onMouseDown:t?null:this.h,onTouchStart:t?null:this.c,onTouchMove:t?null:this.l,onTouchEnd:t?null:this.u,onTouchCancel:t?null:this.v}),r.createElement("input",a({},{type:"checkbox",role:"switch",disabled:t,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},k,{ref:this.w,onFocus:this.g,onBlur:this.v,onKeyUp:this.b,onChange:this.p})))},t}(r.Component);u.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:o,checkedIcon:l,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},t.default=u},59936:(e,t,n)=>{e.exports=n(83231)},75251:(e,t,n)=>{"use strict";n(27418);var r=n(67294),a=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;a=o("react.element"),t.Fragment=o("react.fragment")}var l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,p=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(p=t.ref),t)i.call(t,r)&&!s.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:p,props:o,_owner:l.current}}t.jsx=u,t.jsxs=u},72408:(e,t,n)=>{"use strict";var r=n(27418),a=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var l=60109,i=60110,s=60112;t.Suspense=60113;var u=60115,p=60116;if("function"==typeof Symbol&&Symbol.for){var c=Symbol.for;a=c("react.element"),o=c("react.portal"),t.Fragment=c("react.fragment"),t.StrictMode=c("react.strict_mode"),t.Profiler=c("react.profiler"),l=c("react.provider"),i=c("react.context"),s=c("react.forward_ref"),t.Suspense=c("react.suspense"),u=c("react.memo"),p=c("react.lazy")}var m="function"==typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f={};function k(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||h}function b(){}function g(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||h}k.prototype.isReactComponent={},k.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},k.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=k.prototype;var y=g.prototype=new b;y.constructor=g,r(y,k.prototype),y.isPureReactComponent=!0;var v={current:null},N=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r,o={},l=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(l=""+t.key),t)N.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var u=Array(s),p=0;p<s;p++)u[p]=arguments[p+2];o.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:a,type:e,key:l,ref:i,props:o,_owner:v.current}}function j(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var x=/\/+/g;function S(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,l){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case o:s=!0}}if(s)return l=l(s=e),e=""===r?"."+S(s,0):r,Array.isArray(l)?(n="",null!=e&&(n=e.replace(x,"$&/")+"/"),C(l,t,n,"",(function(e){return e}))):null!=l&&(j(l)&&(l=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(l,n+(!l.key||s&&s.key===l.key?"":(""+l.key).replace(x,"$&/")+"/")+e)),t.push(l)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var p=r+S(i=e[u],u);s+=C(i,t,n,p,l)}else if("function"==typeof(p=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e)))for(e=p.call(e),u=0;!(i=e.next()).done;)s+=C(i=i.value,t,n,p=r+S(i,u++),l);else if("object"===i)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function P(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function E(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var D={current:null};function T(){var e=D.current;if(null===e)throw Error(d(321));return e}var _={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:v,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!j(e))throw Error(d(143));return e}},t.Component=k,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_,t.cloneElement=function(e,t,n){if(null==e)throw Error(d(267,e));var o=r({},e.props),l=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=v.current),void 0!==t.key&&(l=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(p in t)N.call(t,p)&&!w.hasOwnProperty(p)&&(o[p]=void 0===t[p]&&void 0!==u?u[p]:t[p])}var p=arguments.length-2;if(1===p)o.children=n;else if(1<p){u=Array(p);for(var c=0;c<p;c++)u[c]=arguments[c+2];o.children=u}return{$$typeof:a,type:e.type,key:l,ref:i,props:o,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:i,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return T().useCallback(e,t)},t.useContext=function(e,t){return T().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return T().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return T().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return T().useLayoutEffect(e,t)},t.useMemo=function(e,t){return T().useMemo(e,t)},t.useReducer=function(e,t,n){return T().useReducer(e,t,n)},t.useRef=function(e){return T().useRef(e)},t.useState=function(e){return T().useState(e)},t.version="17.0.1"},67294:(e,t,n)=>{"use strict";e.exports=n(72408)},85893:(e,t,n)=>{"use strict";e.exports=n(75251)},35666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof k?t:k,o=Object.create(a.prototype),l=new P(r||[]);return o._invoke=function(e,t,n){var r=c;return function(a,o){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw o;return D()}for(n.method=a,n.arg=o;;){var l=n.delegate;if(l){var i=x(l,n);if(i){if(i===f)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=p(e,t,n);if("normal"===s.type){if(r=n.done?h:m,s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=h,n.method="throw",n.arg=s.arg)}}}(e,n,l),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c="suspendedStart",m="suspendedYield",d="executing",h="completed",f={};function k(){}function b(){}function g(){}var y={};s(y,o,(function(){return this}));var v=Object.getPrototypeOf,N=v&&v(v(E([])));N&&N!==n&&r.call(N,o)&&(y=N);var w=g.prototype=k.prototype=Object.create(y);function O(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(a,o,l,i){var s=p(e[a],e,o);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(c).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,i)}))}i(s.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var a=p(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,l=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return l.next=l}}return{next:D}}function D(){return{value:t,done:!0}}return b.prototype=g,s(w,"constructor",g),s(g,"constructor",b),b.displayName=s(g,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,i,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},O(j.prototype),s(j.prototype,l,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var l=new j(u(t,n,r,a),o);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},O(w),s(w,i,"Generator"),s(w,o,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return i.type="throw",i.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o],i=l.completion;if("root"===l.tryLoc)return a("end");if(l.tryLoc<=this.prev){var s=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(s&&u){if(this.prev<l.catchLoc)return a(l.catchLoc,!0);if(this.prev<l.finallyLoc)return a(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return a(l.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return a(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},60053:(e,t)=>{"use strict";var n,r,a,o;if("object"==typeof performance&&"function"==typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,s=i.now();t.unstable_now=function(){return i.now()-s}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,p=null,c=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(c,0),e}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(c,0))},r=function(e,t){p=setTimeout(e,t)},a=function(){clearTimeout(p)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var m=window.setTimeout,d=window.clearTimeout;if("undefined"!=typeof console){var h=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var f=!1,k=null,b=-1,g=5,y=0;t.unstable_shouldYield=function(){return t.unstable_now()>=y},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var v=new MessageChannel,N=v.port2;v.port1.onmessage=function(){if(null!==k){var e=t.unstable_now();y=e+g;try{k(!0,e)?N.postMessage(null):(f=!1,k=null)}catch(e){throw N.postMessage(null),e}}else f=!1},n=function(e){k=e,f||(f=!0,N.postMessage(null))},r=function(e,n){b=m((function(){e(t.unstable_now())}),n)},a=function(){d(b),b=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<x(a,t)))break e;e[r]=t,e[n]=a,n=r}}function O(e){return void 0===(e=e[0])?null:e}function j(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var o=2*(r+1)-1,l=e[o],i=o+1,s=e[i];if(void 0!==l&&0>x(l,n))void 0!==s&&0>x(s,l)?(e[r]=s,e[i]=n,r=i):(e[r]=l,e[o]=n,r=o);else{if(!(void 0!==s&&0>x(s,n)))break e;e[r]=s,e[i]=n,r=i}}}return t}return null}function x(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],C=[],P=1,E=null,D=3,T=!1,_=!1,M=!1;function A(e){for(var t=O(C);null!==t;){if(null===t.callback)j(C);else{if(!(t.startTime<=e))break;j(C),t.sortIndex=t.expirationTime,w(S,t)}t=O(C)}}function L(e){if(M=!1,A(e),!_)if(null!==O(S))_=!0,n(R);else{var t=O(C);null!==t&&r(L,t.startTime-e)}}function R(e,n){_=!1,M&&(M=!1,a()),T=!0;var o=D;try{for(A(n),E=O(S);null!==E&&(!(E.expirationTime>n)||e&&!t.unstable_shouldYield());){var l=E.callback;if("function"==typeof l){E.callback=null,D=E.priorityLevel;var i=l(E.expirationTime<=n);n=t.unstable_now(),"function"==typeof i?E.callback=i:E===O(S)&&j(S),A(n)}else j(S);E=O(S)}if(null!==E)var s=!0;else{var u=O(C);null!==u&&r(L,u.startTime-n),s=!1}return s}finally{E=null,D=o,T=!1}}var I=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){_||T||(_=!0,n(R))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return O(S)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var n=D;D=t;try{return e()}finally{D=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=I,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=D;D=e;try{return t()}finally{D=n}},t.unstable_scheduleCallback=function(e,o,l){var i=t.unstable_now();switch(l="object"==typeof l&&null!==l&&"number"==typeof(l=l.delay)&&0<l?i+l:i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:P++,callback:o,priorityLevel:e,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>i?(e.sortIndex=l,w(C,e),null===O(S)&&e===O(C)&&(M?a():M=!0,r(L,l-i))):(e.sortIndex=s,w(S,e),_||T||(_=!0,n(R))),e},t.unstable_wrapCallback=function(e){var t=D;return function(){var n=D;D=t;try{return e.apply(this,arguments)}finally{D=n}}}},63840:(e,t,n)=>{"use strict";e.exports=n(60053)},7920:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ye});var r=n(85893),a=n(59713),o=n.n(a),l=n(45424),i=n(15028),s=n(63038),u=n.n(s),p=n(67294),c=n(45697),m=n.n(c),d=n(41143),h=n.n(d),f=n(19768),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},v=function(e){function t(){var n,r;b(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=g(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!y(e)){e.preventDefault();var t=r.context.router.history,n=r.props,a=n.replace,o=n.to;a?t.replace(o):t.push(o)}},g(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);h()(this.context.router,"You should not use <Link> outside a <Router>"),h()(void 0!==t,'You must specify the "to" property');var a=this.context.router.history,o="string"==typeof t?(0,f.ob)(t,null,null,a.location):t,l=a.createHref(o);return p.createElement("a",k({},r,{onClick:this.handleClick,href:l,ref:n}))},t}(p.Component);v.propTypes={onClick:m().func,target:m().string,replace:m().bool,to:m().oneOfType([m().string,m().object]).isRequired,innerRef:m().oneOfType([m().string,m().func])},v.defaultProps={replace:!1},v.contextTypes={router:m().shape({history:m().shape({push:m().func.isRequired,replace:m().func.isRequired,createHref:m().func.isRequired}).isRequired}).isRequired};const N=v;var w=n(42473),O=n.n(w),j=n(14779),x=n.n(j),S={},C=0,P=function(e){var t=e,n=S[t]||(S[t]={});if(n[e])return n[e];var r=x().compile(e);return C<1e4&&(n[e]=r,C++),r};const E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("/"===e)return e;var n=P(e);return n(t,{pretty:!0})};var D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var M=function(e){function t(){return T(this,t),_(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){h()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=(0,f.ob)(e.to),n=(0,f.ob)(this.props.to);(0,f.Hp)(t,n)?O()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"==typeof n?E(n,t.params):D({},n,{pathname:E(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(p.Component);M.propTypes={computedMatch:m().object,push:m().bool,from:m().string,to:m().oneOfType([m().string,m().object]).isRequired},M.defaultProps={push:!1},M.contextTypes={router:m().shape({history:m().shape({push:m().func.isRequired,replace:m().func.isRequired}).isRequired,staticContext:m().object}).isRequired};const A=M;var L=n(94184),R=n.n(L),I=n(18186);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e,t){return z(z({},{fontSize:0===e?"14px":"12px"}),{},"menuItem"===t?{paddingLeft:"".concat(21+16*e,"px")}:{paddingLeft:"".concat(16*e,"px")})},q=(0,p.createContext)(void 0),H=function(e){var t=e.children,n=e.value;return(0,r.jsx)(q.Provider,{value:n,children:t})},X=function(){return(0,p.useContext)(q)},Y=n(34666),U=n.n(Y);var W=n(50008),V=n.n(W);function G(e){var t=e.isShow,n=e.children,a=(0,p.useRef)(!1),o=(0,p.useRef)(null),l=(0,p.useRef)({}),i=function(){o.current.style.height="0px"},s=(0,p.useCallback)((function(){var e=o.current;e.style.display="block",e.style.height=""}),[]),u=(0,p.useCallback)((function(){var e=o.current;e.style.display="block",0!==e.scrollHeight&&(e.style.height="".concat(e.scrollHeight,"px")),l.current.enterTimer=setTimeout((function(){return s()}),200)}),[s]),c=(0,p.useCallback)((function(){var e=o.current;e.style.display="block",0!==e.scrollHeight&&(e.style.height="".concat(e.scrollHeight,"px"))}),[]),m=(0,p.useCallback)((function(){var e=o.current;e.style.display="none",e.style.height=""}),[]),d=(0,p.useCallback)((function(){var e=o.current;0!==e.scrollHeight&&(e.style.height="0px"),l.current.leaveTimer=setTimeout((function(){return m()}),200)}),[m]),h=(0,p.useCallback)((function(e){clearTimeout(l.current.enterTimer),clearTimeout(l.current.leaveTimer),e?(i(),u()):(c(),d())}),[c,u,d]);return(0,p.useEffect)((function(){a.current?h(t):(a.current=!0,i(),t&&u())}),[u,t,h]),(0,r.jsx)("div",{className:U()["collapse-transition"],ref:o,children:n})}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var J=function(e){var t=e.theme,n=void 0===t?"light":t,a=e.children,l=e.selectedKey,i=e.onSelect,s=void 0===i?function(){}:i,c=e.inlineCollapsed,m=void 0!==c&&c,d=e.defaultOpenKeys,h=void 0===d?[]:d,f=e.menuStyle,k=e.toggle,b=(0,p.useState)(""),g=u()(b,2),y={theme:n,mode:"inline",inlineCollapsed:m,defaultOpenKeys:h,selectedKey:l,onSelect:s,hoverKey:g[0],onHoverKey:g[1]};return(0,r.jsxs)(H,{value:y,children:[(0,r.jsx)("div",{className:R()(U().toggle,o()({},"".concat(U()["toggle-collapsed"]),m)),onClick:k,children:(0,r.jsx)("i",{className:R()(U()["toggle-icon"],o()({},"".concat(U()["toggle-icon-close"]),m))})}),(0,r.jsx)("ul",{className:R()(U().menu,U()["menu-".concat(n)],U()["menu-inline"],o()({},U()["menu-inline-collapsed"],m)),style:f,children:a})]})};J.Item=function(e){var t=e.title,n=void 0===t?"":t,a=e.icon,l=e.keyValue,i=void 0===l?"":l,s=e.level,u=void 0===s?0:s,c=X(),m=c.theme,d=c.selectedKey,h=c.onSelect,f=c.onHoverKey,k=c.inlineCollapsed,b=(0,p.useRef)(null),g=i.indexOf(d)>-1;(0,p.useEffect)((function(){g&&!1===k&&setTimeout((function(){b.current.scrollIntoView({block:"center",behavior:"smooth"})}),300)}),[i,d,k]);return(0,r.jsxs)("li",{className:R()(U()["menu-item"],U()["menu-".concat(m)],o()({},U()["menu-item-selected"],g)),onMouseEnter:function(){f(i)},onMouseLeave:function(){return f("")},onClick:function(){h(i)},style:F(u,"menuItem"),ref:b,children:[a?(0,r.jsx)("span",{className:R()(U()["menu-icon"]),children:a}):null,(0,r.jsx)("span",{className:R()(U()["menu-item-title"]),children:n})]})},J.SubMenu=function(e){var t,n,a,l,i,s=e.children,c=e.title,m=e.icon,d=e.level,h=void 0===d?0:d,f=e.keyValue,k=void 0===f?"":f,b=e.onTitleClick,g=void 0===b?function(){}:b,y=X(),v=y.selectedKey,N=y.mode,w=y.hoverKey,O=y.onHoverKey,j=y.defaultOpenKeys,x=void 0===j?[]:j,S=(0,p.useState)(-1!==x.indexOf(k)),C=u()(S,2),P=C[0],E=C[1],D=(0,p.useRef)(null),T=(0,p.useRef)(null),_=(!1,t=(0,p.useRef)(false),n=(0,p.useState)(false),l=(a=u()(n,2))[0],i=a[1],t.current=l,[function(){return t.current},function(e){t.current=e,i(e)}]),M=u()(_,2),A=M[0],L=M[1];return(0,I.Pu)((function(){T.current&&D.current&&(T.current.style.left="".concat(D.current.getBoundingClientRect().right+4,"px"),T.current.style.top="".concat(D.current.getBoundingClientRect().top,"px"))}),[A()]),(0,r.jsxs)("li",{className:R()(U().menu,U().submenu,U()["submenu-".concat(N)],o()({},U()["submenu-selected"],function e(t){return p.Children.toArray(t).some((function(t){if(!t||"object"!==V()(t))return!1;var n=t,r=n.props.keyValue,a=r?String(r):"";return"MenuItem"===n.type.name?-1!==v.split("").indexOf(a)||w===a:"SubMenu"===n.type.name&&(e(n.props.children)||w===a)}))}(s))),onMouseEnter:function(){return O(k)},ref:D,children:[(0,r.jsxs)("div",{className:R()(U()["submenu-title"]),style:F(h,"subMenu"),onClick:function(){g(k),"inline"===N&&E(!P)},onMouseEnter:function(){L(!0),O(k)},onMouseLeave:function(){O("")},children:[(0,r.jsx)("i",{className:R()(U()["submenu-arrow"],o()({},U()["submenu-arrow-open"],"inline"===N&&P))}),m?(0,r.jsx)("span",{className:R()(U()["menu-icon"]),children:m}):null,(0,r.jsx)("span",{className:R()(U()["submenu-title-field"]),children:c})]}),"inline"===N?(0,r.jsx)(G,{isShow:P,children:(0,r.jsx)("ul",{className:R()(U().menu,U().submenu),children:function e(t){return(0,r.jsx)(r.Fragment,{children:p.Children.map(t||s,(function(t){if(!t||"object"!==V()(t))return null;var n,r=t;return((n=r).type?n.type===p.Fragment:n===p.Fragment)&&r.props.children?e(r.props.children):(0,p.cloneElement)(r,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({level:h+1},r.props))}))})}()})}):null]})};const Q=J;var K=n(6479),Z=n.n(K),ee={folder:'<svg viewBox="0 0 1024 1024"><defs/><path d="M838 151H450a94 94 0 00-94-91H184c-52 0-94 42-94 94v595c0 51 42 93 94 93h654c52 0 94-42 94-93V244c0-51-42-93-94-93zm-654-31h172c19 0 35 15 35 34v26c0 17 13 30 29 30h418c19 0 34 15 34 34v27H150V154c0-19 15-34 34-34zm654 663H184a34 34 0 01-34-34V330h722v419c0 19-15 34-34 34z"/></svg>',file:'<svg viewBox="0 0 1024 1024"><defs/><path d="M512 320H256v-64h256v64zM256 512h448v-64H256v64zm0 128h448v-64H256v64zm0 128h448v-64H256v64zm640-480v608c0 35-29 64-64 64H192c-35 0-64-29-64-64V128c0-35 29-64 64-64h480l224 224zm-64 32L640 128H192v768h640V320z"/></svg>',edit:'<svg viewBox="0 0 1026 1024"><defs/><path d="M308 709l56-122 70 68-126 54zm96-171l366-353 82 80-366 352-82-79zm550-371l-51 48-82-80 50-48c8-8 24-6 32 2l49 47c5 5 8 11 8 18 0 5-3 9-6 13zM314 530l-2 3-52 184c-3 11 0 23 8 31 6 5 14 9 23 9l8-2 190-49h1a8 8 0 006-3l508-489c15-14 23-34 23-55 0-25-11-49-29-67l-49-47c-19-18-43-28-69-28-23 0-43 8-58 23L315 528l-1 2zM101 0C45 0 0 45 0 100v824c0 54 45 99 101 99h806c56 0 101-45 101-99V398h-86v451c0 49-41 88-90 88H176c-49 0-90-39-90-88V173c0-48 41-88 90-88h457V0H101z"/></svg>',"update-time":'<svg viewBox="0 0 1024 1024"><defs/><path d="M649 649c-4 0-7 0-11-4L502 543c-4-4-7-7-7-14V222c0-10 7-17 17-17s17 7 17 17v300l130 96c7 7 10 17 3 24-3 3-7 7-13 7z"/><path d="M512 922a409 409 0 01-382-270c-4-10 0-17 10-21 10-3 17 0 20 11a376 376 0 00352 245c205 0 375-167 375-375 0-10 7-17 18-17s17 7 17 17c0 225-185 410-410 410zM119 529c-6 0-17-7-17-17a409 409 0 01792-140c4 10 0 17-10 21-10 3-17 0-20-11a376 376 0 00-352-245 377 377 0 00-375 375c0 10-7 17-18 17z"/><path d="M119 563c-3 0-10 0-13-3l-86-86c-6-6-6-17 0-23s18-7 24 0l72 71 72-71c7-7 17-7 24 0s6 17 0 23l-86 86c4 3-3 3-7 3zM990 580c-4 0-10 0-14-3l-71-72-72 72c-7 7-17 7-24 0s-7-17 0-24l85-85c7-7 17-7 24 0l86 85c6 7 6 17 0 24-4 3-11 3-14 3z"/></svg>',"create-time":'<svg viewBox="0 0 1024 1024"><defs/><path d="M512 67a445 445 0 100 890 445 445 0 000-890zm0 849a404 404 0 110-808 404 404 0 010 808zm222-404H532V249a20 20 0 00-40 0v283c0 11 9 20 20 20h222a20 20 0 000-40z"/></svg>',search:'<svg viewBox="0 0 1024 1024"><defs/><path d="M401 801a401 401 0 110-801 401 401 0 010 801zm0-89a312 312 0 100-623 312 312 0 000 623z"/><path d="M668 602l315 315-63 63-315-315z"/></svg>'};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=function(e){return e.split("svg")[1]};var ae=n(69833),oe=n.n(ae);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const se=function(e){var t=e.type,n=e.color,a=e.prefixCls,l=void 0===a?"icon":a,i=e.size,s=e.style,u=e.className,c=Z()(e,["type","color","prefixCls","size","style","className"]);(0,p.useEffect)((function(){!function(e){var t=e.type,n=e.svgContent;if(document){var r=document.getElementById("__CRD_SVG_SPRITE_NODE__"),a=document.body;if(r){if(n){var l=r.children[0],i=l.children;if(-1!==(i?[].slice.call(i).map((function(e){return e.id})):[]).indexOf(t))return;l.innerHTML+="<symbol id=".concat(t).concat(re(n),"symbol>")}}else a&&"function"==typeof a.insertAdjacentHTML&&a.insertAdjacentHTML("afterbegin",function(e){var t=e.svgContent,n=e.type,r=t?o()({},"".concat(n),t):{},a=ne(ne({},ee),r),l=Object.keys(a).map((function(e){var t=re(a[e]);return"<symbol id=".concat(e).concat(t,"symbol>")})).join("");return'\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    id="__CRD_SVG_SPRITE_NODE__"\n    style="display:none;overflow:hidden;width:0;height:0"\n  >\n    <defs>\n      '.concat(l,"\n    </defs>\n  </svg>\n")}(e))}}(e)}),[t]);var m=R()(oe()[l],u),d=ie({},s);n&&(d.color=n),i&&(d.fontSize=i);var h=function(e,t){return Object.keys(e).filter((function(e){return-1===t.indexOf(e)})).reduce((function(t,n){return t[n]=e[n],t}),{})}(c,["svgContent"]);return(0,r.jsx)("svg",ie(ie({className:m,style:d},h),{},{children:(0,r.jsx)("use",{xlinkHref:"#".concat(t)})}))};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ce=function(e){var t=e.offsetTop,n=e.offsetBottom,a=e.children,o=e.target,l=e.onChange,i=e.className,s=e.wrapperClassName,c=e.style,m=e.width,d=e.affixStyle,h=(0,p.useRef)(null),f=(0,p.useRef)(null),k=(0,p.useRef)(m),b=(0,p.useState)({}),g=u()(b,2),y=g[0],v=g[1],N=window,w=(0,p.useRef)(!1),O=(0,p.useState)(w.current),j=u()(O,2),x=j[0],S=j[1];(0,p.useEffect)((function(){k.current=m}),[m]),(0,p.useEffect)((function(){_()}),[x,m]),(0,p.useEffect)((function(){return o&&(N=o()),N.addEventListener("scroll",A),function(){o&&(N=o()),N.removeEventListener("scroll",A)}}),[t,n]);var C,P,E,D,T=function(e){return"number"==typeof e},_=function(){var e=f.current?f.current.getBoundingClientRect():{},t=e.width,n=e.height;h.current&&(h.current.style.height="".concat(n,"px")),h.current&&(h.current.style.width="".concat("number"==typeof m?m:t,"px")),f.current&&(f.current.style.width="".concat("number"==typeof m?m:t,"px"))},M=function(){w.current=!w.current,S(w.current)},A=(C=function(){var e=h.current&&h.current.getBoundingClientRect();if(e){var r=e.top,a=e.bottom,o={width:"number"==typeof k.current?k.current:h.current&&h.current.getBoundingClientRect().width,zIndex:999},i=0,s=0;if(N===window)a=window.innerHeight-a;else{var u=N&&N.getBoundingClientRect();r-=i=u&&u.top,a=(s=u&&u.bottom)-a}T(t)&&r<=t||T(n)&&a<=n?w.current||(o.position="fixed",T(t)&&(o.top=t+i),T(n)&&(o.bottom=N===window?a:window.innerHeight-(s-n)),l&&l(!0),M(),v(o)):w.current&&(o.position="relative",l&&l(!1),M(),v(o))}},20,function(){var e=this,t=arguments;P?(clearTimeout(E),E=setTimeout((function(){20-(Date.now()-D)<=0&&(C.apply(e,t),D=Date.now())}),Math.max(20-(Date.now()-D),0))):(C.apply(e,t),D=Date.now(),P=!0)});return(0,r.jsx)("div",{ref:h,style:c,className:i,children:(0,r.jsx)("div",{ref:f,className:s,style:pe(pe(pe({},{position:"relative"}),y),d),children:a})})};var me=n(59936),de=n(17862),he=!!n.n(de)()()&&"ontouchend"in window,fe=I.v8&&!I.WQ,ke=n(15780),be=n.n(ke);const ge=function(e){var t=e.placeholder,n=void 0===t?"Search":t,a=e.className,o=(0,p.useState)(""),l=u()(o,2),i=l[0],s=l[1];return(0,p.useEffect)((function(){}),[i]),(0,r.jsxs)("div",{className:R()(be().search,a),children:[(0,r.jsx)(se,{type:"search",size:"14"}),(0,r.jsx)("input",{placeholder:n,value:i,onChange:function(e){s(e.target.value)}})]})};var ye=n(65567),ve=n.n(ye);const Ne=function(e){var t=e.className,n=e.logo,a={title:"Time Flying",menu:["React","BasicSkill","FeCloud","TypeScript","Algorithm","LeetCode","Product","RaspberryPi"],menuOpenKeys:"/BasicSkill",theme:"crd-seed",user:"MuYunyun",repo:"blog",branch:"main",deploy_branch:"gh-pages","github-ribbons":!0,domain:"https://muyunyun.cn",seo:{google:!0},language:"en",inject:"injectLogic.js",abbrlink:!0}||{},o=a.user,l=a.repo,i=(0,p.useState)(!1),s=u()(i,2),c=s[0],m=s[1];return(0,r.jsxs)("div",{className:R()(ve().header,t),children:[(0,r.jsxs)("div",{className:ve().wrapper,children:[(0,r.jsx)(N,{to:"/",replace:!0,className:ve().titleLink,children:(0,r.jsxs)("div",{className:ve().logo,children:[n&&(0,r.jsx)("img",{alt:"logo",src:n}),!he&&(0,r.jsx)("span",{children:"Time Flying"})]})}),{title:"Time Flying",menu:["React","BasicSkill","FeCloud","TypeScript","Algorithm","LeetCode","Product","RaspberryPi"],menuOpenKeys:"/BasicSkill",theme:"crd-seed",user:"MuYunyun",repo:"blog",branch:"main",deploy_branch:"gh-pages","github-ribbons":!0,domain:"https://muyunyun.cn",seo:{google:!0},language:"en",inject:"injectLogic.js",abbrlink:!0}.search?(0,r.jsx)(ge,{className:ve().search}):null]}),(0,r.jsxs)("div",{className:ve().rightArea,children:[(0,r.jsx)(me.default,{className:ve()["no-dark-mode"],onChange:function(e){e?document.body.classList.add(ve().darkMode):document.body.classList.remove(ve().darkMode),m(e)},checked:c,width:50,height:24,offColor:"#0f1114",onColor:"#0f1114",uncheckedIcon:(0,r.jsx)("img",{className:ve().sun,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAABwNJREFUWAmtV1tsFFUY/s6Z2d22zLYlZakUCRVaQcqlWIiCiS1gTEB9UAO+GR9En3iQGI0xJiSiRB98MjEq8cEQTSBeHhQM0V7whtEGDWC90BYitxahtNtu25058/v/ZzvLbilawJNM5+yZ89+//1LgJhYRNLW1uDfBAvpGiIk2O5auvfFxqIH3ZJ8/u06GN6Z9+wVl5SjcD1IbZa/UPkPyYl2uR4dreoD2bnbYxTlBBRytkHXtAREphP5KuH4lddx9h70yxX05t7yYXwGb6W8nx1jibpl2rFlGBxcG9M18okOrn7Bnk/BAO/4bI0UeEE1zjBp3UmvjOxJXJdaKN/ZiIu4tOZrAb4aTdZAZArKmWeiiJZ6jt5tiagdCS9+6cgO1Ne6Mvhe+ixTIfyDVhipnK9p+P0Edqx9RW/YZtQVGmOLChRxNNlyPsTEgPQKMB3dbEHa0h1awYmQ83enTd2vmUtvKd1Glv2RkzBb+kZGRrKtjzG60Wguhd/lJZBingbcfWWe72vjT75bJDrhYtvA0hrurETDr5HyF2Knb1MM4ab//xIoOqueA0edRnkkinTyJdYvqLFDZO4zUPFCvVoDjJq4T7TE61IWh4x5KqxX5KVKkX8WZ/t2ov2cb3MHt4dhIyOxIJxJOOF6xRx/99BksXLoecWcXytILMNBDqKpnGZWPquYfPxY8iXGR9fK+SgFrgcRPXPjVqhehL+3EmZ5RGJQi1QBU8TPThQnOQzm+5UXGIcetUeEAfP13VwzpI+w1jGJWdSliNfvVhiMPiOsllJag4M/UGHiqM6dlBb2OTLKHHV6KkvogrJ4XhBWniWK/Gp1MQyf93FOeUXKmKk/FzJxbQtKLjFXYT4USupy8fQVir2ynVEBiZMG0qtOHMS/AW4Gwrk7BG3C1F0B5nqNKE0CME4MfVRLPnXkBKe+ipvoFhNQywOhdghvLi0F8ReyVXV4BKTBRbbe5f64zR/DHsdZw1hJfeWlHl/GNRJzDxrd5m192z78TMaVnKELZoINZS4BzQ7vtnZljSnha/pPCbkuxzXcupYwI5tIeCpGc0Yp9tWHZQy/rmYhRfNgg4bHJBYLzGkxsRJF4XKlE2jBOHNSv3kY7Tj6vthzPFl61BrYwqFlmEQhtSVXmLiksxLmtRgYXI1ULU61JJ4eVKmG3/5sCVgpbMT6OMJ2E08/29Xf3w6v4FnHdCjfWgXu/O8Z5mLdCkeRs2khHe1DqOtQwbHWTAnM5S2HNmhALYo5KjkPFrMMKjZl6HxhWIAb0BqE+/73GrBRQUsKYiBu4JX8ycI6wtw+i5ef3NZpsrKVSHYCP37jwGDgeE1SA0S/xtl5SU2fs1ApEp0qTLVRjgyycDSsLHMSwmFltZMStR3uLLg6BdLhDa5dC6ryU2pHBe1BVO9tUcwfitJt2CLJZUHoG6T7Op75u0IyK31TCPcwFqgPk/KCaD3dFOuZBCO7xvCT/j048b3I3c7F2+WuOW7qdgkucFYlcQ4qop3yzTX7WaKfOCccye3Ts1Etq0+a/BHCF1yPgF3tAUkR6OrtGmo6gl94qqcXKh3rDyrOkPa58URoWcov2Mo6M+0QjrqKB+b7++oMa9Sz+ZkM0mie6aAtnGUvhmxaI+TogPOSQedgWioGSHFLn3v4kLh4HRspNmOGv41k+55siLFp2z6xYeJjhljFcbmxJlr4ga06TbevSByz/glQq4BJx46/c+237PbBqEYKxX3HpmKZEnQnr65X20hqJYaNcLoFOLiJk2LuBbyg7Q0OEn+hm0P3honxFD6rdxYorKpeIoi4YSSvyQHQIbM5t4+YNxLj/OxhVOOE4585qGpjnq+wSx6Q9CtNxTjd5klB+g6Mv36r0+b9cZFi44WYkHdG2ZWb3TtOUOXyVAlKlpGvJIAJ3eBMyfYS5C0qRZGtC85j+4sOasDe9xznPYezhhO/2Q6eP2fSOvYHOjtuQ1a9Q1VKynVDaMc8E0tptdxUsTFpFIYjcZKcbnoaQTNdiqCwNlL4G7oziSqGnT1ALf34vhk4R5zU3qYV9ONp9K88RtouShE68JwaU8dFw5W617shWa9ykeaBIn2hcsvPgL00k45QdTCZuSVcTRNs+8fnyLvooQfR5iujAnR9bxfY2xOVOxFS8SK3Le0l48VyYu1M8HRe5JD8wKPTjYnifaK3Wfn/GChYQ8ZAi6WRzWgqLV5YrsVLnZaVSoXU1g9gOIDwFySiGi+Zdrnzr7J3r+SMuszlcQCRn8lNGcTuSy2jOI7o9mxjZo+vR3ej3tN+ifRSOyUTS0+VMOid93cCubeiy/6TImS0QxRSCq2vxKr45zV+FQnjWH6D2xg+E9EatLcLAdHTgtGGD80D6jM0+aOl4wJgO/f96R2aJKCQ3yvgftRhdFMOpd6oAAAAASUVORK5CYII=",width:"16",height:"16",role:"presentation",alt:"sun"}),checkedIcon:(0,r.jsx)("img",{className:ve().moon,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAABlJJREFUWAm1V3tsFEUcntnXvXu0tBWo1ZZHihBjCEWqkHiNaMLDRKOtQSKaiCFKQtS/SbxiFCHGCIkmkBSMwZhQNTFoQZD0DFiwtCDFAkdDqBBBKFj63rvdnfH7zfVo5aFBj0l2Z/dm5vd98/0es8dYjlpr62azufnDQNZcU1PciMfjWvb9rvZSMk4Ayfb36pLH13189GC8LAtIRLLPt+pzwrCuLq4ISEv/gHmitrAwfPbEkXc/ad4dL6iujrvyX0jcitgd/yZlZqftP6995Mr5TVLa22Tn8XVX2g/XLSRjUu7Q79jonS7I7hS7/0oOb5VyqF52n98oj7esXX07EjlxwXWisRmSnm3b29TTM8iYrjmFBWExubxwY/uhNas4r/WySl1fc5cetDMd7ydl+lMJJRw5WC8ud62Xx5rfepzwxgZmbhUYNS5Stvsj4yo2GXJEFBVHWDBkfdbR9HpYBaaUajDnBLKKpl1xRKYcgGtMCqEzTaSnThk/SQT0uJqTqFNBmXMCsZE48DzRZRMBRjv1GHNdk3HBImF9ZUvTyxM40pMKVc4JZBXQOLOFoDeKSxdp6HIQcO4rjYT9fn0pjbz9GLt7BAAODmjSVReXUMFzNW5x5vfxp2mIxZjIuQKJxAmFa+is2DQJJQ0JyBVExNOYcJnPxx/6/utnijmP555ALEagKAGGnGn64QORBjARcIA/yJk7JMJBLRrNtybTvH88KGjCf2jK86bhzmMcwDKFZEQvbIhxFYhChoMWMzU2iWznlIBEVJOsP+1bdX/ALx9l7jApADeDAEcMkE90JnUmmGl4USKQ0xhoW3JB5XY0YrxYWhLwMZZypUyjDGH35AbNwgUGiFBPpuGbHCpAOV1ZGXf2f/taftAv31DyeymN2d1IhAFAwTOmnzF/kKcdh3me7CYCOVNgycju84u8DeVlwfFq9/ZlTfldYrMUjOlrkjkD+rU+WzCROkcEchIDHR011syZW9JHD7y07N6JvhWMpz3pugaTkB6lWFVCKkhck0zzeMp2utq+uHrmfxOgoCO/Z8CXPlEQ1bdH8wgvhSIkEG0ICcQeExIFGdimjvKka7btJFZuaXOammIGKUCFQ53j9EN1dYKWqHf0t2w407W2tgs6h89ZnImjB55flh81tt9XirjjDuSl+oIPRQ0iWPgNZ5GqTqbBe3vSzEl5n5PhWKwocyR2HlqYN61qV18WjYjE8JLARZPQsUSim8foIRYTlGr02Ly7piASFRtKJ4VfieYhxdS2JcDVMN6xVOKZyrCGm8b108lrLRVzvptLH7IoEFLFANes6KnDi+uxfmvFnF17oALq5u1agu3/YfHkcSFzeSggV5eXRfIB7CHNcO5SUI+Ih5Ir7f4MAV9IqdFzdZgNpZw1Gcs1mNvgGbTbqQ9/cz7ZuuhgyYRQ49ljTyWHhr2DwpNHHFf+5gnWZ3Bharo+0TD5dNMw5vv9RlVpSRDHK4TlnoukhtYApuOHejSZQuo5g/A9BysdKRCyLl6062fN37OXMDlvUJtUrtmxo0avrW3wTrYs3jJ9RvRVChrmSmanPMpX2OXMsmDGh6AiEIwBAlvkOqIdBy+8JyAz8pz7QxiDth4KDy5uAlwzrWTnwC8Vc4KVAMZ3YUZ+IqoIjP3h5KFFX1ZMy3uW+7RhEDHgTi0zC9rS7uhPCDiNrGFyqBeERtKN/B0YlyFCkw0NJ5C0Ojv7zvT1a1WV1TuvZDdL4NTgB7CASYpsen6gqvG5jmTf5qHedADgkBl3D0nkSgNhZACDyi0FUKZRr3IdRjgN4WPPoFMIIegIK3mqd38fS80mcJKelM4szNyzZtQbkchGePuBRS8Eg9pHU8ojRQpSqs+ajAIwTjjUMQ/nvTNM0kicwYxZIYMh/891DYi+fvedB+c1xsm4lDU6ya+Axtz+RiAzEVYbajQOpq17F0R9QevNcEhfcU+xvyQQUalGJBSesqOkgPQ4YNyUZL9fSvUPDjoNAwN8/dwFjaczNkc3ptaMud1EIDtGcmXTcefO2cGSvKIFfp/2JIJxlq7xEl3nVPM4fDeIbPkD16/ptNc0bDu7qxbsu0R2JGywWMIjF2ft3tjfloAyQAGXiOn8hrqwbVvMXzaO+QeHXP6nF0wvX74Hf4NGG5GPjSlYoyM3P/0FbCT6zvM/yYoAAAAASUVORK5CYII=",width:"16",height:"16",role:"presentation",alt:"moon"})}),(0,r.jsx)("a",{href:"https://github.com/".concat(o,"/").concat(l),className:ve()["github-corner"],title:"Star me on GitHub","aria-label":"Follow me on GitHub",rel:"noopener",target:"_blank",children:(0,r.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 250 250","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),(0,r.jsx)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"white",style:{transformOrigin:"130px 106px"},className:ve()["octo-arm"]}),(0,r.jsx)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"white"})]})})]})]})};var we=n(11744),Oe=n.n(we);const je=function(e){var t=e.inlineCollapsed;return(0,r.jsx)("div",{className:R()(Oe().footer,o()({},"".concat(Oe()["footer-inlineCollapsed"]),t)),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:Oe().powered_by,children:["Powered by".concat(" "),(0,r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/MuYunyun/create-react-doc",children:"Create React Doc"}),"."]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("i",{className:"fa fa-user"}),(0,r.jsx)("span",{className:Oe().uv_count,id:"busuanzi_value_site_uv"}),(0,r.jsx)("span",{className:Oe().split,children:"|"}),(0,r.jsx)("i",{className:"fa fa-eye"}),(0,r.jsx)("span",{className:Oe().pv_count,id:"busuanzi_value_site_pv"})]})]})})},xe={en:{create_tm:"create",modify_tm:"modify"},"zh-cn":{create_tm:"创建",modify_tm:"修改"}};var Se=n(319),Ce=n.n(Se);function Pe(e){var t=e.pathname,n=e.menuSource,r=e.menuOpenKeys,a=[];return Ee(n,decodeURI(t),a),r&&a.push.apply(a,Ce()(r.split(","))),a}function Ee(e,t,n){for(var r=0;r<e.length;r++){var a=e[r],o=a.type,l=a.path,i=a.mdconf;if("directory"===o){if(n.push(l),Ee(e[r].children,t,n))return!0;n.pop()}else if(t.indexOf(i.abbrlink)>-1||t.indexOf(e[r].routePath)>-1)return!0}}var De=n(82670),Te=n.n(De),_e=n(61881),Me=n.n(_e);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n(25017);var Le=p.useState,Re=p.useEffect,Ie=Q.SubMenu;const Be=function(e){var t=e.location,n=e.routeData,a=e.menuSource,s=e.indexProps,p=t.pathname,c={title:"Time Flying",menu:["React","BasicSkill","FeCloud","TypeScript","Algorithm","LeetCode","Product","RaspberryPi"],menuOpenKeys:"/BasicSkill",theme:"crd-seed",user:"MuYunyun",repo:"blog",branch:"main",deploy_branch:"gh-pages","github-ribbons":!0,domain:"https://muyunyun.cn",seo:{google:!0},language:"en",inject:"injectLogic.js",abbrlink:!0}||{},m=c.user,d=c.repo,h=c.branch,f=void 0===h?"main":h,k=c.language,b=void 0===k?"en":k,g=c.menuOpenKeys,y=Le(!0),v=u()(y,2),w=v[0],O=v[1],j=Le(""),x=u()(j,2),S=x[0],C=x[1],P=Pe({pathname:p,menuSource:a,menuOpenKeys:g}),E=n.find((function(e){return"/README"===e.path}))&&n.find((function(e){return"/README"===e.path})).mdconf&&n.find((function(e){return"/README"===e.path})).mdconf.abbrlink||"README";Re((function(){var e,t;I.WQ&&(F(),null===(e={inject:()=>{const e=document.createElement("meta");e.name="google-site-verification",e.content="7fyp1NuvXSRLM9KpMq5_YNE_0zFZkPnuV-SbVVFgWbI",document.head.appendChild(e)}})||void 0===e||null===(t=e.inject)||void 0===t||t.call(e))}),[]),Re((function(){var e,t;null===(e={inject:()=>{const e=document.createElement("meta");e.name="google-site-verification",e.content="7fyp1NuvXSRLM9KpMq5_YNE_0zFZkPnuV-SbVVFgWbI",document.head.appendChild(e)}})||void 0===e||null===(t=e.injectWithPathname)||void 0===t||t.call(e,p)}),[p]),Re((function(){var e=t.pathname;e.endsWith("/")&&(e=e.slice(0,e.length-1)),e.startsWith("/".concat(d))&&(e=e.slice("/".concat(d).length,e.length)),C(e||E)}),t.pathname);var D,T,_,M,L,B,z,F=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.scrollTo(0,0)};return D=n.filter((function(e){return p.indexOf(e.path)>-1})),T=D.length>0?D[0].article:null,a.filter((function(e){return T===e.article&&e.children&&e.children.length>1})).length,(0,r.jsxs)("div",{className:Me().wrapper,children:[(0,r.jsx)(Ne,{logo:Te(),href:fe?"/".concat(d):"/",location:t,indexProps:s,menuSource:a}),(0,r.jsxs)("div",{className:R()(Me().wrapperContent,o()({},Me().wrapperMobile,he)),children:[(B=n.filter((function(e){return"directory"!==e.props.type&&(p.indexOf(e.mdconf.abbrlink)>-1||decodeURIComponent(p).indexOf(e.path)>-1)})),z=B[0]&&B[0].props.path,(0,r.jsx)("div",{className:R()(Me().pageHeader),children:m&&d?(0,r.jsxs)("a",{href:"https://github.com/".concat(m,"/").concat(d,"/edit/").concat(f).concat(z),target:"_blank",children:[(0,r.jsx)(se,{className:R()(Me().icon),type:"edit",size:13}),(0,r.jsx)("span",{children:"Edit in GitHub"})]}):null})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("nav",{className:R()(Me().menuWrapper,o()({},"".concat(Me()["menuwrapper-inlineCollapsed"]),w)),children:(L=a,L.length<1?null:(0,r.jsx)(ce,{offsetTop:0,className:Me().affixPlaceholder,wrapperClassName:Me().affixWrapper,width:w?0:240,children:(0,r.jsx)(Q,{inlineCollapsed:w,toggle:function(){O(!w)},menuStyle:{height:"100vh",overflow:"auto"},selectedKey:S,onSelect:function(e){C(e)},defaultOpenKeys:P,children:function e(t){return(0,r.jsx)(r.Fragment,{children:t.map((function(t,n){var a=t||{},o=a.mdconf,l=a.routePath,i=(o||{}).abbrlink,s=i?"/".concat(i):l;return t.children&&t.children.length>0?(0,r.jsx)(Ie,{keyValue:t.path,title:t.name,icon:(0,r.jsx)(se,{type:"folder",size:16}),children:e(t.children)},n):(0,r.jsx)(Q.Item,{icon:(0,r.jsx)(se,{type:"file",size:16}),keyValue:i?"/".concat(i):t.path,title:t&&"directory"===t.type&&t.props&&t.props.isEmpty?(0,r.jsx)("span",{children:t.mdconf&&t.mdconf.title||t.name}):(0,r.jsx)(N,{to:I.v8?"/".concat(d).concat(s):s,replace:p.indexOf(s)>-1,children:t&&t.mdconf&&t.mdconf.title?t.mdconf.title:t.title})},n)}))})}(L||[])})}))}),(0,r.jsx)("div",{className:R()(o()({},"".concat(Me().menuMask),he&&!w)),onClick:function(e){e.stopPropagation(),O(!0)}})]}),(0,r.jsxs)("div",{className:R()("".concat(Me().content),o()({},"".concat(Me()["content-fullpage"]),w||he)),children:[(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(A,{exact:!0,from:fe?"/".concat(d):"/",to:fe?"/".concat(d,"/").concat(E):"/".concat(E)}),n.map((function(e){var t=e.path,n=e.mdconf,a=e.component,l=n.abbrlink,s=l?"/".concat(l):t;return(0,r.jsx)(i.Z,{exact:!0,path:fe?"/".concat(d).concat(s):s,render:function(){var t=a;return(0,r.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}},s)})),(0,r.jsx)(A,{to:fe?"/".concat(d,"/404"):"/404"})]}),(_=n.find((function(e){return p.indexOf(e.path)>-1})),M=_&&_.props,(0,r.jsxs)("div",{className:R()(Me().pageFooter),children:[M&&M.birthtime?(0,r.jsxs)("span",{className:R()(Me().position),children:[(0,r.jsx)(se,{className:R()(Me().icon),type:"create-time",size:13}),xe[b].create_tm,":",(0,r.jsx)("span",{children:M.birthtime})]}):null,M&&M.mtime?(0,r.jsxs)("span",{className:R()(Me().position),children:[(0,r.jsx)(se,{className:R()(Me().icon),type:"update-time",size:13}),xe[b].modify_tm,":",(0,r.jsx)("span",{children:n.find((function(e){return p.indexOf(e.path)>-1})).props.mtime})]}):null]}))]}),(0,r.jsx)(je,{inlineCollapsed:w})]})]})};var ze=n(66488),Fe=n.n(ze);const qe=function(){var e={title:"Time Flying",menu:["React","BasicSkill","FeCloud","TypeScript","Algorithm","LeetCode","Product","RaspberryPi"],menuOpenKeys:"/BasicSkill",theme:"crd-seed",user:"MuYunyun",repo:"blog",branch:"main",deploy_branch:"gh-pages","github-ribbons":!0,domain:"https://muyunyun.cn",seo:{google:!0},language:"en",inject:"injectLogic.js",abbrlink:!0}||{},t=e.user,n=e.repo;return(0,r.jsx)("table",{className:Fe().noMatch,children:(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsxs)("td",{children:[(0,r.jsx)("h1",{children:"404"}),(0,r.jsx)("div",{children:"你似乎来到了没有知识存在的荒原..."}),(0,r.jsxs)("section",{children:["在 github 访问",(0,r.jsx)("a",{href:"https://github.com/".concat(t,"/").concat(n),children:"该项目"})]})]})})})})};function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(790);const Ye=function(e){return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(i.Z,{path:"/404",render:function(t){return(0,r.jsx)(qe,Xe(Xe({},t),e))}}),(0,r.jsx)(i.Z,{path:"/",render:function(t){return(0,r.jsx)(Be,Xe(Xe({},t),e))}})]})}},82670:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTkxNjI5OTAzMTU3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEyNzY0IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+PC9kZWZzPjxwYXRoIGQ9Ik05MjQuMjYyIDE0Mi4xODJINjY4LjgzNmMtNDguNDEgMC05My45MDEgMTcuODg1LTEyOC4xOTUgNTAuNDc4LTExLjY3MyAxMS4wNy0yMC43OTcgMjMuODQtMjguNzAyIDM3LjA5NS03LjkxLTEzLjI1Ni0xNy4wMy0yNS45MDctMjguODI2LTM3LjA5NS0zNC4zMDQtMzIuNTkzLTc5Ljc5LTUwLjQ3Mi0xMjguMi01MC40NzJIOTkuNzM4Yy0xMy40OTcgMC0yNC40NDMgMTAuMzMyLTI0LjQ0MyAyMy4yMjl2NjQxLjk1NmMwIDEyLjg5MiAxMC45NDYgMjMuMjMgMjQuNDQ4IDIzLjIzaDIyOS43NTVjOS42MSAwIDE5LjM0MyAwLjczMSAyOS4wNzEgMi41NDkgOS44NSAxLjgzMyAxOS4yMTUgNC4zODMgMjguMDkzIDcuNzkzbDExNi40MDQgNDMuMDU0YzAuMjQgMC4xMTcgMC40ODYgMCAwLjcyNyAwLjExNyAyLjY3NyAwLjg1NiA1LjM1NSAxLjQ2IDguMTUgMS40NiAyLjgwMSAwIDUuNDY5LTAuNDgyIDguMTUyLTEuNDYgMC4xMTctMC4xMTcgMC40ODYtMC4xMTcgMC42MDktMC4xMTdsMTExLjc3NS00MS4zNTVhMjAzLjU0NiAyMDMuNTQ2IDAgMCAxIDMyLjk2Mi05IDE5Ny43MzQgMTk3LjczNCAwIDAgMSAzNC4wNDgtMy4wNDJoMjI0Ljc3M2MxMy41MDcgMCAyNC40NTQtMTAuNDYgMjQuNDU0LTIzLjIzVjE2NS4yOTVjMC0xMi43NzQtMTAuOTQ3LTIzLjEwNi0yNC40NTQtMjMuMTA2ek0zNjcuNDM3IDc4Ny40MzZhMjIwLjk4IDIyMC45OCAwIDAgMC0zNy45NS0zLjI4OEgxMjQuMDYzdi01OTUuNjNoMjMwLjk3M2MzNS4zOSAwIDY4LjcyIDEzLjEzOCA5My43NzMgMzcuMSAyNS4wNTcgMjMuODM5IDM4LjkyMiA1NS40NiAzOC45MjIgODkuMjc3djUxMy4zOThsLTgzLjMxOC0zMC43NzZhMjMyLjE1NiAyMzIuMTU2IDAgMCAwLTM2Ljk3MS0xMC4wOTJ6IG01MzIuNDk1LTMuMjg4aC0yMDAuMzNjLTE0LjU5MiAwLTI5LjE5IDEuMjE0LTQzLjA0OSAzLjc3NC0xNC4xMSAyLjY3My0yOC4yMjEgNi40NC00MS42IDExLjQzM2wtNzguNTcyIDI4Ljk0OFYzMTQuNzc4YzAtMzMuNjkgMTMuNzQzLTY1LjQzNCAzOC44LTg5LjI3OCAyNS4wNTItMjMuODM5IDU4LjM4My0zNy4wOTQgOTMuNzczLTM3LjA5NEg5MDAuMDV2NTk1LjczN2gtMC4xMTh6IiBwLWlkPSIxMjc2NSI+PC9wYXRoPjwvc3ZnPg=="},42473:e=>{"use strict";e.exports=function(){}},40259:(e,t,n)=>{var r={"./Algorithm/README.md":74119,"./Algorithm/algorithm/backtracking.md":52492,"./Algorithm/algorithm/binary_search.md":68407,"./Algorithm/algorithm/complexy.md":18962,"./Algorithm/algorithm/dynamic_programming.md":46486,"./Algorithm/algorithm/greedy.md":5578,"./Algorithm/algorithm/partition.md":73503,"./Algorithm/algorithm/recursive.md":60420,"./Algorithm/algorithm/sort/heap_sort.md":76244,"./Algorithm/algorithm/sort/merge_sort.md":99519,"./Algorithm/algorithm/sort/quick_sort.md":99516,"./Algorithm/algorithm/sort/selection_sort.md":34962,"./Algorithm/data_structure/binary_tree.md":94846,"./Algorithm/data_structure/dictionary.md":42358,"./Algorithm/data_structure/graph.md":29020,"./Algorithm/data_structure/hash_table.md":70398,"./Algorithm/data_structure/heap.md":2155,"./Algorithm/data_structure/list.md":41255,"./Algorithm/data_structure/queue.md":62598,"./Algorithm/data_structure/set.md":56682,"./Algorithm/data_structure/stack.md":52704,"./BasicSkill/Shorcuts/chrome.md":42425,"./BasicSkill/Shorcuts/git.md":16621,"./BasicSkill/Shorcuts/host_modify.md":82921,"./BasicSkill/Shorcuts/iTerm2.md":33243,"./BasicSkill/Shorcuts/vscode.md":2313,"./BasicSkill/Shorcuts/图床迁移.md":28343,"./BasicSkill/Shorcuts/易读错音的程序词汇.md":40609,"./BasicSkill/animation/lottie/lottie.md":26642,"./BasicSkill/animation/lottie/practice/makeLottie.md":77958,"./BasicSkill/basis/DOM.md":61327,"./BasicSkill/basis/HTML5.md":16182,"./BasicSkill/basis/JavaScript在引擎方面的执行过程.md":24050,"./BasicSkill/basis/askself/answer.md":19928,"./BasicSkill/basis/askself/hr.md":16356,"./BasicSkill/basis/askself/menuknowledge.md":93069,"./BasicSkill/basis/bind函数实现.md":16906,"./BasicSkill/basis/call函数实现.md":31684,"./BasicSkill/basis/error_handle.md":55326,"./BasicSkill/basis/event.md":42278,"./BasicSkill/basis/script标签.md":59767,"./BasicSkill/basis/xss_csrf.md":41770,"./BasicSkill/basis/二刷高程.md":24330,"./BasicSkill/basis/前端协议.md":50579,"./BasicSkill/basis/基本类型和引用类型.md":75868,"./BasicSkill/basis/探寻JavaScript精度问题.md":53125,"./BasicSkill/basis/正则表达式.md":11397,"./BasicSkill/basis/类型.md":53242,"./BasicSkill/basis/重学前端.md":99240,"./BasicSkill/chart/README.md":16771,"./BasicSkill/chart/canvas.md":52935,"./BasicSkill/chart/line-chart.md":48556,"./BasicSkill/composition_principle/计算机组成原理.md":20219,"./BasicSkill/css/INHERITED_AND_NON-INHERITED.md":85728,"./BasicSkill/css/README.md":18739,"./BasicSkill/css/css_knowledge.md":91810,"./BasicSkill/css/css_little_book/字体排印.md":92150,"./BasicSkill/css/css_little_book/文本属性.md":7371,"./BasicSkill/css/css_little_book/用户体验.md":52722,"./BasicSkill/css/css_little_book/结构与布局.md":11620,"./BasicSkill/css/css_little_book/背景与边框.md":76763,"./BasicSkill/css/css_little_book/过渡与动画.md":107,"./BasicSkill/css/css_little_book/选择器.md":26949,"./BasicSkill/css/css_module.md":94265,"./BasicSkill/css/flex_props.md":72157,"./BasicSkill/css/matrix.md":87160,"./BasicSkill/css/scssGuidelines.md":36609,"./BasicSkill/css/水平垂直居中.md":31764,"./BasicSkill/css/水平布局解决方案.md":11388,"./BasicSkill/css/竖直布局解决方案.md":75612,"./BasicSkill/css/聊聊BFC.md":78510,"./BasicSkill/db/concepts.md":15769,"./BasicSkill/db/kibana.md":37723,"./BasicSkill/db/mysql.md":72150,"./BasicSkill/efficiency/MindNode思维导图.md":24748,"./BasicSkill/efficiency/alfred_workflow.md":58890,"./BasicSkill/efficiency/apple/apple_skill.md":73691,"./BasicSkill/efficiency/apple/ipad.md":17299,"./BasicSkill/efficiency/apple/mac/disassembly.md":45883,"./BasicSkill/efficiency/apple/mac/env.md":94627,"./BasicSkill/efficiency/apple/mac/migrate.md":85644,"./BasicSkill/efficiency/apple/software.md":12e3,"./BasicSkill/efficiency/apple/watch.md":30988,"./BasicSkill/efficiency/data_analyze.md":13583,"./BasicSkill/efficiency/draw.md":21084,"./BasicSkill/efficiency/github.md":79892,"./BasicSkill/efficiency/how-to-improve-english.md":11668,"./BasicSkill/efficiency/oh-my-zsh.md":5024,"./BasicSkill/efficiency/omniGraffle流程图.md":25294,"./BasicSkill/efficiency/如何进行code-review.md":27676,"./BasicSkill/efficiency/沟通的智慧.md":5306,"./BasicSkill/efficiency/重构改善既有代码的设计.md":67727,"./BasicSkill/html/Know_About_HTML.md":93516,"./BasicSkill/http/cross-domain.md":64788,"./BasicSkill/http/http.md":25603,"./BasicSkill/http/http权威指南.md":49303,"./BasicSkill/http/浏览器相关知识点.md":25031,"./BasicSkill/http/网络协议.md":54253,"./BasicSkill/life/Alexa.md":10246,"./BasicSkill/life/books/the_little_prince.md":65733,"./BasicSkill/life/books/the_mythical_man_month.md":4528,"./BasicSkill/life/books/关键沟通.md":14304,"./BasicSkill/life/books/写给大家看的设计书.md":46925,"./BasicSkill/life/books/未来世界的幸存者.md":87754,"./BasicSkill/life/books/黑客与画家.md":47039,"./BasicSkill/life/financial.md":99833,"./BasicSkill/life/hacker-laws.md":51111,"./BasicSkill/life/house/decorate.md":99802,"./BasicSkill/life/house/shanghai_house_knowledge.md":43589,"./BasicSkill/life/house/smart_home.md":43199,"./BasicSkill/life/inspiration.md":67088,"./BasicSkill/life/movie/Game_of_Thrones.md":30622,"./BasicSkill/life/package_gift_box.md":6432,"./BasicSkill/life/recipe/recipe.md":93736,"./BasicSkill/life/sport/jump.md":36623,"./BasicSkill/life/starbucks.md":23751,"./BasicSkill/life/summary/The-annual-summary-of-2017.md":70144,"./BasicSkill/life/summary/The-annual-summary-of-2018.md":75477,"./BasicSkill/life/summary/The-annual-summary-of-2019.md":9904,"./BasicSkill/life/summary/The-annual-summary-of-2020.md":11606,"./BasicSkill/life/travel/guiling_travel.md":47446,"./BasicSkill/life/travel/nanjin_travel.md":21088,"./BasicSkill/life/travel/shanghai_travel.md":65935,"./BasicSkill/life/widhList.md":77489,"./BasicSkill/life/华硕路由器.md":99352,"./BasicSkill/mobile/charles.md":23738,"./BasicSkill/mobile/mobile_scene.md":86410,"./BasicSkill/node/how_node.js_resource_code_execute.md":7342,"./BasicSkill/node/implement_express.js.md":32333,"./BasicSkill/node/implement_koa.js.md":41358,"./BasicSkill/node/koa/application.md":53116,"./BasicSkill/node/koa/context.md":19411,"./BasicSkill/node/koa/example/test1.md":39498,"./BasicSkill/node/koa/example/test2.md":23929,"./BasicSkill/node/koa/example/test3.md":48804,"./BasicSkill/node/koa/example/test4.md":96789,"./BasicSkill/node/koa/request.md":1266,"./BasicSkill/node/koa/response.md":84634,"./BasicSkill/node/read_node_document/Child_Process.md":25830,"./BasicSkill/node/read_node_document/CommonJS.md":11991,"./BasicSkill/node/read_node_document/FileSystem.md":68856,"./BasicSkill/node/read_node_document/OS.md":71529,"./BasicSkill/node/read_node_document/Path.md":42488,"./BasicSkill/node/read_node_document/Process.md":54136,"./BasicSkill/node/read_node_document/Readline.md":13711,"./BasicSkill/node/read_node_document/TTY.md":6798,"./BasicSkill/node/read_node_document/Utilities.md":22536,"./BasicSkill/project_framework/CAS登入流程.md":69453,"./BasicSkill/project_framework/RPC在点我达网关的实践一.md":31839,"./BasicSkill/project_framework/解读IoC框架InversifyJS.md":79981,"./BasicSkill/project_framework/踩坑日志以及痛点.md":75146,"./BasicSkill/readES6/Async.md":56397,"./BasicSkill/readES6/Generator.md":37475,"./BasicSkill/readES6/Promise.md":47653,"./BasicSkill/readES6/Reflect.md":23345,"./BasicSkill/readES6/扩展运算符.md":73754,"./BasicSkill/readES6/模块.md":14971,"./BasicSkill/readES6/箭头函数.md":74015,"./BasicSkill/readES6/继承.md":55644,"./BasicSkill/readES6/装饰器.md":59099,"./BasicSkill/readES6/遍历语法.md":12945,"./BasicSkill/service/README.md":38232,"./BasicSkill/shorcuts/vim.md":19389,"./BasicSkill/tool/eslint.md":19498,"./BasicSkill/tool/markdown.md":98723,"./BasicSkill/tool/shell.md":62914,"./BasicSkill/编程范式/函数式编程入门.md":44965,"./BasicSkill/设计模式/ioC模式.md":52142,"./BasicSkill/设计模式/中介者模式.md":95166,"./BasicSkill/设计模式/享元模式.md":90716,"./BasicSkill/设计模式/代理模式.md":11067,"./BasicSkill/设计模式/单例模式.md":84659,"./BasicSkill/设计模式/发布订阅模式.md":99139,"./BasicSkill/设计模式/命令模式.md":54409,"./BasicSkill/设计模式/模板方法模式.md":93976,"./BasicSkill/设计模式/状态模式.md":72118,"./BasicSkill/设计模式/策略模式.md":8959,"./BasicSkill/设计模式/组合模式.md":73028,"./BasicSkill/设计模式/职责链模式.md":41456,"./BasicSkill/设计模式/装饰者模式.md":58633,"./BasicSkill/设计模式/观察者模式.md":76509,"./BasicSkill/设计模式/迭代器模式.md":13494,"./BasicSkill/设计模式/适配者模式.md":59358,"./FeCloud/babel执行机制.md":79583,"./FeCloud/chrome插件开发.md":32934,"./FeCloud/ci调试技巧.md":45915,"./FeCloud/code_online_platform.md":69342,"./FeCloud/create-react-doc.md":20932,"./FeCloud/docker.md":9465,"./FeCloud/lerna.md":78852,"./FeCloud/live-code.md":43130,"./FeCloud/npm和yarn的区别.md":97952,"./FeCloud/seo_in_spa_site.md":84629,"./FeCloud/some_about_webpack.md":42406,"./FeCloud/tc39.md":44946,"./FeCloud/w3c.md":89376,"./FeCloud/webkit技术内幕.md":96250,"./FeCloud/yarn/scripts.md":4676,"./FeCloud/如何维护一个开源项目.md":30822,"./FeCloud/微前端.md":62121,"./FeCloud/探寻webpack插件机制.md":2992,"./FeCloud/搭建一个脚手架.md":82072,"./FeCloud/方法论.md":81712,"./FeCloud/用户体验.md":30800,"./FeCloud/编译器.md":52920,"./FeCloud/视频直播协议.md":608,"./FeCloud/跨端.md":59307,"./LeetCode/1.Two_Sum.md":16708,"./LeetCode/100.Same_Tree.md":68734,"./LeetCode/101.Symmetric_Tree.md":64362,"./LeetCode/102.Binary_Tree_Level_Order_Traversal.md":12578,"./LeetCode/103.Binary_Tree_Zigzag_Level_Order_Traversal.md":17515,"./LeetCode/104.Maximum_Depth_of_Binary_Tree.md":12207,"./LeetCode/107.Binary_Tree_Level_Order_Traversal_II.md":38723,"./LeetCode/108.Convert_Sorted_Array_to_Binary_Search_Tree.md":11518,"./LeetCode/11.Container_With_Most_Water.md":17098,"./LeetCode/110.Balanced_Binary_Tree.md":326,"./LeetCode/111.Minimum_Depth_of_Binary_Tree.md":1130,"./LeetCode/112.Path_Sum.md":98998,"./LeetCode/113.Path_Sum_II.md":91242,"./LeetCode/12.Integer_to_Roman.md":80627,"./LeetCode/120.triangle.md":71802,"./LeetCode/121.Best_Time_to_Buy_and_Sell_Stock.md":42416,"./LeetCode/125.Valid_Palindrome.md":44561,"./LeetCode/126.Word_Ladder_II.md":68017,"./LeetCode/127.Word_Ladder.md":27345,"./LeetCode/129.Sum_Root_to_Leaf_Numbers.md":77607,"./LeetCode/13.Roman_to_Integer.md":63835,"./LeetCode/130.Surrounded_Regions.md":94664,"./LeetCode/131.Palindrome_Partitioning.md":42783,"./LeetCode/14.Longest_Common_Prefix.md":98784,"./LeetCode/143.Reorder_List.md":11401,"./LeetCode/144.Binary_Tree_Preorder_Traversal.md":59511,"./LeetCode/145.Binary_Tree_Postorder_Traversal.md":2579,"./LeetCode/147.Insertion_Sort_List.md":65122,"./LeetCode/148.Sort_List.md":69170,"./LeetCode/149.Max_Points_on_a_Line.md":46427,"./LeetCode/15.3Sum.md":42379,"./LeetCode/150.Evaluate_Reverse_Polish_Notation.md":2848,"./LeetCode/151.Reverse_Words_in_a_String.md":74803,"./LeetCode/16.3Sum_Closest.md":30571,"./LeetCode/167.Two_Sum_II_-_Input_array_is_sorted.md":29178,"./LeetCode/17.Letter_Combinations_of_a_Phone_Number.md":49674,"./LeetCode/18.4Sum.md":93e3,"./LeetCode/19.Remove_Nth_Node_From_End_of_List.md":40914,"./LeetCode/198.House_Robber.md":4185,"./LeetCode/199.Binary_Tree_Right_Side_View.md":47445,"./LeetCode/2.Add_Two_Numbers.md":26433,"./LeetCode/20.Valid_Parentheses.md":69949,"./LeetCode/200.Number_of_Islands.md":63852,"./LeetCode/202.Happy_Number.md":38860,"./LeetCode/203.Remove_Linked_List_Elements.md":39379,"./LeetCode/205.Isomorphic_Strings.md":94359,"./LeetCode/206.Reverse_Linked_List.md":9287,"./LeetCode/209.Minimum_Size_Subarray_Sum.md":53734,"./LeetCode/21.Merge_Two_Sorted_Lists.md":82707,"./LeetCode/213.House_Robber_II.md":5177,"./LeetCode/215.Kth_Largest_Element_in_an_Array.md":99173,"./LeetCode/216.Combination_Sum_III.md":94628,"./LeetCode/217.Contains_Duplicate.md":77936,"./LeetCode/219.Contains_Duplicate_II.md":88544,"./LeetCode/22.Generate_Parentheses.md":59537,"./LeetCode/220.Contains_Duplicate_III.md":85074,"./LeetCode/222.Count_Complete_Tree_Nodes.md":83810,"./LeetCode/226.Invert_Binary_Tree.md":6091,"./LeetCode/23.Merge_k_Sorted_Lists.md":97005,"./LeetCode/230.Kth_Smallest_Element_in_a_BST.md":24457,"./LeetCode/234.Palindrome_Linked_List.md":88120,"./LeetCode/235.Lowest_Common_Ancestor_of_a_Binary_Search_Tree.md":75678,"./LeetCode/236.Lowest_Common_Ancestor_of_a_Binary_Tree.md":21579,"./LeetCode/237.Delete_Node_in_a_Linked_List.md":94374,"./LeetCode/24.Swap_Nodes_in_Pairs.md":39593,"./LeetCode/242.Valid_Anagram.md":78838,"./LeetCode/25.Reverse_Nodes_in_k-Group.md":10688,"./LeetCode/257.Binary_Tree_Paths.md":71695,"./LeetCode/26.Remove_Duplicates_from_Sorted_Array.md":19614,"./LeetCode/27.Remove_Element.md":66118,"./LeetCode/279.Perfect_Squares.md":8723,"./LeetCode/28.Implement_strStr.md":10044,"./LeetCode/283.Move_Zeroes.md":87125,"./LeetCode/290.Word_Pattern.md":60602,"./LeetCode/3.Longest_Substring_Without_Repeating_Characters.md":7818,"./LeetCode/328.Odd_Even_Linked_List.md":21499,"./LeetCode/33.Search_in_Rotated_Sorted_Array.md":47597,"./LeetCode/337.House_Robber_III.md":73812,"./LeetCode/341.Flatten_Nested_List_Iterator.md":10106,"./LeetCode/343.Integer_Break.md":65766,"./LeetCode/344.Reverse_String.md":22047,"./LeetCode/345.Reverse_Vowels_of_a_String.md":16023,"./LeetCode/347.Top_K_Frequent_Elements.md":56423,"./LeetCode/349.Intersection_of_Two_Arrays.md":6316,"./LeetCode/35.Search_Insert_Position.md":33196,"./LeetCode/350.Intersection_of_Two_Arrays_II.md":62386,"./LeetCode/36.Valid_Sudoku.md":22518,"./LeetCode/37.Sudoku_Solver.md":86053,"./LeetCode/38.Count_and_Say.md":39130,"./LeetCode/39.Combination_Sum.md":69875,"./LeetCode/4.Median_of_Two_Sorted_Arrays.md":37134,"./LeetCode/40.Combination_Sum_II.md":57219,"./LeetCode/401.Binary_Watch.md":5641,"./LeetCode/404.Sum_of_Left_Leaves.md":51143,"./LeetCode/417.Pacific_Atlantic_Water_Flow.md":16908,"./LeetCode/437.Path_Sum_III.md":21014,"./LeetCode/438.Find_All_Anagrams_In_A_String.md":88687,"./LeetCode/445.Add_Two_Numbers_II.md":12201,"./LeetCode/447.Number_of_Boomerangs.md":3547,"./LeetCode/450.Delete_Node_in_a_BST.md":93778,"./LeetCode/451.Sort_Characters_By_Frequency.md":92605,"./LeetCode/454.4Sum_II.md":69723,"./LeetCode/46.Permutations.md":79062,"./LeetCode/47.Permutations_II.md":43156,"./LeetCode/48.Rotate_Image.md":46986,"./LeetCode/49.Group_Anagrams.md":18380,"./LeetCode/5.Longest_Palindromic_Substring.md":3177,"./LeetCode/50.Pow.md":54333,"./LeetCode/51.N-Queens.md":33330,"./LeetCode/52.N-Queens_II.md":67562,"./LeetCode/567.Permutation_In_String.md":92569,"./LeetCode/6.ZigZag_Conversion.md":98694,"./LeetCode/61.Rotate_List.md":84863,"./LeetCode/62.Unique_Paths.md":63933,"./LeetCode/63.Unique_Paths_II.md":77505,"./LeetCode/64.Minimum_Path_Sum.md":54626,"./LeetCode/66.Plus_One.md":75895,"./LeetCode/67.Add_Binary.md":96972,"./LeetCode/69.Sqrt_X.md":73645,"./LeetCode/70.Climbing_Stairs.md":46424,"./LeetCode/71.Simplify_Path.md":35310,"./LeetCode/75.Sort_Colors.md":96782,"./LeetCode/76.Minimum_Window_Substring.md":55105,"./LeetCode/77.Combinations.md":86737,"./LeetCode/78.Subsets.md":29218,"./LeetCode/79.Word_Search.md":86390,"./LeetCode/80.Remove_Duplicates_from_Sorted_Array_II.md":14437,"./LeetCode/82.Remove_Duplicates_from_Sorted_List_II.md":14905,"./LeetCode/83.Remove_Duplicates_from_Sorted_List.md":59523,"./LeetCode/86.Partition_List.md":46562,"./LeetCode/88.Merge_Sorted_Array.md":15936,"./LeetCode/89.Gray_Code.md":67551,"./LeetCode/9.Palindrome_Number.md":58605,"./LeetCode/90.Subsets_II.md":60814,"./LeetCode/91.Decode_Ways.md":65638,"./LeetCode/92.Reverse_Linked_List_II.md":73169,"./LeetCode/93.Restore_IP_Addresses.md":18817,"./LeetCode/94.Binary_Tree_Inorder_Traversal.md":97148,"./LeetCode/98.Validate_Binary_Search_Tree.md":18219,"./LeetCode/README.md":75823,"./LeetCode/helps/linked_list.md":98303,"./LeetCode/helps/remind_clock.md":99406,"./LeetCode/helps/tree.md":62750,"./Product/e-business/pdd.md":84944,"./Product/e-business/产品思考.md":20089,"./Product/e-business/电商.md":68032,"./README.md":36179,"./RaspberryPi/1.树莓派简介&烧录系统.md":31589,"./RaspberryPi/2.内网穿透.md":7234,"./RaspberryPi/3.基于树莓派搭建家庭服务器.md":41371,"./RaspberryPi/4.给树莓派安装Docker.md":7230,"./RaspberryPi/5.基于树莓派部署RSSHub.md":421,"./RaspberryPi/6.HTTPS协议配置.md":84866,"./RaspberryPi/7.基于树莓派部署code-server.md":81105,"./RaspberryPi/README.md":15408,"./RaspberryPi/linux/常用命令.md":88541,"./RaspberryPi/linux/系统目录.md":61218,"./RaspberryPi/nginx/README.md":35040,"./RaspberryPi/nginx/常用命令.md":3526,"./RaspberryPi/ssh.md":30141,"./RaspberryPi/踩坑方案记录&环境.md":96630,"./React/Component_Design/AddressPicker.md":65458,"./React/Component_Design/Affix.md":13277,"./React/Component_Design/Button.md":68636,"./React/Component_Design/Carousel.md":47746,"./React/Component_Design/CheckBox.md":15547,"./React/Component_Design/Circle.md":85677,"./React/Component_Design/Cropper.md":30932,"./React/Component_Design/DatePicker.md":17779,"./React/Component_Design/Drawer.md":25084,"./React/Component_Design/Form.md":75821,"./React/Component_Design/Icon.md":42637,"./React/Component_Design/Input.md":17722,"./React/Component_Design/Keyboard.md":22457,"./React/Component_Design/Menu.md":88623,"./React/Component_Design/Modal.md":19619,"./React/Component_Design/Picker.md":22666,"./React/Component_Design/Popup.md":21003,"./React/Component_Design/PullToRefresh.md":29069,"./React/Component_Design/Rate.md":90806,"./React/Component_Design/SearchBar.md":21825,"./React/Component_Design/SegmentedControl.md":30075,"./React/Component_Design/Table.md":13807,"./React/Component_Design/Tabs.md":31398,"./React/Component_Design/TextArea.md":12442,"./React/Component_Design/Timeline.md":4329,"./React/Component_Design/VirtualList.md":99941,"./React/Component_Design/build_mobile_first_animation.md":95198,"./React/Component_Design/site.md":80544,"./React/Component_Design/主题色替换方案.md":40268,"./React/Component_Design/性能指标.md":68137,"./React/Component_Design/组件开发实践.md":69021,"./React/Component_Design/重新认识受控与非受控组件.md":14073,"./React/Fiber数据结构.md":64047,"./React/Profiler.md":82068,"./React/React-DevTools.md":2604,"./React/React16.x特性剪辑.md":60794,"./React/React17.md":79015,"./React/React_Hooks深入系列.md":78507,"./React/React_Hooks设计模式.md":79521,"./React/React暗器百解.md":43378,"./React/React设计模式/Compound_Component.md":30962,"./React/React设计模式/setState回调替代方案.md":9266,"./React/SSR.md":26452,"./React/Server_Component.md":48194,"./React/component_market.md":26367,"./React/conf/2021.md":33354,"./React/how_suspense_resolve.md":372,"./React/schedule.md":30880,"./React/style/CSS-in-JS.md":64001,"./React/suspense_document.md":82981,"./React/从0到1实现React/0.前置准备.md":73160,"./React/从0到1实现React/1.JSX和虚拟DOM.md":17583,"./React/从0到1实现React/15.函数子组件探索.md":84149,"./React/从0到1实现React/16.RenderProps.md":24620,"./React/从0到1实现React/17.CSSinJS.md":88035,"./React/从0到1实现React/18.服务端渲染.md":71419,"./React/从0到1实现React/2.组件和state与props.md":31429,"./React/从0到1实现React/3.生命周期.md":82285,"./React/从0到1实现React/4.diff算法.md":19941,"./React/从0到1实现React/5.setState.md":40449,"./React/从0到1实现React/6.ref.md":95045,"./React/从0到1实现React/7.PureComponent.md":90225,"./React/从0到1实现React/8.HOC探索.md":72864,"./React/从0到1实现React/9.onChange事件以及受控组件.md":24461,"./React/你不知道的requestIdleCallback.md":66474,"./React/流畅性.md":51650,"./React/测试/AB测试.md":17859,"./React/测试/JEST.md":94338,"./React/测试/Jest与ReactTestingLibrary.md":55405,"./React/测试/React现代化测试.md":86600,"./React/测试/mobile_test.md":87455,"./React/测试/测试之旅.md":77428,"./React/测试/自动化测试.md":40810,"./React/测试/静态测试.md":69184,"./React/深入Fiber架构.md":28919,"./React/源码分析/React.Children.map.md":41034,"./React/源码分析/articles.md":84044,"./React/源码分析/expirationTime的计算.md":19109,"./React/源码分析/react-dom.md":80543,"./React/源码分析/setState.md":61961,"./React/源码分析/位运算符.md":54257,"./React/源码贡献之路.md":23014,"./React/相关技术栈/GraghQL.md":89689,"./React/相关技术栈/React-DnD.md":48871,"./React/相关技术栈/Redux-Saga实践.md":29979,"./React/相关技术栈/Redux与Mobx适用场景.md":57197,"./React/相关技术栈/dva.md":81903,"./React/相关技术栈/relay.md":55009,"./React/相关技术栈/router的简易实现.md":34101,"./React/相关技术栈/在react使用immutable数据的优势.md":80165,"./React/相关技术栈/多端/taro.md":42279,"./React/相关技术栈/多端/textArea.md":28440,"./React/相关技术栈/多端/小程序.md":98350,"./React/相关技术栈/定制自己的react-script.md":13530,"./React/相关技术栈/富文本编辑器.md":31689,"./React/错误处理.md":96725,"./TypeScript/Declaration_Files.md":10491,"./TypeScript/Declaration_Merging.md":52257,"./TypeScript/More_On_Functions.md":43148,"./TypeScript/README.md":78312,"./TypeScript/RoadMap.md":61033,"./TypeScript/TypeScript_Module.md":55522,"./TypeScript/Type_Manipulation.md":39934,"./TypeScript/Types.md":89485,"./TypeScript/Types_vs_Interfaces.md":21173,"./TypeScript/Utility_Types.md":65395,"./TypeScript/extends.md":44118,"./TypeScript/类型体操.md":82024};function a(e){return Promise.resolve().then((()=>{if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n(r[e])}))}a.keys=()=>Object.keys(r),a.id=40259,e.exports=a},70214:(e,t,n)=>{var r={"./Algorithm/README.md":74119,"./Algorithm/algorithm/backtracking.md":52492,"./Algorithm/algorithm/binary_search.md":68407,"./Algorithm/algorithm/complexy.md":18962,"./Algorithm/algorithm/dynamic_programming.md":46486,"./Algorithm/algorithm/greedy.md":5578,"./Algorithm/algorithm/partition.md":73503,"./Algorithm/algorithm/recursive.md":60420,"./Algorithm/algorithm/sort/heap_sort.md":76244,"./Algorithm/algorithm/sort/merge_sort.md":99519,"./Algorithm/algorithm/sort/quick_sort.md":99516,"./Algorithm/algorithm/sort/selection_sort.md":34962,"./Algorithm/data_structure/binary_tree.md":94846,"./Algorithm/data_structure/dictionary.md":42358,"./Algorithm/data_structure/graph.md":29020,"./Algorithm/data_structure/hash_table.md":70398,"./Algorithm/data_structure/heap.md":2155,"./Algorithm/data_structure/list.md":41255,"./Algorithm/data_structure/queue.md":62598,"./Algorithm/data_structure/set.md":56682,"./Algorithm/data_structure/stack.md":52704,"./BasicSkill/Shorcuts/chrome.md":42425,"./BasicSkill/Shorcuts/git.md":16621,"./BasicSkill/Shorcuts/host_modify.md":82921,"./BasicSkill/Shorcuts/iTerm2.md":33243,"./BasicSkill/Shorcuts/vscode.md":2313,"./BasicSkill/Shorcuts/图床迁移.md":28343,"./BasicSkill/Shorcuts/易读错音的程序词汇.md":40609,"./BasicSkill/animation/lottie/lottie.md":26642,"./BasicSkill/animation/lottie/practice/makeLottie.md":77958,"./BasicSkill/basis/DOM.md":61327,"./BasicSkill/basis/HTML5.md":16182,"./BasicSkill/basis/JavaScript在引擎方面的执行过程.md":24050,"./BasicSkill/basis/askself/answer.md":19928,"./BasicSkill/basis/askself/hr.md":16356,"./BasicSkill/basis/askself/menuknowledge.md":93069,"./BasicSkill/basis/bind函数实现.md":16906,"./BasicSkill/basis/call函数实现.md":31684,"./BasicSkill/basis/error_handle.md":55326,"./BasicSkill/basis/event.md":42278,"./BasicSkill/basis/script标签.md":59767,"./BasicSkill/basis/xss_csrf.md":41770,"./BasicSkill/basis/二刷高程.md":24330,"./BasicSkill/basis/前端协议.md":50579,"./BasicSkill/basis/基本类型和引用类型.md":75868,"./BasicSkill/basis/探寻JavaScript精度问题.md":53125,"./BasicSkill/basis/正则表达式.md":11397,"./BasicSkill/basis/类型.md":53242,"./BasicSkill/basis/重学前端.md":99240,"./BasicSkill/chart/README.md":16771,"./BasicSkill/chart/canvas.md":52935,"./BasicSkill/chart/line-chart.md":48556,"./BasicSkill/composition_principle/计算机组成原理.md":20219,"./BasicSkill/css/INHERITED_AND_NON-INHERITED.md":85728,"./BasicSkill/css/README.md":18739,"./BasicSkill/css/css_knowledge.md":91810,"./BasicSkill/css/css_little_book/字体排印.md":92150,"./BasicSkill/css/css_little_book/文本属性.md":7371,"./BasicSkill/css/css_little_book/用户体验.md":52722,"./BasicSkill/css/css_little_book/结构与布局.md":11620,"./BasicSkill/css/css_little_book/背景与边框.md":76763,"./BasicSkill/css/css_little_book/过渡与动画.md":107,"./BasicSkill/css/css_little_book/选择器.md":26949,"./BasicSkill/css/css_module.md":94265,"./BasicSkill/css/flex_props.md":72157,"./BasicSkill/css/matrix.md":87160,"./BasicSkill/css/scssGuidelines.md":36609,"./BasicSkill/css/水平垂直居中.md":31764,"./BasicSkill/css/水平布局解决方案.md":11388,"./BasicSkill/css/竖直布局解决方案.md":75612,"./BasicSkill/css/聊聊BFC.md":78510,"./BasicSkill/db/concepts.md":15769,"./BasicSkill/db/kibana.md":37723,"./BasicSkill/db/mysql.md":72150,"./BasicSkill/efficiency/MindNode思维导图.md":24748,"./BasicSkill/efficiency/alfred_workflow.md":58890,"./BasicSkill/efficiency/apple/apple_skill.md":73691,"./BasicSkill/efficiency/apple/ipad.md":17299,"./BasicSkill/efficiency/apple/mac/disassembly.md":45883,"./BasicSkill/efficiency/apple/mac/env.md":94627,"./BasicSkill/efficiency/apple/mac/migrate.md":85644,"./BasicSkill/efficiency/apple/software.md":12e3,"./BasicSkill/efficiency/apple/watch.md":30988,"./BasicSkill/efficiency/data_analyze.md":13583,"./BasicSkill/efficiency/draw.md":21084,"./BasicSkill/efficiency/github.md":79892,"./BasicSkill/efficiency/how-to-improve-english.md":11668,"./BasicSkill/efficiency/oh-my-zsh.md":5024,"./BasicSkill/efficiency/omniGraffle流程图.md":25294,"./BasicSkill/efficiency/如何进行code-review.md":27676,"./BasicSkill/efficiency/沟通的智慧.md":5306,"./BasicSkill/efficiency/重构改善既有代码的设计.md":67727,"./BasicSkill/html/Know_About_HTML.md":93516,"./BasicSkill/http/cross-domain.md":64788,"./BasicSkill/http/http.md":25603,"./BasicSkill/http/http权威指南.md":49303,"./BasicSkill/http/浏览器相关知识点.md":25031,"./BasicSkill/http/网络协议.md":54253,"./BasicSkill/life/Alexa.md":10246,"./BasicSkill/life/books/the_little_prince.md":65733,"./BasicSkill/life/books/the_mythical_man_month.md":4528,"./BasicSkill/life/books/关键沟通.md":14304,"./BasicSkill/life/books/写给大家看的设计书.md":46925,"./BasicSkill/life/books/未来世界的幸存者.md":87754,"./BasicSkill/life/books/黑客与画家.md":47039,"./BasicSkill/life/financial.md":99833,"./BasicSkill/life/hacker-laws.md":51111,"./BasicSkill/life/house/decorate.md":99802,"./BasicSkill/life/house/shanghai_house_knowledge.md":43589,"./BasicSkill/life/house/smart_home.md":43199,"./BasicSkill/life/inspiration.md":67088,"./BasicSkill/life/movie/Game_of_Thrones.md":30622,"./BasicSkill/life/package_gift_box.md":6432,"./BasicSkill/life/recipe/recipe.md":93736,"./BasicSkill/life/sport/jump.md":36623,"./BasicSkill/life/starbucks.md":23751,"./BasicSkill/life/summary/The-annual-summary-of-2017.md":70144,"./BasicSkill/life/summary/The-annual-summary-of-2018.md":75477,"./BasicSkill/life/summary/The-annual-summary-of-2019.md":9904,"./BasicSkill/life/summary/The-annual-summary-of-2020.md":11606,"./BasicSkill/life/travel/guiling_travel.md":47446,"./BasicSkill/life/travel/nanjin_travel.md":21088,"./BasicSkill/life/travel/shanghai_travel.md":65935,"./BasicSkill/life/widhList.md":77489,"./BasicSkill/life/华硕路由器.md":99352,"./BasicSkill/mobile/charles.md":23738,"./BasicSkill/mobile/mobile_scene.md":86410,"./BasicSkill/node/how_node.js_resource_code_execute.md":7342,"./BasicSkill/node/implement_express.js.md":32333,"./BasicSkill/node/implement_koa.js.md":41358,"./BasicSkill/node/koa/application.md":53116,"./BasicSkill/node/koa/context.md":19411,"./BasicSkill/node/koa/example/test1.md":39498,"./BasicSkill/node/koa/example/test2.md":23929,"./BasicSkill/node/koa/example/test3.md":48804,"./BasicSkill/node/koa/example/test4.md":96789,"./BasicSkill/node/koa/request.md":1266,"./BasicSkill/node/koa/response.md":84634,"./BasicSkill/node/read_node_document/Child_Process.md":25830,"./BasicSkill/node/read_node_document/CommonJS.md":11991,"./BasicSkill/node/read_node_document/FileSystem.md":68856,"./BasicSkill/node/read_node_document/OS.md":71529,"./BasicSkill/node/read_node_document/Path.md":42488,"./BasicSkill/node/read_node_document/Process.md":54136,"./BasicSkill/node/read_node_document/Readline.md":13711,"./BasicSkill/node/read_node_document/TTY.md":6798,"./BasicSkill/node/read_node_document/Utilities.md":22536,"./BasicSkill/project_framework/CAS登入流程.md":69453,"./BasicSkill/project_framework/RPC在点我达网关的实践一.md":31839,"./BasicSkill/project_framework/解读IoC框架InversifyJS.md":79981,"./BasicSkill/project_framework/踩坑日志以及痛点.md":75146,"./BasicSkill/readES6/Async.md":56397,"./BasicSkill/readES6/Generator.md":37475,"./BasicSkill/readES6/Promise.md":47653,"./BasicSkill/readES6/Reflect.md":23345,"./BasicSkill/readES6/扩展运算符.md":73754,"./BasicSkill/readES6/模块.md":14971,"./BasicSkill/readES6/箭头函数.md":74015,"./BasicSkill/readES6/继承.md":55644,"./BasicSkill/readES6/装饰器.md":59099,"./BasicSkill/readES6/遍历语法.md":12945,"./BasicSkill/service/README.md":38232,"./BasicSkill/shorcuts/vim.md":19389,"./BasicSkill/tool/eslint.md":19498,"./BasicSkill/tool/markdown.md":98723,"./BasicSkill/tool/shell.md":62914,"./BasicSkill/编程范式/函数式编程入门.md":44965,"./BasicSkill/设计模式/ioC模式.md":52142,"./BasicSkill/设计模式/中介者模式.md":95166,"./BasicSkill/设计模式/享元模式.md":90716,"./BasicSkill/设计模式/代理模式.md":11067,"./BasicSkill/设计模式/单例模式.md":84659,"./BasicSkill/设计模式/发布订阅模式.md":99139,"./BasicSkill/设计模式/命令模式.md":54409,"./BasicSkill/设计模式/模板方法模式.md":93976,"./BasicSkill/设计模式/状态模式.md":72118,"./BasicSkill/设计模式/策略模式.md":8959,"./BasicSkill/设计模式/组合模式.md":73028,"./BasicSkill/设计模式/职责链模式.md":41456,"./BasicSkill/设计模式/装饰者模式.md":58633,"./BasicSkill/设计模式/观察者模式.md":76509,"./BasicSkill/设计模式/迭代器模式.md":13494,"./BasicSkill/设计模式/适配者模式.md":59358,"./FeCloud/babel执行机制.md":79583,"./FeCloud/chrome插件开发.md":32934,"./FeCloud/ci调试技巧.md":45915,"./FeCloud/code_online_platform.md":69342,"./FeCloud/create-react-doc.md":20932,"./FeCloud/docker.md":9465,"./FeCloud/lerna.md":78852,"./FeCloud/live-code.md":43130,"./FeCloud/npm和yarn的区别.md":97952,"./FeCloud/seo_in_spa_site.md":84629,"./FeCloud/some_about_webpack.md":42406,"./FeCloud/tc39.md":44946,"./FeCloud/w3c.md":89376,"./FeCloud/webkit技术内幕.md":96250,"./FeCloud/yarn/scripts.md":4676,"./FeCloud/如何维护一个开源项目.md":30822,"./FeCloud/微前端.md":62121,"./FeCloud/探寻webpack插件机制.md":2992,"./FeCloud/搭建一个脚手架.md":82072,"./FeCloud/方法论.md":81712,"./FeCloud/用户体验.md":30800,"./FeCloud/编译器.md":52920,"./FeCloud/视频直播协议.md":608,"./FeCloud/跨端.md":59307,"./LeetCode/1.Two_Sum.md":16708,"./LeetCode/100.Same_Tree.md":68734,"./LeetCode/101.Symmetric_Tree.md":64362,"./LeetCode/102.Binary_Tree_Level_Order_Traversal.md":12578,"./LeetCode/103.Binary_Tree_Zigzag_Level_Order_Traversal.md":17515,"./LeetCode/104.Maximum_Depth_of_Binary_Tree.md":12207,"./LeetCode/107.Binary_Tree_Level_Order_Traversal_II.md":38723,"./LeetCode/108.Convert_Sorted_Array_to_Binary_Search_Tree.md":11518,"./LeetCode/11.Container_With_Most_Water.md":17098,"./LeetCode/110.Balanced_Binary_Tree.md":326,"./LeetCode/111.Minimum_Depth_of_Binary_Tree.md":1130,"./LeetCode/112.Path_Sum.md":98998,"./LeetCode/113.Path_Sum_II.md":91242,"./LeetCode/12.Integer_to_Roman.md":80627,"./LeetCode/120.triangle.md":71802,"./LeetCode/121.Best_Time_to_Buy_and_Sell_Stock.md":42416,"./LeetCode/125.Valid_Palindrome.md":44561,"./LeetCode/126.Word_Ladder_II.md":68017,"./LeetCode/127.Word_Ladder.md":27345,"./LeetCode/129.Sum_Root_to_Leaf_Numbers.md":77607,"./LeetCode/13.Roman_to_Integer.md":63835,"./LeetCode/130.Surrounded_Regions.md":94664,"./LeetCode/131.Palindrome_Partitioning.md":42783,"./LeetCode/14.Longest_Common_Prefix.md":98784,"./LeetCode/143.Reorder_List.md":11401,"./LeetCode/144.Binary_Tree_Preorder_Traversal.md":59511,"./LeetCode/145.Binary_Tree_Postorder_Traversal.md":2579,"./LeetCode/147.Insertion_Sort_List.md":65122,"./LeetCode/148.Sort_List.md":69170,"./LeetCode/149.Max_Points_on_a_Line.md":46427,"./LeetCode/15.3Sum.md":42379,"./LeetCode/150.Evaluate_Reverse_Polish_Notation.md":2848,"./LeetCode/151.Reverse_Words_in_a_String.md":74803,"./LeetCode/16.3Sum_Closest.md":30571,"./LeetCode/167.Two_Sum_II_-_Input_array_is_sorted.md":29178,"./LeetCode/17.Letter_Combinations_of_a_Phone_Number.md":49674,"./LeetCode/18.4Sum.md":93e3,"./LeetCode/19.Remove_Nth_Node_From_End_of_List.md":40914,"./LeetCode/198.House_Robber.md":4185,"./LeetCode/199.Binary_Tree_Right_Side_View.md":47445,"./LeetCode/2.Add_Two_Numbers.md":26433,"./LeetCode/20.Valid_Parentheses.md":69949,"./LeetCode/200.Number_of_Islands.md":63852,"./LeetCode/202.Happy_Number.md":38860,"./LeetCode/203.Remove_Linked_List_Elements.md":39379,"./LeetCode/205.Isomorphic_Strings.md":94359,"./LeetCode/206.Reverse_Linked_List.md":9287,"./LeetCode/209.Minimum_Size_Subarray_Sum.md":53734,"./LeetCode/21.Merge_Two_Sorted_Lists.md":82707,"./LeetCode/213.House_Robber_II.md":5177,"./LeetCode/215.Kth_Largest_Element_in_an_Array.md":99173,"./LeetCode/216.Combination_Sum_III.md":94628,"./LeetCode/217.Contains_Duplicate.md":77936,"./LeetCode/219.Contains_Duplicate_II.md":88544,"./LeetCode/22.Generate_Parentheses.md":59537,"./LeetCode/220.Contains_Duplicate_III.md":85074,"./LeetCode/222.Count_Complete_Tree_Nodes.md":83810,"./LeetCode/226.Invert_Binary_Tree.md":6091,"./LeetCode/23.Merge_k_Sorted_Lists.md":97005,"./LeetCode/230.Kth_Smallest_Element_in_a_BST.md":24457,"./LeetCode/234.Palindrome_Linked_List.md":88120,"./LeetCode/235.Lowest_Common_Ancestor_of_a_Binary_Search_Tree.md":75678,"./LeetCode/236.Lowest_Common_Ancestor_of_a_Binary_Tree.md":21579,"./LeetCode/237.Delete_Node_in_a_Linked_List.md":94374,"./LeetCode/24.Swap_Nodes_in_Pairs.md":39593,"./LeetCode/242.Valid_Anagram.md":78838,"./LeetCode/25.Reverse_Nodes_in_k-Group.md":10688,"./LeetCode/257.Binary_Tree_Paths.md":71695,"./LeetCode/26.Remove_Duplicates_from_Sorted_Array.md":19614,"./LeetCode/27.Remove_Element.md":66118,"./LeetCode/279.Perfect_Squares.md":8723,"./LeetCode/28.Implement_strStr.md":10044,"./LeetCode/283.Move_Zeroes.md":87125,"./LeetCode/290.Word_Pattern.md":60602,"./LeetCode/3.Longest_Substring_Without_Repeating_Characters.md":7818,"./LeetCode/328.Odd_Even_Linked_List.md":21499,"./LeetCode/33.Search_in_Rotated_Sorted_Array.md":47597,"./LeetCode/337.House_Robber_III.md":73812,"./LeetCode/341.Flatten_Nested_List_Iterator.md":10106,"./LeetCode/343.Integer_Break.md":65766,"./LeetCode/344.Reverse_String.md":22047,"./LeetCode/345.Reverse_Vowels_of_a_String.md":16023,"./LeetCode/347.Top_K_Frequent_Elements.md":56423,"./LeetCode/349.Intersection_of_Two_Arrays.md":6316,"./LeetCode/35.Search_Insert_Position.md":33196,"./LeetCode/350.Intersection_of_Two_Arrays_II.md":62386,"./LeetCode/36.Valid_Sudoku.md":22518,"./LeetCode/37.Sudoku_Solver.md":86053,"./LeetCode/38.Count_and_Say.md":39130,"./LeetCode/39.Combination_Sum.md":69875,"./LeetCode/4.Median_of_Two_Sorted_Arrays.md":37134,"./LeetCode/40.Combination_Sum_II.md":57219,"./LeetCode/401.Binary_Watch.md":5641,"./LeetCode/404.Sum_of_Left_Leaves.md":51143,"./LeetCode/417.Pacific_Atlantic_Water_Flow.md":16908,"./LeetCode/437.Path_Sum_III.md":21014,"./LeetCode/438.Find_All_Anagrams_In_A_String.md":88687,"./LeetCode/445.Add_Two_Numbers_II.md":12201,"./LeetCode/447.Number_of_Boomerangs.md":3547,"./LeetCode/450.Delete_Node_in_a_BST.md":93778,"./LeetCode/451.Sort_Characters_By_Frequency.md":92605,"./LeetCode/454.4Sum_II.md":69723,"./LeetCode/46.Permutations.md":79062,"./LeetCode/47.Permutations_II.md":43156,"./LeetCode/48.Rotate_Image.md":46986,"./LeetCode/49.Group_Anagrams.md":18380,"./LeetCode/5.Longest_Palindromic_Substring.md":3177,"./LeetCode/50.Pow.md":54333,"./LeetCode/51.N-Queens.md":33330,"./LeetCode/52.N-Queens_II.md":67562,"./LeetCode/567.Permutation_In_String.md":92569,"./LeetCode/6.ZigZag_Conversion.md":98694,"./LeetCode/61.Rotate_List.md":84863,"./LeetCode/62.Unique_Paths.md":63933,"./LeetCode/63.Unique_Paths_II.md":77505,"./LeetCode/64.Minimum_Path_Sum.md":54626,"./LeetCode/66.Plus_One.md":75895,"./LeetCode/67.Add_Binary.md":96972,"./LeetCode/69.Sqrt_X.md":73645,"./LeetCode/70.Climbing_Stairs.md":46424,"./LeetCode/71.Simplify_Path.md":35310,"./LeetCode/75.Sort_Colors.md":96782,"./LeetCode/76.Minimum_Window_Substring.md":55105,"./LeetCode/77.Combinations.md":86737,"./LeetCode/78.Subsets.md":29218,"./LeetCode/79.Word_Search.md":86390,"./LeetCode/80.Remove_Duplicates_from_Sorted_Array_II.md":14437,"./LeetCode/82.Remove_Duplicates_from_Sorted_List_II.md":14905,"./LeetCode/83.Remove_Duplicates_from_Sorted_List.md":59523,"./LeetCode/86.Partition_List.md":46562,"./LeetCode/88.Merge_Sorted_Array.md":15936,"./LeetCode/89.Gray_Code.md":67551,"./LeetCode/9.Palindrome_Number.md":58605,"./LeetCode/90.Subsets_II.md":60814,"./LeetCode/91.Decode_Ways.md":65638,"./LeetCode/92.Reverse_Linked_List_II.md":73169,"./LeetCode/93.Restore_IP_Addresses.md":18817,"./LeetCode/94.Binary_Tree_Inorder_Traversal.md":97148,"./LeetCode/98.Validate_Binary_Search_Tree.md":18219,"./LeetCode/README.md":75823,"./LeetCode/helps/linked_list.md":98303,"./LeetCode/helps/remind_clock.md":99406,"./LeetCode/helps/tree.md":62750,"./Product/e-business/pdd.md":84944,"./Product/e-business/产品思考.md":20089,"./Product/e-business/电商.md":68032,"./README.md":36179,"./RaspberryPi/1.树莓派简介&烧录系统.md":31589,"./RaspberryPi/2.内网穿透.md":7234,"./RaspberryPi/3.基于树莓派搭建家庭服务器.md":41371,"./RaspberryPi/4.给树莓派安装Docker.md":7230,"./RaspberryPi/5.基于树莓派部署RSSHub.md":421,"./RaspberryPi/6.HTTPS协议配置.md":84866,"./RaspberryPi/7.基于树莓派部署code-server.md":81105,"./RaspberryPi/README.md":15408,"./RaspberryPi/linux/常用命令.md":88541,"./RaspberryPi/linux/系统目录.md":61218,"./RaspberryPi/nginx/README.md":35040,"./RaspberryPi/nginx/常用命令.md":3526,"./RaspberryPi/ssh.md":30141,"./RaspberryPi/踩坑方案记录&环境.md":96630,"./React/Component_Design/AddressPicker.md":65458,"./React/Component_Design/Affix.md":13277,"./React/Component_Design/Button.md":68636,"./React/Component_Design/Carousel.md":47746,"./React/Component_Design/CheckBox.md":15547,"./React/Component_Design/Circle.md":85677,"./React/Component_Design/Cropper.md":30932,"./React/Component_Design/DatePicker.md":17779,"./React/Component_Design/Drawer.md":25084,"./React/Component_Design/Form.md":75821,"./React/Component_Design/Icon.md":42637,"./React/Component_Design/Input.md":17722,"./React/Component_Design/Keyboard.md":22457,"./React/Component_Design/Menu.md":88623,"./React/Component_Design/Modal.md":19619,"./React/Component_Design/Picker.md":22666,"./React/Component_Design/Popup.md":21003,"./React/Component_Design/PullToRefresh.md":29069,"./React/Component_Design/Rate.md":90806,"./React/Component_Design/SearchBar.md":21825,"./React/Component_Design/SegmentedControl.md":30075,"./React/Component_Design/Table.md":13807,"./React/Component_Design/Tabs.md":31398,"./React/Component_Design/TextArea.md":12442,"./React/Component_Design/Timeline.md":4329,"./React/Component_Design/VirtualList.md":99941,"./React/Component_Design/build_mobile_first_animation.md":95198,"./React/Component_Design/site.md":80544,"./React/Component_Design/主题色替换方案.md":40268,"./React/Component_Design/性能指标.md":68137,"./React/Component_Design/组件开发实践.md":69021,"./React/Component_Design/重新认识受控与非受控组件.md":14073,"./React/Fiber数据结构.md":64047,"./React/Profiler.md":82068,"./React/React-DevTools.md":2604,"./React/React16.x特性剪辑.md":60794,"./React/React17.md":79015,"./React/React_Hooks深入系列.md":78507,"./React/React_Hooks设计模式.md":79521,"./React/React暗器百解.md":43378,"./React/React设计模式/Compound_Component.md":30962,"./React/React设计模式/setState回调替代方案.md":9266,"./React/SSR.md":26452,"./React/Server_Component.md":48194,"./React/component_market.md":26367,"./React/conf/2021.md":33354,"./React/how_suspense_resolve.md":372,"./React/schedule.md":30880,"./React/style/CSS-in-JS.md":64001,"./React/suspense_document.md":82981,"./React/从0到1实现React/0.前置准备.md":73160,"./React/从0到1实现React/1.JSX和虚拟DOM.md":17583,"./React/从0到1实现React/15.函数子组件探索.md":84149,"./React/从0到1实现React/16.RenderProps.md":24620,"./React/从0到1实现React/17.CSSinJS.md":88035,"./React/从0到1实现React/18.服务端渲染.md":71419,"./React/从0到1实现React/2.组件和state与props.md":31429,"./React/从0到1实现React/3.生命周期.md":82285,"./React/从0到1实现React/4.diff算法.md":19941,"./React/从0到1实现React/5.setState.md":40449,"./React/从0到1实现React/6.ref.md":95045,"./React/从0到1实现React/7.PureComponent.md":90225,"./React/从0到1实现React/8.HOC探索.md":72864,"./React/从0到1实现React/9.onChange事件以及受控组件.md":24461,"./React/你不知道的requestIdleCallback.md":66474,"./React/流畅性.md":51650,"./React/测试/AB测试.md":17859,"./React/测试/JEST.md":94338,"./React/测试/Jest与ReactTestingLibrary.md":55405,"./React/测试/React现代化测试.md":86600,"./React/测试/mobile_test.md":87455,"./React/测试/测试之旅.md":77428,"./React/测试/自动化测试.md":40810,"./React/测试/静态测试.md":69184,"./React/深入Fiber架构.md":28919,"./React/源码分析/React.Children.map.md":41034,"./React/源码分析/articles.md":84044,"./React/源码分析/expirationTime的计算.md":19109,"./React/源码分析/react-dom.md":80543,"./React/源码分析/setState.md":61961,"./React/源码分析/位运算符.md":54257,"./React/源码贡献之路.md":23014,"./React/相关技术栈/GraghQL.md":89689,"./React/相关技术栈/React-DnD.md":48871,"./React/相关技术栈/Redux-Saga实践.md":29979,"./React/相关技术栈/Redux与Mobx适用场景.md":57197,"./React/相关技术栈/dva.md":81903,"./React/相关技术栈/relay.md":55009,"./React/相关技术栈/router的简易实现.md":34101,"./React/相关技术栈/在react使用immutable数据的优势.md":80165,"./React/相关技术栈/多端/taro.md":42279,"./React/相关技术栈/多端/textArea.md":28440,"./React/相关技术栈/多端/小程序.md":98350,"./React/相关技术栈/定制自己的react-script.md":13530,"./React/相关技术栈/富文本编辑器.md":31689,"./React/错误处理.md":96725,"./TypeScript/Declaration_Files.md":10491,"./TypeScript/Declaration_Merging.md":52257,"./TypeScript/More_On_Functions.md":43148,"./TypeScript/README.md":78312,"./TypeScript/RoadMap.md":61033,"./TypeScript/TypeScript_Module.md":55522,"./TypeScript/Type_Manipulation.md":39934,"./TypeScript/Types.md":89485,"./TypeScript/Types_vs_Interfaces.md":21173,"./TypeScript/Utility_Types.md":65395,"./TypeScript/extends.md":44118,"./TypeScript/类型体操.md":82024};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=70214}},t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.e=()=>Promise.resolve(),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(85893),t=n(73935),r=n(97762),a=(n(26981),n(18186)),o=n(67154),l=n.n(o),i=n(59713),s=n.n(i),u=n(6479),p=n.n(u),c=n(67294),m=n(45697),d=n.n(m),h=n(8679),f=n.n(h),k=n(79927),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var g=n(45424),y=n(15028),v=n(42473),N=n.n(v),w=n(19768),O=n(41143),j=n.n(O),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var P=function(e){function t(){var n,r;S(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=C(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},C(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:x({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;j()(null==n||1===c.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen((function(){e.setState({match:e.computeMatch(r.location.pathname)})}))},t.prototype.componentWillReceiveProps=function(e){N()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?c.Children.only(e):null},t}(c.Component);P.propTypes={history:d().object.isRequired,children:d().node},P.contextTypes={router:d().object},P.childContextTypes={router:d().object.isRequired};const E=P;function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){var n,r;D(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=T(this,e.call.apply(e,[this].concat(o))),r.history=(0,w.lX)(r.props),T(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){N()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return c.createElement(E,{history:this.history,children:this.props.children})},t}(c.Component);_.propTypes={basename:d().string,forceRefresh:d().bool,getUserConfirmation:d().func,keyLength:d().number,children:d().node};const M=_;var A,L,R,I,B=n(63038),z=n.n(B),F=n(94184),q=n.n(F),H=n(3905),X=n(89324),Y=n.n(X),U=n(83524),W=n.n(U),V=n(69590),G=n.n(V),$=n(27418),J=n.n($),Q="bodyAttributes",K="htmlAttributes",Z={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},ee=(Object.keys(Z).map((function(e){return Z[e]})),"charset"),te="cssText",ne="href",re="innerHTML",ae="itemprop",oe="rel",le={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ie=Object.keys(le).reduce((function(e,t){return e[le[t]]=t,e}),{}),se=[Z.NOSCRIPT,Z.SCRIPT,Z.STYLE],ue="data-react-helmet",pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},me=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},fe=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ke=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},be=function(e){var t=we(e,Z.TITLE),n=we(e,"titleTemplate");if(n&&t)return n.replace(/%s/g,(function(){return Array.isArray(t)?t.join(""):t}));var r=we(e,"defaultTitle");return t||r||void 0},ge=function(e){return we(e,"onChangeClientState")||function(){}},ye=function(e,t){return t.filter((function(t){return void 0!==t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return de({},e,t)}),{})},ve=function(e,t){return t.filter((function(e){return void 0!==e[Z.BASE]})).map((function(e){return e[Z.BASE]})).reverse().reduce((function(t,n){if(!t.length)for(var r=Object.keys(n),a=0;a<r.length;a++){var o=r[a].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}return t}),[])},Ne=function(e,t,n){var r={};return n.filter((function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&Ce("Helmet: "+e+' should be of type "Array". Instead found type "'+pe(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,n){var a={};n.filter((function(e){for(var n=void 0,o=Object.keys(e),l=0;l<o.length;l++){var i=o[l],s=i.toLowerCase();-1===t.indexOf(s)||n===oe&&"canonical"===e[n].toLowerCase()||s===oe&&"stylesheet"===e[s].toLowerCase()||(n=s),-1===t.indexOf(i)||i!==re&&i!==te&&i!==ae||(n=i)}if(!n||!e[n])return!1;var u=e[n].toLowerCase();return r[n]||(r[n]={}),a[n]||(a[n]={}),!r[n][u]&&(a[n][u]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var o=Object.keys(a),l=0;l<o.length;l++){var i=o[l],s=J()({},r[i],a[i]);r[i]=s}return e}),[]).reverse()},we=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},Oe=(A=Date.now(),function(e){var t=Date.now();t-A>16?(A=t,e(t)):setTimeout((function(){Oe(e)}),0)}),je=function(e){return clearTimeout(e)},xe="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Oe:n.g.requestAnimationFrame||Oe,Se="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||je:n.g.cancelAnimationFrame||je,Ce=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},Pe=null,Ee=function(e,t){var n=e.baseTag,r=e.bodyAttributes,a=e.htmlAttributes,o=e.linkTags,l=e.metaTags,i=e.noscriptTags,s=e.onChangeClientState,u=e.scriptTags,p=e.styleTags,c=e.title,m=e.titleAttributes;_e(Z.BODY,r),_e(Z.HTML,a),Te(c,m);var d={baseTag:Me(Z.BASE,n),linkTags:Me(Z.LINK,o),metaTags:Me(Z.META,l),noscriptTags:Me(Z.NOSCRIPT,i),scriptTags:Me(Z.SCRIPT,u),styleTags:Me(Z.STYLE,p)},h={},f={};Object.keys(d).forEach((function(e){var t=d[e],n=t.newTags,r=t.oldTags;n.length&&(h[e]=n),r.length&&(f[e]=d[e].oldTags)})),t&&t(),s(e,h,f)},De=function(e){return Array.isArray(e)?e.join(""):e},Te=function(e,t){void 0!==e&&document.title!==e&&(document.title=De(e)),_e(Z.TITLE,t)},_e=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(ue),a=r?r.split(","):[],o=[].concat(a),l=Object.keys(t),i=0;i<l.length;i++){var s=l[i],u=t[s]||"";n.getAttribute(s)!==u&&n.setAttribute(s,u),-1===a.indexOf(s)&&a.push(s);var p=o.indexOf(s);-1!==p&&o.splice(p,1)}for(var c=o.length-1;c>=0;c--)n.removeAttribute(o[c]);a.length===o.length?n.removeAttribute(ue):n.getAttribute(ue)!==l.join(",")&&n.setAttribute(ue,l.join(","))}},Me=function(e,t){var n=document.head||document.querySelector(Z.HEAD),r=n.querySelectorAll(e+"[data-react-helmet]"),a=Array.prototype.slice.call(r),o=[],l=void 0;return t&&t.length&&t.forEach((function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===re)n.innerHTML=t.innerHTML;else if(r===te)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var i=void 0===t[r]?"":t[r];n.setAttribute(r,i)}n.setAttribute(ue,"true"),a.some((function(e,t){return l=t,n.isEqualNode(e)}))?a.splice(l,1):o.push(n)})),a.forEach((function(e){return e.parentNode.removeChild(e)})),o.forEach((function(e){return n.appendChild(e)})),{oldTags:a,newTags:o}},Ae=function(e){return Object.keys(e).reduce((function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r}),"")},Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[le[n]||n]=e[n],t}),t)},Re=function(e,t,n){switch(e){case Z.TITLE:return{toComponent:function(){return e=t.title,n=t.titleAttributes,(r={key:e})[ue]=!0,a=Le(n,r),[c.createElement(Z.TITLE,a,e)];var e,n,r,a},toString:function(){return function(e,t,n,r){var a=Ae(n),o=De(t);return a?"<"+e+' data-react-helmet="true" '+a+">"+ke(o,r)+"</"+e+">":"<"+e+' data-react-helmet="true">'+ke(o,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case Q:case K:return{toComponent:function(){return Le(t)},toString:function(){return Ae(t)}};default:return{toComponent:function(){return function(e,t){return t.map((function(t,n){var r,a=((r={key:n})[ue]=!0,r);return Object.keys(t).forEach((function(e){var n=le[e]||e;if(n===re||n===te){var r=t.innerHTML||t.cssText;a.dangerouslySetInnerHTML={__html:r}}else a[n]=t[e]})),c.createElement(e,a)}))}(e,t)},toString:function(){return function(e,t,n){return t.reduce((function(t,r){var a=Object.keys(r).filter((function(e){return!(e===re||e===te)})).reduce((function(e,t){var a=void 0===r[t]?t:t+'="'+ke(r[t],n)+'"';return e?e+" "+a:a}),""),o=r.innerHTML||r.cssText||"",l=-1===se.indexOf(e);return t+"<"+e+' data-react-helmet="true" '+a+(l?"/>":">"+o+"</"+e+">")}),"")}(e,t,n)}}}},Ie=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,a=e.htmlAttributes,o=e.linkTags,l=e.metaTags,i=e.noscriptTags,s=e.scriptTags,u=e.styleTags,p=e.title,c=void 0===p?"":p,m=e.titleAttributes;return{base:Re(Z.BASE,t,r),bodyAttributes:Re(Q,n,r),htmlAttributes:Re(K,a,r),link:Re(Z.LINK,o,r),meta:Re(Z.META,l,r),noscript:Re(Z.NOSCRIPT,i,r),script:Re(Z.SCRIPT,s,r),style:Re(Z.STYLE,u,r),title:Re(Z.TITLE,{title:c,titleAttributes:m},r)}},Be=W()((function(e){return{baseTag:ve([ne,"target"],e),bodyAttributes:ye(Q,e),defer:we(e,"defer"),encode:we(e,"encodeSpecialCharacters"),htmlAttributes:ye(K,e),linkTags:Ne(Z.LINK,[oe,ne],e),metaTags:Ne(Z.META,["name",ee,"http-equiv","property",ae],e),noscriptTags:Ne(Z.NOSCRIPT,[re],e),onChangeClientState:ge(e),scriptTags:Ne(Z.SCRIPT,["src",re],e),styleTags:Ne(Z.STYLE,[te],e),title:be(e),titleAttributes:ye("titleAttributes",e)}}),(function(e){Pe&&Se(Pe),e.defer?Pe=xe((function(){Ee(e,(function(){Pe=null}))})):(Ee(e),Pe=null)}),Ie)((function(){return null})),ze=(L=Be,I=R=function(e){function t(){return ce(this,t),fe(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!G()(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case Z.SCRIPT:case Z.NOSCRIPT:return{innerHTML:t};case Z.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,r=e.arrayTypeChildren,a=e.newChildProps,o=e.nestedChildren;return de({},r,((t={})[n.type]=[].concat(r[n.type]||[],[de({},a,this.mapNestedChildrenToProps(n,o))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,n,r=e.child,a=e.newProps,o=e.newChildProps,l=e.nestedChildren;switch(r.type){case Z.TITLE:return de({},a,((t={})[r.type]=l,t.titleAttributes=de({},o),t));case Z.BODY:return de({},a,{bodyAttributes:de({},o)});case Z.HTML:return de({},a,{htmlAttributes:de({},o)})}return de({},a,((n={})[r.type]=de({},o),n))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=de({},t);return Object.keys(e).forEach((function(t){var r;n=de({},n,((r={})[t]=e[t],r))})),n},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return c.Children.forEach(e,(function(e){if(e&&e.props){var a=e.props,o=a.children,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[ie[n]||n]=e[n],t}),t)}(he(a,["children"]));switch(n.warnOnInvalidChildren(e,o),e.type){case Z.LINK:case Z.META:case Z.NOSCRIPT:case Z.SCRIPT:case Z.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:l,nestedChildren:o});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:l,nestedChildren:o})}}})),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,n=he(e,["children"]),r=de({},n);return t&&(r=this.mapChildrenToProps(t,r)),c.createElement(L,r)},me(t,null,[{key:"canUseDOM",set:function(e){L.canUseDOM=e}}]),t}(c.Component),R.propTypes={base:Y().object,bodyAttributes:Y().object,children:Y().oneOfType([Y().arrayOf(Y().node),Y().node]),defaultTitle:Y().string,defer:Y().bool,encodeSpecialCharacters:Y().bool,htmlAttributes:Y().object,link:Y().arrayOf(Y().object),meta:Y().arrayOf(Y().object),noscript:Y().arrayOf(Y().object),onChangeClientState:Y().func,script:Y().arrayOf(Y().object),style:Y().arrayOf(Y().object),title:Y().string,titleAttributes:Y().object,titleTemplate:Y().string},R.defaultProps={defer:!0,encodeSpecialCharacters:!0},R.peek=L.peek,R.rewind=function(){var e=L.rewind();return e||(e=Ie({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},I);ze.renderStatic=ze.rewind;var Fe,qe,He,Xe=(Fe=0,qe={util:{encode:function(e){return e instanceof He?new He(e.type,qe.util.encode(e.content),e.alias):"Array"===qe.util.type(e)?e.map(qe.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++Fe}),e.__id},clone:function(e,t){var n=qe.util.type(e);switch(t=t||{},n){case"Object":if(t[qe.util.objId(e)])return t[qe.util.objId(e)];var r={};for(var a in t[qe.util.objId(e)]=r,e)e.hasOwnProperty(a)&&(r[a]=qe.util.clone(e[a],t));return r;case"Array":return t[qe.util.objId(e)]?t[qe.util.objId(e)]:(r=[],t[qe.util.objId(e)]=r,e.forEach((function(e,n){r[n]=qe.util.clone(e,t)})),r)}return e}},languages:{extend:function(e,t){var n=qe.util.clone(qe.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var a=(r=r||qe.languages)[e];if(2==arguments.length){for(var o in n=arguments[1])n.hasOwnProperty(o)&&(a[o]=n[o]);return a}var l={};for(var i in a)if(a.hasOwnProperty(i)){if(i==t)for(var o in n)n.hasOwnProperty(o)&&(l[o]=n[o]);l[i]=a[i]}return qe.languages.DFS(qe.languages,(function(t,n){n===r[e]&&t!=e&&(this[t]=l)})),r[e]=l},DFS:function(e,t,n,r){for(var a in r=r||{},e)e.hasOwnProperty(a)&&(t.call(e,a,e[a],n||a),"Object"!==qe.util.type(e[a])||r[qe.util.objId(e[a])]?"Array"!==qe.util.type(e[a])||r[qe.util.objId(e[a])]||(r[qe.util.objId(e[a])]=!0,qe.languages.DFS(e[a],t,a,r)):(r[qe.util.objId(e[a])]=!0,qe.languages.DFS(e[a],t,null,r)))}},plugins:{},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};return qe.hooks.run("before-tokenize",r),r.tokens=qe.tokenize(r.code,r.grammar),qe.hooks.run("after-tokenize",r),He.stringify(qe.util.encode(r.tokens),r.language)},matchGrammar:function(e,t,n,r,a,o,l){var i=qe.Token;for(var s in n)if(n.hasOwnProperty(s)&&n[s]){if(s==l)return;var u=n[s];u="Array"===qe.util.type(u)?u:[u];for(var p=0;p<u.length;++p){var c=u[p],m=c.inside,d=!!c.lookbehind,h=!!c.greedy,f=0,k=c.alias;if(h&&!c.pattern.global){var b=c.pattern.toString().match(/[imuy]*$/)[0];c.pattern=RegExp(c.pattern.source,b+"g")}c=c.pattern||c;for(var g=r,y=a;g<t.length;y+=t[g].length,++g){var v=t[g];if(t.length>e.length)return;if(!(v instanceof i)){if(h&&g!=t.length-1){if(c.lastIndex=y,!(S=c.exec(e)))break;for(var N=S.index+(d?S[1].length:0),w=S.index+S[0].length,O=g,j=y,x=t.length;O<x&&(j<w||!t[O].type&&!t[O-1].greedy);++O)N>=(j+=t[O].length)&&(++g,y=j);if(t[g]instanceof i)continue;C=O-g,v=e.slice(y,j),S.index-=y}else{c.lastIndex=0;var S=c.exec(v),C=1}if(S){d&&(f=S[1]?S[1].length:0),w=(N=S.index+f)+(S=S[0].slice(f)).length;var P=v.slice(0,N),E=v.slice(w),D=[g,C];P&&(++g,y+=P.length,D.push(P));var T=new i(s,m?qe.tokenize(S,m):S,k,S,h);if(D.push(T),E&&D.push(E),Array.prototype.splice.apply(t,D),1!=C&&qe.matchGrammar(e,t,n,g,y,!0,s),o)break}else if(o)break}}}}},hooks:{add:function(){},run:function(e,t){}},tokenize:function(e,t,n){var r=[e],a=t.rest;if(a){for(var o in a)t[o]=a[o];delete t.rest}return qe.matchGrammar(e,r,t,0,0,!1),r}},(He=qe.Token=function(e,t,n,r,a){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length,this.greedy=!!a}).stringify=function(e,t,n){if("string"==typeof e)return e;if("Array"===qe.util.type(e))return e.map((function(n){return He.stringify(n,t,e)})).join("");var r={type:e.type,content:He.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if(e.alias){var a="Array"===qe.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(r.classes,a)}var o=Object.keys(r.attributes).map((function(e){return e+'="'+(r.attributes[e]||"").replace(/"/g,"&quot;")+'"'})).join(" ");return"<"+r.tag+' class="'+r.classes.join(" ")+'"'+(o?" "+o:"")+">"+r.content+"</"+r.tag+">"},qe);Xe.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/,name:/[^\s<>'"]+/}},cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Xe.languages.markup.tag.inside["attr-value"].inside.entity=Xe.languages.markup.entity,Xe.languages.markup.doctype.inside["internal-subset"].inside=Xe.languages.markup,Xe.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(Xe.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Xe.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:Xe.languages[t]};var a={};a[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:r},Xe.languages.insertBefore("markup","cdata",a)}}),Xe.languages.html=Xe.languages.markup,Xe.languages.mathml=Xe.languages.markup,Xe.languages.svg=Xe.languages.markup,Xe.languages.xml=Xe.languages.extend("markup",{}),Xe.languages.ssml=Xe.languages.xml,Xe.languages.atom=Xe.languages.xml,Xe.languages.rss=Xe.languages.xml,function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--?|-=|\+\+?|\+=|!=?|~|\*\*?|\*=|\/=?|%=?|<<=?|>>=?|<=?|>=?|==?|&&?|&=|\^=?|\|\|?|\|=|\?|:/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|x[0-9a-fA-F]{1,2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)\w+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b\w+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+?)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)(["'])(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|(?!\2)[^\\`$])*\2/,lookbehind:!0,greedy:!0,inside:r}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|aptitude|apt-cache|apt-get|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:if|then|else|elif|fi|for|while|in|case|esac|function|select|do|done|until)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|break|cd|continue|eval|exec|exit|export|getopts|hash|pwd|readonly|return|shift|test|times|trap|umask|unset|alias|bind|builtin|caller|command|declare|echo|enable|help|let|local|logout|mapfile|printf|read|readarray|source|type|typeset|ulimit|unalias|set|shopt)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:true|false)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|==?|!=?|=~|<<[<-]?|[&\d]?>>|\d?[<>]&?|&[>&]?|\|[&|]?|<=?|>=?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],o=r.variable[1].inside,l=0;l<a.length;l++)o[a[l]]=e.languages.bash[a[l]];e.languages.shell=e.languages.bash}(Xe),Xe.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Xe.languages.c=Xe.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:__attribute__|_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,function:/[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Xe.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Xe.languages.c.string],comment:Xe.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Xe.languages.c}}},constant:/\b(?:__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|stdin|stdout|stderr)\b/}),delete Xe.languages.c.boolean,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char8_t|char16_t|char32_t|class|compl|concept|const|consteval|constexpr|constinit|const_cast|continue|co_await|co_return|co_yield|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|int8_t|int16_t|int32_t|int64_t|uint8_t|uint16_t|uint32_t|uint64_t|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/;e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:true|false)\b/}),e.languages.insertBefore("cpp","string",{"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","operator",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(Xe),function(e){var t=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:RegExp("[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),string:{pattern:t,greedy:!0},property:/(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),e.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/(^|["'\s])style\s*=\s*(?:"[^"]*"|'[^']*')/i,lookbehind:!0,inside:{"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{style:{pattern:/(["'])[\s\S]+(?=["']$)/,lookbehind:!0,alias:"language-css",inside:e.languages.css},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},"attr-name":/^style/i}}},n.tag))}(Xe),function(e){var t,n=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;e.languages.css.selector={pattern:e.languages.css.selector,inside:t={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:RegExp("\\[(?:[^[\\]\"']|"+n.source+")*\\]"),greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xA0-\uFFFF])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+/,lookbehind:!0},"attr-value":[n,{pattern:/(=\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+(?=\s*$)/,lookbehind:!0}],operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/}},e.languages.css.atrule.inside["selector-function-argument"].inside=t,e.languages.insertBefore("css","property",{variable:{pattern:/(^|[^-\w\xA0-\uFFFF])--(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*/i,lookbehind:!0}});var r={pattern:/(\b\d+)(?:%|[a-z]+\b)/,lookbehind:!0},a={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};e.languages.insertBefore("css","function",{operator:{pattern:/(\s)[+\-*\/](?=\s)/,lookbehind:!0},hexcode:{pattern:/\B#(?:[\da-f]{1,2}){3,4}\b/i,alias:"color"},color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:rgb|hsl)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:rgb|hsl)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:r,number:a,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:r,number:a})}(Xe),Xe.languages.javascript=Xe.languages.extend("clike",{"class-name":[Xe.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|(?:get|set)(?=\s*[\[$\w\xA0-\uFFFF])|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Xe.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,Xe.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Xe.languages.regex},"regex-flags":/[a-z]+$/,"regex-delimiter":/^\/|\/$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Xe.languages.javascript},{pattern:/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,inside:Xe.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Xe.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Xe.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Xe.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}|(?!\${)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:Xe.languages.javascript}},string:/[\s\S]+/}}}),Xe.languages.markup&&Xe.languages.markup.tag.addInlined("script","javascript"),Xe.languages.js=Xe.languages.javascript,function(e){var t=e.util.clone(e.languages.javascript);e.languages.jsx=e.languages.extend("markup",t),e.languages.jsx.tag.pattern=/<\/?(?:[\w.:-]+(?:\s+(?:[\w.:$-]+(?:=(?:"(?:\\[^]|[^\\"])*"|'(?:\\[^]|[^\\'])*'|[^\s{'">=]+|\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}))?|\{\s*\.{3}\s*[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\s*\}))*\s*\/?)?>/i,e.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/i,e.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[^]|[^\\"])*"|'(?:\\[^]|[^\\'])*'|[^\s'">]+)/i,e.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,e.languages.insertBefore("inside","attr-name",{spread:{pattern:/\{\s*\.{3}\s*[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\s*\}/,inside:{punctuation:/\.{3}|[{}.]/,"attr-value":/\w+/}}},e.languages.jsx.tag),e.languages.insertBefore("inside","attr-value",{script:{pattern:/=(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\})/i,inside:{"script-punctuation":{pattern:/^=(?={)/,alias:"punctuation"},rest:e.languages.jsx},alias:"language-javascript"}},e.languages.jsx.tag);var n=function(e){return e?"string"==typeof e?e:"string"==typeof e.content?e.content:e.content.map(n).join(""):""},r=function(t){for(var a=[],o=0;o<t.length;o++){var l=t[o],i=!1;if("string"!=typeof l&&("tag"===l.type&&l.content[0]&&"tag"===l.content[0].type?"</"===l.content[0].content[0].content?a.length>0&&a[a.length-1].tagName===n(l.content[0].content[1])&&a.pop():"/>"===l.content[l.content.length-1].content||a.push({tagName:n(l.content[0].content[1]),openedBraces:0}):a.length>0&&"punctuation"===l.type&&"{"===l.content?a[a.length-1].openedBraces++:a.length>0&&a[a.length-1].openedBraces>0&&"punctuation"===l.type&&"}"===l.content?a[a.length-1].openedBraces--:i=!0),(i||"string"==typeof l)&&a.length>0&&0===a[a.length-1].openedBraces){var s=n(l);o<t.length-1&&("string"==typeof t[o+1]||"plain-text"===t[o+1].type)&&(s+=n(t[o+1]),t.splice(o+1,1)),o>0&&("string"==typeof t[o-1]||"plain-text"===t[o-1].type)&&(s=n(t[o-1])+s,t.splice(o-1,1),o--),t[o]=new e.Token("plain-text",s,null,s)}l.content&&"string"!=typeof l.content&&r(l.content)}};e.hooks.add("after-tokenize",(function(e){"jsx"!==e.language&&"tsx"!==e.language||r(e.tokens)}))}(Xe),function(e){function t(e,t){return RegExp(e.replace(/<ID>/g,(function(){return/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/.source})),t)}e.languages.insertBefore("javascript","function-variable",{"method-variable":{pattern:RegExp("(\\.\\s*)"+e.languages.javascript["function-variable"].pattern.source),lookbehind:!0,alias:["function-variable","method","function","property-access"]}}),e.languages.insertBefore("javascript","function",{method:{pattern:RegExp("(\\.\\s*)"+e.languages.javascript.function.source),lookbehind:!0,alias:["function","property-access"]}}),e.languages.insertBefore("javascript","constant",{"known-class-name":[{pattern:/\b(?:(?:(?:Uint|Int)(?:8|16|32)|Uint8Clamped|Float(?:32|64))?Array|ArrayBuffer|BigInt|Boolean|DataView|Date|Error|Function|Intl|JSON|Math|Number|Object|Promise|Proxy|Reflect|RegExp|String|Symbol|(?:Weak)?(?:Set|Map)|WebAssembly)\b/,alias:"class-name"},{pattern:/\b(?:[A-Z]\w*)Error\b/,alias:"class-name"}]}),e.languages.insertBefore("javascript","keyword",{imports:{pattern:t(/(\bimport\b\s*)(?:<ID>(?:\s*,\s*(?:\*\s*as\s+<ID>|\{[^{}]*\}))?|\*\s*as\s+<ID>|\{[^{}]*\})(?=\s*\bfrom\b)/.source),lookbehind:!0,inside:e.languages.javascript},exports:{pattern:t(/(\bexport\b\s*)(?:\*(?:\s*as\s+<ID>)?(?=\s*\bfrom\b)|\{[^{}]*\})/.source),lookbehind:!0,inside:e.languages.javascript}}),e.languages.javascript.keyword.unshift({pattern:/\b(?:as|default|export|from|import)\b/,alias:"module"},{pattern:/\b(?:await|break|catch|continue|do|else|for|finally|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow"},{pattern:/\bnull\b/,alias:["null","nil"]},{pattern:/\bundefined\b/,alias:"nil"}),e.languages.insertBefore("javascript","operator",{spread:{pattern:/\.{3}/,alias:"operator"},arrow:{pattern:/=>/,alias:"operator"}}),e.languages.insertBefore("javascript","punctuation",{"property-access":{pattern:t(/(\.\s*)#?<ID>/.source),lookbehind:!0},"maybe-class-name":{pattern:/(^|[^$\w\xA0-\uFFFF])[A-Z][$\w\xA0-\uFFFF]+/,lookbehind:!0},dom:{pattern:/\b(?:document|location|navigator|performance|(?:local|session)Storage|window)\b/,alias:"variable"},console:{pattern:/\bconsole(?=\s*\.)/,alias:"class-name"}});for(var n=["function","function-variable","method","method-variable","property-access"],r=0;r<n.length;r++){var a=n[r],o=e.languages.javascript[a];"RegExp"===e.util.type(o)&&(o=e.languages.javascript[a]={pattern:o});var l=o.inside||{};o.inside=l,l["maybe-class-name"]=/^[A-Z][\s\S]*/}}(Xe),function(e){var t=/#(?!\{).+/,n={pattern:/#\{[^}]+\}/,alias:"variable"};e.languages.coffeescript=e.languages.extend("javascript",{comment:t,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:n}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),e.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:t,interpolation:n}}}),e.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},script:{pattern:/[\s\S]+/,alias:"language-javascript",inside:e.languages.javascript}}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:n}}]}),e.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete e.languages.coffeescript["template-string"],e.languages.coffee=e.languages.coffeescript}(Xe),function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),"diff"===n&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+"].*(?:\r\n?|\n|(?![\\s\\S])))+","m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})}(Xe),Xe.languages.git={comment:/^#.*/m,deleted:/^[-–].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/m,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/m}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m},Xe.languages.go=Xe.languages.extend("clike",{string:{pattern:/(["'`])(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|iota|nil|true|false)\b/,number:/(?:\b0x[a-f\d]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[-+]?\d+)?)i?/i,operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:bool|byte|complex(?:64|128)|error|float(?:32|64)|rune|string|u?int(?:8|16|32|64)?|uintptr|append|cap|close|complex|copy|delete|imag|len|make|new|panic|print(?:ln)?|real|recover)\b/}),delete Xe.languages.go["class-name"],Xe.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:Xe.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:true|false)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*)[a-zA-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,punctuation:/[!(){}\[\]:=,]/,constant:/\b(?!ID\b)[A-Z][A-Z_\d]*\b/},function(e){function t(e,t){return"___"+e.toUpperCase()+t+"___"}Object.defineProperties(e.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,r,a,o){if(n.language===r){var l=n.tokenStack=[];n.code=n.code.replace(a,(function(e){if("function"==typeof o&&!o(e))return e;for(var a,i=l.length;-1!==n.code.indexOf(a=t(r,i));)++i;return l[i]=e,a})),n.grammar=e.languages.markup}}},tokenizePlaceholders:{value:function(n,r){if(n.language===r&&n.tokenStack){n.grammar=e.languages[r];var a=0,o=Object.keys(n.tokenStack);!function l(i){for(var s=0;s<i.length&&!(a>=o.length);s++){var u=i[s];if("string"==typeof u||u.content&&"string"==typeof u.content){var p=o[a],c=n.tokenStack[p],m="string"==typeof u?u:u.content,d=t(r,p),h=m.indexOf(d);if(h>-1){++a;var f=m.substring(0,h),k=new e.Token(r,e.tokenize(c,n.grammar),"language-"+r,c),b=m.substring(h+d.length),g=[];f&&g.push.apply(g,l([f])),g.push(k),b&&g.push.apply(g,l([b])),"string"==typeof u?i.splice.apply(i,[s,1].concat(g)):u.content=g}}else u.content&&l(u.content)}return i}(n.tokens)}}}})}(Xe),function(e){e.languages.handlebars={comment:/\{\{![\s\S]*?\}\}/,delimiter:{pattern:/^\{\{\{?|\}\}\}?$/i,alias:"punctuation"},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][+-]?\d+)?/,boolean:/\b(?:true|false)\b/,block:{pattern:/^(\s*(?:~\s*)?)[#\/]\S+?(?=\s*(?:~\s*)?$|\s)/i,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&':()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,\/;<=>@\[\\\]^`{|}~\s]+/},e.hooks.add("before-tokenize",(function(t){e.languages["markup-templating"].buildPlaceholders(t,"handlebars",/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g)})),e.hooks.add("after-tokenize",(function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"handlebars")}))}(Xe),Xe.languages.json={property:{pattern:/"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,greedy:!0},string:{pattern:/"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:true|false)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Xe.languages.webmanifest=Xe.languages.json,Xe.languages.less=Xe.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/i,operator:/[+\-*\/]/}),Xe.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}}),Xe.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},builtin:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,symbol:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:[/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,{pattern:/(\()(?:addsuffix|abspath|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:s|list)?)(?=[ \t])/,lookbehind:!0}],operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/},function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?!\n|\r\n?))/.source;function n(e){return e=e.replace(/<inner>/g,(function(){return t})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+e+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,(function(){return r})),o=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"font-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+o+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+o+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/``.+?``|`[^`\r\n]+`/,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+?\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach((function(t){["url","bold","italic","strike"].forEach((function(n){t!==n&&(e.languages.markdown[t].inside.content.inside[n]=e.languages.markdown[n])}))})),e.hooks.add("after-tokenize",(function(e){"markdown"!==e.language&&"md"!==e.language||function e(t){if(t&&"string"!=typeof t)for(var n=0,r=t.length;n<r;n++){var a=t[n];if("code"===a.type){var o=a.content[1],l=a.content[3];if(o&&l&&"code-language"===o.type&&"code-block"===l.type&&"string"==typeof o.content){var i=o.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),s="language-"+(i=(/[a-z][\w-]*/i.exec(i)||[""])[0].toLowerCase());l.alias?"string"==typeof l.alias?l.alias=[l.alias,s]:l.alias.push(s):l.alias=[s]}}else e(a.content)}}(e.tokens)})),e.hooks.add("wrap",(function(t){if("code-block"===t.type){for(var n="",r=0,a=t.classes.length;r<a;r++){var o=t.classes[r],l=/language-(.+)/.exec(o);if(l){n=l[1];break}}var i=e.languages[n];if(i){var s=t.content.replace(/&lt;/g,"<").replace(/&amp;/g,"&");t.content=e.highlight(s,i,n)}else if(n&&"none"!==n&&e.plugins.autoloader){var u="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());t.attributes.id=u,e.plugins.autoloader.loadLanguages(n,(function(){var t=document.getElementById(u);t&&(t.innerHTML=e.highlight(t.textContent,e.languages[n],n))}))}}})),e.languages.md=e.languages.markdown}(Xe),Xe.languages.objectivec=Xe.languages.extend("c",{string:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|@"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,keyword:/\b(?:asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while|in|self|super)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete Xe.languages.objectivec["class-name"],Xe.languages.objc=Xe.languages.objectivec,Xe.languages.ocaml={comment:/\(\*[\s\S]*?\*\)/,string:[{pattern:/"(?:\\.|[^\\\r\n"])*"/,greedy:!0},{pattern:/(['`])(?:\\(?:\d+|x[\da-f]+|.)|(?!\1)[^\\\r\n])\1/i,greedy:!0}],number:/\b(?:0x[\da-f][\da-f_]+|(?:0[bo])?\d[\d_]*(?:\.[\d_]*)?(?:e[+-]?[\d_]+)?)/i,directive:{pattern:/\B#\w+/,alias:"important"},label:{pattern:/\B~\w+/,alias:"function"},"type-variable":{pattern:/\B'\w+/,alias:"function"},variant:{pattern:/`\w+/,alias:"variable"},module:{pattern:/\b[A-Z]\w+/,alias:"variable"},keyword:/\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|nonrec|object|of|open|private|rec|sig|struct|then|to|try|type|val|value|virtual|when|where|while|with)\b/,boolean:/\b(?:false|true)\b/,operator:/:=|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lsl|lsr|lxor|mod|or)\b/,punctuation:/[(){}\[\]|.,:;]|\b_\b/},Xe.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"string-interpolation":{pattern:/(?:f|rf|fr)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:{{)*){(?!{)(?:[^{}]|{(?!{)(?:[^{}]|{(?!{)(?:[^{}])+})+})+}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|rb|br)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|rb|br)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^\s*)@\w+(?:\.\w+)*/im,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:and|as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:True|False|None)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Xe.languages.python["string-interpolation"].inside.interpolation.inside.rest=Xe.languages.python,Xe.languages.py=Xe.languages.python,Xe.languages.reason=Xe.languages.extend("clike",{string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*/,keyword:/\b(?:and|as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|sig|struct|switch|then|to|try|type|val|virtual|when|while|with)\b/,operator:/\.{3}|:[:=]|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:mod|land|lor|lxor|lsl|lsr|asr)\b/}),Xe.languages.insertBefore("reason","class-name",{character:{pattern:/'(?:\\x[\da-f]{2}|\\o[0-3][0-7][0-7]|\\\d{3}|\\.|[^'\\\r\n])'/,alias:"string"},constructor:{pattern:/\b[A-Z]\w*\b(?!\s*\.)/,alias:"variable"},label:{pattern:/\b[a-z]\w*(?=::)/,alias:"symbol"}}),delete Xe.languages.reason.function,function(e){e.languages.sass=e.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0}}),e.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,inside:{atrule:/(?:@[\w-]+|[+=])/m}}}),delete e.languages.sass.atrule;var t=/\$[-\w]+|#\{\$[-\w]+\}/,n=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|or|not)\b/,{pattern:/(\s+)-(?=\s)/,lookbehind:!0}];e.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,inside:{punctuation:/:/,variable:t,operator:n}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:t,operator:n,important:e.languages.sass.important}}}),delete e.languages.sass.property,delete e.languages.sass.important,e.languages.insertBefore("sass","punctuation",{selector:{pattern:/([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/,lookbehind:!0}})}(Xe),Xe.languages.scss=Xe.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]+))/m,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),Xe.languages.insertBefore("scss","atrule",{keyword:[/@(?:if|else(?: if)?|forward|for|each|while|import|use|extend|debug|warn|mixin|include|function|return|content)\b/i,{pattern:/( +)(?:from|through)(?= )/,lookbehind:!0}]}),Xe.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),Xe.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|with|show|hide)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:true|false)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|or|not)(?=\s)/,lookbehind:!0}}),Xe.languages.scss.atrule.inside.rest=Xe.languages.scss,Xe.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:_INSERT|COL)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:S|ING)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:TRUE|FALSE|NULL)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|IN|LIKE|NOT|OR|IS|DIV|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},function(e){var t={pattern:/(\b\d+)(?:%|[a-z]+)/,lookbehind:!0},n={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0},r={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},url:{pattern:/url\((["']?).*?\1\)/i,greedy:!0},string:{pattern:/("|')(?:(?!\1)[^\\\r\n]|\\(?:\r\n|[\s\S]))*\1/,greedy:!0},interpolation:null,func:null,important:/\B!(?:important|optional)\b/i,keyword:{pattern:/(^|\s+)(?:(?:if|else|for|return|unless)(?=\s+|$)|@[\w-]+)/,lookbehind:!0},hexcode:/#[\da-f]{3,6}/i,color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:rgb|hsl)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:rgb|hsl)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:t,number:n,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:t,boolean:/\b(?:true|false)\b/,operator:[/~|[+!\/%<>?=]=?|[-:]=|\*[*=]?|\.{2,3}|&&|\|\||\B-\B|\b(?:and|in|is(?: a| defined| not|nt)?|not|or)\b/],number:n,punctuation:/[{}()\[\];:,]/};r.interpolation={pattern:/\{[^\r\n}:]+\}/,alias:"variable",inside:{delimiter:{pattern:/^{|}$/,alias:"punctuation"},rest:r}},r.func={pattern:/[\w-]+\([^)]*\).*/,inside:{function:/^[^(]+/,rest:r}},e.languages.stylus={"atrule-declaration":{pattern:/(^\s*)@.+/m,lookbehind:!0,inside:{atrule:/^@[\w-]+/,rest:r}},"variable-declaration":{pattern:/(^[ \t]*)[\w$-]+\s*.?=[ \t]*(?:\{[^{}]*\}|\S.*|$)/m,lookbehind:!0,inside:{variable:/^\S+/,rest:r}},statement:{pattern:/(^[ \t]*)(?:if|else|for|return|unless)[ \t].+/m,lookbehind:!0,inside:{keyword:/^\S+/,rest:r}},"property-declaration":{pattern:/((?:^|\{)([ \t]*))(?:[\w-]|\{[^}\r\n]+\})+(?:\s*:\s*|[ \t]+)(?!\s)[^{\r\n]*(?:;|[^{\r\n,](?=$)(?!(?:\r?\n|\r)(?:\{|\2[ \t]+)))/m,lookbehind:!0,inside:{property:{pattern:/^[^\s:]+/,inside:{interpolation:r.interpolation}},rest:r}},selector:{pattern:/(^[ \t]*)(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)(?:(?:\r?\n|\r)(?:\1(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)))*(?:,$|\{|(?=(?:\r?\n|\r)(?:\{|\1[ \t]+)))/m,lookbehind:!0,inside:{interpolation:r.interpolation,comment:r.comment,punctuation:/[{},]/}},func:r.func,string:r.string,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},interpolation:r.interpolation,punctuation:/[{}()\[\];:.]/}}(Xe),function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},keyword:/\b(?:abstract|as|asserts|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|undefined|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/}),delete e.languages.typescript.parameter;var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Xe),function(e){var t=e.util.clone(e.languages.typescript);e.languages.tsx=e.languages.extend("jsx",t);var n=e.languages.tsx.tag;n.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0}(Xe),Xe.languages.wasm={comment:[/\(;[\s\S]*?;\)/,{pattern:/;;.*/,greedy:!0}],string:{pattern:/"(?:\\[\s\S]|[^"\\])*"/,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*+\-./:<=>?@\\^_`|~]+/i,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/},function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ \t]+"+t.source+")?|"+t.source+"(?:[ \t]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,(function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source})),o=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function l(e,t){t=(t||"").replace(/m/g,"")+"m";var n=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|]|}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,(function(){return r})).replace(/<<value>>/g,(function(){return e}));return RegExp(n,t)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,(function(){return r}))),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,(function(){return r})).replace(/<<key>>/g,(function(){return"(?:"+a+"|"+o+")"}))),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:l(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:l(/true|false/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:l(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:l(o),lookbehind:!0,greedy:!0},number:{pattern:l(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.?\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml}(Xe);var Ye={Prism:Xe,theme:{plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","at-rule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]}};function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(){return(We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ve=/\r\n|\r|\n/,Ge=function(e){0===e.length?e.push({types:["plain"],content:"\n",empty:!0}):1===e.length&&""===e[0].content&&(e[0].content="\n",e[0].empty=!0)},$e=function(e,t){var n=e.length;return n>0&&e[n-1]===t?e:e.concat(t)},Je=function(e,t){var n=e.plain,r=Object.create(null),a=e.styles.reduce((function(e,n){var r=n.languages,a=n.style;return r&&!r.includes(t)||n.types.forEach((function(t){var n=We({},e[t],a);e[t]=n})),e}),r);return a.root=n,a.plain=We({},n,{backgroundColor:null}),a};function Qe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}const Ke=function(e){function t(){for(var t=this,n=[],r=arguments.length;r--;)n[r]=arguments[r];e.apply(this,n),Ue(this,"getThemeDict",(function(e){if(void 0!==t.themeDict&&e.theme===t.prevTheme&&e.language===t.prevLanguage)return t.themeDict;t.prevTheme=e.theme,t.prevLanguage=e.language;var n=e.theme?Je(e.theme,e.language):void 0;return t.themeDict=n})),Ue(this,"getLineProps",(function(e){var n=e.key,r=e.className,a=e.style,o=We({},Qe(e,["key","className","style","line"]),{className:"token-line",style:void 0,key:void 0}),l=t.getThemeDict(t.props);return void 0!==l&&(o.style=l.plain),void 0!==a&&(o.style=void 0!==o.style?We({},o.style,a):a),void 0!==n&&(o.key=n),r&&(o.className+=" "+r),o})),Ue(this,"getStyleForToken",(function(e){var n=e.types,r=e.empty,a=n.length,o=t.getThemeDict(t.props);if(void 0!==o){if(1===a&&"plain"===n[0])return r?{display:"inline-block"}:void 0;if(1===a&&!r)return o[n[0]];var l=r?{display:"inline-block"}:{},i=n.map((function(e){return o[e]}));return Object.assign.apply(Object,[l].concat(i))}})),Ue(this,"getTokenProps",(function(e){var n=e.key,r=e.className,a=e.style,o=e.token,l=We({},Qe(e,["key","className","style","token"]),{className:"token "+o.types.join(" "),children:o.content,style:t.getStyleForToken(o),key:void 0});return void 0!==a&&(l.style=void 0!==l.style?We({},l.style,a):a),void 0!==n&&(l.key=n),r&&(l.className+=" "+r),l})),Ue(this,"tokenize",(function(e,t,n,r){var a={code:t,grammar:n,language:r,tokens:[]};e.hooks.run("before-tokenize",a);var o=a.tokens=e.tokenize(a.code,a.grammar,a.language);return e.hooks.run("after-tokenize",a),o}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=e.Prism,n=e.language,r=e.code,a=e.children,o=this.getThemeDict(this.props),l=t.languages[n];return a({tokens:function(e){for(var t=[[]],n=[e],r=[0],a=[e.length],o=0,l=0,i=[],s=[i];l>-1;){for(;(o=r[l]++)<a[l];){var u=void 0,p=t[l],c=n[l][o];if("string"==typeof c?(p=l>0?p:["plain"],u=c):(p=$e(p,c.type),c.alias&&(p=$e(p,c.alias)),u=c.content),"string"==typeof u){var m=u.split(Ve),d=m.length;i.push({types:p,content:m[0]});for(var h=1;h<d;h++)Ge(i),s.push(i=[]),i.push({types:p,content:m[h]})}else l++,t.push(p),n.push(u),r.push(0),a.push(u.length)}l--,t.pop(),n.pop(),r.pop(),a.pop()}return Ge(i),s}(void 0!==l?this.tokenize(t,r,l,n):[r]),className:"prism-code language-"+n,style:void 0!==o?o.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},t}(c.Component),Ze={plain:{color:"#403f53",backgroundColor:"#FBFBFB"},styles:[{types:["changed"],style:{color:"rgb(162, 191, 252)",fontStyle:"italic"}},{types:["deleted"],style:{color:"rgba(239, 83, 80, 0.56)",fontStyle:"italic"}},{types:["inserted","attr-name"],style:{color:"rgb(72, 118, 214)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(152, 159, 177)",fontStyle:"italic"}},{types:["string","builtin","char","constant","url"],style:{color:"rgb(72, 118, 214)"}},{types:["variable"],style:{color:"rgb(201, 103, 101)"}},{types:["number"],style:{color:"rgb(170, 9, 130)"}},{types:["punctuation"],style:{color:"rgb(153, 76, 195)"}},{types:["function","selector","doctype"],style:{color:"rgb(153, 76, 195)",fontStyle:"italic"}},{types:["class-name"],style:{color:"rgb(17, 17, 17)"}},{types:["tag"],style:{color:"rgb(153, 76, 195)"}},{types:["operator","property","keyword","namespace"],style:{color:"rgb(12, 150, 155)"}},{types:["boolean"],style:{color:"rgb(188, 84, 84)"}}]};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt=n(38395),rt=n.n(nt),at=n(74455),ot=n.n(at),lt=c.useState,it=c.useEffect,st=c.useRef,ut={code:function(e){var t=e.children;return e.className,e.live,e.render,(0,H.kt)(Ke,tt(tt({},Ye),{},{theme:Ze,code:t.trim(),language:"javascript"}),(function(e){var t=e.className,n=e.style,r=e.tokens,a=e.getLineProps,o=e.getTokenProps;return(0,H.kt)("pre",{className:t,style:tt(tt({},n),{},{padding:"0 15px"})},r.map((function(e,t){return(0,H.kt)("div",tt({key:t},a({line:e,key:t})),e.map((function(e,t){return(0,H.kt)("span",tt({key:t},o({token:e,key:t})))})))})))}))},link:function(t){var n=t.title,r=t.href,a=t.children,o=r.replace(/(\/|\/show\/|\/show)$/g,"");if(/^(http(?:|s):)\/\/(jsfiddle.net|runjs.cn|codepen.io|codesandbox.io)/.test(o)&&!/^(https|http):\/\/(jsfiddle.net|runjs.cn|codepen.io|codesandbox.io)(?:|\/)$/.test(o)){var l=/(https|http):\/\/runjs.cn\/code\/(.*)/gi.exec(o),i=/(https|http):\/\/codepen.io\/(.*)\/pen\/(.*)/gi.exec(o),s=/(https|http):\/\/codesandbox.io\/(s|embed)\/(.*)/gi.exec(o);return o=l&&l.length>2?"http://sandbox.runjs.cn/show/".concat(l[2]):i&&4===i.length?"https://codepen.io/".concat(i[2],"/embed/").concat(i[3],"?height=400"):s&&4===s.length?"https://codesandbox.io/embed/".concat(s[3]):"".concat(o,"/show/"),(0,e.jsx)("iframe",{frameBorder:0,allowFullScreen:"allowfullscreen",className:rt().frame,src:o,title:o})}return(0,e.jsx)("a",{href:r,title:n,children:a})}};const pt=function(t){var r=t.props,a=r.relative,o=r.name,l=function(){return a?a.slice(1,a.length-3):null},i=lt(function(){var e=l();if(e)return function(){return n(70214)("./".concat(e,".md")).default}}()),s=z()(i,2),u=s[0],p=s[1],c=st(null);it((function(){var e;(e=l())&&n(40259)("./".concat(e,".md")).then((function(e){p((function(){return e.default||e}))}))}),[]);var m=function(){return o?o.replace(".md",""):""};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ze,{children:[(0,e.jsx)("title",{children:m()}),(0,e.jsx)("meta",{name:m(),content:m()})]}),u?(0,e.jsx)("div",{className:q()("markdown",ot().markdown,ot().markdownwrapper),ref:c,children:(0,e.jsx)(H.Zo,{components:ut,children:(0,e.jsx)(u,{})})}):null]})};function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n(55180);n(319),n(87757),n(48926),n(34575),n(81506),n(93913),n(2205),n(78585),n(29754);var mt=n(18923),dt=n.n(mt);function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",r=arguments.length>3?arguments[3]:void 0;return e.forEach((function(e){var a="".concat(n).concat(e.name).replace(/.md$/,""),o=e.mdconf,l=p()(e,["mdconf"]);t.push({path:a,mdconf:o||{title:e.name},props:ft({},l),article:r||e.name}),e.children&&e.children.length>0&&t.concat(kt(e.children,t,"".concat(a,"/"),r||e.name))})),t}function bt(e,t,n){var r=[];return e.forEach((function(e){var a="".concat(t||"","/").concat(e.name).replace(/.md$/,"");"directory"===e.type?e.children&&e.children.length>0?(e.title=e.name.replace(e.extension,""),e.mdconf={},e.props={isEmpty:!0},e.children=bt(e.children,a,n||e.name)):(e.title=e.name.replace(e.extension,""),e.mdconf={title:e.name},e.props={isEmpty:!0},e.children=[]):(e.title=e.mdconf&&e.mdconf.title?e.mdconf.title:e.name.replace(e.extension,""),e.mdconf||(e.props={isEmpty:!0})),e.routePath=a,e.article=n||e.name,r.push(e)})),r}var gt=function(e){var t=function(t){var n=t.wrappedComponentRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return c.createElement(k.Z,{children:function(t){return c.createElement(e,b({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:d().func},f()(t,e)}((function(t){var r=l()({},t),a=ft({routeData:kt(dt()),menuSource:bt(dt())},r);return(0,e.jsx)(g.Z,{children:(0,e.jsx)(y.Z,{path:"/",render:function(t){return function(t,r){r.routeData&&r.routeData.length>0&&r.routeData.map((function(e){return e.component=pt,e}));var a=n(7920).Z;return(0,e.jsx)(a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r))}(0,ft(ft({},t),a))}})})}));function yt(){return(0,e.jsx)(M,{children:(0,e.jsx)(gt,{})})}a.TA?(document.getElementById("root").innerHTML=r.renderToString((0,e.jsx)(yt,{})),t.hydrate((0,e.jsx)(yt,{}),document.getElementById("root"))):a.WQ?document.getElementById("root").innerHTML=r.renderToString((0,e.jsx)(yt,{})):t.hydrate((0,e.jsx)(yt,{}),document.getElementById("root"))})()})();